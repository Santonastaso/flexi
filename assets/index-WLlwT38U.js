(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(a){if(a.ep)return;a.ep=!0;const o=n(a);fetch(a.href,o)}})();function im(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function ZT(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function i(){var a=!1;try{a=this instanceof i}catch{}return a?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var a=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(n,i,a.get?a:{enumerable:!0,get:function(){return t[i]}})}),n}var zf={exports:{}},Zo={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F_;function JT(){if(F_)return Zo;F_=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,a,o){var l=null;if(o!==void 0&&(l=""+o),a.key!==void 0&&(l=""+a.key),"key"in a){o={};for(var u in a)u!=="key"&&(o[u]=a[u])}else o=a;return a=o.ref,{$$typeof:t,type:i,key:l,ref:a!==void 0?a:null,props:o}}return Zo.Fragment=e,Zo.jsx=n,Zo.jsxs=n,Zo}var z_;function eC(){return z_||(z_=1,zf.exports=JT()),zf.exports}var _=eC(),Bf={exports:{}},Ue={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B_;function tC(){if(B_)return Ue;B_=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),p=Symbol.iterator;function y(k){return k===null||typeof k!="object"?null:(k=p&&k[p]||k["@@iterator"],typeof k=="function"?k:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,w={};function x(k,Z,re){this.props=k,this.context=Z,this.refs=w,this.updater=re||b}x.prototype.isReactComponent={},x.prototype.setState=function(k,Z){if(typeof k!="object"&&typeof k!="function"&&k!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,k,Z,"setState")},x.prototype.forceUpdate=function(k){this.updater.enqueueForceUpdate(this,k,"forceUpdate")};function E(){}E.prototype=x.prototype;function C(k,Z,re){this.props=k,this.context=Z,this.refs=w,this.updater=re||b}var R=C.prototype=new E;R.constructor=C,S(R,x.prototype),R.isPureReactComponent=!0;var M=Array.isArray,D={H:null,A:null,T:null,S:null,V:null},I=Object.prototype.hasOwnProperty;function L(k,Z,re,oe,ge,xe){return re=xe.ref,{$$typeof:t,type:k,key:Z,ref:re!==void 0?re:null,props:xe}}function z(k,Z){return L(k.type,Z,void 0,void 0,void 0,k.props)}function P(k){return typeof k=="object"&&k!==null&&k.$$typeof===t}function K(k){var Z={"=":"=0",":":"=2"};return"$"+k.replace(/[=:]/g,function(re){return Z[re]})}var X=/\/+/g;function H(k,Z){return typeof k=="object"&&k!==null&&k.key!=null?K(""+k.key):Z.toString(36)}function ee(){}function se(k){switch(k.status){case"fulfilled":return k.value;case"rejected":throw k.reason;default:switch(typeof k.status=="string"?k.then(ee,ee):(k.status="pending",k.then(function(Z){k.status==="pending"&&(k.status="fulfilled",k.value=Z)},function(Z){k.status==="pending"&&(k.status="rejected",k.reason=Z)})),k.status){case"fulfilled":return k.value;case"rejected":throw k.reason}}throw k}function te(k,Z,re,oe,ge){var xe=typeof k;(xe==="undefined"||xe==="boolean")&&(k=null);var fe=!1;if(k===null)fe=!0;else switch(xe){case"bigint":case"string":case"number":fe=!0;break;case"object":switch(k.$$typeof){case t:case e:fe=!0;break;case g:return fe=k._init,te(fe(k._payload),Z,re,oe,ge)}}if(fe)return ge=ge(k),fe=oe===""?"."+H(k,0):oe,M(ge)?(re="",fe!=null&&(re=fe.replace(X,"$&/")+"/"),te(ge,Z,re,"",function(ke){return ke})):ge!=null&&(P(ge)&&(ge=z(ge,re+(ge.key==null||k&&k.key===ge.key?"":(""+ge.key).replace(X,"$&/")+"/")+fe)),Z.push(ge)),1;fe=0;var vt=oe===""?".":oe+":";if(M(k))for(var $e=0;$e<k.length;$e++)oe=k[$e],xe=vt+H(oe,$e),fe+=te(oe,Z,re,xe,ge);else if($e=y(k),typeof $e=="function")for(k=$e.call(k),$e=0;!(oe=k.next()).done;)oe=oe.value,xe=vt+H(oe,$e++),fe+=te(oe,Z,re,xe,ge);else if(xe==="object"){if(typeof k.then=="function")return te(se(k),Z,re,oe,ge);throw Z=String(k),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return fe}function U(k,Z,re){if(k==null)return k;var oe=[],ge=0;return te(k,oe,"","",function(xe){return Z.call(re,xe,ge++)}),oe}function Y(k){if(k._status===-1){var Z=k._result;Z=Z(),Z.then(function(re){(k._status===0||k._status===-1)&&(k._status=1,k._result=re)},function(re){(k._status===0||k._status===-1)&&(k._status=2,k._result=re)}),k._status===-1&&(k._status=0,k._result=Z)}if(k._status===1)return k._result.default;throw k._result}var le=typeof reportError=="function"?reportError:function(k){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof k=="object"&&k!==null&&typeof k.message=="string"?String(k.message):String(k),error:k});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",k);return}console.error(k)};function ue(){}return Ue.Children={map:U,forEach:function(k,Z,re){U(k,function(){Z.apply(this,arguments)},re)},count:function(k){var Z=0;return U(k,function(){Z++}),Z},toArray:function(k){return U(k,function(Z){return Z})||[]},only:function(k){if(!P(k))throw Error("React.Children.only expected to receive a single React element child.");return k}},Ue.Component=x,Ue.Fragment=n,Ue.Profiler=a,Ue.PureComponent=C,Ue.StrictMode=i,Ue.Suspense=d,Ue.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,Ue.__COMPILER_RUNTIME={__proto__:null,c:function(k){return D.H.useMemoCache(k)}},Ue.cache=function(k){return function(){return k.apply(null,arguments)}},Ue.cloneElement=function(k,Z,re){if(k==null)throw Error("The argument must be a React element, but you passed "+k+".");var oe=S({},k.props),ge=k.key,xe=void 0;if(Z!=null)for(fe in Z.ref!==void 0&&(xe=void 0),Z.key!==void 0&&(ge=""+Z.key),Z)!I.call(Z,fe)||fe==="key"||fe==="__self"||fe==="__source"||fe==="ref"&&Z.ref===void 0||(oe[fe]=Z[fe]);var fe=arguments.length-2;if(fe===1)oe.children=re;else if(1<fe){for(var vt=Array(fe),$e=0;$e<fe;$e++)vt[$e]=arguments[$e+2];oe.children=vt}return L(k.type,ge,void 0,void 0,xe,oe)},Ue.createContext=function(k){return k={$$typeof:l,_currentValue:k,_currentValue2:k,_threadCount:0,Provider:null,Consumer:null},k.Provider=k,k.Consumer={$$typeof:o,_context:k},k},Ue.createElement=function(k,Z,re){var oe,ge={},xe=null;if(Z!=null)for(oe in Z.key!==void 0&&(xe=""+Z.key),Z)I.call(Z,oe)&&oe!=="key"&&oe!=="__self"&&oe!=="__source"&&(ge[oe]=Z[oe]);var fe=arguments.length-2;if(fe===1)ge.children=re;else if(1<fe){for(var vt=Array(fe),$e=0;$e<fe;$e++)vt[$e]=arguments[$e+2];ge.children=vt}if(k&&k.defaultProps)for(oe in fe=k.defaultProps,fe)ge[oe]===void 0&&(ge[oe]=fe[oe]);return L(k,xe,void 0,void 0,null,ge)},Ue.createRef=function(){return{current:null}},Ue.forwardRef=function(k){return{$$typeof:u,render:k}},Ue.isValidElement=P,Ue.lazy=function(k){return{$$typeof:g,_payload:{_status:-1,_result:k},_init:Y}},Ue.memo=function(k,Z){return{$$typeof:f,type:k,compare:Z===void 0?null:Z}},Ue.startTransition=function(k){var Z=D.T,re={};D.T=re;try{var oe=k(),ge=D.S;ge!==null&&ge(re,oe),typeof oe=="object"&&oe!==null&&typeof oe.then=="function"&&oe.then(ue,le)}catch(xe){le(xe)}finally{D.T=Z}},Ue.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},Ue.use=function(k){return D.H.use(k)},Ue.useActionState=function(k,Z,re){return D.H.useActionState(k,Z,re)},Ue.useCallback=function(k,Z){return D.H.useCallback(k,Z)},Ue.useContext=function(k){return D.H.useContext(k)},Ue.useDebugValue=function(){},Ue.useDeferredValue=function(k,Z){return D.H.useDeferredValue(k,Z)},Ue.useEffect=function(k,Z,re){var oe=D.H;if(typeof re=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return oe.useEffect(k,Z)},Ue.useId=function(){return D.H.useId()},Ue.useImperativeHandle=function(k,Z,re){return D.H.useImperativeHandle(k,Z,re)},Ue.useInsertionEffect=function(k,Z){return D.H.useInsertionEffect(k,Z)},Ue.useLayoutEffect=function(k,Z){return D.H.useLayoutEffect(k,Z)},Ue.useMemo=function(k,Z){return D.H.useMemo(k,Z)},Ue.useOptimistic=function(k,Z){return D.H.useOptimistic(k,Z)},Ue.useReducer=function(k,Z,re){return D.H.useReducer(k,Z,re)},Ue.useRef=function(k){return D.H.useRef(k)},Ue.useState=function(k){return D.H.useState(k)},Ue.useSyncExternalStore=function(k,Z,re){return D.H.useSyncExternalStore(k,Z,re)},Ue.useTransition=function(){return D.H.useTransition()},Ue.version="19.1.1",Ue}var H_;function sm(){return H_||(H_=1,Bf.exports=tC()),Bf.exports}var A=sm();const Ie=im(A);var Hf={exports:{}},Jo={},$f={exports:{}},Vf={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $_;function nC(){return $_||($_=1,(function(t){function e(U,Y){var le=U.length;U.push(Y);e:for(;0<le;){var ue=le-1>>>1,k=U[ue];if(0<a(k,Y))U[ue]=Y,U[le]=k,le=ue;else break e}}function n(U){return U.length===0?null:U[0]}function i(U){if(U.length===0)return null;var Y=U[0],le=U.pop();if(le!==Y){U[0]=le;e:for(var ue=0,k=U.length,Z=k>>>1;ue<Z;){var re=2*(ue+1)-1,oe=U[re],ge=re+1,xe=U[ge];if(0>a(oe,le))ge<k&&0>a(xe,oe)?(U[ue]=xe,U[ge]=le,ue=ge):(U[ue]=oe,U[re]=le,ue=re);else if(ge<k&&0>a(xe,le))U[ue]=xe,U[ge]=le,ue=ge;else break e}}return Y}function a(U,Y){var le=U.sortIndex-Y.sortIndex;return le!==0?le:U.id-Y.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();t.unstable_now=function(){return l.now()-u}}var d=[],f=[],g=1,p=null,y=3,b=!1,S=!1,w=!1,x=!1,E=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function M(U){for(var Y=n(f);Y!==null;){if(Y.callback===null)i(f);else if(Y.startTime<=U)i(f),Y.sortIndex=Y.expirationTime,e(d,Y);else break;Y=n(f)}}function D(U){if(w=!1,M(U),!S)if(n(d)!==null)S=!0,I||(I=!0,H());else{var Y=n(f);Y!==null&&te(D,Y.startTime-U)}}var I=!1,L=-1,z=5,P=-1;function K(){return x?!0:!(t.unstable_now()-P<z)}function X(){if(x=!1,I){var U=t.unstable_now();P=U;var Y=!0;try{e:{S=!1,w&&(w=!1,C(L),L=-1),b=!0;var le=y;try{t:{for(M(U),p=n(d);p!==null&&!(p.expirationTime>U&&K());){var ue=p.callback;if(typeof ue=="function"){p.callback=null,y=p.priorityLevel;var k=ue(p.expirationTime<=U);if(U=t.unstable_now(),typeof k=="function"){p.callback=k,M(U),Y=!0;break t}p===n(d)&&i(d),M(U)}else i(d);p=n(d)}if(p!==null)Y=!0;else{var Z=n(f);Z!==null&&te(D,Z.startTime-U),Y=!1}}break e}finally{p=null,y=le,b=!1}Y=void 0}}finally{Y?H():I=!1}}}var H;if(typeof R=="function")H=function(){R(X)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,se=ee.port2;ee.port1.onmessage=X,H=function(){se.postMessage(null)}}else H=function(){E(X,0)};function te(U,Y){L=E(function(){U(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_next=function(U){switch(y){case 1:case 2:case 3:var Y=3;break;default:Y=y}var le=y;y=Y;try{return U()}finally{y=le}},t.unstable_requestPaint=function(){x=!0},t.unstable_runWithPriority=function(U,Y){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var le=y;y=U;try{return Y()}finally{y=le}},t.unstable_scheduleCallback=function(U,Y,le){var ue=t.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?ue+le:ue):le=ue,U){case 1:var k=-1;break;case 2:k=250;break;case 5:k=1073741823;break;case 4:k=1e4;break;default:k=5e3}return k=le+k,U={id:g++,callback:Y,priorityLevel:U,startTime:le,expirationTime:k,sortIndex:-1},le>ue?(U.sortIndex=le,e(f,U),n(d)===null&&U===n(f)&&(w?(C(L),L=-1):w=!0,te(D,le-ue))):(U.sortIndex=k,e(d,U),S||b||(S=!0,I||(I=!0,H()))),U},t.unstable_shouldYield=K,t.unstable_wrapCallback=function(U){var Y=y;return function(){var le=y;y=Y;try{return U.apply(this,arguments)}finally{y=le}}}})(Vf)),Vf}var V_;function iC(){return V_||(V_=1,$f.exports=nC()),$f.exports}var Gf={exports:{}},mn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var G_;function sC(){if(G_)return mn;G_=1;var t=sm();function e(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)f+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");function o(d,f,g){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:p==null?null:""+p,children:d,containerInfo:f,implementation:g}}var l=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(d,f){if(d==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return mn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,mn.createPortal=function(d,f){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return o(d,f,null,g)},mn.flushSync=function(d){var f=l.T,g=i.p;try{if(l.T=null,i.p=2,d)return d()}finally{l.T=f,i.p=g,i.d.f()}},mn.preconnect=function(d,f){typeof d=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,i.d.C(d,f))},mn.prefetchDNS=function(d){typeof d=="string"&&i.d.D(d)},mn.preinit=function(d,f){if(typeof d=="string"&&f&&typeof f.as=="string"){var g=f.as,p=u(g,f.crossOrigin),y=typeof f.integrity=="string"?f.integrity:void 0,b=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;g==="style"?i.d.S(d,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:p,integrity:y,fetchPriority:b}):g==="script"&&i.d.X(d,{crossOrigin:p,integrity:y,fetchPriority:b,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},mn.preinitModule=function(d,f){if(typeof d=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var g=u(f.as,f.crossOrigin);i.d.M(d,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&i.d.M(d)},mn.preload=function(d,f){if(typeof d=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var g=f.as,p=u(g,f.crossOrigin);i.d.L(d,g,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},mn.preloadModule=function(d,f){if(typeof d=="string")if(f){var g=u(f.as,f.crossOrigin);i.d.m(d,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else i.d.m(d)},mn.requestFormReset=function(d){i.d.r(d)},mn.unstable_batchedUpdates=function(d,f){return d(f)},mn.useFormState=function(d,f,g){return l.H.useFormState(d,f,g)},mn.useFormStatus=function(){return l.H.useHostTransitionStatus()},mn.version="19.1.1",mn}var q_;function AS(){if(q_)return Gf.exports;q_=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Gf.exports=sC(),Gf.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Y_;function aC(){if(Y_)return Jo;Y_=1;var t=iC(),e=sm(),n=AS();function i(s){var r="https://react.dev/errors/"+s;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)r+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+s+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function o(s){var r=s,c=s;if(s.alternate)for(;r.return;)r=r.return;else{s=r;do r=s,(r.flags&4098)!==0&&(c=r.return),s=r.return;while(s)}return r.tag===3?c:null}function l(s){if(s.tag===13){var r=s.memoizedState;if(r===null&&(s=s.alternate,s!==null&&(r=s.memoizedState)),r!==null)return r.dehydrated}return null}function u(s){if(o(s)!==s)throw Error(i(188))}function d(s){var r=s.alternate;if(!r){if(r=o(s),r===null)throw Error(i(188));return r!==s?null:s}for(var c=s,h=r;;){var m=c.return;if(m===null)break;var v=m.alternate;if(v===null){if(h=m.return,h!==null){c=h;continue}break}if(m.child===v.child){for(v=m.child;v;){if(v===c)return u(m),s;if(v===h)return u(m),r;v=v.sibling}throw Error(i(188))}if(c.return!==h.return)c=m,h=v;else{for(var T=!1,O=m.child;O;){if(O===c){T=!0,c=m,h=v;break}if(O===h){T=!0,h=m,c=v;break}O=O.sibling}if(!T){for(O=v.child;O;){if(O===c){T=!0,c=v,h=m;break}if(O===h){T=!0,h=v,c=m;break}O=O.sibling}if(!T)throw Error(i(189))}}if(c.alternate!==h)throw Error(i(190))}if(c.tag!==3)throw Error(i(188));return c.stateNode.current===c?s:r}function f(s){var r=s.tag;if(r===5||r===26||r===27||r===6)return s;for(s=s.child;s!==null;){if(r=f(s),r!==null)return r;s=s.sibling}return null}var g=Object.assign,p=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),C=Symbol.for("react.consumer"),R=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),z=Symbol.for("react.lazy"),P=Symbol.for("react.activity"),K=Symbol.for("react.memo_cache_sentinel"),X=Symbol.iterator;function H(s){return s===null||typeof s!="object"?null:(s=X&&s[X]||s["@@iterator"],typeof s=="function"?s:null)}var ee=Symbol.for("react.client.reference");function se(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===ee?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case S:return"Fragment";case x:return"Profiler";case w:return"StrictMode";case D:return"Suspense";case I:return"SuspenseList";case P:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case b:return"Portal";case R:return(s.displayName||"Context")+".Provider";case C:return(s._context.displayName||"Context")+".Consumer";case M:var r=s.render;return s=s.displayName,s||(s=r.displayName||r.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case L:return r=s.displayName||null,r!==null?r:se(s.type)||"Memo";case z:r=s._payload,s=s._init;try{return se(s(r))}catch{}}return null}var te=Array.isArray,U=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le={pending:!1,data:null,method:null,action:null},ue=[],k=-1;function Z(s){return{current:s}}function re(s){0>k||(s.current=ue[k],ue[k]=null,k--)}function oe(s,r){k++,ue[k]=s.current,s.current=r}var ge=Z(null),xe=Z(null),fe=Z(null),vt=Z(null);function $e(s,r){switch(oe(fe,r),oe(xe,s),oe(ge,null),r.nodeType){case 9:case 11:s=(s=r.documentElement)&&(s=s.namespaceURI)?f_(s):0;break;default:if(s=r.tagName,r=r.namespaceURI)r=f_(r),s=g_(r,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}re(ge),oe(ge,s)}function ke(){re(ge),re(xe),re(fe)}function et(s){s.memoizedState!==null&&oe(vt,s);var r=ge.current,c=g_(r,s.type);r!==c&&(oe(xe,s),oe(ge,c))}function Lt(s){xe.current===s&&(re(ge),re(xe)),vt.current===s&&(re(vt),Yo._currentValue=le)}var he=Object.prototype.hasOwnProperty,_e=t.unstable_scheduleCallback,Ee=t.unstable_cancelCallback,Ge=t.unstable_shouldYield,Ne=t.unstable_requestPaint,Ze=t.unstable_now,un=t.unstable_getCurrentPriorityLevel,Dt=t.unstable_ImmediatePriority,j=t.unstable_UserBlockingPriority,$=t.unstable_NormalPriority,Q=t.unstable_LowPriority,de=t.unstable_IdlePriority,ce=t.log,ae=t.unstable_setDisableYieldValue,ve=null,Te=null;function je(s){if(typeof ce=="function"&&ae(s),Te&&typeof Te.setStrictMode=="function")try{Te.setStrictMode(ve,s)}catch{}}var We=Math.clz32?Math.clz32:Ba,Bi=Math.log,zt=Math.LN2;function Ba(s){return s>>>=0,s===0?32:31-(Bi(s)/zt|0)|0}var xi=256,Ei=4194304;function jn(s){var r=s&42;if(r!==0)return r;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Ti(s,r,c){var h=s.pendingLanes;if(h===0)return 0;var m=0,v=s.suspendedLanes,T=s.pingedLanes;s=s.warmLanes;var O=h&134217727;return O!==0?(h=O&~v,h!==0?m=jn(h):(T&=O,T!==0?m=jn(T):c||(c=O&~s,c!==0&&(m=jn(c))))):(O=h&~v,O!==0?m=jn(O):T!==0?m=jn(T):c||(c=h&~s,c!==0&&(m=jn(c)))),m===0?0:r!==0&&r!==m&&(r&v)===0&&(v=m&-m,c=r&-r,v>=c||v===32&&(c&4194048)!==0)?r:m}function Hi(s,r){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&r)===0}function aa(s,r){switch(s){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ic(){var s=xi;return xi<<=1,(xi&4194048)===0&&(xi=256),s}function sc(){var s=Ei;return Ei<<=1,(Ei&62914560)===0&&(Ei=4194304),s}function io(s){for(var r=[],c=0;31>c;c++)r.push(s);return r}function Ct(s,r){s.pendingLanes|=r,r!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function _n(s,r,c,h,m,v){var T=s.pendingLanes;s.pendingLanes=c,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=c,s.entangledLanes&=c,s.errorRecoveryDisabledLanes&=c,s.shellSuspendCounter=0;var O=s.entanglements,N=s.expirationTimes,G=s.hiddenUpdates;for(c=T&~c;0<c;){var J=31-We(c),ie=1<<J;O[J]=0,N[J]=-1;var q=G[J];if(q!==null)for(G[J]=null,J=0;J<q.length;J++){var W=q[J];W!==null&&(W.lane&=-536870913)}c&=~ie}h!==0&&dn(s,h,0),v!==0&&m===0&&s.tag!==0&&(s.suspendedLanes|=v&~(T&~r))}function dn(s,r,c){s.pendingLanes|=r,s.suspendedLanes&=~r;var h=31-We(r);s.entangledLanes|=r,s.entanglements[h]=s.entanglements[h]|1073741824|c&4194090}function li(s,r){var c=s.entangledLanes|=r;for(s=s.entanglements;c;){var h=31-We(c),m=1<<h;m&r|s[h]&r&&(s[h]|=r),c&=~m}}function hn(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function rn(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Ln(){var s=Y.p;return s!==0?s:(s=window.event,s===void 0?32:N_(s.type))}function Ss(s,r){var c=Y.p;try{return Y.p=s,r()}finally{Y.p=c}}var ht=Math.random().toString(36).slice(2),yt="__reactFiber$"+ht,_t="__reactProps$"+ht,fn="__reactContainer$"+ht,$i="__reactEvents$"+ht,ra="__reactListeners$"+ht,Ci="__reactHandles$"+ht,ws="__reactResources$"+ht,Vi="__reactMarker$"+ht;function kd(s){delete s[yt],delete s[_t],delete s[$i],delete s[ra],delete s[Ci]}function Ha(s){var r=s[yt];if(r)return r;for(var c=s.parentNode;c;){if(r=c[fn]||c[yt]){if(c=r.alternate,r.child!==null||c!==null&&c.child!==null)for(s=y_(s);s!==null;){if(c=s[yt])return c;s=y_(s)}return r}s=c,c=s.parentNode}return null}function $a(s){if(s=s[yt]||s[fn]){var r=s.tag;if(r===5||r===6||r===13||r===26||r===27||r===3)return s}return null}function so(s){var r=s.tag;if(r===5||r===26||r===27||r===6)return s.stateNode;throw Error(i(33))}function Va(s){var r=s[ws];return r||(r=s[ws]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Kt(s){s[Vi]=!0}var np=new Set,ip={};function oa(s,r){Ga(s,r),Ga(s+"Capture",r)}function Ga(s,r){for(ip[s]=r,s=0;s<r.length;s++)np.add(r[s])}var Vx=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),sp={},ap={};function Gx(s){return he.call(ap,s)?!0:he.call(sp,s)?!1:Vx.test(s)?ap[s]=!0:(sp[s]=!0,!1)}function ac(s,r,c){if(Gx(r))if(c===null)s.removeAttribute(r);else{switch(typeof c){case"undefined":case"function":case"symbol":s.removeAttribute(r);return;case"boolean":var h=r.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){s.removeAttribute(r);return}}s.setAttribute(r,""+c)}}function rc(s,r,c){if(c===null)s.removeAttribute(r);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(r);return}s.setAttribute(r,""+c)}}function Gi(s,r,c,h){if(h===null)s.removeAttribute(c);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(c);return}s.setAttributeNS(r,c,""+h)}}var Nd,rp;function qa(s){if(Nd===void 0)try{throw Error()}catch(c){var r=c.stack.trim().match(/\n( *(at )?)/);Nd=r&&r[1]||"",rp=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Nd+s+rp}var jd=!1;function Ld(s,r){if(!s||jd)return"";jd=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(r){var ie=function(){throw Error()};if(Object.defineProperty(ie.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ie,[])}catch(W){var q=W}Reflect.construct(s,[],ie)}else{try{ie.call()}catch(W){q=W}s.call(ie.prototype)}}else{try{throw Error()}catch(W){q=W}(ie=s())&&typeof ie.catch=="function"&&ie.catch(function(){})}}catch(W){if(W&&q&&typeof W.stack=="string")return[W.stack,q.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=h.DetermineComponentFrameRoot(),T=v[0],O=v[1];if(T&&O){var N=T.split(`
`),G=O.split(`
`);for(m=h=0;h<N.length&&!N[h].includes("DetermineComponentFrameRoot");)h++;for(;m<G.length&&!G[m].includes("DetermineComponentFrameRoot");)m++;if(h===N.length||m===G.length)for(h=N.length-1,m=G.length-1;1<=h&&0<=m&&N[h]!==G[m];)m--;for(;1<=h&&0<=m;h--,m--)if(N[h]!==G[m]){if(h!==1||m!==1)do if(h--,m--,0>m||N[h]!==G[m]){var J=`
`+N[h].replace(" at new "," at ");return s.displayName&&J.includes("<anonymous>")&&(J=J.replace("<anonymous>",s.displayName)),J}while(1<=h&&0<=m);break}}}finally{jd=!1,Error.prepareStackTrace=c}return(c=s?s.displayName||s.name:"")?qa(c):""}function qx(s){switch(s.tag){case 26:case 27:case 5:return qa(s.type);case 16:return qa("Lazy");case 13:return qa("Suspense");case 19:return qa("SuspenseList");case 0:case 15:return Ld(s.type,!1);case 11:return Ld(s.type.render,!1);case 1:return Ld(s.type,!0);case 31:return qa("Activity");default:return""}}function op(s){try{var r="";do r+=qx(s),s=s.return;while(s);return r}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}function Gn(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function lp(s){var r=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Yx(s){var r=lp(s)?"checked":"value",c=Object.getOwnPropertyDescriptor(s.constructor.prototype,r),h=""+s[r];if(!s.hasOwnProperty(r)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var m=c.get,v=c.set;return Object.defineProperty(s,r,{configurable:!0,get:function(){return m.call(this)},set:function(T){h=""+T,v.call(this,T)}}),Object.defineProperty(s,r,{enumerable:c.enumerable}),{getValue:function(){return h},setValue:function(T){h=""+T},stopTracking:function(){s._valueTracker=null,delete s[r]}}}}function oc(s){s._valueTracker||(s._valueTracker=Yx(s))}function cp(s){if(!s)return!1;var r=s._valueTracker;if(!r)return!0;var c=r.getValue(),h="";return s&&(h=lp(s)?s.checked?"true":"false":s.value),s=h,s!==c?(r.setValue(s),!0):!1}function lc(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Wx=/[\n"\\]/g;function qn(s){return s.replace(Wx,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Id(s,r,c,h,m,v,T,O){s.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?s.type=T:s.removeAttribute("type"),r!=null?T==="number"?(r===0&&s.value===""||s.value!=r)&&(s.value=""+Gn(r)):s.value!==""+Gn(r)&&(s.value=""+Gn(r)):T!=="submit"&&T!=="reset"||s.removeAttribute("value"),r!=null?Ud(s,T,Gn(r)):c!=null?Ud(s,T,Gn(c)):h!=null&&s.removeAttribute("value"),m==null&&v!=null&&(s.defaultChecked=!!v),m!=null&&(s.checked=m&&typeof m!="function"&&typeof m!="symbol"),O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"?s.name=""+Gn(O):s.removeAttribute("name")}function up(s,r,c,h,m,v,T,O){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(s.type=v),r!=null||c!=null){if(!(v!=="submit"&&v!=="reset"||r!=null))return;c=c!=null?""+Gn(c):"",r=r!=null?""+Gn(r):c,O||r===s.value||(s.value=r),s.defaultValue=r}h=h??m,h=typeof h!="function"&&typeof h!="symbol"&&!!h,s.checked=O?s.checked:!!h,s.defaultChecked=!!h,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(s.name=T)}function Ud(s,r,c){r==="number"&&lc(s.ownerDocument)===s||s.defaultValue===""+c||(s.defaultValue=""+c)}function Ya(s,r,c,h){if(s=s.options,r){r={};for(var m=0;m<c.length;m++)r["$"+c[m]]=!0;for(c=0;c<s.length;c++)m=r.hasOwnProperty("$"+s[c].value),s[c].selected!==m&&(s[c].selected=m),m&&h&&(s[c].defaultSelected=!0)}else{for(c=""+Gn(c),r=null,m=0;m<s.length;m++){if(s[m].value===c){s[m].selected=!0,h&&(s[m].defaultSelected=!0);return}r!==null||s[m].disabled||(r=s[m])}r!==null&&(r.selected=!0)}}function dp(s,r,c){if(r!=null&&(r=""+Gn(r),r!==s.value&&(s.value=r),c==null)){s.defaultValue!==r&&(s.defaultValue=r);return}s.defaultValue=c!=null?""+Gn(c):""}function hp(s,r,c,h){if(r==null){if(h!=null){if(c!=null)throw Error(i(92));if(te(h)){if(1<h.length)throw Error(i(93));h=h[0]}c=h}c==null&&(c=""),r=c}c=Gn(r),s.defaultValue=c,h=s.textContent,h===c&&h!==""&&h!==null&&(s.value=h)}function Wa(s,r){if(r){var c=s.firstChild;if(c&&c===s.lastChild&&c.nodeType===3){c.nodeValue=r;return}}s.textContent=r}var Kx=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function fp(s,r,c){var h=r.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?h?s.setProperty(r,""):r==="float"?s.cssFloat="":s[r]="":h?s.setProperty(r,c):typeof c!="number"||c===0||Kx.has(r)?r==="float"?s.cssFloat=c:s[r]=(""+c).trim():s[r]=c+"px"}function gp(s,r,c){if(r!=null&&typeof r!="object")throw Error(i(62));if(s=s.style,c!=null){for(var h in c)!c.hasOwnProperty(h)||r!=null&&r.hasOwnProperty(h)||(h.indexOf("--")===0?s.setProperty(h,""):h==="float"?s.cssFloat="":s[h]="");for(var m in r)h=r[m],r.hasOwnProperty(m)&&c[m]!==h&&fp(s,m,h)}else for(var v in r)r.hasOwnProperty(v)&&fp(s,v,r[v])}function Pd(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xx=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Qx=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function cc(s){return Qx.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var Fd=null;function zd(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Ka=null,Xa=null;function mp(s){var r=$a(s);if(r&&(s=r.stateNode)){var c=s[_t]||null;e:switch(s=r.stateNode,r.type){case"input":if(Id(s,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),r=c.name,c.type==="radio"&&r!=null){for(c=s;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+qn(""+r)+'"][type="radio"]'),r=0;r<c.length;r++){var h=c[r];if(h!==s&&h.form===s.form){var m=h[_t]||null;if(!m)throw Error(i(90));Id(h,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(r=0;r<c.length;r++)h=c[r],h.form===s.form&&cp(h)}break e;case"textarea":dp(s,c.value,c.defaultValue);break e;case"select":r=c.value,r!=null&&Ya(s,!!c.multiple,r,!1)}}}var Bd=!1;function pp(s,r,c){if(Bd)return s(r,c);Bd=!0;try{var h=s(r);return h}finally{if(Bd=!1,(Ka!==null||Xa!==null)&&(Wc(),Ka&&(r=Ka,s=Xa,Xa=Ka=null,mp(r),s)))for(r=0;r<s.length;r++)mp(s[r])}}function ao(s,r){var c=s.stateNode;if(c===null)return null;var h=c[_t]||null;if(h===null)return null;c=h[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(s=s.type,h=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!h;break e;default:s=!1}if(s)return null;if(c&&typeof c!="function")throw Error(i(231,r,typeof c));return c}var qi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Hd=!1;if(qi)try{var ro={};Object.defineProperty(ro,"passive",{get:function(){Hd=!0}}),window.addEventListener("test",ro,ro),window.removeEventListener("test",ro,ro)}catch{Hd=!1}var xs=null,$d=null,uc=null;function vp(){if(uc)return uc;var s,r=$d,c=r.length,h,m="value"in xs?xs.value:xs.textContent,v=m.length;for(s=0;s<c&&r[s]===m[s];s++);var T=c-s;for(h=1;h<=T&&r[c-h]===m[v-h];h++);return uc=m.slice(s,1<h?1-h:void 0)}function dc(s){var r=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&r===13&&(s=13)):s=r,s===10&&(s=13),32<=s||s===13?s:0}function hc(){return!0}function yp(){return!1}function Cn(s){function r(c,h,m,v,T){this._reactName=c,this._targetInst=m,this.type=h,this.nativeEvent=v,this.target=T,this.currentTarget=null;for(var O in s)s.hasOwnProperty(O)&&(c=s[O],this[O]=c?c(v):v[O]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?hc:yp,this.isPropagationStopped=yp,this}return g(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=hc)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=hc)},persist:function(){},isPersistent:hc}),r}var la={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fc=Cn(la),oo=g({},la,{view:0,detail:0}),Zx=Cn(oo),Vd,Gd,lo,gc=g({},oo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Yd,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==lo&&(lo&&s.type==="mousemove"?(Vd=s.screenX-lo.screenX,Gd=s.screenY-lo.screenY):Gd=Vd=0,lo=s),Vd)},movementY:function(s){return"movementY"in s?s.movementY:Gd}}),_p=Cn(gc),Jx=g({},gc,{dataTransfer:0}),eE=Cn(Jx),tE=g({},oo,{relatedTarget:0}),qd=Cn(tE),nE=g({},la,{animationName:0,elapsedTime:0,pseudoElement:0}),iE=Cn(nE),sE=g({},la,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),aE=Cn(sE),rE=g({},la,{data:0}),bp=Cn(rE),oE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},lE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},cE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function uE(s){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(s):(s=cE[s])?!!r[s]:!1}function Yd(){return uE}var dE=g({},oo,{key:function(s){if(s.key){var r=oE[s.key]||s.key;if(r!=="Unidentified")return r}return s.type==="keypress"?(s=dc(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?lE[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Yd,charCode:function(s){return s.type==="keypress"?dc(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?dc(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),hE=Cn(dE),fE=g({},gc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Sp=Cn(fE),gE=g({},oo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Yd}),mE=Cn(gE),pE=g({},la,{propertyName:0,elapsedTime:0,pseudoElement:0}),vE=Cn(pE),yE=g({},gc,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),_E=Cn(yE),bE=g({},la,{newState:0,oldState:0}),SE=Cn(bE),wE=[9,13,27,32],Wd=qi&&"CompositionEvent"in window,co=null;qi&&"documentMode"in document&&(co=document.documentMode);var xE=qi&&"TextEvent"in window&&!co,wp=qi&&(!Wd||co&&8<co&&11>=co),xp=" ",Ep=!1;function Tp(s,r){switch(s){case"keyup":return wE.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Cp(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Qa=!1;function EE(s,r){switch(s){case"compositionend":return Cp(r);case"keypress":return r.which!==32?null:(Ep=!0,xp);case"textInput":return s=r.data,s===xp&&Ep?null:s;default:return null}}function TE(s,r){if(Qa)return s==="compositionend"||!Wd&&Tp(s,r)?(s=vp(),uc=$d=xs=null,Qa=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return wp&&r.locale!=="ko"?null:r.data;default:return null}}var CE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Rp(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r==="input"?!!CE[s.type]:r==="textarea"}function Ap(s,r,c,h){Ka?Xa?Xa.push(h):Xa=[h]:Ka=h,r=eu(r,"onChange"),0<r.length&&(c=new fc("onChange","change",null,c,h),s.push({event:c,listeners:r}))}var uo=null,ho=null;function RE(s){l_(s,0)}function mc(s){var r=so(s);if(cp(r))return s}function Op(s,r){if(s==="change")return r}var Dp=!1;if(qi){var Kd;if(qi){var Xd="oninput"in document;if(!Xd){var Mp=document.createElement("div");Mp.setAttribute("oninput","return;"),Xd=typeof Mp.oninput=="function"}Kd=Xd}else Kd=!1;Dp=Kd&&(!document.documentMode||9<document.documentMode)}function kp(){uo&&(uo.detachEvent("onpropertychange",Np),ho=uo=null)}function Np(s){if(s.propertyName==="value"&&mc(ho)){var r=[];Ap(r,ho,s,zd(s)),pp(RE,r)}}function AE(s,r,c){s==="focusin"?(kp(),uo=r,ho=c,uo.attachEvent("onpropertychange",Np)):s==="focusout"&&kp()}function OE(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return mc(ho)}function DE(s,r){if(s==="click")return mc(r)}function ME(s,r){if(s==="input"||s==="change")return mc(r)}function kE(s,r){return s===r&&(s!==0||1/s===1/r)||s!==s&&r!==r}var In=typeof Object.is=="function"?Object.is:kE;function fo(s,r){if(In(s,r))return!0;if(typeof s!="object"||s===null||typeof r!="object"||r===null)return!1;var c=Object.keys(s),h=Object.keys(r);if(c.length!==h.length)return!1;for(h=0;h<c.length;h++){var m=c[h];if(!he.call(r,m)||!In(s[m],r[m]))return!1}return!0}function jp(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Lp(s,r){var c=jp(s);s=0;for(var h;c;){if(c.nodeType===3){if(h=s+c.textContent.length,s<=r&&h>=r)return{node:c,offset:r-s};s=h}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=jp(c)}}function Ip(s,r){return s&&r?s===r?!0:s&&s.nodeType===3?!1:r&&r.nodeType===3?Ip(s,r.parentNode):"contains"in s?s.contains(r):s.compareDocumentPosition?!!(s.compareDocumentPosition(r)&16):!1:!1}function Up(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var r=lc(s.document);r instanceof s.HTMLIFrameElement;){try{var c=typeof r.contentWindow.location.href=="string"}catch{c=!1}if(c)s=r.contentWindow;else break;r=lc(s.document)}return r}function Qd(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r&&(r==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||r==="textarea"||s.contentEditable==="true")}var NE=qi&&"documentMode"in document&&11>=document.documentMode,Za=null,Zd=null,go=null,Jd=!1;function Pp(s,r,c){var h=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Jd||Za==null||Za!==lc(h)||(h=Za,"selectionStart"in h&&Qd(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),go&&fo(go,h)||(go=h,h=eu(Zd,"onSelect"),0<h.length&&(r=new fc("onSelect","select",null,r,c),s.push({event:r,listeners:h}),r.target=Za)))}function ca(s,r){var c={};return c[s.toLowerCase()]=r.toLowerCase(),c["Webkit"+s]="webkit"+r,c["Moz"+s]="moz"+r,c}var Ja={animationend:ca("Animation","AnimationEnd"),animationiteration:ca("Animation","AnimationIteration"),animationstart:ca("Animation","AnimationStart"),transitionrun:ca("Transition","TransitionRun"),transitionstart:ca("Transition","TransitionStart"),transitioncancel:ca("Transition","TransitionCancel"),transitionend:ca("Transition","TransitionEnd")},eh={},Fp={};qi&&(Fp=document.createElement("div").style,"AnimationEvent"in window||(delete Ja.animationend.animation,delete Ja.animationiteration.animation,delete Ja.animationstart.animation),"TransitionEvent"in window||delete Ja.transitionend.transition);function ua(s){if(eh[s])return eh[s];if(!Ja[s])return s;var r=Ja[s],c;for(c in r)if(r.hasOwnProperty(c)&&c in Fp)return eh[s]=r[c];return s}var zp=ua("animationend"),Bp=ua("animationiteration"),Hp=ua("animationstart"),jE=ua("transitionrun"),LE=ua("transitionstart"),IE=ua("transitioncancel"),$p=ua("transitionend"),Vp=new Map,th="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");th.push("scrollEnd");function ci(s,r){Vp.set(s,r),oa(r,[s])}var Gp=new WeakMap;function Yn(s,r){if(typeof s=="object"&&s!==null){var c=Gp.get(s);return c!==void 0?c:(r={value:s,source:r,stack:op(r)},Gp.set(s,r),r)}return{value:s,source:r,stack:op(r)}}var Wn=[],er=0,nh=0;function pc(){for(var s=er,r=nh=er=0;r<s;){var c=Wn[r];Wn[r++]=null;var h=Wn[r];Wn[r++]=null;var m=Wn[r];Wn[r++]=null;var v=Wn[r];if(Wn[r++]=null,h!==null&&m!==null){var T=h.pending;T===null?m.next=m:(m.next=T.next,T.next=m),h.pending=m}v!==0&&qp(c,m,v)}}function vc(s,r,c,h){Wn[er++]=s,Wn[er++]=r,Wn[er++]=c,Wn[er++]=h,nh|=h,s.lanes|=h,s=s.alternate,s!==null&&(s.lanes|=h)}function ih(s,r,c,h){return vc(s,r,c,h),yc(s)}function tr(s,r){return vc(s,null,null,r),yc(s)}function qp(s,r,c){s.lanes|=c;var h=s.alternate;h!==null&&(h.lanes|=c);for(var m=!1,v=s.return;v!==null;)v.childLanes|=c,h=v.alternate,h!==null&&(h.childLanes|=c),v.tag===22&&(s=v.stateNode,s===null||s._visibility&1||(m=!0)),s=v,v=v.return;return s.tag===3?(v=s.stateNode,m&&r!==null&&(m=31-We(c),s=v.hiddenUpdates,h=s[m],h===null?s[m]=[r]:h.push(r),r.lane=c|536870912),v):null}function yc(s){if(50<Fo)throw Fo=0,uf=null,Error(i(185));for(var r=s.return;r!==null;)s=r,r=s.return;return s.tag===3?s.stateNode:null}var nr={};function UE(s,r,c,h){this.tag=s,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Un(s,r,c,h){return new UE(s,r,c,h)}function sh(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Yi(s,r){var c=s.alternate;return c===null?(c=Un(s.tag,r,s.key,s.mode),c.elementType=s.elementType,c.type=s.type,c.stateNode=s.stateNode,c.alternate=s,s.alternate=c):(c.pendingProps=r,c.type=s.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=s.flags&65011712,c.childLanes=s.childLanes,c.lanes=s.lanes,c.child=s.child,c.memoizedProps=s.memoizedProps,c.memoizedState=s.memoizedState,c.updateQueue=s.updateQueue,r=s.dependencies,c.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},c.sibling=s.sibling,c.index=s.index,c.ref=s.ref,c.refCleanup=s.refCleanup,c}function Yp(s,r){s.flags&=65011714;var c=s.alternate;return c===null?(s.childLanes=0,s.lanes=r,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=c.childLanes,s.lanes=c.lanes,s.child=c.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=c.memoizedProps,s.memoizedState=c.memoizedState,s.updateQueue=c.updateQueue,s.type=c.type,r=c.dependencies,s.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),s}function _c(s,r,c,h,m,v){var T=0;if(h=s,typeof s=="function")sh(s)&&(T=1);else if(typeof s=="string")T=FT(s,c,ge.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case P:return s=Un(31,c,r,m),s.elementType=P,s.lanes=v,s;case S:return da(c.children,m,v,r);case w:T=8,m|=24;break;case x:return s=Un(12,c,r,m|2),s.elementType=x,s.lanes=v,s;case D:return s=Un(13,c,r,m),s.elementType=D,s.lanes=v,s;case I:return s=Un(19,c,r,m),s.elementType=I,s.lanes=v,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case E:case R:T=10;break e;case C:T=9;break e;case M:T=11;break e;case L:T=14;break e;case z:T=16,h=null;break e}T=29,c=Error(i(130,s===null?"null":typeof s,"")),h=null}return r=Un(T,c,r,m),r.elementType=s,r.type=h,r.lanes=v,r}function da(s,r,c,h){return s=Un(7,s,h,r),s.lanes=c,s}function ah(s,r,c){return s=Un(6,s,null,r),s.lanes=c,s}function rh(s,r,c){return r=Un(4,s.children!==null?s.children:[],s.key,r),r.lanes=c,r.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},r}var ir=[],sr=0,bc=null,Sc=0,Kn=[],Xn=0,ha=null,Wi=1,Ki="";function fa(s,r){ir[sr++]=Sc,ir[sr++]=bc,bc=s,Sc=r}function Wp(s,r,c){Kn[Xn++]=Wi,Kn[Xn++]=Ki,Kn[Xn++]=ha,ha=s;var h=Wi;s=Ki;var m=32-We(h)-1;h&=~(1<<m),c+=1;var v=32-We(r)+m;if(30<v){var T=m-m%5;v=(h&(1<<T)-1).toString(32),h>>=T,m-=T,Wi=1<<32-We(r)+m|c<<m|h,Ki=v+s}else Wi=1<<v|c<<m|h,Ki=s}function oh(s){s.return!==null&&(fa(s,1),Wp(s,1,0))}function lh(s){for(;s===bc;)bc=ir[--sr],ir[sr]=null,Sc=ir[--sr],ir[sr]=null;for(;s===ha;)ha=Kn[--Xn],Kn[Xn]=null,Ki=Kn[--Xn],Kn[Xn]=null,Wi=Kn[--Xn],Kn[Xn]=null}var bn=null,Rt=null,Qe=!1,ga=null,Ri=!1,ch=Error(i(519));function ma(s){var r=Error(i(418,""));throw vo(Yn(r,s)),ch}function Kp(s){var r=s.stateNode,c=s.type,h=s.memoizedProps;switch(r[yt]=s,r[_t]=h,c){case"dialog":Be("cancel",r),Be("close",r);break;case"iframe":case"object":case"embed":Be("load",r);break;case"video":case"audio":for(c=0;c<Bo.length;c++)Be(Bo[c],r);break;case"source":Be("error",r);break;case"img":case"image":case"link":Be("error",r),Be("load",r);break;case"details":Be("toggle",r);break;case"input":Be("invalid",r),up(r,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0),oc(r);break;case"select":Be("invalid",r);break;case"textarea":Be("invalid",r),hp(r,h.value,h.defaultValue,h.children),oc(r)}c=h.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||r.textContent===""+c||h.suppressHydrationWarning===!0||h_(r.textContent,c)?(h.popover!=null&&(Be("beforetoggle",r),Be("toggle",r)),h.onScroll!=null&&Be("scroll",r),h.onScrollEnd!=null&&Be("scrollend",r),h.onClick!=null&&(r.onclick=tu),r=!0):r=!1,r||ma(s)}function Xp(s){for(bn=s.return;bn;)switch(bn.tag){case 5:case 13:Ri=!1;return;case 27:case 3:Ri=!0;return;default:bn=bn.return}}function mo(s){if(s!==bn)return!1;if(!Qe)return Xp(s),Qe=!0,!1;var r=s.tag,c;if((c=r!==3&&r!==27)&&((c=r===5)&&(c=s.type,c=!(c!=="form"&&c!=="button")||Cf(s.type,s.memoizedProps)),c=!c),c&&Rt&&ma(s),Xp(s),r===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));e:{for(s=s.nextSibling,r=0;s;){if(s.nodeType===8)if(c=s.data,c==="/$"){if(r===0){Rt=di(s.nextSibling);break e}r--}else c!=="$"&&c!=="$!"&&c!=="$?"||r++;s=s.nextSibling}Rt=null}}else r===27?(r=Rt,Fs(s.type)?(s=Df,Df=null,Rt=s):Rt=r):Rt=bn?di(s.stateNode.nextSibling):null;return!0}function po(){Rt=bn=null,Qe=!1}function Qp(){var s=ga;return s!==null&&(On===null?On=s:On.push.apply(On,s),ga=null),s}function vo(s){ga===null?ga=[s]:ga.push(s)}var uh=Z(null),pa=null,Xi=null;function Es(s,r,c){oe(uh,r._currentValue),r._currentValue=c}function Qi(s){s._currentValue=uh.current,re(uh)}function dh(s,r,c){for(;s!==null;){var h=s.alternate;if((s.childLanes&r)!==r?(s.childLanes|=r,h!==null&&(h.childLanes|=r)):h!==null&&(h.childLanes&r)!==r&&(h.childLanes|=r),s===c)break;s=s.return}}function hh(s,r,c,h){var m=s.child;for(m!==null&&(m.return=s);m!==null;){var v=m.dependencies;if(v!==null){var T=m.child;v=v.firstContext;e:for(;v!==null;){var O=v;v=m;for(var N=0;N<r.length;N++)if(O.context===r[N]){v.lanes|=c,O=v.alternate,O!==null&&(O.lanes|=c),dh(v.return,c,s),h||(T=null);break e}v=O.next}}else if(m.tag===18){if(T=m.return,T===null)throw Error(i(341));T.lanes|=c,v=T.alternate,v!==null&&(v.lanes|=c),dh(T,c,s),T=null}else T=m.child;if(T!==null)T.return=m;else for(T=m;T!==null;){if(T===s){T=null;break}if(m=T.sibling,m!==null){m.return=T.return,T=m;break}T=T.return}m=T}}function yo(s,r,c,h){s=null;for(var m=r,v=!1;m!==null;){if(!v){if((m.flags&524288)!==0)v=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var T=m.alternate;if(T===null)throw Error(i(387));if(T=T.memoizedProps,T!==null){var O=m.type;In(m.pendingProps.value,T.value)||(s!==null?s.push(O):s=[O])}}else if(m===vt.current){if(T=m.alternate,T===null)throw Error(i(387));T.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(s!==null?s.push(Yo):s=[Yo])}m=m.return}s!==null&&hh(r,s,c,h),r.flags|=262144}function wc(s){for(s=s.firstContext;s!==null;){if(!In(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function va(s){pa=s,Xi=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function gn(s){return Zp(pa,s)}function xc(s,r){return pa===null&&va(s),Zp(s,r)}function Zp(s,r){var c=r._currentValue;if(r={context:r,memoizedValue:c,next:null},Xi===null){if(s===null)throw Error(i(308));Xi=r,s.dependencies={lanes:0,firstContext:r},s.flags|=524288}else Xi=Xi.next=r;return c}var PE=typeof AbortController<"u"?AbortController:function(){var s=[],r=this.signal={aborted:!1,addEventListener:function(c,h){s.push(h)}};this.abort=function(){r.aborted=!0,s.forEach(function(c){return c()})}},FE=t.unstable_scheduleCallback,zE=t.unstable_NormalPriority,Bt={$$typeof:R,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function fh(){return{controller:new PE,data:new Map,refCount:0}}function _o(s){s.refCount--,s.refCount===0&&FE(zE,function(){s.controller.abort()})}var bo=null,gh=0,ar=0,rr=null;function BE(s,r){if(bo===null){var c=bo=[];gh=0,ar=vf(),rr={status:"pending",value:void 0,then:function(h){c.push(h)}}}return gh++,r.then(Jp,Jp),r}function Jp(){if(--gh===0&&bo!==null){rr!==null&&(rr.status="fulfilled");var s=bo;bo=null,ar=0,rr=null;for(var r=0;r<s.length;r++)(0,s[r])()}}function HE(s,r){var c=[],h={status:"pending",value:null,reason:null,then:function(m){c.push(m)}};return s.then(function(){h.status="fulfilled",h.value=r;for(var m=0;m<c.length;m++)(0,c[m])(r)},function(m){for(h.status="rejected",h.reason=m,m=0;m<c.length;m++)(0,c[m])(void 0)}),h}var ev=U.S;U.S=function(s,r){typeof r=="object"&&r!==null&&typeof r.then=="function"&&BE(s,r),ev!==null&&ev(s,r)};var ya=Z(null);function mh(){var s=ya.current;return s!==null?s:ft.pooledCache}function Ec(s,r){r===null?oe(ya,ya.current):oe(ya,r.pool)}function tv(){var s=mh();return s===null?null:{parent:Bt._currentValue,pool:s}}var So=Error(i(460)),nv=Error(i(474)),Tc=Error(i(542)),ph={then:function(){}};function iv(s){return s=s.status,s==="fulfilled"||s==="rejected"}function Cc(){}function sv(s,r,c){switch(c=s[c],c===void 0?s.push(r):c!==r&&(r.then(Cc,Cc),r=c),r.status){case"fulfilled":return r.value;case"rejected":throw s=r.reason,rv(s),s;default:if(typeof r.status=="string")r.then(Cc,Cc);else{if(s=ft,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=r,s.status="pending",s.then(function(h){if(r.status==="pending"){var m=r;m.status="fulfilled",m.value=h}},function(h){if(r.status==="pending"){var m=r;m.status="rejected",m.reason=h}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw s=r.reason,rv(s),s}throw wo=r,So}}var wo=null;function av(){if(wo===null)throw Error(i(459));var s=wo;return wo=null,s}function rv(s){if(s===So||s===Tc)throw Error(i(483))}var Ts=!1;function vh(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function yh(s,r){s=s.updateQueue,r.updateQueue===s&&(r.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Cs(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Rs(s,r,c){var h=s.updateQueue;if(h===null)return null;if(h=h.shared,(tt&2)!==0){var m=h.pending;return m===null?r.next=r:(r.next=m.next,m.next=r),h.pending=r,r=yc(s),qp(s,null,c),r}return vc(s,h,r,c),yc(s)}function xo(s,r,c){if(r=r.updateQueue,r!==null&&(r=r.shared,(c&4194048)!==0)){var h=r.lanes;h&=s.pendingLanes,c|=h,r.lanes=c,li(s,c)}}function _h(s,r){var c=s.updateQueue,h=s.alternate;if(h!==null&&(h=h.updateQueue,c===h)){var m=null,v=null;if(c=c.firstBaseUpdate,c!==null){do{var T={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};v===null?m=v=T:v=v.next=T,c=c.next}while(c!==null);v===null?m=v=r:v=v.next=r}else m=v=r;c={baseState:h.baseState,firstBaseUpdate:m,lastBaseUpdate:v,shared:h.shared,callbacks:h.callbacks},s.updateQueue=c;return}s=c.lastBaseUpdate,s===null?c.firstBaseUpdate=r:s.next=r,c.lastBaseUpdate=r}var bh=!1;function Eo(){if(bh){var s=rr;if(s!==null)throw s}}function To(s,r,c,h){bh=!1;var m=s.updateQueue;Ts=!1;var v=m.firstBaseUpdate,T=m.lastBaseUpdate,O=m.shared.pending;if(O!==null){m.shared.pending=null;var N=O,G=N.next;N.next=null,T===null?v=G:T.next=G,T=N;var J=s.alternate;J!==null&&(J=J.updateQueue,O=J.lastBaseUpdate,O!==T&&(O===null?J.firstBaseUpdate=G:O.next=G,J.lastBaseUpdate=N))}if(v!==null){var ie=m.baseState;T=0,J=G=N=null,O=v;do{var q=O.lane&-536870913,W=q!==O.lane;if(W?(qe&q)===q:(h&q)===q){q!==0&&q===ar&&(bh=!0),J!==null&&(J=J.next={lane:0,tag:O.tag,payload:O.payload,callback:null,next:null});e:{var Ae=s,we=O;q=r;var ot=c;switch(we.tag){case 1:if(Ae=we.payload,typeof Ae=="function"){ie=Ae.call(ot,ie,q);break e}ie=Ae;break e;case 3:Ae.flags=Ae.flags&-65537|128;case 0:if(Ae=we.payload,q=typeof Ae=="function"?Ae.call(ot,ie,q):Ae,q==null)break e;ie=g({},ie,q);break e;case 2:Ts=!0}}q=O.callback,q!==null&&(s.flags|=64,W&&(s.flags|=8192),W=m.callbacks,W===null?m.callbacks=[q]:W.push(q))}else W={lane:q,tag:O.tag,payload:O.payload,callback:O.callback,next:null},J===null?(G=J=W,N=ie):J=J.next=W,T|=q;if(O=O.next,O===null){if(O=m.shared.pending,O===null)break;W=O,O=W.next,W.next=null,m.lastBaseUpdate=W,m.shared.pending=null}}while(!0);J===null&&(N=ie),m.baseState=N,m.firstBaseUpdate=G,m.lastBaseUpdate=J,v===null&&(m.shared.lanes=0),Ls|=T,s.lanes=T,s.memoizedState=ie}}function ov(s,r){if(typeof s!="function")throw Error(i(191,s));s.call(r)}function lv(s,r){var c=s.callbacks;if(c!==null)for(s.callbacks=null,s=0;s<c.length;s++)ov(c[s],r)}var or=Z(null),Rc=Z(0);function cv(s,r){s=ss,oe(Rc,s),oe(or,r),ss=s|r.baseLanes}function Sh(){oe(Rc,ss),oe(or,or.current)}function wh(){ss=Rc.current,re(or),re(Rc)}var As=0,Pe=null,at=null,It=null,Ac=!1,lr=!1,_a=!1,Oc=0,Co=0,cr=null,$E=0;function Mt(){throw Error(i(321))}function xh(s,r){if(r===null)return!1;for(var c=0;c<r.length&&c<s.length;c++)if(!In(s[c],r[c]))return!1;return!0}function Eh(s,r,c,h,m,v){return As=v,Pe=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,U.H=s===null||s.memoizedState===null?qv:Yv,_a=!1,v=c(h,m),_a=!1,lr&&(v=dv(r,c,h,m)),uv(s),v}function uv(s){U.H=Lc;var r=at!==null&&at.next!==null;if(As=0,It=at=Pe=null,Ac=!1,Co=0,cr=null,r)throw Error(i(300));s===null||Xt||(s=s.dependencies,s!==null&&wc(s)&&(Xt=!0))}function dv(s,r,c,h){Pe=s;var m=0;do{if(lr&&(cr=null),Co=0,lr=!1,25<=m)throw Error(i(301));if(m+=1,It=at=null,s.updateQueue!=null){var v=s.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}U.H=XE,v=r(c,h)}while(lr);return v}function VE(){var s=U.H,r=s.useState()[0];return r=typeof r.then=="function"?Ro(r):r,s=s.useState()[0],(at!==null?at.memoizedState:null)!==s&&(Pe.flags|=1024),r}function Th(){var s=Oc!==0;return Oc=0,s}function Ch(s,r,c){r.updateQueue=s.updateQueue,r.flags&=-2053,s.lanes&=~c}function Rh(s){if(Ac){for(s=s.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}Ac=!1}As=0,It=at=Pe=null,lr=!1,Co=Oc=0,cr=null}function Rn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return It===null?Pe.memoizedState=It=s:It=It.next=s,It}function Ut(){if(at===null){var s=Pe.alternate;s=s!==null?s.memoizedState:null}else s=at.next;var r=It===null?Pe.memoizedState:It.next;if(r!==null)It=r,at=s;else{if(s===null)throw Pe.alternate===null?Error(i(467)):Error(i(310));at=s,s={memoizedState:at.memoizedState,baseState:at.baseState,baseQueue:at.baseQueue,queue:at.queue,next:null},It===null?Pe.memoizedState=It=s:It=It.next=s}return It}function Ah(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ro(s){var r=Co;return Co+=1,cr===null&&(cr=[]),s=sv(cr,s,r),r=Pe,(It===null?r.memoizedState:It.next)===null&&(r=r.alternate,U.H=r===null||r.memoizedState===null?qv:Yv),s}function Dc(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Ro(s);if(s.$$typeof===R)return gn(s)}throw Error(i(438,String(s)))}function Oh(s){var r=null,c=Pe.updateQueue;if(c!==null&&(r=c.memoCache),r==null){var h=Pe.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(r={data:h.data.map(function(m){return m.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),c===null&&(c=Ah(),Pe.updateQueue=c),c.memoCache=r,c=r.data[r.index],c===void 0)for(c=r.data[r.index]=Array(s),h=0;h<s;h++)c[h]=K;return r.index++,c}function Zi(s,r){return typeof r=="function"?r(s):r}function Mc(s){var r=Ut();return Dh(r,at,s)}function Dh(s,r,c){var h=s.queue;if(h===null)throw Error(i(311));h.lastRenderedReducer=c;var m=s.baseQueue,v=h.pending;if(v!==null){if(m!==null){var T=m.next;m.next=v.next,v.next=T}r.baseQueue=m=v,h.pending=null}if(v=s.baseState,m===null)s.memoizedState=v;else{r=m.next;var O=T=null,N=null,G=r,J=!1;do{var ie=G.lane&-536870913;if(ie!==G.lane?(qe&ie)===ie:(As&ie)===ie){var q=G.revertLane;if(q===0)N!==null&&(N=N.next={lane:0,revertLane:0,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),ie===ar&&(J=!0);else if((As&q)===q){G=G.next,q===ar&&(J=!0);continue}else ie={lane:0,revertLane:G.revertLane,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},N===null?(O=N=ie,T=v):N=N.next=ie,Pe.lanes|=q,Ls|=q;ie=G.action,_a&&c(v,ie),v=G.hasEagerState?G.eagerState:c(v,ie)}else q={lane:ie,revertLane:G.revertLane,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},N===null?(O=N=q,T=v):N=N.next=q,Pe.lanes|=ie,Ls|=ie;G=G.next}while(G!==null&&G!==r);if(N===null?T=v:N.next=O,!In(v,s.memoizedState)&&(Xt=!0,J&&(c=rr,c!==null)))throw c;s.memoizedState=v,s.baseState=T,s.baseQueue=N,h.lastRenderedState=v}return m===null&&(h.lanes=0),[s.memoizedState,h.dispatch]}function Mh(s){var r=Ut(),c=r.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=s;var h=c.dispatch,m=c.pending,v=r.memoizedState;if(m!==null){c.pending=null;var T=m=m.next;do v=s(v,T.action),T=T.next;while(T!==m);In(v,r.memoizedState)||(Xt=!0),r.memoizedState=v,r.baseQueue===null&&(r.baseState=v),c.lastRenderedState=v}return[v,h]}function hv(s,r,c){var h=Pe,m=Ut(),v=Qe;if(v){if(c===void 0)throw Error(i(407));c=c()}else c=r();var T=!In((at||m).memoizedState,c);T&&(m.memoizedState=c,Xt=!0),m=m.queue;var O=mv.bind(null,h,m,s);if(Ao(2048,8,O,[s]),m.getSnapshot!==r||T||It!==null&&It.memoizedState.tag&1){if(h.flags|=2048,ur(9,kc(),gv.bind(null,h,m,c,r),null),ft===null)throw Error(i(349));v||(As&124)!==0||fv(h,r,c)}return c}function fv(s,r,c){s.flags|=16384,s={getSnapshot:r,value:c},r=Pe.updateQueue,r===null?(r=Ah(),Pe.updateQueue=r,r.stores=[s]):(c=r.stores,c===null?r.stores=[s]:c.push(s))}function gv(s,r,c,h){r.value=c,r.getSnapshot=h,pv(r)&&vv(s)}function mv(s,r,c){return c(function(){pv(r)&&vv(s)})}function pv(s){var r=s.getSnapshot;s=s.value;try{var c=r();return!In(s,c)}catch{return!0}}function vv(s){var r=tr(s,2);r!==null&&Hn(r,s,2)}function kh(s){var r=Rn();if(typeof s=="function"){var c=s;if(s=c(),_a){je(!0);try{c()}finally{je(!1)}}}return r.memoizedState=r.baseState=s,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zi,lastRenderedState:s},r}function yv(s,r,c,h){return s.baseState=c,Dh(s,at,typeof h=="function"?h:Zi)}function GE(s,r,c,h,m){if(jc(s))throw Error(i(485));if(s=r.action,s!==null){var v={payload:m,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){v.listeners.push(T)}};U.T!==null?c(!0):v.isTransition=!1,h(v),c=r.pending,c===null?(v.next=r.pending=v,_v(r,v)):(v.next=c.next,r.pending=c.next=v)}}function _v(s,r){var c=r.action,h=r.payload,m=s.state;if(r.isTransition){var v=U.T,T={};U.T=T;try{var O=c(m,h),N=U.S;N!==null&&N(T,O),bv(s,r,O)}catch(G){Nh(s,r,G)}finally{U.T=v}}else try{v=c(m,h),bv(s,r,v)}catch(G){Nh(s,r,G)}}function bv(s,r,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(h){Sv(s,r,h)},function(h){return Nh(s,r,h)}):Sv(s,r,c)}function Sv(s,r,c){r.status="fulfilled",r.value=c,wv(r),s.state=c,r=s.pending,r!==null&&(c=r.next,c===r?s.pending=null:(c=c.next,r.next=c,_v(s,c)))}function Nh(s,r,c){var h=s.pending;if(s.pending=null,h!==null){h=h.next;do r.status="rejected",r.reason=c,wv(r),r=r.next;while(r!==h)}s.action=null}function wv(s){s=s.listeners;for(var r=0;r<s.length;r++)(0,s[r])()}function xv(s,r){return r}function Ev(s,r){if(Qe){var c=ft.formState;if(c!==null){e:{var h=Pe;if(Qe){if(Rt){t:{for(var m=Rt,v=Ri;m.nodeType!==8;){if(!v){m=null;break t}if(m=di(m.nextSibling),m===null){m=null;break t}}v=m.data,m=v==="F!"||v==="F"?m:null}if(m){Rt=di(m.nextSibling),h=m.data==="F!";break e}}ma(h)}h=!1}h&&(r=c[0])}}return c=Rn(),c.memoizedState=c.baseState=r,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:xv,lastRenderedState:r},c.queue=h,c=$v.bind(null,Pe,h),h.dispatch=c,h=kh(!1),v=Ph.bind(null,Pe,!1,h.queue),h=Rn(),m={state:r,dispatch:null,action:s,pending:null},h.queue=m,c=GE.bind(null,Pe,m,v,c),m.dispatch=c,h.memoizedState=s,[r,c,!1]}function Tv(s){var r=Ut();return Cv(r,at,s)}function Cv(s,r,c){if(r=Dh(s,r,xv)[0],s=Mc(Zi)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var h=Ro(r)}catch(T){throw T===So?Tc:T}else h=r;r=Ut();var m=r.queue,v=m.dispatch;return c!==r.memoizedState&&(Pe.flags|=2048,ur(9,kc(),qE.bind(null,m,c),null)),[h,v,s]}function qE(s,r){s.action=r}function Rv(s){var r=Ut(),c=at;if(c!==null)return Cv(r,c,s);Ut(),r=r.memoizedState,c=Ut();var h=c.queue.dispatch;return c.memoizedState=s,[r,h,!1]}function ur(s,r,c,h){return s={tag:s,create:c,deps:h,inst:r,next:null},r=Pe.updateQueue,r===null&&(r=Ah(),Pe.updateQueue=r),c=r.lastEffect,c===null?r.lastEffect=s.next=s:(h=c.next,c.next=s,s.next=h,r.lastEffect=s),s}function kc(){return{destroy:void 0,resource:void 0}}function Av(){return Ut().memoizedState}function Nc(s,r,c,h){var m=Rn();h=h===void 0?null:h,Pe.flags|=s,m.memoizedState=ur(1|r,kc(),c,h)}function Ao(s,r,c,h){var m=Ut();h=h===void 0?null:h;var v=m.memoizedState.inst;at!==null&&h!==null&&xh(h,at.memoizedState.deps)?m.memoizedState=ur(r,v,c,h):(Pe.flags|=s,m.memoizedState=ur(1|r,v,c,h))}function Ov(s,r){Nc(8390656,8,s,r)}function Dv(s,r){Ao(2048,8,s,r)}function Mv(s,r){return Ao(4,2,s,r)}function kv(s,r){return Ao(4,4,s,r)}function Nv(s,r){if(typeof r=="function"){s=s();var c=r(s);return function(){typeof c=="function"?c():r(null)}}if(r!=null)return s=s(),r.current=s,function(){r.current=null}}function jv(s,r,c){c=c!=null?c.concat([s]):null,Ao(4,4,Nv.bind(null,r,s),c)}function jh(){}function Lv(s,r){var c=Ut();r=r===void 0?null:r;var h=c.memoizedState;return r!==null&&xh(r,h[1])?h[0]:(c.memoizedState=[s,r],s)}function Iv(s,r){var c=Ut();r=r===void 0?null:r;var h=c.memoizedState;if(r!==null&&xh(r,h[1]))return h[0];if(h=s(),_a){je(!0);try{s()}finally{je(!1)}}return c.memoizedState=[h,r],h}function Lh(s,r,c){return c===void 0||(As&1073741824)!==0?s.memoizedState=r:(s.memoizedState=c,s=Fy(),Pe.lanes|=s,Ls|=s,c)}function Uv(s,r,c,h){return In(c,r)?c:or.current!==null?(s=Lh(s,c,h),In(s,r)||(Xt=!0),s):(As&42)===0?(Xt=!0,s.memoizedState=c):(s=Fy(),Pe.lanes|=s,Ls|=s,r)}function Pv(s,r,c,h,m){var v=Y.p;Y.p=v!==0&&8>v?v:8;var T=U.T,O={};U.T=O,Ph(s,!1,r,c);try{var N=m(),G=U.S;if(G!==null&&G(O,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var J=HE(N,h);Oo(s,r,J,Bn(s))}else Oo(s,r,h,Bn(s))}catch(ie){Oo(s,r,{then:function(){},status:"rejected",reason:ie},Bn())}finally{Y.p=v,U.T=T}}function YE(){}function Ih(s,r,c,h){if(s.tag!==5)throw Error(i(476));var m=Fv(s).queue;Pv(s,m,r,le,c===null?YE:function(){return zv(s),c(h)})}function Fv(s){var r=s.memoizedState;if(r!==null)return r;r={memoizedState:le,baseState:le,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zi,lastRenderedState:le},next:null};var c={};return r.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zi,lastRenderedState:c},next:null},s.memoizedState=r,s=s.alternate,s!==null&&(s.memoizedState=r),r}function zv(s){var r=Fv(s).next.queue;Oo(s,r,{},Bn())}function Uh(){return gn(Yo)}function Bv(){return Ut().memoizedState}function Hv(){return Ut().memoizedState}function WE(s){for(var r=s.return;r!==null;){switch(r.tag){case 24:case 3:var c=Bn();s=Cs(c);var h=Rs(r,s,c);h!==null&&(Hn(h,r,c),xo(h,r,c)),r={cache:fh()},s.payload=r;return}r=r.return}}function KE(s,r,c){var h=Bn();c={lane:h,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null},jc(s)?Vv(r,c):(c=ih(s,r,c,h),c!==null&&(Hn(c,s,h),Gv(c,r,h)))}function $v(s,r,c){var h=Bn();Oo(s,r,c,h)}function Oo(s,r,c,h){var m={lane:h,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null};if(jc(s))Vv(r,m);else{var v=s.alternate;if(s.lanes===0&&(v===null||v.lanes===0)&&(v=r.lastRenderedReducer,v!==null))try{var T=r.lastRenderedState,O=v(T,c);if(m.hasEagerState=!0,m.eagerState=O,In(O,T))return vc(s,r,m,0),ft===null&&pc(),!1}catch{}finally{}if(c=ih(s,r,m,h),c!==null)return Hn(c,s,h),Gv(c,r,h),!0}return!1}function Ph(s,r,c,h){if(h={lane:2,revertLane:vf(),action:h,hasEagerState:!1,eagerState:null,next:null},jc(s)){if(r)throw Error(i(479))}else r=ih(s,c,h,2),r!==null&&Hn(r,s,2)}function jc(s){var r=s.alternate;return s===Pe||r!==null&&r===Pe}function Vv(s,r){lr=Ac=!0;var c=s.pending;c===null?r.next=r:(r.next=c.next,c.next=r),s.pending=r}function Gv(s,r,c){if((c&4194048)!==0){var h=r.lanes;h&=s.pendingLanes,c|=h,r.lanes=c,li(s,c)}}var Lc={readContext:gn,use:Dc,useCallback:Mt,useContext:Mt,useEffect:Mt,useImperativeHandle:Mt,useLayoutEffect:Mt,useInsertionEffect:Mt,useMemo:Mt,useReducer:Mt,useRef:Mt,useState:Mt,useDebugValue:Mt,useDeferredValue:Mt,useTransition:Mt,useSyncExternalStore:Mt,useId:Mt,useHostTransitionStatus:Mt,useFormState:Mt,useActionState:Mt,useOptimistic:Mt,useMemoCache:Mt,useCacheRefresh:Mt},qv={readContext:gn,use:Dc,useCallback:function(s,r){return Rn().memoizedState=[s,r===void 0?null:r],s},useContext:gn,useEffect:Ov,useImperativeHandle:function(s,r,c){c=c!=null?c.concat([s]):null,Nc(4194308,4,Nv.bind(null,r,s),c)},useLayoutEffect:function(s,r){return Nc(4194308,4,s,r)},useInsertionEffect:function(s,r){Nc(4,2,s,r)},useMemo:function(s,r){var c=Rn();r=r===void 0?null:r;var h=s();if(_a){je(!0);try{s()}finally{je(!1)}}return c.memoizedState=[h,r],h},useReducer:function(s,r,c){var h=Rn();if(c!==void 0){var m=c(r);if(_a){je(!0);try{c(r)}finally{je(!1)}}}else m=r;return h.memoizedState=h.baseState=m,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:m},h.queue=s,s=s.dispatch=KE.bind(null,Pe,s),[h.memoizedState,s]},useRef:function(s){var r=Rn();return s={current:s},r.memoizedState=s},useState:function(s){s=kh(s);var r=s.queue,c=$v.bind(null,Pe,r);return r.dispatch=c,[s.memoizedState,c]},useDebugValue:jh,useDeferredValue:function(s,r){var c=Rn();return Lh(c,s,r)},useTransition:function(){var s=kh(!1);return s=Pv.bind(null,Pe,s.queue,!0,!1),Rn().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,r,c){var h=Pe,m=Rn();if(Qe){if(c===void 0)throw Error(i(407));c=c()}else{if(c=r(),ft===null)throw Error(i(349));(qe&124)!==0||fv(h,r,c)}m.memoizedState=c;var v={value:c,getSnapshot:r};return m.queue=v,Ov(mv.bind(null,h,v,s),[s]),h.flags|=2048,ur(9,kc(),gv.bind(null,h,v,c,r),null),c},useId:function(){var s=Rn(),r=ft.identifierPrefix;if(Qe){var c=Ki,h=Wi;c=(h&~(1<<32-We(h)-1)).toString(32)+c,r=""+r+"R"+c,c=Oc++,0<c&&(r+="H"+c.toString(32)),r+=""}else c=$E++,r=""+r+"r"+c.toString(32)+"";return s.memoizedState=r},useHostTransitionStatus:Uh,useFormState:Ev,useActionState:Ev,useOptimistic:function(s){var r=Rn();r.memoizedState=r.baseState=s;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=c,r=Ph.bind(null,Pe,!0,c),c.dispatch=r,[s,r]},useMemoCache:Oh,useCacheRefresh:function(){return Rn().memoizedState=WE.bind(null,Pe)}},Yv={readContext:gn,use:Dc,useCallback:Lv,useContext:gn,useEffect:Dv,useImperativeHandle:jv,useInsertionEffect:Mv,useLayoutEffect:kv,useMemo:Iv,useReducer:Mc,useRef:Av,useState:function(){return Mc(Zi)},useDebugValue:jh,useDeferredValue:function(s,r){var c=Ut();return Uv(c,at.memoizedState,s,r)},useTransition:function(){var s=Mc(Zi)[0],r=Ut().memoizedState;return[typeof s=="boolean"?s:Ro(s),r]},useSyncExternalStore:hv,useId:Bv,useHostTransitionStatus:Uh,useFormState:Tv,useActionState:Tv,useOptimistic:function(s,r){var c=Ut();return yv(c,at,s,r)},useMemoCache:Oh,useCacheRefresh:Hv},XE={readContext:gn,use:Dc,useCallback:Lv,useContext:gn,useEffect:Dv,useImperativeHandle:jv,useInsertionEffect:Mv,useLayoutEffect:kv,useMemo:Iv,useReducer:Mh,useRef:Av,useState:function(){return Mh(Zi)},useDebugValue:jh,useDeferredValue:function(s,r){var c=Ut();return at===null?Lh(c,s,r):Uv(c,at.memoizedState,s,r)},useTransition:function(){var s=Mh(Zi)[0],r=Ut().memoizedState;return[typeof s=="boolean"?s:Ro(s),r]},useSyncExternalStore:hv,useId:Bv,useHostTransitionStatus:Uh,useFormState:Rv,useActionState:Rv,useOptimistic:function(s,r){var c=Ut();return at!==null?yv(c,at,s,r):(c.baseState=s,[s,c.queue.dispatch])},useMemoCache:Oh,useCacheRefresh:Hv},dr=null,Do=0;function Ic(s){var r=Do;return Do+=1,dr===null&&(dr=[]),sv(dr,s,r)}function Mo(s,r){r=r.props.ref,s.ref=r!==void 0?r:null}function Uc(s,r){throw r.$$typeof===p?Error(i(525)):(s=Object.prototype.toString.call(r),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":s)))}function Wv(s){var r=s._init;return r(s._payload)}function Kv(s){function r(B,F){if(s){var V=B.deletions;V===null?(B.deletions=[F],B.flags|=16):V.push(F)}}function c(B,F){if(!s)return null;for(;F!==null;)r(B,F),F=F.sibling;return null}function h(B){for(var F=new Map;B!==null;)B.key!==null?F.set(B.key,B):F.set(B.index,B),B=B.sibling;return F}function m(B,F){return B=Yi(B,F),B.index=0,B.sibling=null,B}function v(B,F,V){return B.index=V,s?(V=B.alternate,V!==null?(V=V.index,V<F?(B.flags|=67108866,F):V):(B.flags|=67108866,F)):(B.flags|=1048576,F)}function T(B){return s&&B.alternate===null&&(B.flags|=67108866),B}function O(B,F,V,ne){return F===null||F.tag!==6?(F=ah(V,B.mode,ne),F.return=B,F):(F=m(F,V),F.return=B,F)}function N(B,F,V,ne){var pe=V.type;return pe===S?J(B,F,V.props.children,ne,V.key):F!==null&&(F.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===z&&Wv(pe)===F.type)?(F=m(F,V.props),Mo(F,V),F.return=B,F):(F=_c(V.type,V.key,V.props,null,B.mode,ne),Mo(F,V),F.return=B,F)}function G(B,F,V,ne){return F===null||F.tag!==4||F.stateNode.containerInfo!==V.containerInfo||F.stateNode.implementation!==V.implementation?(F=rh(V,B.mode,ne),F.return=B,F):(F=m(F,V.children||[]),F.return=B,F)}function J(B,F,V,ne,pe){return F===null||F.tag!==7?(F=da(V,B.mode,ne,pe),F.return=B,F):(F=m(F,V),F.return=B,F)}function ie(B,F,V){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return F=ah(""+F,B.mode,V),F.return=B,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case y:return V=_c(F.type,F.key,F.props,null,B.mode,V),Mo(V,F),V.return=B,V;case b:return F=rh(F,B.mode,V),F.return=B,F;case z:var ne=F._init;return F=ne(F._payload),ie(B,F,V)}if(te(F)||H(F))return F=da(F,B.mode,V,null),F.return=B,F;if(typeof F.then=="function")return ie(B,Ic(F),V);if(F.$$typeof===R)return ie(B,xc(B,F),V);Uc(B,F)}return null}function q(B,F,V,ne){var pe=F!==null?F.key:null;if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return pe!==null?null:O(B,F,""+V,ne);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case y:return V.key===pe?N(B,F,V,ne):null;case b:return V.key===pe?G(B,F,V,ne):null;case z:return pe=V._init,V=pe(V._payload),q(B,F,V,ne)}if(te(V)||H(V))return pe!==null?null:J(B,F,V,ne,null);if(typeof V.then=="function")return q(B,F,Ic(V),ne);if(V.$$typeof===R)return q(B,F,xc(B,V),ne);Uc(B,V)}return null}function W(B,F,V,ne,pe){if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return B=B.get(V)||null,O(F,B,""+ne,pe);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case y:return B=B.get(ne.key===null?V:ne.key)||null,N(F,B,ne,pe);case b:return B=B.get(ne.key===null?V:ne.key)||null,G(F,B,ne,pe);case z:var Fe=ne._init;return ne=Fe(ne._payload),W(B,F,V,ne,pe)}if(te(ne)||H(ne))return B=B.get(V)||null,J(F,B,ne,pe,null);if(typeof ne.then=="function")return W(B,F,V,Ic(ne),pe);if(ne.$$typeof===R)return W(B,F,V,xc(F,ne),pe);Uc(F,ne)}return null}function Ae(B,F,V,ne){for(var pe=null,Fe=null,be=F,Ce=F=0,Zt=null;be!==null&&Ce<V.length;Ce++){be.index>Ce?(Zt=be,be=null):Zt=be.sibling;var Ke=q(B,be,V[Ce],ne);if(Ke===null){be===null&&(be=Zt);break}s&&be&&Ke.alternate===null&&r(B,be),F=v(Ke,F,Ce),Fe===null?pe=Ke:Fe.sibling=Ke,Fe=Ke,be=Zt}if(Ce===V.length)return c(B,be),Qe&&fa(B,Ce),pe;if(be===null){for(;Ce<V.length;Ce++)be=ie(B,V[Ce],ne),be!==null&&(F=v(be,F,Ce),Fe===null?pe=be:Fe.sibling=be,Fe=be);return Qe&&fa(B,Ce),pe}for(be=h(be);Ce<V.length;Ce++)Zt=W(be,B,Ce,V[Ce],ne),Zt!==null&&(s&&Zt.alternate!==null&&be.delete(Zt.key===null?Ce:Zt.key),F=v(Zt,F,Ce),Fe===null?pe=Zt:Fe.sibling=Zt,Fe=Zt);return s&&be.forEach(function(Vs){return r(B,Vs)}),Qe&&fa(B,Ce),pe}function we(B,F,V,ne){if(V==null)throw Error(i(151));for(var pe=null,Fe=null,be=F,Ce=F=0,Zt=null,Ke=V.next();be!==null&&!Ke.done;Ce++,Ke=V.next()){be.index>Ce?(Zt=be,be=null):Zt=be.sibling;var Vs=q(B,be,Ke.value,ne);if(Vs===null){be===null&&(be=Zt);break}s&&be&&Vs.alternate===null&&r(B,be),F=v(Vs,F,Ce),Fe===null?pe=Vs:Fe.sibling=Vs,Fe=Vs,be=Zt}if(Ke.done)return c(B,be),Qe&&fa(B,Ce),pe;if(be===null){for(;!Ke.done;Ce++,Ke=V.next())Ke=ie(B,Ke.value,ne),Ke!==null&&(F=v(Ke,F,Ce),Fe===null?pe=Ke:Fe.sibling=Ke,Fe=Ke);return Qe&&fa(B,Ce),pe}for(be=h(be);!Ke.done;Ce++,Ke=V.next())Ke=W(be,B,Ce,Ke.value,ne),Ke!==null&&(s&&Ke.alternate!==null&&be.delete(Ke.key===null?Ce:Ke.key),F=v(Ke,F,Ce),Fe===null?pe=Ke:Fe.sibling=Ke,Fe=Ke);return s&&be.forEach(function(QT){return r(B,QT)}),Qe&&fa(B,Ce),pe}function ot(B,F,V,ne){if(typeof V=="object"&&V!==null&&V.type===S&&V.key===null&&(V=V.props.children),typeof V=="object"&&V!==null){switch(V.$$typeof){case y:e:{for(var pe=V.key;F!==null;){if(F.key===pe){if(pe=V.type,pe===S){if(F.tag===7){c(B,F.sibling),ne=m(F,V.props.children),ne.return=B,B=ne;break e}}else if(F.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===z&&Wv(pe)===F.type){c(B,F.sibling),ne=m(F,V.props),Mo(ne,V),ne.return=B,B=ne;break e}c(B,F);break}else r(B,F);F=F.sibling}V.type===S?(ne=da(V.props.children,B.mode,ne,V.key),ne.return=B,B=ne):(ne=_c(V.type,V.key,V.props,null,B.mode,ne),Mo(ne,V),ne.return=B,B=ne)}return T(B);case b:e:{for(pe=V.key;F!==null;){if(F.key===pe)if(F.tag===4&&F.stateNode.containerInfo===V.containerInfo&&F.stateNode.implementation===V.implementation){c(B,F.sibling),ne=m(F,V.children||[]),ne.return=B,B=ne;break e}else{c(B,F);break}else r(B,F);F=F.sibling}ne=rh(V,B.mode,ne),ne.return=B,B=ne}return T(B);case z:return pe=V._init,V=pe(V._payload),ot(B,F,V,ne)}if(te(V))return Ae(B,F,V,ne);if(H(V)){if(pe=H(V),typeof pe!="function")throw Error(i(150));return V=pe.call(V),we(B,F,V,ne)}if(typeof V.then=="function")return ot(B,F,Ic(V),ne);if(V.$$typeof===R)return ot(B,F,xc(B,V),ne);Uc(B,V)}return typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint"?(V=""+V,F!==null&&F.tag===6?(c(B,F.sibling),ne=m(F,V),ne.return=B,B=ne):(c(B,F),ne=ah(V,B.mode,ne),ne.return=B,B=ne),T(B)):c(B,F)}return function(B,F,V,ne){try{Do=0;var pe=ot(B,F,V,ne);return dr=null,pe}catch(be){if(be===So||be===Tc)throw be;var Fe=Un(29,be,null,B.mode);return Fe.lanes=ne,Fe.return=B,Fe}finally{}}}var hr=Kv(!0),Xv=Kv(!1),Qn=Z(null),Ai=null;function Os(s){var r=s.alternate;oe(Ht,Ht.current&1),oe(Qn,s),Ai===null&&(r===null||or.current!==null||r.memoizedState!==null)&&(Ai=s)}function Qv(s){if(s.tag===22){if(oe(Ht,Ht.current),oe(Qn,s),Ai===null){var r=s.alternate;r!==null&&r.memoizedState!==null&&(Ai=s)}}else Ds()}function Ds(){oe(Ht,Ht.current),oe(Qn,Qn.current)}function Ji(s){re(Qn),Ai===s&&(Ai=null),re(Ht)}var Ht=Z(0);function Pc(s){for(var r=s;r!==null;){if(r.tag===13){var c=r.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||Of(c)))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}function Fh(s,r,c,h){r=s.memoizedState,c=c(h,r),c=c==null?r:g({},r,c),s.memoizedState=c,s.lanes===0&&(s.updateQueue.baseState=c)}var zh={enqueueSetState:function(s,r,c){s=s._reactInternals;var h=Bn(),m=Cs(h);m.payload=r,c!=null&&(m.callback=c),r=Rs(s,m,h),r!==null&&(Hn(r,s,h),xo(r,s,h))},enqueueReplaceState:function(s,r,c){s=s._reactInternals;var h=Bn(),m=Cs(h);m.tag=1,m.payload=r,c!=null&&(m.callback=c),r=Rs(s,m,h),r!==null&&(Hn(r,s,h),xo(r,s,h))},enqueueForceUpdate:function(s,r){s=s._reactInternals;var c=Bn(),h=Cs(c);h.tag=2,r!=null&&(h.callback=r),r=Rs(s,h,c),r!==null&&(Hn(r,s,c),xo(r,s,c))}};function Zv(s,r,c,h,m,v,T){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(h,v,T):r.prototype&&r.prototype.isPureReactComponent?!fo(c,h)||!fo(m,v):!0}function Jv(s,r,c,h){s=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(c,h),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(c,h),r.state!==s&&zh.enqueueReplaceState(r,r.state,null)}function ba(s,r){var c=r;if("ref"in r){c={};for(var h in r)h!=="ref"&&(c[h]=r[h])}if(s=s.defaultProps){c===r&&(c=g({},c));for(var m in s)c[m]===void 0&&(c[m]=s[m])}return c}var Fc=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function ey(s){Fc(s)}function ty(s){console.error(s)}function ny(s){Fc(s)}function zc(s,r){try{var c=s.onUncaughtError;c(r.value,{componentStack:r.stack})}catch(h){setTimeout(function(){throw h})}}function iy(s,r,c){try{var h=s.onCaughtError;h(c.value,{componentStack:c.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function Bh(s,r,c){return c=Cs(c),c.tag=3,c.payload={element:null},c.callback=function(){zc(s,r)},c}function sy(s){return s=Cs(s),s.tag=3,s}function ay(s,r,c,h){var m=c.type.getDerivedStateFromError;if(typeof m=="function"){var v=h.value;s.payload=function(){return m(v)},s.callback=function(){iy(r,c,h)}}var T=c.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(s.callback=function(){iy(r,c,h),typeof m!="function"&&(Is===null?Is=new Set([this]):Is.add(this));var O=h.stack;this.componentDidCatch(h.value,{componentStack:O!==null?O:""})})}function QE(s,r,c,h,m){if(c.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(r=c.alternate,r!==null&&yo(r,c,m,!0),c=Qn.current,c!==null){switch(c.tag){case 13:return Ai===null?hf():c.alternate===null&&At===0&&(At=3),c.flags&=-257,c.flags|=65536,c.lanes=m,h===ph?c.flags|=16384:(r=c.updateQueue,r===null?c.updateQueue=new Set([h]):r.add(h),gf(s,h,m)),!1;case 22:return c.flags|=65536,h===ph?c.flags|=16384:(r=c.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([h])},c.updateQueue=r):(c=r.retryQueue,c===null?r.retryQueue=new Set([h]):c.add(h)),gf(s,h,m)),!1}throw Error(i(435,c.tag))}return gf(s,h,m),hf(),!1}if(Qe)return r=Qn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=m,h!==ch&&(s=Error(i(422),{cause:h}),vo(Yn(s,c)))):(h!==ch&&(r=Error(i(423),{cause:h}),vo(Yn(r,c))),s=s.current.alternate,s.flags|=65536,m&=-m,s.lanes|=m,h=Yn(h,c),m=Bh(s.stateNode,h,m),_h(s,m),At!==4&&(At=2)),!1;var v=Error(i(520),{cause:h});if(v=Yn(v,c),Po===null?Po=[v]:Po.push(v),At!==4&&(At=2),r===null)return!0;h=Yn(h,c),c=r;do{switch(c.tag){case 3:return c.flags|=65536,s=m&-m,c.lanes|=s,s=Bh(c.stateNode,h,s),_h(c,s),!1;case 1:if(r=c.type,v=c.stateNode,(c.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Is===null||!Is.has(v))))return c.flags|=65536,m&=-m,c.lanes|=m,m=sy(m),ay(m,s,c,h),_h(c,m),!1}c=c.return}while(c!==null);return!1}var ry=Error(i(461)),Xt=!1;function on(s,r,c,h){r.child=s===null?Xv(r,null,c,h):hr(r,s.child,c,h)}function oy(s,r,c,h,m){c=c.render;var v=r.ref;if("ref"in h){var T={};for(var O in h)O!=="ref"&&(T[O]=h[O])}else T=h;return va(r),h=Eh(s,r,c,T,v,m),O=Th(),s!==null&&!Xt?(Ch(s,r,m),es(s,r,m)):(Qe&&O&&oh(r),r.flags|=1,on(s,r,h,m),r.child)}function ly(s,r,c,h,m){if(s===null){var v=c.type;return typeof v=="function"&&!sh(v)&&v.defaultProps===void 0&&c.compare===null?(r.tag=15,r.type=v,cy(s,r,v,h,m)):(s=_c(c.type,null,h,r,r.mode,m),s.ref=r.ref,s.return=r,r.child=s)}if(v=s.child,!Kh(s,m)){var T=v.memoizedProps;if(c=c.compare,c=c!==null?c:fo,c(T,h)&&s.ref===r.ref)return es(s,r,m)}return r.flags|=1,s=Yi(v,h),s.ref=r.ref,s.return=r,r.child=s}function cy(s,r,c,h,m){if(s!==null){var v=s.memoizedProps;if(fo(v,h)&&s.ref===r.ref)if(Xt=!1,r.pendingProps=h=v,Kh(s,m))(s.flags&131072)!==0&&(Xt=!0);else return r.lanes=s.lanes,es(s,r,m)}return Hh(s,r,c,h,m)}function uy(s,r,c){var h=r.pendingProps,m=h.children,v=s!==null?s.memoizedState:null;if(h.mode==="hidden"){if((r.flags&128)!==0){if(h=v!==null?v.baseLanes|c:c,s!==null){for(m=r.child=s.child,v=0;m!==null;)v=v|m.lanes|m.childLanes,m=m.sibling;r.childLanes=v&~h}else r.childLanes=0,r.child=null;return dy(s,r,h,c)}if((c&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},s!==null&&Ec(r,v!==null?v.cachePool:null),v!==null?cv(r,v):Sh(),Qv(r);else return r.lanes=r.childLanes=536870912,dy(s,r,v!==null?v.baseLanes|c:c,c)}else v!==null?(Ec(r,v.cachePool),cv(r,v),Ds(),r.memoizedState=null):(s!==null&&Ec(r,null),Sh(),Ds());return on(s,r,m,c),r.child}function dy(s,r,c,h){var m=mh();return m=m===null?null:{parent:Bt._currentValue,pool:m},r.memoizedState={baseLanes:c,cachePool:m},s!==null&&Ec(r,null),Sh(),Qv(r),s!==null&&yo(s,r,h,!0),null}function Bc(s,r){var c=r.ref;if(c===null)s!==null&&s.ref!==null&&(r.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(i(284));(s===null||s.ref!==c)&&(r.flags|=4194816)}}function Hh(s,r,c,h,m){return va(r),c=Eh(s,r,c,h,void 0,m),h=Th(),s!==null&&!Xt?(Ch(s,r,m),es(s,r,m)):(Qe&&h&&oh(r),r.flags|=1,on(s,r,c,m),r.child)}function hy(s,r,c,h,m,v){return va(r),r.updateQueue=null,c=dv(r,h,c,m),uv(s),h=Th(),s!==null&&!Xt?(Ch(s,r,v),es(s,r,v)):(Qe&&h&&oh(r),r.flags|=1,on(s,r,c,v),r.child)}function fy(s,r,c,h,m){if(va(r),r.stateNode===null){var v=nr,T=c.contextType;typeof T=="object"&&T!==null&&(v=gn(T)),v=new c(h,v),r.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=zh,r.stateNode=v,v._reactInternals=r,v=r.stateNode,v.props=h,v.state=r.memoizedState,v.refs={},vh(r),T=c.contextType,v.context=typeof T=="object"&&T!==null?gn(T):nr,v.state=r.memoizedState,T=c.getDerivedStateFromProps,typeof T=="function"&&(Fh(r,c,T,h),v.state=r.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(T=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),T!==v.state&&zh.enqueueReplaceState(v,v.state,null),To(r,h,v,m),Eo(),v.state=r.memoizedState),typeof v.componentDidMount=="function"&&(r.flags|=4194308),h=!0}else if(s===null){v=r.stateNode;var O=r.memoizedProps,N=ba(c,O);v.props=N;var G=v.context,J=c.contextType;T=nr,typeof J=="object"&&J!==null&&(T=gn(J));var ie=c.getDerivedStateFromProps;J=typeof ie=="function"||typeof v.getSnapshotBeforeUpdate=="function",O=r.pendingProps!==O,J||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(O||G!==T)&&Jv(r,v,h,T),Ts=!1;var q=r.memoizedState;v.state=q,To(r,h,v,m),Eo(),G=r.memoizedState,O||q!==G||Ts?(typeof ie=="function"&&(Fh(r,c,ie,h),G=r.memoizedState),(N=Ts||Zv(r,c,N,h,q,G,T))?(J||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(r.flags|=4194308)):(typeof v.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=h,r.memoizedState=G),v.props=h,v.state=G,v.context=T,h=N):(typeof v.componentDidMount=="function"&&(r.flags|=4194308),h=!1)}else{v=r.stateNode,yh(s,r),T=r.memoizedProps,J=ba(c,T),v.props=J,ie=r.pendingProps,q=v.context,G=c.contextType,N=nr,typeof G=="object"&&G!==null&&(N=gn(G)),O=c.getDerivedStateFromProps,(G=typeof O=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(T!==ie||q!==N)&&Jv(r,v,h,N),Ts=!1,q=r.memoizedState,v.state=q,To(r,h,v,m),Eo();var W=r.memoizedState;T!==ie||q!==W||Ts||s!==null&&s.dependencies!==null&&wc(s.dependencies)?(typeof O=="function"&&(Fh(r,c,O,h),W=r.memoizedState),(J=Ts||Zv(r,c,J,h,q,W,N)||s!==null&&s.dependencies!==null&&wc(s.dependencies))?(G||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(h,W,N),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(h,W,N)),typeof v.componentDidUpdate=="function"&&(r.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof v.componentDidUpdate!="function"||T===s.memoizedProps&&q===s.memoizedState||(r.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||T===s.memoizedProps&&q===s.memoizedState||(r.flags|=1024),r.memoizedProps=h,r.memoizedState=W),v.props=h,v.state=W,v.context=N,h=J):(typeof v.componentDidUpdate!="function"||T===s.memoizedProps&&q===s.memoizedState||(r.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||T===s.memoizedProps&&q===s.memoizedState||(r.flags|=1024),h=!1)}return v=h,Bc(s,r),h=(r.flags&128)!==0,v||h?(v=r.stateNode,c=h&&typeof c.getDerivedStateFromError!="function"?null:v.render(),r.flags|=1,s!==null&&h?(r.child=hr(r,s.child,null,m),r.child=hr(r,null,c,m)):on(s,r,c,m),r.memoizedState=v.state,s=r.child):s=es(s,r,m),s}function gy(s,r,c,h){return po(),r.flags|=256,on(s,r,c,h),r.child}var $h={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Vh(s){return{baseLanes:s,cachePool:tv()}}function Gh(s,r,c){return s=s!==null?s.childLanes&~c:0,r&&(s|=Zn),s}function my(s,r,c){var h=r.pendingProps,m=!1,v=(r.flags&128)!==0,T;if((T=v)||(T=s!==null&&s.memoizedState===null?!1:(Ht.current&2)!==0),T&&(m=!0,r.flags&=-129),T=(r.flags&32)!==0,r.flags&=-33,s===null){if(Qe){if(m?Os(r):Ds(),Qe){var O=Rt,N;if(N=O){e:{for(N=O,O=Ri;N.nodeType!==8;){if(!O){O=null;break e}if(N=di(N.nextSibling),N===null){O=null;break e}}O=N}O!==null?(r.memoizedState={dehydrated:O,treeContext:ha!==null?{id:Wi,overflow:Ki}:null,retryLane:536870912,hydrationErrors:null},N=Un(18,null,null,0),N.stateNode=O,N.return=r,r.child=N,bn=r,Rt=null,N=!0):N=!1}N||ma(r)}if(O=r.memoizedState,O!==null&&(O=O.dehydrated,O!==null))return Of(O)?r.lanes=32:r.lanes=536870912,null;Ji(r)}return O=h.children,h=h.fallback,m?(Ds(),m=r.mode,O=Hc({mode:"hidden",children:O},m),h=da(h,m,c,null),O.return=r,h.return=r,O.sibling=h,r.child=O,m=r.child,m.memoizedState=Vh(c),m.childLanes=Gh(s,T,c),r.memoizedState=$h,h):(Os(r),qh(r,O))}if(N=s.memoizedState,N!==null&&(O=N.dehydrated,O!==null)){if(v)r.flags&256?(Os(r),r.flags&=-257,r=Yh(s,r,c)):r.memoizedState!==null?(Ds(),r.child=s.child,r.flags|=128,r=null):(Ds(),m=h.fallback,O=r.mode,h=Hc({mode:"visible",children:h.children},O),m=da(m,O,c,null),m.flags|=2,h.return=r,m.return=r,h.sibling=m,r.child=h,hr(r,s.child,null,c),h=r.child,h.memoizedState=Vh(c),h.childLanes=Gh(s,T,c),r.memoizedState=$h,r=m);else if(Os(r),Of(O)){if(T=O.nextSibling&&O.nextSibling.dataset,T)var G=T.dgst;T=G,h=Error(i(419)),h.stack="",h.digest=T,vo({value:h,source:null,stack:null}),r=Yh(s,r,c)}else if(Xt||yo(s,r,c,!1),T=(c&s.childLanes)!==0,Xt||T){if(T=ft,T!==null&&(h=c&-c,h=(h&42)!==0?1:hn(h),h=(h&(T.suspendedLanes|c))!==0?0:h,h!==0&&h!==N.retryLane))throw N.retryLane=h,tr(s,h),Hn(T,s,h),ry;O.data==="$?"||hf(),r=Yh(s,r,c)}else O.data==="$?"?(r.flags|=192,r.child=s.child,r=null):(s=N.treeContext,Rt=di(O.nextSibling),bn=r,Qe=!0,ga=null,Ri=!1,s!==null&&(Kn[Xn++]=Wi,Kn[Xn++]=Ki,Kn[Xn++]=ha,Wi=s.id,Ki=s.overflow,ha=r),r=qh(r,h.children),r.flags|=4096);return r}return m?(Ds(),m=h.fallback,O=r.mode,N=s.child,G=N.sibling,h=Yi(N,{mode:"hidden",children:h.children}),h.subtreeFlags=N.subtreeFlags&65011712,G!==null?m=Yi(G,m):(m=da(m,O,c,null),m.flags|=2),m.return=r,h.return=r,h.sibling=m,r.child=h,h=m,m=r.child,O=s.child.memoizedState,O===null?O=Vh(c):(N=O.cachePool,N!==null?(G=Bt._currentValue,N=N.parent!==G?{parent:G,pool:G}:N):N=tv(),O={baseLanes:O.baseLanes|c,cachePool:N}),m.memoizedState=O,m.childLanes=Gh(s,T,c),r.memoizedState=$h,h):(Os(r),c=s.child,s=c.sibling,c=Yi(c,{mode:"visible",children:h.children}),c.return=r,c.sibling=null,s!==null&&(T=r.deletions,T===null?(r.deletions=[s],r.flags|=16):T.push(s)),r.child=c,r.memoizedState=null,c)}function qh(s,r){return r=Hc({mode:"visible",children:r},s.mode),r.return=s,s.child=r}function Hc(s,r){return s=Un(22,s,null,r),s.lanes=0,s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},s}function Yh(s,r,c){return hr(r,s.child,null,c),s=qh(r,r.pendingProps.children),s.flags|=2,r.memoizedState=null,s}function py(s,r,c){s.lanes|=r;var h=s.alternate;h!==null&&(h.lanes|=r),dh(s.return,r,c)}function Wh(s,r,c,h,m){var v=s.memoizedState;v===null?s.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:h,tail:c,tailMode:m}:(v.isBackwards=r,v.rendering=null,v.renderingStartTime=0,v.last=h,v.tail=c,v.tailMode=m)}function vy(s,r,c){var h=r.pendingProps,m=h.revealOrder,v=h.tail;if(on(s,r,h.children,c),h=Ht.current,(h&2)!==0)h=h&1|2,r.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=r.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&py(s,c,r);else if(s.tag===19)py(s,c,r);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}h&=1}switch(oe(Ht,h),m){case"forwards":for(c=r.child,m=null;c!==null;)s=c.alternate,s!==null&&Pc(s)===null&&(m=c),c=c.sibling;c=m,c===null?(m=r.child,r.child=null):(m=c.sibling,c.sibling=null),Wh(r,!1,m,c,v);break;case"backwards":for(c=null,m=r.child,r.child=null;m!==null;){if(s=m.alternate,s!==null&&Pc(s)===null){r.child=m;break}s=m.sibling,m.sibling=c,c=m,m=s}Wh(r,!0,c,null,v);break;case"together":Wh(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function es(s,r,c){if(s!==null&&(r.dependencies=s.dependencies),Ls|=r.lanes,(c&r.childLanes)===0)if(s!==null){if(yo(s,r,c,!1),(c&r.childLanes)===0)return null}else return null;if(s!==null&&r.child!==s.child)throw Error(i(153));if(r.child!==null){for(s=r.child,c=Yi(s,s.pendingProps),r.child=c,c.return=r;s.sibling!==null;)s=s.sibling,c=c.sibling=Yi(s,s.pendingProps),c.return=r;c.sibling=null}return r.child}function Kh(s,r){return(s.lanes&r)!==0?!0:(s=s.dependencies,!!(s!==null&&wc(s)))}function ZE(s,r,c){switch(r.tag){case 3:$e(r,r.stateNode.containerInfo),Es(r,Bt,s.memoizedState.cache),po();break;case 27:case 5:et(r);break;case 4:$e(r,r.stateNode.containerInfo);break;case 10:Es(r,r.type,r.memoizedProps.value);break;case 13:var h=r.memoizedState;if(h!==null)return h.dehydrated!==null?(Os(r),r.flags|=128,null):(c&r.child.childLanes)!==0?my(s,r,c):(Os(r),s=es(s,r,c),s!==null?s.sibling:null);Os(r);break;case 19:var m=(s.flags&128)!==0;if(h=(c&r.childLanes)!==0,h||(yo(s,r,c,!1),h=(c&r.childLanes)!==0),m){if(h)return vy(s,r,c);r.flags|=128}if(m=r.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),oe(Ht,Ht.current),h)break;return null;case 22:case 23:return r.lanes=0,uy(s,r,c);case 24:Es(r,Bt,s.memoizedState.cache)}return es(s,r,c)}function yy(s,r,c){if(s!==null)if(s.memoizedProps!==r.pendingProps)Xt=!0;else{if(!Kh(s,c)&&(r.flags&128)===0)return Xt=!1,ZE(s,r,c);Xt=(s.flags&131072)!==0}else Xt=!1,Qe&&(r.flags&1048576)!==0&&Wp(r,Sc,r.index);switch(r.lanes=0,r.tag){case 16:e:{s=r.pendingProps;var h=r.elementType,m=h._init;if(h=m(h._payload),r.type=h,typeof h=="function")sh(h)?(s=ba(h,s),r.tag=1,r=fy(null,r,h,s,c)):(r.tag=0,r=Hh(null,r,h,s,c));else{if(h!=null){if(m=h.$$typeof,m===M){r.tag=11,r=oy(null,r,h,s,c);break e}else if(m===L){r.tag=14,r=ly(null,r,h,s,c);break e}}throw r=se(h)||h,Error(i(306,r,""))}}return r;case 0:return Hh(s,r,r.type,r.pendingProps,c);case 1:return h=r.type,m=ba(h,r.pendingProps),fy(s,r,h,m,c);case 3:e:{if($e(r,r.stateNode.containerInfo),s===null)throw Error(i(387));h=r.pendingProps;var v=r.memoizedState;m=v.element,yh(s,r),To(r,h,null,c);var T=r.memoizedState;if(h=T.cache,Es(r,Bt,h),h!==v.cache&&hh(r,[Bt],c,!0),Eo(),h=T.element,v.isDehydrated)if(v={element:h,isDehydrated:!1,cache:T.cache},r.updateQueue.baseState=v,r.memoizedState=v,r.flags&256){r=gy(s,r,h,c);break e}else if(h!==m){m=Yn(Error(i(424)),r),vo(m),r=gy(s,r,h,c);break e}else{switch(s=r.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(Rt=di(s.firstChild),bn=r,Qe=!0,ga=null,Ri=!0,c=Xv(r,null,h,c),r.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(po(),h===m){r=es(s,r,c);break e}on(s,r,h,c)}r=r.child}return r;case 26:return Bc(s,r),s===null?(c=w_(r.type,null,r.pendingProps,null))?r.memoizedState=c:Qe||(c=r.type,s=r.pendingProps,h=nu(fe.current).createElement(c),h[yt]=r,h[_t]=s,cn(h,c,s),Kt(h),r.stateNode=h):r.memoizedState=w_(r.type,s.memoizedProps,r.pendingProps,s.memoizedState),null;case 27:return et(r),s===null&&Qe&&(h=r.stateNode=__(r.type,r.pendingProps,fe.current),bn=r,Ri=!0,m=Rt,Fs(r.type)?(Df=m,Rt=di(h.firstChild)):Rt=m),on(s,r,r.pendingProps.children,c),Bc(s,r),s===null&&(r.flags|=4194304),r.child;case 5:return s===null&&Qe&&((m=h=Rt)&&(h=CT(h,r.type,r.pendingProps,Ri),h!==null?(r.stateNode=h,bn=r,Rt=di(h.firstChild),Ri=!1,m=!0):m=!1),m||ma(r)),et(r),m=r.type,v=r.pendingProps,T=s!==null?s.memoizedProps:null,h=v.children,Cf(m,v)?h=null:T!==null&&Cf(m,T)&&(r.flags|=32),r.memoizedState!==null&&(m=Eh(s,r,VE,null,null,c),Yo._currentValue=m),Bc(s,r),on(s,r,h,c),r.child;case 6:return s===null&&Qe&&((s=c=Rt)&&(c=RT(c,r.pendingProps,Ri),c!==null?(r.stateNode=c,bn=r,Rt=null,s=!0):s=!1),s||ma(r)),null;case 13:return my(s,r,c);case 4:return $e(r,r.stateNode.containerInfo),h=r.pendingProps,s===null?r.child=hr(r,null,h,c):on(s,r,h,c),r.child;case 11:return oy(s,r,r.type,r.pendingProps,c);case 7:return on(s,r,r.pendingProps,c),r.child;case 8:return on(s,r,r.pendingProps.children,c),r.child;case 12:return on(s,r,r.pendingProps.children,c),r.child;case 10:return h=r.pendingProps,Es(r,r.type,h.value),on(s,r,h.children,c),r.child;case 9:return m=r.type._context,h=r.pendingProps.children,va(r),m=gn(m),h=h(m),r.flags|=1,on(s,r,h,c),r.child;case 14:return ly(s,r,r.type,r.pendingProps,c);case 15:return cy(s,r,r.type,r.pendingProps,c);case 19:return vy(s,r,c);case 31:return h=r.pendingProps,c=r.mode,h={mode:h.mode,children:h.children},s===null?(c=Hc(h,c),c.ref=r.ref,r.child=c,c.return=r,r=c):(c=Yi(s.child,h),c.ref=r.ref,r.child=c,c.return=r,r=c),r;case 22:return uy(s,r,c);case 24:return va(r),h=gn(Bt),s===null?(m=mh(),m===null&&(m=ft,v=fh(),m.pooledCache=v,v.refCount++,v!==null&&(m.pooledCacheLanes|=c),m=v),r.memoizedState={parent:h,cache:m},vh(r),Es(r,Bt,m)):((s.lanes&c)!==0&&(yh(s,r),To(r,null,null,c),Eo()),m=s.memoizedState,v=r.memoizedState,m.parent!==h?(m={parent:h,cache:h},r.memoizedState=m,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=m),Es(r,Bt,h)):(h=v.cache,Es(r,Bt,h),h!==m.cache&&hh(r,[Bt],c,!0))),on(s,r,r.pendingProps.children,c),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function ts(s){s.flags|=4}function _y(s,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!R_(r)){if(r=Qn.current,r!==null&&((qe&4194048)===qe?Ai!==null:(qe&62914560)!==qe&&(qe&536870912)===0||r!==Ai))throw wo=ph,nv;s.flags|=8192}}function $c(s,r){r!==null&&(s.flags|=4),s.flags&16384&&(r=s.tag!==22?sc():536870912,s.lanes|=r,pr|=r)}function ko(s,r){if(!Qe)switch(s.tailMode){case"hidden":r=s.tail;for(var c=null;r!==null;)r.alternate!==null&&(c=r),r=r.sibling;c===null?s.tail=null:c.sibling=null;break;case"collapsed":c=s.tail;for(var h=null;c!==null;)c.alternate!==null&&(h=c),c=c.sibling;h===null?r||s.tail===null?s.tail=null:s.tail.sibling=null:h.sibling=null}}function Tt(s){var r=s.alternate!==null&&s.alternate.child===s.child,c=0,h=0;if(r)for(var m=s.child;m!==null;)c|=m.lanes|m.childLanes,h|=m.subtreeFlags&65011712,h|=m.flags&65011712,m.return=s,m=m.sibling;else for(m=s.child;m!==null;)c|=m.lanes|m.childLanes,h|=m.subtreeFlags,h|=m.flags,m.return=s,m=m.sibling;return s.subtreeFlags|=h,s.childLanes=c,r}function JE(s,r,c){var h=r.pendingProps;switch(lh(r),r.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Tt(r),null;case 1:return Tt(r),null;case 3:return c=r.stateNode,h=null,s!==null&&(h=s.memoizedState.cache),r.memoizedState.cache!==h&&(r.flags|=2048),Qi(Bt),ke(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(s===null||s.child===null)&&(mo(r)?ts(r):s===null||s.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Qp())),Tt(r),null;case 26:return c=r.memoizedState,s===null?(ts(r),c!==null?(Tt(r),_y(r,c)):(Tt(r),r.flags&=-16777217)):c?c!==s.memoizedState?(ts(r),Tt(r),_y(r,c)):(Tt(r),r.flags&=-16777217):(s.memoizedProps!==h&&ts(r),Tt(r),r.flags&=-16777217),null;case 27:Lt(r),c=fe.current;var m=r.type;if(s!==null&&r.stateNode!=null)s.memoizedProps!==h&&ts(r);else{if(!h){if(r.stateNode===null)throw Error(i(166));return Tt(r),null}s=ge.current,mo(r)?Kp(r):(s=__(m,h,c),r.stateNode=s,ts(r))}return Tt(r),null;case 5:if(Lt(r),c=r.type,s!==null&&r.stateNode!=null)s.memoizedProps!==h&&ts(r);else{if(!h){if(r.stateNode===null)throw Error(i(166));return Tt(r),null}if(s=ge.current,mo(r))Kp(r);else{switch(m=nu(fe.current),s){case 1:s=m.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:s=m.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":s=m.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":s=m.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":s=m.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof h.is=="string"?m.createElement("select",{is:h.is}):m.createElement("select"),h.multiple?s.multiple=!0:h.size&&(s.size=h.size);break;default:s=typeof h.is=="string"?m.createElement(c,{is:h.is}):m.createElement(c)}}s[yt]=r,s[_t]=h;e:for(m=r.child;m!==null;){if(m.tag===5||m.tag===6)s.appendChild(m.stateNode);else if(m.tag!==4&&m.tag!==27&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===r)break e;for(;m.sibling===null;){if(m.return===null||m.return===r)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}r.stateNode=s;e:switch(cn(s,c,h),c){case"button":case"input":case"select":case"textarea":s=!!h.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&ts(r)}}return Tt(r),r.flags&=-16777217,null;case 6:if(s&&r.stateNode!=null)s.memoizedProps!==h&&ts(r);else{if(typeof h!="string"&&r.stateNode===null)throw Error(i(166));if(s=fe.current,mo(r)){if(s=r.stateNode,c=r.memoizedProps,h=null,m=bn,m!==null)switch(m.tag){case 27:case 5:h=m.memoizedProps}s[yt]=r,s=!!(s.nodeValue===c||h!==null&&h.suppressHydrationWarning===!0||h_(s.nodeValue,c)),s||ma(r)}else s=nu(s).createTextNode(h),s[yt]=r,r.stateNode=s}return Tt(r),null;case 13:if(h=r.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(m=mo(r),h!==null&&h.dehydrated!==null){if(s===null){if(!m)throw Error(i(318));if(m=r.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(i(317));m[yt]=r}else po(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Tt(r),m=!1}else m=Qp(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=m),m=!0;if(!m)return r.flags&256?(Ji(r),r):(Ji(r),null)}if(Ji(r),(r.flags&128)!==0)return r.lanes=c,r;if(c=h!==null,s=s!==null&&s.memoizedState!==null,c){h=r.child,m=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(m=h.alternate.memoizedState.cachePool.pool);var v=null;h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(v=h.memoizedState.cachePool.pool),v!==m&&(h.flags|=2048)}return c!==s&&c&&(r.child.flags|=8192),$c(r,r.updateQueue),Tt(r),null;case 4:return ke(),s===null&&Sf(r.stateNode.containerInfo),Tt(r),null;case 10:return Qi(r.type),Tt(r),null;case 19:if(re(Ht),m=r.memoizedState,m===null)return Tt(r),null;if(h=(r.flags&128)!==0,v=m.rendering,v===null)if(h)ko(m,!1);else{if(At!==0||s!==null&&(s.flags&128)!==0)for(s=r.child;s!==null;){if(v=Pc(s),v!==null){for(r.flags|=128,ko(m,!1),s=v.updateQueue,r.updateQueue=s,$c(r,s),r.subtreeFlags=0,s=c,c=r.child;c!==null;)Yp(c,s),c=c.sibling;return oe(Ht,Ht.current&1|2),r.child}s=s.sibling}m.tail!==null&&Ze()>qc&&(r.flags|=128,h=!0,ko(m,!1),r.lanes=4194304)}else{if(!h)if(s=Pc(v),s!==null){if(r.flags|=128,h=!0,s=s.updateQueue,r.updateQueue=s,$c(r,s),ko(m,!0),m.tail===null&&m.tailMode==="hidden"&&!v.alternate&&!Qe)return Tt(r),null}else 2*Ze()-m.renderingStartTime>qc&&c!==536870912&&(r.flags|=128,h=!0,ko(m,!1),r.lanes=4194304);m.isBackwards?(v.sibling=r.child,r.child=v):(s=m.last,s!==null?s.sibling=v:r.child=v,m.last=v)}return m.tail!==null?(r=m.tail,m.rendering=r,m.tail=r.sibling,m.renderingStartTime=Ze(),r.sibling=null,s=Ht.current,oe(Ht,h?s&1|2:s&1),r):(Tt(r),null);case 22:case 23:return Ji(r),wh(),h=r.memoizedState!==null,s!==null?s.memoizedState!==null!==h&&(r.flags|=8192):h&&(r.flags|=8192),h?(c&536870912)!==0&&(r.flags&128)===0&&(Tt(r),r.subtreeFlags&6&&(r.flags|=8192)):Tt(r),c=r.updateQueue,c!==null&&$c(r,c.retryQueue),c=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),h=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(h=r.memoizedState.cachePool.pool),h!==c&&(r.flags|=2048),s!==null&&re(ya),null;case 24:return c=null,s!==null&&(c=s.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),Qi(Bt),Tt(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function eT(s,r){switch(lh(r),r.tag){case 1:return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 3:return Qi(Bt),ke(),s=r.flags,(s&65536)!==0&&(s&128)===0?(r.flags=s&-65537|128,r):null;case 26:case 27:case 5:return Lt(r),null;case 13:if(Ji(r),s=r.memoizedState,s!==null&&s.dehydrated!==null){if(r.alternate===null)throw Error(i(340));po()}return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 19:return re(Ht),null;case 4:return ke(),null;case 10:return Qi(r.type),null;case 22:case 23:return Ji(r),wh(),s!==null&&re(ya),s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 24:return Qi(Bt),null;case 25:return null;default:return null}}function by(s,r){switch(lh(r),r.tag){case 3:Qi(Bt),ke();break;case 26:case 27:case 5:Lt(r);break;case 4:ke();break;case 13:Ji(r);break;case 19:re(Ht);break;case 10:Qi(r.type);break;case 22:case 23:Ji(r),wh(),s!==null&&re(ya);break;case 24:Qi(Bt)}}function No(s,r){try{var c=r.updateQueue,h=c!==null?c.lastEffect:null;if(h!==null){var m=h.next;c=m;do{if((c.tag&s)===s){h=void 0;var v=c.create,T=c.inst;h=v(),T.destroy=h}c=c.next}while(c!==m)}}catch(O){ut(r,r.return,O)}}function Ms(s,r,c){try{var h=r.updateQueue,m=h!==null?h.lastEffect:null;if(m!==null){var v=m.next;h=v;do{if((h.tag&s)===s){var T=h.inst,O=T.destroy;if(O!==void 0){T.destroy=void 0,m=r;var N=c,G=O;try{G()}catch(J){ut(m,N,J)}}}h=h.next}while(h!==v)}}catch(J){ut(r,r.return,J)}}function Sy(s){var r=s.updateQueue;if(r!==null){var c=s.stateNode;try{lv(r,c)}catch(h){ut(s,s.return,h)}}}function wy(s,r,c){c.props=ba(s.type,s.memoizedProps),c.state=s.memoizedState;try{c.componentWillUnmount()}catch(h){ut(s,r,h)}}function jo(s,r){try{var c=s.ref;if(c!==null){switch(s.tag){case 26:case 27:case 5:var h=s.stateNode;break;case 30:h=s.stateNode;break;default:h=s.stateNode}typeof c=="function"?s.refCleanup=c(h):c.current=h}}catch(m){ut(s,r,m)}}function Oi(s,r){var c=s.ref,h=s.refCleanup;if(c!==null)if(typeof h=="function")try{h()}catch(m){ut(s,r,m)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(m){ut(s,r,m)}else c.current=null}function xy(s){var r=s.type,c=s.memoizedProps,h=s.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":c.autoFocus&&h.focus();break e;case"img":c.src?h.src=c.src:c.srcSet&&(h.srcset=c.srcSet)}}catch(m){ut(s,s.return,m)}}function Xh(s,r,c){try{var h=s.stateNode;ST(h,s.type,c,r),h[_t]=r}catch(m){ut(s,s.return,m)}}function Ey(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Fs(s.type)||s.tag===4}function Qh(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||Ey(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Fs(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Zh(s,r,c){var h=s.tag;if(h===5||h===6)s=s.stateNode,r?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(s,r):(r=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,r.appendChild(s),c=c._reactRootContainer,c!=null||r.onclick!==null||(r.onclick=tu));else if(h!==4&&(h===27&&Fs(s.type)&&(c=s.stateNode,r=null),s=s.child,s!==null))for(Zh(s,r,c),s=s.sibling;s!==null;)Zh(s,r,c),s=s.sibling}function Vc(s,r,c){var h=s.tag;if(h===5||h===6)s=s.stateNode,r?c.insertBefore(s,r):c.appendChild(s);else if(h!==4&&(h===27&&Fs(s.type)&&(c=s.stateNode),s=s.child,s!==null))for(Vc(s,r,c),s=s.sibling;s!==null;)Vc(s,r,c),s=s.sibling}function Ty(s){var r=s.stateNode,c=s.memoizedProps;try{for(var h=s.type,m=r.attributes;m.length;)r.removeAttributeNode(m[0]);cn(r,h,c),r[yt]=s,r[_t]=c}catch(v){ut(s,s.return,v)}}var ns=!1,kt=!1,Jh=!1,Cy=typeof WeakSet=="function"?WeakSet:Set,Qt=null;function tT(s,r){if(s=s.containerInfo,Ef=lu,s=Up(s),Qd(s)){if("selectionStart"in s)var c={start:s.selectionStart,end:s.selectionEnd};else e:{c=(c=s.ownerDocument)&&c.defaultView||window;var h=c.getSelection&&c.getSelection();if(h&&h.rangeCount!==0){c=h.anchorNode;var m=h.anchorOffset,v=h.focusNode;h=h.focusOffset;try{c.nodeType,v.nodeType}catch{c=null;break e}var T=0,O=-1,N=-1,G=0,J=0,ie=s,q=null;t:for(;;){for(var W;ie!==c||m!==0&&ie.nodeType!==3||(O=T+m),ie!==v||h!==0&&ie.nodeType!==3||(N=T+h),ie.nodeType===3&&(T+=ie.nodeValue.length),(W=ie.firstChild)!==null;)q=ie,ie=W;for(;;){if(ie===s)break t;if(q===c&&++G===m&&(O=T),q===v&&++J===h&&(N=T),(W=ie.nextSibling)!==null)break;ie=q,q=ie.parentNode}ie=W}c=O===-1||N===-1?null:{start:O,end:N}}else c=null}c=c||{start:0,end:0}}else c=null;for(Tf={focusedElem:s,selectionRange:c},lu=!1,Qt=r;Qt!==null;)if(r=Qt,s=r.child,(r.subtreeFlags&1024)!==0&&s!==null)s.return=r,Qt=s;else for(;Qt!==null;){switch(r=Qt,v=r.alternate,s=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&v!==null){s=void 0,c=r,m=v.memoizedProps,v=v.memoizedState,h=c.stateNode;try{var Ae=ba(c.type,m,c.elementType===c.type);s=h.getSnapshotBeforeUpdate(Ae,v),h.__reactInternalSnapshotBeforeUpdate=s}catch(we){ut(c,c.return,we)}}break;case 3:if((s&1024)!==0){if(s=r.stateNode.containerInfo,c=s.nodeType,c===9)Af(s);else if(c===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Af(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=r.sibling,s!==null){s.return=r.return,Qt=s;break}Qt=r.return}}function Ry(s,r,c){var h=c.flags;switch(c.tag){case 0:case 11:case 15:ks(s,c),h&4&&No(5,c);break;case 1:if(ks(s,c),h&4)if(s=c.stateNode,r===null)try{s.componentDidMount()}catch(T){ut(c,c.return,T)}else{var m=ba(c.type,r.memoizedProps);r=r.memoizedState;try{s.componentDidUpdate(m,r,s.__reactInternalSnapshotBeforeUpdate)}catch(T){ut(c,c.return,T)}}h&64&&Sy(c),h&512&&jo(c,c.return);break;case 3:if(ks(s,c),h&64&&(s=c.updateQueue,s!==null)){if(r=null,c.child!==null)switch(c.child.tag){case 27:case 5:r=c.child.stateNode;break;case 1:r=c.child.stateNode}try{lv(s,r)}catch(T){ut(c,c.return,T)}}break;case 27:r===null&&h&4&&Ty(c);case 26:case 5:ks(s,c),r===null&&h&4&&xy(c),h&512&&jo(c,c.return);break;case 12:ks(s,c);break;case 13:ks(s,c),h&4&&Dy(s,c),h&64&&(s=c.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(c=uT.bind(null,c),AT(s,c))));break;case 22:if(h=c.memoizedState!==null||ns,!h){r=r!==null&&r.memoizedState!==null||kt,m=ns;var v=kt;ns=h,(kt=r)&&!v?Ns(s,c,(c.subtreeFlags&8772)!==0):ks(s,c),ns=m,kt=v}break;case 30:break;default:ks(s,c)}}function Ay(s){var r=s.alternate;r!==null&&(s.alternate=null,Ay(r)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(r=s.stateNode,r!==null&&kd(r)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var St=null,An=!1;function is(s,r,c){for(c=c.child;c!==null;)Oy(s,r,c),c=c.sibling}function Oy(s,r,c){if(Te&&typeof Te.onCommitFiberUnmount=="function")try{Te.onCommitFiberUnmount(ve,c)}catch{}switch(c.tag){case 26:kt||Oi(c,r),is(s,r,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:kt||Oi(c,r);var h=St,m=An;Fs(c.type)&&(St=c.stateNode,An=!1),is(s,r,c),$o(c.stateNode),St=h,An=m;break;case 5:kt||Oi(c,r);case 6:if(h=St,m=An,St=null,is(s,r,c),St=h,An=m,St!==null)if(An)try{(St.nodeType===9?St.body:St.nodeName==="HTML"?St.ownerDocument.body:St).removeChild(c.stateNode)}catch(v){ut(c,r,v)}else try{St.removeChild(c.stateNode)}catch(v){ut(c,r,v)}break;case 18:St!==null&&(An?(s=St,v_(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,c.stateNode),Qo(s)):v_(St,c.stateNode));break;case 4:h=St,m=An,St=c.stateNode.containerInfo,An=!0,is(s,r,c),St=h,An=m;break;case 0:case 11:case 14:case 15:kt||Ms(2,c,r),kt||Ms(4,c,r),is(s,r,c);break;case 1:kt||(Oi(c,r),h=c.stateNode,typeof h.componentWillUnmount=="function"&&wy(c,r,h)),is(s,r,c);break;case 21:is(s,r,c);break;case 22:kt=(h=kt)||c.memoizedState!==null,is(s,r,c),kt=h;break;default:is(s,r,c)}}function Dy(s,r){if(r.memoizedState===null&&(s=r.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Qo(s)}catch(c){ut(r,r.return,c)}}function nT(s){switch(s.tag){case 13:case 19:var r=s.stateNode;return r===null&&(r=s.stateNode=new Cy),r;case 22:return s=s.stateNode,r=s._retryCache,r===null&&(r=s._retryCache=new Cy),r;default:throw Error(i(435,s.tag))}}function ef(s,r){var c=nT(s);r.forEach(function(h){var m=dT.bind(null,s,h);c.has(h)||(c.add(h),h.then(m,m))})}function Pn(s,r){var c=r.deletions;if(c!==null)for(var h=0;h<c.length;h++){var m=c[h],v=s,T=r,O=T;e:for(;O!==null;){switch(O.tag){case 27:if(Fs(O.type)){St=O.stateNode,An=!1;break e}break;case 5:St=O.stateNode,An=!1;break e;case 3:case 4:St=O.stateNode.containerInfo,An=!0;break e}O=O.return}if(St===null)throw Error(i(160));Oy(v,T,m),St=null,An=!1,v=m.alternate,v!==null&&(v.return=null),m.return=null}if(r.subtreeFlags&13878)for(r=r.child;r!==null;)My(r,s),r=r.sibling}var ui=null;function My(s,r){var c=s.alternate,h=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Pn(r,s),Fn(s),h&4&&(Ms(3,s,s.return),No(3,s),Ms(5,s,s.return));break;case 1:Pn(r,s),Fn(s),h&512&&(kt||c===null||Oi(c,c.return)),h&64&&ns&&(s=s.updateQueue,s!==null&&(h=s.callbacks,h!==null&&(c=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=c===null?h:c.concat(h))));break;case 26:var m=ui;if(Pn(r,s),Fn(s),h&512&&(kt||c===null||Oi(c,c.return)),h&4){var v=c!==null?c.memoizedState:null;if(h=s.memoizedState,c===null)if(h===null)if(s.stateNode===null){e:{h=s.type,c=s.memoizedProps,m=m.ownerDocument||m;t:switch(h){case"title":v=m.getElementsByTagName("title")[0],(!v||v[Vi]||v[yt]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=m.createElement(h),m.head.insertBefore(v,m.querySelector("head > title"))),cn(v,h,c),v[yt]=s,Kt(v),h=v;break e;case"link":var T=T_("link","href",m).get(h+(c.href||""));if(T){for(var O=0;O<T.length;O++)if(v=T[O],v.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&v.getAttribute("rel")===(c.rel==null?null:c.rel)&&v.getAttribute("title")===(c.title==null?null:c.title)&&v.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){T.splice(O,1);break t}}v=m.createElement(h),cn(v,h,c),m.head.appendChild(v);break;case"meta":if(T=T_("meta","content",m).get(h+(c.content||""))){for(O=0;O<T.length;O++)if(v=T[O],v.getAttribute("content")===(c.content==null?null:""+c.content)&&v.getAttribute("name")===(c.name==null?null:c.name)&&v.getAttribute("property")===(c.property==null?null:c.property)&&v.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&v.getAttribute("charset")===(c.charSet==null?null:c.charSet)){T.splice(O,1);break t}}v=m.createElement(h),cn(v,h,c),m.head.appendChild(v);break;default:throw Error(i(468,h))}v[yt]=s,Kt(v),h=v}s.stateNode=h}else C_(m,s.type,s.stateNode);else s.stateNode=E_(m,h,s.memoizedProps);else v!==h?(v===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):v.count--,h===null?C_(m,s.type,s.stateNode):E_(m,h,s.memoizedProps)):h===null&&s.stateNode!==null&&Xh(s,s.memoizedProps,c.memoizedProps)}break;case 27:Pn(r,s),Fn(s),h&512&&(kt||c===null||Oi(c,c.return)),c!==null&&h&4&&Xh(s,s.memoizedProps,c.memoizedProps);break;case 5:if(Pn(r,s),Fn(s),h&512&&(kt||c===null||Oi(c,c.return)),s.flags&32){m=s.stateNode;try{Wa(m,"")}catch(W){ut(s,s.return,W)}}h&4&&s.stateNode!=null&&(m=s.memoizedProps,Xh(s,m,c!==null?c.memoizedProps:m)),h&1024&&(Jh=!0);break;case 6:if(Pn(r,s),Fn(s),h&4){if(s.stateNode===null)throw Error(i(162));h=s.memoizedProps,c=s.stateNode;try{c.nodeValue=h}catch(W){ut(s,s.return,W)}}break;case 3:if(au=null,m=ui,ui=iu(r.containerInfo),Pn(r,s),ui=m,Fn(s),h&4&&c!==null&&c.memoizedState.isDehydrated)try{Qo(r.containerInfo)}catch(W){ut(s,s.return,W)}Jh&&(Jh=!1,ky(s));break;case 4:h=ui,ui=iu(s.stateNode.containerInfo),Pn(r,s),Fn(s),ui=h;break;case 12:Pn(r,s),Fn(s);break;case 13:Pn(r,s),Fn(s),s.child.flags&8192&&s.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(of=Ze()),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,ef(s,h)));break;case 22:m=s.memoizedState!==null;var N=c!==null&&c.memoizedState!==null,G=ns,J=kt;if(ns=G||m,kt=J||N,Pn(r,s),kt=J,ns=G,Fn(s),h&8192)e:for(r=s.stateNode,r._visibility=m?r._visibility&-2:r._visibility|1,m&&(c===null||N||ns||kt||Sa(s)),c=null,r=s;;){if(r.tag===5||r.tag===26){if(c===null){N=c=r;try{if(v=N.stateNode,m)T=v.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{O=N.stateNode;var ie=N.memoizedProps.style,q=ie!=null&&ie.hasOwnProperty("display")?ie.display:null;O.style.display=q==null||typeof q=="boolean"?"":(""+q).trim()}}catch(W){ut(N,N.return,W)}}}else if(r.tag===6){if(c===null){N=r;try{N.stateNode.nodeValue=m?"":N.memoizedProps}catch(W){ut(N,N.return,W)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===s)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;c===r&&(c=null),r=r.return}c===r&&(c=null),r.sibling.return=r.return,r=r.sibling}h&4&&(h=s.updateQueue,h!==null&&(c=h.retryQueue,c!==null&&(h.retryQueue=null,ef(s,c))));break;case 19:Pn(r,s),Fn(s),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,ef(s,h)));break;case 30:break;case 21:break;default:Pn(r,s),Fn(s)}}function Fn(s){var r=s.flags;if(r&2){try{for(var c,h=s.return;h!==null;){if(Ey(h)){c=h;break}h=h.return}if(c==null)throw Error(i(160));switch(c.tag){case 27:var m=c.stateNode,v=Qh(s);Vc(s,v,m);break;case 5:var T=c.stateNode;c.flags&32&&(Wa(T,""),c.flags&=-33);var O=Qh(s);Vc(s,O,T);break;case 3:case 4:var N=c.stateNode.containerInfo,G=Qh(s);Zh(s,G,N);break;default:throw Error(i(161))}}catch(J){ut(s,s.return,J)}s.flags&=-3}r&4096&&(s.flags&=-4097)}function ky(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var r=s;ky(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),s=s.sibling}}function ks(s,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)Ry(s,r.alternate,r),r=r.sibling}function Sa(s){for(s=s.child;s!==null;){var r=s;switch(r.tag){case 0:case 11:case 14:case 15:Ms(4,r,r.return),Sa(r);break;case 1:Oi(r,r.return);var c=r.stateNode;typeof c.componentWillUnmount=="function"&&wy(r,r.return,c),Sa(r);break;case 27:$o(r.stateNode);case 26:case 5:Oi(r,r.return),Sa(r);break;case 22:r.memoizedState===null&&Sa(r);break;case 30:Sa(r);break;default:Sa(r)}s=s.sibling}}function Ns(s,r,c){for(c=c&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var h=r.alternate,m=s,v=r,T=v.flags;switch(v.tag){case 0:case 11:case 15:Ns(m,v,c),No(4,v);break;case 1:if(Ns(m,v,c),h=v,m=h.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(G){ut(h,h.return,G)}if(h=v,m=h.updateQueue,m!==null){var O=h.stateNode;try{var N=m.shared.hiddenCallbacks;if(N!==null)for(m.shared.hiddenCallbacks=null,m=0;m<N.length;m++)ov(N[m],O)}catch(G){ut(h,h.return,G)}}c&&T&64&&Sy(v),jo(v,v.return);break;case 27:Ty(v);case 26:case 5:Ns(m,v,c),c&&h===null&&T&4&&xy(v),jo(v,v.return);break;case 12:Ns(m,v,c);break;case 13:Ns(m,v,c),c&&T&4&&Dy(m,v);break;case 22:v.memoizedState===null&&Ns(m,v,c),jo(v,v.return);break;case 30:break;default:Ns(m,v,c)}r=r.sibling}}function tf(s,r){var c=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),s=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(s=r.memoizedState.cachePool.pool),s!==c&&(s!=null&&s.refCount++,c!=null&&_o(c))}function nf(s,r){s=null,r.alternate!==null&&(s=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==s&&(r.refCount++,s!=null&&_o(s))}function Di(s,r,c,h){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Ny(s,r,c,h),r=r.sibling}function Ny(s,r,c,h){var m=r.flags;switch(r.tag){case 0:case 11:case 15:Di(s,r,c,h),m&2048&&No(9,r);break;case 1:Di(s,r,c,h);break;case 3:Di(s,r,c,h),m&2048&&(s=null,r.alternate!==null&&(s=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==s&&(r.refCount++,s!=null&&_o(s)));break;case 12:if(m&2048){Di(s,r,c,h),s=r.stateNode;try{var v=r.memoizedProps,T=v.id,O=v.onPostCommit;typeof O=="function"&&O(T,r.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(N){ut(r,r.return,N)}}else Di(s,r,c,h);break;case 13:Di(s,r,c,h);break;case 23:break;case 22:v=r.stateNode,T=r.alternate,r.memoizedState!==null?v._visibility&2?Di(s,r,c,h):Lo(s,r):v._visibility&2?Di(s,r,c,h):(v._visibility|=2,fr(s,r,c,h,(r.subtreeFlags&10256)!==0)),m&2048&&tf(T,r);break;case 24:Di(s,r,c,h),m&2048&&nf(r.alternate,r);break;default:Di(s,r,c,h)}}function fr(s,r,c,h,m){for(m=m&&(r.subtreeFlags&10256)!==0,r=r.child;r!==null;){var v=s,T=r,O=c,N=h,G=T.flags;switch(T.tag){case 0:case 11:case 15:fr(v,T,O,N,m),No(8,T);break;case 23:break;case 22:var J=T.stateNode;T.memoizedState!==null?J._visibility&2?fr(v,T,O,N,m):Lo(v,T):(J._visibility|=2,fr(v,T,O,N,m)),m&&G&2048&&tf(T.alternate,T);break;case 24:fr(v,T,O,N,m),m&&G&2048&&nf(T.alternate,T);break;default:fr(v,T,O,N,m)}r=r.sibling}}function Lo(s,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var c=s,h=r,m=h.flags;switch(h.tag){case 22:Lo(c,h),m&2048&&tf(h.alternate,h);break;case 24:Lo(c,h),m&2048&&nf(h.alternate,h);break;default:Lo(c,h)}r=r.sibling}}var Io=8192;function gr(s){if(s.subtreeFlags&Io)for(s=s.child;s!==null;)jy(s),s=s.sibling}function jy(s){switch(s.tag){case 26:gr(s),s.flags&Io&&s.memoizedState!==null&&BT(ui,s.memoizedState,s.memoizedProps);break;case 5:gr(s);break;case 3:case 4:var r=ui;ui=iu(s.stateNode.containerInfo),gr(s),ui=r;break;case 22:s.memoizedState===null&&(r=s.alternate,r!==null&&r.memoizedState!==null?(r=Io,Io=16777216,gr(s),Io=r):gr(s));break;default:gr(s)}}function Ly(s){var r=s.alternate;if(r!==null&&(s=r.child,s!==null)){r.child=null;do r=s.sibling,s.sibling=null,s=r;while(s!==null)}}function Uo(s){var r=s.deletions;if((s.flags&16)!==0){if(r!==null)for(var c=0;c<r.length;c++){var h=r[c];Qt=h,Uy(h,s)}Ly(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Iy(s),s=s.sibling}function Iy(s){switch(s.tag){case 0:case 11:case 15:Uo(s),s.flags&2048&&Ms(9,s,s.return);break;case 3:Uo(s);break;case 12:Uo(s);break;case 22:var r=s.stateNode;s.memoizedState!==null&&r._visibility&2&&(s.return===null||s.return.tag!==13)?(r._visibility&=-3,Gc(s)):Uo(s);break;default:Uo(s)}}function Gc(s){var r=s.deletions;if((s.flags&16)!==0){if(r!==null)for(var c=0;c<r.length;c++){var h=r[c];Qt=h,Uy(h,s)}Ly(s)}for(s=s.child;s!==null;){switch(r=s,r.tag){case 0:case 11:case 15:Ms(8,r,r.return),Gc(r);break;case 22:c=r.stateNode,c._visibility&2&&(c._visibility&=-3,Gc(r));break;default:Gc(r)}s=s.sibling}}function Uy(s,r){for(;Qt!==null;){var c=Qt;switch(c.tag){case 0:case 11:case 15:Ms(8,c,r);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var h=c.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:_o(c.memoizedState.cache)}if(h=c.child,h!==null)h.return=c,Qt=h;else e:for(c=s;Qt!==null;){h=Qt;var m=h.sibling,v=h.return;if(Ay(h),h===c){Qt=null;break e}if(m!==null){m.return=v,Qt=m;break e}Qt=v}}}var iT={getCacheForType:function(s){var r=gn(Bt),c=r.data.get(s);return c===void 0&&(c=s(),r.data.set(s,c)),c}},sT=typeof WeakMap=="function"?WeakMap:Map,tt=0,ft=null,ze=null,qe=0,nt=0,zn=null,js=!1,mr=!1,sf=!1,ss=0,At=0,Ls=0,wa=0,af=0,Zn=0,pr=0,Po=null,On=null,rf=!1,of=0,qc=1/0,Yc=null,Is=null,ln=0,Us=null,vr=null,yr=0,lf=0,cf=null,Py=null,Fo=0,uf=null;function Bn(){if((tt&2)!==0&&qe!==0)return qe&-qe;if(U.T!==null){var s=ar;return s!==0?s:vf()}return Ln()}function Fy(){Zn===0&&(Zn=(qe&536870912)===0||Qe?ic():536870912);var s=Qn.current;return s!==null&&(s.flags|=32),Zn}function Hn(s,r,c){(s===ft&&(nt===2||nt===9)||s.cancelPendingCommit!==null)&&(_r(s,0),Ps(s,qe,Zn,!1)),Ct(s,c),((tt&2)===0||s!==ft)&&(s===ft&&((tt&2)===0&&(wa|=c),At===4&&Ps(s,qe,Zn,!1)),Mi(s))}function zy(s,r,c){if((tt&6)!==0)throw Error(i(327));var h=!c&&(r&124)===0&&(r&s.expiredLanes)===0||Hi(s,r),m=h?oT(s,r):ff(s,r,!0),v=h;do{if(m===0){mr&&!h&&Ps(s,r,0,!1);break}else{if(c=s.current.alternate,v&&!aT(c)){m=ff(s,r,!1),v=!1;continue}if(m===2){if(v=r,s.errorRecoveryDisabledLanes&v)var T=0;else T=s.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){r=T;e:{var O=s;m=Po;var N=O.current.memoizedState.isDehydrated;if(N&&(_r(O,T).flags|=256),T=ff(O,T,!1),T!==2){if(sf&&!N){O.errorRecoveryDisabledLanes|=v,wa|=v,m=4;break e}v=On,On=m,v!==null&&(On===null?On=v:On.push.apply(On,v))}m=T}if(v=!1,m!==2)continue}}if(m===1){_r(s,0),Ps(s,r,0,!0);break}e:{switch(h=s,v=m,v){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:Ps(h,r,Zn,!js);break e;case 2:On=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(m=of+300-Ze(),10<m)){if(Ps(h,r,Zn,!js),Ti(h,0,!0)!==0)break e;h.timeoutHandle=m_(By.bind(null,h,c,On,Yc,rf,r,Zn,wa,pr,js,v,2,-0,0),m);break e}By(h,c,On,Yc,rf,r,Zn,wa,pr,js,v,0,-0,0)}}break}while(!0);Mi(s)}function By(s,r,c,h,m,v,T,O,N,G,J,ie,q,W){if(s.timeoutHandle=-1,ie=r.subtreeFlags,(ie&8192||(ie&16785408)===16785408)&&(qo={stylesheets:null,count:0,unsuspend:zT},jy(r),ie=HT(),ie!==null)){s.cancelPendingCommit=ie(Wy.bind(null,s,r,v,c,h,m,T,O,N,J,1,q,W)),Ps(s,v,T,!G);return}Wy(s,r,v,c,h,m,T,O,N)}function aT(s){for(var r=s;;){var c=r.tag;if((c===0||c===11||c===15)&&r.flags&16384&&(c=r.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var h=0;h<c.length;h++){var m=c[h],v=m.getSnapshot;m=m.value;try{if(!In(v(),m))return!1}catch{return!1}}if(c=r.child,r.subtreeFlags&16384&&c!==null)c.return=r,r=c;else{if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Ps(s,r,c,h){r&=~af,r&=~wa,s.suspendedLanes|=r,s.pingedLanes&=~r,h&&(s.warmLanes|=r),h=s.expirationTimes;for(var m=r;0<m;){var v=31-We(m),T=1<<v;h[v]=-1,m&=~T}c!==0&&dn(s,c,r)}function Wc(){return(tt&6)===0?(zo(0),!1):!0}function df(){if(ze!==null){if(nt===0)var s=ze.return;else s=ze,Xi=pa=null,Rh(s),dr=null,Do=0,s=ze;for(;s!==null;)by(s.alternate,s),s=s.return;ze=null}}function _r(s,r){var c=s.timeoutHandle;c!==-1&&(s.timeoutHandle=-1,xT(c)),c=s.cancelPendingCommit,c!==null&&(s.cancelPendingCommit=null,c()),df(),ft=s,ze=c=Yi(s.current,null),qe=r,nt=0,zn=null,js=!1,mr=Hi(s,r),sf=!1,pr=Zn=af=wa=Ls=At=0,On=Po=null,rf=!1,(r&8)!==0&&(r|=r&32);var h=s.entangledLanes;if(h!==0)for(s=s.entanglements,h&=r;0<h;){var m=31-We(h),v=1<<m;r|=s[m],h&=~v}return ss=r,pc(),c}function Hy(s,r){Pe=null,U.H=Lc,r===So||r===Tc?(r=av(),nt=3):r===nv?(r=av(),nt=4):nt=r===ry?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,zn=r,ze===null&&(At=1,zc(s,Yn(r,s.current)))}function $y(){var s=U.H;return U.H=Lc,s===null?Lc:s}function Vy(){var s=U.A;return U.A=iT,s}function hf(){At=4,js||(qe&4194048)!==qe&&Qn.current!==null||(mr=!0),(Ls&134217727)===0&&(wa&134217727)===0||ft===null||Ps(ft,qe,Zn,!1)}function ff(s,r,c){var h=tt;tt|=2;var m=$y(),v=Vy();(ft!==s||qe!==r)&&(Yc=null,_r(s,r)),r=!1;var T=At;e:do try{if(nt!==0&&ze!==null){var O=ze,N=zn;switch(nt){case 8:df(),T=6;break e;case 3:case 2:case 9:case 6:Qn.current===null&&(r=!0);var G=nt;if(nt=0,zn=null,br(s,O,N,G),c&&mr){T=0;break e}break;default:G=nt,nt=0,zn=null,br(s,O,N,G)}}rT(),T=At;break}catch(J){Hy(s,J)}while(!0);return r&&s.shellSuspendCounter++,Xi=pa=null,tt=h,U.H=m,U.A=v,ze===null&&(ft=null,qe=0,pc()),T}function rT(){for(;ze!==null;)Gy(ze)}function oT(s,r){var c=tt;tt|=2;var h=$y(),m=Vy();ft!==s||qe!==r?(Yc=null,qc=Ze()+500,_r(s,r)):mr=Hi(s,r);e:do try{if(nt!==0&&ze!==null){r=ze;var v=zn;t:switch(nt){case 1:nt=0,zn=null,br(s,r,v,1);break;case 2:case 9:if(iv(v)){nt=0,zn=null,qy(r);break}r=function(){nt!==2&&nt!==9||ft!==s||(nt=7),Mi(s)},v.then(r,r);break e;case 3:nt=7;break e;case 4:nt=5;break e;case 7:iv(v)?(nt=0,zn=null,qy(r)):(nt=0,zn=null,br(s,r,v,7));break;case 5:var T=null;switch(ze.tag){case 26:T=ze.memoizedState;case 5:case 27:var O=ze;if(!T||R_(T)){nt=0,zn=null;var N=O.sibling;if(N!==null)ze=N;else{var G=O.return;G!==null?(ze=G,Kc(G)):ze=null}break t}}nt=0,zn=null,br(s,r,v,5);break;case 6:nt=0,zn=null,br(s,r,v,6);break;case 8:df(),At=6;break e;default:throw Error(i(462))}}lT();break}catch(J){Hy(s,J)}while(!0);return Xi=pa=null,U.H=h,U.A=m,tt=c,ze!==null?0:(ft=null,qe=0,pc(),At)}function lT(){for(;ze!==null&&!Ge();)Gy(ze)}function Gy(s){var r=yy(s.alternate,s,ss);s.memoizedProps=s.pendingProps,r===null?Kc(s):ze=r}function qy(s){var r=s,c=r.alternate;switch(r.tag){case 15:case 0:r=hy(c,r,r.pendingProps,r.type,void 0,qe);break;case 11:r=hy(c,r,r.pendingProps,r.type.render,r.ref,qe);break;case 5:Rh(r);default:by(c,r),r=ze=Yp(r,ss),r=yy(c,r,ss)}s.memoizedProps=s.pendingProps,r===null?Kc(s):ze=r}function br(s,r,c,h){Xi=pa=null,Rh(r),dr=null,Do=0;var m=r.return;try{if(QE(s,m,r,c,qe)){At=1,zc(s,Yn(c,s.current)),ze=null;return}}catch(v){if(m!==null)throw ze=m,v;At=1,zc(s,Yn(c,s.current)),ze=null;return}r.flags&32768?(Qe||h===1?s=!0:mr||(qe&536870912)!==0?s=!1:(js=s=!0,(h===2||h===9||h===3||h===6)&&(h=Qn.current,h!==null&&h.tag===13&&(h.flags|=16384))),Yy(r,s)):Kc(r)}function Kc(s){var r=s;do{if((r.flags&32768)!==0){Yy(r,js);return}s=r.return;var c=JE(r.alternate,r,ss);if(c!==null){ze=c;return}if(r=r.sibling,r!==null){ze=r;return}ze=r=s}while(r!==null);At===0&&(At=5)}function Yy(s,r){do{var c=eT(s.alternate,s);if(c!==null){c.flags&=32767,ze=c;return}if(c=s.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!r&&(s=s.sibling,s!==null)){ze=s;return}ze=s=c}while(s!==null);At=6,ze=null}function Wy(s,r,c,h,m,v,T,O,N){s.cancelPendingCommit=null;do Xc();while(ln!==0);if((tt&6)!==0)throw Error(i(327));if(r!==null){if(r===s.current)throw Error(i(177));if(v=r.lanes|r.childLanes,v|=nh,_n(s,c,v,T,O,N),s===ft&&(ze=ft=null,qe=0),vr=r,Us=s,yr=c,lf=v,cf=m,Py=h,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,hT($,function(){return Jy(),null})):(s.callbackNode=null,s.callbackPriority=0),h=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||h){h=U.T,U.T=null,m=Y.p,Y.p=2,T=tt,tt|=4;try{tT(s,r,c)}finally{tt=T,Y.p=m,U.T=h}}ln=1,Ky(),Xy(),Qy()}}function Ky(){if(ln===1){ln=0;var s=Us,r=vr,c=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||c){c=U.T,U.T=null;var h=Y.p;Y.p=2;var m=tt;tt|=4;try{My(r,s);var v=Tf,T=Up(s.containerInfo),O=v.focusedElem,N=v.selectionRange;if(T!==O&&O&&O.ownerDocument&&Ip(O.ownerDocument.documentElement,O)){if(N!==null&&Qd(O)){var G=N.start,J=N.end;if(J===void 0&&(J=G),"selectionStart"in O)O.selectionStart=G,O.selectionEnd=Math.min(J,O.value.length);else{var ie=O.ownerDocument||document,q=ie&&ie.defaultView||window;if(q.getSelection){var W=q.getSelection(),Ae=O.textContent.length,we=Math.min(N.start,Ae),ot=N.end===void 0?we:Math.min(N.end,Ae);!W.extend&&we>ot&&(T=ot,ot=we,we=T);var B=Lp(O,we),F=Lp(O,ot);if(B&&F&&(W.rangeCount!==1||W.anchorNode!==B.node||W.anchorOffset!==B.offset||W.focusNode!==F.node||W.focusOffset!==F.offset)){var V=ie.createRange();V.setStart(B.node,B.offset),W.removeAllRanges(),we>ot?(W.addRange(V),W.extend(F.node,F.offset)):(V.setEnd(F.node,F.offset),W.addRange(V))}}}}for(ie=[],W=O;W=W.parentNode;)W.nodeType===1&&ie.push({element:W,left:W.scrollLeft,top:W.scrollTop});for(typeof O.focus=="function"&&O.focus(),O=0;O<ie.length;O++){var ne=ie[O];ne.element.scrollLeft=ne.left,ne.element.scrollTop=ne.top}}lu=!!Ef,Tf=Ef=null}finally{tt=m,Y.p=h,U.T=c}}s.current=r,ln=2}}function Xy(){if(ln===2){ln=0;var s=Us,r=vr,c=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||c){c=U.T,U.T=null;var h=Y.p;Y.p=2;var m=tt;tt|=4;try{Ry(s,r.alternate,r)}finally{tt=m,Y.p=h,U.T=c}}ln=3}}function Qy(){if(ln===4||ln===3){ln=0,Ne();var s=Us,r=vr,c=yr,h=Py;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?ln=5:(ln=0,vr=Us=null,Zy(s,s.pendingLanes));var m=s.pendingLanes;if(m===0&&(Is=null),rn(c),r=r.stateNode,Te&&typeof Te.onCommitFiberRoot=="function")try{Te.onCommitFiberRoot(ve,r,void 0,(r.current.flags&128)===128)}catch{}if(h!==null){r=U.T,m=Y.p,Y.p=2,U.T=null;try{for(var v=s.onRecoverableError,T=0;T<h.length;T++){var O=h[T];v(O.value,{componentStack:O.stack})}}finally{U.T=r,Y.p=m}}(yr&3)!==0&&Xc(),Mi(s),m=s.pendingLanes,(c&4194090)!==0&&(m&42)!==0?s===uf?Fo++:(Fo=0,uf=s):Fo=0,zo(0)}}function Zy(s,r){(s.pooledCacheLanes&=r)===0&&(r=s.pooledCache,r!=null&&(s.pooledCache=null,_o(r)))}function Xc(s){return Ky(),Xy(),Qy(),Jy()}function Jy(){if(ln!==5)return!1;var s=Us,r=lf;lf=0;var c=rn(yr),h=U.T,m=Y.p;try{Y.p=32>c?32:c,U.T=null,c=cf,cf=null;var v=Us,T=yr;if(ln=0,vr=Us=null,yr=0,(tt&6)!==0)throw Error(i(331));var O=tt;if(tt|=4,Iy(v.current),Ny(v,v.current,T,c),tt=O,zo(0,!1),Te&&typeof Te.onPostCommitFiberRoot=="function")try{Te.onPostCommitFiberRoot(ve,v)}catch{}return!0}finally{Y.p=m,U.T=h,Zy(s,r)}}function e_(s,r,c){r=Yn(c,r),r=Bh(s.stateNode,r,2),s=Rs(s,r,2),s!==null&&(Ct(s,2),Mi(s))}function ut(s,r,c){if(s.tag===3)e_(s,s,c);else for(;r!==null;){if(r.tag===3){e_(r,s,c);break}else if(r.tag===1){var h=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Is===null||!Is.has(h))){s=Yn(c,s),c=sy(2),h=Rs(r,c,2),h!==null&&(ay(c,h,r,s),Ct(h,2),Mi(h));break}}r=r.return}}function gf(s,r,c){var h=s.pingCache;if(h===null){h=s.pingCache=new sT;var m=new Set;h.set(r,m)}else m=h.get(r),m===void 0&&(m=new Set,h.set(r,m));m.has(c)||(sf=!0,m.add(c),s=cT.bind(null,s,r,c),r.then(s,s))}function cT(s,r,c){var h=s.pingCache;h!==null&&h.delete(r),s.pingedLanes|=s.suspendedLanes&c,s.warmLanes&=~c,ft===s&&(qe&c)===c&&(At===4||At===3&&(qe&62914560)===qe&&300>Ze()-of?(tt&2)===0&&_r(s,0):af|=c,pr===qe&&(pr=0)),Mi(s)}function t_(s,r){r===0&&(r=sc()),s=tr(s,r),s!==null&&(Ct(s,r),Mi(s))}function uT(s){var r=s.memoizedState,c=0;r!==null&&(c=r.retryLane),t_(s,c)}function dT(s,r){var c=0;switch(s.tag){case 13:var h=s.stateNode,m=s.memoizedState;m!==null&&(c=m.retryLane);break;case 19:h=s.stateNode;break;case 22:h=s.stateNode._retryCache;break;default:throw Error(i(314))}h!==null&&h.delete(r),t_(s,c)}function hT(s,r){return _e(s,r)}var Qc=null,Sr=null,mf=!1,Zc=!1,pf=!1,xa=0;function Mi(s){s!==Sr&&s.next===null&&(Sr===null?Qc=Sr=s:Sr=Sr.next=s),Zc=!0,mf||(mf=!0,gT())}function zo(s,r){if(!pf&&Zc){pf=!0;do for(var c=!1,h=Qc;h!==null;){if(s!==0){var m=h.pendingLanes;if(m===0)var v=0;else{var T=h.suspendedLanes,O=h.pingedLanes;v=(1<<31-We(42|s)+1)-1,v&=m&~(T&~O),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(c=!0,a_(h,v))}else v=qe,v=Ti(h,h===ft?v:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(v&3)===0||Hi(h,v)||(c=!0,a_(h,v));h=h.next}while(c);pf=!1}}function fT(){n_()}function n_(){Zc=mf=!1;var s=0;xa!==0&&(wT()&&(s=xa),xa=0);for(var r=Ze(),c=null,h=Qc;h!==null;){var m=h.next,v=i_(h,r);v===0?(h.next=null,c===null?Qc=m:c.next=m,m===null&&(Sr=c)):(c=h,(s!==0||(v&3)!==0)&&(Zc=!0)),h=m}zo(s)}function i_(s,r){for(var c=s.suspendedLanes,h=s.pingedLanes,m=s.expirationTimes,v=s.pendingLanes&-62914561;0<v;){var T=31-We(v),O=1<<T,N=m[T];N===-1?((O&c)===0||(O&h)!==0)&&(m[T]=aa(O,r)):N<=r&&(s.expiredLanes|=O),v&=~O}if(r=ft,c=qe,c=Ti(s,s===r?c:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),h=s.callbackNode,c===0||s===r&&(nt===2||nt===9)||s.cancelPendingCommit!==null)return h!==null&&h!==null&&Ee(h),s.callbackNode=null,s.callbackPriority=0;if((c&3)===0||Hi(s,c)){if(r=c&-c,r===s.callbackPriority)return r;switch(h!==null&&Ee(h),rn(c)){case 2:case 8:c=j;break;case 32:c=$;break;case 268435456:c=de;break;default:c=$}return h=s_.bind(null,s),c=_e(c,h),s.callbackPriority=r,s.callbackNode=c,r}return h!==null&&h!==null&&Ee(h),s.callbackPriority=2,s.callbackNode=null,2}function s_(s,r){if(ln!==0&&ln!==5)return s.callbackNode=null,s.callbackPriority=0,null;var c=s.callbackNode;if(Xc()&&s.callbackNode!==c)return null;var h=qe;return h=Ti(s,s===ft?h:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),h===0?null:(zy(s,h,r),i_(s,Ze()),s.callbackNode!=null&&s.callbackNode===c?s_.bind(null,s):null)}function a_(s,r){if(Xc())return null;zy(s,r,!0)}function gT(){ET(function(){(tt&6)!==0?_e(Dt,fT):n_()})}function vf(){return xa===0&&(xa=ic()),xa}function r_(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:cc(""+s)}function o_(s,r){var c=r.ownerDocument.createElement("input");return c.name=r.name,c.value=r.value,s.id&&c.setAttribute("form",s.id),r.parentNode.insertBefore(c,r),s=new FormData(s),c.parentNode.removeChild(c),s}function mT(s,r,c,h,m){if(r==="submit"&&c&&c.stateNode===m){var v=r_((m[_t]||null).action),T=h.submitter;T&&(r=(r=T[_t]||null)?r_(r.formAction):T.getAttribute("formAction"),r!==null&&(v=r,T=null));var O=new fc("action","action",null,h,m);s.push({event:O,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(xa!==0){var N=T?o_(m,T):new FormData(m);Ih(c,{pending:!0,data:N,method:m.method,action:v},null,N)}}else typeof v=="function"&&(O.preventDefault(),N=T?o_(m,T):new FormData(m),Ih(c,{pending:!0,data:N,method:m.method,action:v},v,N))},currentTarget:m}]})}}for(var yf=0;yf<th.length;yf++){var _f=th[yf],pT=_f.toLowerCase(),vT=_f[0].toUpperCase()+_f.slice(1);ci(pT,"on"+vT)}ci(zp,"onAnimationEnd"),ci(Bp,"onAnimationIteration"),ci(Hp,"onAnimationStart"),ci("dblclick","onDoubleClick"),ci("focusin","onFocus"),ci("focusout","onBlur"),ci(jE,"onTransitionRun"),ci(LE,"onTransitionStart"),ci(IE,"onTransitionCancel"),ci($p,"onTransitionEnd"),Ga("onMouseEnter",["mouseout","mouseover"]),Ga("onMouseLeave",["mouseout","mouseover"]),Ga("onPointerEnter",["pointerout","pointerover"]),Ga("onPointerLeave",["pointerout","pointerover"]),oa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),oa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),oa("onBeforeInput",["compositionend","keypress","textInput","paste"]),oa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),oa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),oa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),yT=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Bo));function l_(s,r){r=(r&4)!==0;for(var c=0;c<s.length;c++){var h=s[c],m=h.event;h=h.listeners;e:{var v=void 0;if(r)for(var T=h.length-1;0<=T;T--){var O=h[T],N=O.instance,G=O.currentTarget;if(O=O.listener,N!==v&&m.isPropagationStopped())break e;v=O,m.currentTarget=G;try{v(m)}catch(J){Fc(J)}m.currentTarget=null,v=N}else for(T=0;T<h.length;T++){if(O=h[T],N=O.instance,G=O.currentTarget,O=O.listener,N!==v&&m.isPropagationStopped())break e;v=O,m.currentTarget=G;try{v(m)}catch(J){Fc(J)}m.currentTarget=null,v=N}}}}function Be(s,r){var c=r[$i];c===void 0&&(c=r[$i]=new Set);var h=s+"__bubble";c.has(h)||(c_(r,s,2,!1),c.add(h))}function bf(s,r,c){var h=0;r&&(h|=4),c_(c,s,h,r)}var Jc="_reactListening"+Math.random().toString(36).slice(2);function Sf(s){if(!s[Jc]){s[Jc]=!0,np.forEach(function(c){c!=="selectionchange"&&(yT.has(c)||bf(c,!1,s),bf(c,!0,s))});var r=s.nodeType===9?s:s.ownerDocument;r===null||r[Jc]||(r[Jc]=!0,bf("selectionchange",!1,r))}}function c_(s,r,c,h){switch(N_(r)){case 2:var m=GT;break;case 8:m=qT;break;default:m=Lf}c=m.bind(null,r,c,s),m=void 0,!Hd||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(m=!0),h?m!==void 0?s.addEventListener(r,c,{capture:!0,passive:m}):s.addEventListener(r,c,!0):m!==void 0?s.addEventListener(r,c,{passive:m}):s.addEventListener(r,c,!1)}function wf(s,r,c,h,m){var v=h;if((r&1)===0&&(r&2)===0&&h!==null)e:for(;;){if(h===null)return;var T=h.tag;if(T===3||T===4){var O=h.stateNode.containerInfo;if(O===m)break;if(T===4)for(T=h.return;T!==null;){var N=T.tag;if((N===3||N===4)&&T.stateNode.containerInfo===m)return;T=T.return}for(;O!==null;){if(T=Ha(O),T===null)return;if(N=T.tag,N===5||N===6||N===26||N===27){h=v=T;continue e}O=O.parentNode}}h=h.return}pp(function(){var G=v,J=zd(c),ie=[];e:{var q=Vp.get(s);if(q!==void 0){var W=fc,Ae=s;switch(s){case"keypress":if(dc(c)===0)break e;case"keydown":case"keyup":W=hE;break;case"focusin":Ae="focus",W=qd;break;case"focusout":Ae="blur",W=qd;break;case"beforeblur":case"afterblur":W=qd;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":W=_p;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":W=eE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":W=mE;break;case zp:case Bp:case Hp:W=iE;break;case $p:W=vE;break;case"scroll":case"scrollend":W=Zx;break;case"wheel":W=_E;break;case"copy":case"cut":case"paste":W=aE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":W=Sp;break;case"toggle":case"beforetoggle":W=SE}var we=(r&4)!==0,ot=!we&&(s==="scroll"||s==="scrollend"),B=we?q!==null?q+"Capture":null:q;we=[];for(var F=G,V;F!==null;){var ne=F;if(V=ne.stateNode,ne=ne.tag,ne!==5&&ne!==26&&ne!==27||V===null||B===null||(ne=ao(F,B),ne!=null&&we.push(Ho(F,ne,V))),ot)break;F=F.return}0<we.length&&(q=new W(q,Ae,null,c,J),ie.push({event:q,listeners:we}))}}if((r&7)===0){e:{if(q=s==="mouseover"||s==="pointerover",W=s==="mouseout"||s==="pointerout",q&&c!==Fd&&(Ae=c.relatedTarget||c.fromElement)&&(Ha(Ae)||Ae[fn]))break e;if((W||q)&&(q=J.window===J?J:(q=J.ownerDocument)?q.defaultView||q.parentWindow:window,W?(Ae=c.relatedTarget||c.toElement,W=G,Ae=Ae?Ha(Ae):null,Ae!==null&&(ot=o(Ae),we=Ae.tag,Ae!==ot||we!==5&&we!==27&&we!==6)&&(Ae=null)):(W=null,Ae=G),W!==Ae)){if(we=_p,ne="onMouseLeave",B="onMouseEnter",F="mouse",(s==="pointerout"||s==="pointerover")&&(we=Sp,ne="onPointerLeave",B="onPointerEnter",F="pointer"),ot=W==null?q:so(W),V=Ae==null?q:so(Ae),q=new we(ne,F+"leave",W,c,J),q.target=ot,q.relatedTarget=V,ne=null,Ha(J)===G&&(we=new we(B,F+"enter",Ae,c,J),we.target=V,we.relatedTarget=ot,ne=we),ot=ne,W&&Ae)t:{for(we=W,B=Ae,F=0,V=we;V;V=wr(V))F++;for(V=0,ne=B;ne;ne=wr(ne))V++;for(;0<F-V;)we=wr(we),F--;for(;0<V-F;)B=wr(B),V--;for(;F--;){if(we===B||B!==null&&we===B.alternate)break t;we=wr(we),B=wr(B)}we=null}else we=null;W!==null&&u_(ie,q,W,we,!1),Ae!==null&&ot!==null&&u_(ie,ot,Ae,we,!0)}}e:{if(q=G?so(G):window,W=q.nodeName&&q.nodeName.toLowerCase(),W==="select"||W==="input"&&q.type==="file")var pe=Op;else if(Rp(q))if(Dp)pe=ME;else{pe=OE;var Fe=AE}else W=q.nodeName,!W||W.toLowerCase()!=="input"||q.type!=="checkbox"&&q.type!=="radio"?G&&Pd(G.elementType)&&(pe=Op):pe=DE;if(pe&&(pe=pe(s,G))){Ap(ie,pe,c,J);break e}Fe&&Fe(s,q,G),s==="focusout"&&G&&q.type==="number"&&G.memoizedProps.value!=null&&Ud(q,"number",q.value)}switch(Fe=G?so(G):window,s){case"focusin":(Rp(Fe)||Fe.contentEditable==="true")&&(Za=Fe,Zd=G,go=null);break;case"focusout":go=Zd=Za=null;break;case"mousedown":Jd=!0;break;case"contextmenu":case"mouseup":case"dragend":Jd=!1,Pp(ie,c,J);break;case"selectionchange":if(NE)break;case"keydown":case"keyup":Pp(ie,c,J)}var be;if(Wd)e:{switch(s){case"compositionstart":var Ce="onCompositionStart";break e;case"compositionend":Ce="onCompositionEnd";break e;case"compositionupdate":Ce="onCompositionUpdate";break e}Ce=void 0}else Qa?Tp(s,c)&&(Ce="onCompositionEnd"):s==="keydown"&&c.keyCode===229&&(Ce="onCompositionStart");Ce&&(wp&&c.locale!=="ko"&&(Qa||Ce!=="onCompositionStart"?Ce==="onCompositionEnd"&&Qa&&(be=vp()):(xs=J,$d="value"in xs?xs.value:xs.textContent,Qa=!0)),Fe=eu(G,Ce),0<Fe.length&&(Ce=new bp(Ce,s,null,c,J),ie.push({event:Ce,listeners:Fe}),be?Ce.data=be:(be=Cp(c),be!==null&&(Ce.data=be)))),(be=xE?EE(s,c):TE(s,c))&&(Ce=eu(G,"onBeforeInput"),0<Ce.length&&(Fe=new bp("onBeforeInput","beforeinput",null,c,J),ie.push({event:Fe,listeners:Ce}),Fe.data=be)),mT(ie,s,G,c,J)}l_(ie,r)})}function Ho(s,r,c){return{instance:s,listener:r,currentTarget:c}}function eu(s,r){for(var c=r+"Capture",h=[];s!==null;){var m=s,v=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||v===null||(m=ao(s,c),m!=null&&h.unshift(Ho(s,m,v)),m=ao(s,r),m!=null&&h.push(Ho(s,m,v))),s.tag===3)return h;s=s.return}return[]}function wr(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function u_(s,r,c,h,m){for(var v=r._reactName,T=[];c!==null&&c!==h;){var O=c,N=O.alternate,G=O.stateNode;if(O=O.tag,N!==null&&N===h)break;O!==5&&O!==26&&O!==27||G===null||(N=G,m?(G=ao(c,v),G!=null&&T.unshift(Ho(c,G,N))):m||(G=ao(c,v),G!=null&&T.push(Ho(c,G,N)))),c=c.return}T.length!==0&&s.push({event:r,listeners:T})}var _T=/\r\n?/g,bT=/\u0000|\uFFFD/g;function d_(s){return(typeof s=="string"?s:""+s).replace(_T,`
`).replace(bT,"")}function h_(s,r){return r=d_(r),d_(s)===r}function tu(){}function rt(s,r,c,h,m,v){switch(c){case"children":typeof h=="string"?r==="body"||r==="textarea"&&h===""||Wa(s,h):(typeof h=="number"||typeof h=="bigint")&&r!=="body"&&Wa(s,""+h);break;case"className":rc(s,"class",h);break;case"tabIndex":rc(s,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":rc(s,c,h);break;case"style":gp(s,h,v);break;case"data":if(r!=="object"){rc(s,"data",h);break}case"src":case"href":if(h===""&&(r!=="a"||c!=="href")){s.removeAttribute(c);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){s.removeAttribute(c);break}h=cc(""+h),s.setAttribute(c,h);break;case"action":case"formAction":if(typeof h=="function"){s.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(c==="formAction"?(r!=="input"&&rt(s,r,"name",m.name,m,null),rt(s,r,"formEncType",m.formEncType,m,null),rt(s,r,"formMethod",m.formMethod,m,null),rt(s,r,"formTarget",m.formTarget,m,null)):(rt(s,r,"encType",m.encType,m,null),rt(s,r,"method",m.method,m,null),rt(s,r,"target",m.target,m,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){s.removeAttribute(c);break}h=cc(""+h),s.setAttribute(c,h);break;case"onClick":h!=null&&(s.onclick=tu);break;case"onScroll":h!=null&&Be("scroll",s);break;case"onScrollEnd":h!=null&&Be("scrollend",s);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(i(61));if(c=h.__html,c!=null){if(m.children!=null)throw Error(i(60));s.innerHTML=c}}break;case"multiple":s.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":s.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){s.removeAttribute("xlink:href");break}c=cc(""+h),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(c,""+h):s.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(c,""):s.removeAttribute(c);break;case"capture":case"download":h===!0?s.setAttribute(c,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(c,h):s.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?s.setAttribute(c,h):s.removeAttribute(c);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?s.removeAttribute(c):s.setAttribute(c,h);break;case"popover":Be("beforetoggle",s),Be("toggle",s),ac(s,"popover",h);break;case"xlinkActuate":Gi(s,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":Gi(s,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":Gi(s,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":Gi(s,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":Gi(s,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":Gi(s,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":Gi(s,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":Gi(s,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":Gi(s,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":ac(s,"is",h);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=Xx.get(c)||c,ac(s,c,h))}}function xf(s,r,c,h,m,v){switch(c){case"style":gp(s,h,v);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(i(61));if(c=h.__html,c!=null){if(m.children!=null)throw Error(i(60));s.innerHTML=c}}break;case"children":typeof h=="string"?Wa(s,h):(typeof h=="number"||typeof h=="bigint")&&Wa(s,""+h);break;case"onScroll":h!=null&&Be("scroll",s);break;case"onScrollEnd":h!=null&&Be("scrollend",s);break;case"onClick":h!=null&&(s.onclick=tu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ip.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(m=c.endsWith("Capture"),r=c.slice(2,m?c.length-7:void 0),v=s[_t]||null,v=v!=null?v[c]:null,typeof v=="function"&&s.removeEventListener(r,v,m),typeof h=="function")){typeof v!="function"&&v!==null&&(c in s?s[c]=null:s.hasAttribute(c)&&s.removeAttribute(c)),s.addEventListener(r,h,m);break e}c in s?s[c]=h:h===!0?s.setAttribute(c,""):ac(s,c,h)}}}function cn(s,r,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Be("error",s),Be("load",s);var h=!1,m=!1,v;for(v in c)if(c.hasOwnProperty(v)){var T=c[v];if(T!=null)switch(v){case"src":h=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:rt(s,r,v,T,c,null)}}m&&rt(s,r,"srcSet",c.srcSet,c,null),h&&rt(s,r,"src",c.src,c,null);return;case"input":Be("invalid",s);var O=v=T=m=null,N=null,G=null;for(h in c)if(c.hasOwnProperty(h)){var J=c[h];if(J!=null)switch(h){case"name":m=J;break;case"type":T=J;break;case"checked":N=J;break;case"defaultChecked":G=J;break;case"value":v=J;break;case"defaultValue":O=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(i(137,r));break;default:rt(s,r,h,J,c,null)}}up(s,v,O,N,G,T,m,!1),oc(s);return;case"select":Be("invalid",s),h=T=v=null;for(m in c)if(c.hasOwnProperty(m)&&(O=c[m],O!=null))switch(m){case"value":v=O;break;case"defaultValue":T=O;break;case"multiple":h=O;default:rt(s,r,m,O,c,null)}r=v,c=T,s.multiple=!!h,r!=null?Ya(s,!!h,r,!1):c!=null&&Ya(s,!!h,c,!0);return;case"textarea":Be("invalid",s),v=m=h=null;for(T in c)if(c.hasOwnProperty(T)&&(O=c[T],O!=null))switch(T){case"value":h=O;break;case"defaultValue":m=O;break;case"children":v=O;break;case"dangerouslySetInnerHTML":if(O!=null)throw Error(i(91));break;default:rt(s,r,T,O,c,null)}hp(s,h,m,v),oc(s);return;case"option":for(N in c)if(c.hasOwnProperty(N)&&(h=c[N],h!=null))switch(N){case"selected":s.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:rt(s,r,N,h,c,null)}return;case"dialog":Be("beforetoggle",s),Be("toggle",s),Be("cancel",s),Be("close",s);break;case"iframe":case"object":Be("load",s);break;case"video":case"audio":for(h=0;h<Bo.length;h++)Be(Bo[h],s);break;case"image":Be("error",s),Be("load",s);break;case"details":Be("toggle",s);break;case"embed":case"source":case"link":Be("error",s),Be("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(G in c)if(c.hasOwnProperty(G)&&(h=c[G],h!=null))switch(G){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:rt(s,r,G,h,c,null)}return;default:if(Pd(r)){for(J in c)c.hasOwnProperty(J)&&(h=c[J],h!==void 0&&xf(s,r,J,h,c,void 0));return}}for(O in c)c.hasOwnProperty(O)&&(h=c[O],h!=null&&rt(s,r,O,h,c,null))}function ST(s,r,c,h){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,v=null,T=null,O=null,N=null,G=null,J=null;for(W in c){var ie=c[W];if(c.hasOwnProperty(W)&&ie!=null)switch(W){case"checked":break;case"value":break;case"defaultValue":N=ie;default:h.hasOwnProperty(W)||rt(s,r,W,null,h,ie)}}for(var q in h){var W=h[q];if(ie=c[q],h.hasOwnProperty(q)&&(W!=null||ie!=null))switch(q){case"type":v=W;break;case"name":m=W;break;case"checked":G=W;break;case"defaultChecked":J=W;break;case"value":T=W;break;case"defaultValue":O=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(i(137,r));break;default:W!==ie&&rt(s,r,q,W,h,ie)}}Id(s,T,O,N,G,J,v,m);return;case"select":W=T=O=q=null;for(v in c)if(N=c[v],c.hasOwnProperty(v)&&N!=null)switch(v){case"value":break;case"multiple":W=N;default:h.hasOwnProperty(v)||rt(s,r,v,null,h,N)}for(m in h)if(v=h[m],N=c[m],h.hasOwnProperty(m)&&(v!=null||N!=null))switch(m){case"value":q=v;break;case"defaultValue":O=v;break;case"multiple":T=v;default:v!==N&&rt(s,r,m,v,h,N)}r=O,c=T,h=W,q!=null?Ya(s,!!c,q,!1):!!h!=!!c&&(r!=null?Ya(s,!!c,r,!0):Ya(s,!!c,c?[]:"",!1));return;case"textarea":W=q=null;for(O in c)if(m=c[O],c.hasOwnProperty(O)&&m!=null&&!h.hasOwnProperty(O))switch(O){case"value":break;case"children":break;default:rt(s,r,O,null,h,m)}for(T in h)if(m=h[T],v=c[T],h.hasOwnProperty(T)&&(m!=null||v!=null))switch(T){case"value":q=m;break;case"defaultValue":W=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(i(91));break;default:m!==v&&rt(s,r,T,m,h,v)}dp(s,q,W);return;case"option":for(var Ae in c)if(q=c[Ae],c.hasOwnProperty(Ae)&&q!=null&&!h.hasOwnProperty(Ae))switch(Ae){case"selected":s.selected=!1;break;default:rt(s,r,Ae,null,h,q)}for(N in h)if(q=h[N],W=c[N],h.hasOwnProperty(N)&&q!==W&&(q!=null||W!=null))switch(N){case"selected":s.selected=q&&typeof q!="function"&&typeof q!="symbol";break;default:rt(s,r,N,q,h,W)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var we in c)q=c[we],c.hasOwnProperty(we)&&q!=null&&!h.hasOwnProperty(we)&&rt(s,r,we,null,h,q);for(G in h)if(q=h[G],W=c[G],h.hasOwnProperty(G)&&q!==W&&(q!=null||W!=null))switch(G){case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(i(137,r));break;default:rt(s,r,G,q,h,W)}return;default:if(Pd(r)){for(var ot in c)q=c[ot],c.hasOwnProperty(ot)&&q!==void 0&&!h.hasOwnProperty(ot)&&xf(s,r,ot,void 0,h,q);for(J in h)q=h[J],W=c[J],!h.hasOwnProperty(J)||q===W||q===void 0&&W===void 0||xf(s,r,J,q,h,W);return}}for(var B in c)q=c[B],c.hasOwnProperty(B)&&q!=null&&!h.hasOwnProperty(B)&&rt(s,r,B,null,h,q);for(ie in h)q=h[ie],W=c[ie],!h.hasOwnProperty(ie)||q===W||q==null&&W==null||rt(s,r,ie,q,h,W)}var Ef=null,Tf=null;function nu(s){return s.nodeType===9?s:s.ownerDocument}function f_(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function g_(s,r){if(s===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&r==="foreignObject"?0:s}function Cf(s,r){return s==="textarea"||s==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Rf=null;function wT(){var s=window.event;return s&&s.type==="popstate"?s===Rf?!1:(Rf=s,!0):(Rf=null,!1)}var m_=typeof setTimeout=="function"?setTimeout:void 0,xT=typeof clearTimeout=="function"?clearTimeout:void 0,p_=typeof Promise=="function"?Promise:void 0,ET=typeof queueMicrotask=="function"?queueMicrotask:typeof p_<"u"?function(s){return p_.resolve(null).then(s).catch(TT)}:m_;function TT(s){setTimeout(function(){throw s})}function Fs(s){return s==="head"}function v_(s,r){var c=r,h=0,m=0;do{var v=c.nextSibling;if(s.removeChild(c),v&&v.nodeType===8)if(c=v.data,c==="/$"){if(0<h&&8>h){c=h;var T=s.ownerDocument;if(c&1&&$o(T.documentElement),c&2&&$o(T.body),c&4)for(c=T.head,$o(c),T=c.firstChild;T;){var O=T.nextSibling,N=T.nodeName;T[Vi]||N==="SCRIPT"||N==="STYLE"||N==="LINK"&&T.rel.toLowerCase()==="stylesheet"||c.removeChild(T),T=O}}if(m===0){s.removeChild(v),Qo(r);return}m--}else c==="$"||c==="$?"||c==="$!"?m++:h=c.charCodeAt(0)-48;else h=0;c=v}while(c);Qo(r)}function Af(s){var r=s.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var c=r;switch(r=r.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":Af(c),kd(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}s.removeChild(c)}}function CT(s,r,c,h){for(;s.nodeType===1;){var m=c;if(s.nodeName.toLowerCase()!==r.toLowerCase()){if(!h&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(h){if(!s[Vi])switch(r){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(v=s.getAttribute("rel"),v==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(v!==m.rel||s.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||s.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||s.getAttribute("title")!==(m.title==null?null:m.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(v=s.getAttribute("src"),(v!==(m.src==null?null:m.src)||s.getAttribute("type")!==(m.type==null?null:m.type)||s.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&v&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(r==="input"&&s.type==="hidden"){var v=m.name==null?null:""+m.name;if(m.type==="hidden"&&s.getAttribute("name")===v)return s}else return s;if(s=di(s.nextSibling),s===null)break}return null}function RT(s,r,c){if(r==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!c||(s=di(s.nextSibling),s===null))return null;return s}function Of(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState==="complete"}function AT(s,r){var c=s.ownerDocument;if(s.data!=="$?"||c.readyState==="complete")r();else{var h=function(){r(),c.removeEventListener("DOMContentLoaded",h)};c.addEventListener("DOMContentLoaded",h),s._reactRetry=h}}function di(s){for(;s!=null;s=s.nextSibling){var r=s.nodeType;if(r===1||r===3)break;if(r===8){if(r=s.data,r==="$"||r==="$!"||r==="$?"||r==="F!"||r==="F")break;if(r==="/$")return null}}return s}var Df=null;function y_(s){s=s.previousSibling;for(var r=0;s;){if(s.nodeType===8){var c=s.data;if(c==="$"||c==="$!"||c==="$?"){if(r===0)return s;r--}else c==="/$"&&r++}s=s.previousSibling}return null}function __(s,r,c){switch(r=nu(c),s){case"html":if(s=r.documentElement,!s)throw Error(i(452));return s;case"head":if(s=r.head,!s)throw Error(i(453));return s;case"body":if(s=r.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function $o(s){for(var r=s.attributes;r.length;)s.removeAttributeNode(r[0]);kd(s)}var Jn=new Map,b_=new Set;function iu(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var as=Y.d;Y.d={f:OT,r:DT,D:MT,C:kT,L:NT,m:jT,X:IT,S:LT,M:UT};function OT(){var s=as.f(),r=Wc();return s||r}function DT(s){var r=$a(s);r!==null&&r.tag===5&&r.type==="form"?zv(r):as.r(s)}var xr=typeof document>"u"?null:document;function S_(s,r,c){var h=xr;if(h&&typeof r=="string"&&r){var m=qn(r);m='link[rel="'+s+'"][href="'+m+'"]',typeof c=="string"&&(m+='[crossorigin="'+c+'"]'),b_.has(m)||(b_.add(m),s={rel:s,crossOrigin:c,href:r},h.querySelector(m)===null&&(r=h.createElement("link"),cn(r,"link",s),Kt(r),h.head.appendChild(r)))}}function MT(s){as.D(s),S_("dns-prefetch",s,null)}function kT(s,r){as.C(s,r),S_("preconnect",s,r)}function NT(s,r,c){as.L(s,r,c);var h=xr;if(h&&s&&r){var m='link[rel="preload"][as="'+qn(r)+'"]';r==="image"&&c&&c.imageSrcSet?(m+='[imagesrcset="'+qn(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(m+='[imagesizes="'+qn(c.imageSizes)+'"]')):m+='[href="'+qn(s)+'"]';var v=m;switch(r){case"style":v=Er(s);break;case"script":v=Tr(s)}Jn.has(v)||(s=g({rel:"preload",href:r==="image"&&c&&c.imageSrcSet?void 0:s,as:r},c),Jn.set(v,s),h.querySelector(m)!==null||r==="style"&&h.querySelector(Vo(v))||r==="script"&&h.querySelector(Go(v))||(r=h.createElement("link"),cn(r,"link",s),Kt(r),h.head.appendChild(r)))}}function jT(s,r){as.m(s,r);var c=xr;if(c&&s){var h=r&&typeof r.as=="string"?r.as:"script",m='link[rel="modulepreload"][as="'+qn(h)+'"][href="'+qn(s)+'"]',v=m;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=Tr(s)}if(!Jn.has(v)&&(s=g({rel:"modulepreload",href:s},r),Jn.set(v,s),c.querySelector(m)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Go(v)))return}h=c.createElement("link"),cn(h,"link",s),Kt(h),c.head.appendChild(h)}}}function LT(s,r,c){as.S(s,r,c);var h=xr;if(h&&s){var m=Va(h).hoistableStyles,v=Er(s);r=r||"default";var T=m.get(v);if(!T){var O={loading:0,preload:null};if(T=h.querySelector(Vo(v)))O.loading=5;else{s=g({rel:"stylesheet",href:s,"data-precedence":r},c),(c=Jn.get(v))&&Mf(s,c);var N=T=h.createElement("link");Kt(N),cn(N,"link",s),N._p=new Promise(function(G,J){N.onload=G,N.onerror=J}),N.addEventListener("load",function(){O.loading|=1}),N.addEventListener("error",function(){O.loading|=2}),O.loading|=4,su(T,r,h)}T={type:"stylesheet",instance:T,count:1,state:O},m.set(v,T)}}}function IT(s,r){as.X(s,r);var c=xr;if(c&&s){var h=Va(c).hoistableScripts,m=Tr(s),v=h.get(m);v||(v=c.querySelector(Go(m)),v||(s=g({src:s,async:!0},r),(r=Jn.get(m))&&kf(s,r),v=c.createElement("script"),Kt(v),cn(v,"link",s),c.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},h.set(m,v))}}function UT(s,r){as.M(s,r);var c=xr;if(c&&s){var h=Va(c).hoistableScripts,m=Tr(s),v=h.get(m);v||(v=c.querySelector(Go(m)),v||(s=g({src:s,async:!0,type:"module"},r),(r=Jn.get(m))&&kf(s,r),v=c.createElement("script"),Kt(v),cn(v,"link",s),c.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},h.set(m,v))}}function w_(s,r,c,h){var m=(m=fe.current)?iu(m):null;if(!m)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(r=Er(c.href),c=Va(m).hoistableStyles,h=c.get(r),h||(h={type:"style",instance:null,count:0,state:null},c.set(r,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){s=Er(c.href);var v=Va(m).hoistableStyles,T=v.get(s);if(T||(m=m.ownerDocument||m,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(s,T),(v=m.querySelector(Vo(s)))&&!v._p&&(T.instance=v,T.state.loading=5),Jn.has(s)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},Jn.set(s,c),v||PT(m,s,c,T.state))),r&&h===null)throw Error(i(528,""));return T}if(r&&h!==null)throw Error(i(529,""));return null;case"script":return r=c.async,c=c.src,typeof c=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Tr(c),c=Va(m).hoistableScripts,h=c.get(r),h||(h={type:"script",instance:null,count:0,state:null},c.set(r,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function Er(s){return'href="'+qn(s)+'"'}function Vo(s){return'link[rel="stylesheet"]['+s+"]"}function x_(s){return g({},s,{"data-precedence":s.precedence,precedence:null})}function PT(s,r,c,h){s.querySelector('link[rel="preload"][as="style"]['+r+"]")?h.loading=1:(r=s.createElement("link"),h.preload=r,r.addEventListener("load",function(){return h.loading|=1}),r.addEventListener("error",function(){return h.loading|=2}),cn(r,"link",c),Kt(r),s.head.appendChild(r))}function Tr(s){return'[src="'+qn(s)+'"]'}function Go(s){return"script[async]"+s}function E_(s,r,c){if(r.count++,r.instance===null)switch(r.type){case"style":var h=s.querySelector('style[data-href~="'+qn(c.href)+'"]');if(h)return r.instance=h,Kt(h),h;var m=g({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return h=(s.ownerDocument||s).createElement("style"),Kt(h),cn(h,"style",m),su(h,c.precedence,s),r.instance=h;case"stylesheet":m=Er(c.href);var v=s.querySelector(Vo(m));if(v)return r.state.loading|=4,r.instance=v,Kt(v),v;h=x_(c),(m=Jn.get(m))&&Mf(h,m),v=(s.ownerDocument||s).createElement("link"),Kt(v);var T=v;return T._p=new Promise(function(O,N){T.onload=O,T.onerror=N}),cn(v,"link",h),r.state.loading|=4,su(v,c.precedence,s),r.instance=v;case"script":return v=Tr(c.src),(m=s.querySelector(Go(v)))?(r.instance=m,Kt(m),m):(h=c,(m=Jn.get(v))&&(h=g({},c),kf(h,m)),s=s.ownerDocument||s,m=s.createElement("script"),Kt(m),cn(m,"link",h),s.head.appendChild(m),r.instance=m);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(h=r.instance,r.state.loading|=4,su(h,c.precedence,s));return r.instance}function su(s,r,c){for(var h=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=h.length?h[h.length-1]:null,v=m,T=0;T<h.length;T++){var O=h[T];if(O.dataset.precedence===r)v=O;else if(v!==m)break}v?v.parentNode.insertBefore(s,v.nextSibling):(r=c.nodeType===9?c.head:c,r.insertBefore(s,r.firstChild))}function Mf(s,r){s.crossOrigin==null&&(s.crossOrigin=r.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=r.referrerPolicy),s.title==null&&(s.title=r.title)}function kf(s,r){s.crossOrigin==null&&(s.crossOrigin=r.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=r.referrerPolicy),s.integrity==null&&(s.integrity=r.integrity)}var au=null;function T_(s,r,c){if(au===null){var h=new Map,m=au=new Map;m.set(c,h)}else m=au,h=m.get(c),h||(h=new Map,m.set(c,h));if(h.has(s))return h;for(h.set(s,null),c=c.getElementsByTagName(s),m=0;m<c.length;m++){var v=c[m];if(!(v[Vi]||v[yt]||s==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var T=v.getAttribute(r)||"";T=s+T;var O=h.get(T);O?O.push(v):h.set(T,[v])}}return h}function C_(s,r,c){s=s.ownerDocument||s,s.head.insertBefore(c,r==="title"?s.querySelector("head > title"):null)}function FT(s,r,c){if(c===1||r.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return s=r.disabled,typeof r.precedence=="string"&&s==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function R_(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var qo=null;function zT(){}function BT(s,r,c){if(qo===null)throw Error(i(475));var h=qo;if(r.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var m=Er(c.href),v=s.querySelector(Vo(m));if(v){s=v._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(h.count++,h=ru.bind(h),s.then(h,h)),r.state.loading|=4,r.instance=v,Kt(v);return}v=s.ownerDocument||s,c=x_(c),(m=Jn.get(m))&&Mf(c,m),v=v.createElement("link"),Kt(v);var T=v;T._p=new Promise(function(O,N){T.onload=O,T.onerror=N}),cn(v,"link",c),r.instance=v}h.stylesheets===null&&(h.stylesheets=new Map),h.stylesheets.set(r,s),(s=r.state.preload)&&(r.state.loading&3)===0&&(h.count++,r=ru.bind(h),s.addEventListener("load",r),s.addEventListener("error",r))}}function HT(){if(qo===null)throw Error(i(475));var s=qo;return s.stylesheets&&s.count===0&&Nf(s,s.stylesheets),0<s.count?function(r){var c=setTimeout(function(){if(s.stylesheets&&Nf(s,s.stylesheets),s.unsuspend){var h=s.unsuspend;s.unsuspend=null,h()}},6e4);return s.unsuspend=r,function(){s.unsuspend=null,clearTimeout(c)}}:null}function ru(){if(this.count--,this.count===0){if(this.stylesheets)Nf(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var ou=null;function Nf(s,r){s.stylesheets=null,s.unsuspend!==null&&(s.count++,ou=new Map,r.forEach($T,s),ou=null,ru.call(s))}function $T(s,r){if(!(r.state.loading&4)){var c=ou.get(s);if(c)var h=c.get(null);else{c=new Map,ou.set(s,c);for(var m=s.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<m.length;v++){var T=m[v];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(c.set(T.dataset.precedence,T),h=T)}h&&c.set(null,h)}m=r.instance,T=m.getAttribute("data-precedence"),v=c.get(T)||h,v===h&&c.set(null,m),c.set(T,m),this.count++,h=ru.bind(this),m.addEventListener("load",h),m.addEventListener("error",h),v?v.parentNode.insertBefore(m,v.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(m,s.firstChild)),r.state.loading|=4}}var Yo={$$typeof:R,Provider:null,Consumer:null,_currentValue:le,_currentValue2:le,_threadCount:0};function VT(s,r,c,h,m,v,T,O){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=io(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=io(0),this.hiddenUpdates=io(null),this.identifierPrefix=h,this.onUncaughtError=m,this.onCaughtError=v,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=O,this.incompleteTransitions=new Map}function A_(s,r,c,h,m,v,T,O,N,G,J,ie){return s=new VT(s,r,c,T,O,N,G,ie),r=1,v===!0&&(r|=24),v=Un(3,null,null,r),s.current=v,v.stateNode=s,r=fh(),r.refCount++,s.pooledCache=r,r.refCount++,v.memoizedState={element:h,isDehydrated:c,cache:r},vh(v),s}function O_(s){return s?(s=nr,s):nr}function D_(s,r,c,h,m,v){m=O_(m),h.context===null?h.context=m:h.pendingContext=m,h=Cs(r),h.payload={element:c},v=v===void 0?null:v,v!==null&&(h.callback=v),c=Rs(s,h,r),c!==null&&(Hn(c,s,r),xo(c,s,r))}function M_(s,r){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var c=s.retryLane;s.retryLane=c!==0&&c<r?c:r}}function jf(s,r){M_(s,r),(s=s.alternate)&&M_(s,r)}function k_(s){if(s.tag===13){var r=tr(s,67108864);r!==null&&Hn(r,s,67108864),jf(s,67108864)}}var lu=!0;function GT(s,r,c,h){var m=U.T;U.T=null;var v=Y.p;try{Y.p=2,Lf(s,r,c,h)}finally{Y.p=v,U.T=m}}function qT(s,r,c,h){var m=U.T;U.T=null;var v=Y.p;try{Y.p=8,Lf(s,r,c,h)}finally{Y.p=v,U.T=m}}function Lf(s,r,c,h){if(lu){var m=If(h);if(m===null)wf(s,r,h,cu,c),j_(s,h);else if(WT(m,s,r,c,h))h.stopPropagation();else if(j_(s,h),r&4&&-1<YT.indexOf(s)){for(;m!==null;){var v=$a(m);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var T=jn(v.pendingLanes);if(T!==0){var O=v;for(O.pendingLanes|=2,O.entangledLanes|=2;T;){var N=1<<31-We(T);O.entanglements[1]|=N,T&=~N}Mi(v),(tt&6)===0&&(qc=Ze()+500,zo(0))}}break;case 13:O=tr(v,2),O!==null&&Hn(O,v,2),Wc(),jf(v,2)}if(v=If(h),v===null&&wf(s,r,h,cu,c),v===m)break;m=v}m!==null&&h.stopPropagation()}else wf(s,r,h,null,c)}}function If(s){return s=zd(s),Uf(s)}var cu=null;function Uf(s){if(cu=null,s=Ha(s),s!==null){var r=o(s);if(r===null)s=null;else{var c=r.tag;if(c===13){if(s=l(r),s!==null)return s;s=null}else if(c===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;s=null}else r!==s&&(s=null)}}return cu=s,null}function N_(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(un()){case Dt:return 2;case j:return 8;case $:case Q:return 32;case de:return 268435456;default:return 32}default:return 32}}var Pf=!1,zs=null,Bs=null,Hs=null,Wo=new Map,Ko=new Map,$s=[],YT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function j_(s,r){switch(s){case"focusin":case"focusout":zs=null;break;case"dragenter":case"dragleave":Bs=null;break;case"mouseover":case"mouseout":Hs=null;break;case"pointerover":case"pointerout":Wo.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ko.delete(r.pointerId)}}function Xo(s,r,c,h,m,v){return s===null||s.nativeEvent!==v?(s={blockedOn:r,domEventName:c,eventSystemFlags:h,nativeEvent:v,targetContainers:[m]},r!==null&&(r=$a(r),r!==null&&k_(r)),s):(s.eventSystemFlags|=h,r=s.targetContainers,m!==null&&r.indexOf(m)===-1&&r.push(m),s)}function WT(s,r,c,h,m){switch(r){case"focusin":return zs=Xo(zs,s,r,c,h,m),!0;case"dragenter":return Bs=Xo(Bs,s,r,c,h,m),!0;case"mouseover":return Hs=Xo(Hs,s,r,c,h,m),!0;case"pointerover":var v=m.pointerId;return Wo.set(v,Xo(Wo.get(v)||null,s,r,c,h,m)),!0;case"gotpointercapture":return v=m.pointerId,Ko.set(v,Xo(Ko.get(v)||null,s,r,c,h,m)),!0}return!1}function L_(s){var r=Ha(s.target);if(r!==null){var c=o(r);if(c!==null){if(r=c.tag,r===13){if(r=l(c),r!==null){s.blockedOn=r,Ss(s.priority,function(){if(c.tag===13){var h=Bn();h=hn(h);var m=tr(c,h);m!==null&&Hn(m,c,h),jf(c,h)}});return}}else if(r===3&&c.stateNode.current.memoizedState.isDehydrated){s.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}s.blockedOn=null}function uu(s){if(s.blockedOn!==null)return!1;for(var r=s.targetContainers;0<r.length;){var c=If(s.nativeEvent);if(c===null){c=s.nativeEvent;var h=new c.constructor(c.type,c);Fd=h,c.target.dispatchEvent(h),Fd=null}else return r=$a(c),r!==null&&k_(r),s.blockedOn=c,!1;r.shift()}return!0}function I_(s,r,c){uu(s)&&c.delete(r)}function KT(){Pf=!1,zs!==null&&uu(zs)&&(zs=null),Bs!==null&&uu(Bs)&&(Bs=null),Hs!==null&&uu(Hs)&&(Hs=null),Wo.forEach(I_),Ko.forEach(I_)}function du(s,r){s.blockedOn===r&&(s.blockedOn=null,Pf||(Pf=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,KT)))}var hu=null;function U_(s){hu!==s&&(hu=s,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){hu===s&&(hu=null);for(var r=0;r<s.length;r+=3){var c=s[r],h=s[r+1],m=s[r+2];if(typeof h!="function"){if(Uf(h||c)===null)continue;break}var v=$a(c);v!==null&&(s.splice(r,3),r-=3,Ih(v,{pending:!0,data:m,method:c.method,action:h},h,m))}}))}function Qo(s){function r(N){return du(N,s)}zs!==null&&du(zs,s),Bs!==null&&du(Bs,s),Hs!==null&&du(Hs,s),Wo.forEach(r),Ko.forEach(r);for(var c=0;c<$s.length;c++){var h=$s[c];h.blockedOn===s&&(h.blockedOn=null)}for(;0<$s.length&&(c=$s[0],c.blockedOn===null);)L_(c),c.blockedOn===null&&$s.shift();if(c=(s.ownerDocument||s).$$reactFormReplay,c!=null)for(h=0;h<c.length;h+=3){var m=c[h],v=c[h+1],T=m[_t]||null;if(typeof v=="function")T||U_(c);else if(T){var O=null;if(v&&v.hasAttribute("formAction")){if(m=v,T=v[_t]||null)O=T.formAction;else if(Uf(m)!==null)continue}else O=T.action;typeof O=="function"?c[h+1]=O:(c.splice(h,3),h-=3),U_(c)}}}function Ff(s){this._internalRoot=s}fu.prototype.render=Ff.prototype.render=function(s){var r=this._internalRoot;if(r===null)throw Error(i(409));var c=r.current,h=Bn();D_(c,h,s,r,null,null)},fu.prototype.unmount=Ff.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var r=s.containerInfo;D_(s.current,2,null,s,null,null),Wc(),r[fn]=null}};function fu(s){this._internalRoot=s}fu.prototype.unstable_scheduleHydration=function(s){if(s){var r=Ln();s={blockedOn:null,target:s,priority:r};for(var c=0;c<$s.length&&r!==0&&r<$s[c].priority;c++);$s.splice(c,0,s),c===0&&L_(s)}};var P_=e.version;if(P_!=="19.1.1")throw Error(i(527,P_,"19.1.1"));Y.findDOMNode=function(s){var r=s._reactInternals;if(r===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=d(r),s=s!==null?f(s):null,s=s===null?null:s.stateNode,s};var XT={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:U,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var gu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!gu.isDisabled&&gu.supportsFiber)try{ve=gu.inject(XT),Te=gu}catch{}}return Jo.createRoot=function(s,r){if(!a(s))throw Error(i(299));var c=!1,h="",m=ey,v=ty,T=ny,O=null;return r!=null&&(r.unstable_strictMode===!0&&(c=!0),r.identifierPrefix!==void 0&&(h=r.identifierPrefix),r.onUncaughtError!==void 0&&(m=r.onUncaughtError),r.onCaughtError!==void 0&&(v=r.onCaughtError),r.onRecoverableError!==void 0&&(T=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(O=r.unstable_transitionCallbacks)),r=A_(s,1,!1,null,null,c,h,m,v,T,O,null),s[fn]=r.current,Sf(s),new Ff(r)},Jo.hydrateRoot=function(s,r,c){if(!a(s))throw Error(i(299));var h=!1,m="",v=ey,T=ty,O=ny,N=null,G=null;return c!=null&&(c.unstable_strictMode===!0&&(h=!0),c.identifierPrefix!==void 0&&(m=c.identifierPrefix),c.onUncaughtError!==void 0&&(v=c.onUncaughtError),c.onCaughtError!==void 0&&(T=c.onCaughtError),c.onRecoverableError!==void 0&&(O=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(N=c.unstable_transitionCallbacks),c.formState!==void 0&&(G=c.formState)),r=A_(s,1,!0,r,c??null,h,m,v,T,O,N,G),r.context=O_(null),c=r.current,h=Bn(),h=hn(h),m=Cs(h),m.callback=null,Rs(c,m,h),c=h,r.current.lanes=c,Ct(r,c),Mi(r),s[fn]=r.current,Sf(s),new fu(r)},Jo.version="19.1.1",Jo}var W_;function rC(){if(W_)return Hf.exports;W_=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Hf.exports=aC(),Hf.exports}var oC=rC();const lC=im(oC);/**
 * react-router v7.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var K_="popstate";function cC(t={}){function e(i,a){let{pathname:o,search:l,hash:u}=i.location;return Tg("",{pathname:o,search:l,hash:u},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(i,a){return typeof a=="string"?a:Nl(a)}return dC(e,n,null,t)}function Et(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function _i(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function uC(){return Math.random().toString(36).substring(2,10)}function X_(t,e){return{usr:t.state,key:t.key,idx:e}}function Tg(t,e,n=null,i){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Kr(e):e,state:n,key:e&&e.key||i||uC()}}function Nl({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Kr(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substring(i),t=t.substring(0,i)),t&&(e.pathname=t)}return e}function dC(t,e,n,i={}){let{window:a=document.defaultView,v5Compat:o=!1}=i,l=a.history,u="POP",d=null,f=g();f==null&&(f=0,l.replaceState({...l.state,idx:f},""));function g(){return(l.state||{idx:null}).idx}function p(){u="POP";let x=g(),E=x==null?null:x-f;f=x,d&&d({action:u,location:w.location,delta:E})}function y(x,E){u="PUSH";let C=Tg(w.location,x,E);f=g()+1;let R=X_(C,f),M=w.createHref(C);try{l.pushState(R,"",M)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;a.location.assign(M)}o&&d&&d({action:u,location:w.location,delta:1})}function b(x,E){u="REPLACE";let C=Tg(w.location,x,E);f=g();let R=X_(C,f),M=w.createHref(C);l.replaceState(R,"",M),o&&d&&d({action:u,location:w.location,delta:0})}function S(x){return hC(x)}let w={get action(){return u},get location(){return t(a,l)},listen(x){if(d)throw new Error("A history only accepts one active listener");return a.addEventListener(K_,p),d=x,()=>{a.removeEventListener(K_,p),d=null}},createHref(x){return e(a,x)},createURL:S,encodeLocation(x){let E=S(x);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:y,replace:b,go(x){return l.go(x)}};return w}function hC(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Et(n,"No window.location.(origin|href) available to create URL");let i=typeof t=="string"?t:Nl(t);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=n+i),new URL(i,n)}function OS(t,e,n="/"){return fC(t,e,n,!1)}function fC(t,e,n,i){let a=typeof e=="string"?Kr(e):e,o=vs(a.pathname||"/",n);if(o==null)return null;let l=DS(t);gC(l);let u=null;for(let d=0;u==null&&d<l.length;++d){let f=TC(o);u=xC(l[d],f,i)}return u}function DS(t,e=[],n=[],i="",a=!1){let o=(l,u,d=a,f)=>{let g={relativePath:f===void 0?l.path||"":f,caseSensitive:l.caseSensitive===!0,childrenIndex:u,route:l};if(g.relativePath.startsWith("/")){if(!g.relativePath.startsWith(i)&&d)return;Et(g.relativePath.startsWith(i),`Absolute route path "${g.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(i.length)}let p=ps([i,g.relativePath]),y=n.concat(g);l.children&&l.children.length>0&&(Et(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),DS(l.children,e,y,p,d)),!(l.path==null&&!l.index)&&e.push({path:p,score:SC(p,l.index),routesMeta:y})};return t.forEach((l,u)=>{if(l.path===""||!l.path?.includes("?"))o(l,u);else for(let d of MS(l.path))o(l,u,!0,d)}),e}function MS(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,a=n.endsWith("?"),o=n.replace(/\?$/,"");if(i.length===0)return a?[o,""]:[o];let l=MS(i.join("/")),u=[];return u.push(...l.map(d=>d===""?o:[o,d].join("/"))),a&&u.push(...l),u.map(d=>t.startsWith("/")&&d===""?"/":d)}function gC(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:wC(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var mC=/^:[\w-]+$/,pC=3,vC=2,yC=1,_C=10,bC=-2,Q_=t=>t==="*";function SC(t,e){let n=t.split("/"),i=n.length;return n.some(Q_)&&(i+=bC),e&&(i+=vC),n.filter(a=>!Q_(a)).reduce((a,o)=>a+(mC.test(o)?pC:o===""?yC:_C),i)}function wC(t,e){return t.length===e.length&&t.slice(0,-1).every((i,a)=>i===e[a])?t[t.length-1]-e[e.length-1]:0}function xC(t,e,n=!1){let{routesMeta:i}=t,a={},o="/",l=[];for(let u=0;u<i.length;++u){let d=i[u],f=u===i.length-1,g=o==="/"?e:e.slice(o.length)||"/",p=Wu({path:d.relativePath,caseSensitive:d.caseSensitive,end:f},g),y=d.route;if(!p&&f&&n&&!i[i.length-1].route.index&&(p=Wu({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},g)),!p)return null;Object.assign(a,p.params),l.push({params:a,pathname:ps([o,p.pathname]),pathnameBase:OC(ps([o,p.pathnameBase])),route:y}),p.pathnameBase!=="/"&&(o=ps([o,p.pathnameBase]))}return l}function Wu(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=EC(t.path,t.caseSensitive,t.end),a=e.match(n);if(!a)return null;let o=a[0],l=o.replace(/(.)\/+$/,"$1"),u=a.slice(1);return{params:i.reduce((f,{paramName:g,isOptional:p},y)=>{if(g==="*"){let S=u[y]||"";l=o.slice(0,o.length-S.length).replace(/(.)\/+$/,"$1")}const b=u[y];return p&&!b?f[g]=void 0:f[g]=(b||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:l,pattern:t}}function EC(t,e=!1,n=!0){_i(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let i=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,d)=>(i.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(i.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),i]}function TC(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return _i(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function vs(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}function CC(t,e="/"){let{pathname:n,search:i="",hash:a=""}=typeof t=="string"?Kr(t):t;return{pathname:n?n.startsWith("/")?n:RC(n,e):e,search:DC(i),hash:MC(a)}}function RC(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function qf(t,e,n,i){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function AC(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function am(t){let e=AC(t);return e.map((n,i)=>i===e.length-1?n.pathname:n.pathnameBase)}function rm(t,e,n,i=!1){let a;typeof t=="string"?a=Kr(t):(a={...t},Et(!a.pathname||!a.pathname.includes("?"),qf("?","pathname","search",a)),Et(!a.pathname||!a.pathname.includes("#"),qf("#","pathname","hash",a)),Et(!a.search||!a.search.includes("#"),qf("#","search","hash",a)));let o=t===""||a.pathname==="",l=o?"/":a.pathname,u;if(l==null)u=n;else{let p=e.length-1;if(!i&&l.startsWith("..")){let y=l.split("/");for(;y[0]==="..";)y.shift(),p-=1;a.pathname=y.join("/")}u=p>=0?e[p]:"/"}let d=CC(a,u),f=l&&l!=="/"&&l.endsWith("/"),g=(o||l===".")&&n.endsWith("/");return!d.pathname.endsWith("/")&&(f||g)&&(d.pathname+="/"),d}var ps=t=>t.join("/").replace(/\/\/+/g,"/"),OC=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),DC=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,MC=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function kC(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var kS=["POST","PUT","PATCH","DELETE"];new Set(kS);var NC=["GET",...kS];new Set(NC);var Xr=A.createContext(null);Xr.displayName="DataRouter";var md=A.createContext(null);md.displayName="DataRouterState";A.createContext(!1);var NS=A.createContext({isTransitioning:!1});NS.displayName="ViewTransition";var jC=A.createContext(new Map);jC.displayName="Fetchers";var LC=A.createContext(null);LC.displayName="Await";var Si=A.createContext(null);Si.displayName="Navigation";var Yl=A.createContext(null);Yl.displayName="Location";var oi=A.createContext({outlet:null,matches:[],isDataRoute:!1});oi.displayName="Route";var om=A.createContext(null);om.displayName="RouteError";function IC(t,{relative:e}={}){Et(Qr(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=A.useContext(Si),{hash:a,pathname:o,search:l}=Wl(t,{relative:e}),u=o;return n!=="/"&&(u=o==="/"?n:ps([n,o])),i.createHref({pathname:u,search:l,hash:a})}function Qr(){return A.useContext(Yl)!=null}function _s(){return Et(Qr(),"useLocation() may be used only in the context of a <Router> component."),A.useContext(Yl).location}var jS="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function LS(t){A.useContext(Si).static||A.useLayoutEffect(t)}function na(){let{isDataRoute:t}=A.useContext(oi);return t?QC():UC()}function UC(){Et(Qr(),"useNavigate() may be used only in the context of a <Router> component.");let t=A.useContext(Xr),{basename:e,navigator:n}=A.useContext(Si),{matches:i}=A.useContext(oi),{pathname:a}=_s(),o=JSON.stringify(am(i)),l=A.useRef(!1);return LS(()=>{l.current=!0}),A.useCallback((d,f={})=>{if(_i(l.current,jS),!l.current)return;if(typeof d=="number"){n.go(d);return}let g=rm(d,JSON.parse(o),a,f.relative==="path");t==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:ps([e,g.pathname])),(f.replace?n.replace:n.push)(g,f.state,f)},[e,n,o,a,t])}var PC=A.createContext(null);function FC(t){let e=A.useContext(oi).outlet;return e&&A.createElement(PC.Provider,{value:t},e)}function pd(){let{matches:t}=A.useContext(oi),e=t[t.length-1];return e?e.params:{}}function Wl(t,{relative:e}={}){let{matches:n}=A.useContext(oi),{pathname:i}=_s(),a=JSON.stringify(am(n));return A.useMemo(()=>rm(t,JSON.parse(a),i,e==="path"),[t,a,i,e])}function zC(t,e){return IS(t,e)}function IS(t,e,n,i){Et(Qr(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=A.useContext(Si),{matches:o}=A.useContext(oi),l=o[o.length-1],u=l?l.params:{},d=l?l.pathname:"/",f=l?l.pathnameBase:"/",g=l&&l.route;{let E=g&&g.path||"";US(d,!g||E.endsWith("*")||E.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${E}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${E}"> to <Route path="${E==="/"?"*":`${E}/*`}">.`)}let p=_s(),y;if(e){let E=typeof e=="string"?Kr(e):e;Et(f==="/"||E.pathname?.startsWith(f),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${E.pathname}" was given in the \`location\` prop.`),y=E}else y=p;let b=y.pathname||"/",S=b;if(f!=="/"){let E=f.replace(/^\//,"").split("/");S="/"+b.replace(/^\//,"").split("/").slice(E.length).join("/")}let w=OS(t,{pathname:S});_i(g||w!=null,`No routes matched location "${y.pathname}${y.search}${y.hash}" `),_i(w==null||w[w.length-1].route.element!==void 0||w[w.length-1].route.Component!==void 0||w[w.length-1].route.lazy!==void 0,`Matched leaf route at location "${y.pathname}${y.search}${y.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let x=GC(w&&w.map(E=>Object.assign({},E,{params:Object.assign({},u,E.params),pathname:ps([f,a.encodeLocation?a.encodeLocation(E.pathname).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?f:ps([f,a.encodeLocation?a.encodeLocation(E.pathnameBase).pathname:E.pathnameBase])})),o,n,i);return e&&x?A.createElement(Yl.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...y},navigationType:"POP"}},x):x}function BC(){let t=XC(),e=kC(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i},o={padding:"2px 4px",backgroundColor:i},l=null;return console.error("Error handled by React Router default ErrorBoundary:",t),l=A.createElement(A.Fragment,null,A.createElement("p",null," Hey developer "),A.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",A.createElement("code",{style:o},"ErrorBoundary")," or"," ",A.createElement("code",{style:o},"errorElement")," prop on your route.")),A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},e),n?A.createElement("pre",{style:a},n):null,l)}var HC=A.createElement(BC,null),$C=class extends A.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?A.createElement(oi.Provider,{value:this.props.routeContext},A.createElement(om.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function VC({routeContext:t,match:e,children:n}){let i=A.useContext(Xr);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),A.createElement(oi.Provider,{value:t},n)}function GC(t,e=[],n=null,i=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,o=n?.errors;if(o!=null){let d=a.findIndex(f=>f.route.id&&o?.[f.route.id]!==void 0);Et(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),a=a.slice(0,Math.min(a.length,d+1))}let l=!1,u=-1;if(n)for(let d=0;d<a.length;d++){let f=a[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=d),f.route.id){let{loaderData:g,errors:p}=n,y=f.route.loader&&!g.hasOwnProperty(f.route.id)&&(!p||p[f.route.id]===void 0);if(f.route.lazy||y){l=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((d,f,g)=>{let p,y=!1,b=null,S=null;n&&(p=o&&f.route.id?o[f.route.id]:void 0,b=f.route.errorElement||HC,l&&(u<0&&g===0?(US("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),y=!0,S=null):u===g&&(y=!0,S=f.route.hydrateFallbackElement||null)));let w=e.concat(a.slice(0,g+1)),x=()=>{let E;return p?E=b:y?E=S:f.route.Component?E=A.createElement(f.route.Component,null):f.route.element?E=f.route.element:E=d,A.createElement(VC,{match:f,routeContext:{outlet:d,matches:w,isDataRoute:n!=null},children:E})};return n&&(f.route.ErrorBoundary||f.route.errorElement||g===0)?A.createElement($C,{location:n.location,revalidation:n.revalidation,component:b,error:p,children:x(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):x()},null)}function lm(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function qC(t){let e=A.useContext(Xr);return Et(e,lm(t)),e}function YC(t){let e=A.useContext(md);return Et(e,lm(t)),e}function WC(t){let e=A.useContext(oi);return Et(e,lm(t)),e}function cm(t){let e=WC(t),n=e.matches[e.matches.length-1];return Et(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function KC(){return cm("useRouteId")}function XC(){let t=A.useContext(om),e=YC("useRouteError"),n=cm("useRouteError");return t!==void 0?t:e.errors?.[n]}function QC(){let{router:t}=qC("useNavigate"),e=cm("useNavigate"),n=A.useRef(!1);return LS(()=>{n.current=!0}),A.useCallback(async(a,o={})=>{_i(n.current,jS),n.current&&(typeof a=="number"?t.navigate(a):await t.navigate(a,{fromRouteId:e,...o}))},[t,e])}var Z_={};function US(t,e,n){!e&&!Z_[t]&&(Z_[t]=!0,_i(!1,n))}A.memo(ZC);function ZC({routes:t,future:e,state:n}){return IS(t,void 0,n,e)}function PS({to:t,replace:e,state:n,relative:i}){Et(Qr(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=A.useContext(Si);_i(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=A.useContext(oi),{pathname:l}=_s(),u=na(),d=rm(t,am(o),l,i==="path"),f=JSON.stringify(d);return A.useEffect(()=>{u(JSON.parse(f),{replace:e,state:n,relative:i})},[u,f,i,e,n]),null}function FS(t){return FC(t.context)}function $t(t){Et(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function JC({basename:t="/",children:e=null,location:n,navigationType:i="POP",navigator:a,static:o=!1}){Et(!Qr(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=t.replace(/^\/*/,"/"),u=A.useMemo(()=>({basename:l,navigator:a,static:o,future:{}}),[l,a,o]);typeof n=="string"&&(n=Kr(n));let{pathname:d="/",search:f="",hash:g="",state:p=null,key:y="default"}=n,b=A.useMemo(()=>{let S=vs(d,l);return S==null?null:{location:{pathname:S,search:f,hash:g,state:p,key:y},navigationType:i}},[l,d,f,g,p,y,i]);return _i(b!=null,`<Router basename="${l}"> is not able to match the URL "${d}${f}${g}" because it does not start with the basename, so the <Router> won't render anything.`),b==null?null:A.createElement(Si.Provider,{value:u},A.createElement(Yl.Provider,{children:e,value:b}))}function eR({children:t,location:e}){return zC(Cg(t),e)}function Cg(t,e=[]){let n=[];return A.Children.forEach(t,(i,a)=>{if(!A.isValidElement(i))return;let o=[...e,a];if(i.type===A.Fragment){n.push.apply(n,Cg(i.props.children,o));return}Et(i.type===$t,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Et(!i.props.index||!i.props.children,"An index route cannot have child routes.");let l={id:i.props.id||o.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(l.children=Cg(i.props.children,o)),n.push(l)}),n}var Bu="get",Hu="application/x-www-form-urlencoded";function vd(t){return t!=null&&typeof t.tagName=="string"}function tR(t){return vd(t)&&t.tagName.toLowerCase()==="button"}function nR(t){return vd(t)&&t.tagName.toLowerCase()==="form"}function iR(t){return vd(t)&&t.tagName.toLowerCase()==="input"}function sR(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function aR(t,e){return t.button===0&&(!e||e==="_self")&&!sR(t)}var mu=null;function rR(){if(mu===null)try{new FormData(document.createElement("form"),0),mu=!1}catch{mu=!0}return mu}var oR=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Yf(t){return t!=null&&!oR.has(t)?(_i(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Hu}"`),null):t}function lR(t,e){let n,i,a,o,l;if(nR(t)){let u=t.getAttribute("action");i=u?vs(u,e):null,n=t.getAttribute("method")||Bu,a=Yf(t.getAttribute("enctype"))||Hu,o=new FormData(t)}else if(tR(t)||iR(t)&&(t.type==="submit"||t.type==="image")){let u=t.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=t.getAttribute("formaction")||u.getAttribute("action");if(i=d?vs(d,e):null,n=t.getAttribute("formmethod")||u.getAttribute("method")||Bu,a=Yf(t.getAttribute("formenctype"))||Yf(u.getAttribute("enctype"))||Hu,o=new FormData(u,t),!rR()){let{name:f,type:g,value:p}=t;if(g==="image"){let y=f?`${f}.`:"";o.append(`${y}x`,"0"),o.append(`${y}y`,"0")}else f&&o.append(f,p)}}else{if(vd(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Bu,i=null,a=Hu,l=t}return o&&a==="text/plain"&&(l=o,o=void 0),{action:i,method:n.toLowerCase(),encType:a,formData:o,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function um(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function cR(t,e,n){let i=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return i.pathname==="/"?i.pathname=`_root.${n}`:e&&vs(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${n}`,i}async function uR(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function dR(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function hR(t,e,n){let i=await Promise.all(t.map(async a=>{let o=e.routes[a.route.id];if(o){let l=await uR(o,n);return l.links?l.links():[]}return[]}));return pR(i.flat(1).filter(dR).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function J_(t,e,n,i,a,o){let l=(d,f)=>n[f]?d.route.id!==n[f].route.id:!0,u=(d,f)=>n[f].pathname!==d.pathname||n[f].route.path?.endsWith("*")&&n[f].params["*"]!==d.params["*"];return o==="assets"?e.filter((d,f)=>l(d,f)||u(d,f)):o==="data"?e.filter((d,f)=>{let g=i.routes[d.route.id];if(!g||!g.hasLoader)return!1;if(l(d,f)||u(d,f))return!0;if(d.route.shouldRevalidate){let p=d.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function fR(t,e,{includeHydrateFallback:n}={}){return gR(t.map(i=>{let a=e.routes[i.route.id];if(!a)return[];let o=[a.module];return a.clientActionModule&&(o=o.concat(a.clientActionModule)),a.clientLoaderModule&&(o=o.concat(a.clientLoaderModule)),n&&a.hydrateFallbackModule&&(o=o.concat(a.hydrateFallbackModule)),a.imports&&(o=o.concat(a.imports)),o}).flat(1))}function gR(t){return[...new Set(t)]}function mR(t){let e={},n=Object.keys(t).sort();for(let i of n)e[i]=t[i];return e}function pR(t,e){let n=new Set;return new Set(e),t.reduce((i,a)=>{let o=JSON.stringify(mR(a));return n.has(o)||(n.add(o),i.push({key:o,link:a})),i},[])}function zS(){let t=A.useContext(Xr);return um(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function vR(){let t=A.useContext(md);return um(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var dm=A.createContext(void 0);dm.displayName="FrameworkContext";function BS(){let t=A.useContext(dm);return um(t,"You must render this element inside a <HydratedRouter> element"),t}function yR(t,e){let n=A.useContext(dm),[i,a]=A.useState(!1),[o,l]=A.useState(!1),{onFocus:u,onBlur:d,onMouseEnter:f,onMouseLeave:g,onTouchStart:p}=e,y=A.useRef(null);A.useEffect(()=>{if(t==="render"&&l(!0),t==="viewport"){let w=E=>{E.forEach(C=>{l(C.isIntersecting)})},x=new IntersectionObserver(w,{threshold:.5});return y.current&&x.observe(y.current),()=>{x.disconnect()}}},[t]),A.useEffect(()=>{if(i){let w=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(w)}}},[i]);let b=()=>{a(!0)},S=()=>{a(!1),l(!1)};return n?t!=="intent"?[o,y,{}]:[o,y,{onFocus:el(u,b),onBlur:el(d,S),onMouseEnter:el(f,b),onMouseLeave:el(g,S),onTouchStart:el(p,b)}]:[!1,y,{}]}function el(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function _R({page:t,...e}){let{router:n}=zS(),i=A.useMemo(()=>OS(n.routes,t,n.basename),[n.routes,t,n.basename]);return i?A.createElement(SR,{page:t,matches:i,...e}):null}function bR(t){let{manifest:e,routeModules:n}=BS(),[i,a]=A.useState([]);return A.useEffect(()=>{let o=!1;return hR(t,e,n).then(l=>{o||a(l)}),()=>{o=!0}},[t,e,n]),i}function SR({page:t,matches:e,...n}){let i=_s(),{manifest:a,routeModules:o}=BS(),{basename:l}=zS(),{loaderData:u,matches:d}=vR(),f=A.useMemo(()=>J_(t,e,d,a,i,"data"),[t,e,d,a,i]),g=A.useMemo(()=>J_(t,e,d,a,i,"assets"),[t,e,d,a,i]),p=A.useMemo(()=>{if(t===i.pathname+i.search+i.hash)return[];let S=new Set,w=!1;if(e.forEach(E=>{let C=a.routes[E.route.id];!C||!C.hasLoader||(!f.some(R=>R.route.id===E.route.id)&&E.route.id in u&&o[E.route.id]?.shouldRevalidate||C.hasClientLoader?w=!0:S.add(E.route.id))}),S.size===0)return[];let x=cR(t,l,"data");return w&&S.size>0&&x.searchParams.set("_routes",e.filter(E=>S.has(E.route.id)).map(E=>E.route.id).join(",")),[x.pathname+x.search]},[l,u,i,a,f,e,t,o]),y=A.useMemo(()=>fR(g,a),[g,a]),b=bR(g);return A.createElement(A.Fragment,null,p.map(S=>A.createElement("link",{key:S,rel:"prefetch",as:"fetch",href:S,...n})),y.map(S=>A.createElement("link",{key:S,rel:"modulepreload",href:S,...n})),b.map(({key:S,link:w})=>A.createElement("link",{key:S,nonce:n.nonce,...w})))}function wR(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var HS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{HS&&(window.__reactRouterVersion="7.8.1")}catch{}function xR({basename:t,children:e,window:n}){let i=A.useRef();i.current==null&&(i.current=cC({window:n,v5Compat:!0}));let a=i.current,[o,l]=A.useState({action:a.action,location:a.location}),u=A.useCallback(d=>{A.startTransition(()=>l(d))},[l]);return A.useLayoutEffect(()=>a.listen(u),[a,u]),A.createElement(JC,{basename:t,children:e,location:o.location,navigationType:o.action,navigator:a})}var $S=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,xn=A.forwardRef(function({onClick:e,discover:n="render",prefetch:i="none",relative:a,reloadDocument:o,replace:l,state:u,target:d,to:f,preventScrollReset:g,viewTransition:p,...y},b){let{basename:S}=A.useContext(Si),w=typeof f=="string"&&$S.test(f),x,E=!1;if(typeof f=="string"&&w&&(x=f,HS))try{let P=new URL(window.location.href),K=f.startsWith("//")?new URL(P.protocol+f):new URL(f),X=vs(K.pathname,S);K.origin===P.origin&&X!=null?f=X+K.search+K.hash:E=!0}catch{_i(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let C=IC(f,{relative:a}),[R,M,D]=yR(i,y),I=RR(f,{replace:l,state:u,target:d,preventScrollReset:g,relative:a,viewTransition:p});function L(P){e&&e(P),P.defaultPrevented||I(P)}let z=A.createElement("a",{...y,...D,href:x||C,onClick:E||o?e:L,ref:wR(b,M),target:d,"data-discover":!w&&n==="render"?"true":void 0});return R&&!w?A.createElement(A.Fragment,null,z,A.createElement(_R,{page:C})):z});xn.displayName="Link";var ER=A.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:i="",end:a=!1,style:o,to:l,viewTransition:u,children:d,...f},g){let p=Wl(l,{relative:f.relative}),y=_s(),b=A.useContext(md),{navigator:S,basename:w}=A.useContext(Si),x=b!=null&&kR(p)&&u===!0,E=S.encodeLocation?S.encodeLocation(p).pathname:p.pathname,C=y.pathname,R=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;n||(C=C.toLowerCase(),R=R?R.toLowerCase():null,E=E.toLowerCase()),R&&w&&(R=vs(R,w)||R);const M=E!=="/"&&E.endsWith("/")?E.length-1:E.length;let D=C===E||!a&&C.startsWith(E)&&C.charAt(M)==="/",I=R!=null&&(R===E||!a&&R.startsWith(E)&&R.charAt(E.length)==="/"),L={isActive:D,isPending:I,isTransitioning:x},z=D?e:void 0,P;typeof i=="function"?P=i(L):P=[i,D?"active":null,I?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let K=typeof o=="function"?o(L):o;return A.createElement(xn,{...f,"aria-current":z,className:P,ref:g,style:K,to:l,viewTransition:u},typeof d=="function"?d(L):d)});ER.displayName="NavLink";var TR=A.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:i,replace:a,state:o,method:l=Bu,action:u,onSubmit:d,relative:f,preventScrollReset:g,viewTransition:p,...y},b)=>{let S=DR(),w=MR(u,{relative:f}),x=l.toLowerCase()==="get"?"get":"post",E=typeof u=="string"&&$S.test(u),C=R=>{if(d&&d(R),R.defaultPrevented)return;R.preventDefault();let M=R.nativeEvent.submitter,D=M?.getAttribute("formmethod")||l;S(M||R.currentTarget,{fetcherKey:e,method:D,navigate:n,replace:a,state:o,relative:f,preventScrollReset:g,viewTransition:p})};return A.createElement("form",{ref:b,method:x,action:w,onSubmit:i?d:C,...y,"data-discover":!E&&t==="render"?"true":void 0})});TR.displayName="Form";function CR(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function VS(t){let e=A.useContext(Xr);return Et(e,CR(t)),e}function RR(t,{target:e,replace:n,state:i,preventScrollReset:a,relative:o,viewTransition:l}={}){let u=na(),d=_s(),f=Wl(t,{relative:o});return A.useCallback(g=>{if(aR(g,e)){g.preventDefault();let p=n!==void 0?n:Nl(d)===Nl(f);u(t,{replace:p,state:i,preventScrollReset:a,relative:o,viewTransition:l})}},[d,u,f,n,i,e,t,a,o,l])}var AR=0,OR=()=>`__${String(++AR)}__`;function DR(){let{router:t}=VS("useSubmit"),{basename:e}=A.useContext(Si),n=KC();return A.useCallback(async(i,a={})=>{let{action:o,method:l,encType:u,formData:d,body:f}=lR(i,e);if(a.navigate===!1){let g=a.fetcherKey||OR();await t.fetch(g,n,a.action||o,{preventScrollReset:a.preventScrollReset,formData:d,body:f,formMethod:a.method||l,formEncType:a.encType||u,flushSync:a.flushSync})}else await t.navigate(a.action||o,{preventScrollReset:a.preventScrollReset,formData:d,body:f,formMethod:a.method||l,formEncType:a.encType||u,replace:a.replace,state:a.state,fromRouteId:n,flushSync:a.flushSync,viewTransition:a.viewTransition})},[t,e,n])}function MR(t,{relative:e}={}){let{basename:n}=A.useContext(Si),i=A.useContext(oi);Et(i,"useFormAction must be used inside a RouteContext");let[a]=i.matches.slice(-1),o={...Wl(t||".",{relative:e})},l=_s();if(t==null){o.search=l.search;let u=new URLSearchParams(o.search),d=u.getAll("index");if(d.some(g=>g==="")){u.delete("index"),d.filter(p=>p).forEach(p=>u.append("index",p));let g=u.toString();o.search=g?`?${g}`:""}}return(!t||t===".")&&a.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(o.pathname=o.pathname==="/"?n:ps([n,o.pathname])),Nl(o)}function kR(t,{relative:e}={}){let n=A.useContext(NS);Et(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=VS("useViewTransitionState"),a=Wl(t,{relative:e});if(!n.isTransitioning)return!1;let o=vs(n.currentLocation.pathname,i)||n.currentLocation.pathname,l=vs(n.nextLocation.pathname,i)||n.nextLocation.pathname;return Wu(a.pathname,l)!=null||Wu(a.pathname,o)!=null}var fl=AS();const NR="modulepreload",jR=function(t){return"/"+t},eb={},Pa=function(e,n,i){let a=Promise.resolve();if(n&&n.length>0){let d=function(f){return Promise.all(f.map(g=>Promise.resolve(g).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),u=l?.nonce||l?.getAttribute("nonce");a=d(n.map(f=>{if(f=jR(f),f in eb)return;eb[f]=!0;const g=f.endsWith(".css"),p=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${p}`))return;const y=document.createElement("link");if(y.rel=g?"stylesheet":NR,g||(y.as="script"),y.crossOrigin="",y.href=f,u&&y.setAttribute("nonce",u),document.head.appendChild(y),g)return new Promise((b,S)=>{y.addEventListener("load",b),y.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${f}`)))})}))}function o(l){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=l,window.dispatchEvent(u),!u.defaultPrevented)throw l}return a.then(l=>{for(const u of l||[])u.status==="rejected"&&o(u.reason);return e().catch(o)})},LR=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Pa(async()=>{const{default:i}=await Promise.resolve().then(()=>Zr);return{default:i}},[]).then(({default:i})=>i(...n)):e=fetch,(...n)=>e(...n)};class hm extends Error{constructor(e,n="FunctionsError",i){super(e),this.name=n,this.context=i}}class IR extends hm{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class tb extends hm{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class nb extends hm{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Rg;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Rg||(Rg={}));var UR=function(t,e,n,i){function a(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(g){try{f(i.next(g))}catch(p){l(p)}}function d(g){try{f(i.throw(g))}catch(p){l(p)}}function f(g){g.done?o(g.value):a(g.value).then(u,d)}f((i=i.apply(t,e||[])).next())})};class PR{constructor(e,{headers:n={},customFetch:i,region:a=Rg.Any}={}){this.url=e,this.headers=n,this.region=a,this.fetch=LR(i)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var i;return UR(this,void 0,void 0,function*(){try{const{headers:a,method:o,body:l}=n;let u={},{region:d}=n;d||(d=this.region);const f=new URL(`${this.url}/${e}`);d&&d!=="any"&&(u["x-region"]=d,f.searchParams.set("forceFunctionRegion",d));let g;l&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(u["Content-Type"]="application/octet-stream",g=l):typeof l=="string"?(u["Content-Type"]="text/plain",g=l):typeof FormData<"u"&&l instanceof FormData?g=l:(u["Content-Type"]="application/json",g=JSON.stringify(l)));const p=yield this.fetch(f.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},u),this.headers),a),body:g}).catch(w=>{throw new IR(w)}),y=p.headers.get("x-relay-error");if(y&&y==="true")throw new tb(p);if(!p.ok)throw new nb(p);let b=((i=p.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),S;return b==="application/json"?S=yield p.json():b==="application/octet-stream"?S=yield p.blob():b==="text/event-stream"?S=p:b==="multipart/form-data"?S=yield p.formData():S=yield p.text(),{data:S,error:null,response:p}}catch(a){return{data:null,error:a,response:a instanceof nb||a instanceof tb?a.context:void 0}}})}}var Jt={},Cr={},Rr={},Ar={},Or={},Dr={},FR=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Vr=FR();const zR=Vr.fetch,GS=Vr.fetch.bind(Vr),qS=Vr.Headers,BR=Vr.Request,HR=Vr.Response,Zr=Object.freeze(Object.defineProperty({__proto__:null,Headers:qS,Request:BR,Response:HR,default:GS,fetch:zR},Symbol.toStringTag,{value:"Module"})),$R=ZT(Zr);var pu={},ib;function YS(){if(ib)return pu;ib=1,Object.defineProperty(pu,"__esModule",{value:!0});class t extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return pu.default=t,pu}var sb;function WS(){if(sb)return Dr;sb=1;var t=Dr&&Dr.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(Dr,"__esModule",{value:!0});const e=t($R),n=t(YS());class i{constructor(o){this.shouldThrowOnError=!1,this.method=o.method,this.url=o.url,this.headers=o.headers,this.schema=o.schema,this.body=o.body,this.shouldThrowOnError=o.shouldThrowOnError,this.signal=o.signal,this.isMaybeSingle=o.isMaybeSingle,o.fetch?this.fetch=o.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(o,l){return this.headers=Object.assign({},this.headers),this.headers[o]=l,this}then(o,l){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const u=this.fetch;let d=u(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async f=>{var g,p,y;let b=null,S=null,w=null,x=f.status,E=f.statusText;if(f.ok){if(this.method!=="HEAD"){const D=await f.text();D===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?S=D:S=JSON.parse(D))}const R=(g=this.headers.Prefer)===null||g===void 0?void 0:g.match(/count=(exact|planned|estimated)/),M=(p=f.headers.get("content-range"))===null||p===void 0?void 0:p.split("/");R&&M&&M.length>1&&(w=parseInt(M[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(S)&&(S.length>1?(b={code:"PGRST116",details:`Results contain ${S.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},S=null,w=null,x=406,E="Not Acceptable"):S.length===1?S=S[0]:S=null)}else{const R=await f.text();try{b=JSON.parse(R),Array.isArray(b)&&f.status===404&&(S=[],b=null,x=200,E="OK")}catch{f.status===404&&R===""?(x=204,E="No Content"):b={message:R}}if(b&&this.isMaybeSingle&&(!((y=b?.details)===null||y===void 0)&&y.includes("0 rows"))&&(b=null,x=200,E="OK"),b&&this.shouldThrowOnError)throw new n.default(b)}return{error:b,data:S,count:w,status:x,statusText:E}});return this.shouldThrowOnError||(d=d.catch(f=>{var g,p,y;return{error:{message:`${(g=f?.name)!==null&&g!==void 0?g:"FetchError"}: ${f?.message}`,details:`${(p=f?.stack)!==null&&p!==void 0?p:""}`,hint:"",code:`${(y=f?.code)!==null&&y!==void 0?y:""}`},data:null,count:null,status:0,statusText:""}})),d.then(o,l)}returns(){return this}overrideTypes(){return this}}return Dr.default=i,Dr}var ab;function KS(){if(ab)return Or;ab=1;var t=Or&&Or.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Or,"__esModule",{value:!0});const e=t(WS());class n extends e.default{select(a){let o=!1;const l=(a??"*").split("").map(u=>/\s/.test(u)&&!o?"":(u==='"'&&(o=!o),u)).join("");return this.url.searchParams.set("select",l),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(a,{ascending:o=!0,nullsFirst:l,foreignTable:u,referencedTable:d=u}={}){const f=d?`${d}.order`:"order",g=this.url.searchParams.get(f);return this.url.searchParams.set(f,`${g?`${g},`:""}${a}.${o?"asc":"desc"}${l===void 0?"":l?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:o,referencedTable:l=o}={}){const u=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(u,`${a}`),this}range(a,o,{foreignTable:l,referencedTable:u=l}={}){const d=typeof u>"u"?"offset":`${u}.offset`,f=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(d,`${a}`),this.url.searchParams.set(f,`${o-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:a=!1,verbose:o=!1,settings:l=!1,buffers:u=!1,wal:d=!1,format:f="text"}={}){var g;const p=[a?"analyze":null,o?"verbose":null,l?"settings":null,u?"buffers":null,d?"wal":null].filter(Boolean).join("|"),y=(g=this.headers.Accept)!==null&&g!==void 0?g:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${f}; for="${y}"; options=${p};`,f==="json"?this:this}rollback(){var a;return((a=this.headers.Prefer)!==null&&a!==void 0?a:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return Or.default=n,Or}var rb;function fm(){if(rb)return Ar;rb=1;var t=Ar&&Ar.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Ar,"__esModule",{value:!0});const e=t(KS());class n extends e.default{eq(a,o){return this.url.searchParams.append(a,`eq.${o}`),this}neq(a,o){return this.url.searchParams.append(a,`neq.${o}`),this}gt(a,o){return this.url.searchParams.append(a,`gt.${o}`),this}gte(a,o){return this.url.searchParams.append(a,`gte.${o}`),this}lt(a,o){return this.url.searchParams.append(a,`lt.${o}`),this}lte(a,o){return this.url.searchParams.append(a,`lte.${o}`),this}like(a,o){return this.url.searchParams.append(a,`like.${o}`),this}likeAllOf(a,o){return this.url.searchParams.append(a,`like(all).{${o.join(",")}}`),this}likeAnyOf(a,o){return this.url.searchParams.append(a,`like(any).{${o.join(",")}}`),this}ilike(a,o){return this.url.searchParams.append(a,`ilike.${o}`),this}ilikeAllOf(a,o){return this.url.searchParams.append(a,`ilike(all).{${o.join(",")}}`),this}ilikeAnyOf(a,o){return this.url.searchParams.append(a,`ilike(any).{${o.join(",")}}`),this}is(a,o){return this.url.searchParams.append(a,`is.${o}`),this}in(a,o){const l=Array.from(new Set(o)).map(u=>typeof u=="string"&&new RegExp("[,()]").test(u)?`"${u}"`:`${u}`).join(",");return this.url.searchParams.append(a,`in.(${l})`),this}contains(a,o){return typeof o=="string"?this.url.searchParams.append(a,`cs.${o}`):Array.isArray(o)?this.url.searchParams.append(a,`cs.{${o.join(",")}}`):this.url.searchParams.append(a,`cs.${JSON.stringify(o)}`),this}containedBy(a,o){return typeof o=="string"?this.url.searchParams.append(a,`cd.${o}`):Array.isArray(o)?this.url.searchParams.append(a,`cd.{${o.join(",")}}`):this.url.searchParams.append(a,`cd.${JSON.stringify(o)}`),this}rangeGt(a,o){return this.url.searchParams.append(a,`sr.${o}`),this}rangeGte(a,o){return this.url.searchParams.append(a,`nxl.${o}`),this}rangeLt(a,o){return this.url.searchParams.append(a,`sl.${o}`),this}rangeLte(a,o){return this.url.searchParams.append(a,`nxr.${o}`),this}rangeAdjacent(a,o){return this.url.searchParams.append(a,`adj.${o}`),this}overlaps(a,o){return typeof o=="string"?this.url.searchParams.append(a,`ov.${o}`):this.url.searchParams.append(a,`ov.{${o.join(",")}}`),this}textSearch(a,o,{config:l,type:u}={}){let d="";u==="plain"?d="pl":u==="phrase"?d="ph":u==="websearch"&&(d="w");const f=l===void 0?"":`(${l})`;return this.url.searchParams.append(a,`${d}fts${f}.${o}`),this}match(a){return Object.entries(a).forEach(([o,l])=>{this.url.searchParams.append(o,`eq.${l}`)}),this}not(a,o,l){return this.url.searchParams.append(a,`not.${o}.${l}`),this}or(a,{foreignTable:o,referencedTable:l=o}={}){const u=l?`${l}.or`:"or";return this.url.searchParams.append(u,`(${a})`),this}filter(a,o,l){return this.url.searchParams.append(a,`${o}.${l}`),this}}return Ar.default=n,Ar}var ob;function XS(){if(ob)return Rr;ob=1;var t=Rr&&Rr.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Rr,"__esModule",{value:!0});const e=t(fm());class n{constructor(a,{headers:o={},schema:l,fetch:u}){this.url=a,this.headers=o,this.schema=l,this.fetch=u}select(a,{head:o=!1,count:l}={}){const u=o?"HEAD":"GET";let d=!1;const f=(a??"*").split("").map(g=>/\s/.test(g)&&!d?"":(g==='"'&&(d=!d),g)).join("");return this.url.searchParams.set("select",f),l&&(this.headers.Prefer=`count=${l}`),new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(a,{count:o,defaultToNull:l=!0}={}){const u="POST",d=[];if(this.headers.Prefer&&d.push(this.headers.Prefer),o&&d.push(`count=${o}`),l||d.push("missing=default"),this.headers.Prefer=d.join(","),Array.isArray(a)){const f=a.reduce((g,p)=>g.concat(Object.keys(p)),[]);if(f.length>0){const g=[...new Set(f)].map(p=>`"${p}"`);this.url.searchParams.set("columns",g.join(","))}}return new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:this.fetch,allowEmpty:!1})}upsert(a,{onConflict:o,ignoreDuplicates:l=!1,count:u,defaultToNull:d=!0}={}){const f="POST",g=[`resolution=${l?"ignore":"merge"}-duplicates`];if(o!==void 0&&this.url.searchParams.set("on_conflict",o),this.headers.Prefer&&g.push(this.headers.Prefer),u&&g.push(`count=${u}`),d||g.push("missing=default"),this.headers.Prefer=g.join(","),Array.isArray(a)){const p=a.reduce((y,b)=>y.concat(Object.keys(b)),[]);if(p.length>0){const y=[...new Set(p)].map(b=>`"${b}"`);this.url.searchParams.set("columns",y.join(","))}}return new e.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:this.fetch,allowEmpty:!1})}update(a,{count:o}={}){const l="PATCH",u=[];return this.headers.Prefer&&u.push(this.headers.Prefer),o&&u.push(`count=${o}`),this.headers.Prefer=u.join(","),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:this.fetch,allowEmpty:!1})}delete({count:a}={}){const o="DELETE",l=[];return a&&l.push(`count=${a}`),this.headers.Prefer&&l.unshift(this.headers.Prefer),this.headers.Prefer=l.join(","),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return Rr.default=n,Rr}var tl={},nl={},lb;function VR(){return lb||(lb=1,Object.defineProperty(nl,"__esModule",{value:!0}),nl.version=void 0,nl.version="0.0.0-automated"),nl}var cb;function GR(){if(cb)return tl;cb=1,Object.defineProperty(tl,"__esModule",{value:!0}),tl.DEFAULT_HEADERS=void 0;const t=VR();return tl.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${t.version}`},tl}var ub;function qR(){if(ub)return Cr;ub=1;var t=Cr&&Cr.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Cr,"__esModule",{value:!0});const e=t(XS()),n=t(fm()),i=GR();class a{constructor(l,{headers:u={},schema:d,fetch:f}={}){this.url=l,this.headers=Object.assign(Object.assign({},i.DEFAULT_HEADERS),u),this.schemaName=d,this.fetch=f}from(l){const u=new URL(`${this.url}/${l}`);return new e.default(u,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(l){return new a(this.url,{headers:this.headers,schema:l,fetch:this.fetch})}rpc(l,u={},{head:d=!1,get:f=!1,count:g}={}){let p;const y=new URL(`${this.url}/rpc/${l}`);let b;d||f?(p=d?"HEAD":"GET",Object.entries(u).filter(([w,x])=>x!==void 0).map(([w,x])=>[w,Array.isArray(x)?`{${x.join(",")}}`:`${x}`]).forEach(([w,x])=>{y.searchParams.append(w,x)})):(p="POST",b=u);const S=Object.assign({},this.headers);return g&&(S.Prefer=`count=${g}`),new n.default({method:p,url:y,headers:S,schema:this.schemaName,body:b,fetch:this.fetch,allowEmpty:!1})}}return Cr.default=a,Cr}var db;function YR(){if(db)return Jt;db=1;var t=Jt&&Jt.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(Jt,"__esModule",{value:!0}),Jt.PostgrestError=Jt.PostgrestBuilder=Jt.PostgrestTransformBuilder=Jt.PostgrestFilterBuilder=Jt.PostgrestQueryBuilder=Jt.PostgrestClient=void 0;const e=t(qR());Jt.PostgrestClient=e.default;const n=t(XS());Jt.PostgrestQueryBuilder=n.default;const i=t(fm());Jt.PostgrestFilterBuilder=i.default;const a=t(KS());Jt.PostgrestTransformBuilder=a.default;const o=t(WS());Jt.PostgrestBuilder=o.default;const l=t(YS());return Jt.PostgrestError=l.default,Jt.default={PostgrestClient:e.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:i.default,PostgrestTransformBuilder:a.default,PostgrestBuilder:o.default,PostgrestError:l.default},Jt}var WR=YR();const KR=im(WR),{PostgrestClient:XR,PostgrestQueryBuilder:VI,PostgrestFilterBuilder:GI,PostgrestTransformBuilder:qI,PostgrestBuilder:YI,PostgrestError:WI}=KR;class QR{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const n=parseInt(process.versions.node.split(".")[0]);return n>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${n} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${n} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const i=this.getWebSocketConstructor();return new i(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const ZR="2.15.1",JR=`realtime-js/${ZR}`,eA="1.0.0",Ag=1e4,tA=1e3,nA=100;var yl;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(yl||(yl={}));var Vt;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Vt||(Vt={}));var fi;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(fi||(fi={}));var Og;(function(t){t.websocket="websocket"})(Og||(Og={}));var ka;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(ka||(ka={}));class iA{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),i=new TextDecoder;return this._decodeBroadcast(e,n,i)}_decodeBroadcast(e,n,i){const a=n.getUint8(1),o=n.getUint8(2);let l=this.HEADER_LENGTH+2;const u=i.decode(e.slice(l,l+a));l=l+a;const d=i.decode(e.slice(l,l+o));l=l+o;const f=JSON.parse(i.decode(e.slice(l,e.byteLength)));return{ref:null,topic:u,event:d,payload:f}}}class QS{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var gt;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(gt||(gt={}));const hb=(t,e,n={})=>{var i;const a=(i=n.skipTypes)!==null&&i!==void 0?i:[];return Object.keys(e).reduce((o,l)=>(o[l]=sA(l,t,e,a),o),{})},sA=(t,e,n,i)=>{const a=e.find(u=>u.name===t),o=a?.type,l=n[t];return o&&!i.includes(o)?ZS(o,l):Dg(l)},ZS=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return lA(e,n)}switch(t){case gt.bool:return aA(e);case gt.float4:case gt.float8:case gt.int2:case gt.int4:case gt.int8:case gt.numeric:case gt.oid:return rA(e);case gt.json:case gt.jsonb:return oA(e);case gt.timestamp:return cA(e);case gt.abstime:case gt.date:case gt.daterange:case gt.int4range:case gt.int8range:case gt.money:case gt.reltime:case gt.text:case gt.time:case gt.timestamptz:case gt.timetz:case gt.tsrange:case gt.tstzrange:return Dg(e);default:return Dg(e)}},Dg=t=>t,aA=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},rA=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},oA=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},lA=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,i=t[n];if(t[0]==="{"&&i==="}"){let o;const l=t.slice(1,n);try{o=JSON.parse("["+l+"]")}catch{o=l?l.split(","):[]}return o.map(u=>ZS(e,u))}return t},cA=t=>typeof t=="string"?t.replace(" ","T"):t,JS=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class Wf{constructor(e,n,i={},a=Ag){this.channel=e,this.event=n,this.payload=i,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var i;return this._hasReceived(e)&&n((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(i=>i.status===e).forEach(i=>i.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var fb;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(fb||(fb={}));class _l{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=n?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},a=>{const{onJoin:o,onLeave:l,onSync:u}=this.caller;this.joinRef=this.channel._joinRef(),this.state=_l.syncState(this.state,a,o,l),this.pendingDiffs.forEach(d=>{this.state=_l.syncDiff(this.state,d,o,l)}),this.pendingDiffs=[],u()}),this.channel._on(i.diff,{},a=>{const{onJoin:o,onLeave:l,onSync:u}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=_l.syncDiff(this.state,a,o,l),u())}),this.onJoin((a,o,l)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:o,newPresences:l})}),this.onLeave((a,o,l)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:o,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,i,a){const o=this.cloneDeep(e),l=this.transformState(n),u={},d={};return this.map(o,(f,g)=>{l[f]||(d[f]=g)}),this.map(l,(f,g)=>{const p=o[f];if(p){const y=g.map(x=>x.presence_ref),b=p.map(x=>x.presence_ref),S=g.filter(x=>b.indexOf(x.presence_ref)<0),w=p.filter(x=>y.indexOf(x.presence_ref)<0);S.length>0&&(u[f]=S),w.length>0&&(d[f]=w)}else u[f]=g}),this.syncDiff(o,{joins:u,leaves:d},i,a)}static syncDiff(e,n,i,a){const{joins:o,leaves:l}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return i||(i=()=>{}),a||(a=()=>{}),this.map(o,(u,d)=>{var f;const g=(f=e[u])!==null&&f!==void 0?f:[];if(e[u]=this.cloneDeep(d),g.length>0){const p=e[u].map(b=>b.presence_ref),y=g.filter(b=>p.indexOf(b.presence_ref)<0);e[u].unshift(...y)}i(u,g,d)}),this.map(l,(u,d)=>{let f=e[u];if(!f)return;const g=d.map(p=>p.presence_ref);f=f.filter(p=>g.indexOf(p.presence_ref)<0),e[u]=f,a(u,f,d),f.length===0&&delete e[u]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(i=>n(i,e[i]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,i)=>{const a=e[i];return"metas"in a?n[i]=a.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):n[i]=a,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var gb;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(gb||(gb={}));var bl;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(bl||(bl={}));var ds;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(ds||(ds={}));class gm{constructor(e,n={config:{}},i){this.topic=e,this.params=n,this.socket=i,this.bindings={},this.state=Vt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Wf(this,fi.join,this.params,this.timeout),this.rejoinTimer=new QS(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Vt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Vt.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Vt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Vt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Vt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(fi.reply,{},(a,o)=>{this._trigger(this._replyEventName(o),a)}),this.presence=new _l(this),this.broadcastEndpointURL=JS(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var i,a;if(this.socket.isConnected()||this.socket.connect(),this.state==Vt.closed){const{config:{broadcast:o,presence:l,private:u}}=this.params,d=(a=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(y=>y.filter))!==null&&a!==void 0?a:[],f=!!this.bindings[bl.PRESENCE]&&this.bindings[bl.PRESENCE].length>0,g={},p={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:f}),postgres_changes:d,private:u};this.socket.accessTokenValue&&(g.access_token=this.socket.accessTokenValue),this._onError(y=>e?.(ds.CHANNEL_ERROR,y)),this._onClose(()=>e?.(ds.CLOSED)),this.updateJoinPayload(Object.assign({config:p},g)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:y})=>{var b;if(this.socket.setAuth(),y===void 0){e?.(ds.SUBSCRIBED);return}else{const S=this.bindings.postgres_changes,w=(b=S?.length)!==null&&b!==void 0?b:0,x=[];for(let E=0;E<w;E++){const C=S[E],{filter:{event:R,schema:M,table:D,filter:I}}=C,L=y&&y[E];if(L&&L.event===R&&L.schema===M&&L.table===D&&L.filter===I)x.push(Object.assign(Object.assign({},C),{id:L.id}));else{this.unsubscribe(),this.state=Vt.errored,e?.(ds.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=x,e&&e(ds.SUBSCRIBED);return}}).receive("error",y=>{this.state=Vt.errored,e?.(ds.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(y).join(", ")||"error")))}).receive("timeout",()=>{e?.(ds.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,i){return this.state===Vt.joined&&e===bl.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,n,i)}async send(e,n={}){var i,a;if(!this._canPush()&&e.type==="broadcast"){const{event:o,payload:l}=e,d={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:l,private:this.private}]})};try{const f=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(i=n.timeout)!==null&&i!==void 0?i:this.timeout);return await((a=f.body)===null||a===void 0?void 0:a.cancel()),f.ok?"ok":"error"}catch(f){return f.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var l,u,d;const f=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((d=(u=(l=this.params)===null||l===void 0?void 0:l.config)===null||u===void 0?void 0:u.broadcast)===null||d===void 0)&&d.ack)&&o("ok"),f.receive("ok",()=>o("ok")),f.receive("error",()=>o("error")),f.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Vt.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(fi.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(a=>{i=new Wf(this,fi.leave,{},e),i.receive("ok",()=>{n(),a("ok")}).receive("timeout",()=>{n(),a("timed out")}).receive("error",()=>{a("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Vt.closed,this.bindings={}}async _fetchWithTimeout(e,n,i){const a=new AbortController,o=setTimeout(()=>a.abort(),i),l=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:a.signal}));return clearTimeout(o),l}_push(e,n,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new Wf(this,e,n,i);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>nA){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,i){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,i){var a,o;const l=e.toLocaleLowerCase(),{close:u,error:d,leave:f,join:g}=fi;if(i&&[u,d,f,g].indexOf(l)>=0&&i!==this._joinRef())return;let y=this._onMessage(l,n,i);if(n&&!y)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(b=>{var S,w,x;return((S=b.filter)===null||S===void 0?void 0:S.event)==="*"||((x=(w=b.filter)===null||w===void 0?void 0:w.event)===null||x===void 0?void 0:x.toLocaleLowerCase())===l}).map(b=>b.callback(y,i)):(o=this.bindings[l])===null||o===void 0||o.filter(b=>{var S,w,x,E,C,R;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in b){const M=b.id,D=(S=b.filter)===null||S===void 0?void 0:S.event;return M&&((w=n.ids)===null||w===void 0?void 0:w.includes(M))&&(D==="*"||D?.toLocaleLowerCase()===((x=n.data)===null||x===void 0?void 0:x.type.toLocaleLowerCase()))}else{const M=(C=(E=b?.filter)===null||E===void 0?void 0:E.event)===null||C===void 0?void 0:C.toLocaleLowerCase();return M==="*"||M===((R=n?.event)===null||R===void 0?void 0:R.toLocaleLowerCase())}else return b.type.toLocaleLowerCase()===l}).map(b=>{if(typeof y=="object"&&"ids"in y){const S=y.data,{schema:w,table:x,commit_timestamp:E,type:C,errors:R}=S;y=Object.assign(Object.assign({},{schema:w,table:x,commit_timestamp:E,eventType:C,new:{},old:{},errors:R}),this._getPayloadRecords(S))}b.callback(y,i)})}_isClosed(){return this.state===Vt.closed}_isJoined(){return this.state===Vt.joined}_isJoining(){return this.state===Vt.joining}_isLeaving(){return this.state===Vt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,i){const a=e.toLocaleLowerCase(),o={type:a,filter:n,callback:i};return this.bindings[a]?this.bindings[a].push(o):this.bindings[a]=[o],this}_off(e,n){const i=e.toLocaleLowerCase();return this.bindings[i]&&(this.bindings[i]=this.bindings[i].filter(a=>{var o;return!(((o=a.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===i&&gm.isEqual(a.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const i in e)if(e[i]!==n[i])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(fi.close,{},e)}_onError(e){this._on(fi.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Vt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=hb(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=hb(e.columns,e.old_record)),n}}const mb=()=>{},vu={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},uA=[1e3,2e3,5e3,1e4],dA=1e4,hA=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class fA{constructor(e,n){var i;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Ag,this.transport=null,this.heartbeatIntervalMs=vu.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=mb,this.ref=0,this.reconnectTimer=null,this.logger=mb,this.conn=null,this.sendBuffer=[],this.serializer=new iA,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>{let o;return a?o=a:typeof fetch>"u"?o=(...l)=>Pa(async()=>{const{default:u}=await Promise.resolve().then(()=>Zr);return{default:u}},void 0).then(({default:u})=>u(...l)).catch(u=>{throw new Error(`Failed to load @supabase/node-fetch: ${u.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):o=fetch,(...l)=>o(...l)},!(!((i=n?.params)===null||i===void 0)&&i.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${Og.websocket}`,this.httpEndpoint=JS(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=QR.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:eA}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const i=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(i),this._setConnectionState("disconnected")},e?this.conn.close(e,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,i){this.logger(e,n,i)}connectionState(){switch(this.conn&&this.conn.readyState){case yl.connecting:return ka.Connecting;case yl.open:return ka.Open;case yl.closing:return ka.Closing;default:return ka.Closed}}isConnected(){return this.connectionState()===ka.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const i=`realtime:${e}`,a=this.getChannels().find(o=>o.topic===i);if(a)return a;{const o=new gm(`realtime:${e}`,n,this);return this.channels.push(o),o}}push(e){const{topic:n,event:i,payload:a,ref:o}=e,l=()=>{this.encode(e,u=>{var d;(d=this.conn)===null||d===void 0||d.send(u)})};this.log("push",`${n} ${i} (${o})`,a),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(tA,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},vu.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(i=>i.topic===e&&(i._isJoined()||i._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{n.topic==="phoenix"&&n.event==="phx_reply"&&this.heartbeatCallback(n.payload.status==="ok"?"ok":"error"),n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:i,event:a,payload:o,ref:l}=n,u=l?`(${l})`:"",d=o.status||"";this.log("receive",`${d} ${i} ${a} ${u}`.trim(),o),this.channels.filter(f=>f._isMember(i)).forEach(f=>f._trigger(a,o,l)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(fi.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const i=e.match(/\?/)?"&":"?",a=new URLSearchParams(n);return`${e}${i}${a}`}_workerObjectUrl(e){let n;if(e)n=e;else{const i=new Blob([hA],{type:"application/javascript"});n=URL.createObjectURL(i)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n;e?n=e:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(i=>{const a={access_token:n,version:JR};n&&i.updateJoinPayload(a),i.joinedOnce&&i._isJoined()&&i._push(fi.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(i=>{try{i(n)}catch(a){this.log("error",`error in ${e} callback`,a)}})}catch(i){this.log("error",`error triggering ${e} callbacks`,i)}}_setupReconnectionTimer(){this.reconnectTimer=new QS(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},vu.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,i,a,o,l,u,d,f;if(this.transport=(n=e?.transport)!==null&&n!==void 0?n:null,this.timeout=(i=e?.timeout)!==null&&i!==void 0?i:Ag,this.heartbeatIntervalMs=(a=e?.heartbeatIntervalMs)!==null&&a!==void 0?a:vu.HEARTBEAT_INTERVAL,this.worker=(o=e?.worker)!==null&&o!==void 0?o:!1,this.accessToken=(l=e?.accessToken)!==null&&l!==void 0?l:null,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=e?.reconnectAfterMs)!==null&&u!==void 0?u:(g=>uA[g-1]||dA),this.encode=(d=e?.encode)!==null&&d!==void 0?d:((g,p)=>p(JSON.stringify(g))),this.decode=(f=e?.decode)!==null&&f!==void 0?f:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}}class mm extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Gt(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class gA extends mm{constructor(e,n,i){super(e),this.name="StorageApiError",this.status=n,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Mg extends mm{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var mA=function(t,e,n,i){function a(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(g){try{f(i.next(g))}catch(p){l(p)}}function d(g){try{f(i.throw(g))}catch(p){l(p)}}function f(g){g.done?o(g.value):a(g.value).then(u,d)}f((i=i.apply(t,e||[])).next())})};const ew=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Pa(async()=>{const{default:i}=await Promise.resolve().then(()=>Zr);return{default:i}},void 0).then(({default:i})=>i(...n)):e=fetch,(...n)=>e(...n)},pA=()=>mA(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Pa(()=>Promise.resolve().then(()=>Zr),void 0)).Response:Response}),kg=t=>{if(Array.isArray(t))return t.map(n=>kg(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,i])=>{const a=n.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[a]=kg(i)}),e},vA=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var Fa=function(t,e,n,i){function a(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(g){try{f(i.next(g))}catch(p){l(p)}}function d(g){try{f(i.throw(g))}catch(p){l(p)}}function f(g){g.done?o(g.value):a(g.value).then(u,d)}f((i=i.apply(t,e||[])).next())})};const Kf=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),yA=(t,e,n)=>Fa(void 0,void 0,void 0,function*(){const i=yield pA();t instanceof i&&!n?.noResolveJson?t.json().then(a=>{const o=t.status||500,l=a?.statusCode||o+"";e(new gA(Kf(a),o,l))}).catch(a=>{e(new Mg(Kf(a),a))}):e(new Mg(Kf(t),t))}),_A=(t,e,n,i)=>{const a={method:t,headers:e?.headers||{}};return t==="GET"||!i?a:(vA(i)?(a.headers=Object.assign({"Content-Type":"application/json"},e?.headers),a.body=JSON.stringify(i)):a.body=i,e?.duplex&&(a.duplex=e.duplex),Object.assign(Object.assign({},a),n))};function Kl(t,e,n,i,a,o){return Fa(this,void 0,void 0,function*(){return new Promise((l,u)=>{t(n,_A(e,i,a,o)).then(d=>{if(!d.ok)throw d;return i?.noResolveJson?d:d.json()}).then(d=>l(d)).catch(d=>yA(d,u,i))})})}function Ku(t,e,n,i){return Fa(this,void 0,void 0,function*(){return Kl(t,"GET",e,n,i)})}function ji(t,e,n,i,a){return Fa(this,void 0,void 0,function*(){return Kl(t,"POST",e,i,a,n)})}function Ng(t,e,n,i,a){return Fa(this,void 0,void 0,function*(){return Kl(t,"PUT",e,i,a,n)})}function bA(t,e,n,i){return Fa(this,void 0,void 0,function*(){return Kl(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),i)})}function tw(t,e,n,i,a){return Fa(this,void 0,void 0,function*(){return Kl(t,"DELETE",e,i,a,n)})}var Sn=function(t,e,n,i){function a(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(g){try{f(i.next(g))}catch(p){l(p)}}function d(g){try{f(i.throw(g))}catch(p){l(p)}}function f(g){g.done?o(g.value):a(g.value).then(u,d)}f((i=i.apply(t,e||[])).next())})};const SA={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},pb={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class wA{constructor(e,n={},i,a){this.url=e,this.headers=n,this.bucketId=i,this.fetch=ew(a)}uploadOrUpdate(e,n,i,a){return Sn(this,void 0,void 0,function*(){try{let o;const l=Object.assign(Object.assign({},pb),a);let u=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(l.upsert)});const d=l.metadata;typeof Blob<"u"&&i instanceof Blob?(o=new FormData,o.append("cacheControl",l.cacheControl),d&&o.append("metadata",this.encodeMetadata(d)),o.append("",i)):typeof FormData<"u"&&i instanceof FormData?(o=i,o.append("cacheControl",l.cacheControl),d&&o.append("metadata",this.encodeMetadata(d))):(o=i,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType,d&&(u["x-metadata"]=this.toBase64(this.encodeMetadata(d)))),a?.headers&&(u=Object.assign(Object.assign({},u),a.headers));const f=this._removeEmptyFolders(n),g=this._getFinalPath(f),p=yield(e=="PUT"?Ng:ji)(this.fetch,`${this.url}/object/${g}`,o,Object.assign({headers:u},l?.duplex?{duplex:l.duplex}:{}));return{data:{path:f,id:p.Id,fullPath:p.Key},error:null}}catch(o){if(Gt(o))return{data:null,error:o};throw o}})}upload(e,n,i){return Sn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,i)})}uploadToSignedUrl(e,n,i,a){return Sn(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(e),l=this._getFinalPath(o),u=new URL(this.url+`/object/upload/sign/${l}`);u.searchParams.set("token",n);try{let d;const f=Object.assign({upsert:pb.upsert},a),g=Object.assign(Object.assign({},this.headers),{"x-upsert":String(f.upsert)});typeof Blob<"u"&&i instanceof Blob?(d=new FormData,d.append("cacheControl",f.cacheControl),d.append("",i)):typeof FormData<"u"&&i instanceof FormData?(d=i,d.append("cacheControl",f.cacheControl)):(d=i,g["cache-control"]=`max-age=${f.cacheControl}`,g["content-type"]=f.contentType);const p=yield Ng(this.fetch,u.toString(),d,{headers:g});return{data:{path:o,fullPath:p.Key},error:null}}catch(d){if(Gt(d))return{data:null,error:d};throw d}})}createSignedUploadUrl(e,n){return Sn(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e);const a=Object.assign({},this.headers);n?.upsert&&(a["x-upsert"]="true");const o=yield ji(this.fetch,`${this.url}/object/upload/sign/${i}`,{},{headers:a}),l=new URL(this.url+o.url),u=l.searchParams.get("token");if(!u)throw new mm("No token returned by API");return{data:{signedUrl:l.toString(),path:e,token:u},error:null}}catch(i){if(Gt(i))return{data:null,error:i};throw i}})}update(e,n,i){return Sn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,i)})}move(e,n,i){return Sn(this,void 0,void 0,function*(){try{return{data:yield ji(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:i?.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(Gt(a))return{data:null,error:a};throw a}})}copy(e,n,i){return Sn(this,void 0,void 0,function*(){try{return{data:{path:(yield ji(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:i?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(Gt(a))return{data:null,error:a};throw a}})}createSignedUrl(e,n,i){return Sn(this,void 0,void 0,function*(){try{let a=this._getFinalPath(e),o=yield ji(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:n},i?.transform?{transform:i.transform}:{}),{headers:this.headers});const l=i?.download?`&download=${i.download===!0?"":i.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${l}`)},{data:o,error:null}}catch(a){if(Gt(a))return{data:null,error:a};throw a}})}createSignedUrls(e,n,i){return Sn(this,void 0,void 0,function*(){try{const a=yield ji(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),o=i?.download?`&download=${i.download===!0?"":i.download}`:"";return{data:a.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${o}`):null})),error:null}}catch(a){if(Gt(a))return{data:null,error:a};throw a}})}download(e,n){return Sn(this,void 0,void 0,function*(){const a=typeof n?.transform<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString(n?.transform||{}),l=o?`?${o}`:"";try{const u=this._getFinalPath(e);return{data:yield(yield Ku(this.fetch,`${this.url}/${a}/${u}${l}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(u){if(Gt(u))return{data:null,error:u};throw u}})}info(e){return Sn(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const i=yield Ku(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:kg(i),error:null}}catch(i){if(Gt(i))return{data:null,error:i};throw i}})}exists(e){return Sn(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield bA(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(i){if(Gt(i)&&i instanceof Mg){const a=i.originalError;if([400,404].includes(a?.status))return{data:!1,error:i}}throw i}})}getPublicUrl(e,n){const i=this._getFinalPath(e),a=[],o=n?.download?`download=${n.download===!0?"":n.download}`:"";o!==""&&a.push(o);const u=typeof n?.transform<"u"?"render/image":"object",d=this.transformOptsToQueryString(n?.transform||{});d!==""&&a.push(d);let f=a.join("&");return f!==""&&(f=`?${f}`),{data:{publicUrl:encodeURI(`${this.url}/${u}/public/${i}${f}`)}}}remove(e){return Sn(this,void 0,void 0,function*(){try{return{data:yield tw(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(Gt(n))return{data:null,error:n};throw n}})}list(e,n,i){return Sn(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},SA),n),{prefix:e||""});return{data:yield ji(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},i),error:null}}catch(a){if(Gt(a))return{data:null,error:a};throw a}})}listV2(e,n){return Sn(this,void 0,void 0,function*(){try{const i=Object.assign({},e);return{data:yield ji(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,i,{headers:this.headers},n),error:null}}catch(i){if(Gt(i))return{data:null,error:i};throw i}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const xA="2.11.0",EA={"X-Client-Info":`storage-js/${xA}`};var Mr=function(t,e,n,i){function a(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(g){try{f(i.next(g))}catch(p){l(p)}}function d(g){try{f(i.throw(g))}catch(p){l(p)}}function f(g){g.done?o(g.value):a(g.value).then(u,d)}f((i=i.apply(t,e||[])).next())})};class TA{constructor(e,n={},i,a){const o=new URL(e);a?.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href,this.headers=Object.assign(Object.assign({},EA),n),this.fetch=ew(i)}listBuckets(){return Mr(this,void 0,void 0,function*(){try{return{data:yield Ku(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Gt(e))return{data:null,error:e};throw e}})}getBucket(e){return Mr(this,void 0,void 0,function*(){try{return{data:yield Ku(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(Gt(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return Mr(this,void 0,void 0,function*(){try{return{data:yield ji(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(Gt(i))return{data:null,error:i};throw i}})}updateBucket(e,n){return Mr(this,void 0,void 0,function*(){try{return{data:yield Ng(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(Gt(i))return{data:null,error:i};throw i}})}emptyBucket(e){return Mr(this,void 0,void 0,function*(){try{return{data:yield ji(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(Gt(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Mr(this,void 0,void 0,function*(){try{return{data:yield tw(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(Gt(n))return{data:null,error:n};throw n}})}}class CA extends TA{constructor(e,n={},i,a){super(e,n,i,a)}from(e){return new wA(this.url,this.headers,e,this.fetch)}}const RA="2.55.0";let gl="";typeof Deno<"u"?gl="deno":typeof document<"u"?gl="web":typeof navigator<"u"&&navigator.product==="ReactNative"?gl="react-native":gl="node";const AA={"X-Client-Info":`supabase-js-${gl}/${RA}`},OA={headers:AA},DA={schema:"public"},MA={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},kA={};var NA=function(t,e,n,i){function a(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(g){try{f(i.next(g))}catch(p){l(p)}}function d(g){try{f(i.throw(g))}catch(p){l(p)}}function f(g){g.done?o(g.value):a(g.value).then(u,d)}f((i=i.apply(t,e||[])).next())})};const jA=t=>{let e;return t?e=t:typeof fetch>"u"?e=GS:e=fetch,(...n)=>e(...n)},LA=()=>typeof Headers>"u"?qS:Headers,IA=(t,e,n)=>{const i=jA(n),a=LA();return(o,l)=>NA(void 0,void 0,void 0,function*(){var u;const d=(u=yield e())!==null&&u!==void 0?u:t;let f=new a(l?.headers);return f.has("apikey")||f.set("apikey",t),f.has("Authorization")||f.set("Authorization",`Bearer ${d}`),i(o,Object.assign(Object.assign({},l),{headers:f}))})};var UA=function(t,e,n,i){function a(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(g){try{f(i.next(g))}catch(p){l(p)}}function d(g){try{f(i.throw(g))}catch(p){l(p)}}function f(g){g.done?o(g.value):a(g.value).then(u,d)}f((i=i.apply(t,e||[])).next())})};function PA(t){return t.endsWith("/")?t:t+"/"}function FA(t,e){var n,i;const{db:a,auth:o,realtime:l,global:u}=t,{db:d,auth:f,realtime:g,global:p}=e,y={db:Object.assign(Object.assign({},d),a),auth:Object.assign(Object.assign({},f),o),realtime:Object.assign(Object.assign({},g),l),storage:{},global:Object.assign(Object.assign(Object.assign({},p),u),{headers:Object.assign(Object.assign({},(n=p?.headers)!==null&&n!==void 0?n:{}),(i=u?.headers)!==null&&i!==void 0?i:{})}),accessToken:()=>UA(this,void 0,void 0,function*(){return""})};return t.accessToken?y.accessToken=t.accessToken:delete y.accessToken,y}const nw="2.71.1",Fr=30*1e3,jg=3,Xf=jg*Fr,zA="http://localhost:9999",BA="supabase.auth.token",HA={"X-Client-Info":`gotrue-js/${nw}`},Lg="X-Supabase-Api-Version",iw={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},$A=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,VA=600*1e3;class pm extends Error{constructor(e,n,i){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=i}}function Le(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class GA extends pm{constructor(e,n,i){super(e,n,i),this.name="AuthApiError",this.status=n,this.code=i}}function qA(t){return Le(t)&&t.name==="AuthApiError"}class sw extends pm{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class ia extends pm{constructor(e,n,i,a){super(e,i,a),this.name=n,this.status=i}}class qs extends ia{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function YA(t){return Le(t)&&t.name==="AuthSessionMissingError"}class yu extends ia{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class _u extends ia{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class bu extends ia{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function WA(t){return Le(t)&&t.name==="AuthImplicitGrantRedirectError"}class vb extends ia{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ig extends ia{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function Qf(t){return Le(t)&&t.name==="AuthRetryableFetchError"}class yb extends ia{constructor(e,n,i){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=i}}class Ug extends ia{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Xu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),_b=` 	
\r=`.split(""),KA=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<_b.length;e+=1)t[_b[e].charCodeAt(0)]=-2;for(let e=0;e<Xu.length;e+=1)t[Xu[e].charCodeAt(0)]=e;return t})();function bb(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const i=e.queue>>e.queuedBits-6&63;n(Xu[i]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const i=e.queue>>e.queuedBits-6&63;n(Xu[i]),e.queuedBits-=6}}function aw(t,e,n){const i=KA[t];if(i>-1)for(e.queue=e.queue<<6|i,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Sb(t){const e=[],n=l=>{e.push(String.fromCodePoint(l))},i={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},o=l=>{ZA(l,i,n)};for(let l=0;l<t.length;l+=1)aw(t.charCodeAt(l),a,o);return e.join("")}function XA(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function QA(t,e){for(let n=0;n<t.length;n+=1){let i=t.charCodeAt(n);if(i>55295&&i<=56319){const a=(i-55296)*1024&65535;i=(t.charCodeAt(n+1)-56320&65535|a)+65536,n+=1}XA(i,e)}}function ZA(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let i=1;i<6;i+=1)if((t>>7-i&1)===0){e.utf8seq=i;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function JA(t){const e=[],n={queue:0,queuedBits:0},i=a=>{e.push(a)};for(let a=0;a<t.length;a+=1)aw(t.charCodeAt(a),n,i);return new Uint8Array(e)}function eO(t){const e=[];return QA(t,n=>e.push(n)),new Uint8Array(e)}function tO(t){const e=[],n={queue:0,queuedBits:0},i=a=>{e.push(a)};return t.forEach(a=>bb(a,n,i)),bb(null,n,i),e.join("")}function nO(t){return Math.round(Date.now()/1e3)+t}function iO(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const hi=()=>typeof window<"u"&&typeof document<"u",Ea={tested:!1,writable:!1},rw=()=>{if(!hi())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ea.tested)return Ea.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Ea.tested=!0,Ea.writable=!0}catch{Ea.tested=!0,Ea.writable=!1}return Ea.writable};function sO(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((a,o)=>{e[o]=a})}catch{}return n.searchParams.forEach((i,a)=>{e[a]=i}),e}const ow=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Pa(async()=>{const{default:i}=await Promise.resolve().then(()=>Zr);return{default:i}},void 0).then(({default:i})=>i(...n)):e=fetch,(...n)=>e(...n)},aO=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",zr=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},Ta=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Gs=async(t,e)=>{await t.removeItem(e)};class yd{constructor(){this.promise=new yd.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}yd.promiseConstructor=Promise;function Zf(t){const e=t.split(".");if(e.length!==3)throw new Ug("Invalid JWT structure");for(let i=0;i<e.length;i++)if(!$A.test(e[i]))throw new Ug("JWT not in base64url format");return{header:JSON.parse(Sb(e[0])),payload:JSON.parse(Sb(e[1])),signature:JA(e[2]),raw:{header:e[0],payload:e[1]}}}async function rO(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function oO(t,e){return new Promise((i,a)=>{(async()=>{for(let o=0;o<1/0;o++)try{const l=await t(o);if(!e(o,null,l)){i(l);return}}catch(l){if(!e(o,l)){a(l);return}}})()})}function lO(t){return("0"+t.toString(16)).substr(-2)}function cO(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=n.length;let a="";for(let o=0;o<56;o++)a+=n.charAt(Math.floor(Math.random()*i));return a}return crypto.getRandomValues(e),Array.from(e,lO).join("")}async function uO(t){const n=new TextEncoder().encode(t),i=await crypto.subtle.digest("SHA-256",n),a=new Uint8Array(i);return Array.from(a).map(o=>String.fromCharCode(o)).join("")}async function dO(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await uO(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function kr(t,e,n=!1){const i=cO();let a=i;n&&(a+="/PASSWORD_RECOVERY"),await zr(t,`${e}-code-verifier`,a);const o=await dO(i);return[o,i===o?"plain":"s256"]}const hO=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function fO(t){const e=t.headers.get(Lg);if(!e||!e.match(hO))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function gO(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function mO(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const pO=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Nr(t){if(!pO.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Jf(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function wb(t){return JSON.parse(JSON.stringify(t))}var vO=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(t);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(t,i[a])&&(n[i[a]]=t[i[a]]);return n};const Oa=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),yO=[502,503,504];async function xb(t){var e;if(!aO(t))throw new Ig(Oa(t),0);if(yO.includes(t.status))throw new Ig(Oa(t),t.status);let n;try{n=await t.json()}catch(o){throw new sw(Oa(o),o)}let i;const a=fO(t);if(a&&a.getTime()>=iw["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?i=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(i=n.error_code),i){if(i==="weak_password")throw new yb(Oa(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(i==="session_not_found")throw new qs}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((o,l)=>o&&typeof l=="string",!0))throw new yb(Oa(n),t.status,n.weak_password.reasons);throw new GA(Oa(n),t.status||500,i)}const _O=(t,e,n,i)=>{const a={method:t,headers:e?.headers||{}};return t==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),a.body=JSON.stringify(i),Object.assign(Object.assign({},a),n))};async function He(t,e,n,i){var a;const o=Object.assign({},i?.headers);o[Lg]||(o[Lg]=iw["2024-01-01"].name),i?.jwt&&(o.Authorization=`Bearer ${i.jwt}`);const l=(a=i?.query)!==null&&a!==void 0?a:{};i?.redirectTo&&(l.redirect_to=i.redirectTo);const u=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",d=await bO(t,e,n+u,{headers:o,noResolveJson:i?.noResolveJson},{},i?.body);return i?.xform?i?.xform(d):{data:Object.assign({},d),error:null}}async function bO(t,e,n,i,a,o){const l=_O(e,i,a,o);let u;try{u=await t(n,Object.assign({},l))}catch(d){throw console.error(d),new Ig(Oa(d),0)}if(u.ok||await xb(u),i?.noResolveJson)return u;try{return await u.json()}catch(d){await xb(d)}}function ls(t){var e;let n=null;EO(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=nO(t.expires_in)));const i=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:i},error:null}}function Eb(t){const e=ls(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,i)=>n&&typeof i=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Ws(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function SO(t){return{data:t,error:null}}function wO(t){const{action_link:e,email_otp:n,hashed_token:i,redirect_to:a,verification_type:o}=t,l=vO(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),u={action_link:e,email_otp:n,hashed_token:i,redirect_to:a,verification_type:o},d=Object.assign({},l);return{data:{properties:u,user:d},error:null}}function xO(t){return t}function EO(t){return t.access_token&&t.refresh_token&&t.expires_in}const eg=["global","local","others"];var TO=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(t);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(t,i[a])&&(n[i[a]]=t[i[a]]);return n};class CO{constructor({url:e="",headers:n={},fetch:i}){this.url=e,this.headers=n,this.fetch=ow(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n=eg[0]){if(eg.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${eg.join(", ")}`);try{return await He(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(i){if(Le(i))return{data:null,error:i};throw i}}async inviteUserByEmail(e,n={}){try{return await He(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Ws})}catch(i){if(Le(i))return{data:{user:null},error:i};throw i}}async generateLink(e){try{const{options:n}=e,i=TO(e,["options"]),a=Object.assign(Object.assign({},i),n);return"newEmail"in i&&(a.new_email=i?.newEmail,delete a.newEmail),await He(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:wO,redirectTo:n?.redirectTo})}catch(n){if(Le(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await He(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Ws})}catch(n){if(Le(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,i,a,o,l,u,d;try{const f={nextPage:null,lastPage:0,total:0},g=await He(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(n=e?.page)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:"",per_page:(o=(a=e?.perPage)===null||a===void 0?void 0:a.toString())!==null&&o!==void 0?o:""},xform:xO});if(g.error)throw g.error;const p=await g.json(),y=(l=g.headers.get("x-total-count"))!==null&&l!==void 0?l:0,b=(d=(u=g.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&d!==void 0?d:[];return b.length>0&&(b.forEach(S=>{const w=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(S.split(";")[1].split("=")[1]);f[`${x}Page`]=w}),f.total=parseInt(y)),{data:Object.assign(Object.assign({},p),f),error:null}}catch(f){if(Le(f))return{data:{users:[]},error:f};throw f}}async getUserById(e){Nr(e);try{return await He(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Ws})}catch(n){if(Le(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Nr(e);try{return await He(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Ws})}catch(i){if(Le(i))return{data:{user:null},error:i};throw i}}async deleteUser(e,n=!1){Nr(e);try{return await He(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Ws})}catch(i){if(Le(i))return{data:{user:null},error:i};throw i}}async _listFactors(e){Nr(e.userId);try{const{data:n,error:i}=await He(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:n,error:i}}catch(n){if(Le(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Nr(e.userId),Nr(e.id);try{return{data:await He(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(Le(n))return{data:null,error:n};throw n}}}function Tb(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function RO(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const jr={debug:!!(globalThis&&rw()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class lw extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class AO extends lw{}async function OO(t,e,n){jr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const i=new globalThis.AbortController;return e>0&&setTimeout(()=>{i.abort(),jr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async a=>{if(a){jr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,a.name);try{return await n()}finally{jr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,a.name)}}else{if(e===0)throw jr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new AO(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(jr.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}RO();const DO={url:zA,storageKey:BA,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:HA,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Cb(t,e,n){return await n()}const Lr={};class jl{constructor(e){var n,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=jl.nextInstanceID,jl.nextInstanceID+=1,this.instanceID>0&&hi()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},DO),e);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new CO({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=ow(a.fetch),this.lock=a.lock||Cb,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:hi()&&(!((n=globalThis?.navigator)===null||n===void 0)&&n.locks)?this.lock=OO:this.lock=Cb,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:rw()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Tb(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=Tb(this.memoryStorage)),hi()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}get jwks(){var e,n;return(n=(e=Lr[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){Lr[this.storageKey]=Object.assign(Object.assign({},Lr[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=Lr[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Lr[this.storageKey]=Object.assign(Object.assign({},Lr[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${nw}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=sO(window.location.href);let i="none";if(this._isImplicitGrantCallback(n)?i="implicit":await this._isPKCECallback(n)&&(i="pkce"),hi()&&this.detectSessionInUrl&&i!=="none"){const{data:a,error:o}=await this._getSessionFromURL(n,i);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),WA(o)){const d=(e=o.details)===null||e===void 0?void 0:e.code;if(d==="identity_already_exists"||d==="identity_not_found"||d==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:l,redirectType:u}=a;return this._debug("#_initialize()","detected session in URL",l,"redirect type",u),await this._saveSession(l),setTimeout(async()=>{u==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Le(n)?{error:n}:{error:new sw("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,i,a;try{const o=await He(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(n=e?.options)===null||n===void 0?void 0:n.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(a=e?.options)===null||a===void 0?void 0:a.captchaToken}},xform:ls}),{data:l,error:u}=o;if(u||!l)return{data:{user:null,session:null},error:u};const d=l.session,f=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:f,session:d},error:null}}catch(o){if(Le(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(e){var n,i,a;try{let o;if("email"in e){const{email:g,password:p,options:y}=e;let b=null,S=null;this.flowType==="pkce"&&([b,S]=await kr(this.storage,this.storageKey)),o=await He(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:y?.emailRedirectTo,body:{email:g,password:p,data:(n=y?.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:y?.captchaToken},code_challenge:b,code_challenge_method:S},xform:ls})}else if("phone"in e){const{phone:g,password:p,options:y}=e;o=await He(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:g,password:p,data:(i=y?.data)!==null&&i!==void 0?i:{},channel:(a=y?.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:y?.captchaToken}},xform:ls})}else throw new _u("You must provide either an email or phone number and a password");const{data:l,error:u}=o;if(u||!l)return{data:{user:null,session:null},error:u};const d=l.session,f=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:f,session:d},error:null}}catch(o){if(Le(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(e){try{let n;if("email"in e){const{email:o,password:l,options:u}=e;n=await He(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:l,gotrue_meta_security:{captcha_token:u?.captchaToken}},xform:Eb})}else if("phone"in e){const{phone:o,password:l,options:u}=e;n=await He(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:l,gotrue_meta_security:{captcha_token:u?.captchaToken}},xform:Eb})}else throw new _u("You must provide either an email or phone number and a password");const{data:i,error:a}=n;return a?{data:{user:null,session:null},error:a}:!i||!i.session||!i.user?{data:{user:null,session:null},error:new yu}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:a})}catch(n){if(Le(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,i,a,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(i=e.options)===null||i===void 0?void 0:i.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;if(n==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(e){var n,i,a,o,l,u,d,f,g,p,y,b;let S,w;if("message"in e)S=e.message,w=e.signature;else{const{chain:x,wallet:E,statement:C,options:R}=e;let M;if(hi())if(typeof E=="object")M=E;else{const I=window;if("solana"in I&&typeof I.solana=="object"&&("signIn"in I.solana&&typeof I.solana.signIn=="function"||"signMessage"in I.solana&&typeof I.solana.signMessage=="function"))M=I.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof E!="object"||!R?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");M=E}const D=new URL((n=R?.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in M&&M.signIn){const I=await M.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},R?.signInWithSolana),{version:"1",domain:D.host,uri:D.href}),C?{statement:C}:null));let L;if(Array.isArray(I)&&I[0]&&typeof I[0]=="object")L=I[0];else if(I&&typeof I=="object"&&"signedMessage"in I&&"signature"in I)L=I;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in L&&"signature"in L&&(typeof L.signedMessage=="string"||L.signedMessage instanceof Uint8Array)&&L.signature instanceof Uint8Array)S=typeof L.signedMessage=="string"?L.signedMessage:new TextDecoder().decode(L.signedMessage),w=L.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in M)||typeof M.signMessage!="function"||!("publicKey"in M)||typeof M!="object"||!M.publicKey||!("toBase58"in M.publicKey)||typeof M.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");S=[`${D.host} wants you to sign in with your Solana account:`,M.publicKey.toBase58(),...C?["",C,""]:[""],"Version: 1",`URI: ${D.href}`,`Issued At: ${(a=(i=R?.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((o=R?.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${R.signInWithSolana.notBefore}`]:[],...!((l=R?.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${R.signInWithSolana.expirationTime}`]:[],...!((u=R?.signInWithSolana)===null||u===void 0)&&u.chainId?[`Chain ID: ${R.signInWithSolana.chainId}`]:[],...!((d=R?.signInWithSolana)===null||d===void 0)&&d.nonce?[`Nonce: ${R.signInWithSolana.nonce}`]:[],...!((f=R?.signInWithSolana)===null||f===void 0)&&f.requestId?[`Request ID: ${R.signInWithSolana.requestId}`]:[],...!((p=(g=R?.signInWithSolana)===null||g===void 0?void 0:g.resources)===null||p===void 0)&&p.length?["Resources",...R.signInWithSolana.resources.map(L=>`- ${L}`)]:[]].join(`
`);const I=await M.signMessage(new TextEncoder().encode(S),"utf8");if(!I||!(I instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");w=I}}try{const{data:x,error:E}=await He(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:S,signature:tO(w)},!((y=e.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(b=e.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:ls});if(E)throw E;return!x||!x.session||!x.user?{data:{user:null,session:null},error:new yu}:(x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),{data:Object.assign({},x),error:E})}catch(x){if(Le(x))return{data:{user:null,session:null},error:x};throw x}}async _exchangeCodeForSession(e){const n=await Ta(this.storage,`${this.storageKey}-code-verifier`),[i,a]=(n??"").split("/");try{const{data:o,error:l}=await He(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:i},xform:ls});if(await Gs(this.storage,`${this.storageKey}-code-verifier`),l)throw l;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new yu}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:a??null}),error:l})}catch(o){if(Le(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(e){try{const{options:n,provider:i,token:a,access_token:o,nonce:l}=e,u=await He(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:a,access_token:o,nonce:l,gotrue_meta_security:{captcha_token:n?.captchaToken}},xform:ls}),{data:d,error:f}=u;return f?{data:{user:null,session:null},error:f}:!d||!d.session||!d.user?{data:{user:null,session:null},error:new yu}:(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),{data:d,error:f})}catch(n){if(Le(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,i,a,o,l;try{if("email"in e){const{email:u,options:d}=e;let f=null,g=null;this.flowType==="pkce"&&([f,g]=await kr(this.storage,this.storageKey));const{error:p}=await He(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:u,data:(n=d?.data)!==null&&n!==void 0?n:{},create_user:(i=d?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:d?.captchaToken},code_challenge:f,code_challenge_method:g},redirectTo:d?.emailRedirectTo});return{data:{user:null,session:null},error:p}}if("phone"in e){const{phone:u,options:d}=e,{data:f,error:g}=await He(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:u,data:(a=d?.data)!==null&&a!==void 0?a:{},create_user:(o=d?.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:d?.captchaToken},channel:(l=d?.channel)!==null&&l!==void 0?l:"sms"}});return{data:{user:null,session:null,messageId:f?.message_id},error:g}}throw new _u("You must provide either an email or phone number.")}catch(u){if(Le(u))return{data:{user:null,session:null},error:u};throw u}}async verifyOtp(e){var n,i;try{let a,o;"options"in e&&(a=(n=e.options)===null||n===void 0?void 0:n.redirectTo,o=(i=e.options)===null||i===void 0?void 0:i.captchaToken);const{data:l,error:u}=await He(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:a,xform:ls});if(u)throw u;if(!l)throw new Error("An error occurred on token verification.");const d=l.session,f=l.user;return d?.access_token&&(await this._saveSession(d),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",d)),{data:{user:f,session:d},error:null}}catch(a){if(Le(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(e){var n,i,a;try{let o=null,l=null;return this.flowType==="pkce"&&([o,l]=await kr(this.storage,this.storageKey)),await He(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(i=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&i!==void 0?i:void 0}),!((a=e?.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:l}),headers:this.headers,xform:SO})}catch(o){if(Le(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:i}=e;if(i)throw i;if(!n)throw new qs;const{error:a}=await He(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:a}})}catch(e){if(Le(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:i,type:a,options:o}=e,{error:l}=await He(this.fetch,"POST",n,{headers:this.headers,body:{email:i,type:a,gotrue_meta_security:{captcha_token:o?.captchaToken}},redirectTo:o?.emailRedirectTo});return{data:{user:null,session:null},error:l}}else if("phone"in e){const{phone:i,type:a,options:o}=e,{data:l,error:u}=await He(this.fetch,"POST",n,{headers:this.headers,body:{phone:i,type:a,gotrue_meta_security:{captcha_token:o?.captchaToken}}});return{data:{user:null,session:null,messageId:l?.message_id},error:u}}throw new _u("You must provide either an email or phone number and a type")}catch(n){if(Le(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await i,await n()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=n();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Ta(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const i=e.expires_at?e.expires_at*1e3-Date.now()<Xf:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",e.expires_at),!i){if(this.userStorage){const l=await Ta(this.userStorage,this.storageKey+"-user");l?.user?e.user=l.user:e.user=Jf()}if(this.storage.isServer&&e.user){let l=this.suppressGetSessionWarning;e=new Proxy(e,{get:(d,f,g)=>(!l&&f==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),l=!0,this.suppressGetSessionWarning=!0),Reflect.get(d,f,g))})}return{data:{session:e},error:null}}const{session:a,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{session:null},error:o}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await He(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Ws}):await this._useSession(async n=>{var i,a,o;const{data:l,error:u}=n;if(u)throw u;return!(!((i=l.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new qs}:await He(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(a=l.session)===null||a===void 0?void 0:a.access_token)!==null&&o!==void 0?o:void 0,xform:Ws})})}catch(n){if(Le(n))return YA(n)&&(await this._removeSession(),await Gs(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async i=>{const{data:a,error:o}=i;if(o)throw o;if(!a.session)throw new qs;const l=a.session;let u=null,d=null;this.flowType==="pkce"&&e.email!=null&&([u,d]=await kr(this.storage,this.storageKey));const{data:f,error:g}=await He(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:u,code_challenge_method:d}),jwt:l.access_token,xform:Ws});if(g)throw g;return l.user=f.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}})}catch(i){if(Le(i))return{data:{user:null},error:i};throw i}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new qs;const n=Date.now()/1e3;let i=n,a=!0,o=null;const{payload:l}=Zf(e.access_token);if(l.exp&&(i=l.exp,a=i<=n),a){const{session:u,error:d}=await this._callRefreshToken(e.refresh_token);if(d)return{data:{user:null,session:null},error:d};if(!u)return{data:{user:null,session:null},error:null};o=u}else{const{data:u,error:d}=await this._getUser(e.access_token);if(d)throw d;o={access_token:e.access_token,refresh_token:e.refresh_token,user:u.user,token_type:"bearer",expires_in:i-n,expires_at:i},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(n){if(Le(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var i;if(!e){const{data:l,error:u}=n;if(u)throw u;e=(i=l.session)!==null&&i!==void 0?i:void 0}if(!e?.refresh_token)throw new qs;const{session:a,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{user:null,session:null},error:o}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(Le(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!hi())throw new bu("No browser detected.");if(e.error||e.error_description||e.error_code)throw new bu(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new vb("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new bu("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new vb("No code detected.");const{data:C,error:R}=await this._exchangeCodeForSession(e.code);if(R)throw R;const M=new URL(window.location.href);return M.searchParams.delete("code"),window.history.replaceState(window.history.state,"",M.toString()),{data:{session:C.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:a,access_token:o,refresh_token:l,expires_in:u,expires_at:d,token_type:f}=e;if(!o||!u||!l||!f)throw new bu("No session defined in URL");const g=Math.round(Date.now()/1e3),p=parseInt(u);let y=g+p;d&&(y=parseInt(d));const b=y-g;b*1e3<=Fr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${b}s, should have been closer to ${p}s`);const S=y-p;g-S>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",S,y,g):g-S<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",S,y,g);const{data:w,error:x}=await this._getUser(o);if(x)throw x;const E={provider_token:i,provider_refresh_token:a,access_token:o,expires_in:p,expires_at:y,refresh_token:l,token_type:f,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:E,redirectType:e.type},error:null}}catch(i){if(Le(i))return{data:{session:null,redirectType:null},error:i};throw i}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Ta(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var i;const{data:a,error:o}=n;if(o)return{error:o};const l=(i=a.session)===null||i===void 0?void 0:i.access_token;if(l){const{error:u}=await this.admin.signOut(l,e);if(u&&!(qA(u)&&(u.status===404||u.status===401||u.status===403)))return{error:u}}return e!=="others"&&(await this._removeSession(),await Gs(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=iO(),i={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,i),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:i}}}async _emitInitialSession(e){return await this._useSession(async n=>{var i,a;try{const{data:{session:o},error:l}=n;if(l)throw l;await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,n={}){let i=null,a=null;this.flowType==="pkce"&&([i,a]=await kr(this.storage,this.storageKey,!0));try{return await He(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:i,code_challenge_method:a,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(o){if(Le(o))return{data:null,error:o};throw o}}async getUserIdentities(){var e;try{const{data:n,error:i}=await this.getUser();if(i)throw i;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(Le(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:i,error:a}=await this._useSession(async o=>{var l,u,d,f,g;const{data:p,error:y}=o;if(y)throw y;const b=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(l=e.options)===null||l===void 0?void 0:l.redirectTo,scopes:(u=e.options)===null||u===void 0?void 0:u.scopes,queryParams:(d=e.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:!0});return await He(this.fetch,"GET",b,{headers:this.headers,jwt:(g=(f=p.session)===null||f===void 0?void 0:f.access_token)!==null&&g!==void 0?g:void 0})});if(a)throw a;return hi()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(i?.url),{data:{provider:e.provider,url:i?.url},error:null}}catch(i){if(Le(i))return{data:{provider:e.provider,url:null},error:i};throw i}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var i,a;const{data:o,error:l}=n;if(l)throw l;return await He(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(a=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&a!==void 0?a:void 0})})}catch(n){if(Le(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const i=Date.now();return await oO(async a=>(a>0&&await rO(200*Math.pow(2,a-1)),this._debug(n,"refreshing attempt",a),await He(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ls})),(a,o)=>{const l=200*Math.pow(2,a);return o&&Qf(o)&&Date.now()+l-i<Fr})}catch(i){if(this._debug(n,"error",i),Le(i))return{data:{session:null,user:null},error:i};throw i}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const i=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",i),hi()&&!n.skipBrowserRedirect&&window.location.assign(i),{data:{provider:e,url:i},error:null}}async _recoverAndRefresh(){var e,n;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const a=await Ta(this.storage,this.storageKey);if(a&&this.userStorage){let l=await Ta(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:a.user},await zr(this.userStorage,this.storageKey+"-user",l)),a.user=(e=l?.user)!==null&&e!==void 0?e:Jf()}else if(a&&!a.user&&!a.user){const l=await Ta(this.storage,this.storageKey+"-user");l&&l?.user?(a.user=l.user,await Gs(this.storage,this.storageKey+"-user"),await zr(this.storage,this.storageKey,a)):a.user=Jf()}if(this._debug(i,"session from storage",a),!this._isValidSession(a)){this._debug(i,"session is not valid"),a!==null&&await this._removeSession();return}const o=((n=a.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Xf;if(this._debug(i,`session has${o?"":" not"} expired with margin of ${Xf}s`),o){if(this.autoRefreshToken&&a.refresh_token){const{error:l}=await this._callRefreshToken(a.refresh_token);l&&(console.error(l),Qf(l)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:u}=await this._getUser(a.access_token);!u&&l?.user?(a.user=l.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(i,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(i,"error",a),console.error(a);return}finally{this._debug(i,"end")}}async _callRefreshToken(e){var n,i;if(!e)throw new qs;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new yd;const{data:o,error:l}=await this._refreshAccessToken(e);if(l)throw l;if(!o.session)throw new qs;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const u={session:o.session,error:null};return this.refreshingDeferred.resolve(u),u}catch(o){if(this._debug(a,"error",o),Le(o)){const l={session:null,error:o};return Qf(o)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(l),l}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(o),o}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(e,n,i=!0){const a=`#_notifyAllSubscribers(${e})`;this._debug(a,"begin",n,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:e,session:n});const o=[],l=Array.from(this.stateChangeEmitters.values()).map(async u=>{try{await u.callback(e,n)}catch(d){o.push(d)}});if(await Promise.all(l),o.length>0){for(let u=0;u<o.length;u+=1)console.error(o[u]);throw o[0]}}finally{this._debug(a,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const n=Object.assign({},e),i=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&n.user&&await zr(this.userStorage,this.storageKey+"-user",{user:n.user});const a=Object.assign({},n);delete a.user;const o=wb(a);await zr(this.storage,this.storageKey,o)}else{const a=wb(n);await zr(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await Gs(this.storage,this.storageKey),await Gs(this.storage,this.storageKey+"-code-verifier"),await Gs(this.storage,this.storageKey+"-user"),this.userStorage&&await Gs(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&hi()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Fr);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:i}}=n;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((i.expires_at*1e3-e)/Fr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Fr}ms, refresh threshold is ${jg} ticks`),a<=jg&&await this._callRefreshToken(i.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof lw)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!hi()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,i){const a=[`provider=${encodeURIComponent(n)}`];if(i?.redirectTo&&a.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i?.scopes&&a.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[o,l]=await kr(this.storage,this.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(l)}`});a.push(u.toString())}if(i?.queryParams){const o=new URLSearchParams(i.queryParams);a.push(o.toString())}return i?.skipBrowserRedirect&&a.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${e}?${a.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var i;const{data:a,error:o}=n;return o?{data:null,error:o}:await He(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(i=a?.session)===null||i===void 0?void 0:i.access_token})})}catch(n){if(Le(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var i,a;const{data:o,error:l}=n;if(l)return{data:null,error:l};const u=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:d,error:f}=await He(this.fetch,"POST",`${this.url}/factors`,{body:u,headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token});return f?{data:null,error:f}:(e.factorType==="totp"&&(!((a=d?.totp)===null||a===void 0)&&a.qr_code)&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),{data:d,error:null})})}catch(n){if(Le(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var i;const{data:a,error:o}=n;if(o)return{data:null,error:o};const{data:l,error:u}=await He(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(i=a?.session)===null||i===void 0?void 0:i.access_token});return u?{data:null,error:u}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:u})})}catch(n){if(Le(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var i;const{data:a,error:o}=n;return o?{data:null,error:o}:await He(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(i=a?.session)===null||i===void 0?void 0:i.access_token})})}catch(n){if(Le(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:i}=await this._challenge({factorId:e.factorId});return i?{data:null,error:i}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const i=e?.factors||[],a=i.filter(l=>l.factor_type==="totp"&&l.status==="verified"),o=i.filter(l=>l.factor_type==="phone"&&l.status==="verified");return{data:{all:i,totp:a,phone:o},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,i;const{data:{session:a},error:o}=e;if(o)return{data:null,error:o};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=Zf(a.access_token);let u=null;l.aal&&(u=l.aal);let d=u;((i=(n=a.user.factors)===null||n===void 0?void 0:n.filter(p=>p.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(d="aal2");const g=l.amr||[];return{data:{currentLevel:u,nextLevel:d,currentAuthenticationMethods:g},error:null}}))}async fetchJwk(e,n={keys:[]}){let i=n.keys.find(u=>u.kid===e);if(i)return i;const a=Date.now();if(i=this.jwks.keys.find(u=>u.kid===e),i&&this.jwks_cached_at+VA>a)return i;const{data:o,error:l}=await He(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=a,i=o.keys.find(u=>u.kid===e),!i)?null:i}async getClaims(e,n={}){try{let i=e;if(!i){const{data:b,error:S}=await this.getSession();if(S||!b.session)return{data:null,error:S};i=b.session.access_token}const{header:a,payload:o,signature:l,raw:{header:u,payload:d}}=Zf(i);n?.allowExpired||gO(o.exp);const f=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,n?.keys?{keys:n.keys}:n?.jwks);if(!f){const{error:b}=await this.getUser(i);if(b)throw b;return{data:{claims:o,header:a,signature:l},error:null}}const g=mO(a.alg),p=await crypto.subtle.importKey("jwk",f,g,!0,["verify"]);if(!await crypto.subtle.verify(g,p,l,eO(`${u}.${d}`)))throw new Ug("Invalid JWT signature");return{data:{claims:o,header:a,signature:l},error:null}}catch(i){if(Le(i))return{data:null,error:i};throw i}}}jl.nextInstanceID=0;const MO=jl;class kO extends MO{constructor(e){super(e)}}var NO=function(t,e,n,i){function a(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(g){try{f(i.next(g))}catch(p){l(p)}}function d(g){try{f(i.throw(g))}catch(p){l(p)}}function f(g){g.done?o(g.value):a(g.value).then(u,d)}f((i=i.apply(t,e||[])).next())})};class jO{constructor(e,n,i){var a,o,l;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const u=PA(e),d=new URL(u);this.realtimeUrl=new URL("realtime/v1",d),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",d),this.storageUrl=new URL("storage/v1",d),this.functionsUrl=new URL("functions/v1",d);const f=`sb-${d.hostname.split(".")[0]}-auth-token`,g={db:DA,realtime:kA,auth:Object.assign(Object.assign({},MA),{storageKey:f}),global:OA},p=FA(i??{},g);this.storageKey=(a=p.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(o=p.global.headers)!==null&&o!==void 0?o:{},p.accessToken?(this.accessToken=p.accessToken,this.auth=new Proxy({},{get:(y,b)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(b)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((l=p.auth)!==null&&l!==void 0?l:{},this.headers,p.global.fetch),this.fetch=IA(n,this._getAccessToken.bind(this),p.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},p.realtime)),this.rest=new XR(new URL("rest/v1",d).href,{headers:this.headers,schema:p.db.schema,fetch:this.fetch}),this.storage=new CA(this.storageUrl.href,this.headers,this.fetch,i?.storage),p.accessToken||this._listenForAuthEvents()}get functions(){return new PR(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},i={}){return this.rest.rpc(e,n,i)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return NO(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:i}=yield this.auth.getSession();return(n=(e=i.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:i,storage:a,storageKey:o,flowType:l,lock:u,debug:d},f,g){const p={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new kO({url:this.authUrl.href,headers:Object.assign(Object.assign({},p),f),storageKey:o,autoRefreshToken:e,persistSession:n,detectSessionInUrl:i,storage:a,flowType:l,lock:u,debug:d,fetch:g,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new fA(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,i)=>{this._handleTokenChanged(n,"CLIENT",i?.access_token)})}_handleTokenChanged(e,n,i){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==i?this.changedAccessToken=i:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const LO=(t,e,n)=>new jO(t,e,n);function IO(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}IO()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const UO="https://jyrfznujcyqskpfthrsf.supabase.co",PO="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imp5cmZ6bnVqY3lxc2twZnRocnNmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUwODM1OTMsImV4cCI6MjA3MDY1OTU5M30.JOZLGHslSQO7wDeFSq7FHAV6_VNtD9DS-gMNUu4rEnM",lt=LO(UO,PO,{auth:{persistSession:!0,autoRefreshToken:!0},realtime:{params:{eventsPerSecond:10}}}),en=(t,e="")=>t.code==="23505"?"This record already exists":t.code==="23503"?"Cannot perform this operation due to related records":t.code==="PGRST116"?"No records found":t.message?.includes("JWT")?"Authentication error. Please refresh the page":t.message||"An unexpected error occurred",mt={PRINTING:"STAMPA",PACKAGING:"CONFEZIONAMENTO"},Me={ZANICA:"ZANICA",BUSTO_GAROLFO:"BUSTO_GAROLFO",BOTH:"BOTH"},Ui={ACTIVE:"ACTIVE",INACTIVE:"INACTIVE"},La={CREMA:"CREMA",LIQUIDO:"LIQUIDO",POLVERI:"POLVERI"},$u={T1:"T1",T2:"T2",T3:"T3"},Gr={THREE:"3",FOUR:"4"},Rb={END_DATE_BEFORE_START:"End date cannot be before start date",END_TIME_BEFORE_START:"End time must be after start time when dates are the same"},xt={MACHINE:{DEPARTMENT:mt.PRINTING,WORK_CENTER:Me.ZANICA,MIN_WEB_WIDTH:"100",MAX_WEB_WIDTH:"1000",MIN_BAG_HEIGHT:"50",MAX_BAG_HEIGHT:"500",SETUP_TIME_STANDARD:"0.5",CHANGEOVER_COLOR:"0.25",CHANGEOVER_MATERIAL:"0.75",ACTIVE_SHIFTS:[$u.T1],STATUS:Ui.ACTIVE},PHASE:{DEPARTMENT:mt.PRINTING,NUMERO_PERSONE:1,WORK_CENTER:Me.ZANICA,V_STAMPA:6e3,T_SETUP_STAMPA:.5,COSTO_H_STAMPA:50,V_CONF:1e3,T_SETUP_CONF:.25,COSTO_H_CONF:40},ORDER:{SEAL_SIDES:Gr.THREE,QUANTITY_COMPLETED:0},OFF_TIME:{START_TIME:"09:00",END_TIME:"17:00"}},il={DECIMAL_PRECISION:{ONE_DECIMAL:["setup_time_standard","changeover_color","changeover_material","t_setup_stampa","t_setup_conf"],TWO_DECIMAL:["costo_h_stampa","costo_h_conf"]},FIELD_STEPS:{TIME:.1,COST:.01}};class Re extends Error{constructor(e,n="GENERIC_ERROR",i=500,a=null,o=""){super(e),this.name="AppError",this.code=n,this.statusCode=i,this.originalError=a,this.context=o,this.timestamp=new Date().toISOString(),this.id=this.generateErrorId(),this.userMessage=this.getUserFriendlyMessage()}generateErrorId(){return`ERR_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}getUserFriendlyMessage(){return FO(this)}toJSON(){return{id:this.id,message:this.message,code:this.code,statusCode:this.statusCode,context:this.context,timestamp:this.timestamp,userMessage:this.userMessage,stack:this.stack}}}const me={VALIDATION_ERROR:"VALIDATION_ERROR",NETWORK_ERROR:"NETWORK_ERROR",AUTHENTICATION_ERROR:"AUTHENTICATION_ERROR",AUTHORIZATION_ERROR:"AUTHORIZATION_ERROR",NOT_FOUND_ERROR:"NOT_FOUND_ERROR",SERVER_ERROR:"SERVER_ERROR",CLIENT_ERROR:"CLIENT_ERROR",BUSINESS_LOGIC_ERROR:"BUSINESS_LOGIC_ERROR",TIMEOUT_ERROR:"TIMEOUT_ERROR",RATE_LIMIT_ERROR:"RATE_LIMIT_ERROR"},Xs={LOW:"low",MEDIUM:"medium",HIGH:"high",CRITICAL:"critical"},$n=(t,e="")=>{if(t instanceof Re)return t;if(t?.code)switch(t.code){case"23505":return new Re("This record already exists",me.VALIDATION_ERROR,409,t,e);case"23503":return new Re("Cannot delete this record as it is referenced by other data",me.VALIDATION_ERROR,400,t,e);case"PGRST116":return new Re("Record not found",me.NOT_FOUND_ERROR,404,t,e);case"PGRST301":return new Re("Session expired. Please log in again.",me.AUTHENTICATION_ERROR,401,t,e);case"PGRST302":return new Re("Invalid session. Please log in again.",me.AUTHENTICATION_ERROR,401,t,e);case"PGRST303":return new Re("Authentication required. Please log in.",me.AUTHENTICATION_ERROR,401,t,e);default:return new Re(t.message||"An unexpected error occurred",me.SERVER_ERROR,500,t,e)}return t.name==="NetworkError"||t.message?.includes("fetch")||t.message?.includes("network")?new Re("Network error. Please check your connection and try again.",me.NETWORK_ERROR,0,t,e):t.name==="TimeoutError"||t.message?.includes("timeout")?new Re("Request timed out. Please try again.",me.TIMEOUT_ERROR,408,t,e):t.status===429||t.message?.includes("rate limit")?new Re("Too many requests. Please wait a moment and try again.",me.RATE_LIMIT_ERROR,429,t,e):t.name==="ValidationError"||t.message?.includes("validation")?new Re(t.message,me.VALIDATION_ERROR,400,t,e):t.message?.includes("Cannot add")||t.message?.includes("work center")?new Re(t.message,me.BUSINESS_LOGIC_ERROR,400,t,e):new Re(t.message||"An unexpected error occurred",me.CLIENT_ERROR,t.status||500,t,e)},gi=(t,e="")=>({id:t.id||`ERR_${Date.now()}`,message:t.message,code:t.code||"UNKNOWN_ERROR",context:e,timestamp:new Date().toISOString(),url:typeof window<"u"?window.location.href:"server",userAgent:typeof navigator<"u"?navigator.userAgent:"server",stack:t.stack,severity:cw(t)}),cw=t=>t.code===me.AUTHENTICATION_ERROR||t.code===me.AUTHORIZATION_ERROR?Xs.HIGH:t.code===me.NETWORK_ERROR||t.code===me.SERVER_ERROR?Xs.MEDIUM:t.code===me.VALIDATION_ERROR||t.code===me.BUSINESS_LOGIC_ERROR?Xs.LOW:Xs.MEDIUM,vm=t=>e=>{const n=$n(e,t);return gi(n,t),n},FO=t=>{switch(t.code){case me.NETWORK_ERROR:return"Please check your internet connection and try again.";case me.AUTHENTICATION_ERROR:return"Please log in to continue.";case me.AUTHORIZATION_ERROR:return"You don't have permission to perform this action.";case me.NOT_FOUND_ERROR:return"The requested item was not found.";case me.VALIDATION_ERROR:return"Please check your input and try again.";case me.BUSINESS_LOGIC_ERROR:return t.message||"This operation cannot be completed.";case me.TIMEOUT_ERROR:return"The request took too long. Please try again.";case me.RATE_LIMIT_ERROR:return"Too many requests. Please wait a moment and try again.";default:return"Something went wrong. Please try again or contact support if the problem persists."}},Ab=async(t,e=3,n=1e3)=>{let i;for(let a=1;a<=e;a++)try{return await t()}catch(o){if(i=o,o.code===me.VALIDATION_ERROR||o.code===me.AUTHORIZATION_ERROR||o.code===me.BUSINESS_LOGIC_ERROR)throw o;a<e&&(await new Promise(l=>setTimeout(l,n)),n*=2)}throw i},Pg=(t,e="")=>async(...n)=>{try{return await t(...n)}catch(i){const a=$n(i,e);throw gi(a,e),a}},uw=A.createContext(),zO=({children:t})=>{const[e,n]=A.useState(null),[i,a]=A.useState(null),[o,l]=A.useState(!0),[u,d]=A.useState(null);A.useEffect(()=>{(async()=>{try{const{data:{session:C},error:R}=await lt.auth.getSession();R?d("Failed to initialize authentication"):(a(C),n(C?.user??null))}catch(C){const R=new Re("Failed to initialize authentication",me.AUTHENTICATION_ERROR,401,C,"AuthContext.getInitialSession");d(R.message)}finally{l(!1)}})();const{data:{subscription:E}}=lt.auth.onAuthStateChange(async(C,R)=>{a(R),n(R?.user??null),l(!1),d(null)});return()=>E.unsubscribe()},[]);const w={user:e,session:i,loading:o,error:u,signIn:async(x,E)=>{try{d(null),l(!0);const{data:C,error:R}=await lt.auth.signInWithPassword({email:x,password:E});if(R)throw R;return{success:!0,user:C.user}}catch(C){const R=C instanceof Re?C:new Re(C.message,me.AUTHENTICATION_ERROR,401,C,"AuthContext.signIn");return d(R.message),{success:!1,error:R.message}}finally{l(!1)}},signUp:async(x,E,C={})=>{try{d(null),l(!0);const{data:R,error:M}=await lt.auth.signUp({email:x,password:E,options:{data:C}});if(M)throw M;return{success:!0,user:R.user}}catch(R){return d(R.message),{success:!1,error:R.message}}finally{l(!1)}},signOut:async()=>{try{d(null),l(!0);const{error:x}=await lt.auth.signOut();if(x)throw x;return{success:!0}}catch(x){return d(x.message),{success:!1,error:x.message}}finally{l(!1)}},resetPassword:async x=>{try{d(null),l(!0);const{error:E}=await lt.auth.resetPasswordForEmail(x,{redirectTo:`${window.location.origin}/reset-password`});if(E)throw E;return{success:!0}}catch(E){return d(E.message),{success:!1,error:E.message}}finally{l(!1)}},updateProfile:async x=>{try{d(null),l(!0);const{data:E,error:C}=await lt.auth.updateUser({data:x});if(C)throw C;return{success:!0,user:E.user}}catch(E){return d(E.message),{success:!1,error:E.message}}finally{l(!1)}},getUserProfile:async()=>{if(!e)return null;try{const{data:x,error:E}=await lt.from("profiles").select("*").eq("id",e.id).single();return E?null:x}catch{return null}},isAuthenticated:!!e};return _.jsx(uw.Provider,{value:w,children:t})},Xl=()=>{const t=A.useContext(uw);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},Ob=t=>{let e;const n=new Set,i=(f,g)=>{const p=typeof f=="function"?f(e):f;if(!Object.is(p,e)){const y=e;e=g??(typeof p!="object"||p===null)?p:Object.assign({},e,p),n.forEach(b=>b(e,y))}},a=()=>e,u={setState:i,getState:a,getInitialState:()=>d,subscribe:f=>(n.add(f),()=>n.delete(f))},d=e=t(i,a,u);return u},BO=(t=>t?Ob(t):Ob),HO=t=>t;function $O(t,e=HO){const n=Ie.useSyncExternalStore(t.subscribe,Ie.useCallback(()=>e(t.getState()),[t,e]),Ie.useCallback(()=>e(t.getInitialState()),[t,e]));return Ie.useDebugValue(n),n}const Db=t=>{const e=BO(t),n=i=>$O(e,i);return Object.assign(n,e),n},Jr=(t=>t?Db(t):Db),dw=6e4,ym=36e5,Mb=Symbol.for("constructDateFrom");function _d(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&Mb in t?t[Mb](e):t instanceof Date?new t.constructor(e):new Date(e)}function Nn(t,e){return _d(t,t)}function VO(t,e,n){const i=Nn(t);return isNaN(e)?_d(t,NaN):(e&&i.setDate(i.getDate()+e),i)}function GO(t,e,n){return _d(t,+Nn(t)+e)}function qO(t,e,n){return GO(t,e*ym)}function YO(t,e){const n=Nn(t);return n.setHours(0,0,0,0),n}function WO(t,e){const n=Nn(t);return n.setHours(23,59,59,999),n}function KO(t,e){return+Nn(t)>+Nn(e)}function XO(t,e){return+Nn(t)<+Nn(e)}function Su(t,e){const n=()=>_d(e?.in,NaN),a=eD(t);let o;if(a.date){const f=tD(a.date,2);o=nD(f.restDateString,f.year)}if(!o||isNaN(+o))return n();const l=+o;let u=0,d;if(a.time&&(u=iD(a.time),isNaN(u)))return n();if(a.timezone){if(d=sD(a.timezone),isNaN(d))return n()}else{const f=new Date(l+u),g=Nn(0);return g.setFullYear(f.getUTCFullYear(),f.getUTCMonth(),f.getUTCDate()),g.setHours(f.getUTCHours(),f.getUTCMinutes(),f.getUTCSeconds(),f.getUTCMilliseconds()),g}return Nn(l+u+d)}const wu={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},QO=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,ZO=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,JO=/^([+-])(\d{2})(?::?(\d{2}))?$/;function eD(t){const e={},n=t.split(wu.dateTimeDelimiter);let i;if(n.length>2)return e;if(/:/.test(n[0])?i=n[0]:(e.date=n[0],i=n[1],wu.timeZoneDelimiter.test(e.date)&&(e.date=t.split(wu.timeZoneDelimiter)[0],i=t.substr(e.date.length,t.length))),i){const a=wu.timezone.exec(i);a?(e.time=i.replace(a[1],""),e.timezone=a[1]):e.time=i}return e}function tD(t,e){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),i=t.match(n);if(!i)return{year:NaN,restDateString:""};const a=i[1]?parseInt(i[1]):null,o=i[2]?parseInt(i[2]):null;return{year:o===null?a:o*100,restDateString:t.slice((i[1]||i[2]).length)}}function nD(t,e){if(e===null)return new Date(NaN);const n=t.match(QO);if(!n)return new Date(NaN);const i=!!n[4],a=sl(n[1]),o=sl(n[2])-1,l=sl(n[3]),u=sl(n[4]),d=sl(n[5])-1;if(i)return cD(e,u,d)?aD(e,u,d):new Date(NaN);{const f=new Date(0);return!oD(e,o,l)||!lD(e,a)?new Date(NaN):(f.setUTCFullYear(e,o,Math.max(a,l)),f)}}function sl(t){return t?parseInt(t):1}function iD(t){const e=t.match(ZO);if(!e)return NaN;const n=tg(e[1]),i=tg(e[2]),a=tg(e[3]);return uD(n,i,a)?n*ym+i*dw+a*1e3:NaN}function tg(t){return t&&parseFloat(t.replace(",","."))||0}function sD(t){if(t==="Z")return 0;const e=t.match(JO);if(!e)return 0;const n=e[1]==="+"?-1:1,i=parseInt(e[2]),a=e[3]&&parseInt(e[3])||0;return dD(i,a)?n*(i*ym+a*dw):NaN}function aD(t,e,n){const i=new Date(0);i.setUTCFullYear(t,0,4);const a=i.getUTCDay()||7,o=(e-1)*7+n+1-a;return i.setUTCDate(i.getUTCDate()+o),i}const rD=[31,null,31,30,31,30,31,31,30,31,30,31];function hw(t){return t%400===0||t%4===0&&t%100!==0}function oD(t,e,n){return e>=0&&e<=11&&n>=1&&n<=(rD[e]||(hw(t)?29:28))}function lD(t,e){return e>=1&&e<=(hw(t)?366:365)}function cD(t,e,n){return e>=1&&e<=53&&n>=0&&n<=6}function uD(t,e,n){return t===24?e===0&&n===0:n>=0&&n<60&&e>=0&&e<60&&t>=0&&t<25}function dD(t,e){return e>=0&&e<=59}function kb(t,e,n){const i=Nn(t);return i.setHours(e),i}function Nb(t,e,n){const i=Nn(t);return i.setMilliseconds(e),i}function jb(t,e,n){const i=Nn(t);return i.setMinutes(e),i}function Lb(t,e,n){const i=Nn(t);return i.setSeconds(e),i}function qt(t){const e=t.getUTCFullYear(),n=String(t.getUTCMonth()+1).padStart(2,"0"),i=String(t.getUTCDate()).padStart(2,"0");return`${e}-${n}-${i}`}function hD(t,e,n){if(!t.scheduled_start_time||!t.scheduled_end_time)return!1;const i=Su(t.scheduled_start_time),a=Su(t.scheduled_end_time),o=Nb(Lb(jb(kb(Su(e),n),0),0),0),l=Nb(Lb(jb(kb(Su(e),n+1),0),0),0);return XO(i,l)&&KO(a,o)}function _m(t){const n=t.getUTCDay();return new Date(Date.UTC(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()-n,0,0,0,0))}function fD(t){const e=_m(t);return new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()+6,23,59,59,999))}function KI(t){return YO(t)}function XI(t){return WO(t)}function QI(t,e){return t.getUTCFullYear()===e.getUTCFullYear()&&t.getUTCMonth()===e.getUTCMonth()&&t.getUTCDate()===e.getUTCDate()}function Ib(t,e){return qO(t,e)}function Ll(t,e){return VO(t,e)}const si=t=>t?new Date(t).toISOString().split("T")[0]:"N/A",gD=t=>{if(!t)return"N/A";const e=new Date(t);return`${String(e.getUTCDate()).padStart(2,"0")}/${String(e.getUTCMonth()+1).padStart(2,"0")}`},mD=t=>{if(!t)return"N/A";const e=new Date(t);return`${e.getUTCFullYear()}-${String(e.getUTCMonth()+1).padStart(2,"0")}`},ZI=t=>t?new Date(t).toISOString().replace("T"," ").replace(".000Z",""):"N/A",pD=(t,e)=>!t||!e?"N/A":`${si(t)} - ${si(e)}`;class vD{async init(){try{const{error:e}=await lt.from("machines").select("count").limit(1);if(e)throw new Re(`API initialization failed: ${e.message}`,me.SERVER_ERROR,500,e,"API.init");return!0}catch(e){throw e instanceof Re?e:new Re(`API initialization failed: ${e.message}`,me.SERVER_ERROR,500,e,"API.init")}}async getMachines(){return Pg(async()=>{const{data:e,error:n}=await lt.from("machines").select("*").order("machine_name");if(n)throw n;return e||[]},"getMachines")()}async addMachine(e){try{const{data:n,error:i}=await lt.from("machines").insert([e]).select().single();if(i)throw i;return n}catch(n){throw new Re(`Failed to add machine: ${en(n)}`,me.SERVER_ERROR,500,n,"API.addMachine")}}async updateMachine(e,n){try{const{data:i,error:a}=await lt.from("machines").update(n).eq("id",e).select().single();if(a)throw a;return i}catch(i){throw new Re(`Failed to update machine: ${en(i)}`,me.SERVER_ERROR,500,i,"API.updateMachine")}}async removeMachine(e){try{const{error:n}=await lt.from("machines").delete().eq("id",e);if(n)throw n;return!0}catch(n){throw new Re(`Failed to remove machine: ${en(n)}`,me.SERVER_ERROR,500,n,"API.removeMachine")}}async getOdpOrders(){try{const{data:e,error:n}=await lt.from("odp_orders").select("*").order("created_at",{ascending:!1});if(n)throw n;return e||[]}catch(e){throw new Re(`Failed to fetch ODP orders: ${en(e)}`,me.SERVER_ERROR,500,e,"API.getOdpOrders")}}async addOdpOrder(e){try{const{data:n,error:i}=await lt.from("odp_orders").insert([e]).select().single();if(i)throw i;return n}catch(n){throw new Re(`Failed to add ODP order: ${en(n)}`,me.SERVER_ERROR,500,n,"API.addOdpOrder")}}async updateOdpOrder(e,n){try{const{data:i,error:a}=await lt.from("odp_orders").update(n).eq("id",e).select().single();if(a)throw a;return i}catch(i){throw new Re(`Failed to update ODP order: ${en(i)}`,me.SERVER_ERROR,500,i,"API.updateOdpOrder")}}async removeOdpOrder(e){try{const{error:n}=await lt.from("odp_orders").delete().eq("id",e);if(n)throw n;return!0}catch(n){throw new Re(`Failed to remove ODP order: ${en(n)}`,me.SERVER_ERROR,500,n,"API.removeOdpOrder")}}async getPhases(){try{const{data:e,error:n}=await lt.from("phases").select("*").order("name");if(n)throw n;return e||[]}catch(e){throw new Re(`Failed to fetch phases: ${en(e)}`,me.SERVER_ERROR,500,e,"API.getPhases")}}async addPhase(e){try{const{data:n,error:i}=await lt.from("phases").insert([e]).select().single();if(i)throw i;return n}catch(n){throw new Re(`Failed to add phase: ${en(n)}`,me.SERVER_ERROR,500,n,"API.addPhase")}}async updatePhase(e,n){try{const{data:i,error:a}=await lt.from("phases").update(n).eq("id",e).select().single();if(a)throw a;return i}catch(i){throw new Re(`Failed to update phase: ${en(i)}`,me.SERVER_ERROR,500,i,"API.updatePhase")}}async removePhase(e){try{const{error:n}=await lt.from("phases").delete().eq("id",e);if(n)throw n;return!0}catch(n){throw new Re(`Failed to remove phase: ${en(n)}`,me.SERVER_ERROR,500,n,"API.removePhase")}}async getMachineAvailabilityForDateRange(e,n,i){try{const{data:a,error:o}=await lt.from("machine_availability").select("*").eq("machine_id",e).gte("date",n).lte("date",i).order("date");if(o)throw o;return a||[]}catch(a){throw new Re(`Failed to fetch machine availability for date range: ${en(a)}`,me.SERVER_ERROR,500,a,"API.getMachineAvailabilityForDateRange")}}async getMachineAvailabilityForDate(e,n){try{const{data:i,error:a}=await lt.from("machine_availability").select("*").eq("machine_id",e).eq("date",n).maybeSingle();if(a)throw a;return i||null}catch(i){throw new Re(`Failed to fetch machine availability: ${en(i)}`,me.SERVER_ERROR,500,i,"API.getMachineAvailabilityForDate")}}async getMachineAvailability(e,n){try{return(await this.getMachineAvailabilityForDate(e,n))?.unavailable_hours||[]}catch{return[]}}async setMachineAvailability(e,n,i){try{const{data:a,error:o}=await lt.from("machine_availability").upsert([{machine_id:e,date:n,unavailable_hours:i}],{onConflict:"machine_id,date"}).select().single();if(o)throw o;return a}catch(a){throw new Re(`Failed to set machine availability: ${en(a)}`,me.SERVER_ERROR,500,a,"API.setMachineAvailability")}}async getMachineAvailabilityForDateAllMachines(e){try{const{data:n,error:i}=await lt.from("machine_availability").select("*").eq("date",e);if(i)throw i;return n||[]}catch(n){throw new Re(`Failed to fetch machine availability for all machines: ${en(n)}`,me.SERVER_ERROR,500,n,"API.getMachineAvailabilityForDateAllMachines")}}async getEventsByDate(e){try{const{data:n,error:i}=await lt.from("machine_availability").select("*").eq("date",e);if(i)throw i;return n||[]}catch(n){throw new Re(`Failed to fetch events by date: ${en(n)}`,me.SERVER_ERROR,500,n,"API.getEventsByDate")}}async setUnavailableHoursForRange(e,n,i,a,o){try{const l=parseInt(a.split(":")[0]),u=parseInt(o.split(":")[0]),d=[];for(let b=l;b<u;b++)d.push(b.toString());const f=new Date(n),g=new Date(i);let p=new Date(f);const y=[];for(;p<=g;){const b=qt(p),w=(await this.getMachineAvailabilityForDate(e,b))?.unavailable_hours||[],x=[...new Set([...w,...d])].sort((C,R)=>parseInt(C)-parseInt(R)),E=await this.setMachineAvailability(e,b,x);y.push(E),p=Ll(p,1)}return y}catch(l){throw new Re(`Failed to set unavailable hours for range: ${en(l)}`,me.SERVER_ERROR,500,l,"API.setUnavailableHoursForRange")}}async bulkUpsertMachineAvailability(e){try{const{error:n}=await lt.from("machine_availability").upsert(e,{onConflict:"machine_id,date"});if(n)throw n;return{success:!0}}catch(n){throw new Re(`Failed to bulk set machine availability: ${en(n)}`,me.SERVER_ERROR,500,n,"API.bulkUpsertMachineAvailability")}}setupRealtimeSubscriptions(e,n,i){return lt.channel("table-db-changes").on("postgres_changes",{event:"*",schema:"public",table:"odp_orders"},e).on("postgres_changes",{event:"*",schema:"public",table:"machines"},n).on("postgres_changes",{event:"*",schema:"public",table:"phases"},i).subscribe(o=>{})}cleanupRealtimeSubscriptions(e){if(e)try{e.unsubscribe()}catch{}}}const ct=new vD,Se=Jr((t,e)=>({isLoading:!1,isInitialized:!1,selectedWorkCenter:Me.BOTH,isEditMode:!1,alert:{message:"",type:"info",isVisible:!1},confirmDialog:{isOpen:!1,title:"",message:"",onConfirm:null,type:"danger"},conflictDialog:{isOpen:!1,details:null},getLoadingState:()=>e().isLoading,getInitializationState:()=>e().isInitialized,getSelectedWorkCenter:()=>e().selectedWorkCenter,getEditMode:()=>e().isEditMode,getAlert:()=>e().alert,getConfirmDialog:()=>e().confirmDialog,getConflictDialog:()=>e().conflictDialog,setLoading:n=>t({isLoading:n}),setInitialized:n=>t({isInitialized:n}),setSelectedWorkCenter:n=>t({selectedWorkCenter:n}),toggleEditMode:()=>t(n=>({isEditMode:!n.isEditMode})),setEditMode:n=>t({isEditMode:n}),showAlert:(n,i="info")=>t({alert:{message:n,type:i,isVisible:!0}}),hideAlert:()=>t({alert:{message:"",type:"info",isVisible:!1}}),showConfirmDialog:(n,i,a,o="danger")=>t({confirmDialog:{isOpen:!0,title:n,message:i,onConfirm:a,type:o}}),hideConfirmDialog:()=>t({confirmDialog:{isOpen:!1,title:"",message:"",onConfirm:null,type:"danger"}}),showConflictDialog:n=>t({conflictDialog:{isOpen:!0,details:n}}),hideConflictDialog:()=>t({conflictDialog:{isOpen:!1,details:null}}),reset:()=>t({isLoading:!1,isInitialized:!1,selectedWorkCenter:Me.BOTH,isEditMode:!1,alert:{message:"",type:"info",isVisible:!1},confirmDialog:{isOpen:!1,title:"",message:"",onConfirm:null,type:"danger"},conflictDialog:{isOpen:!1,details:null}})}));function yD(t,e){const n=e.getDay(),i=new Set;if(n===0||n===6){for(let u=0;u<24;u++)i.add(u.toString());return Array.from(i)}for(let u=0;u<24;u++)i.add(u.toString());const{work_center:a,department:o,active_shifts:l=[]}=t;return l.forEach(u=>{if(u==="T3"){i.clear();return}if(u==="T2")for(let d=6;d<22;d++)i.delete(d.toString());if(u==="T1"){if(a===Me.BUSTO_GAROLFO){for(let d=8;d<12;d++)i.delete(d.toString());for(let d=14;d<18;d++)i.delete(d.toString())}else if(a===Me.ZANICA)if(o===mt.PACKAGING){for(let d=8;d<12;d++)i.delete(d.toString());for(let d=13;d<17;d++)i.delete(d.toString())}else{for(let d=8;d<12;d++)i.delete(d.toString());for(let d=13;d<17;d++)i.delete(d.toString())}}}),Array.from(i).sort((u,d)=>parseInt(u)-parseInt(d))}function _D(t,e){const n=[],i=new Date(e,0,1),a=new Date(e,11,31);for(const o of t){let l=new Date(i);for(;l<=a;){const u=yD(o,l);u.length>0&&n.push({machine_id:o.id,date:qt(l),unavailable_hours:u}),l.setDate(l.getDate()+1)}}return n}const bD=(t,e)=>{const n=vm("Machine");return{addMachine:async i=>{try{const{selectedWorkCenter:a}=Se.getState();if(a&&a!==Me.BOTH&&i.work_center&&i.work_center!==a)throw new Re(`Cannot add Machine with different work center. Selected: ${a}, Item: ${i.work_center}`,me.BUSINESS_LOGIC_ERROR,400,null,"MachineStore.addMachine");const o=await ct.addMachine(i);t(l=>({machines:[...l.machines,o]}));try{const l=new Date().getFullYear(),u=_D([o],l);u.length>0&&await ct.bulkUpsertMachineAvailability(u),Se.getState().showAlert(`Machine "${o?.machine_name||"Unknown"}" added and calendar set successfully`,"success")}catch(l){Se.getState().showAlert(`Machine added, but failed to set calendar: ${l.message}`,"warning")}return o}catch(a){const o=n(a);throw Se.getState().showAlert(o.message,"error"),o}},updateMachine:async(i,a)=>{try{const o=e().machines.find(u=>u.id===i),l=await ct.updateMachine(i,a);return t(u=>({machines:u.machines.map(d=>d.id===i?{...d,...l}:d)})),Se.getState().showAlert(`Machine "${o?.machine_name||"Unknown"}" updated successfully`,"success"),l}catch(o){const l=n(o);throw Se.getState().showAlert(l.message,"error"),l}},removeMachine:async i=>{try{const a=e().machines.find(o=>o.id===i);return await ct.removeMachine(i),t(o=>({machines:o.machines.filter(l=>l.id!==i)})),Se.getState().showAlert(`Machine "${a?.machine_name||"Unknown"}" deleted successfully`,"success"),!0}catch(a){const o=n(a);throw Se.getState().showAlert(o.message,"error"),o}}}},sn=Jr((t,e)=>({machines:[],getMachines:()=>e().machines,getMachineById:n=>e().machines.find(i=>i.id===n),getMachinesByWorkCenter:n=>n===Me.BOTH?e().machines:e().machines.filter(i=>i.work_center===n),setMachines:n=>t({machines:n||[]}),...bD(t,e),cleanupDuplicateMachines:()=>{const n=e(),i=[],a=new Set;n.machines.forEach(o=>{a.has(o.id)||(a.add(o.id),i.push(o))}),t({machines:i})},reset:()=>t({machines:[]})})),SD=(t,e)=>{const n=vm("OdpOrder");return{addOdpOrder:async i=>{try{const{selectedWorkCenter:a}=Se.getState();if(a&&a!==Me.BOTH&&i.work_center&&i.work_center!==a)throw new Re(`Cannot add ODP Order with different work center. Selected: ${a}, Item: ${i.work_center}`,me.BUSINESS_LOGIC_ERROR,400,null,"OrderStore.addOdpOrder");const o=await ct.addOdpOrder(i);return t(l=>({odpOrders:[...l.odpOrders,o]})),Se.getState().showAlert(`ODP Order "${i?.odp_number||"Unknown"}" added successfully`,"success"),o}catch(a){const o=n(a);throw Se.getState().showAlert(o.message,"error"),o}},updateOdpOrder:async(i,a)=>{try{const o=e().odpOrders.find(u=>u.id===i),l=await ct.updateOdpOrder(i,a);return t(u=>({odpOrders:u.odpOrders.map(d=>d.id===i?{...d,...l}:d)})),Se.getState().showAlert(`ODP Order "${o?.odp_number||"Unknown"}" updated successfully`,"success"),l}catch(o){const l=n(o);throw Se.getState().showAlert(l.message,"error"),l}},removeOdpOrder:async i=>{try{const a=e().odpOrders.find(o=>o.id===i);return await ct.removeOdpOrder(i),t(o=>({odpOrders:o.odpOrders.filter(l=>l.id!==i)})),Se.getState().showAlert(`ODP Order "${a?.odp_number||"Unknown"}" deleted successfully`,"success"),!0}catch(a){const o=n(a);throw Se.getState().showAlert(o.message,"error"),o}}}},Je=Jr((t,e)=>({odpOrders:[],getOdpOrders:()=>e().odpOrders,getOdpOrderById:n=>e().odpOrders.find(i=>i.id===n),getOdpOrdersByWorkCenter:n=>n===Me.BOTH?e().odpOrders:e().odpOrders.filter(i=>i.work_center===n),getScheduledOrders:()=>e().odpOrders.filter(n=>n.status==="SCHEDULED"),getUnscheduledOrders:()=>e().odpOrders.filter(n=>n.status==="NOT SCHEDULED"),setOdpOrders:n=>t({odpOrders:n||[]}),...SD(t,e),cleanupDuplicateOrders:()=>{const n=e(),i=[],a=new Set;n.odpOrders.forEach(o=>{a.has(o.id)||(a.add(o.id),i.push(o))}),t({odpOrders:i})},reset:()=>t({odpOrders:[]})})),wD=(t,e)=>{const n=vm("Phase");return{addPhase:async i=>{try{const{selectedWorkCenter:a}=Se.getState();if(a&&a!==Me.BOTH&&i.work_center&&i.work_center!==a)throw new Re(`Cannot add Phase with different work center. Selected: ${a}, Item: ${i.work_center}`,me.BUSINESS_LOGIC_ERROR,400,null,"PhaseStore.addPhase");const o=await ct.addPhase(i);return t(l=>({phases:[...l.phases,o]})),Se.getState().showAlert(`Phase "${i?.name||"Unknown"}" added successfully`,"success"),o}catch(a){const o=n(a);throw Se.getState().showAlert(o.message,"error"),o}},updatePhase:async(i,a)=>{try{const o=e().phases.find(u=>u.id===i),l=await ct.updatePhase(i,a);return t(u=>({phases:u.phases.map(d=>d.id===i?{...d,...l}:d)})),Se.getState().showAlert(`Phase "${o?.name||"Unknown"}" updated successfully`,"success"),l}catch(o){const l=n(o);throw Se.getState().showAlert(l.message,"error"),l}},removePhase:async i=>{try{const a=e().phases.find(o=>o.id===i);return await ct.removePhase(i),t(o=>({phases:o.phases.filter(l=>l.id!==i)})),Se.getState().showAlert(`Phase "${a?.name||"Unknown"}" deleted successfully`,"success"),!0}catch(a){const o=n(a);throw Se.getState().showAlert(o.message,"error"),o}}}},ni=Jr((t,e)=>({phases:[],getPhases:()=>e().phases,getPhaseById:n=>e().phases.find(i=>i.id===n),getPhasesByWorkCenter:n=>n===Me.BOTH?e().phases:e().phases.filter(i=>i.work_center===n),setPhases:n=>t({phases:n||[]}),...wD(t,e),cleanupDuplicatePhases:()=>{const n=e(),i=[],a=new Set;n.phases.forEach(o=>{a.has(o.id)||(a.add(o.id),i.push(o))}),t({phases:i})},reset:()=>t({phases:[]})}));class xD{constructor(e,n){this.get=e,this.set=n}setSplitTaskInfo=(e,n)=>{this.set(i=>({splitTasksInfo:{...i.splitTasksInfo,[e]:n}}))};getSplitTaskInfo=e=>{const n=this.get().splitTasksInfo[e];if(n&&n.segments)return n;const{getOdpOrderById:i}=Je.getState(),a=i(e);if(a&&a.description&&a.status==="SCHEDULED")try{const o=JSON.parse(a.description);if(o.segments&&Array.isArray(o.segments))return this.setSplitTaskInfo(e,o),o}catch(o){console.warn(`Failed to parse segment info for task ${e}:`,o)}return null};clearSplitTaskInfo=e=>{this.set(n=>{const i={...n.splitTasksInfo};return delete i[e],{splitTasksInfo:i}})};updateTaskWithSplitInfo=async(e,n,i=null,a=null,o=null)=>{console.log(` DATABASE UPDATE: Starting updateTaskWithSplitInfo for task ${e}`),console.log(" DATABASE UPDATE: Segment info:",n),console.log(` DATABASE UPDATE: Start time: ${i?.toISOString()}`),console.log(` DATABASE UPDATE: End time: ${a?.toISOString()}`),console.log(` DATABASE UPDATE: Machine ID: ${o}`);const{updateOdpOrder:l}=Je.getState();if(n){this.setSplitTaskInfo(e,n);const d={description:JSON.stringify(n),status:"SCHEDULED"};if(i&&(d.scheduled_start_time=i.toISOString()),a&&(d.scheduled_end_time=a.toISOString()),o&&(d.scheduled_machine_id=o),console.log(" DATABASE UPDATE: Initial update data:",d),d.scheduled_start_time&&d.scheduled_end_time&&d.scheduled_machine_id)console.log(" DATABASE UPDATE:  All scheduling fields present - valid state");else if(!d.scheduled_start_time&&!d.scheduled_end_time&&!d.scheduled_machine_id)console.log(" DATABASE UPDATE:  No scheduling fields present - valid state"),delete d.scheduled_start_time,delete d.scheduled_end_time,delete d.scheduled_machine_id,d.status="NOT SCHEDULED";else{console.log(" DATABASE UPDATE:  Partial scheduling fields - need to get current task state");const{getOdpOrderById:g}=Je.getState(),p=g(e);p&&(console.log(" DATABASE UPDATE: Current task state:",{scheduled_start_time:p.scheduled_start_time,scheduled_end_time:p.scheduled_end_time,scheduled_machine_id:p.scheduled_machine_id}),d.scheduled_start_time||(d.scheduled_start_time=p.scheduled_start_time),d.scheduled_end_time||(d.scheduled_end_time=p.scheduled_end_time),d.scheduled_machine_id||(d.scheduled_machine_id=p.scheduled_machine_id))}console.log(" DATABASE UPDATE: Final update data:",d),console.log(" DATABASE UPDATE: Calling updateOdpOrder with data:",d);const f=await l(e,d);console.log(` DATABASE UPDATE:  Successfully updated task ${e}`),this.updateSplitTaskInfo(e,f)}else{this.clearSplitTaskInfo(e);const u=await l(e,{description:""});this.updateSplitTaskInfo(e,u)}};updateSplitTaskInfo=(e,n)=>{if(n.description&&n.status==="SCHEDULED")try{const i=JSON.parse(n.description);i.segments&&Array.isArray(i.segments)?this.setSplitTaskInfo(e,i):this.clearSplitTaskInfo(e)}catch{this.clearSplitTaskInfo(e)}else this.clearSplitTaskInfo(e)};restoreSplitTaskInfo=()=>{const{getOdpOrders:e}=Je.getState(),n=e(),i={};let a=0;n.forEach(o=>{if(o.description&&o.status==="SCHEDULED")try{const l=JSON.parse(o.description);l.segments&&Array.isArray(l.segments)&&(i[o.id]=l,a++)}catch(l){console.warn(`Failed to parse segment info for task ${o.odp_number}:`,l)}}),this.set({splitTasksInfo:i}),console.log(` Restored split task info for ${a} tasks`)};createSegmentInfo=(e,n)=>({totalSegments:e.length,segments:e.map(i=>({start:i.start.toISOString(),end:i.end.toISOString(),duration:i.duration})),originalDuration:n,wasSplit:e.length>1});getTaskOccupiedSegments=e=>{const n=this.getSplitTaskInfo(e.id);if(n&&n.segments)return n.segments.map(i=>({start:new Date(i.start),end:new Date(i.end),duration:i.duration}));if(e.description)try{const i=JSON.parse(e.description);if(i.segments&&Array.isArray(i.segments))return i.segments.map(a=>({start:new Date(a.start),end:new Date(a.end),duration:a.duration}))}catch{}if(e.scheduled_start_time){const i=new Date(e.scheduled_start_time),a=e.time_remaining||e.duration||1,o=new Date(i.getTime()+a*60*60*1e3);return[{start:i,end:o,duration:a}]}return[]};doTimeRangesOverlap=(e,n,i,a)=>e<a&&n>i;checkTaskOverlap=(e,n,i)=>{const a=this.getTaskOccupiedSegments(i);for(const o of a)if(this.doTimeRangesOverlap(e,n,o.start,o.end))return{hasOverlap:!0,conflictingSegment:o,existingTask:i};return{hasOverlap:!1}};checkMachineOverlaps=(e,n,i,a=null,o=[])=>{const{getOdpOrders:l}=Je.getState(),u=[a,...o].filter(g=>g);console.log(" OVERLAP DEBUG: checkMachineOverlaps called"),console.log(` OVERLAP DEBUG: New task time range: ${e.toISOString()} - ${n.toISOString()}`),console.log(` OVERLAP DEBUG: Machine ID: ${i}`),console.log(` OVERLAP DEBUG: Exclude task ID: ${a}`),console.log(" OVERLAP DEBUG: Additional exclude IDs:",o),console.log(" OVERLAP DEBUG: All exclude IDs:",u);const d=l().filter(g=>g.scheduled_machine_id===i&&g.status==="SCHEDULED"&&!u.includes(g.id)&&g.scheduled_start_time&&g.scheduled_end_time&&g.scheduled_machine_id);console.log(` OVERLAP DEBUG: Found ${d.length} existing tasks on machine (after filtering)`);const f=d.sort((g,p)=>{const y=this.getTaskOccupiedSegments(g),b=this.getTaskOccupiedSegments(p),S=y.length>0?y[0].start:new Date(g.scheduled_start_time),w=b.length>0?b[0].start:new Date(p.scheduled_start_time);return S.getTime()-w.getTime()});u.length>0&&(console.log(` Checking overlaps for machine ${i}, excluding:`,u),console.log(" Tasks not excluded (sorted by start time):",f.map(g=>({id:g.id,odp:g.odp_number,start:this.getTaskOccupiedSegments(g)[0]?.start?.toISOString()||g.scheduled_start_time,segments:this.getTaskOccupiedSegments(g).length}))),console.log(" ALL tasks on machine:",l().filter(g=>g.scheduled_machine_id===i&&g.status==="SCHEDULED").map(g=>({id:g.id,odp:g.odp_number,segments:this.getTaskOccupiedSegments(g).length,start:g.scheduled_start_time,end:g.scheduled_end_time,machine:g.scheduled_machine_id,hasCompleteScheduling:!!(g.scheduled_start_time&&g.scheduled_end_time&&g.scheduled_machine_id)}))));for(const g of f){console.log(` OVERLAP DEBUG: Checking against task ${g.odp_number} (ID: ${g.id})`);const p=this.checkTaskOverlap(e,n,g);if(p.hasOverlap)return console.error(` OVERLAP ERROR: Conflict detected with task ${g.odp_number}`),console.error(` OVERLAP ERROR: Task ID: ${g.id}`),console.error(` OVERLAP ERROR: New task time range: ${e.toISOString()} - ${n.toISOString()}`),console.error(" OVERLAP ERROR: Existing task segments:",this.getTaskOccupiedSegments(g)),console.error(" OVERLAP ERROR: Conflicting segment:",p.conflictingSegment),u.length>0&&(console.error(` Conflict detected with task ${g.odp_number} during shunting!`),console.error(`   Task ID: ${g.id}, Exclude IDs: ${u.join(", ")}`),console.error(`   New task time range: ${e.toISOString()} - ${n.toISOString()}`),console.error("   Existing task segments:",this.getTaskOccupiedSegments(g))),{hasOverlap:!0,conflictingTask:g,conflictingSegment:p.conflictingSegment}}return console.log(" OVERLAP DEBUG:  No overlaps detected"),{hasOverlap:!1}};migrateExistingTasksToSegmentFormat=async()=>{const{getOdpOrders:e}=Je.getState(),n=e();for(const i of n)if(i.status==="SCHEDULED"&&i.scheduled_start_time){const a=this.getSplitTaskInfo(i.id);if(a&&a.segments)continue;if(i.description)try{const g=JSON.parse(i.description);if(g.segments&&Array.isArray(g.segments)){this.setSplitTaskInfo(i.id,g);continue}}catch{}const o=new Date(i.scheduled_start_time),l=i.time_remaining||i.duration||1,u=new Date(o.getTime()+l*60*60*1e3),d=[{start:o,end:u,duration:l}],f=this.createSegmentInfo(d,l);await this.updateTaskWithSplitInfo(i.id,f)}};verifyAllTasksHaveSegmentInfo=()=>{const{getOdpOrders:e}=Je.getState(),i=e().filter(o=>o.status==="SCHEDULED"),a=[];for(const o of i){const l=this.getSplitTaskInfo(o.id);(!l||!l.segments)&&a.push({id:o.id,odp_number:o.odp_number,description:o.description})}return{totalScheduledTasks:i.length,tasksWithSegments:i.length-a.length,tasksWithoutSegments:a}}}class ED{constructor(e,n,i,a){this.get=e,this.set=n,this.splitTaskManager=i,this.machineAvailabilityManager=a}createAbsoluteDate=(e,n,i,a=0,o=0)=>new Date(Date.UTC(e,n-1,i,a,o,0,0));splitTaskAcrossAvailableSlots=(e,n,i,a)=>{try{const o=[];let l=new Date(e),u=n,d=!0;for(;d;){d=!1;for(const f of a)if(l>=f.start&&l<f.end){l=new Date(f.end),d=!0;break}}for(;u>0;){let f=null,g=null,p=null;for(const y of a){const b=new Date(y.start),S=new Date(y.end);b>=l&&(!f||b<g)&&(f=y,g=b,p=S)}if(f){const y=(g.getTime()-l.getTime())/36e5;if(y>0){const S=Math.min(y,u),w=new Date(l.getTime()+S*60*60*1e3);o.push({start:new Date(l),end:w,duration:S}),u-=S}l=new Date(p);let b=!0;for(;b;){b=!1;for(const S of a)if(l>=S.start&&l<S.end){l=new Date(S.end),b=!0;break}}}else{const y=new Date(l.getTime()+u*60*60*1e3);o.push({start:new Date(l),end:y,duration:u}),u=0}if(o.length>50){console.warn("Task splitting exceeded maximum segments limit");break}}return o}catch(o){return console.error("Error in splitTaskAcrossAvailableSlots:",o),[]}};splitTaskAcrossAvailableSlotsBackward=(e,n,i,a)=>{try{const o=[];let l=new Date(e),u=n,d=!0;for(;d;){d=!1;for(const g of a)if(l>g.start&&l<=g.end){l=new Date(g.start),d=!0;break}}for(;u>0;){let g=null,p=null,y=null;for(const C of a){const R=new Date(C.start),M=new Date(C.end);M<=l&&(!g||M>y)&&(g=C,p=R,y=M)}let b;g?b=new Date(y):b=new Date(l.getTime()-u*60*60*1e3);let S=!0;for(;S;){S=!1;for(const C of a)if(b<C.end&&b>=C.start){b=new Date(C.end),S=!0;break}}const w=(l.getTime()-b.getTime())/(1e3*60*60);if(w<=0){l=g?new Date(p):new Date(l.getTime()-3600*1e3);continue}const x=Math.min(w,u),E=new Date(l.getTime()-x*60*60*1e3);o.push({start:E,end:new Date(l),duration:x}),u-=x,l=new Date(E)}return o.reverse()}catch(o){return console.error("Error in splitTaskAcrossAvailableSlotsBackward:",o),[]}};collectUnavailableSlots=(e,n,i)=>{const a=[],o=this.createAbsoluteDate(e.getUTCFullYear(),e.getUTCMonth()+1,e.getUTCDate()),l=this.createAbsoluteDate(n.getUTCFullYear(),n.getUTCMonth()+1,n.getUTCDate()),u=new Date(l);u.setUTCDate(u.getUTCDate()+7);let d=new Date(o);for(;d<=u;){const f=qt(d),g=this.get().machineAvailability[f];if(g&&Array.isArray(g)){const p=g.find(y=>y.machine_id===i);if(p&&p.unavailable_hours&&Array.isArray(p.unavailable_hours)){const[y,b,S]=f.split("-").map(Number);for(const w of p.unavailable_hours){const x=this.createAbsoluteDate(y,b,S,parseInt(w),0),E=new Date(x.getTime()+3600*1e3);a.push({start:x,end:E,hour:parseInt(w),date:f})}}}d.setUTCDate(d.getUTCDate()+1)}return a.sort((f,g)=>f.start.getTime()-g.start.getTime())};loadMachineAvailabilityForExtendedRange=async(e,n,i)=>{const a=this.createAbsoluteDate(e.getUTCFullYear(),e.getUTCMonth()+1,e.getUTCDate()),o=new Date(e.getTime()+n*60*60*1e3),l=this.createAbsoluteDate(o.getUTCFullYear(),o.getUTCMonth()+1,o.getUTCDate()),u=new Date(l);u.setUTCDate(u.getUTCDate()+7);let d=new Date(a);for(;d<=u;){const f=qt(d);await this.machineAvailabilityManager.loadMachineAvailabilityForDate(f),d.setUTCDate(d.getUTCDate()+1)}return u};loadMachineAvailabilityForBackwardRange=async(e,n,i)=>{const a=this.createAbsoluteDate(e.getUTCFullYear(),e.getUTCMonth()+1,e.getUTCDate()),o=new Date(e.getTime()-n*60*60*1e3),l=this.createAbsoluteDate(o.getUTCFullYear(),o.getUTCMonth()+1,o.getUTCDate()),u=new Date(l);u.setUTCDate(u.getUTCDate()-7);let d=new Date(u);for(;d<=a;){const f=qt(d);await this.machineAvailabilityManager.loadMachineAvailabilityForDate(f),d.setUTCDate(d.getUTCDate()+1)}return{taskStartDateWithBuffer:u,taskEndDate:a}};checkSegmentsForOverlaps=(e,n,i,a=[])=>{const o=[i,...a].filter(l=>l);console.log(" SCHEDULING DEBUG: checkSegmentsForOverlaps called"),console.log(` SCHEDULING DEBUG: Machine ID: ${n}`),console.log(` SCHEDULING DEBUG: Exclude task ID: ${i}`),console.log(" SCHEDULING DEBUG: Additional exclude IDs:",a),console.log(" SCHEDULING DEBUG: All exclude IDs:",o),console.log(" SCHEDULING DEBUG: Segments to check:",e.length);for(const l of e){console.log(` SCHEDULING DEBUG: Checking segment: ${l.start.toISOString()} - ${l.end.toISOString()}`);const u=this.splitTaskManager.checkMachineOverlaps(l.start,l.end,n,i,a);if(u.hasOverlap)return console.error(" SCHEDULING ERROR: Overlap detected in segment"),console.error(` SCHEDULING DEBUG: Segment: ${l.start.toISOString()} - ${l.end.toISOString()}`),console.error(` SCHEDULING DEBUG: Conflicting task: ${u.conflictingTask?.odp_number} (ID: ${u.conflictingTask?.id})`),console.error(` SCHEDULING DEBUG: Conflicting segment: ${u.conflictingSegment?.start?.toISOString()} - ${u.conflictingSegment?.end?.toISOString()}`),{hasOverlap:!0,conflictingSegment:l,conflictingTask:u.conflictingTask,conflictingExistingSegment:u.conflictingSegment}}return console.log(" SCHEDULING DEBUG:  No overlaps detected"),{hasOverlap:!1}};scheduleTaskWithSplitting=async(e,n,i,a,o=[])=>{const l=await this.loadMachineAvailabilityForExtendedRange(n,i,a),u=this.collectUnavailableSlots(n,l,a),d=new Date(n.getTime()+i*60*60*1e3);if(u.some(g=>n<g.end&&d>g.start)){const g=this.splitTaskAcrossAvailableSlots(n,i,a,u);if(g.length>0){const p=this.checkSegmentsForOverlaps(g,a,e,o);if(p.hasOverlap)return{conflict:!0,conflictingTask:p.conflictingTask,conflictingSegment:p.conflictingExistingSegment,proposedSegments:g};const y=g[0],b=g[g.length-1],S=this.splitTaskManager.createSegmentInfo(g,i);return await this.splitTaskManager.updateTaskWithSplitInfo(e,S,y.start,b.end,a),{startTime:y.start,endTime:b.end,wasSplit:!0,segments:g,originalDuration:i}}}else{const g=[{start:n,end:d,duration:i}],p=this.checkSegmentsForOverlaps(g,a,e,o);if(p.hasOverlap)return{conflict:!0,conflictingTask:p.conflictingTask,conflictingSegment:p.conflictingExistingSegment,proposedSegments:g};const y=this.splitTaskManager.createSegmentInfo(g,i);return await this.splitTaskManager.updateTaskWithSplitInfo(e,y,n,d,a),{startTime:n,endTime:d,wasSplit:!1,segments:g,originalDuration:i}}return null};scheduleTaskEndingAtWithSplitting=async(e,n,i,a,o=[])=>{const{taskStartDateWithBuffer:l,taskEndDate:u}=await this.loadMachineAvailabilityForBackwardRange(n,i,a),d=this.collectUnavailableSlots(l,u,a),f=this.splitTaskAcrossAvailableSlotsBackward(n,i,a,d);if(f.length===0)return null;const g=this.checkSegmentsForOverlaps(f,a,e,o);if(g.hasOverlap)return{conflict:!0,conflictingTask:g.conflictingTask,conflictingSegment:g.conflictingExistingSegment,proposedSegments:f};const p=this.splitTaskManager.createSegmentInfo(f,i),y=f[0],b=f[f.length-1];return await this.splitTaskManager.updateTaskWithSplitInfo(e,p,y.start,b.end,a),{startTime:y.start,endTime:b.end,wasSplit:f.length>1,segments:f,originalDuration:i}}}class TD{constructor(e,n,i,a){this.get=e,this.set=n,this.schedulingLogic=i,this.splitTaskManager=a}getTaskDurationMinutes=e=>Math.round((e.time_remaining||e.duration||1)*60);getTaskEndTime=e=>{const n=new Date(e.scheduled_start_time),i=this.getTaskDurationMinutes(e);return new Date(n.getTime()+i*60*1e3)};addMinutesToDate=(e,n)=>new Date(e.getTime()+n*60*1e3);roundUpToNext15MinSlot=e=>{const n=e.getUTCMinutes(),i=e.getUTCHours(),a=Math.ceil(n/15)*15,o=new Date(e);return a===60?o.setUTCHours(i+1,0,0,0):o.setUTCMinutes(a,0,0),o};scheduleTaskWithSplittingForShunt=async(e,n,i)=>await this.scheduleTaskWithSplittingForShuntExcluding(e,n,i,[e.id]);scheduleTaskWithSplittingForShuntExcluding=async(e,n,i,a)=>{const o=this.getTaskDurationMinutes(e)/60,l=a.filter(d=>d!==e.id),u=await this.schedulingLogic.scheduleTaskWithSplitting(e.id,n,o,i.id,l);if(u&&!u.conflict)return{startTime:u.startTime,endTime:u.endTime,wasSplit:u.wasSplit};if(u&&u.conflict)throw console.error(` Conflict during shunting for task ${e.odp_number}:`,u),new Re(`Cannot shunt task ${e.odp_number}: would create new conflicts`,me.BUSINESS_LOGIC_ERROR,400,null,"ConflictResolution.scheduleTaskWithSplittingForShunt");return{startTime:n,endTime:this.addMinutesToDate(n,this.getTaskDurationMinutes(e)),wasSplit:!1}};checkShuntingOverlaps=(e,n,i=[])=>{const{getOdpOrders:a}=Je.getState(),o=a().filter(l=>l.scheduled_machine_id===n&&l.status==="SCHEDULED"&&!i.includes(l.id));for(const l of e)for(const u of o){const d=this.splitTaskManager.checkTaskOverlap(l.start,l.end,u);if(d.hasOverlap)return{hasOverlap:!0,conflictingTask:u,conflictingSegment:d.conflictingSegment,newTaskSegment:l}}return{hasOverlap:!1}};resolveConflictByShunting=async(e,n)=>{try{console.log(` SHUNTING START: Direction = ${n}`),console.log(` Shunting ${e.draggedTask?.odp_number} ${n} from ${e.conflictingTask?.odp_number}`);const{conflictingTask:i,draggedTask:a,proposedStartTime:o,machine:l}=e,u=new Date(o),{updateOdpOrder:d}=Je.getState(),{getOdpOrders:f}=Je.getState(),g=f().filter(I=>I.scheduled_machine_id===l.id&&I.status==="SCHEDULED"&&I.id!==a.id).sort((I,L)=>{const z=this.splitTaskManager.getTaskOccupiedSegments(I),P=this.splitTaskManager.getTaskOccupiedSegments(L),K=z.length>0?z[0].start:new Date(I.scheduled_start_time),X=P.length>0?P[0].start:new Date(L.scheduled_start_time);return K-X});console.log(` Found ${g.length} scheduled tasks on machine ${l.machine_name}`);const p=g.findIndex(I=>I.id===i.id);if(p===-1)throw new Re("Conflicting task not found",me.BUSINESS_LOGIC_ERROR,400,null,"ConflictResolution.resolveConflictByShunting");const y=this.getTaskDurationMinutes(a);console.log(` Dragged task duration: ${y} minutes`);const b=[];let S=!1;if(n==="right"){console.log(` RIGHT SHUNTING: Finding tasks to move right from index ${p}`);for(let I=p;I<g.length&&!S;I++){const L=g[I];if(b.push(L),I<g.length-1){const z=g[I+1],P=this.splitTaskManager.getTaskOccupiedSegments(L),K=this.splitTaskManager.getTaskOccupiedSegments(z);if(P.length>0&&K.length>0){const X=Math.max(...P.map(se=>se.end.getTime())),H=Math.min(...K.map(se=>se.start.getTime())),ee=Math.floor((H-X)/(60*1e3));console.log(` Gap between ${L.odp_number} and ${z.odp_number}: ${ee} minutes`),ee>=y&&(S=!0,console.log(` Found sufficient gap: ${ee} minutes >= ${y} minutes`))}}else S=!0,console.log(" Last task reached, infinite space available")}}else{console.log(` LEFT SHUNTING: Finding tasks to move left from index ${p}`);for(let I=p;I>=0&&!S;I--){const L=g[I];if(b.unshift(L),I>0){const z=g[I-1],P=this.splitTaskManager.getTaskOccupiedSegments(z),K=this.splitTaskManager.getTaskOccupiedSegments(L);if(P.length>0&&K.length>0){const X=Math.max(...P.map(se=>se.end.getTime())),H=Math.min(...K.map(se=>se.start.getTime())),ee=Math.floor((H-X)/(60*1e3));console.log(` Gap between ${z.odp_number} and ${L.odp_number}: ${ee} minutes`),ee>=y&&(S=!0,console.log(` Found sufficient gap: ${ee} minutes >= ${y} minutes`))}}else{const z=this.splitTaskManager.getTaskOccupiedSegments(L);if(z.length>0){const P=Math.min(...z.map(H=>H.start.getTime())),K=new Date(P);K.setHours(0,0,0,0);const X=Math.floor((P-K.getTime())/(60*1e3));console.log(` Gap at beginning of day: ${X} minutes`),X>=y&&(S=!0,console.log(` Found sufficient gap at day start: ${X} minutes >= ${y} minutes`))}}}}console.log(" SHUNTING DEBUG: Starting iterative conflict detection...");const w=new Set,x=new Set;for(const I of b)w.add(I.id),x.add(I.id);x.add(a.id);let E=0;const C=10;for(;E<C;){E++,console.log(` SHUNTING DEBUG: Iteration ${E} - Checking for new conflicts...`);let I=!1;const L=Array.from(w);for(const z of L){const P=g.find(se=>se.id===z)||a;if(!P)continue;console.log(` SHUNTING DEBUG: Checking conflicts for task ${P.odp_number}...`);let K;if(n==="right"){const se=new Date(u.getTime()+y*60*1e3);if(K=this.roundUpToNext15MinSlot(se),P.id!==a.id){const te=Array.from(w).indexOf(z);if(te>0){const U=Array.from(w)[te-1],Y=g.find(k=>k.id===U)||a,le=this.getTaskDurationMinutes(Y),ue=new Date(K.getTime()+le*60*1e3);K=this.roundUpToNext15MinSlot(ue)}}}else{const se=u,te=this.getTaskDurationMinutes(P);K=this.roundUpToNext15MinSlot(this.addMinutesToDate(se,-te))}console.log(` SHUNTING DEBUG: Task ${P.odp_number} would be moved to: ${K.toISOString()}`);const X=this.getTaskDurationMinutes(P)/60,H=this.schedulingLogic.collectUnavailableSlots(K,new Date(K.getTime()+X*60*60*1e3),l.id);if(H.some(se=>K<se.end&&new Date(K.getTime()+X*60*60*1e3)>se.start)){console.log(` SHUNTING DEBUG: Task ${P.odp_number} would be split, checking all segments...`);const se=this.schedulingLogic.splitTaskAcrossAvailableSlots(K,X,l.id,H);console.log(` SHUNTING DEBUG: Task ${P.odp_number} would be split into ${se.length} segments:`,se.map(te=>({start:te.start.toISOString(),end:te.end.toISOString(),duration:te.duration})));for(const te of se)for(const U of g)if(!x.has(U.id)&&U.id!==P.id){const Y=this.splitTaskManager.checkTaskOverlap(te.start,te.end,U);Y.hasOverlap&&(console.log(` SHUNTING DEBUG: Found new conflict with task ${U.odp_number} (ID: ${U.id}) from task ${P.odp_number}`),console.log(` SHUNTING DEBUG: Segment: ${te.start.toISOString()} - ${te.end.toISOString()}`),console.log(` SHUNTING DEBUG: Conflicting segment: ${Y.conflictingSegment?.start?.toISOString()} - ${Y.conflictingSegment?.end?.toISOString()}`),x.add(U.id),w.add(U.id),I=!0,console.log(` SHUNTING DEBUG: Added task ${U.odp_number} to move list`))}}else{console.log(` SHUNTING DEBUG: Task ${P.odp_number} would not be split, checking single time range...`);const se=new Date(K.getTime()+X*60*60*1e3);for(const te of g)!x.has(te.id)&&te.id!==P.id&&this.splitTaskManager.checkTaskOverlap(K,se,te).hasOverlap&&(console.log(` SHUNTING DEBUG: Found new conflict with task ${te.odp_number} (ID: ${te.id}) from task ${P.odp_number}`),x.add(te.id),w.add(te.id),I=!0,console.log(` SHUNTING DEBUG: Added task ${te.odp_number} to move list`))}}if(!I){console.log(` SHUNTING DEBUG: No new conflicts found in iteration ${E}, proceeding with shunting`);break}console.log(` SHUNTING DEBUG: New conflicts found in iteration ${E}, continuing...`)}if(E>=C)throw console.error(` SHUNTING ERROR: Maximum iterations (${C}) reached, possible infinite loop`),new Re("Too many conflicts detected during shunting",me.BUSINESS_LOGIC_ERROR,400,null,"ConflictResolution.resolveConflictByShunting");const R=g.filter(I=>w.has(I.id));if(console.log(` SHUNTING DEBUG: Final task list after ${E} iterations:`,R.map(I=>I.odp_number)),console.log(" SHUNTING DEBUG: All conflicting task IDs:",Array.from(x)),b.length=0,b.push(...R),!S&&b.length===g.length)throw new Re("Non c' spazio sufficiente per spostare i lavori",me.BUSINESS_LOGIC_ERROR,400,null,"ConflictResolution.resolveConflictByShunting");console.log(` Moving ${b.length} tasks ${n}:`,b.map(I=>I.odp_number));const M=[];let D=null;if(n==="right"){const I=new Date(u),L=[...Array.from(x)];console.log(` RIGHT SHUNTING: Scheduling dragged task ${a.odp_number} at ${I.toISOString()}`),console.log(" Excluding all conflicting tasks:",L),D=await this.scheduleTaskWithSplittingForShuntExcluding(a,I,l,L),console.log(" Dragged task scheduled (RIGHT):",{start:D.startTime.toISOString(),end:D.endTime.toISOString(),wasSplit:D.wasSplit});let z=this.roundUpToNext15MinSlot(D.endTime);for(const P of b){const K=[...Array.from(x)];console.log(` Shunting task ${P.odp_number} to ${z.toISOString()}`),console.log(" Excluding all conflicting tasks:",K);const X=await this.scheduleTaskWithSplittingForShuntExcluding(P,z,l,K);console.log(` Task ${P.odp_number} scheduled (RIGHT):`,{start:X.startTime.toISOString(),end:X.endTime.toISOString(),wasSplit:X.wasSplit}),M.push({id:P.id,scheduled_start_time:X.startTime.toISOString(),scheduled_end_time:X.endTime.toISOString()}),z=this.roundUpToNext15MinSlot(X.endTime)}}else{const I=new Date(u);let L=this.roundUpToNext15MinSlot(this.addMinutesToDate(I,-1));console.log(` LEFT SHUNTING: Working backwards from ${L.toISOString()}`);for(let z=b.length-1;z>=0;z--){const P=b[z],K=[...Array.from(x)];console.log(` Scheduling task ${P.odp_number} to END at ${L.toISOString()}`);const X=await this.schedulingLogic.scheduleTaskEndingAtWithSplitting(P.id,L,this.getTaskDurationMinutes(P)/60,l.id,K);console.log(` Task ${P.odp_number} scheduled (LEFT):`,{start:X.startTime.toISOString(),end:X.endTime.toISOString(),wasSplit:X.wasSplit}),M.push({id:P.id,scheduled_start_time:X.startTime.toISOString(),scheduled_end_time:X.endTime.toISOString()}),L=this.roundUpToNext15MinSlot(this.addMinutesToDate(X.startTime,-1))}}if(!D){const I=new Date(u),L=[...Array.from(x)];console.log(` Scheduling dragged task ${a.odp_number} at ${I.toISOString()}`),console.log(" Excluding all conflicting tasks:",L),D=await this.scheduleTaskWithSplittingForShuntExcluding(a,I,l,L)}console.log(` Dragged task ${a.odp_number} scheduled:`,{start:D.startTime.toISOString(),end:D.endTime.toISOString(),wasSplit:D.wasSplit}),M.push({id:a.id,scheduled_machine_id:l.id,scheduled_start_time:D.startTime.toISOString(),scheduled_end_time:D.endTime.toISOString(),status:"SCHEDULED"}),console.log(` Applying ${M.length} updates to database`);for(const I of M)await d(I.id,I),console.log(` Updated task ${I.id}:`,I);return console.log(` SHUNTING COMPLETE: ${M.length} tasks updated successfully`),Se.getState().hideConflictDialog(),Se.getState().showAlert("Lavori riprogrammati con successo","success"),{success:!0}}catch(i){return console.error(" SHUNTING ERROR:",i),{error:(i instanceof Re?i:new Re(i.message||"Errore durante la riprogrammazione",me.BUSINESS_LOGIC_ERROR,400,i,"ConflictResolution.resolveConflictByShunting")).message}}}}class CD{constructor(e,n){this.get=e,this.set=n}loadMachineAvailabilityForDate=async e=>{const{machineAvailability:n}=this.get();if(!n[e]?._loading&&!(n[e]&&n[e].length>=0)){this.set(i=>({machineAvailability:{...i.machineAvailability,[e]:{_loading:!0}}}));try{const i=await ct.getMachineAvailabilityForDateAllMachines(e);this.set(a=>({machineAvailability:{...a.machineAvailability,[e]:i||[]}}))}catch(i){throw this.set(a=>{const o={...a.machineAvailability};return o[e]&&delete o[e]._loading,{machineAvailability:o}}),i}}};loadMachineAvailabilityForDateRange=async(e,n,i)=>{const a=n instanceof Date?qt(n):n,o=i instanceof Date?qt(i):i;try{const l=await ct.getMachineAvailabilityForDateRange(e,a,o);return this.set(u=>{const d={...u.machineAvailability};return Array.isArray(l)&&l.forEach(f=>{if(f.date&&f.unavailable_hours){const g=f.date;d[g]||(d[g]=[]);const p=d[g].find(y=>y.machine_id===e);p?p.unavailable_hours=f.unavailable_hours:d[g].push({machine_id:e,date:g,unavailable_hours:f.unavailable_hours})}}),{machineAvailability:d}}),l}catch(l){throw l}};getMachineAvailability=async(e,n)=>{try{const i=this.get().machineAvailability[n];if(i&&Array.isArray(i)){const o=i.find(l=>l.machine_id===e);if(o)return o.unavailable_hours||[]}const a=await ct.getMachineAvailabilityForDate(e,n);if(a){const o=(a.unavailable_hours||[]).map(l=>l.toString());return this.set(l=>{const u={...l.machineAvailability};u[n]||(u[n]=[]);const d=u[n].find(f=>f.machine_id===e);return d?d.unavailable_hours=o:u[n].push({machine_id:e,date:n,unavailable_hours:o}),{machineAvailability:u}}),o}return[]}catch{return[]}};loadMachineAvailabilityForMachine=async(e,n,i)=>{const a={};try{try{await ct.getMachineAvailabilityForDate("test","2025-01-01")}catch{return{}}let o=new Date(n);for(;o<=i;){const l=qt(o);this.get().machineAvailability[l]||await this.loadMachineAvailabilityForDate(l);const d=this.get().machineAvailability[l];if(Array.isArray(d)){const f=d.find(g=>g.machine_id===e);f&&(a[l]=f.unavailable_hours||[])}o=Ll(o,1)}return a}catch{return{}}};isTimeSlotUnavailable=async(e,n,i)=>(await this.getMachineAvailability(e,n)).includes(i.toString());setMachineAvailability=async(e,n,i)=>{try{const{getOdpOrders:a}=Je.getState(),o=a().filter(f=>f.scheduled_machine_id===e&&f.status==="SCHEDULED"&&f.scheduled_start_time&&f.scheduled_end_time),l=new Date(n),u=new Date(l.getFullYear(),l.getMonth(),l.getDate()),d=new Date(u.getTime()+1440*60*1e3);for(const f of o){const g=new Date(f.scheduled_start_time),p=new Date(f.scheduled_end_time);if(g<d&&p>u)for(const y of i){const b=new Date(u.getTime()+parseInt(y)*60*60*1e3),S=new Date(b.getTime()+3600*1e3);if(b<p&&S>g)throw new Re(`Cannot set machine unavailable during scheduled task: ${f.odp_number}`,me.BUSINESS_LOGIC_ERROR,400,null,"MachineAvailabilityManager.setMachineUnavailability")}}return await ct.setMachineAvailability(e,n,i),this.set(f=>{const g={...f.machineAvailability};g[n]||(g[n]=[]);const p=g[n].find(y=>y.machine_id===e);return p?p.unavailable_hours=i:g[n].push({machine_id:e,date:n,unavailable_hours:i}),{machineAvailability:g}}),Se.getState().showAlert(`Machine availability updated successfully for ${n}`,"success"),!0}catch(a){const o=$n(a,"Machine Availability");throw Se.getState().showAlert(o.message,"error"),o}};toggleMachineHourAvailability=async(e,n,i)=>{try{const a=await this.getMachineAvailability(e,n),o=i.toString();let l;return a.includes(o)?l=a.filter(u=>u!==o):l=[...a,o].sort((u,d)=>parseInt(u)-parseInt(d)),await ct.setMachineAvailability(e,n,l),this.set(u=>{const d={...u.machineAvailability};d[n]||(d[n]=[]);const f=d[n].find(g=>g.machine_id===e);return f?f.unavailable_hours=l:d[n].push({machine_id:e,date:n,unavailable_hours:l}),{machineAvailability:d}}),Se.getState().showAlert(`Time slot ${o}:00 updated successfully`,"success"),!0}catch(a){const o=$n(a,"Machine Availability");throw Se.getState().showAlert(o.message,"error"),o}};setMachineUnavailability=async(e,n,i,a,o)=>{try{const l=await ct.setUnavailableHoursForRange(e,n,i,a,o),u=new Date(n),d=new Date(i),f=await this.loadMachineAvailabilityForDateRange(e,u,d);return f&&Array.isArray(f)&&this.set(g=>{const p={...g.machineAvailability};return f.forEach(y=>{if(y.date&&y.unavailable_hours){const b=qt(new Date(y.date));p[b]||(p[b]=[]);const S=p[b].find(w=>w.machine_id===e);S?S.unavailable_hours=y.unavailable_hours:p[b].push({machine_id:e,date:b,unavailable_hours:y.unavailable_hours})}}),{machineAvailability:p}}),l}catch(l){throw l}};isMachineAvailabilityAccessible=async()=>{try{return await ct.getMachineAvailabilityForDateAllMachines("2025-01-01"),!0}catch{return!1}};getMachineAvailabilityStatus=async()=>{try{const e=await this.isMachineAvailabilityAccessible();return{accessible:e,message:e?"Table is accessible":"Table is not accessible - check permissions or table existence"}}catch(e){return{accessible:!1,message:`Error checking table: ${e.message}`}}};initializeEmptyMachineAvailability=()=>{const{machineAvailability:e}=this.get(),n={...e};this.set({machineAvailability:n})}}const Pi=Jr((t,e)=>{const n=new xD(e,t),i=new CD(e,t),a=new ED(e,t,n,i),o=new TD(e,t,a,n);return{machineAvailability:{},shuntPreview:null,splitTasksInfo:{},getMachineAvailabilityState:()=>e().machineAvailability,getSplitTaskInfo:l=>n.getSplitTaskInfo(l),setMachineAvailabilityState:l=>t({machineAvailability:l}),setShuntPreview:l=>t({shuntPreview:l}),clearShuntPreview:()=>t({shuntPreview:null}),setSplitTaskInfo:n.setSplitTaskInfo,clearSplitTaskInfo:n.clearSplitTaskInfo,updateSplitTaskInfo:n.updateSplitTaskInfo,restoreSplitTaskInfo:n.restoreSplitTaskInfo,updateTaskWithSplitInfo:n.updateTaskWithSplitInfo,getTaskOccupiedSegments:n.getTaskOccupiedSegments,checkTaskOverlap:n.checkTaskOverlap,checkMachineOverlaps:n.checkMachineOverlaps,migrateExistingTasksToSegmentFormat:n.migrateExistingTasksToSegmentFormat,verifyAllTasksHaveSegmentInfo:n.verifyAllTasksHaveSegmentInfo,createAbsoluteDate:a.createAbsoluteDate,splitTaskAcrossAvailableSlots:a.splitTaskAcrossAvailableSlots,collectUnavailableSlots:a.collectUnavailableSlots,scheduleTaskWithSplitting:a.scheduleTaskWithSplitting,scheduleTaskFromSlot:async(l,u,d,f,g)=>{try{const{getOdpOrderById:p}=Je.getState(),{getMachineById:y}=sn.getState(),b=p(l),S=y(u.id);if(!b||!S)return{error:"Task or machine not found"};const w=d.getFullYear(),x=d.getMonth()+1,E=d.getDate(),C=a.createAbsoluteDate(w,x,E,f,g),R=b.time_remaining||b.duration||1,M={machine:u.id,start_time:C.toISOString(),end_time:Ib(C,R).toISOString()};return await e().scheduleTask(l,M)}catch(p){return{error:handleApiError(p,"SchedulerStore.scheduleTaskFromSlot").message}}},rescheduleTaskToSlot:async(l,u,d,f,g)=>{try{const{getOdpOrderById:p}=Je.getState(),{getMachineById:y}=sn.getState(),b=p(l),S=y(u.id);if(!b||!S)return{error:"Event or machine not found"};const w=d.getFullYear(),x=d.getMonth()+1,E=d.getDate(),C=a.createAbsoluteDate(w,x,E,f,g),R=b.time_remaining||b.duration||1,M={machine:u.id,start_time:C.toISOString(),end_time:Ib(C,R).toISOString()};return await e().scheduleTask(l,M)}catch(p){return{error:handleApiError(p,"SchedulerStore.rescheduleTaskToSlot").message}}},scheduleTask:async(l,u)=>{try{const{getOdpOrderById:d}=Je.getState(),{getMachineById:f}=sn.getState(),g=d(l),p=f(u.machine);if(g&&p&&g.work_center&&p.work_center&&g.work_center!==p.work_center)return{error:`Work center mismatch: task requires '${g.work_center}' but machine is '${p.work_center}'`};const y=new Date(u.start_time),b=g.time_remaining||g.duration||1,S=await a.scheduleTaskWithSplitting(l,y,b,u.machine);if(!S)return{error:"No available time slots found for this task"};if(S.conflict)return{conflict:!0,conflictingTask:S.conflictingTask,draggedTask:g,proposedStartTime:u.start_time,proposedEndTime:u.end_time,machine:p,conflictingSegment:S.conflictingSegment,proposedSegments:S.proposedSegments};u.start_time=S.startTime.toISOString(),u.end_time=S.endTime.toISOString();const w={scheduled_machine_id:u.machine,scheduled_start_time:u.start_time,scheduled_end_time:u.end_time,status:"SCHEDULED"};if(S.segments){const C={segments:S.segments,totalSegments:S.segments.length,originalDuration:S.originalDuration||g.time_remaining||g.duration||1,wasSplit:S.wasSplit||!1};w.description=JSON.stringify(C)}const{updateOdpOrder:x}=Je.getState(),E=await x(l,w);if(S.segments){const C={segments:S.segments,totalSegments:S.segments.length,originalDuration:S.originalDuration||g.time_remaining||g.duration||1,wasSplit:S.wasSplit||!1};n.setSplitTaskInfo(l,C)}return{success:!0}}catch(d){return{error:handleApiError(d,"SchedulerStore.scheduleTask").message}}},unscheduleTask:async l=>{const u={scheduled_machine_id:null,scheduled_start_time:null,scheduled_end_time:null,status:"NOT SCHEDULED"};await n.updateTaskWithSplitInfo(l,null);const{updateOdpOrder:d}=Je.getState();await d(l,u)},loadMachineAvailabilityForDate:i.loadMachineAvailabilityForDate,loadMachineAvailabilityForDateRange:i.loadMachineAvailabilityForDateRange,getMachineAvailability:i.getMachineAvailability,loadMachineAvailabilityForMachine:i.loadMachineAvailabilityForMachine,isTimeSlotUnavailable:i.isTimeSlotUnavailable,setMachineAvailability:i.setMachineAvailability,toggleMachineHourAvailability:i.toggleMachineHourAvailability,setMachineUnavailability:i.setMachineUnavailability,isMachineAvailabilityAccessible:i.isMachineAvailabilityAccessible,getMachineAvailabilityStatus:i.getMachineAvailabilityStatus,initializeEmptyMachineAvailability:i.initializeEmptyMachineAvailability,resolveConflictByShunting:o.resolveConflictByShunting,validateSlotAvailability:async(l,u,d,f)=>{try{const g=qt(u);if(await e().isTimeSlotUnavailable(l.id,g,d))return{error:"Cannot schedule task on unavailable time slot"};const{getOdpOrders:y}=Je.getState(),b=new Date(u);b.setHours(d,f,0,0);const S=new Date(b.getTime()+3600*1e3),w=y().filter(x=>x.scheduled_machine_id===l.id&&x.status==="SCHEDULED"&&x.scheduled_start_time);for(const x of w){const E=new Date(x.scheduled_start_time),C=x.time_remaining||x.duration||1,R=new Date(E.getTime()+C*60*60*1e3);if(b<R&&S>E)return{error:"Cannot schedule task on occupied time slot"}}return{success:!0}}catch(g){return{error:handleApiError(g,"SchedulerStore.validateSlotAvailability").message}}},getEventsByDate:async l=>{try{return await ct.getEventsByDate(l)}catch{return[]}},reset:()=>t({machineAvailability:{},shuntPreview:null,splitTasksInfo:{}})}}),RD=(t,e)=>{const n=o=>{OD(o)},i=o=>{DD(o)},a=o=>{MD(o)};return ct.setupRealtimeSubscriptions(n,i,a)},Fg=()=>{window.realtimeChannel&&(ct.cleanupRealtimeSubscriptions(window.realtimeChannel),window.realtimeChannel=null)};let Sl=null;typeof window<"u"&&(Sl=()=>{Fg()},window.addEventListener("beforeunload",Sl));const AD=()=>{typeof window<"u"&&Sl&&(window.removeEventListener("beforeunload",Sl),Sl=null)},OD=(t,e,n)=>{const{eventType:i,newRecord:a,oldRecord:o}=t,{setOdpOrders:l,getOdpOrders:u}=Je.getState(),{updateSplitTaskInfo:d}=Pi.getState();switch(i){case"INSERT":l([...u(),a]),a.status==="SCHEDULED"&&d(a.id,a);break;case"UPDATE":l(u().map(f=>f.id===a.id?a:f)),d(a.id,a);break;case"DELETE":l(u().filter(f=>f.id!==o.id));break}},DD=(t,e,n)=>{const{eventType:i,newRecord:a,oldRecord:o}=t,{setMachines:l,getMachines:u}=sn.getState();switch(i){case"INSERT":l([...u(),a]);break;case"UPDATE":l(u().map(d=>d.id===a.id?a:d));break;case"DELETE":l(u().filter(d=>d.id!==o.id));break}},MD=(t,e,n)=>{const{eventType:i,newRecord:a,oldRecord:o}=t,{setPhases:l,getPhases:u}=ni.getState();switch(i){case"INSERT":l([...u(),a]);break;case"UPDATE":l(u().map(d=>d.id===a.id?a:d));break;case"DELETE":l(u().filter(d=>d.id!==o.id));break}},zi=Jr((t,e)=>({init:async()=>{const{getInitializationState:n,setLoading:i,setInitialized:a,showAlert:o}=Se.getState(),{setMachines:l}=sn.getState(),{setOdpOrders:u}=Je.getState(),{setPhases:d}=ni.getState(),{initializeEmptyMachineAvailability:f}=Pi.getState();if(!n()){i(!0);try{let g=!1,p=0;const y=3;for(;!g&&p<y;)try{await ct.init(),g=!0}catch(x){p++;const E=$n(x,"API Service Initialization");if(p>=y)throw gi(E,"API Service Initialization - Final Attempt Failed"),i(!1),a(!1),o("Unable to connect to the server. Please check your internet connection and refresh the page.","error"),new Re("API service initialization failed after multiple attempts","CRITICAL_INIT_ERROR",503,E,"Store Initialization");const C=Math.min(1e3*Math.pow(2,p-1),1e4);await new Promise(R=>setTimeout(R,C)),o(`Connection attempt ${p} failed. Retrying...`,"warning")}let b=[],S=[],w=[];try{b=await ct.getMachines()}catch(x){const E=$n(x,"Machines Data Fetch");gi(E,"Machines Data Fetch Failed"),o("Warning: Unable to load machine data. Some features may be limited.","warning")}try{S=await ct.getOdpOrders()}catch(x){const E=$n(x,"Orders Data Fetch");gi(E,"Orders Data Fetch Failed"),o("Warning: Unable to load order data. Some features may be limited.","warning")}try{w=await ct.getPhases()}catch(x){const E=$n(x,"Phases Data Fetch");gi(E,"Phases Data Fetch Failed"),o("Warning: Unable to load phase data. Some features may be limited.","warning")}try{const x=[],E=new Set;b&&b.length>0&&b.forEach(D=>{E.has(D.id)||(E.add(D.id),x.push(D))}),l(x),u(S||[]),d(w||[]),f();const{restoreSplitTaskInfo:C,migrateExistingTasksToSegmentFormat:R}=Pi.getState();if(C(),await R(),!window.realtimeChannel)try{const D=RD(t,e);D&&(window.realtimeChannel=D)}catch(D){const I=$n(D,"Real-time Subscriptions Setup");gi(I,"Real-time Subscriptions Setup Failed"),o("Warning: Real-time updates are not available. Data may not update automatically.","warning")}i(!1),a(!0);const M=x.length+(S?.length||0)+(w?.length||0);M>0?o(`Application initialized successfully. Loaded ${M} data items.`,"success"):o("Application initialized with limited functionality due to data loading issues.","warning")}catch(x){const E=$n(x,"Data Processing");throw gi(E,"Data Processing Failed"),i(!1),a(!1),o("Failed to process application data. Please refresh the page.","error"),E}}catch(g){const p=g instanceof Re?g:$n(g,"Store Initialization");throw gi(p,"Store Initialization - Unexpected Error"),i(!1),a(!1),p.code==="CRITICAL_INIT_ERROR"?o("Critical initialization error. Please contact support if the problem persists.","error"):o("Application initialization failed. Please refresh the page or contact support.","error"),p}}},refreshData:async()=>{const{setLoading:n}=Se.getState(),{setMachines:i}=sn.getState(),{setOdpOrders:a}=Je.getState(),{setPhases:o}=ni.getState();n(!0);try{const[l,u,d]=await Promise.all([ct.getMachines(),ct.getOdpOrders(),ct.getPhases()]);i(l||[]),a(u||[]),o(d||[]),n(!1)}catch{n(!1)}},debugData:()=>{const{getMachines:n}=sn.getState(),{getOdpOrders:i}=Je.getState(),{getPhases:a}=ni.getState(),o=n().map(d=>d.id);o.filter((d,f)=>o.indexOf(d)!==f);const l=i().map(d=>d.id);l.filter((d,f)=>l.indexOf(d)!==f);const u=a().map(d=>d.id);u.filter((d,f)=>u.indexOf(d)!==f)},cleanupDuplicates:()=>{const{cleanupDuplicateMachines:n}=sn.getState(),{cleanupDuplicateOrders:i}=Je.getState(),{cleanupDuplicatePhases:a}=ni.getState();n(),i(),a()},reset:()=>{Fg();const{reset:n}=sn.getState(),{reset:i}=Je.getState(),{reset:a}=ni.getState(),{reset:o}=Pi.getState(),{reset:l}=Se.getState();n(),i(),a(),o(),l()},cleanup:()=>{Fg(),AD()},getState:()=>{const{getMachines:n}=sn.getState(),{getOdpOrders:i}=Je.getState(),{getPhases:a}=ni.getState(),{getLoadingState:o,getInitializationState:l}=Se.getState();return{machines:n(),odpOrders:i(),phases:a(),machineAvailability:Pi.getState().getMachineAvailabilityState(),isLoading:o(),isInitialized:l()}}}));function kD(){const{user:t,signOut:e}=Xl(),{selectedWorkCenter:n}=Se(),i=_s(),a=na(),o=[{href:"/",label:"Home"},{href:"/machinery",label:"Macchine",subLinks:[{href:"/machinery",label:"Lista"},{href:"/machinery/add",label:"Aggiungi"}]},{href:"/phases",label:"Fasi",subLinks:[{href:"/phases",label:"Lista"},{href:"/phases/add",label:"Aggiungi"}]},{href:"/backlog",label:"Backlog",subLinks:[{href:"/backlog",label:"Lista"},{href:"/backlog/add",label:"Aggiungi"}]},{href:"/scheduler",label:"Scheduler"}],l=async()=>{try{await e(),a("/login")}catch(u){console.error("Sign out error:",u)}};return t?_.jsxs("nav",{className:"sidebar",children:[_.jsx("div",{className:"sidebar-logo",children:_.jsxs(xn,{to:"/",children:[_.jsx("span",{className:"logo-flex",children:"flex"}),_.jsx("span",{className:"logo-i",children:"i"})]})}),_.jsxs("div",{className:"sidebar-links",children:[_.jsx("h3",{className:"sidebar-section-title",children:"NAVIGATION"}),o.map(u=>{const d=i.pathname===u.href||u.subLinks&&u.subLinks.some(f=>i.pathname===f.href);return _.jsxs("div",{className:"nav-item",children:[_.jsx(xn,{to:u.href,className:`sidebar-link ${d?"active":""}`,children:_.jsx("span",{children:u.label})}),u.subLinks&&_.jsx("div",{className:"sub-nav",children:u.subLinks.map(f=>_.jsx(xn,{to:f.href,className:`sub-nav-link ${i.pathname===f.href?"active":""}`,children:_.jsx("span",{children:f.label})},f.href))})]},u.href)})]}),_.jsxs("div",{className:"sidebar-user",children:[_.jsx("div",{className:"user-avatar",children:t.email?t.email.charAt(0).toUpperCase():"U"}),_.jsxs("div",{className:"user-info",children:[_.jsx("div",{className:"user-email",children:t.email}),n&&_.jsxs("div",{className:"work-center-badge",children:["WC: ",n]}),_.jsx("div",{className:"realtime-status",children:_.jsx("span",{className:"status-indicator offline",children:"OFFLINE"})})]})]}),_.jsxs("div",{className:"sidebar-actions",children:[_.jsx("h3",{className:"sidebar-section-title",children:"ACCOUNT"}),_.jsx("button",{onClick:l,className:"sidebar-action-btn signout-btn",children:_.jsx("span",{children:"Esci"})})]})]}):_.jsxs("nav",{className:"sidebar",children:[_.jsx("div",{className:"sidebar-logo",children:_.jsxs(xn,{to:"/login",children:[_.jsx("span",{className:"logo-flex",children:"flex"}),_.jsx("span",{className:"logo-i",children:"i"})]})}),_.jsxs("div",{className:"sidebar-links",children:[_.jsx("h3",{className:"sidebar-section-title",children:"NAVIGATION"}),_.jsx(xn,{to:"/login",className:"sidebar-link",children:_.jsx("span",{children:"Accedi"})}),_.jsx(xn,{to:"/signup",className:"sidebar-link",children:_.jsx("span",{children:"Registrati"})})]})]})}/**
   * table-core
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function Qs(t,e){return typeof t=="function"?t(e):t}function Vn(t,e){return n=>{e.setState(i=>({...i,[t]:Qs(n,i[t])}))}}function bd(t){return t instanceof Function}function ND(t){return Array.isArray(t)&&t.every(e=>typeof e=="number")}function jD(t,e){const n=[],i=a=>{a.forEach(o=>{n.push(o);const l=e(o);l!=null&&l.length&&i(l)})};return i(t),n}function Oe(t,e,n){let i=[],a;return o=>{let l;n.key&&n.debug&&(l=Date.now());const u=t(o);if(!(u.length!==i.length||u.some((g,p)=>i[p]!==g)))return a;i=u;let f;if(n.key&&n.debug&&(f=Date.now()),a=e(...u),n==null||n.onChange==null||n.onChange(a),n.key&&n.debug&&n!=null&&n.debug()){const g=Math.round((Date.now()-l)*100)/100,p=Math.round((Date.now()-f)*100)/100,y=p/16,b=(S,w)=>{for(S=String(S);S.length<w;)S=" "+S;return S};console.info(`%c ${b(p,5)} /${b(g,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*y,120))}deg 100% 31%);`,n?.key)}return a}}function De(t,e,n,i){return{debug:()=>{var a;return(a=t?.debugAll)!=null?a:t[e]},key:!1,onChange:i}}function LD(t,e,n,i){const a=()=>{var l;return(l=o.getValue())!=null?l:t.options.renderFallbackValue},o={id:`${e.id}_${n.id}`,row:e,column:n,getValue:()=>e.getValue(i),renderValue:a,getContext:Oe(()=>[t,n,e,o],(l,u,d,f)=>({table:l,column:u,row:d,cell:f,getValue:f.getValue,renderValue:f.renderValue}),De(t.options,"debugCells"))};return t._features.forEach(l=>{l.createCell==null||l.createCell(o,n,e,t)},{}),o}function ID(t,e,n,i){var a,o;const u={...t._getDefaultColumnDef(),...e},d=u.accessorKey;let f=(a=(o=u.id)!=null?o:d?typeof String.prototype.replaceAll=="function"?d.replaceAll(".","_"):d.replace(/\./g,"_"):void 0)!=null?a:typeof u.header=="string"?u.header:void 0,g;if(u.accessorFn?g=u.accessorFn:d&&(d.includes(".")?g=y=>{let b=y;for(const w of d.split(".")){var S;b=(S=b)==null?void 0:S[w]}return b}:g=y=>y[u.accessorKey]),!f)throw new Error;let p={id:`${String(f)}`,accessorFn:g,parent:i,depth:n,columnDef:u,columns:[],getFlatColumns:Oe(()=>[!0],()=>{var y;return[p,...(y=p.columns)==null?void 0:y.flatMap(b=>b.getFlatColumns())]},De(t.options,"debugColumns")),getLeafColumns:Oe(()=>[t._getOrderColumnsFn()],y=>{var b;if((b=p.columns)!=null&&b.length){let S=p.columns.flatMap(w=>w.getLeafColumns());return y(S)}return[p]},De(t.options,"debugColumns"))};for(const y of t._features)y.createColumn==null||y.createColumn(p,t);return p}const pn="debugHeaders";function Ub(t,e,n){var i;let o={id:(i=n.id)!=null?i:e.id,column:e,index:n.index,isPlaceholder:!!n.isPlaceholder,placeholderId:n.placeholderId,depth:n.depth,subHeaders:[],colSpan:0,rowSpan:0,headerGroup:null,getLeafHeaders:()=>{const l=[],u=d=>{d.subHeaders&&d.subHeaders.length&&d.subHeaders.map(u),l.push(d)};return u(o),l},getContext:()=>({table:t,header:o,column:e})};return t._features.forEach(l=>{l.createHeader==null||l.createHeader(o,t)}),o}const UD={createTable:t=>{t.getHeaderGroups=Oe(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,n,i,a)=>{var o,l;const u=(o=i?.map(p=>n.find(y=>y.id===p)).filter(Boolean))!=null?o:[],d=(l=a?.map(p=>n.find(y=>y.id===p)).filter(Boolean))!=null?l:[],f=n.filter(p=>!(i!=null&&i.includes(p.id))&&!(a!=null&&a.includes(p.id)));return xu(e,[...u,...f,...d],t)},De(t.options,pn)),t.getCenterHeaderGroups=Oe(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,n,i,a)=>(n=n.filter(o=>!(i!=null&&i.includes(o.id))&&!(a!=null&&a.includes(o.id))),xu(e,n,t,"center")),De(t.options,pn)),t.getLeftHeaderGroups=Oe(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.left],(e,n,i)=>{var a;const o=(a=i?.map(l=>n.find(u=>u.id===l)).filter(Boolean))!=null?a:[];return xu(e,o,t,"left")},De(t.options,pn)),t.getRightHeaderGroups=Oe(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.right],(e,n,i)=>{var a;const o=(a=i?.map(l=>n.find(u=>u.id===l)).filter(Boolean))!=null?a:[];return xu(e,o,t,"right")},De(t.options,pn)),t.getFooterGroups=Oe(()=>[t.getHeaderGroups()],e=>[...e].reverse(),De(t.options,pn)),t.getLeftFooterGroups=Oe(()=>[t.getLeftHeaderGroups()],e=>[...e].reverse(),De(t.options,pn)),t.getCenterFooterGroups=Oe(()=>[t.getCenterHeaderGroups()],e=>[...e].reverse(),De(t.options,pn)),t.getRightFooterGroups=Oe(()=>[t.getRightHeaderGroups()],e=>[...e].reverse(),De(t.options,pn)),t.getFlatHeaders=Oe(()=>[t.getHeaderGroups()],e=>e.map(n=>n.headers).flat(),De(t.options,pn)),t.getLeftFlatHeaders=Oe(()=>[t.getLeftHeaderGroups()],e=>e.map(n=>n.headers).flat(),De(t.options,pn)),t.getCenterFlatHeaders=Oe(()=>[t.getCenterHeaderGroups()],e=>e.map(n=>n.headers).flat(),De(t.options,pn)),t.getRightFlatHeaders=Oe(()=>[t.getRightHeaderGroups()],e=>e.map(n=>n.headers).flat(),De(t.options,pn)),t.getCenterLeafHeaders=Oe(()=>[t.getCenterFlatHeaders()],e=>e.filter(n=>{var i;return!((i=n.subHeaders)!=null&&i.length)}),De(t.options,pn)),t.getLeftLeafHeaders=Oe(()=>[t.getLeftFlatHeaders()],e=>e.filter(n=>{var i;return!((i=n.subHeaders)!=null&&i.length)}),De(t.options,pn)),t.getRightLeafHeaders=Oe(()=>[t.getRightFlatHeaders()],e=>e.filter(n=>{var i;return!((i=n.subHeaders)!=null&&i.length)}),De(t.options,pn)),t.getLeafHeaders=Oe(()=>[t.getLeftHeaderGroups(),t.getCenterHeaderGroups(),t.getRightHeaderGroups()],(e,n,i)=>{var a,o,l,u,d,f;return[...(a=(o=e[0])==null?void 0:o.headers)!=null?a:[],...(l=(u=n[0])==null?void 0:u.headers)!=null?l:[],...(d=(f=i[0])==null?void 0:f.headers)!=null?d:[]].map(g=>g.getLeafHeaders()).flat()},De(t.options,pn))}};function xu(t,e,n,i){var a,o;let l=0;const u=function(y,b){b===void 0&&(b=1),l=Math.max(l,b),y.filter(S=>S.getIsVisible()).forEach(S=>{var w;(w=S.columns)!=null&&w.length&&u(S.columns,b+1)},0)};u(t);let d=[];const f=(y,b)=>{const S={depth:b,id:[i,`${b}`].filter(Boolean).join("_"),headers:[]},w=[];y.forEach(x=>{const E=[...w].reverse()[0],C=x.column.depth===S.depth;let R,M=!1;if(C&&x.column.parent?R=x.column.parent:(R=x.column,M=!0),E&&E?.column===R)E.subHeaders.push(x);else{const D=Ub(n,R,{id:[i,b,R.id,x?.id].filter(Boolean).join("_"),isPlaceholder:M,placeholderId:M?`${w.filter(I=>I.column===R).length}`:void 0,depth:b,index:w.length});D.subHeaders.push(x),w.push(D)}S.headers.push(x),x.headerGroup=S}),d.push(S),b>0&&f(w,b-1)},g=e.map((y,b)=>Ub(n,y,{depth:l,index:b}));f(g,l-1),d.reverse();const p=y=>y.filter(S=>S.column.getIsVisible()).map(S=>{let w=0,x=0,E=[0];S.subHeaders&&S.subHeaders.length?(E=[],p(S.subHeaders).forEach(R=>{let{colSpan:M,rowSpan:D}=R;w+=M,E.push(D)})):w=1;const C=Math.min(...E);return x=x+C,S.colSpan=w,S.rowSpan=x,{colSpan:w,rowSpan:x}});return p((a=(o=d[0])==null?void 0:o.headers)!=null?a:[]),d}const PD=(t,e,n,i,a,o,l)=>{let u={id:e,index:i,original:n,depth:a,parentId:l,_valuesCache:{},_uniqueValuesCache:{},getValue:d=>{if(u._valuesCache.hasOwnProperty(d))return u._valuesCache[d];const f=t.getColumn(d);if(f!=null&&f.accessorFn)return u._valuesCache[d]=f.accessorFn(u.original,i),u._valuesCache[d]},getUniqueValues:d=>{if(u._uniqueValuesCache.hasOwnProperty(d))return u._uniqueValuesCache[d];const f=t.getColumn(d);if(f!=null&&f.accessorFn)return f.columnDef.getUniqueValues?(u._uniqueValuesCache[d]=f.columnDef.getUniqueValues(u.original,i),u._uniqueValuesCache[d]):(u._uniqueValuesCache[d]=[u.getValue(d)],u._uniqueValuesCache[d])},renderValue:d=>{var f;return(f=u.getValue(d))!=null?f:t.options.renderFallbackValue},subRows:[],getLeafRows:()=>jD(u.subRows,d=>d.subRows),getParentRow:()=>u.parentId?t.getRow(u.parentId,!0):void 0,getParentRows:()=>{let d=[],f=u;for(;;){const g=f.getParentRow();if(!g)break;d.push(g),f=g}return d.reverse()},getAllCells:Oe(()=>[t.getAllLeafColumns()],d=>d.map(f=>LD(t,u,f,f.id)),De(t.options,"debugRows")),_getAllCellsByColumnId:Oe(()=>[u.getAllCells()],d=>d.reduce((f,g)=>(f[g.column.id]=g,f),{}),De(t.options,"debugRows"))};for(let d=0;d<t._features.length;d++){const f=t._features[d];f==null||f.createRow==null||f.createRow(u,t)}return u},FD={createColumn:(t,e)=>{t._getFacetedRowModel=e.options.getFacetedRowModel&&e.options.getFacetedRowModel(e,t.id),t.getFacetedRowModel=()=>t._getFacetedRowModel?t._getFacetedRowModel():e.getPreFilteredRowModel(),t._getFacetedUniqueValues=e.options.getFacetedUniqueValues&&e.options.getFacetedUniqueValues(e,t.id),t.getFacetedUniqueValues=()=>t._getFacetedUniqueValues?t._getFacetedUniqueValues():new Map,t._getFacetedMinMaxValues=e.options.getFacetedMinMaxValues&&e.options.getFacetedMinMaxValues(e,t.id),t.getFacetedMinMaxValues=()=>{if(t._getFacetedMinMaxValues)return t._getFacetedMinMaxValues()}}},fw=(t,e,n)=>{var i,a;const o=n==null||(i=n.toString())==null?void 0:i.toLowerCase();return!!(!((a=t.getValue(e))==null||(a=a.toString())==null||(a=a.toLowerCase())==null)&&a.includes(o))};fw.autoRemove=t=>yi(t);const gw=(t,e,n)=>{var i;return!!(!((i=t.getValue(e))==null||(i=i.toString())==null)&&i.includes(n))};gw.autoRemove=t=>yi(t);const mw=(t,e,n)=>{var i;return((i=t.getValue(e))==null||(i=i.toString())==null?void 0:i.toLowerCase())===n?.toLowerCase()};mw.autoRemove=t=>yi(t);const pw=(t,e,n)=>{var i;return(i=t.getValue(e))==null?void 0:i.includes(n)};pw.autoRemove=t=>yi(t);const vw=(t,e,n)=>!n.some(i=>{var a;return!((a=t.getValue(e))!=null&&a.includes(i))});vw.autoRemove=t=>yi(t)||!(t!=null&&t.length);const yw=(t,e,n)=>n.some(i=>{var a;return(a=t.getValue(e))==null?void 0:a.includes(i)});yw.autoRemove=t=>yi(t)||!(t!=null&&t.length);const _w=(t,e,n)=>t.getValue(e)===n;_w.autoRemove=t=>yi(t);const bw=(t,e,n)=>t.getValue(e)==n;bw.autoRemove=t=>yi(t);const bm=(t,e,n)=>{let[i,a]=n;const o=t.getValue(e);return o>=i&&o<=a};bm.resolveFilterValue=t=>{let[e,n]=t,i=typeof e!="number"?parseFloat(e):e,a=typeof n!="number"?parseFloat(n):n,o=e===null||Number.isNaN(i)?-1/0:i,l=n===null||Number.isNaN(a)?1/0:a;if(o>l){const u=o;o=l,l=u}return[o,l]};bm.autoRemove=t=>yi(t)||yi(t[0])&&yi(t[1]);const hs={includesString:fw,includesStringSensitive:gw,equalsString:mw,arrIncludes:pw,arrIncludesAll:vw,arrIncludesSome:yw,equals:_w,weakEquals:bw,inNumberRange:bm};function yi(t){return t==null||t===""}const zD={getDefaultColumnDef:()=>({filterFn:"auto"}),getInitialState:t=>({columnFilters:[],...t}),getDefaultOptions:t=>({onColumnFiltersChange:Vn("columnFilters",t),filterFromLeafRows:!1,maxLeafRowFilterDepth:100}),createColumn:(t,e)=>{t.getAutoFilterFn=()=>{const n=e.getCoreRowModel().flatRows[0],i=n?.getValue(t.id);return typeof i=="string"?hs.includesString:typeof i=="number"?hs.inNumberRange:typeof i=="boolean"||i!==null&&typeof i=="object"?hs.equals:Array.isArray(i)?hs.arrIncludes:hs.weakEquals},t.getFilterFn=()=>{var n,i;return bd(t.columnDef.filterFn)?t.columnDef.filterFn:t.columnDef.filterFn==="auto"?t.getAutoFilterFn():(n=(i=e.options.filterFns)==null?void 0:i[t.columnDef.filterFn])!=null?n:hs[t.columnDef.filterFn]},t.getCanFilter=()=>{var n,i,a;return((n=t.columnDef.enableColumnFilter)!=null?n:!0)&&((i=e.options.enableColumnFilters)!=null?i:!0)&&((a=e.options.enableFilters)!=null?a:!0)&&!!t.accessorFn},t.getIsFiltered=()=>t.getFilterIndex()>-1,t.getFilterValue=()=>{var n;return(n=e.getState().columnFilters)==null||(n=n.find(i=>i.id===t.id))==null?void 0:n.value},t.getFilterIndex=()=>{var n,i;return(n=(i=e.getState().columnFilters)==null?void 0:i.findIndex(a=>a.id===t.id))!=null?n:-1},t.setFilterValue=n=>{e.setColumnFilters(i=>{const a=t.getFilterFn(),o=i?.find(g=>g.id===t.id),l=Qs(n,o?o.value:void 0);if(Pb(a,l,t)){var u;return(u=i?.filter(g=>g.id!==t.id))!=null?u:[]}const d={id:t.id,value:l};if(o){var f;return(f=i?.map(g=>g.id===t.id?d:g))!=null?f:[]}return i!=null&&i.length?[...i,d]:[d]})}},createRow:(t,e)=>{t.columnFilters={},t.columnFiltersMeta={}},createTable:t=>{t.setColumnFilters=e=>{const n=t.getAllLeafColumns(),i=a=>{var o;return(o=Qs(e,a))==null?void 0:o.filter(l=>{const u=n.find(d=>d.id===l.id);if(u){const d=u.getFilterFn();if(Pb(d,l.value,u))return!1}return!0})};t.options.onColumnFiltersChange==null||t.options.onColumnFiltersChange(i)},t.resetColumnFilters=e=>{var n,i;t.setColumnFilters(e?[]:(n=(i=t.initialState)==null?void 0:i.columnFilters)!=null?n:[])},t.getPreFilteredRowModel=()=>t.getCoreRowModel(),t.getFilteredRowModel=()=>(!t._getFilteredRowModel&&t.options.getFilteredRowModel&&(t._getFilteredRowModel=t.options.getFilteredRowModel(t)),t.options.manualFiltering||!t._getFilteredRowModel?t.getPreFilteredRowModel():t._getFilteredRowModel())}};function Pb(t,e,n){return(t&&t.autoRemove?t.autoRemove(e,n):!1)||typeof e>"u"||typeof e=="string"&&!e}const BD=(t,e,n)=>n.reduce((i,a)=>{const o=a.getValue(t);return i+(typeof o=="number"?o:0)},0),HD=(t,e,n)=>{let i;return n.forEach(a=>{const o=a.getValue(t);o!=null&&(i>o||i===void 0&&o>=o)&&(i=o)}),i},$D=(t,e,n)=>{let i;return n.forEach(a=>{const o=a.getValue(t);o!=null&&(i<o||i===void 0&&o>=o)&&(i=o)}),i},VD=(t,e,n)=>{let i,a;return n.forEach(o=>{const l=o.getValue(t);l!=null&&(i===void 0?l>=l&&(i=a=l):(i>l&&(i=l),a<l&&(a=l)))}),[i,a]},GD=(t,e)=>{let n=0,i=0;if(e.forEach(a=>{let o=a.getValue(t);o!=null&&(o=+o)>=o&&(++n,i+=o)}),n)return i/n},qD=(t,e)=>{if(!e.length)return;const n=e.map(o=>o.getValue(t));if(!ND(n))return;if(n.length===1)return n[0];const i=Math.floor(n.length/2),a=n.sort((o,l)=>o-l);return n.length%2!==0?a[i]:(a[i-1]+a[i])/2},YD=(t,e)=>Array.from(new Set(e.map(n=>n.getValue(t))).values()),WD=(t,e)=>new Set(e.map(n=>n.getValue(t))).size,KD=(t,e)=>e.length,ng={sum:BD,min:HD,max:$D,extent:VD,mean:GD,median:qD,unique:YD,uniqueCount:WD,count:KD},XD={getDefaultColumnDef:()=>({aggregatedCell:t=>{var e,n;return(e=(n=t.getValue())==null||n.toString==null?void 0:n.toString())!=null?e:null},aggregationFn:"auto"}),getInitialState:t=>({grouping:[],...t}),getDefaultOptions:t=>({onGroupingChange:Vn("grouping",t),groupedColumnMode:"reorder"}),createColumn:(t,e)=>{t.toggleGrouping=()=>{e.setGrouping(n=>n!=null&&n.includes(t.id)?n.filter(i=>i!==t.id):[...n??[],t.id])},t.getCanGroup=()=>{var n,i;return((n=t.columnDef.enableGrouping)!=null?n:!0)&&((i=e.options.enableGrouping)!=null?i:!0)&&(!!t.accessorFn||!!t.columnDef.getGroupingValue)},t.getIsGrouped=()=>{var n;return(n=e.getState().grouping)==null?void 0:n.includes(t.id)},t.getGroupedIndex=()=>{var n;return(n=e.getState().grouping)==null?void 0:n.indexOf(t.id)},t.getToggleGroupingHandler=()=>{const n=t.getCanGroup();return()=>{n&&t.toggleGrouping()}},t.getAutoAggregationFn=()=>{const n=e.getCoreRowModel().flatRows[0],i=n?.getValue(t.id);if(typeof i=="number")return ng.sum;if(Object.prototype.toString.call(i)==="[object Date]")return ng.extent},t.getAggregationFn=()=>{var n,i;if(!t)throw new Error;return bd(t.columnDef.aggregationFn)?t.columnDef.aggregationFn:t.columnDef.aggregationFn==="auto"?t.getAutoAggregationFn():(n=(i=e.options.aggregationFns)==null?void 0:i[t.columnDef.aggregationFn])!=null?n:ng[t.columnDef.aggregationFn]}},createTable:t=>{t.setGrouping=e=>t.options.onGroupingChange==null?void 0:t.options.onGroupingChange(e),t.resetGrouping=e=>{var n,i;t.setGrouping(e?[]:(n=(i=t.initialState)==null?void 0:i.grouping)!=null?n:[])},t.getPreGroupedRowModel=()=>t.getFilteredRowModel(),t.getGroupedRowModel=()=>(!t._getGroupedRowModel&&t.options.getGroupedRowModel&&(t._getGroupedRowModel=t.options.getGroupedRowModel(t)),t.options.manualGrouping||!t._getGroupedRowModel?t.getPreGroupedRowModel():t._getGroupedRowModel())},createRow:(t,e)=>{t.getIsGrouped=()=>!!t.groupingColumnId,t.getGroupingValue=n=>{if(t._groupingValuesCache.hasOwnProperty(n))return t._groupingValuesCache[n];const i=e.getColumn(n);return i!=null&&i.columnDef.getGroupingValue?(t._groupingValuesCache[n]=i.columnDef.getGroupingValue(t.original),t._groupingValuesCache[n]):t.getValue(n)},t._groupingValuesCache={}},createCell:(t,e,n,i)=>{t.getIsGrouped=()=>e.getIsGrouped()&&e.id===n.groupingColumnId,t.getIsPlaceholder=()=>!t.getIsGrouped()&&e.getIsGrouped(),t.getIsAggregated=()=>{var a;return!t.getIsGrouped()&&!t.getIsPlaceholder()&&!!((a=n.subRows)!=null&&a.length)}}};function QD(t,e,n){if(!(e!=null&&e.length)||!n)return t;const i=t.filter(o=>!e.includes(o.id));return n==="remove"?i:[...e.map(o=>t.find(l=>l.id===o)).filter(Boolean),...i]}const ZD={getInitialState:t=>({columnOrder:[],...t}),getDefaultOptions:t=>({onColumnOrderChange:Vn("columnOrder",t)}),createColumn:(t,e)=>{t.getIndex=Oe(n=>[wl(e,n)],n=>n.findIndex(i=>i.id===t.id),De(e.options,"debugColumns")),t.getIsFirstColumn=n=>{var i;return((i=wl(e,n)[0])==null?void 0:i.id)===t.id},t.getIsLastColumn=n=>{var i;const a=wl(e,n);return((i=a[a.length-1])==null?void 0:i.id)===t.id}},createTable:t=>{t.setColumnOrder=e=>t.options.onColumnOrderChange==null?void 0:t.options.onColumnOrderChange(e),t.resetColumnOrder=e=>{var n;t.setColumnOrder(e?[]:(n=t.initialState.columnOrder)!=null?n:[])},t._getOrderColumnsFn=Oe(()=>[t.getState().columnOrder,t.getState().grouping,t.options.groupedColumnMode],(e,n,i)=>a=>{let o=[];if(!(e!=null&&e.length))o=a;else{const l=[...e],u=[...a];for(;u.length&&l.length;){const d=l.shift(),f=u.findIndex(g=>g.id===d);f>-1&&o.push(u.splice(f,1)[0])}o=[...o,...u]}return QD(o,n,i)},De(t.options,"debugTable"))}},ig=()=>({left:[],right:[]}),JD={getInitialState:t=>({columnPinning:ig(),...t}),getDefaultOptions:t=>({onColumnPinningChange:Vn("columnPinning",t)}),createColumn:(t,e)=>{t.pin=n=>{const i=t.getLeafColumns().map(a=>a.id).filter(Boolean);e.setColumnPinning(a=>{var o,l;if(n==="right"){var u,d;return{left:((u=a?.left)!=null?u:[]).filter(p=>!(i!=null&&i.includes(p))),right:[...((d=a?.right)!=null?d:[]).filter(p=>!(i!=null&&i.includes(p))),...i]}}if(n==="left"){var f,g;return{left:[...((f=a?.left)!=null?f:[]).filter(p=>!(i!=null&&i.includes(p))),...i],right:((g=a?.right)!=null?g:[]).filter(p=>!(i!=null&&i.includes(p)))}}return{left:((o=a?.left)!=null?o:[]).filter(p=>!(i!=null&&i.includes(p))),right:((l=a?.right)!=null?l:[]).filter(p=>!(i!=null&&i.includes(p)))}})},t.getCanPin=()=>t.getLeafColumns().some(i=>{var a,o,l;return((a=i.columnDef.enablePinning)!=null?a:!0)&&((o=(l=e.options.enableColumnPinning)!=null?l:e.options.enablePinning)!=null?o:!0)}),t.getIsPinned=()=>{const n=t.getLeafColumns().map(u=>u.id),{left:i,right:a}=e.getState().columnPinning,o=n.some(u=>i?.includes(u)),l=n.some(u=>a?.includes(u));return o?"left":l?"right":!1},t.getPinnedIndex=()=>{var n,i;const a=t.getIsPinned();return a?(n=(i=e.getState().columnPinning)==null||(i=i[a])==null?void 0:i.indexOf(t.id))!=null?n:-1:0}},createRow:(t,e)=>{t.getCenterVisibleCells=Oe(()=>[t._getAllVisibleCells(),e.getState().columnPinning.left,e.getState().columnPinning.right],(n,i,a)=>{const o=[...i??[],...a??[]];return n.filter(l=>!o.includes(l.column.id))},De(e.options,"debugRows")),t.getLeftVisibleCells=Oe(()=>[t._getAllVisibleCells(),e.getState().columnPinning.left],(n,i)=>(i??[]).map(o=>n.find(l=>l.column.id===o)).filter(Boolean).map(o=>({...o,position:"left"})),De(e.options,"debugRows")),t.getRightVisibleCells=Oe(()=>[t._getAllVisibleCells(),e.getState().columnPinning.right],(n,i)=>(i??[]).map(o=>n.find(l=>l.column.id===o)).filter(Boolean).map(o=>({...o,position:"right"})),De(e.options,"debugRows"))},createTable:t=>{t.setColumnPinning=e=>t.options.onColumnPinningChange==null?void 0:t.options.onColumnPinningChange(e),t.resetColumnPinning=e=>{var n,i;return t.setColumnPinning(e?ig():(n=(i=t.initialState)==null?void 0:i.columnPinning)!=null?n:ig())},t.getIsSomeColumnsPinned=e=>{var n;const i=t.getState().columnPinning;if(!e){var a,o;return!!((a=i.left)!=null&&a.length||(o=i.right)!=null&&o.length)}return!!((n=i[e])!=null&&n.length)},t.getLeftLeafColumns=Oe(()=>[t.getAllLeafColumns(),t.getState().columnPinning.left],(e,n)=>(n??[]).map(i=>e.find(a=>a.id===i)).filter(Boolean),De(t.options,"debugColumns")),t.getRightLeafColumns=Oe(()=>[t.getAllLeafColumns(),t.getState().columnPinning.right],(e,n)=>(n??[]).map(i=>e.find(a=>a.id===i)).filter(Boolean),De(t.options,"debugColumns")),t.getCenterLeafColumns=Oe(()=>[t.getAllLeafColumns(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,n,i)=>{const a=[...n??[],...i??[]];return e.filter(o=>!a.includes(o.id))},De(t.options,"debugColumns"))}};function eM(t){return t||(typeof document<"u"?document:null)}const Eu={size:150,minSize:20,maxSize:Number.MAX_SAFE_INTEGER},sg=()=>({startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]}),tM={getDefaultColumnDef:()=>Eu,getInitialState:t=>({columnSizing:{},columnSizingInfo:sg(),...t}),getDefaultOptions:t=>({columnResizeMode:"onEnd",columnResizeDirection:"ltr",onColumnSizingChange:Vn("columnSizing",t),onColumnSizingInfoChange:Vn("columnSizingInfo",t)}),createColumn:(t,e)=>{t.getSize=()=>{var n,i,a;const o=e.getState().columnSizing[t.id];return Math.min(Math.max((n=t.columnDef.minSize)!=null?n:Eu.minSize,(i=o??t.columnDef.size)!=null?i:Eu.size),(a=t.columnDef.maxSize)!=null?a:Eu.maxSize)},t.getStart=Oe(n=>[n,wl(e,n),e.getState().columnSizing],(n,i)=>i.slice(0,t.getIndex(n)).reduce((a,o)=>a+o.getSize(),0),De(e.options,"debugColumns")),t.getAfter=Oe(n=>[n,wl(e,n),e.getState().columnSizing],(n,i)=>i.slice(t.getIndex(n)+1).reduce((a,o)=>a+o.getSize(),0),De(e.options,"debugColumns")),t.resetSize=()=>{e.setColumnSizing(n=>{let{[t.id]:i,...a}=n;return a})},t.getCanResize=()=>{var n,i;return((n=t.columnDef.enableResizing)!=null?n:!0)&&((i=e.options.enableColumnResizing)!=null?i:!0)},t.getIsResizing=()=>e.getState().columnSizingInfo.isResizingColumn===t.id},createHeader:(t,e)=>{t.getSize=()=>{let n=0;const i=a=>{if(a.subHeaders.length)a.subHeaders.forEach(i);else{var o;n+=(o=a.column.getSize())!=null?o:0}};return i(t),n},t.getStart=()=>{if(t.index>0){const n=t.headerGroup.headers[t.index-1];return n.getStart()+n.getSize()}return 0},t.getResizeHandler=n=>{const i=e.getColumn(t.column.id),a=i?.getCanResize();return o=>{if(!i||!a||(o.persist==null||o.persist(),ag(o)&&o.touches&&o.touches.length>1))return;const l=t.getSize(),u=t?t.getLeafHeaders().map(E=>[E.column.id,E.column.getSize()]):[[i.id,i.getSize()]],d=ag(o)?Math.round(o.touches[0].clientX):o.clientX,f={},g=(E,C)=>{typeof C=="number"&&(e.setColumnSizingInfo(R=>{var M,D;const I=e.options.columnResizeDirection==="rtl"?-1:1,L=(C-((M=R?.startOffset)!=null?M:0))*I,z=Math.max(L/((D=R?.startSize)!=null?D:0),-.999999);return R.columnSizingStart.forEach(P=>{let[K,X]=P;f[K]=Math.round(Math.max(X+X*z,0)*100)/100}),{...R,deltaOffset:L,deltaPercentage:z}}),(e.options.columnResizeMode==="onChange"||E==="end")&&e.setColumnSizing(R=>({...R,...f})))},p=E=>g("move",E),y=E=>{g("end",E),e.setColumnSizingInfo(C=>({...C,isResizingColumn:!1,startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,columnSizingStart:[]}))},b=eM(n),S={moveHandler:E=>p(E.clientX),upHandler:E=>{b?.removeEventListener("mousemove",S.moveHandler),b?.removeEventListener("mouseup",S.upHandler),y(E.clientX)}},w={moveHandler:E=>(E.cancelable&&(E.preventDefault(),E.stopPropagation()),p(E.touches[0].clientX),!1),upHandler:E=>{var C;b?.removeEventListener("touchmove",w.moveHandler),b?.removeEventListener("touchend",w.upHandler),E.cancelable&&(E.preventDefault(),E.stopPropagation()),y((C=E.touches[0])==null?void 0:C.clientX)}},x=nM()?{passive:!1}:!1;ag(o)?(b?.addEventListener("touchmove",w.moveHandler,x),b?.addEventListener("touchend",w.upHandler,x)):(b?.addEventListener("mousemove",S.moveHandler,x),b?.addEventListener("mouseup",S.upHandler,x)),e.setColumnSizingInfo(E=>({...E,startOffset:d,startSize:l,deltaOffset:0,deltaPercentage:0,columnSizingStart:u,isResizingColumn:i.id}))}}},createTable:t=>{t.setColumnSizing=e=>t.options.onColumnSizingChange==null?void 0:t.options.onColumnSizingChange(e),t.setColumnSizingInfo=e=>t.options.onColumnSizingInfoChange==null?void 0:t.options.onColumnSizingInfoChange(e),t.resetColumnSizing=e=>{var n;t.setColumnSizing(e?{}:(n=t.initialState.columnSizing)!=null?n:{})},t.resetHeaderSizeInfo=e=>{var n;t.setColumnSizingInfo(e?sg():(n=t.initialState.columnSizingInfo)!=null?n:sg())},t.getTotalSize=()=>{var e,n;return(e=(n=t.getHeaderGroups()[0])==null?void 0:n.headers.reduce((i,a)=>i+a.getSize(),0))!=null?e:0},t.getLeftTotalSize=()=>{var e,n;return(e=(n=t.getLeftHeaderGroups()[0])==null?void 0:n.headers.reduce((i,a)=>i+a.getSize(),0))!=null?e:0},t.getCenterTotalSize=()=>{var e,n;return(e=(n=t.getCenterHeaderGroups()[0])==null?void 0:n.headers.reduce((i,a)=>i+a.getSize(),0))!=null?e:0},t.getRightTotalSize=()=>{var e,n;return(e=(n=t.getRightHeaderGroups()[0])==null?void 0:n.headers.reduce((i,a)=>i+a.getSize(),0))!=null?e:0}}};let Tu=null;function nM(){if(typeof Tu=="boolean")return Tu;let t=!1;try{const e={get passive(){return t=!0,!1}},n=()=>{};window.addEventListener("test",n,e),window.removeEventListener("test",n)}catch{t=!1}return Tu=t,Tu}function ag(t){return t.type==="touchstart"}const iM={getInitialState:t=>({columnVisibility:{},...t}),getDefaultOptions:t=>({onColumnVisibilityChange:Vn("columnVisibility",t)}),createColumn:(t,e)=>{t.toggleVisibility=n=>{t.getCanHide()&&e.setColumnVisibility(i=>({...i,[t.id]:n??!t.getIsVisible()}))},t.getIsVisible=()=>{var n,i;const a=t.columns;return(n=a.length?a.some(o=>o.getIsVisible()):(i=e.getState().columnVisibility)==null?void 0:i[t.id])!=null?n:!0},t.getCanHide=()=>{var n,i;return((n=t.columnDef.enableHiding)!=null?n:!0)&&((i=e.options.enableHiding)!=null?i:!0)},t.getToggleVisibilityHandler=()=>n=>{t.toggleVisibility==null||t.toggleVisibility(n.target.checked)}},createRow:(t,e)=>{t._getAllVisibleCells=Oe(()=>[t.getAllCells(),e.getState().columnVisibility],n=>n.filter(i=>i.column.getIsVisible()),De(e.options,"debugRows")),t.getVisibleCells=Oe(()=>[t.getLeftVisibleCells(),t.getCenterVisibleCells(),t.getRightVisibleCells()],(n,i,a)=>[...n,...i,...a],De(e.options,"debugRows"))},createTable:t=>{const e=(n,i)=>Oe(()=>[i(),i().filter(a=>a.getIsVisible()).map(a=>a.id).join("_")],a=>a.filter(o=>o.getIsVisible==null?void 0:o.getIsVisible()),De(t.options,"debugColumns"));t.getVisibleFlatColumns=e("getVisibleFlatColumns",()=>t.getAllFlatColumns()),t.getVisibleLeafColumns=e("getVisibleLeafColumns",()=>t.getAllLeafColumns()),t.getLeftVisibleLeafColumns=e("getLeftVisibleLeafColumns",()=>t.getLeftLeafColumns()),t.getRightVisibleLeafColumns=e("getRightVisibleLeafColumns",()=>t.getRightLeafColumns()),t.getCenterVisibleLeafColumns=e("getCenterVisibleLeafColumns",()=>t.getCenterLeafColumns()),t.setColumnVisibility=n=>t.options.onColumnVisibilityChange==null?void 0:t.options.onColumnVisibilityChange(n),t.resetColumnVisibility=n=>{var i;t.setColumnVisibility(n?{}:(i=t.initialState.columnVisibility)!=null?i:{})},t.toggleAllColumnsVisible=n=>{var i;n=(i=n)!=null?i:!t.getIsAllColumnsVisible(),t.setColumnVisibility(t.getAllLeafColumns().reduce((a,o)=>({...a,[o.id]:n||!(o.getCanHide!=null&&o.getCanHide())}),{}))},t.getIsAllColumnsVisible=()=>!t.getAllLeafColumns().some(n=>!(n.getIsVisible!=null&&n.getIsVisible())),t.getIsSomeColumnsVisible=()=>t.getAllLeafColumns().some(n=>n.getIsVisible==null?void 0:n.getIsVisible()),t.getToggleAllColumnsVisibilityHandler=()=>n=>{var i;t.toggleAllColumnsVisible((i=n.target)==null?void 0:i.checked)}}};function wl(t,e){return e?e==="center"?t.getCenterVisibleLeafColumns():e==="left"?t.getLeftVisibleLeafColumns():t.getRightVisibleLeafColumns():t.getVisibleLeafColumns()}const sM={createTable:t=>{t._getGlobalFacetedRowModel=t.options.getFacetedRowModel&&t.options.getFacetedRowModel(t,"__global__"),t.getGlobalFacetedRowModel=()=>t.options.manualFiltering||!t._getGlobalFacetedRowModel?t.getPreFilteredRowModel():t._getGlobalFacetedRowModel(),t._getGlobalFacetedUniqueValues=t.options.getFacetedUniqueValues&&t.options.getFacetedUniqueValues(t,"__global__"),t.getGlobalFacetedUniqueValues=()=>t._getGlobalFacetedUniqueValues?t._getGlobalFacetedUniqueValues():new Map,t._getGlobalFacetedMinMaxValues=t.options.getFacetedMinMaxValues&&t.options.getFacetedMinMaxValues(t,"__global__"),t.getGlobalFacetedMinMaxValues=()=>{if(t._getGlobalFacetedMinMaxValues)return t._getGlobalFacetedMinMaxValues()}}},aM={getInitialState:t=>({globalFilter:void 0,...t}),getDefaultOptions:t=>({onGlobalFilterChange:Vn("globalFilter",t),globalFilterFn:"auto",getColumnCanGlobalFilter:e=>{var n;const i=(n=t.getCoreRowModel().flatRows[0])==null||(n=n._getAllCellsByColumnId()[e.id])==null?void 0:n.getValue();return typeof i=="string"||typeof i=="number"}}),createColumn:(t,e)=>{t.getCanGlobalFilter=()=>{var n,i,a,o;return((n=t.columnDef.enableGlobalFilter)!=null?n:!0)&&((i=e.options.enableGlobalFilter)!=null?i:!0)&&((a=e.options.enableFilters)!=null?a:!0)&&((o=e.options.getColumnCanGlobalFilter==null?void 0:e.options.getColumnCanGlobalFilter(t))!=null?o:!0)&&!!t.accessorFn}},createTable:t=>{t.getGlobalAutoFilterFn=()=>hs.includesString,t.getGlobalFilterFn=()=>{var e,n;const{globalFilterFn:i}=t.options;return bd(i)?i:i==="auto"?t.getGlobalAutoFilterFn():(e=(n=t.options.filterFns)==null?void 0:n[i])!=null?e:hs[i]},t.setGlobalFilter=e=>{t.options.onGlobalFilterChange==null||t.options.onGlobalFilterChange(e)},t.resetGlobalFilter=e=>{t.setGlobalFilter(e?void 0:t.initialState.globalFilter)}}},rM={getInitialState:t=>({expanded:{},...t}),getDefaultOptions:t=>({onExpandedChange:Vn("expanded",t),paginateExpandedRows:!0}),createTable:t=>{let e=!1,n=!1;t._autoResetExpanded=()=>{var i,a;if(!e){t._queue(()=>{e=!0});return}if((i=(a=t.options.autoResetAll)!=null?a:t.options.autoResetExpanded)!=null?i:!t.options.manualExpanding){if(n)return;n=!0,t._queue(()=>{t.resetExpanded(),n=!1})}},t.setExpanded=i=>t.options.onExpandedChange==null?void 0:t.options.onExpandedChange(i),t.toggleAllRowsExpanded=i=>{i??!t.getIsAllRowsExpanded()?t.setExpanded(!0):t.setExpanded({})},t.resetExpanded=i=>{var a,o;t.setExpanded(i?{}:(a=(o=t.initialState)==null?void 0:o.expanded)!=null?a:{})},t.getCanSomeRowsExpand=()=>t.getPrePaginationRowModel().flatRows.some(i=>i.getCanExpand()),t.getToggleAllRowsExpandedHandler=()=>i=>{i.persist==null||i.persist(),t.toggleAllRowsExpanded()},t.getIsSomeRowsExpanded=()=>{const i=t.getState().expanded;return i===!0||Object.values(i).some(Boolean)},t.getIsAllRowsExpanded=()=>{const i=t.getState().expanded;return typeof i=="boolean"?i===!0:!(!Object.keys(i).length||t.getRowModel().flatRows.some(a=>!a.getIsExpanded()))},t.getExpandedDepth=()=>{let i=0;return(t.getState().expanded===!0?Object.keys(t.getRowModel().rowsById):Object.keys(t.getState().expanded)).forEach(o=>{const l=o.split(".");i=Math.max(i,l.length)}),i},t.getPreExpandedRowModel=()=>t.getSortedRowModel(),t.getExpandedRowModel=()=>(!t._getExpandedRowModel&&t.options.getExpandedRowModel&&(t._getExpandedRowModel=t.options.getExpandedRowModel(t)),t.options.manualExpanding||!t._getExpandedRowModel?t.getPreExpandedRowModel():t._getExpandedRowModel())},createRow:(t,e)=>{t.toggleExpanded=n=>{e.setExpanded(i=>{var a;const o=i===!0?!0:!!(i!=null&&i[t.id]);let l={};if(i===!0?Object.keys(e.getRowModel().rowsById).forEach(u=>{l[u]=!0}):l=i,n=(a=n)!=null?a:!o,!o&&n)return{...l,[t.id]:!0};if(o&&!n){const{[t.id]:u,...d}=l;return d}return i})},t.getIsExpanded=()=>{var n;const i=e.getState().expanded;return!!((n=e.options.getIsRowExpanded==null?void 0:e.options.getIsRowExpanded(t))!=null?n:i===!0||i?.[t.id])},t.getCanExpand=()=>{var n,i,a;return(n=e.options.getRowCanExpand==null?void 0:e.options.getRowCanExpand(t))!=null?n:((i=e.options.enableExpanding)!=null?i:!0)&&!!((a=t.subRows)!=null&&a.length)},t.getIsAllParentsExpanded=()=>{let n=!0,i=t;for(;n&&i.parentId;)i=e.getRow(i.parentId,!0),n=i.getIsExpanded();return n},t.getToggleExpandedHandler=()=>{const n=t.getCanExpand();return()=>{n&&t.toggleExpanded()}}}},zg=0,Bg=10,rg=()=>({pageIndex:zg,pageSize:Bg}),oM={getInitialState:t=>({...t,pagination:{...rg(),...t?.pagination}}),getDefaultOptions:t=>({onPaginationChange:Vn("pagination",t)}),createTable:t=>{let e=!1,n=!1;t._autoResetPageIndex=()=>{var i,a;if(!e){t._queue(()=>{e=!0});return}if((i=(a=t.options.autoResetAll)!=null?a:t.options.autoResetPageIndex)!=null?i:!t.options.manualPagination){if(n)return;n=!0,t._queue(()=>{t.resetPageIndex(),n=!1})}},t.setPagination=i=>{const a=o=>Qs(i,o);return t.options.onPaginationChange==null?void 0:t.options.onPaginationChange(a)},t.resetPagination=i=>{var a;t.setPagination(i?rg():(a=t.initialState.pagination)!=null?a:rg())},t.setPageIndex=i=>{t.setPagination(a=>{let o=Qs(i,a.pageIndex);const l=typeof t.options.pageCount>"u"||t.options.pageCount===-1?Number.MAX_SAFE_INTEGER:t.options.pageCount-1;return o=Math.max(0,Math.min(o,l)),{...a,pageIndex:o}})},t.resetPageIndex=i=>{var a,o;t.setPageIndex(i?zg:(a=(o=t.initialState)==null||(o=o.pagination)==null?void 0:o.pageIndex)!=null?a:zg)},t.resetPageSize=i=>{var a,o;t.setPageSize(i?Bg:(a=(o=t.initialState)==null||(o=o.pagination)==null?void 0:o.pageSize)!=null?a:Bg)},t.setPageSize=i=>{t.setPagination(a=>{const o=Math.max(1,Qs(i,a.pageSize)),l=a.pageSize*a.pageIndex,u=Math.floor(l/o);return{...a,pageIndex:u,pageSize:o}})},t.setPageCount=i=>t.setPagination(a=>{var o;let l=Qs(i,(o=t.options.pageCount)!=null?o:-1);return typeof l=="number"&&(l=Math.max(-1,l)),{...a,pageCount:l}}),t.getPageOptions=Oe(()=>[t.getPageCount()],i=>{let a=[];return i&&i>0&&(a=[...new Array(i)].fill(null).map((o,l)=>l)),a},De(t.options,"debugTable")),t.getCanPreviousPage=()=>t.getState().pagination.pageIndex>0,t.getCanNextPage=()=>{const{pageIndex:i}=t.getState().pagination,a=t.getPageCount();return a===-1?!0:a===0?!1:i<a-1},t.previousPage=()=>t.setPageIndex(i=>i-1),t.nextPage=()=>t.setPageIndex(i=>i+1),t.firstPage=()=>t.setPageIndex(0),t.lastPage=()=>t.setPageIndex(t.getPageCount()-1),t.getPrePaginationRowModel=()=>t.getExpandedRowModel(),t.getPaginationRowModel=()=>(!t._getPaginationRowModel&&t.options.getPaginationRowModel&&(t._getPaginationRowModel=t.options.getPaginationRowModel(t)),t.options.manualPagination||!t._getPaginationRowModel?t.getPrePaginationRowModel():t._getPaginationRowModel()),t.getPageCount=()=>{var i;return(i=t.options.pageCount)!=null?i:Math.ceil(t.getRowCount()/t.getState().pagination.pageSize)},t.getRowCount=()=>{var i;return(i=t.options.rowCount)!=null?i:t.getPrePaginationRowModel().rows.length}}},og=()=>({top:[],bottom:[]}),lM={getInitialState:t=>({rowPinning:og(),...t}),getDefaultOptions:t=>({onRowPinningChange:Vn("rowPinning",t)}),createRow:(t,e)=>{t.pin=(n,i,a)=>{const o=i?t.getLeafRows().map(d=>{let{id:f}=d;return f}):[],l=a?t.getParentRows().map(d=>{let{id:f}=d;return f}):[],u=new Set([...l,t.id,...o]);e.setRowPinning(d=>{var f,g;if(n==="bottom"){var p,y;return{top:((p=d?.top)!=null?p:[]).filter(w=>!(u!=null&&u.has(w))),bottom:[...((y=d?.bottom)!=null?y:[]).filter(w=>!(u!=null&&u.has(w))),...Array.from(u)]}}if(n==="top"){var b,S;return{top:[...((b=d?.top)!=null?b:[]).filter(w=>!(u!=null&&u.has(w))),...Array.from(u)],bottom:((S=d?.bottom)!=null?S:[]).filter(w=>!(u!=null&&u.has(w)))}}return{top:((f=d?.top)!=null?f:[]).filter(w=>!(u!=null&&u.has(w))),bottom:((g=d?.bottom)!=null?g:[]).filter(w=>!(u!=null&&u.has(w)))}})},t.getCanPin=()=>{var n;const{enableRowPinning:i,enablePinning:a}=e.options;return typeof i=="function"?i(t):(n=i??a)!=null?n:!0},t.getIsPinned=()=>{const n=[t.id],{top:i,bottom:a}=e.getState().rowPinning,o=n.some(u=>i?.includes(u)),l=n.some(u=>a?.includes(u));return o?"top":l?"bottom":!1},t.getPinnedIndex=()=>{var n,i;const a=t.getIsPinned();if(!a)return-1;const o=(n=a==="top"?e.getTopRows():e.getBottomRows())==null?void 0:n.map(l=>{let{id:u}=l;return u});return(i=o?.indexOf(t.id))!=null?i:-1}},createTable:t=>{t.setRowPinning=e=>t.options.onRowPinningChange==null?void 0:t.options.onRowPinningChange(e),t.resetRowPinning=e=>{var n,i;return t.setRowPinning(e?og():(n=(i=t.initialState)==null?void 0:i.rowPinning)!=null?n:og())},t.getIsSomeRowsPinned=e=>{var n;const i=t.getState().rowPinning;if(!e){var a,o;return!!((a=i.top)!=null&&a.length||(o=i.bottom)!=null&&o.length)}return!!((n=i[e])!=null&&n.length)},t._getPinnedRows=(e,n,i)=>{var a;return((a=t.options.keepPinnedRows)==null||a?(n??[]).map(l=>{const u=t.getRow(l,!0);return u.getIsAllParentsExpanded()?u:null}):(n??[]).map(l=>e.find(u=>u.id===l))).filter(Boolean).map(l=>({...l,position:i}))},t.getTopRows=Oe(()=>[t.getRowModel().rows,t.getState().rowPinning.top],(e,n)=>t._getPinnedRows(e,n,"top"),De(t.options,"debugRows")),t.getBottomRows=Oe(()=>[t.getRowModel().rows,t.getState().rowPinning.bottom],(e,n)=>t._getPinnedRows(e,n,"bottom"),De(t.options,"debugRows")),t.getCenterRows=Oe(()=>[t.getRowModel().rows,t.getState().rowPinning.top,t.getState().rowPinning.bottom],(e,n,i)=>{const a=new Set([...n??[],...i??[]]);return e.filter(o=>!a.has(o.id))},De(t.options,"debugRows"))}},cM={getInitialState:t=>({rowSelection:{},...t}),getDefaultOptions:t=>({onRowSelectionChange:Vn("rowSelection",t),enableRowSelection:!0,enableMultiRowSelection:!0,enableSubRowSelection:!0}),createTable:t=>{t.setRowSelection=e=>t.options.onRowSelectionChange==null?void 0:t.options.onRowSelectionChange(e),t.resetRowSelection=e=>{var n;return t.setRowSelection(e?{}:(n=t.initialState.rowSelection)!=null?n:{})},t.toggleAllRowsSelected=e=>{t.setRowSelection(n=>{e=typeof e<"u"?e:!t.getIsAllRowsSelected();const i={...n},a=t.getPreGroupedRowModel().flatRows;return e?a.forEach(o=>{o.getCanSelect()&&(i[o.id]=!0)}):a.forEach(o=>{delete i[o.id]}),i})},t.toggleAllPageRowsSelected=e=>t.setRowSelection(n=>{const i=typeof e<"u"?e:!t.getIsAllPageRowsSelected(),a={...n};return t.getRowModel().rows.forEach(o=>{Hg(a,o.id,i,!0,t)}),a}),t.getPreSelectedRowModel=()=>t.getCoreRowModel(),t.getSelectedRowModel=Oe(()=>[t.getState().rowSelection,t.getCoreRowModel()],(e,n)=>Object.keys(e).length?lg(t,n):{rows:[],flatRows:[],rowsById:{}},De(t.options,"debugTable")),t.getFilteredSelectedRowModel=Oe(()=>[t.getState().rowSelection,t.getFilteredRowModel()],(e,n)=>Object.keys(e).length?lg(t,n):{rows:[],flatRows:[],rowsById:{}},De(t.options,"debugTable")),t.getGroupedSelectedRowModel=Oe(()=>[t.getState().rowSelection,t.getSortedRowModel()],(e,n)=>Object.keys(e).length?lg(t,n):{rows:[],flatRows:[],rowsById:{}},De(t.options,"debugTable")),t.getIsAllRowsSelected=()=>{const e=t.getFilteredRowModel().flatRows,{rowSelection:n}=t.getState();let i=!!(e.length&&Object.keys(n).length);return i&&e.some(a=>a.getCanSelect()&&!n[a.id])&&(i=!1),i},t.getIsAllPageRowsSelected=()=>{const e=t.getPaginationRowModel().flatRows.filter(a=>a.getCanSelect()),{rowSelection:n}=t.getState();let i=!!e.length;return i&&e.some(a=>!n[a.id])&&(i=!1),i},t.getIsSomeRowsSelected=()=>{var e;const n=Object.keys((e=t.getState().rowSelection)!=null?e:{}).length;return n>0&&n<t.getFilteredRowModel().flatRows.length},t.getIsSomePageRowsSelected=()=>{const e=t.getPaginationRowModel().flatRows;return t.getIsAllPageRowsSelected()?!1:e.filter(n=>n.getCanSelect()).some(n=>n.getIsSelected()||n.getIsSomeSelected())},t.getToggleAllRowsSelectedHandler=()=>e=>{t.toggleAllRowsSelected(e.target.checked)},t.getToggleAllPageRowsSelectedHandler=()=>e=>{t.toggleAllPageRowsSelected(e.target.checked)}},createRow:(t,e)=>{t.toggleSelected=(n,i)=>{const a=t.getIsSelected();e.setRowSelection(o=>{var l;if(n=typeof n<"u"?n:!a,t.getCanSelect()&&a===n)return o;const u={...o};return Hg(u,t.id,n,(l=i?.selectChildren)!=null?l:!0,e),u})},t.getIsSelected=()=>{const{rowSelection:n}=e.getState();return Sm(t,n)},t.getIsSomeSelected=()=>{const{rowSelection:n}=e.getState();return $g(t,n)==="some"},t.getIsAllSubRowsSelected=()=>{const{rowSelection:n}=e.getState();return $g(t,n)==="all"},t.getCanSelect=()=>{var n;return typeof e.options.enableRowSelection=="function"?e.options.enableRowSelection(t):(n=e.options.enableRowSelection)!=null?n:!0},t.getCanSelectSubRows=()=>{var n;return typeof e.options.enableSubRowSelection=="function"?e.options.enableSubRowSelection(t):(n=e.options.enableSubRowSelection)!=null?n:!0},t.getCanMultiSelect=()=>{var n;return typeof e.options.enableMultiRowSelection=="function"?e.options.enableMultiRowSelection(t):(n=e.options.enableMultiRowSelection)!=null?n:!0},t.getToggleSelectedHandler=()=>{const n=t.getCanSelect();return i=>{var a;n&&t.toggleSelected((a=i.target)==null?void 0:a.checked)}}}},Hg=(t,e,n,i,a)=>{var o;const l=a.getRow(e,!0);n?(l.getCanMultiSelect()||Object.keys(t).forEach(u=>delete t[u]),l.getCanSelect()&&(t[e]=!0)):delete t[e],i&&(o=l.subRows)!=null&&o.length&&l.getCanSelectSubRows()&&l.subRows.forEach(u=>Hg(t,u.id,n,i,a))};function lg(t,e){const n=t.getState().rowSelection,i=[],a={},o=function(l,u){return l.map(d=>{var f;const g=Sm(d,n);if(g&&(i.push(d),a[d.id]=d),(f=d.subRows)!=null&&f.length&&(d={...d,subRows:o(d.subRows)}),g)return d}).filter(Boolean)};return{rows:o(e.rows),flatRows:i,rowsById:a}}function Sm(t,e){var n;return(n=e[t.id])!=null?n:!1}function $g(t,e,n){var i;if(!((i=t.subRows)!=null&&i.length))return!1;let a=!0,o=!1;return t.subRows.forEach(l=>{if(!(o&&!a)&&(l.getCanSelect()&&(Sm(l,e)?o=!0:a=!1),l.subRows&&l.subRows.length)){const u=$g(l,e);u==="all"?o=!0:(u==="some"&&(o=!0),a=!1)}}),a?"all":o?"some":!1}const Vg=/([0-9]+)/gm,uM=(t,e,n)=>Sw(ea(t.getValue(n)).toLowerCase(),ea(e.getValue(n)).toLowerCase()),dM=(t,e,n)=>Sw(ea(t.getValue(n)),ea(e.getValue(n))),hM=(t,e,n)=>wm(ea(t.getValue(n)).toLowerCase(),ea(e.getValue(n)).toLowerCase()),fM=(t,e,n)=>wm(ea(t.getValue(n)),ea(e.getValue(n))),gM=(t,e,n)=>{const i=t.getValue(n),a=e.getValue(n);return i>a?1:i<a?-1:0},mM=(t,e,n)=>wm(t.getValue(n),e.getValue(n));function wm(t,e){return t===e?0:t>e?1:-1}function ea(t){return typeof t=="number"?isNaN(t)||t===1/0||t===-1/0?"":String(t):typeof t=="string"?t:""}function Sw(t,e){const n=t.split(Vg).filter(Boolean),i=e.split(Vg).filter(Boolean);for(;n.length&&i.length;){const a=n.shift(),o=i.shift(),l=parseInt(a,10),u=parseInt(o,10),d=[l,u].sort();if(isNaN(d[0])){if(a>o)return 1;if(o>a)return-1;continue}if(isNaN(d[1]))return isNaN(l)?-1:1;if(l>u)return 1;if(u>l)return-1}return n.length-i.length}const al={alphanumeric:uM,alphanumericCaseSensitive:dM,text:hM,textCaseSensitive:fM,datetime:gM,basic:mM},pM={getInitialState:t=>({sorting:[],...t}),getDefaultColumnDef:()=>({sortingFn:"auto",sortUndefined:1}),getDefaultOptions:t=>({onSortingChange:Vn("sorting",t),isMultiSortEvent:e=>e.shiftKey}),createColumn:(t,e)=>{t.getAutoSortingFn=()=>{const n=e.getFilteredRowModel().flatRows.slice(10);let i=!1;for(const a of n){const o=a?.getValue(t.id);if(Object.prototype.toString.call(o)==="[object Date]")return al.datetime;if(typeof o=="string"&&(i=!0,o.split(Vg).length>1))return al.alphanumeric}return i?al.text:al.basic},t.getAutoSortDir=()=>{const n=e.getFilteredRowModel().flatRows[0];return typeof n?.getValue(t.id)=="string"?"asc":"desc"},t.getSortingFn=()=>{var n,i;if(!t)throw new Error;return bd(t.columnDef.sortingFn)?t.columnDef.sortingFn:t.columnDef.sortingFn==="auto"?t.getAutoSortingFn():(n=(i=e.options.sortingFns)==null?void 0:i[t.columnDef.sortingFn])!=null?n:al[t.columnDef.sortingFn]},t.toggleSorting=(n,i)=>{const a=t.getNextSortingOrder(),o=typeof n<"u"&&n!==null;e.setSorting(l=>{const u=l?.find(b=>b.id===t.id),d=l?.findIndex(b=>b.id===t.id);let f=[],g,p=o?n:a==="desc";if(l!=null&&l.length&&t.getCanMultiSort()&&i?u?g="toggle":g="add":l!=null&&l.length&&d!==l.length-1?g="replace":u?g="toggle":g="replace",g==="toggle"&&(o||a||(g="remove")),g==="add"){var y;f=[...l,{id:t.id,desc:p}],f.splice(0,f.length-((y=e.options.maxMultiSortColCount)!=null?y:Number.MAX_SAFE_INTEGER))}else g==="toggle"?f=l.map(b=>b.id===t.id?{...b,desc:p}:b):g==="remove"?f=l.filter(b=>b.id!==t.id):f=[{id:t.id,desc:p}];return f})},t.getFirstSortDir=()=>{var n,i;return((n=(i=t.columnDef.sortDescFirst)!=null?i:e.options.sortDescFirst)!=null?n:t.getAutoSortDir()==="desc")?"desc":"asc"},t.getNextSortingOrder=n=>{var i,a;const o=t.getFirstSortDir(),l=t.getIsSorted();return l?l!==o&&((i=e.options.enableSortingRemoval)==null||i)&&(!(n&&(a=e.options.enableMultiRemove)!=null)||a)?!1:l==="desc"?"asc":"desc":o},t.getCanSort=()=>{var n,i;return((n=t.columnDef.enableSorting)!=null?n:!0)&&((i=e.options.enableSorting)!=null?i:!0)&&!!t.accessorFn},t.getCanMultiSort=()=>{var n,i;return(n=(i=t.columnDef.enableMultiSort)!=null?i:e.options.enableMultiSort)!=null?n:!!t.accessorFn},t.getIsSorted=()=>{var n;const i=(n=e.getState().sorting)==null?void 0:n.find(a=>a.id===t.id);return i?i.desc?"desc":"asc":!1},t.getSortIndex=()=>{var n,i;return(n=(i=e.getState().sorting)==null?void 0:i.findIndex(a=>a.id===t.id))!=null?n:-1},t.clearSorting=()=>{e.setSorting(n=>n!=null&&n.length?n.filter(i=>i.id!==t.id):[])},t.getToggleSortingHandler=()=>{const n=t.getCanSort();return i=>{n&&(i.persist==null||i.persist(),t.toggleSorting==null||t.toggleSorting(void 0,t.getCanMultiSort()?e.options.isMultiSortEvent==null?void 0:e.options.isMultiSortEvent(i):!1))}}},createTable:t=>{t.setSorting=e=>t.options.onSortingChange==null?void 0:t.options.onSortingChange(e),t.resetSorting=e=>{var n,i;t.setSorting(e?[]:(n=(i=t.initialState)==null?void 0:i.sorting)!=null?n:[])},t.getPreSortedRowModel=()=>t.getGroupedRowModel(),t.getSortedRowModel=()=>(!t._getSortedRowModel&&t.options.getSortedRowModel&&(t._getSortedRowModel=t.options.getSortedRowModel(t)),t.options.manualSorting||!t._getSortedRowModel?t.getPreSortedRowModel():t._getSortedRowModel())}},vM=[UD,iM,ZD,JD,FD,zD,sM,aM,pM,XD,rM,oM,lM,cM,tM];function yM(t){var e,n;const i=[...vM,...(e=t._features)!=null?e:[]];let a={_features:i};const o=a._features.reduce((y,b)=>Object.assign(y,b.getDefaultOptions==null?void 0:b.getDefaultOptions(a)),{}),l=y=>a.options.mergeOptions?a.options.mergeOptions(o,y):{...o,...y};let d={...{},...(n=t.initialState)!=null?n:{}};a._features.forEach(y=>{var b;d=(b=y.getInitialState==null?void 0:y.getInitialState(d))!=null?b:d});const f=[];let g=!1;const p={_features:i,options:{...o,...t},initialState:d,_queue:y=>{f.push(y),g||(g=!0,Promise.resolve().then(()=>{for(;f.length;)f.shift()();g=!1}).catch(b=>setTimeout(()=>{throw b})))},reset:()=>{a.setState(a.initialState)},setOptions:y=>{const b=Qs(y,a.options);a.options=l(b)},getState:()=>a.options.state,setState:y=>{a.options.onStateChange==null||a.options.onStateChange(y)},_getRowId:(y,b,S)=>{var w;return(w=a.options.getRowId==null?void 0:a.options.getRowId(y,b,S))!=null?w:`${S?[S.id,b].join("."):b}`},getCoreRowModel:()=>(a._getCoreRowModel||(a._getCoreRowModel=a.options.getCoreRowModel(a)),a._getCoreRowModel()),getRowModel:()=>a.getPaginationRowModel(),getRow:(y,b)=>{let S=(b?a.getPrePaginationRowModel():a.getRowModel()).rowsById[y];if(!S&&(S=a.getCoreRowModel().rowsById[y],!S))throw new Error;return S},_getDefaultColumnDef:Oe(()=>[a.options.defaultColumn],y=>{var b;return y=(b=y)!=null?b:{},{header:S=>{const w=S.header.column.columnDef;return w.accessorKey?w.accessorKey:w.accessorFn?w.id:null},cell:S=>{var w,x;return(w=(x=S.renderValue())==null||x.toString==null?void 0:x.toString())!=null?w:null},...a._features.reduce((S,w)=>Object.assign(S,w.getDefaultColumnDef==null?void 0:w.getDefaultColumnDef()),{}),...y}},De(t,"debugColumns")),_getColumnDefs:()=>a.options.columns,getAllColumns:Oe(()=>[a._getColumnDefs()],y=>{const b=function(S,w,x){return x===void 0&&(x=0),S.map(E=>{const C=ID(a,E,x,w),R=E;return C.columns=R.columns?b(R.columns,C,x+1):[],C})};return b(y)},De(t,"debugColumns")),getAllFlatColumns:Oe(()=>[a.getAllColumns()],y=>y.flatMap(b=>b.getFlatColumns()),De(t,"debugColumns")),_getAllFlatColumnsById:Oe(()=>[a.getAllFlatColumns()],y=>y.reduce((b,S)=>(b[S.id]=S,b),{}),De(t,"debugColumns")),getAllLeafColumns:Oe(()=>[a.getAllColumns(),a._getOrderColumnsFn()],(y,b)=>{let S=y.flatMap(w=>w.getLeafColumns());return b(S)},De(t,"debugColumns")),getColumn:y=>a._getAllFlatColumnsById()[y]};Object.assign(a,p);for(let y=0;y<a._features.length;y++){const b=a._features[y];b==null||b.createTable==null||b.createTable(a)}return a}function _M(){return t=>Oe(()=>[t.options.data],e=>{const n={rows:[],flatRows:[],rowsById:{}},i=function(a,o,l){o===void 0&&(o=0);const u=[];for(let f=0;f<a.length;f++){const g=PD(t,t._getRowId(a[f],f,l),a[f],f,o,void 0,l?.id);if(n.flatRows.push(g),n.rowsById[g.id]=g,u.push(g),t.options.getSubRows){var d;g.originalSubRows=t.options.getSubRows(a[f],f),(d=g.originalSubRows)!=null&&d.length&&(g.subRows=i(g.originalSubRows,o+1,g))}}return u};return n.rows=i(e),n},De(t.options,"debugTable","getRowModel",()=>t._autoResetPageIndex()))}function bM(){return t=>Oe(()=>[t.getState().sorting,t.getPreSortedRowModel()],(e,n)=>{if(!n.rows.length||!(e!=null&&e.length))return n;const i=t.getState().sorting,a=[],o=i.filter(d=>{var f;return(f=t.getColumn(d.id))==null?void 0:f.getCanSort()}),l={};o.forEach(d=>{const f=t.getColumn(d.id);f&&(l[d.id]={sortUndefined:f.columnDef.sortUndefined,invertSorting:f.columnDef.invertSorting,sortingFn:f.getSortingFn()})});const u=d=>{const f=d.map(g=>({...g}));return f.sort((g,p)=>{for(let b=0;b<o.length;b+=1){var y;const S=o[b],w=l[S.id],x=w.sortUndefined,E=(y=S?.desc)!=null?y:!1;let C=0;if(x){const R=g.getValue(S.id),M=p.getValue(S.id),D=R===void 0,I=M===void 0;if(D||I){if(x==="first")return D?-1:1;if(x==="last")return D?1:-1;C=D&&I?0:D?x:-x}}if(C===0&&(C=w.sortingFn(g,p,S.id)),C!==0)return E&&(C*=-1),w.invertSorting&&(C*=-1),C}return g.index-p.index}),f.forEach(g=>{var p;a.push(g),(p=g.subRows)!=null&&p.length&&(g.subRows=u(g.subRows))}),f};return{rows:u(n.rows),flatRows:a,rowsById:n.rowsById}},De(t.options,"debugTable","getSortedRowModel",()=>t._autoResetPageIndex()))}/**
   * react-table
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function Fb(t,e){return t?SM(t)?A.createElement(t,e):t:null}function SM(t){return wM(t)||typeof t=="function"||xM(t)}function wM(t){return typeof t=="function"&&(()=>{const e=Object.getPrototypeOf(t);return e.prototype&&e.prototype.isReactComponent})()}function xM(t){return typeof t=="object"&&typeof t.$$typeof=="symbol"&&["react.memo","react.forward_ref"].includes(t.$$typeof.description)}function EM(t){const e={state:{},onStateChange:()=>{},renderFallbackValue:null,...t},[n]=A.useState(()=>({current:yM(e)})),[i,a]=A.useState(()=>n.current.initialState);return n.current.setOptions(o=>({...o,...t,state:{...i,...t.state},onStateChange:l=>{a(l),t.onStateChange==null||t.onStateChange(l)}})),n.current}function xm({data:t,columns:e,onSaveRow:n,onDeleteRow:i}){const[a,o]=A.useState(null),[l,u]=A.useState({}),d=A.useMemo(()=>{const p=b=>{const S={};Object.keys(l).forEach(C=>{l[C]!==void 0&&l[C]!==""&&(S[C]=l[C])});const w={...b.original};["machines","progress","n_boxes","time_remaining"].forEach(C=>{delete w[C]});const E={...w,...S};n(E),o(null),u({})},y={id:"actions",header:"Azioni",cell:({row:b})=>{const S=b.id===a;return _.jsx("div",{className:"action-buttons",children:S?_.jsxs(_.Fragment,{children:[_.jsx("button",{onClick:()=>p(b),className:"nav-btn today",children:"Salva"}),_.jsx("button",{onClick:()=>o(null),className:"nav-btn today",children:"Annulla"})]}):_.jsxs(_.Fragment,{children:[_.jsx("button",{onClick:()=>o(b.id),className:"nav-btn today",children:"Modifica"}),_.jsx("button",{onClick:()=>i(b.original),className:"nav-btn today",children:"Elimina"})]})})}};return[...e,y]},[e,a,l,n,i]),f=A.useMemo(()=>{if(t&&t.length>0){const p=t.map(w=>w.id);p.filter((w,x)=>p.indexOf(w)!==x).length>0;const b=new Set,S=[];t.forEach((w,x)=>{b.has(w.id)?S.push({id:w.id,index:x,item:w}):b.add(w.id)})}return t},[t]),g=EM({data:f,columns:d,getCoreRowModel:_M(),getSortedRowModel:bM(),meta:{editingRowId:a,setEditedData:u}});return _.jsx("div",{className:"table-container",children:_.jsxs("table",{className:"modern-table",children:[_.jsx("thead",{children:g.getHeaderGroups().map(p=>_.jsx("tr",{children:p.headers.map((y,b)=>{const S=`${p.id}_${y.id}_${b}`;return _.jsxs("th",{onClick:y.column.getToggleSortingHandler(),children:[Fb(y.column.columnDef.header,y.getContext()),{asc:" ",desc:" "}[y.column.getIsSorted()]??null]},S)})},p.id))}),_.jsx("tbody",{children:g.getRowModel().rows.map(p=>{const y=p.original.id||p.id;return _.jsx("tr",{children:p.getVisibleCells().map((b,S)=>{const w=`${y}_${b.column.id}_${S}`;return _.jsx("td",{children:Fb(b.column.columnDef.cell,b.getContext())},w)})},y)})})]})})}function Ye({row:t,column:e,table:n,value:i,isEditing:a,onChange:o,type:l="auto",options:u=[],parseValue:d=null,min:f=null,max:g=null,step:p=null}){const y=a??n?.options?.meta?.editingRowId===t?.id,b=i??t?.original?.[e?.id],S=l==="auto"?x(e?.id):l,w=R=>{const M=R.target.value;let D=M;d?D=d(M):S==="number"?D=parseFloat(M)||0:S==="integer"&&(D=parseInt(M)||0),n?.options?.meta?.setEditedData?n.options.meta.setEditedData(I=>({...I,[e?.id]:D})):o&&o(R)};function x(R){if(!R)return"text";if(R==="status")return"select";if(["quantity","quantity_completed","quantity_per_box","numero_persone","bag_height","bag_width","bag_step","min_web_width","max_web_width","min_bag_height","max_bag_height"].includes(R))return"integer";const D=["setup_time_standard","changeover_color","changeover_material","t_setup_stampa","t_setup_conf"],I=["costo_h_stampa","costo_h_conf"],L=["standard_speed","v_stampa","v_conf"];return D.includes(R)||I.includes(R)||L.includes(R)?"number":"text"}function E(R){return R==="status"?[{value:Ui.ACTIVE,label:Ui.ACTIVE},{value:Ui.INACTIVE,label:Ui.INACTIVE}]:R==="department"?[{value:mt.PRINTING,label:mt.PRINTING},{value:mt.PACKAGING,label:mt.PACKAGING}]:R==="work_center"?[{value:Me.ZANICA,label:Me.ZANICA},{value:Me.BUSTO_GAROLFO,label:Me.BUSTO_GAROLFO}]:R==="product_type"?[{value:La.CREMA,label:"Crema"},{value:La.LIQUIDO,label:"Liquido"},{value:La.POLVERI,label:"Polveri"}]:R==="seal_sides"?[{value:Gr.THREE,label:"3 sides"},{value:Gr.FOUR,label:"4 sides"}]:u}if(y)switch(S){case"select":{const R=E(e?.id);return _.jsx("select",{defaultValue:b,onChange:w,style:{width:"100%",padding:"4px",border:"1px solid #ccc",borderRadius:"4px"},children:R.map(M=>_.jsx("option",{value:M.value,children:M.label},M.value))})}case"number":{const R=il.DECIMAL_PRECISION.TWO_DECIMAL.includes(e?.id)?il.FIELD_STEPS.COST:(il.DECIMAL_PRECISION.ONE_DECIMAL.includes(e?.id),il.FIELD_STEPS.TIME);return _.jsx("input",{type:"number",defaultValue:b,onChange:w,min:f,max:g,step:p||R,style:{width:"100%",padding:"4px",border:"1px solid #ccc",borderRadius:"4px"}})}case"integer":return _.jsx("input",{type:"number",defaultValue:b,onChange:w,min:f||0,max:g,step:1,style:{width:"100%",padding:"4px",border:"1px solid #ccc",borderRadius:"4px"}});default:return _.jsx("input",{type:"text",defaultValue:b,onChange:w,style:{width:"100%",padding:"4px",border:"1px solid #ccc",borderRadius:"4px"}})}const C=b??"";return S==="number"||S==="integer"?_.jsx("span",{children:C}):_.jsx("span",{children:C})}function bs({title:t,children:e}){return _.jsx("div",{className:"sticky-header",children:_.jsxs("div",{className:"sticky-header-content",children:[_.jsx("div",{className:"sticky-header-text",children:_.jsx("h2",{className:"sticky-header-title",children:t})}),e]})})}const ww=()=>{const t=A.useCallback(f=>{if(!f||!f.department)return{isValid:!1,error:"Invalid phase data"};const{department:g}=f;if(g==="STAMPA"){const p=parseFloat(f.v_stampa);if(isNaN(p)||p<=0)return{isValid:!1,error:"Velocit di stampa non valida. Inserisci un valore maggiore di zero."}}else if(g==="CONFEZIONAMENTO"){const p=parseFloat(f.v_conf);if(isNaN(p)||p<=0)return{isValid:!1,error:"Velocit di confezionamento non valida. Inserisci un valore maggiore di zero."}}else return{isValid:!1,error:"Reparto non riconosciuto"};return{isValid:!0}},[]),e=A.useCallback((f,g,p)=>{if(!f||!g||!p||!t(f).isValid)return null;try{const{department:b}=f;if(b==="STAMPA"){const S=parseFloat(f.v_stampa),w=parseFloat(f.t_setup_stampa)||0,x=parseFloat(f.costo_h_stampa)||0;if(isNaN(S)||S<=0)return null;const E=g/S,C=w,R=E+C,M=R*x;return{totals:{duration:R,cost:M},breakdown:{print:{time:E,cost:E*x},setup:{time:C,cost:C*x}}}}else if(b==="CONFEZIONAMENTO"){const S=parseFloat(f.v_conf),w=parseFloat(f.t_setup_conf)||0,x=parseFloat(f.costo_h_conf)||0;if(isNaN(S)||S<=0)return null;const E=g/S,C=w,R=E+C,M=R*x;return{totals:{duration:R,cost:M},breakdown:{package:{time:E,cost:E*x},setup:{time:C,cost:C*x}}}}return null}catch{return null}},[t]),n=A.useCallback(f=>f&&(f.startsWith("P05")||f.startsWith("ISP05"))?"BUSTO_GAROLFO":"ZANICA",[]),i=A.useCallback(f=>f&&f.startsWith("P0")?"CONFEZIONAMENTO":"STAMPA",[]),a=A.useCallback(f=>({STAMPA:["DIGITAL_PRINT","FLEXO_PRINT","ROTOGRAVURE"],CONFEZIONAMENTO:["DOYPACK","PLURI_PIU","MONO_PIU","CONFEZIONAMENTO_TRADIZIONALE","CONFEZIONAMENTO_POLVERI"]})[f]||[],[]),o=A.useCallback((f,g)=>{const y={DIGITAL_PRINT:"DIGI",FLEXO_PRINT:"FLEX",ROTOGRAVURE:"ROTO",DOYPACK:"DOYP",PLURI_PIU:"PLUR",MONO_PIU:"MONO",CONFEZIONAMENTO_TRADIZIONALE:"CONFTRAD",CONFEZIONAMENTO_POLVERI:"CONFPOL"}[f]||"MACH",b=g==="BUSTO_GAROLFO"?"BGF":"ZAN",S=Date.now().toString(36);return`${y}_${b}_${S}`},[]),l=A.useCallback((f,g)=>!(g<0||g>f),[]),u=A.useCallback((f,g)=>!f||f===0?0:Math.round(g*100/f),[]),d=A.useCallback((f,g)=>!f||f===0?0:!g||g===0?f:Math.round(f*(1-g/100)*100)/100,[]);return{calculateProductionMetrics:e,validatePhaseParameters:t,autoDetermineWorkCenter:n,autoDetermineDepartment:i,getValidMachineTypes:a,generateMachineId:o,validateQuantityCompleted:l,calculateCompletionRate:u,calculateTimeRemaining:d}},Qu={PHASE:{STAMPA:{v_stampa:{min:0,message:"Printing speed must be greater than 0"},t_setup_stampa:{min:0,message:"Setup time cannot be negative"},costo_h_stampa:{min:0,message:"Hourly cost cannot be negative"}},CONFEZIONAMENTO:{v_conf:{min:0,message:"Packaging speed must be greater than 0"},t_setup_conf:{min:0,message:"Setup time cannot be negative"},costo_h_conf:{min:0,message:"Hourly cost cannot be negative"}}},MACHINE:{min_web_width:{min:0,message:"Minimum web width cannot be negative"},max_web_width:{min:0,message:"Maximum web width cannot be negative"},min_bag_height:{min:0,message:"Minimum bag height cannot be negative"},max_bag_height:{min:0,message:"Maximum bag height cannot be negative"},standard_speed:{min:0,message:"Standard speed cannot be negative"},setup_time_standard:{min:0,message:"Setup time cannot be negative"},changeover_color:{min:0,message:"Color changeover time cannot be negative"},changeover_material:{min:0,message:"Material changeover time cannot be negative"}},ORDER:{bag_height:{min:0,message:"Bag height must be greater than 0"},bag_width:{min:0,message:"Bag width must be greater than 0"},bag_step:{min:0,message:"Bag step must be greater than 0"},quantity:{min:0,message:"Quantity must be greater than 0"},quantity_per_box:{min:0,message:"Quantity per box cannot be negative"},quantity_completed:{min:0,message:"Quantity completed cannot be negative"}}},xw=(t,e)=>{const n={};return e.forEach(i=>{if(!Tm(t[i])){const a=i.replace(/_/g," ").replace(/\b\w/g,o=>o.toUpperCase());n[i]=`${a} is required`}}),n},Em=(t,e)=>{const n={};return Object.entries(e).forEach(([i,a])=>{t[i]!==void 0&&t[i]!==null&&t[i]!==""&&(Cw(t[i],a.min,a.max)||(n[i]=a.message))}),n},Ew=(t,e,n="PHASE")=>{const i=Qu[n]?.[e];return i?Em(t,i):{}},Tw=(t,e)=>{const n={};return e.forEach(i=>{const{condition:a,errorField:o,message:l}=i;a(t)&&(n[o]=l)}),n},TM=(t,e)=>{const n={};return e.required&&Object.assign(n,xw(t,e.required)),e.numeric&&Object.assign(n,Em(t,e.numeric)),e.department&&t.department&&Object.assign(n,Ew(t,t.department,e.departmentSchema)),e.logical&&Object.assign(n,Tw(t,e.logical)),n},CM={PHASE:{required:["name","department","work_center"],numeric:{numero_persone:{min:1,message:"Number of people must be at least 1"}},departmentSchema:"PHASE",logical:[{condition:t=>t.bag_width&&t.bag_step&&parseFloat(t.bag_width)<parseFloat(t.bag_step),errorField:"bag_width",message:"Bag width cannot be less than bag step"}]},MACHINE:{required:["machine_name","machine_type","department","work_center"],numeric:Qu.MACHINE,logical:[{condition:t=>t.min_web_width&&t.max_web_width&&parseFloat(t.min_web_width)>parseFloat(t.max_web_width),errorField:"min_web_width",message:"Minimum web width cannot exceed maximum web width"},{condition:t=>t.min_bag_height&&t.max_bag_height&&parseFloat(t.min_bag_height)>parseFloat(t.max_bag_height),errorField:"min_bag_height",message:"Minimum bag height cannot exceed maximum bag height"}]},ORDER:{required:["odp_number","article_code","production_lot","bag_height","bag_width","bag_step","product_type","quantity","delivery_date"],numeric:Qu.ORDER,logical:[{condition:t=>t.bag_width&&t.bag_step&&parseFloat(t.bag_width)<parseFloat(t.bag_step),errorField:"bag_width",message:"Bag width cannot be less than bag step"},{condition:t=>t.quantity&&t.quantity_completed&&parseFloat(t.quantity_completed)>parseFloat(t.quantity),errorField:"quantity_completed",message:"Quantity completed cannot exceed total quantity"},{condition:t=>t.delivery_date&&t.scheduled_start_time&&new Date(t.scheduled_start_time)>new Date(t.delivery_date),errorField:"scheduled_start_time",message:"Scheduled start cannot be after delivery date"}]},OFF_TIME:{required:["startDate","startTime","endDate","endTime"],logical:[{condition:t=>t.startDate&&t.endDate&&new Date(t.startDate)>new Date(t.endDate),errorField:"endDate",message:"End date cannot be before start date"},{condition:t=>t.startDate&&t.endDate&&t.startDate===t.endDate&&t.startTime&&t.endTime&&t.startTime>=t.endTime,errorField:"endTime",message:"End time must be after start time when dates are the same"}]}},Tm=t=>typeof t=="string"?t.trim().length>0:Array.isArray(t)?t.length>0:typeof t=="object"&&t!==null?Object.keys(t).length>0:!!t,RM=t=>!t||typeof t!="string"?!1:/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t),AM=t=>!t||typeof t!="string"?!1:/^[+]?[1-9][\d]{0,15}$/.test(t.replace(/\s/g,"")),OM=t=>{if(!t)return!1;const e=new Date(t);return e instanceof Date&&!isNaN(e)},Cw=(t,e=null,n=null)=>{const i=typeof t=="string"?parseFloat(t):t;return!(typeof i!="number"||isNaN(i)||e!==null&&i<e||n!==null&&i>n)},DM=(t,e=null,n=null)=>{const i=typeof t=="string"?parseInt(t,10):t;return!(!Number.isInteger(i)||e!==null&&i<e||n!==null&&i>n)},MM=t=>{if(!t||typeof t!="string")return!1;try{return new URL(t),!0}catch{return!1}},Rw=(t,e)=>!t||!e?!1:typeof e=="string"?new RegExp(e).test(t):e instanceof RegExp?e.test(t):!1,Aw=(t,e)=>!t||typeof t!="string"?!1:t.length>=e,Ow=(t,e)=>!t||typeof t!="string"?!1:t.length<=e,Dw=(t,e,n)=>typeof t!="number"||isNaN(t)?!1:t>=e&&t<=n,kM=t=>!t||typeof t!="string"?!1:/^[a-zA-Z0-9\s\-_]{2,100}$/.test(t.trim()),NM=t=>!t||typeof t!="string"?!1:/^[a-zA-Z0-9]{3,20}$/.test(t.trim()),jM=t=>!t||typeof t!="string"?!1:/^[a-zA-Z0-9-]{3,50}$/.test(t.trim()),LM=t=>["ZANICA","BUSTO_GAROLFO"].includes(t),IM=t=>["STAMPA","CONFEZIONAMENTO"].includes(t),UM=t=>["ACTIVE","INACTIVE"].includes(t),PM=t=>["CREMA","LIQUIDO","POLVERI"].includes(t),FM=t=>["3","4"].includes(t),zM=(t,e)=>{const n={};return Object.keys(e).forEach(i=>{const a=t[i],o=e[i];if(o.required&&!Tm(a))n[i]=o.required;else if(a&&o.pattern&&!Rw(a,o.pattern))n[i]=o.pattern;else if(a&&o.minLength&&!Aw(a,o.minLength))n[i]=o.minLength;else if(a&&o.maxLength&&!Ow(a,o.maxLength))n[i]=o.maxLength;else if(a&&o.min!==void 0&&!Dw(a,o.min,o.max||1/0))n[i]=o.min;else if(a&&o.custom){const l=o.custom(a,t);l&&(n[i]=l)}}),n},gs={validateRequiredFields:xw,validateNumericFields:Em,validateDepartmentFields:Ew,validateLogicalRelations:Tw,validateAll:TM,VALIDATION_CONFIGS:CM,VALIDATION_SCHEMAS:Qu,isNotEmpty:Tm,isValidEmail:RM,isValidPhone:AM,isValidDate:OM,isValidNumber:Cw,isValidInteger:DM,isValidUrl:MM,matchesPattern:Rw,hasMinLength:Aw,hasMaxLength:Ow,isInRange:Dw,isValidMachineName:kM,isValidOdpNumber:NM,isValidArticleCode:jM,isValidWorkCenter:LM,isValidDepartment:IM,isValidMachineStatus:UM,isValidProductType:PM,isValidSealSides:FM,validateFormData:zM},BM=()=>{const t=A.useCallback(a=>{const o=gs.validateAll(a,gs.VALIDATION_CONFIGS.MACHINE);return Object.values(o)},[]),e=A.useCallback((a,o)=>{const l=[];return o.some(d=>d.scheduled_machine_id===a)&&l.push("Cannot delete machine with scheduled tasks. Please unschedule all tasks first."),l},[]),n=A.useCallback(a=>({name:a?.machine_name||"Unknown Machine",type:a?.machine_type||"Unknown Type",department:a?.department||"Unknown Department",workCenter:a?.work_center||"Unknown Work Center",status:a?.status||"UNKNOWN",isActive:a?.status==="ACTIVE"}),[]),i=A.useCallback((a,o)=>{if(a.status!=="ACTIVE")return!1;const l=a.active_shifts||[];if(l.length===0)return!1;const u=o.getUTCHours();return l.some(f=>{switch(f){case"T1":return u>=6&&u<14;case"T2":return u>=14&&u<22;case"T3":return u>=22||u<6;default:return!1}})},[]);return{validateMachine:t,validateMachineDeletion:e,getMachineDisplayInfo:n,isMachineAvailable:i}},HM=()=>{const t=A.useCallback(a=>{const o=gs.validateAll(a,gs.VALIDATION_CONFIGS.ORDER);return Object.values(o)},[]),e=A.useCallback((a,o)=>{const l=[];if(!a)return l.push("Please select a production phase"),l;o.department&&a.department!==o.department&&l.push(`Selected phase is for ${a.department} department, but order is for ${o.department}`),o.work_center&&a.work_center!==o.work_center&&l.push(`Selected phase is for ${a.work_center} work center, but order is for ${o.work_center}`);const u=gs.validateDepartmentFields(a,a.department,"PHASE");return Object.values(u).forEach(d=>l.push(d)),l},[]),n=A.useCallback((a,o,l,u)=>{const d=[];return a?o?!l||!u?(d.push("Start and end times are required"),d):(o.status!=="ACTIVE"&&d.push(`Machine ${o.machine_name} is not active`),a.scheduled_machine_id&&a.scheduled_machine_id!==o.id&&d.push("Order is already scheduled on a different machine"),a.fase||d.push("Order must have a production phase selected"),(!a.quantity||a.quantity<=0)&&d.push("Order must have a valid quantity"),(!a.duration||a.duration<=0)&&d.push("Order must have calculated duration"),d):(d.push("Machine is required"),d):(d.push("Order is required"),d)},[]),i=A.useCallback(a=>{const o=[];return a?(a.quantity_completed>0&&o.push("Cannot delete order that has started production"),a.scheduled_machine_id&&o.push("Cannot delete scheduled order. Please unschedule first."),o):(o.push("Order is required"),o)},[]);return{validateOrder:t,validatePhaseSelection:e,validateOrderScheduling:n,validateOrderDeletion:i}},$M=()=>({validatePhase:n=>{const i=gs.validateAll(n,gs.VALIDATION_CONFIGS.PHASE);return Object.values(i)},validateForm:n=>gs.validateAll(n,gs.VALIDATION_CONFIGS.PHASE)}),wi=(t="")=>{const{showAlert:e,showConfirmDialog:n}=Se(),i=A.useCallback((y,b={})=>{const{showUserAlert:S=!0,alertType:w="error",logError:x=!0,context:E=t,fallbackMessage:C="An unexpected error occurred"}=b,R=$n(y,E);if(x&&gi(R,E),S){const M=R.userMessage||C;e(M,w)}return R},[t,e]),a=A.useCallback(async(y,b={})=>{const{showUserAlert:S=!0,alertType:w="error",context:x=t,fallbackMessage:E="Operation failed",retry:C=!1,maxRetries:R=3}=b;try{return C?await Ab(y,R):await y()}catch(M){throw i(M,{showUserAlert:S,alertType:w,context:x,fallbackMessage:E})}},[t,i]),o=A.useCallback((y,b)=>{const S=i(y,{showUserAlert:!1});S.code===me.VALIDATION_ERROR?S.fieldErrors?Object.entries(S.fieldErrors).forEach(([w,x])=>{b(w,{type:"server",message:x})}):b("root",{type:"server",message:S.userMessage}):b("root",{type:"server",message:S.userMessage})},[i]),l=A.useCallback((y,b,S)=>{const w=i(y,{context:`${b} ${S}`,fallbackMessage:`Failed to ${b} ${S}`});return w.code===me.VALIDATION_ERROR?e(`Please check the ${S} information and try again.`,"error"):w.code===me.NOT_FOUND_ERROR?e(`${S} not found. It may have been deleted.`,"error"):w.code===me.AUTHORIZATION_ERROR&&e(`You don't have permission to ${b} ${S}.`,"error"),w},[i,e]),u=A.useCallback((y,b)=>{const S=i(y,{context:"Network Operation",fallbackMessage:"Network error occurred"});return S.code===me.NETWORK_ERROR&&b&&n("Network Error","Your connection seems to be unstable. Would you like to retry?",b,"warning"),S},[i,n]),d=A.useCallback(y=>{const b=i(y,{context:"Authentication",fallbackMessage:"Authentication error occurred"});return b.code===me.AUTHENTICATION_ERROR&&e("Please log in again to continue.","warning"),b},[i,e]),f=A.useCallback((y,b="")=>Pg(y,b||t),[t]),g=A.useCallback(y=>$n(y,t).severity||"medium",[t]),p=A.useMemo(()=>me,[]);return{handleError:i,handleAsync:a,handleFormError:o,handleCrudError:l,handleNetworkError:u,handleAuthError:d,createSafeAsync:f,getErrorSeverity:g,errorTypes:p,withRetry:Ab,safeAsync:Pg}},VM=(t,e)=>{const{phases:n}=ni(),[i,a]=A.useState(""),[o,l]=A.useState(!1),[u,d]=A.useState(null),[f,g]=A.useState({}),p=A.useRef(null),y=A.useMemo(()=>!n||n.length===0?[]:t||e?n.filter(R=>(!t||R.department===t)&&(!e||R.work_center===e)).filter(R=>R.name.toLowerCase().includes(i.toLowerCase())):[],[i,t,e,n]);A.useEffect(()=>()=>{p.current&&clearTimeout(p.current)},[]);const b=A.useCallback((C,R)=>{const M=R===""?null:parseFloat(R);g(D=>({...D,[C]:M}))},[]),S=A.useCallback((C,R,M)=>{R("fase",C.id),d(C),a(C.name),l(!1),M("fase"),g({v_stampa:C.v_stampa||null,t_setup_stampa:C.t_setup_stampa||null,costo_h_stampa:C.costo_h_stampa||null,v_conf:C.v_conf||null,t_setup_conf:C.t_setup_conf||null,costo_h_conf:C.costo_h_conf||null})},[]),w=A.useCallback(()=>{a(""),d(null),g({})},[]),x=A.useCallback(()=>{p.current&&clearTimeout(p.current),p.current=setTimeout(()=>l(!1),150)},[]);return A.useMemo(()=>({phaseSearch:i,setPhaseSearch:a,isDropdownVisible:o,setIsDropdownVisible:l,selectedPhase:u,setSelectedPhase:d,filteredPhases:y,editablePhaseParams:f,setEditablePhaseParams:g,handlePhaseParamChange:b,handlePhaseSelect:S,resetPhaseData:w,handleBlur:x,blurTimeoutRef:p}),[i,o,u,y,f,g,b,S,w,x])};function GM(){const{machines:t,updateMachine:e,removeMachine:n}=sn(),{selectedWorkCenter:i,isLoading:a,isInitialized:o,showAlert:l,showConfirmDialog:u}=Se(),{init:d,cleanup:f}=zi(),g=A.useMemo(()=>i?i===Me.BOTH?t:t.filter(x=>x.work_center===i):[],[t,i]),{validateMachine:p}=BM(),{handleAsync:y}=wi("MachineryListPage");A.useEffect(()=>(o||d(),()=>{f()}),[d,o,f]);const b=A.useMemo(()=>[{header:"ID Macchina",accessorKey:"id"},{header:"Tipo Macchina",accessorKey:"machine_type"},{header:"Nome Macchina",accessorKey:"machine_name",cell:Ye},{header:"Centro di Lavoro",accessorKey:"work_center"},{header:"Reparto",accessorKey:"department"},{header:"Stato",accessorKey:"status",cell:Ye},{header:"Larghezza Min (mm)",accessorKey:"min_web_width",cell:Ye},{header:"Larghezza Max (mm)",accessorKey:"max_web_width",cell:Ye},{header:"Altezza Min (mm)",accessorKey:"min_bag_height",cell:Ye},{header:"Altezza Max (mm)",accessorKey:"max_bag_height",cell:Ye},{header:"Velocit Std",accessorKey:"standard_speed",cell:Ye},{header:"Setup (h)",accessorKey:"setup_time_standard",cell:Ye},{header:"Cambio Colore (h)",accessorKey:"changeover_color",cell:Ye},{header:"Cambio Materiale (h)",accessorKey:"changeover_material",cell:Ye},{header:"Turni Attivi",accessorKey:"active_shifts",cell:x=>Array.isArray(x.getValue())?x.getValue().join(", "):""},{header:"Creato il",accessorKey:"created_at",cell:x=>si(x.getValue())},{header:"Aggiornato il",accessorKey:"updated_at",cell:x=>si(x.getValue())},{header:"Calendario",accessorKey:"id",cell:x=>_.jsx(xn,{to:`/machinery/${x.getValue()}/calendar`,className:"nav-btn today",style:{textDecoration:"none"},children:"Visualizza Calendario"})}],[]),S=async x=>{const E=p(x);if(E.length>0){l(`Errori di validazione:
${E.join(`
`)}`,"error");return}await y(()=>e(x.id,x),{context:"Aggiorna Macchina",fallbackMessage:"Aggiornamento macchina fallito"})},w=async x=>{u("Elimina Macchina",`Sei sicuro di voler eliminare "${x.machine_name}"? Questa azione non pu essere annullata.`,async()=>{await y(()=>n(x.id),{context:"Elimina Macchina",fallbackMessage:"Eliminazione macchina fallita"})},"danger")};return a?_.jsx("div",{children:"Caricamento dati macchine..."}):i?_.jsxs("div",{className:"content-section",children:[_.jsx(bs,{title:"Catalogo Macchine"}),_.jsx(xm,{columns:b,data:g,onSaveRow:S,onDeleteRow:w})]}):_.jsx("div",{className:"error",children:"Seleziona un centro di lavoro per visualizzare i dati delle macchine."})}var Ql=t=>t.type==="checkbox",Na=t=>t instanceof Date,wn=t=>t==null;const Mw=t=>typeof t=="object";var jt=t=>!wn(t)&&!Array.isArray(t)&&Mw(t)&&!Na(t),qM=t=>jt(t)&&t.target?Ql(t.target)?t.target.checked:t.target.value:t,YM=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,WM=(t,e)=>t.has(YM(e)),KM=t=>{const e=t.constructor&&t.constructor.prototype;return jt(e)&&e.hasOwnProperty("isPrototypeOf")},Cm=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function tn(t){let e;const n=Array.isArray(t),i=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(!(Cm&&(t instanceof Blob||i))&&(n||jt(t)))if(e=n?[]:Object.create(Object.getPrototypeOf(t)),!n&&!KM(t))e=t;else for(const a in t)t.hasOwnProperty(a)&&(e[a]=tn(t[a]));else return t;return e}var Sd=t=>/^\w*$/.test(t),Ft=t=>t===void 0,Rm=t=>Array.isArray(t)?t.filter(Boolean):[],Am=t=>Rm(t.replace(/["|']|\]/g,"").split(/\.|\[/)),ye=(t,e,n)=>{if(!e||!jt(t))return n;const i=(Sd(e)?[e]:Am(e)).reduce((a,o)=>wn(a)?a:a[o],t);return Ft(i)||i===t?Ft(t[e])?n:t[e]:i},Ii=t=>typeof t=="boolean",wt=(t,e,n)=>{let i=-1;const a=Sd(e)?[e]:Am(e),o=a.length,l=o-1;for(;++i<o;){const u=a[i];let d=n;if(i!==l){const f=t[u];d=jt(f)||Array.isArray(f)?f:isNaN(+a[i+1])?{}:[]}if(u==="__proto__"||u==="constructor"||u==="prototype")return;t[u]=d,t=t[u]}};const zb={BLUR:"blur",FOCUS_OUT:"focusout"},pi={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},rs={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},XM=Ie.createContext(null);XM.displayName="HookFormContext";var QM=(t,e,n,i=!0)=>{const a={defaultValues:e._defaultValues};for(const o in t)Object.defineProperty(a,o,{get:()=>{const l=o;return e._proxyFormState[l]!==pi.all&&(e._proxyFormState[l]=!i||pi.all),t[l]}});return a};const ZM=typeof window<"u"?Ie.useLayoutEffect:Ie.useEffect;var Fi=t=>typeof t=="string",JM=(t,e,n,i,a)=>Fi(t)?(i&&e.watch.add(t),ye(n,t,a)):Array.isArray(t)?t.map(o=>(i&&e.watch.add(o),ye(n,o))):(i&&(e.watchAll=!0),n),Gg=t=>wn(t)||!Mw(t);function Ks(t,e,n=new WeakSet){if(Gg(t)||Gg(e))return t===e;if(Na(t)&&Na(e))return t.getTime()===e.getTime();const i=Object.keys(t),a=Object.keys(e);if(i.length!==a.length)return!1;if(n.has(t)||n.has(e))return!0;n.add(t),n.add(e);for(const o of i){const l=t[o];if(!a.includes(o))return!1;if(o!=="ref"){const u=e[o];if(Na(l)&&Na(u)||jt(l)&&jt(u)||Array.isArray(l)&&Array.isArray(u)?!Ks(l,u,n):l!==u)return!1}}return!0}var e1=(t,e,n,i,a)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[i]:a||!0}}:{},xl=t=>Array.isArray(t)?t:[t],Bb=()=>{let t=[];return{get observers(){return t},next:a=>{for(const o of t)o.next&&o.next(a)},subscribe:a=>(t.push(a),{unsubscribe:()=>{t=t.filter(o=>o!==a)}}),unsubscribe:()=>{t=[]}}},Mn=t=>jt(t)&&!Object.keys(t).length,Om=t=>t.type==="file",vi=t=>typeof t=="function",Zu=t=>{if(!Cm)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},kw=t=>t.type==="select-multiple",Dm=t=>t.type==="radio",t1=t=>Dm(t)||Ql(t),cg=t=>Zu(t)&&t.isConnected;function n1(t,e){const n=e.slice(0,-1).length;let i=0;for(;i<n;)t=Ft(t)?i++:t[e[i++]];return t}function i1(t){for(const e in t)if(t.hasOwnProperty(e)&&!Ft(t[e]))return!1;return!0}function Pt(t,e){const n=Array.isArray(e)?e:Sd(e)?[e]:Am(e),i=n.length===1?t:n1(t,n),a=n.length-1,o=n[a];return i&&delete i[o],a!==0&&(jt(i)&&Mn(i)||Array.isArray(i)&&i1(i))&&Pt(t,n.slice(0,-1)),t}var Nw=t=>{for(const e in t)if(vi(t[e]))return!0;return!1};function Ju(t,e={}){const n=Array.isArray(t);if(jt(t)||n)for(const i in t)Array.isArray(t[i])||jt(t[i])&&!Nw(t[i])?(e[i]=Array.isArray(t[i])?[]:{},Ju(t[i],e[i])):wn(t[i])||(e[i]=!0);return e}function jw(t,e,n){const i=Array.isArray(t);if(jt(t)||i)for(const a in t)Array.isArray(t[a])||jt(t[a])&&!Nw(t[a])?Ft(e)||Gg(n[a])?n[a]=Array.isArray(t[a])?Ju(t[a],[]):{...Ju(t[a])}:jw(t[a],wn(e)?{}:e[a],n[a]):n[a]=!Ks(t[a],e[a]);return n}var rl=(t,e)=>jw(t,e,Ju(e));const Hb={value:!1,isValid:!1},$b={value:!0,isValid:!0};var Lw=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!Ft(t[0].attributes.value)?Ft(t[0].value)||t[0].value===""?$b:{value:t[0].value,isValid:!0}:$b:Hb}return Hb},Iw=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:i})=>Ft(t)?t:e?t===""?NaN:t&&+t:n&&Fi(t)?new Date(t):i?i(t):t;const Vb={isValid:!1,value:null};var Uw=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,Vb):Vb;function Gb(t){const e=t.ref;return Om(e)?e.files:Dm(e)?Uw(t.refs).value:kw(e)?[...e.selectedOptions].map(({value:n})=>n):Ql(e)?Lw(t.refs).value:Iw(Ft(e.value)?t.ref.value:e.value,t)}var s1=(t,e,n,i)=>{const a={};for(const o of t){const l=ye(e,o);l&&wt(a,o,l._f)}return{criteriaMode:n,names:[...t],fields:a,shouldUseNativeValidation:i}},ed=t=>t instanceof RegExp,ol=t=>Ft(t)?t:ed(t)?t.source:jt(t)?ed(t.value)?t.value.source:t.value:t,qb=t=>({isOnSubmit:!t||t===pi.onSubmit,isOnBlur:t===pi.onBlur,isOnChange:t===pi.onChange,isOnAll:t===pi.all,isOnTouch:t===pi.onTouched});const Yb="AsyncFunction";var a1=t=>!!t&&!!t.validate&&!!(vi(t.validate)&&t.validate.constructor.name===Yb||jt(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===Yb)),r1=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),Wb=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(i=>t.startsWith(i)&&/^\.\w+/.test(t.slice(i.length))));const El=(t,e,n,i)=>{for(const a of n||Object.keys(t)){const o=ye(t,a);if(o){const{_f:l,...u}=o;if(l){if(l.refs&&l.refs[0]&&e(l.refs[0],a)&&!i)return!0;if(l.ref&&e(l.ref,l.name)&&!i)return!0;if(El(u,e))break}else if(jt(u)&&El(u,e))break}}};function Kb(t,e,n){const i=ye(t,n);if(i||Sd(n))return{error:i,name:n};const a=n.split(".");for(;a.length;){const o=a.join("."),l=ye(e,o),u=ye(t,o);if(l&&!Array.isArray(l)&&n!==o)return{name:n};if(u&&u.type)return{name:o,error:u};if(u&&u.root&&u.root.type)return{name:`${o}.root`,error:u.root};a.pop()}return{name:n}}var o1=(t,e,n,i)=>{n(t);const{name:a,...o}=t;return Mn(o)||Object.keys(o).length>=Object.keys(e).length||Object.keys(o).find(l=>e[l]===(!i||pi.all))},l1=(t,e,n)=>!t||!e||t===e||xl(t).some(i=>i&&(n?i===e:i.startsWith(e)||e.startsWith(i))),c1=(t,e,n,i,a)=>a.isOnAll?!1:!n&&a.isOnTouch?!(e||t):(n?i.isOnBlur:a.isOnBlur)?!t:(n?i.isOnChange:a.isOnChange)?t:!0,u1=(t,e)=>!Rm(ye(t,e)).length&&Pt(t,e),d1=(t,e,n)=>{const i=xl(ye(t,n));return wt(i,"root",e[n]),wt(t,n,i),t},Vu=t=>Fi(t);function Xb(t,e,n="validate"){if(Vu(t)||Array.isArray(t)&&t.every(Vu)||Ii(t)&&!t)return{type:n,message:Vu(t)?t:"",ref:e}}var Ir=t=>jt(t)&&!ed(t)?t:{value:t,message:""},Qb=async(t,e,n,i,a,o)=>{const{ref:l,refs:u,required:d,maxLength:f,minLength:g,min:p,max:y,pattern:b,validate:S,name:w,valueAsNumber:x,mount:E}=t._f,C=ye(n,w);if(!E||e.has(w))return{};const R=u?u[0]:l,M=H=>{a&&R.reportValidity&&(R.setCustomValidity(Ii(H)?"":H||""),R.reportValidity())},D={},I=Dm(l),L=Ql(l),z=I||L,P=(x||Om(l))&&Ft(l.value)&&Ft(C)||Zu(l)&&l.value===""||C===""||Array.isArray(C)&&!C.length,K=e1.bind(null,w,i,D),X=(H,ee,se,te=rs.maxLength,U=rs.minLength)=>{const Y=H?ee:se;D[w]={type:H?te:U,message:Y,ref:l,...K(H?te:U,Y)}};if(o?!Array.isArray(C)||!C.length:d&&(!z&&(P||wn(C))||Ii(C)&&!C||L&&!Lw(u).isValid||I&&!Uw(u).isValid)){const{value:H,message:ee}=Vu(d)?{value:!!d,message:d}:Ir(d);if(H&&(D[w]={type:rs.required,message:ee,ref:R,...K(rs.required,ee)},!i))return M(ee),D}if(!P&&(!wn(p)||!wn(y))){let H,ee;const se=Ir(y),te=Ir(p);if(!wn(C)&&!isNaN(C)){const U=l.valueAsNumber||C&&+C;wn(se.value)||(H=U>se.value),wn(te.value)||(ee=U<te.value)}else{const U=l.valueAsDate||new Date(C),Y=k=>new Date(new Date().toDateString()+" "+k),le=l.type=="time",ue=l.type=="week";Fi(se.value)&&C&&(H=le?Y(C)>Y(se.value):ue?C>se.value:U>new Date(se.value)),Fi(te.value)&&C&&(ee=le?Y(C)<Y(te.value):ue?C<te.value:U<new Date(te.value))}if((H||ee)&&(X(!!H,se.message,te.message,rs.max,rs.min),!i))return M(D[w].message),D}if((f||g)&&!P&&(Fi(C)||o&&Array.isArray(C))){const H=Ir(f),ee=Ir(g),se=!wn(H.value)&&C.length>+H.value,te=!wn(ee.value)&&C.length<+ee.value;if((se||te)&&(X(se,H.message,ee.message),!i))return M(D[w].message),D}if(b&&!P&&Fi(C)){const{value:H,message:ee}=Ir(b);if(ed(H)&&!C.match(H)&&(D[w]={type:rs.pattern,message:ee,ref:l,...K(rs.pattern,ee)},!i))return M(ee),D}if(S){if(vi(S)){const H=await S(C,n),ee=Xb(H,R);if(ee&&(D[w]={...ee,...K(rs.validate,ee.message)},!i))return M(ee.message),D}else if(jt(S)){let H={};for(const ee in S){if(!Mn(H)&&!i)break;const se=Xb(await S[ee](C,n),R,ee);se&&(H={...se,...K(ee,se.message)},M(se.message),i&&(D[w]=H))}if(!Mn(H)&&(D[w]={ref:R,...H},!i))return D}}return M(!0),D};const h1={mode:pi.onSubmit,reValidateMode:pi.onChange,shouldFocusError:!0};function f1(t={}){let e={...h1,...t},n={submitCount:0,isDirty:!1,isReady:!1,isLoading:vi(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},i={},a=jt(e.defaultValues)||jt(e.values)?tn(e.defaultValues||e.values)||{}:{},o=e.shouldUnregister?{}:tn(a),l={action:!1,mount:!1,watch:!1},u={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},d,f=0;const g={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let p={...g};const y={array:Bb(),state:Bb()},b=e.criteriaMode===pi.all,S=j=>$=>{clearTimeout(f),f=setTimeout(j,$)},w=async j=>{if(!e.disabled&&(g.isValid||p.isValid||j)){const $=e.resolver?Mn((await L()).errors):await P(i,!0);$!==n.isValid&&y.state.next({isValid:$})}},x=(j,$)=>{!e.disabled&&(g.isValidating||g.validatingFields||p.isValidating||p.validatingFields)&&((j||Array.from(u.mount)).forEach(Q=>{Q&&($?wt(n.validatingFields,Q,$):Pt(n.validatingFields,Q))}),y.state.next({validatingFields:n.validatingFields,isValidating:!Mn(n.validatingFields)}))},E=(j,$=[],Q,de,ce=!0,ae=!0)=>{if(de&&Q&&!e.disabled){if(l.action=!0,ae&&Array.isArray(ye(i,j))){const ve=Q(ye(i,j),de.argA,de.argB);ce&&wt(i,j,ve)}if(ae&&Array.isArray(ye(n.errors,j))){const ve=Q(ye(n.errors,j),de.argA,de.argB);ce&&wt(n.errors,j,ve),u1(n.errors,j)}if((g.touchedFields||p.touchedFields)&&ae&&Array.isArray(ye(n.touchedFields,j))){const ve=Q(ye(n.touchedFields,j),de.argA,de.argB);ce&&wt(n.touchedFields,j,ve)}(g.dirtyFields||p.dirtyFields)&&(n.dirtyFields=rl(a,o)),y.state.next({name:j,isDirty:X(j,$),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else wt(o,j,$)},C=(j,$)=>{wt(n.errors,j,$),y.state.next({errors:n.errors})},R=j=>{n.errors=j,y.state.next({errors:n.errors,isValid:!1})},M=(j,$,Q,de)=>{const ce=ye(i,j);if(ce){const ae=ye(o,j,Ft(Q)?ye(a,j):Q);Ft(ae)||de&&de.defaultChecked||$?wt(o,j,$?ae:Gb(ce._f)):se(j,ae),l.mount&&w()}},D=(j,$,Q,de,ce)=>{let ae=!1,ve=!1;const Te={name:j};if(!e.disabled){if(!Q||de){(g.isDirty||p.isDirty)&&(ve=n.isDirty,n.isDirty=Te.isDirty=X(),ae=ve!==Te.isDirty);const je=Ks(ye(a,j),$);ve=!!ye(n.dirtyFields,j),je?Pt(n.dirtyFields,j):wt(n.dirtyFields,j,!0),Te.dirtyFields=n.dirtyFields,ae=ae||(g.dirtyFields||p.dirtyFields)&&ve!==!je}if(Q){const je=ye(n.touchedFields,j);je||(wt(n.touchedFields,j,Q),Te.touchedFields=n.touchedFields,ae=ae||(g.touchedFields||p.touchedFields)&&je!==Q)}ae&&ce&&y.state.next(Te)}return ae?Te:{}},I=(j,$,Q,de)=>{const ce=ye(n.errors,j),ae=(g.isValid||p.isValid)&&Ii($)&&n.isValid!==$;if(e.delayError&&Q?(d=S(()=>C(j,Q)),d(e.delayError)):(clearTimeout(f),d=null,Q?wt(n.errors,j,Q):Pt(n.errors,j)),(Q?!Ks(ce,Q):ce)||!Mn(de)||ae){const ve={...de,...ae&&Ii($)?{isValid:$}:{},errors:n.errors,name:j};n={...n,...ve},y.state.next(ve)}},L=async j=>{x(j,!0);const $=await e.resolver(o,e.context,s1(j||u.mount,i,e.criteriaMode,e.shouldUseNativeValidation));return x(j),$},z=async j=>{const{errors:$}=await L(j);if(j)for(const Q of j){const de=ye($,Q);de?wt(n.errors,Q,de):Pt(n.errors,Q)}else n.errors=$;return $},P=async(j,$,Q={valid:!0})=>{for(const de in j){const ce=j[de];if(ce){const{_f:ae,...ve}=ce;if(ae){const Te=u.array.has(ae.name),je=ce._f&&a1(ce._f);je&&g.validatingFields&&x([de],!0);const We=await Qb(ce,u.disabled,o,b,e.shouldUseNativeValidation&&!$,Te);if(je&&g.validatingFields&&x([de]),We[ae.name]&&(Q.valid=!1,$))break;!$&&(ye(We,ae.name)?Te?d1(n.errors,We,ae.name):wt(n.errors,ae.name,We[ae.name]):Pt(n.errors,ae.name))}!Mn(ve)&&await P(ve,$,Q)}}return Q.valid},K=()=>{for(const j of u.unMount){const $=ye(i,j);$&&($._f.refs?$._f.refs.every(Q=>!cg(Q)):!cg($._f.ref))&&vt(j)}u.unMount=new Set},X=(j,$)=>!e.disabled&&(j&&$&&wt(o,j,$),!Ks(k(),a)),H=(j,$,Q)=>JM(j,u,{...l.mount?o:Ft($)?a:Fi(j)?{[j]:$}:$},Q,$),ee=j=>Rm(ye(l.mount?o:a,j,e.shouldUnregister?ye(a,j,[]):[])),se=(j,$,Q={})=>{const de=ye(i,j);let ce=$;if(de){const ae=de._f;ae&&(!ae.disabled&&wt(o,j,Iw($,ae)),ce=Zu(ae.ref)&&wn($)?"":$,kw(ae.ref)?[...ae.ref.options].forEach(ve=>ve.selected=ce.includes(ve.value)):ae.refs?Ql(ae.ref)?ae.refs.forEach(ve=>{(!ve.defaultChecked||!ve.disabled)&&(Array.isArray(ce)?ve.checked=!!ce.find(Te=>Te===ve.value):ve.checked=ce===ve.value||!!ce)}):ae.refs.forEach(ve=>ve.checked=ve.value===ce):Om(ae.ref)?ae.ref.value="":(ae.ref.value=ce,ae.ref.type||y.state.next({name:j,values:tn(o)})))}(Q.shouldDirty||Q.shouldTouch)&&D(j,ce,Q.shouldTouch,Q.shouldDirty,!0),Q.shouldValidate&&ue(j)},te=(j,$,Q)=>{for(const de in $){if(!$.hasOwnProperty(de))return;const ce=$[de],ae=j+"."+de,ve=ye(i,ae);(u.array.has(j)||jt(ce)||ve&&!ve._f)&&!Na(ce)?te(ae,ce,Q):se(ae,ce,Q)}},U=(j,$,Q={})=>{const de=ye(i,j),ce=u.array.has(j),ae=tn($);wt(o,j,ae),ce?(y.array.next({name:j,values:tn(o)}),(g.isDirty||g.dirtyFields||p.isDirty||p.dirtyFields)&&Q.shouldDirty&&y.state.next({name:j,dirtyFields:rl(a,o),isDirty:X(j,ae)})):de&&!de._f&&!wn(ae)?te(j,ae,Q):se(j,ae,Q),Wb(j,u)&&y.state.next({...n,name:j}),y.state.next({name:l.mount?j:void 0,values:tn(o)})},Y=async j=>{l.mount=!0;const $=j.target;let Q=$.name,de=!0;const ce=ye(i,Q),ae=je=>{de=Number.isNaN(je)||Na(je)&&isNaN(je.getTime())||Ks(je,ye(o,Q,je))},ve=qb(e.mode),Te=qb(e.reValidateMode);if(ce){let je,We;const Bi=$.type?Gb(ce._f):qM(j),zt=j.type===zb.BLUR||j.type===zb.FOCUS_OUT,Ba=!r1(ce._f)&&!e.resolver&&!ye(n.errors,Q)&&!ce._f.deps||c1(zt,ye(n.touchedFields,Q),n.isSubmitted,Te,ve),xi=Wb(Q,u,zt);wt(o,Q,Bi),zt?(!$||!$.readOnly)&&(ce._f.onBlur&&ce._f.onBlur(j),d&&d(0)):ce._f.onChange&&ce._f.onChange(j);const Ei=D(Q,Bi,zt),jn=!Mn(Ei)||xi;if(!zt&&y.state.next({name:Q,type:j.type,values:tn(o)}),Ba)return(g.isValid||p.isValid)&&(e.mode==="onBlur"?zt&&w():zt||w()),jn&&y.state.next({name:Q,...xi?{}:Ei});if(!zt&&xi&&y.state.next({...n}),e.resolver){const{errors:Ti}=await L([Q]);if(ae(Bi),de){const Hi=Kb(n.errors,i,Q),aa=Kb(Ti,i,Hi.name||Q);je=aa.error,Q=aa.name,We=Mn(Ti)}}else x([Q],!0),je=(await Qb(ce,u.disabled,o,b,e.shouldUseNativeValidation))[Q],x([Q]),ae(Bi),de&&(je?We=!1:(g.isValid||p.isValid)&&(We=await P(i,!0)));de&&(ce._f.deps&&ue(ce._f.deps),I(Q,We,je,Ei))}},le=(j,$)=>{if(ye(n.errors,$)&&j.focus)return j.focus(),1},ue=async(j,$={})=>{let Q,de;const ce=xl(j);if(e.resolver){const ae=await z(Ft(j)?j:ce);Q=Mn(ae),de=j?!ce.some(ve=>ye(ae,ve)):Q}else j?(de=(await Promise.all(ce.map(async ae=>{const ve=ye(i,ae);return await P(ve&&ve._f?{[ae]:ve}:ve)}))).every(Boolean),!(!de&&!n.isValid)&&w()):de=Q=await P(i);return y.state.next({...!Fi(j)||(g.isValid||p.isValid)&&Q!==n.isValid?{}:{name:j},...e.resolver||!j?{isValid:Q}:{},errors:n.errors}),$.shouldFocus&&!de&&El(i,le,j?ce:u.mount),de},k=j=>{const $={...l.mount?o:a};return Ft(j)?$:Fi(j)?ye($,j):j.map(Q=>ye($,Q))},Z=(j,$)=>({invalid:!!ye(($||n).errors,j),isDirty:!!ye(($||n).dirtyFields,j),error:ye(($||n).errors,j),isValidating:!!ye(n.validatingFields,j),isTouched:!!ye(($||n).touchedFields,j)}),re=j=>{j&&xl(j).forEach($=>Pt(n.errors,$)),y.state.next({errors:j?n.errors:{}})},oe=(j,$,Q)=>{const de=(ye(i,j,{_f:{}})._f||{}).ref,ce=ye(n.errors,j)||{},{ref:ae,message:ve,type:Te,...je}=ce;wt(n.errors,j,{...je,...$,ref:de}),y.state.next({name:j,errors:n.errors,isValid:!1}),Q&&Q.shouldFocus&&de&&de.focus&&de.focus()},ge=(j,$)=>vi(j)?y.state.subscribe({next:Q=>"values"in Q&&j(H(void 0,$),Q)}):H(j,$,!0),xe=j=>y.state.subscribe({next:$=>{l1(j.name,$.name,j.exact)&&o1($,j.formState||g,Ze,j.reRenderRoot)&&j.callback({values:{...o},...n,...$,defaultValues:a})}}).unsubscribe,fe=j=>(l.mount=!0,p={...p,...j.formState},xe({...j,formState:p})),vt=(j,$={})=>{for(const Q of j?xl(j):u.mount)u.mount.delete(Q),u.array.delete(Q),$.keepValue||(Pt(i,Q),Pt(o,Q)),!$.keepError&&Pt(n.errors,Q),!$.keepDirty&&Pt(n.dirtyFields,Q),!$.keepTouched&&Pt(n.touchedFields,Q),!$.keepIsValidating&&Pt(n.validatingFields,Q),!e.shouldUnregister&&!$.keepDefaultValue&&Pt(a,Q);y.state.next({values:tn(o)}),y.state.next({...n,...$.keepDirty?{isDirty:X()}:{}}),!$.keepIsValid&&w()},$e=({disabled:j,name:$})=>{(Ii(j)&&l.mount||j||u.disabled.has($))&&(j?u.disabled.add($):u.disabled.delete($))},ke=(j,$={})=>{let Q=ye(i,j);const de=Ii($.disabled)||Ii(e.disabled);return wt(i,j,{...Q||{},_f:{...Q&&Q._f?Q._f:{ref:{name:j}},name:j,mount:!0,...$}}),u.mount.add(j),Q?$e({disabled:Ii($.disabled)?$.disabled:e.disabled,name:j}):M(j,!0,$.value),{...de?{disabled:$.disabled||e.disabled}:{},...e.progressive?{required:!!$.required,min:ol($.min),max:ol($.max),minLength:ol($.minLength),maxLength:ol($.maxLength),pattern:ol($.pattern)}:{},name:j,onChange:Y,onBlur:Y,ref:ce=>{if(ce){ke(j,$),Q=ye(i,j);const ae=Ft(ce.value)&&ce.querySelectorAll&&ce.querySelectorAll("input,select,textarea")[0]||ce,ve=t1(ae),Te=Q._f.refs||[];if(ve?Te.find(je=>je===ae):ae===Q._f.ref)return;wt(i,j,{_f:{...Q._f,...ve?{refs:[...Te.filter(cg),ae,...Array.isArray(ye(a,j))?[{}]:[]],ref:{type:ae.type,name:j}}:{ref:ae}}}),M(j,!1,void 0,ae)}else Q=ye(i,j,{}),Q._f&&(Q._f.mount=!1),(e.shouldUnregister||$.shouldUnregister)&&!(WM(u.array,j)&&l.action)&&u.unMount.add(j)}}},et=()=>e.shouldFocusError&&El(i,le,u.mount),Lt=j=>{Ii(j)&&(y.state.next({disabled:j}),El(i,($,Q)=>{const de=ye(i,Q);de&&($.disabled=de._f.disabled||j,Array.isArray(de._f.refs)&&de._f.refs.forEach(ce=>{ce.disabled=de._f.disabled||j}))},0,!1))},he=(j,$)=>async Q=>{let de;Q&&(Q.preventDefault&&Q.preventDefault(),Q.persist&&Q.persist());let ce=tn(o);if(y.state.next({isSubmitting:!0}),e.resolver){const{errors:ae,values:ve}=await L();n.errors=ae,ce=tn(ve)}else await P(i);if(u.disabled.size)for(const ae of u.disabled)Pt(ce,ae);if(Pt(n.errors,"root"),Mn(n.errors)){y.state.next({errors:{}});try{await j(ce,Q)}catch(ae){de=ae}}else $&&await $({...n.errors},Q),et(),setTimeout(et);if(y.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Mn(n.errors)&&!de,submitCount:n.submitCount+1,errors:n.errors}),de)throw de},_e=(j,$={})=>{ye(i,j)&&(Ft($.defaultValue)?U(j,tn(ye(a,j))):(U(j,$.defaultValue),wt(a,j,tn($.defaultValue))),$.keepTouched||Pt(n.touchedFields,j),$.keepDirty||(Pt(n.dirtyFields,j),n.isDirty=$.defaultValue?X(j,tn(ye(a,j))):X()),$.keepError||(Pt(n.errors,j),g.isValid&&w()),y.state.next({...n}))},Ee=(j,$={})=>{const Q=j?tn(j):a,de=tn(Q),ce=Mn(j),ae=ce?a:de;if($.keepDefaultValues||(a=Q),!$.keepValues){if($.keepDirtyValues){const ve=new Set([...u.mount,...Object.keys(rl(a,o))]);for(const Te of Array.from(ve))ye(n.dirtyFields,Te)?wt(ae,Te,ye(o,Te)):U(Te,ye(ae,Te))}else{if(Cm&&Ft(j))for(const ve of u.mount){const Te=ye(i,ve);if(Te&&Te._f){const je=Array.isArray(Te._f.refs)?Te._f.refs[0]:Te._f.ref;if(Zu(je)){const We=je.closest("form");if(We){We.reset();break}}}}if($.keepFieldsRef)for(const ve of u.mount)U(ve,ye(ae,ve));else i={}}o=e.shouldUnregister?$.keepDefaultValues?tn(a):{}:tn(ae),y.array.next({values:{...ae}}),y.state.next({values:{...ae}})}u={mount:$.keepDirtyValues?u.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},l.mount=!g.isValid||!!$.keepIsValid||!!$.keepDirtyValues,l.watch=!!e.shouldUnregister,y.state.next({submitCount:$.keepSubmitCount?n.submitCount:0,isDirty:ce?!1:$.keepDirty?n.isDirty:!!($.keepDefaultValues&&!Ks(j,a)),isSubmitted:$.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:ce?{}:$.keepDirtyValues?$.keepDefaultValues&&o?rl(a,o):n.dirtyFields:$.keepDefaultValues&&j?rl(a,j):$.keepDirty?n.dirtyFields:{},touchedFields:$.keepTouched?n.touchedFields:{},errors:$.keepErrors?n.errors:{},isSubmitSuccessful:$.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:a})},Ge=(j,$)=>Ee(vi(j)?j(o):j,$),Ne=(j,$={})=>{const Q=ye(i,j),de=Q&&Q._f;if(de){const ce=de.refs?de.refs[0]:de.ref;ce.focus&&(ce.focus(),$.shouldSelect&&vi(ce.select)&&ce.select())}},Ze=j=>{n={...n,...j}},Dt={control:{register:ke,unregister:vt,getFieldState:Z,handleSubmit:he,setError:oe,_subscribe:xe,_runSchema:L,_focusError:et,_getWatch:H,_getDirty:X,_setValid:w,_setFieldArray:E,_setDisabledField:$e,_setErrors:R,_getFieldArray:ee,_reset:Ee,_resetDefaultValues:()=>vi(e.defaultValues)&&e.defaultValues().then(j=>{Ge(j,e.resetOptions),y.state.next({isLoading:!1})}),_removeUnmounted:K,_disableForm:Lt,_subjects:y,_proxyFormState:g,get _fields(){return i},get _formValues(){return o},get _state(){return l},set _state(j){l=j},get _defaultValues(){return a},get _names(){return u},set _names(j){u=j},get _formState(){return n},get _options(){return e},set _options(j){e={...e,...j}}},subscribe:fe,trigger:ue,register:ke,handleSubmit:he,watch:ge,setValue:U,getValues:k,reset:Ge,resetField:_e,clearErrors:re,unregister:vt,setError:oe,setFocus:Ne,getFieldState:Z};return{...Dt,formControl:Dt}}function wd(t={}){const e=Ie.useRef(void 0),n=Ie.useRef(void 0),[i,a]=Ie.useState({isDirty:!1,isValidating:!1,isLoading:vi(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:vi(t.defaultValues)?void 0:t.defaultValues});if(!e.current)if(t.formControl)e.current={...t.formControl,formState:i},t.defaultValues&&!vi(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:l,...u}=f1(t);e.current={...u,formState:i}}const o=e.current.control;return o._options=t,ZM(()=>{const l=o._subscribe({formState:o._proxyFormState,callback:()=>a({...o._formState}),reRenderRoot:!0});return a(u=>({...u,isReady:!0})),o._formState.isReady=!0,l},[o]),Ie.useEffect(()=>o._disableForm(t.disabled),[o,t.disabled]),Ie.useEffect(()=>{t.mode&&(o._options.mode=t.mode),t.reValidateMode&&(o._options.reValidateMode=t.reValidateMode)},[o,t.mode,t.reValidateMode]),Ie.useEffect(()=>{t.errors&&(o._setErrors(t.errors),o._focusError())},[o,t.errors]),Ie.useEffect(()=>{t.shouldUnregister&&o._subjects.state.next({values:o._getWatch()})},[o,t.shouldUnregister]),Ie.useEffect(()=>{if(o._proxyFormState.isDirty){const l=o._getDirty();l!==i.isDirty&&o._subjects.state.next({isDirty:l})}},[o,i.isDirty]),Ie.useEffect(()=>{t.values&&!Ks(t.values,n.current)?(o._reset(t.values,{keepFieldsRef:!0,...o._options.resetOptions}),n.current=t.values,a(l=>({...l}))):o._resetDefaultValues()},[o,t.values]),Ie.useEffect(()=>{o._state.mount||(o._setValid(),o._state.mount=!0),o._state.watch&&(o._state.watch=!1,o._subjects.state.next({...o._formState})),o._removeUnmounted()}),e.current.formState=QM(i,o),e.current}const g1=(t,e)=>{const n=[];return e.forEach(({field:i,name:a})=>{t[i]?.trim()||n.push(`${a} is required`)}),n},ug=(t,e)=>{const n=[];return e.forEach(({field:i,name:a})=>{const o=t[i];o===""||o===null||o===void 0?n.push(`${a} is required`):Number(o)<0&&n.push(`${a} cannot be negative`)}),n},m1=(t,e)=>{const n=[];return e.forEach(({min:i,max:a,name:o})=>{Number(t[i])>Number(t[a])&&n.push(`Min ${o} cannot exceed Max ${o}`)}),n},p1=[{field:"machine_name",name:"Machine Name"},{field:"machine_type",name:"Machine Type"},{field:"work_center",name:"Work Center"},{field:"department",name:"Department"}],v1=[{field:"min_web_width",name:"Min Web Width"},{field:"max_web_width",name:"Max Web Width"},{field:"min_bag_height",name:"Min Bag Height"},{field:"max_bag_height",name:"Max Bag Height"},{field:"standard_speed",name:"Standard Speed"},{field:"setup_time_standard",name:"Setup Time"}],y1=[{min:"min_web_width",max:"max_web_width",name:"Web Width"},{min:"min_bag_height",max:"max_bag_height",name:"Bag Height"}];function _1({machineToEdit:t,onSuccess:e}){const{selectedWorkCenter:n,showAlert:i}=Se(),{addMachine:a,updateMachine:o}=sn(),{handleAsync:l}=wi("MachineForm"),u=!!t,d=A.useMemo(()=>({department:t?.department||xt.MACHINE.DEPARTMENT,machine_type:t?.machine_type||"",machine_name:t?.machine_name||"",work_center:t?.work_center||(n===Me.BOTH?xt.MACHINE.WORK_CENTER:n),min_web_width:t?.min_web_width||xt.MACHINE.MIN_WEB_WIDTH,max_web_width:t?.max_web_width||xt.MACHINE.MAX_WEB_WIDTH,min_bag_height:t?.min_bag_height||xt.MACHINE.MIN_BAG_HEIGHT,max_bag_height:t?.max_bag_height||xt.MACHINE.MAX_BAG_HEIGHT,standard_speed:t?.standard_speed||"",setup_time_standard:t?.setup_time_standard||xt.MACHINE.SETUP_TIME_STANDARD,changeover_color:t?.changeover_color||xt.MACHINE.CHANGEOVER_COLOR,changeover_material:t?.changeover_material||xt.MACHINE.CHANGEOVER_MATERIAL,active_shifts:t?.active_shifts||xt.MACHINE.ACTIVE_SHIFTS,status:t?.status||xt.MACHINE.STATUS}),[n,t]),{getValidMachineTypes:f}=ww(),{register:g,handleSubmit:p,formState:{isSubmitting:y},watch:b,setValue:S,getValues:w,reset:x}=wd({defaultValues:d}),E=b("department"),C=b("active_shifts")||[];A.useEffect(()=>{f(E).includes(w("machine_type"))||S("machine_type","")},[E,f,w,S]);const R=D=>{const{value:I,checked:L}=D.target,z=w("active_shifts")||[];L?S("active_shifts",[...z,I].sort()):S("active_shifts",z.filter(P=>P!==I))},M=async D=>{let I=[...g1(D,p1),...ug(D,v1),...m1(D,y1)];if(D.department===mt.PRINTING&&I.push(...ug(D,[{field:"changeover_color",name:"Changeover Color"}])),D.department===mt.PACKAGING&&I.push(...ug(D,[{field:"changeover_material",name:"Material Changeover"}])),I.length>0){i(`Validation errors:
${I.join(`
`)}`,"error");return}await l(async()=>{u?await o(t.id,D):await a(D),e&&e(),x(d)},{context:u?"Update Machine":"Add Machine",fallbackMessage:u?"Aggiornamento macchina fallito":"Aggiunta macchina fallita"})};return _.jsx("div",{className:"content-section",children:_.jsxs("form",{onSubmit:p(M),noValidate:!0,children:[_.jsxs("div",{className:"form-section",children:[_.jsx("h3",{className:"section-title",children:"Identificazione"}),_.jsxs("div",{className:"form-grid form-grid--4-cols",children:[_.jsxs("div",{className:"form-group",children:[_.jsx("label",{htmlFor:"department",children:"Department *"}),_.jsxs("select",{id:"department",...g("department"),children:[_.jsx("option",{value:mt.PRINTING,children:mt.PRINTING}),_.jsx("option",{value:mt.PACKAGING,children:mt.PACKAGING})]})]}),_.jsxs("div",{className:"form-group",children:[_.jsx("label",{htmlFor:"machine_type",children:"Machine Type *"}),_.jsxs("select",{id:"machine_type",...g("machine_type"),children:[_.jsx("option",{value:"",children:"Seleziona tipo macchina"}),f(E).map(D=>_.jsx("option",{value:D,children:D},D))]})]}),_.jsxs("div",{className:"form-group",children:[_.jsx("label",{htmlFor:"machine_name",children:"Machine Name *"}),_.jsx("input",{type:"text",id:"machine_name",...g("machine_name"),placeholder:"Nome descrittivo"})]}),_.jsxs("div",{className:"form-group",children:[_.jsx("label",{htmlFor:"work_center",children:"Work Center *"}),n===Me.BOTH?_.jsxs("select",{...g("work_center"),id:"work_center",children:[_.jsx("option",{value:"",children:"Seleziona un centro di lavoro"}),_.jsx("option",{value:Me.ZANICA,children:Me.ZANICA}),_.jsx("option",{value:Me.BUSTO_GAROLFO,children:Me.BUSTO_GAROLFO})]}):_.jsx("input",{type:"text",id:"work_center",value:n||"N/A",disabled:!0,className:"disabled-input"}),n!==Me.BOTH&&_.jsx("small",{children:"Il centro di lavoro  pre-impostato."})]})]})]}),_.jsxs("div",{className:"form-section",children:[_.jsx("h3",{className:"section-title",children:"Capacit Tecniche"}),_.jsxs("div",{className:"form-grid form-grid--4-cols",children:[_.jsxs("div",{className:"form-group",children:[_.jsx("label",{htmlFor:"min_web_width",children:"Min Web Width (mm) *"}),_.jsx("input",{type:"number",id:"min_web_width",...g("min_web_width")})]}),_.jsxs("div",{className:"form-group",children:[_.jsx("label",{htmlFor:"max_web_width",children:"Max Web Width (mm) *"}),_.jsx("input",{type:"number",id:"max_web_width",...g("max_web_width")})]}),_.jsxs("div",{className:"form-group",children:[_.jsx("label",{htmlFor:"min_bag_height",children:"Min Bag Height (mm) *"}),_.jsx("input",{type:"number",id:"min_bag_height",...g("min_bag_height")})]}),_.jsxs("div",{className:"form-group",children:[_.jsx("label",{htmlFor:"max_bag_height",children:"Max Bag Height (mm) *"}),_.jsx("input",{type:"number",id:"max_bag_height",...g("max_bag_height")})]})]})]}),_.jsxs("div",{className:"form-section",children:[_.jsx("h3",{className:"section-title",children:"Performance"}),_.jsxs("div",{className:"form-grid form-grid--3-cols",children:[_.jsxs("div",{className:"form-group",children:[_.jsx("label",{htmlFor:"standard_speed",children:"Standard Speed *"}),_.jsx("input",{type:"number",id:"standard_speed",...g("standard_speed"),placeholder:"pz/h o mt/h"})]}),_.jsxs("div",{className:"form-group",children:[_.jsx("label",{htmlFor:"setup_time_standard",children:"Setup Time Standard (h) *"}),_.jsx("input",{type:"number",id:"setup_time_standard",...g("setup_time_standard")})]}),E===mt.PRINTING&&_.jsxs("div",{className:"form-group",children:[_.jsx("label",{htmlFor:"changeover_color",children:"Changeover Color (h) *"}),_.jsx("input",{type:"number",id:"changeover_color",...g("changeover_color")})]}),E===mt.PACKAGING&&_.jsxs("div",{className:"form-group",children:[_.jsx("label",{htmlFor:"changeover_material",children:"Material Changeover (h) *"}),_.jsx("input",{type:"number",id:"changeover_material",...g("changeover_material")})]})]})]}),_.jsxs("div",{className:"form-section",children:[_.jsx("h3",{className:"section-title",children:"Disponibilit"}),_.jsxs("div",{className:"form-group",children:[_.jsx("label",{children:"Active Shifts"}),_.jsx("div",{className:"checkbox-group",children:[$u.T1,$u.T2,$u.T3].map(D=>_.jsxs("label",{children:[_.jsx("input",{type:"checkbox",value:D,checked:C.includes(D),onChange:R})," ",D]},D))})]})]}),_.jsx("div",{className:"form-actions",style:{marginTop:"20px"},children:_.jsx("button",{type:"submit",className:"nav-btn today",disabled:y,children:y?u?"Aggiornamento...":"Aggiunta...":u?"Aggiorna Macchina":"Aggiungi Macchina"})})]})})}function Zb(){const{id:t}=pd(),e=na(),{getMachineById:n}=sn(),{selectedWorkCenter:i}=Se(),{isLoading:a,isInitialized:o,init:l,cleanup:u}=zi(),d=!!t,f=d?n(t):null;return A.useEffect(()=>(o||l(),()=>{u()}),[l,o,u]),A.useEffect(()=>{d&&!a&&!f&&e("/machinery",{replace:!0})},[d,a,f,e]),a?_.jsx("div",{children:"Caricamento..."}):d&&!f?_.jsx("div",{className:"error",children:"Macchina non trovata."}):i?_.jsxs("div",{className:"content-section",children:[_.jsx(bs,{title:d?`Modifica Macchina: ${f?.machine_name}`:"Aggiungi Nuova Macchina"}),d&&_.jsx("div",{style:{margin:"8px 24px",display:"flex",justifyContent:"flex-end"},children:_.jsx(xn,{to:`/machinery/${t}/calendar`,className:"nav-btn today",children:"Visualizza Calendario"})}),_.jsx(_1,{machineToEdit:f})]}):_.jsx("div",{className:"error",children:"Seleziona un centro di lavoro per gestire le macchine."})}function b1({currentDate:t,currentView:e,onDateChange:n,onViewChange:i}){const a=()=>{n(new Date)},o=()=>{let d;e==="Month"?(d=new Date(t),d.setMonth(d.getMonth()-1)):e==="Week"?d=Ll(t,-7):e==="Year"&&(d=new Date(t),d.setFullYear(d.getFullYear()-1)),n(d)},l=()=>{let d;e==="Month"?(d=new Date(t),d.setMonth(d.getMonth()+1)):e==="Week"?d=Ll(t,7):e==="Year"&&(d=new Date(t),d.setFullYear(d.getFullYear()+1)),n(d)},u=()=>{if(e==="Month")return mD(t);if(e==="Week"){const d=_m(t),f=fD(t);return pD(d,f)}else if(e==="Year")return t.getUTCFullYear().toString();return""};return _.jsxs("div",{className:"calendar-controls-container",children:[_.jsxs("div",{className:"calendar-navigation",children:[_.jsx("button",{className:"nav-btn today",onClick:o,"aria-label":"Previous",children:" Precedente"}),_.jsx("button",{className:"nav-btn today",onClick:a,children:"Oggi"}),_.jsx("button",{className:"nav-btn today",onClick:l,"aria-label":"Next",children:"Successivo "})]}),_.jsxs("div",{className:"calendar-view-selector",children:[_.jsx("h3",{children:u()}),_.jsxs("select",{value:e,onChange:d=>i(d.target.value),children:[_.jsx("option",{value:"Month",children:"Mese"}),_.jsx("option",{value:"Week",children:"Settimana"}),_.jsx("option",{value:"Year",children:"Anno"})]})]})]})}function S1({machineId:t,currentDate:e,onSuccess:n}){const{setMachineUnavailability:i}=Pi(),{showAlert:a}=Se(),{handleAsync:o}=wi("OffTimeForm"),l=w=>{const x={};if(w.startDate&&w.endDate){const E=new Date(w.startDate);new Date(w.endDate)<E&&(x.endDate={type:"validation",message:Rb.END_DATE_BEFORE_START}),w.startDate===w.endDate&&w.startTime&&w.endTime&&w.startTime>=w.endTime&&(x.endTime={type:"validation",message:Rb.END_TIME_BEFORE_START})}return{values:w,errors:Object.keys(x).length>0?x:{}}},u=async w=>{await o(async()=>{await i(t,w.startDate,w.endDate,w.startTime,w.endTime),a("Indisponibilit macchina impostata con successo!","success"),n&&n(),b()},{context:"Set Machine Unavailability",fallbackMessage:"Impostazione indisponibilit macchina fallita"})},{register:d,handleSubmit:f,formState:{errors:g,isSubmitting:p},setValue:y,reset:b}=wd({defaultValues:{startDate:"",startTime:"",endDate:"",endTime:""},resolver:l});A.useEffect(()=>{const w=new Date,x=Ll(w,1);y("startDate",qt(w)),y("endDate",qt(x)),y("startTime",xt.OFF_TIME.START_TIME),y("endTime",xt.OFF_TIME.END_TIME)},[e,y]);const S=w=>{const x=g[w];return x?_.jsx("span",{className:"error-message",style:{color:"red",fontSize:"12px",marginTop:"4px"},children:x.message}):null};return _.jsxs("div",{className:"off-time-section",children:[_.jsx("h3",{children:"Imposta Periodo di Non Disponibilit"}),_.jsxs("form",{onSubmit:f(u),className:"off-time-form",children:[_.jsxs("div",{className:"form-grid form-grid--4-cols",children:[_.jsxs("div",{className:"form-group",children:[_.jsx("label",{htmlFor:"startDate",children:"Data Inizio"}),_.jsx("input",{type:"date",id:"startDate",...d("startDate"),className:`date-input ${g.startDate?"error":""}`}),S("startDate")]}),_.jsxs("div",{className:"form-group",children:[_.jsx("label",{htmlFor:"startTime",children:"Ora Inizio"}),_.jsx("input",{type:"time",id:"startTime",...d("startTime"),className:`time-input ${g.startTime?"error":""}`}),S("startTime")]}),_.jsxs("div",{className:"form-group",children:[_.jsx("label",{htmlFor:"endDate",children:"Data Fine"}),_.jsx("input",{type:"date",id:"endDate",...d("endDate"),className:`date-input ${g.endDate?"error":""}`}),S("endDate")]}),_.jsxs("div",{className:"form-group",children:[_.jsx("label",{htmlFor:"endTime",children:"Ora Fine"}),_.jsx("input",{type:"time",id:"endTime",...d("endTime"),className:`time-input ${g.endTime?"error":""}`}),S("endTime")]})]}),_.jsx("div",{className:"form-actions",children:_.jsx("button",{type:"submit",className:"nav-btn today",disabled:p,children:p?"Impostazione...":"Imposta Non Disponibilit"})})]})]})}function w1({machineId:t,currentDate:e,currentView:n,refreshTrigger:i}){const[a,o]=A.useState(!1),[l,u]=A.useState({}),{machines:d}=sn(),{odpOrders:f}=Je(),{machineAvailability:g,loadMachineAvailabilityForDateRange:p,toggleMachineHourAvailability:y}=Pi(),{showAlert:b}=Se();wi("CalendarGrid");const S=d.find(L=>L.id===t),w=A.useMemo(()=>{if(!e)return{dates:[],dateStrings:[]};let L=[],z=[];if(n==="Month"){const P=e.getUTCFullYear(),K=e.getUTCMonth(),X=new Date(Date.UTC(P,K,1)),H=new Date(Date.UTC(P,K+1,0)),ee=new Date(X);for(;ee<=H;)L.push(new Date(ee)),z.push(qt(ee)),ee.setUTCDate(ee.getUTCDate()+1)}else if(n==="Week"){const P=_m(e);for(let K=0;K<7;K++){const X=new Date(Date.UTC(P.getUTCFullYear(),P.getUTCMonth(),P.getUTCDate()+K,0,0,0,0));L.push(X),z.push(qt(X))}}else if(n==="Year"){const P=e.getUTCFullYear();for(let K=0;K<12;K++){const X=new Date(Date.UTC(P,K+1,0)).getUTCDate();for(let H=1;H<=X;H++){const ee=new Date(Date.UTC(P,K,H));L.push(ee),z.push(qt(ee))}}}else L.push(e),z.push(qt(e));return{dates:L,dateStrings:z}},[e,n]);A.useEffect(()=>{(async()=>{if(!(!t||!w.dateStrings.length)){o(!0);try{const z=w.dateStrings[0],P=w.dateStrings[w.dateStrings.length-1];await p(t,z,P)}catch(z){console.error("Failed to load machine availability data:",z)}finally{o(!1)}}})()},[t,w.dateStrings,p,i]);const x=A.useMemo(()=>S?f.filter(L=>L.status==="SCHEDULED"&&L.scheduled_machine_id===S.id):[],[S,f]),E=A.useCallback((L,z)=>!S||x.length===0?!1:x.some(P=>hD(P,L,z)),[S,x]),C=A.useCallback(L=>{const z=g[L];if(Array.isArray(z)){const P=z.find(K=>K.machine_id===t);if(P&&P.unavailable_hours)return Array.isArray(P.unavailable_hours)?P.unavailable_hours.map(K=>K.toString()):[]}return[]},[g,t]),R=A.useCallback(async(L,z)=>{if(E(L,z)){b("Cannot mark time slot as unavailable - it has scheduled tasks","error");return}if(!S)return;const P=`${L}-${z}`;u(K=>({...K,[P]:!0}));try{await y(S.id,L,z)}catch(K){console.error("Failed to toggle machine hour availability:",K),b("An unexpected error occurred.","error")}finally{u(K=>({...K,[P]:!1}))}},[E,b,S,y]),M=A.useCallback(()=>{const{dates:L}=w;if(L.length===0)return null;const z=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],K=new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),1)).getUTCDay(),X=[];for(let H=0;H<K;H++)X.push(null);for(L.forEach(H=>{X.push(H)});X.length%7!==0;)X.push(null);return _.jsxs("div",{className:"calendar-month-grid",children:[_.jsx("div",{className:"calendar-week-header",children:z.map(H=>_.jsx("div",{className:"week-day-header",children:H},H))}),_.jsx("div",{className:"calendar-days-grid",children:X.map((H,ee)=>{if(H===null)return _.jsx("div",{className:"calendar-day empty"},`empty-${ee}`);const se=qt(H),te=C(se),U=H.getUTCMonth()===e.getUTCMonth(),Y=H.getUTCFullYear()===new Date().getUTCFullYear()&&H.getUTCMonth()===new Date().getUTCMonth()&&H.getUTCDate()===new Date().getUTCDate(),le=Array.from({length:24},(k,Z)=>Z).some(k=>E(se,k));let ue="calendar-day";return U||(ue+=" other-month"),Y&&(ue+=" today"),te.length>0&&(ue+=te.length===24?" unavailable":" partially-unavailable"),le&&(ue+=" has-scheduled-tasks"),_.jsxs("div",{className:ue,children:[_.jsx("span",{className:"day-number",children:H.getUTCDate()}),te.length>0&&_.jsx("div",{className:"availability-indicator",children:te.length===24?"All Day":`${te.length}h`}),le&&_.jsx("div",{className:"scheduled-tasks-indicator",children:""})]},se)})})]})},[w,C,e,E]),D=A.useCallback(()=>{const{dates:L}=w;if(L.length===0)return null;const z=Array.from({length:24},(P,K)=>K);return _.jsxs("div",{className:"calendar-week-grid",children:[_.jsxs("div",{className:"time-column-header",children:[_.jsx("div",{className:"time-header-cell",children:"Time"}),L.map(P=>_.jsx("div",{className:"day-header-cell",children:si(P)},P.toISOString()))]}),z.map(P=>_.jsxs("div",{className:"time-row",children:[_.jsxs("div",{className:"time-label",children:[P.toString().padStart(2,"0"),":00"]}),L.map(K=>{const X=qt(K),H=C(X),ee=P.toString(),se=H.includes(ee),te=E(X,P),U=`${X}-${P}`,Y=l[U];let le="time-slot";return se&&(le+=" unavailable"),te&&(le+=" has-scheduled-task"),Y&&(le+=" updating"),_.jsx("div",{className:le,onClick:()=>!Y&&R(X,P),children:_.jsx("div",{className:"time-slot-content",children:Y?"...":se?"":te?"":""})},`${X}-${P}`)})]},P))]})},[w,C,E,R,l]),I=A.useCallback(()=>{const L=e.getUTCFullYear(),z=Array.from({length:12},(P,K)=>K);return _.jsx("div",{className:"calendar-year-grid",children:z.map(P=>{const K=new Date(Date.UTC(L,P,1)),X=si(K).substring(5,7),H=new Date(Date.UTC(L,P+1,0)).getUTCDate(),ee=new Date(Date.UTC(L,P,1)).getUTCDay(),se=[];for(let te=0;te<ee;te++)se.push(null);for(let te=1;te<=H;te++)se.push(te);return _.jsxs("div",{className:"month-mini-calendar",children:[_.jsx("h4",{children:X}),_.jsxs("div",{className:"mini-month-grid",children:[["S","M","T","W","T","F","S"].map((te,U)=>_.jsx("div",{className:"mini-day-header",children:te},`${P}-${U}-${te}`)),se.map((te,U)=>{if(te===null)return _.jsx("div",{className:"mini-day empty"},`empty-${P}-${U}`);const Y=qt(new Date(Date.UTC(L,P,te))),le=C(Y),ue=le.length>0;return _.jsx("div",{className:`mini-day ${ue?"unavailable":""}`,title:ue?`${le.length} unavailable hours`:"Available",children:te},Y)})]})]},P)})})},[e,C]);return S?a?_.jsx("div",{className:"loading",children:"Loading calendar data..."}):_.jsxs("div",{className:"calendar-grid-container",children:[n==="Month"&&M(),n==="Week"&&D(),n==="Year"&&I()]}):_.jsx("div",{className:"loading",children:"Loading machine data..."})}function x1(){const{machineId:t}=pd(),[e,n]=A.useState(new Date),[i,a]=A.useState("Month"),[o,l]=A.useState(0),{getMachineById:u}=sn(),{getLoadingState:d,getInitializationState:f}=Se(),{init:g,cleanup:p}=zi(),y=u(t),b=d(),S=f();if(A.useEffect(()=>(S||g(),()=>{p()}),[g,S,p]),b||!S)return _.jsx("div",{className:"content-section",children:_.jsx("div",{className:"loading",children:"Caricamento calendario macchina..."})});if(!y)return _.jsx("div",{className:"content-section",children:_.jsx("div",{className:"error",children:"Macchina non trovata"})});const w=C=>{n(C)},x=C=>{a(C)},E=()=>{l(C=>C+1)};return _.jsxs("div",{className:"content-section",children:[_.jsx(bs,{title:"Calendario Disponibilit Macchina"}),_.jsx("div",{className:"machine-name-display",children:_.jsx("h3",{className:"machine-name-title",children:y.machine_name})}),_.jsx(b1,{currentDate:e,currentView:i,onDateChange:w,onViewChange:x}),_.jsx(S1,{machineId:y.id,currentDate:e,onSuccess:E}),_.jsx(w1,{machineId:y.id,currentDate:e,currentView:i,refreshTrigger:o})]})}function E1(){const{phases:t,updatePhase:e,removePhase:n}=ni(),{selectedWorkCenter:i,isLoading:a,isInitialized:o,showAlert:l,showConfirmDialog:u}=Se(),{init:d,cleanup:f}=zi(),g=A.useMemo(()=>i?i===Me.BOTH?t:t.filter(x=>x.work_center===i):[],[t,i]),{validatePhase:p}=$M(),{handleAsync:y}=wi("PhasesListPage");A.useEffect(()=>(o||d(),()=>{f()}),[d,o,f]);const b=A.useMemo(()=>[{header:"ID Fase",accessorKey:"id"},{header:"Nome Fase",accessorKey:"name",cell:Ye},{header:"Centro di Lavoro",accessorKey:"work_center"},{header:"Reparto",accessorKey:"department"},{header:"Numero Persone",accessorKey:"numero_persone",cell:Ye},{header:"V Stampa",accessorKey:"v_stampa",cell:Ye},{header:"T Setup Stampa (h)",accessorKey:"t_setup_stampa",cell:Ye},{header:"Costo H Stampa",accessorKey:"costo_h_stampa",cell:Ye},{header:"V Conf",accessorKey:"v_conf",cell:Ye},{header:"T Setup Conf (h)",accessorKey:"t_setup_conf",cell:Ye},{header:"Costo H Conf",accessorKey:"costo_h_conf",cell:Ye},{header:"Contenuto Fase",accessorKey:"contenuto_fase",cell:Ye},{header:"Creato il",accessorKey:"created_at",cell:x=>si(x.getValue())},{header:"Aggiornato il",accessorKey:"updated_at",cell:x=>si(x.getValue())}],[]),S=async x=>{const E=p(x);if(E.length>0){l(`Errori di validazione:
${E.join(`
`)}`,"error");return}await y(()=>e(x.id,x),{context:"Aggiorna Fase",fallbackMessage:"Aggiornamento fase fallito"})},w=async x=>{u("Elimina Fase",`Sei sicuro di voler eliminare "${x.name}"? Questa azione non pu essere annullata.`,async()=>{await y(()=>n(x.id),{context:"Elimina Fase",fallbackMessage:"Eliminazione fase fallita"})},"danger")};return a?_.jsx("div",{children:"Caricamento dati fasi..."}):i?_.jsxs("div",{className:"content-section",children:[_.jsx(bs,{title:"Catalogo Fasi"}),_.jsx(xm,{columns:b,data:g,onSaveRow:S,onDeleteRow:w})]}):_.jsx("div",{className:"error",children:"Seleziona un centro di lavoro per visualizzare i dati delle fasi."})}const Jb=(t,e)=>{const n=[];return e.forEach(({field:i,name:a})=>{const o=t[i];o===""||o===null||o===void 0?n.push(`${a} is required`):Number(o)<0&&n.push(`${a} cannot be negative`)}),n},T1=[{field:"v_stampa",name:"V Stampa"},{field:"t_setup_stampa",name:"T Setup Stampa"},{field:"costo_h_stampa",name:"Costo H Stampa"}],C1=[{field:"v_conf",name:"V Conf"},{field:"t_setup_conf",name:"T Setup Conf"},{field:"costo_h_conf",name:"Costo H Conf"}];function R1({phaseToEdit:t,onSuccess:e}){const{selectedWorkCenter:n,showAlert:i}=Se(),{addPhase:a,updatePhase:o}=ni(),{handleAsync:l}=wi("PhasesForm"),u=!!t,d=A.useMemo(()=>({name:t?.name||"",department:t?.department||xt.PHASE.DEPARTMENT,numero_persone:t?.numero_persone||xt.PHASE.NUMERO_PERSONE,work_center:t?.work_center||(n===Me.BOTH?xt.PHASE.WORK_CENTER:n),v_stampa:t?.v_stampa||xt.PHASE.V_STAMPA,t_setup_stampa:t?.t_setup_stampa||xt.PHASE.T_SETUP_STAMPA,costo_h_stampa:t?.costo_h_stampa||xt.PHASE.COSTO_H_STAMPA,v_conf:t?.v_conf||xt.PHASE.V_CONF,t_setup_conf:t?.t_setup_conf||xt.PHASE.T_SETUP_CONF,costo_h_conf:t?.costo_h_conf||xt.PHASE.COSTO_H_CONF,contenuto_fase:t?.contenuto_fase||""}),[n,t]),{register:f,handleSubmit:g,formState:{isSubmitting:p},watch:y,setValue:b,reset:S}=wd({defaultValues:d}),w=y("department");A.useEffect(()=>{w===mt.PRINTING&&(b("v_conf",0),b("t_setup_conf",0),b("costo_h_conf",0))},[w,b]);const x=async E=>{let C=[];if(E.name?.trim()||C.push("Nome Fase is required"),E.department?.trim()||C.push("Department is required"),E.work_center?.trim()||C.push("Work Center is required"),(!E.numero_persone||E.numero_persone<1)&&C.push("Numero Persone must be at least 1"),E.contenuto_fase?.trim()||C.push("Contenuto Fase is required"),E.department===mt.PRINTING&&C.push(...Jb(E,T1)),E.department===mt.PACKAGING&&C.push(...Jb(E,C1)),C.length>0){i(`Validation errors:
${C.join(`
`)}`,"error");return}await l(async()=>{u?await o(t.id,E):await a(E),e&&e(),S(d)},{context:u?"Update Phase":"Add Phase",fallbackMessage:u?"Aggiornamento fase fallito":"Aggiunta fase fallita"})};return _.jsx("div",{className:"content-section",children:_.jsxs("form",{onSubmit:g(x),noValidate:!0,children:[_.jsxs("div",{className:"form-section",children:[_.jsx("h3",{className:"section-title",children:"Informazioni Fase"}),_.jsxs("div",{className:"form-grid form-grid--4-cols",children:[_.jsxs("div",{className:"form-group",children:[_.jsx("label",{htmlFor:"name",children:"Nome Fase *"}),_.jsx("input",{type:"text",id:"name",...f("name"),placeholder:"es. Stampa Alta Velocit"})]}),_.jsxs("div",{className:"form-group",children:[_.jsx("label",{htmlFor:"department",children:"Tipo Fase *"}),_.jsxs("select",{id:"department",...f("department"),children:[_.jsx("option",{value:mt.PRINTING,children:mt.PRINTING}),_.jsx("option",{value:mt.PACKAGING,children:mt.PACKAGING})]})]}),_.jsxs("div",{className:"form-group",children:[_.jsx("label",{htmlFor:"numero_persone",children:"Numero di Persone Richieste *"}),_.jsx("input",{type:"number",id:"numero_persone",...f("numero_persone")})]}),_.jsxs("div",{className:"form-group",children:[_.jsx("label",{htmlFor:"work_center",children:"Centro di Lavoro *"}),n===Me.BOTH?_.jsxs("select",{...f("work_center"),id:"work_center",children:[_.jsx("option",{value:"",children:"Seleziona un centro di lavoro"}),_.jsx("option",{value:Me.ZANICA,children:Me.ZANICA}),_.jsx("option",{value:Me.BUSTO_GAROLFO,children:Me.BUSTO_GAROLFO})]}):_.jsx("input",{type:"text",id:"work_center",value:n||"Nessun centro di lavoro selezionato",disabled:!0,className:"disabled-input",style:{backgroundColor:"#f5f5f5",color:"#666"}}),n!==Me.BOTH&&_.jsx("small",{style:{color:"#666",fontSize:"12px"},children:"Il centro di lavoro  impostato in base alla tua selezione di accesso"})]})]})]}),w===mt.PRINTING&&_.jsxs("div",{className:"form-section",children:[_.jsx("h3",{className:"section-title",children:"Parametri Stampa"}),_.jsxs("div",{className:"form-grid form-grid--3-cols",children:[_.jsxs("div",{className:"form-group",children:[_.jsx("label",{htmlFor:"v_stampa",children:"Velocit Stampa (mt/h) *"}),_.jsx("input",{type:"number",id:"v_stampa",...f("v_stampa")})]}),_.jsxs("div",{className:"form-group",children:[_.jsx("label",{htmlFor:"t_setup_stampa",children:"Tempo Setup (ore) *"}),_.jsx("input",{type:"number",id:"t_setup_stampa",...f("t_setup_stampa")})]}),_.jsxs("div",{className:"form-group",children:[_.jsx("label",{htmlFor:"costo_h_stampa",children:"Costo Orario (/h) *"}),_.jsx("input",{type:"number",id:"costo_h_stampa",...f("costo_h_stampa")})]})]})]}),w===mt.PACKAGING&&_.jsxs("div",{className:"form-section",children:[_.jsx("h3",{className:"section-title",children:"Parametri Confezionamento"}),_.jsxs("div",{className:"form-grid form-grid--3-cols",children:[_.jsxs("div",{className:"form-group",children:[_.jsx("label",{htmlFor:"v_conf",children:"Velocit Confezionamento (pz/h) *"}),_.jsx("input",{type:"number",id:"v_conf",...f("v_conf")})]}),_.jsxs("div",{className:"form-group",children:[_.jsx("label",{htmlFor:"t_setup_conf",children:"Tempo Setup (ore) *"}),_.jsx("input",{type:"number",id:"t_setup_conf",...f("t_setup_conf")})]}),_.jsxs("div",{className:"form-group",children:[_.jsx("label",{htmlFor:"costo_h_conf",children:"Costo Orario (/h) *"}),_.jsx("input",{type:"number",id:"costo_h_conf",...f("costo_h_conf")})]})]})]}),_.jsxs("div",{className:"form-section",children:[_.jsx("h3",{className:"section-title",children:"Descrizione Fase"}),_.jsxs("div",{className:"form-group",children:[_.jsx("label",{htmlFor:"contenuto_fase",children:"Descrizione Contenuto Fase *"}),_.jsx("textarea",{id:"contenuto_fase",...f("contenuto_fase"),rows:"3",placeholder:"Descrivi il contenuto della fase e i requisiti..."})]})]}),_.jsx("div",{className:"form-actions",style:{marginTop:"20px"},children:_.jsx("button",{type:"submit",className:"nav-btn today",disabled:p,children:p?u?"Aggiornamento Fase...":"Aggiunta Fase...":u?"Aggiorna Fase":"Aggiungi Fase"})})]})})}function e0(){const{id:t}=pd(),e=na(),{getPhaseById:n}=ni(),{selectedWorkCenter:i}=Se(),{isLoading:a,isInitialized:o,init:l,cleanup:u}=zi(),d=!!t,f=d?n(t):null;return A.useEffect(()=>(o||l(),()=>{u()}),[l,o,u]),A.useEffect(()=>{d&&!a&&!f&&e("/phases",{replace:!0})},[d,a,f,e]),a?_.jsx("div",{children:"Caricamento..."}):d&&!f?_.jsx("div",{className:"error",children:"Fase non trovata."}):i?_.jsxs("div",{className:"content-section",children:[_.jsx(bs,{title:d?`Modifica Fase: ${f?.name}`:"Aggiungi Nuova Fase"}),_.jsx(R1,{phaseToEdit:f})]}):_.jsx("div",{className:"error",children:"Seleziona un centro di lavoro per gestire le fasi."})}function A1(){const{odpOrders:t,updateOdpOrder:e,removeOdpOrder:n}=Je(),{selectedWorkCenter:i,isLoading:a,isInitialized:o,showAlert:l,showConfirmDialog:u}=Se(),{init:d,cleanup:f}=zi(),{machines:g}=sn(),{phases:p}=ni(),y=A.useMemo(()=>{if(!i)return[];let C=t;return i!==Me.BOTH&&(C=t.filter(R=>R.work_center===i)),C.map(R=>({...R,machine_name:R.scheduled_machine_id?g.find(M=>M.id===R.scheduled_machine_id)?.machine_name||"Macchina non trovata":"Non programmato",phase_name:R.fase?p.find(M=>M.id===R.fase)?.name||"Fase non trovata":"Fase non assegnata",progress:R.progress||0,time_remaining:R.time_remaining||R.duration||0}))},[t,i,g,p]),{validateOrder:b}=HM(),{handleAsync:S}=wi("BacklogListPage");A.useEffect(()=>(o||d(),()=>{f()}),[d,o,f]);const w=A.useMemo(()=>[{header:"Numero ODP",accessorKey:"odp_number",cell:Ye},{header:"Codice Articolo",accessorKey:"article_code",cell:Ye},{header:"Lotto Produzione",accessorKey:"production_lot",cell:Ye},{header:"Centro di Lavoro",accessorKey:"work_center"},{header:"Reparto",accessorKey:"department"},{header:"Nome Cliente",accessorKey:"nome_cliente",cell:Ye},{header:"Descrizione",accessorKey:"description",cell:Ye},{header:"Altezza Busta (mm)",accessorKey:"bag_height",cell:Ye},{header:"Larghezza Busta (mm)",accessorKey:"bag_width",cell:Ye},{header:"Passo Busta (mm)",accessorKey:"bag_step",cell:Ye},{header:"Lati Sigillati",accessorKey:"seal_sides"},{header:"Tipo Prodotto",accessorKey:"product_type"},{header:"Quantit",accessorKey:"quantity",cell:Ye},{header:"Quantit per Scatola",accessorKey:"quantity_per_box",cell:Ye},{header:"Quantit Completata",accessorKey:"quantity_completed",cell:Ye},{header:"Numero Scatole",accessorKey:"n_boxes"},{header:"Data Consegna",accessorKey:"delivery_date",cell:C=>si(C.getValue())||"Non impostata"},{header:"Inizio Programmato",accessorKey:"scheduled_start_time",cell:C=>C.getValue()?new Date(C.getValue()).toISOString().replace("T"," ").replace(".000Z",""):"Non programmato"},{header:"Fine Programmata",accessorKey:"scheduled_end_time",cell:C=>C.getValue()?new Date(C.getValue()).toISOString().replace("T"," ").replace(".000Z",""):"Non programmato"},{header:"Codice Cliente Interno",accessorKey:"internal_customer_code",cell:Ye},{header:"Codice Cliente Esterno",accessorKey:"external_customer_code",cell:Ye},{header:"Riferimento Ordine Cliente",accessorKey:"customer_order_ref",cell:Ye},{header:"ID Fase",accessorKey:"fase"},{header:"Nome Fase",accessorKey:"phase_name"},{header:"Durata (ore)",accessorKey:"duration",cell:C=>{const R=C.getValue();return typeof R=="number"?R.toFixed(1):R}},{header:"Costo ()",accessorKey:"cost",cell:C=>{const R=C.getValue();return typeof R=="number"?R.toFixed(1):R}},{header:"Stato",accessorKey:"status"},{header:"ID Macchina Programmata",accessorKey:"scheduled_machine_id"},{header:"Nome Macchina",accessorKey:"machine_name"},{header:"Progresso (%)",accessorKey:"progress",cell:C=>{const R=C.getValue();return typeof R=="number"?`${R}%`:R}},{header:"Tempo Rimanente (ore)",accessorKey:"time_remaining",cell:C=>{const R=C.getValue();return typeof R=="number"?R.toFixed(1):R}},{header:"Creato il",accessorKey:"created_at",cell:C=>si(C.getValue())},{header:"Aggiornato il",accessorKey:"updated_at",cell:C=>si(C.getValue())}],[]),x=async C=>{const R=b(C);if(R.length>0){l(`Errori di validazione:
${R.join(`
`)}`,"error");return}const{machine_name:M,phase_name:D,progress:I,time_remaining:L,...z}=C;await S(()=>e(C.id,z),{context:"Aggiorna Ordine",fallbackMessage:"Aggiornamento ordine fallito"})},E=async C=>{u("Elimina Ordine",`Sei sicuro di voler eliminare "${C.odp_number}"? Questa azione non pu essere annullata.`,async()=>{await S(()=>n(C.id),{context:"Elimina Ordine",fallbackMessage:"Eliminazione ordine fallita"})},"danger")};return a?_.jsx("div",{children:"Caricamento dati backlog..."}):i?_.jsxs("div",{className:"content-section",children:[_.jsx(bs,{title:"Backlog Produzione"}),_.jsx(xm,{columns:w,data:y,onSaveRow:x,onDeleteRow:E})]}):_.jsx("div",{className:"error",children:"Seleziona un centro di lavoro per visualizzare i dati del backlog."})}const O1=(t,e)=>{const n=[];return e.forEach(({field:i,name:a})=>{t[i]?.trim()||n.push(`${a} is required`)}),n},D1=(t,e)=>{const n=[];return e.forEach(({field:i,name:a})=>{const o=t[i];o===""||o===null||o===void 0?n.push(`${a} is required`):parseFloat(o)<0&&n.push(`${a} cannot be negative`)}),n},M1=(t,e)=>{const n=[];return e.forEach(({fieldA:i,fieldB:a,message:o})=>{t[i]&&t[a]&&parseFloat(t[i])>parseFloat(t[a])&&n.push(o)}),n},k1=(t,e)=>{const n=[];return e.forEach(({field:i,name:a,validValues:o})=>{t[i]&&!o.includes(t[i])&&n.push(`Invalid value for ${a}`)}),n},N1=[{field:"odp_number",name:"ODP Number"},{field:"article_code",name:"Article Code"},{field:"production_lot",name:"External Article Code"},{field:"work_center",name:"Work Center"},{field:"department",name:"Department"},{field:"fase",name:"Phase"},{field:"product_type",name:"Product Type"},{field:"delivery_date",name:"Delivery Date"},{field:"nome_cliente",name:"Customer Name"},{field:"internal_customer_code",name:"FLEXI Lot"},{field:"external_customer_code",name:"Customer Lot"},{field:"customer_order_ref",name:"Customer Ref"}],j1=[{field:"bag_height",name:"Bag Height"},{field:"bag_width",name:"Bag Width"},{field:"bag_step",name:"Bag Step"},{field:"quantity",name:"Quantity"},{field:"quantity_per_box",name:"Quantity per Box"},{field:"quantity_completed",name:"Quantity Completed"}],L1=[{fieldA:"bag_step",fieldB:"bag_width",message:"Bag Step cannot be greater than Bag Width"},{fieldA:"quantity_completed",fieldB:"quantity",message:"Quantity Completed cannot exceed total Quantity"}],I1=[{field:"product_type",name:"Product Type",validValues:Object.values(La)},{field:"seal_sides",name:"Seal Sides",validValues:Object.values(Gr)},{field:"department",name:"Department",validValues:Object.values(mt)},{field:"work_center",name:"Work Center",validValues:[Me.ZANICA,Me.BUSTO_GAROLFO]}],U1=({onSuccess:t,orderToEdit:e})=>{const{addOdpOrder:n,updateOdpOrder:i}=Je(),{showAlert:a,selectedWorkCenter:o,showConflictDialog:l}=Se(),{scheduleTask:u}=Pi(),{calculateProductionMetrics:d,validatePhaseParameters:f,autoDetermineWorkCenter:g,autoDetermineDepartment:p}=ww(),{handleAsync:y}=wi("BacklogForm"),[b,S]=A.useState(null),w=!!e,x=A.useMemo(()=>({odp_number:e?.odp_number||"",article_code:e?.article_code||"",production_lot:e?.production_lot||"",work_center:e?.work_center||(o===Me.BOTH?"":o),nome_cliente:e?.nome_cliente||"",delivery_date:e?.delivery_date||"",bag_height:e?.bag_height||"",bag_width:e?.bag_width||"",bag_step:e?.bag_step||"",seal_sides:e?.seal_sides||xt.ORDER.SEAL_SIDES,product_type:e?.product_type||"",quantity:e?.quantity||"",quantity_per_box:e?.quantity_per_box||"",quantity_completed:e?.quantity_completed||xt.ORDER.QUANTITY_COMPLETED,internal_customer_code:e?.internal_customer_code||"",external_customer_code:e?.external_customer_code||"",customer_order_ref:e?.customer_order_ref||"",department:e?.department||"",fase:e?.fase||""}),[o,e]),{register:E,handleSubmit:C,formState:{isSubmitting:R},watch:M,setValue:D,getValues:I,reset:L,clearErrors:z}=wd({defaultValues:x}),P=M("article_code"),K=M("department"),X=M("work_center"),{phaseSearch:H,setPhaseSearch:ee,isDropdownVisible:se,setIsDropdownVisible:te,selectedPhase:U,setSelectedPhase:Y,filteredPhases:le,editablePhaseParams:ue,setEditablePhaseParams:k,handlePhaseParamChange:Z,handlePhaseSelect:re,handleBlur:oe}=VM(K,X),ge=A.useCallback(()=>{L(x),ee(""),Y(null),k({}),S(null)},[x,L,ee,Y,k]);A.useEffect(()=>{if(P){const ke=p(P);D("department",ke),o===Me.BOTH&&D("work_center",g(P)),D("fase",""),ee(""),Y(null),k({}),S(null)}},[P,p,g,D,o,ee,Y,k]);const xe=async ke=>{const et=[...O1(ke,N1),...D1(ke,j1),...M1(ke,L1),...k1(ke,I1)];if(et.length>0){a(`Validation errors:
${et.join(`
`)}`,"error");return}if(!b?.totals||typeof b.totals.duration!="number"||typeof b.totals.cost!="number"){a("Calcola le metriche di produzione valide prima di procedere.","warning");return}await y(async()=>{const Lt={...ke,duration:b.totals.duration,cost:b.totals.cost,status:w?e.status:"NOT SCHEDULED"},he=w?await i(e.id,Lt):await n(Lt);if(w&&he?.scheduled_machine_id&&he?.scheduled_start_time){const _e=new Date(he.scheduled_start_time),Ee=he.time_remaining||he.duration,Ge=new Date(_e.getTime()+Ee*36e5),Ne=await u(he.id,{machine:he.scheduled_machine_id,start_time:_e.toISOString(),end_time:Ge.toISOString()});Ne?.conflict?l(Ne):Ne?.error&&a(Ne.error,"error")}t&&t(),ge()},{context:w?"Update Order":"Add Order",fallbackMessage:w?"Aggiornamento ordine fallito":"Aggiunta ordine fallita"})},fe=()=>{if(!U||!I("quantity")||!I("bag_step")){a("Seleziona una fase e inserisci Quantit e Passo Busta per calcolare.","warning");return}const ke={...U,...ue},et=f(ke);if(!et.isValid){a(et.error,"error"),S(null);return}const Lt=d(ke,I("quantity"),I("bag_step"));if(!Lt||typeof Lt.totals?.duration!="number"||typeof Lt.totals?.cost!="number"){a("Errore nel calcolo. Verifica i parametri della fase.","error"),S(null);return}S(Lt)},vt=ke=>ue[ke]??U[ke]??"",$e=()=>U?U.department===mt.PRINTING?[{name:"v_stampa",label:"Print Speed:",unit:"mt/h"},{name:"t_setup_stampa",label:"Print Setup:",unit:"h"},{name:"costo_h_stampa",label:"Print Cost:",unit:"/h"}]:[{name:"v_conf",label:"Packaging Speed:",unit:"pz/h"},{name:"t_setup_conf",label:"Packaging Setup:",unit:"h"},{name:"costo_h_conf",label:"Packaging Cost:",unit:"/h"}]:[];return _.jsx("div",{className:"content-section",children:_.jsxs("form",{onSubmit:C(xe),noValidate:!0,children:[_.jsxs("div",{className:"form-section",children:[_.jsx("h3",{className:"section-title",children:"Identificazione"}),_.jsxs("div",{className:"form-grid form-grid--3-cols",children:[_.jsxs("div",{className:"form-group",children:[_.jsx("label",{htmlFor:"odp_number",children:"ODP Number *"}),_.jsx("input",{type:"text",id:"odp_number",...E("odp_number")})]}),_.jsxs("div",{className:"form-group",children:[_.jsx("label",{htmlFor:"article_code",children:"Article Code *"}),_.jsx("input",{type:"text",id:"article_code",...E("article_code")})]}),_.jsxs("div",{className:"form-group",children:[_.jsx("label",{htmlFor:"production_lot",children:"External Article Code *"}),_.jsx("input",{type:"text",id:"production_lot",...E("production_lot")})]}),_.jsxs("div",{className:"form-group",children:[_.jsx("label",{htmlFor:"work_center",children:"Work Center *"})," ",o===Me.BOTH?_.jsxs("select",{...E("work_center"),id:"work_center",children:[_.jsx("option",{value:"",children:"Seleziona"}),_.jsx("option",{value:Me.ZANICA,children:"ZANICA"}),_.jsx("option",{value:Me.BUSTO_GAROLFO,children:"BUSTO GAROLFO"})]}):_.jsxs(_.Fragment,{children:[_.jsx("input",{type:"text",id:"work_center",value:o,disabled:!0,className:"disabled-input"}),_.jsx("small",{children:"Centro di lavoro pre-impostato."})]})]}),_.jsxs("div",{className:"form-group",children:[_.jsx("label",{htmlFor:"nome_cliente",children:"Customer Name *"}),_.jsx("input",{type:"text",id:"nome_cliente",...E("nome_cliente")})]})]})]}),_.jsxs("div",{className:"form-section",children:[_.jsx("h3",{className:"section-title",children:"Specifiche Tecniche"}),_.jsxs("div",{className:"form-grid form-grid--4-cols",children:[_.jsxs("div",{className:"form-group",children:[_.jsx("label",{htmlFor:"bag_height",children:"Bag Height (mm) *"}),_.jsx("input",{type:"number",id:"bag_height",...E("bag_height")})]}),_.jsxs("div",{className:"form-group",children:[_.jsx("label",{htmlFor:"bag_width",children:"Bag Width (mm) *"}),_.jsx("input",{type:"number",id:"bag_width",...E("bag_width")})]}),_.jsxs("div",{className:"form-group",children:[_.jsx("label",{htmlFor:"bag_step",children:"Bag Step (mm) *"}),_.jsx("input",{type:"number",id:"bag_step",...E("bag_step")})]}),_.jsxs("div",{className:"form-group",children:[_.jsx("label",{htmlFor:"seal_sides",children:"Seal Sides *"}),_.jsxs("select",{id:"seal_sides",...E("seal_sides"),children:[_.jsx("option",{value:Gr.THREE,children:"3 sides"}),_.jsx("option",{value:Gr.FOUR,children:"4 sides"})]})]}),_.jsxs("div",{className:"form-group",children:[_.jsx("label",{htmlFor:"product_type",children:"Product Type *"}),_.jsxs("select",{id:"product_type",...E("product_type"),children:[_.jsx("option",{value:"",children:"Seleziona"}),_.jsx("option",{value:La.CREMA,children:"CREMA"}),_.jsx("option",{value:La.LIQUIDO,children:"LIQUIDO"}),_.jsx("option",{value:La.POLVERI,children:"POLVERI"})]})]}),_.jsxs("div",{className:"form-group",children:[_.jsx("label",{htmlFor:"quantity",children:"Quantity *"}),_.jsx("input",{type:"number",id:"quantity",...E("quantity")})]}),_.jsxs("div",{className:"form-group",children:[_.jsx("label",{htmlFor:"quantity_per_box",children:"Qty per Box *"}),_.jsx("input",{type:"number",id:"quantity_per_box",...E("quantity_per_box")})]}),_.jsxs("div",{className:"form-group",children:[_.jsx("label",{htmlFor:"quantity_completed",children:"Qty Completed *"}),_.jsx("input",{type:"number",id:"quantity_completed",...E("quantity_completed")})]})]})]}),_.jsxs("div",{className:"form-section",children:[_.jsx("h3",{className:"section-title",children:"Dati Commerciali"}),_.jsxs("div",{className:"form-grid form-grid--3-cols",children:[_.jsxs("div",{className:"form-group",children:[_.jsx("label",{htmlFor:"internal_customer_code",children:"FLEXI Lot *"}),_.jsx("input",{type:"text",id:"internal_customer_code",...E("internal_customer_code")})]}),_.jsxs("div",{className:"form-group",children:[_.jsx("label",{htmlFor:"external_customer_code",children:"Customer Lot *"}),_.jsx("input",{type:"text",id:"external_customer_code",...E("external_customer_code")})]}),_.jsxs("div",{className:"form-group",children:[_.jsx("label",{htmlFor:"customer_order_ref",children:"Customer Ref *"}),_.jsx("input",{type:"text",id:"customer_order_ref",...E("customer_order_ref")})]})]})]}),_.jsxs("div",{className:"form-section",children:[_.jsx("h3",{className:"section-title",children:"Dati Lavorazione & Pianificazione"}),_.jsxs("div",{className:"form-grid form-grid--3-cols",children:[_.jsxs("div",{className:"form-group",children:[_.jsx("label",{htmlFor:"department",children:"Department *"}),_.jsx("input",{type:"text",id:"department",...E("department"),readOnly:!0,className:"disabled-input"})]}),_.jsxs("div",{className:"form-group",children:[_.jsx("label",{htmlFor:"phase_search",children:"Search Production Phase *"}),_.jsxs("div",{className:"searchable-dropdown",children:[_.jsx("input",{type:"text",id:"phase_search",value:H,onChange:ke=>ee(ke.target.value),onFocus:()=>te(!0),onBlur:oe}),_.jsx("input",{type:"hidden",...E("fase")}),se&&le.length>0&&_.jsx("div",{className:"dropdown-options",children:le.map(ke=>_.jsxs("div",{className:"dropdown-option",onMouseDown:()=>{re(ke,D,z),S(null)},children:[_.jsx("span",{className:"phase-name",children:ke.name}),_.jsx("span",{className:"phase-description",children:ke.contenuto_fase})]},ke.id))})]})]}),_.jsxs("div",{className:"form-group",children:[_.jsx("label",{htmlFor:"delivery_date",children:"Delivery Date *"}),_.jsx("input",{type:"datetime-local",id:"delivery_date",...E("delivery_date")})]})]})]}),U&&_.jsxs("div",{className:"form-section",children:[_.jsx("h3",{className:"section-title",children:"Parametri Fase Selezionata"}),_.jsx("div",{className:"form-grid form-grid--3-cols",children:$e().map(ke=>_.jsxs("div",{className:"form-group",children:[_.jsx("label",{htmlFor:ke.name,children:ke.label}),_.jsx("input",{type:"number",id:ke.name,value:vt(ke.name),onChange:et=>Z(ke.name,et.target.value)}),_.jsx("span",{className:"unit-label",children:ke.unit})]},ke.name))})]}),b?.totals&&_.jsxs("div",{className:"form-section",children:[_.jsx("h3",{className:"section-title",children:"Risultati Calcolo Produzione"}),_.jsxs("div",{className:"form-grid form-grid--2-cols",children:[_.jsxs("div",{className:"form-group",children:[_.jsx("label",{children:"Durata Totale (ore):"}),_.jsx("div",{className:"result-value",children:b.totals.duration.toFixed(2)})]}),_.jsxs("div",{className:"form-group",children:[_.jsx("label",{children:"Costo Totale ():"}),_.jsx("div",{className:"result-value",children:b.totals.cost.toFixed(2)})]})]})]}),_.jsxs("div",{className:"form-actions",style:{marginTop:"20px"},children:[_.jsx("button",{type:"button",className:"nav-btn",onClick:fe,disabled:!U,children:"Calcola"}),_.jsx("button",{type:"submit",className:"nav-btn today",disabled:!b||R,children:R?w?"Aggiornamento...":"Aggiunta...":w?"Aggiorna Ordine":"Aggiungi al Backlog"})]})]})})};function t0(){const{id:t}=pd(),e=na(),{getOdpOrderById:n}=Je(),{selectedWorkCenter:i}=Se(),{isLoading:a,isInitialized:o,init:l,cleanup:u}=zi(),d=!!t,f=d?n(t):null;return A.useEffect(()=>(o||l(),()=>{u()}),[l,o,u]),A.useEffect(()=>{d&&!a&&!f&&e("/backlog",{replace:!0})},[d,a,f,e]),a?_.jsx("div",{children:"Caricamento..."}):d&&!f?_.jsx("div",{className:"error",children:"Ordine non trovato."}):i?_.jsxs("div",{className:"content-section",children:[_.jsx(bs,{title:d?`Modifica Ordine: ${f?.odp_number}`:"Aggiungi Nuovo Ordine"}),_.jsx(U1,{onSuccess:void 0,orderToEdit:f})]}):_.jsx("div",{className:"error",children:"Seleziona un centro di lavoro per gestire gli ordini del backlog."})}const xd=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function eo(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function Mm(t){return"nodeType"in t}function Tn(t){var e,n;return t?eo(t)?t:Mm(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function km(t){const{Document:e}=Tn(t);return t instanceof e}function Zl(t){return eo(t)?!1:t instanceof Tn(t).HTMLElement}function Pw(t){return t instanceof Tn(t).SVGElement}function to(t){return t?eo(t)?t.document:Mm(t)?km(t)?t:Zl(t)||Pw(t)?t.ownerDocument:document:document:document}const ys=xd?A.useLayoutEffect:A.useEffect;function Ed(t){const e=A.useRef(t);return ys(()=>{e.current=t}),A.useCallback(function(){for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return e.current==null?void 0:e.current(...i)},[])}function P1(){const t=A.useRef(null),e=A.useCallback((i,a)=>{t.current=setInterval(i,a)},[]),n=A.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,n]}function Il(t,e){e===void 0&&(e=[t]);const n=A.useRef(t);return ys(()=>{n.current!==t&&(n.current=t)},e),n}function Jl(t,e){const n=A.useRef();return A.useMemo(()=>{const i=t(n.current);return n.current=i,i},[...e])}function td(t){const e=Ed(t),n=A.useRef(null),i=A.useCallback(a=>{a!==n.current&&e?.(a,n.current),n.current=a},[]);return[n,i]}function nd(t){const e=A.useRef();return A.useEffect(()=>{e.current=t},[t]),e.current}let dg={};function Td(t,e){return A.useMemo(()=>{if(e)return e;const n=dg[t]==null?0:dg[t]+1;return dg[t]=n,t+"-"+n},[t,e])}function Fw(t){return function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];return i.reduce((o,l)=>{const u=Object.entries(l);for(const[d,f]of u){const g=o[d];g!=null&&(o[d]=g+t*f)}return o},{...e})}}const Hr=Fw(1),id=Fw(-1);function F1(t){return"clientX"in t&&"clientY"in t}function Nm(t){if(!t)return!1;const{KeyboardEvent:e}=Tn(t.target);return e&&t instanceof e}function z1(t){if(!t)return!1;const{TouchEvent:e}=Tn(t.target);return e&&t instanceof e}function sd(t){if(z1(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return F1(t)?{x:t.clientX,y:t.clientY}:null}const Ul=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[Ul.Translate.toString(t),Ul.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:i}=t;return e+" "+n+"ms "+i}}}),n0="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function B1(t){return t.matches(n0)?t:t.querySelector(n0)}const H1={display:"none"};function $1(t){let{id:e,value:n}=t;return Ie.createElement("div",{id:e,style:H1},n)}function V1(t){let{id:e,announcement:n,ariaLiveType:i="assertive"}=t;const a={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Ie.createElement("div",{id:e,style:a,role:"status","aria-live":i,"aria-atomic":!0},n)}function G1(){const[t,e]=A.useState("");return{announce:A.useCallback(i=>{i!=null&&e(i)},[]),announcement:t}}const zw=A.createContext(null);function q1(t){const e=A.useContext(zw);A.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function Y1(){const[t]=A.useState(()=>new Set),e=A.useCallback(i=>(t.add(i),()=>t.delete(i)),[t]);return[A.useCallback(i=>{let{type:a,event:o}=i;t.forEach(l=>{var u;return(u=l[a])==null?void 0:u.call(l,o)})},[t]),e]}const W1={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},K1={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function X1(t){let{announcements:e=K1,container:n,hiddenTextDescribedById:i,screenReaderInstructions:a=W1}=t;const{announce:o,announcement:l}=G1(),u=Td("DndLiveRegion"),[d,f]=A.useState(!1);if(A.useEffect(()=>{f(!0)},[]),q1(A.useMemo(()=>({onDragStart(p){let{active:y}=p;o(e.onDragStart({active:y}))},onDragMove(p){let{active:y,over:b}=p;e.onDragMove&&o(e.onDragMove({active:y,over:b}))},onDragOver(p){let{active:y,over:b}=p;o(e.onDragOver({active:y,over:b}))},onDragEnd(p){let{active:y,over:b}=p;o(e.onDragEnd({active:y,over:b}))},onDragCancel(p){let{active:y,over:b}=p;o(e.onDragCancel({active:y,over:b}))}}),[o,e])),!d)return null;const g=Ie.createElement(Ie.Fragment,null,Ie.createElement($1,{id:i,value:a.draggable}),Ie.createElement(V1,{id:u,announcement:l}));return n?fl.createPortal(g,n):g}var Yt;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(Yt||(Yt={}));function ad(){}const bi=Object.freeze({x:0,y:0});function Q1(t,e){const n=sd(t);if(!n)return"0 0";const i={x:(n.x-e.left)/e.width*100,y:(n.y-e.top)/e.height*100};return i.x+"% "+i.y+"%"}function Z1(t,e){let{data:{value:n}}=t,{data:{value:i}}=e;return i-n}function J1(t,e){if(!t||t.length===0)return null;const[n]=t;return n[e]}function ek(t,e){const n=Math.max(e.top,t.top),i=Math.max(e.left,t.left),a=Math.min(e.left+e.width,t.left+t.width),o=Math.min(e.top+e.height,t.top+t.height),l=a-i,u=o-n;if(i<a&&n<o){const d=e.width*e.height,f=t.width*t.height,g=l*u,p=g/(d+f-g);return Number(p.toFixed(4))}return 0}const tk=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:i}=t;const a=[];for(const o of i){const{id:l}=o,u=n.get(l);if(u){const d=ek(u,e);d>0&&a.push({id:l,data:{droppableContainer:o,value:d}})}}return a.sort(Z1)};function nk(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function Bw(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:bi}function ik(t){return function(n){for(var i=arguments.length,a=new Array(i>1?i-1:0),o=1;o<i;o++)a[o-1]=arguments[o];return a.reduce((l,u)=>({...l,top:l.top+t*u.y,bottom:l.bottom+t*u.y,left:l.left+t*u.x,right:l.right+t*u.x}),{...n})}}const sk=ik(1);function Hw(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function ak(t,e,n){const i=Hw(e);if(!i)return t;const{scaleX:a,scaleY:o,x:l,y:u}=i,d=t.left-l-(1-a)*parseFloat(n),f=t.top-u-(1-o)*parseFloat(n.slice(n.indexOf(" ")+1)),g=a?t.width/a:t.width,p=o?t.height/o:t.height;return{width:g,height:p,top:f,right:d+g,bottom:f+p,left:d}}const rk={ignoreTransform:!1};function ec(t,e){e===void 0&&(e=rk);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:f,transformOrigin:g}=Tn(t).getComputedStyle(t);f&&(n=ak(n,f,g))}const{top:i,left:a,width:o,height:l,bottom:u,right:d}=n;return{top:i,left:a,width:o,height:l,bottom:u,right:d}}function i0(t){return ec(t,{ignoreTransform:!0})}function ok(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function lk(t,e){return e===void 0&&(e=Tn(t).getComputedStyle(t)),e.position==="fixed"}function ck(t,e){e===void 0&&(e=Tn(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(a=>{const o=e[a];return typeof o=="string"?n.test(o):!1})}function jm(t,e){const n=[];function i(a){if(e!=null&&n.length>=e||!a)return n;if(km(a)&&a.scrollingElement!=null&&!n.includes(a.scrollingElement))return n.push(a.scrollingElement),n;if(!Zl(a)||Pw(a)||n.includes(a))return n;const o=Tn(t).getComputedStyle(a);return a!==t&&ck(a,o)&&n.push(a),lk(a,o)?n:i(a.parentNode)}return t?i(t):n}function $w(t){const[e]=jm(t,1);return e??null}function hg(t){return!xd||!t?null:eo(t)?t:Mm(t)?km(t)||t===to(t).scrollingElement?window:Zl(t)?t:null:null}function Vw(t){return eo(t)?t.scrollX:t.scrollLeft}function Gw(t){return eo(t)?t.scrollY:t.scrollTop}function qg(t){return{x:Vw(t),y:Gw(t)}}var nn;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(nn||(nn={}));function qw(t){return!xd||!t?!1:t===document.scrollingElement}function Yw(t){const e={x:0,y:0},n=qw(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},i={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},a=t.scrollTop<=e.y,o=t.scrollLeft<=e.x,l=t.scrollTop>=i.y,u=t.scrollLeft>=i.x;return{isTop:a,isLeft:o,isBottom:l,isRight:u,maxScroll:i,minScroll:e}}const uk={x:.2,y:.2};function dk(t,e,n,i,a){let{top:o,left:l,right:u,bottom:d}=n;i===void 0&&(i=10),a===void 0&&(a=uk);const{isTop:f,isBottom:g,isLeft:p,isRight:y}=Yw(t),b={x:0,y:0},S={x:0,y:0},w={height:e.height*a.y,width:e.width*a.x};return!f&&o<=e.top+w.height?(b.y=nn.Backward,S.y=i*Math.abs((e.top+w.height-o)/w.height)):!g&&d>=e.bottom-w.height&&(b.y=nn.Forward,S.y=i*Math.abs((e.bottom-w.height-d)/w.height)),!y&&u>=e.right-w.width?(b.x=nn.Forward,S.x=i*Math.abs((e.right-w.width-u)/w.width)):!p&&l<=e.left+w.width&&(b.x=nn.Backward,S.x=i*Math.abs((e.left+w.width-l)/w.width)),{direction:b,speed:S}}function hk(t){if(t===document.scrollingElement){const{innerWidth:o,innerHeight:l}=window;return{top:0,left:0,right:o,bottom:l,width:o,height:l}}const{top:e,left:n,right:i,bottom:a}=t.getBoundingClientRect();return{top:e,left:n,right:i,bottom:a,width:t.clientWidth,height:t.clientHeight}}function Ww(t){return t.reduce((e,n)=>Hr(e,qg(n)),bi)}function fk(t){return t.reduce((e,n)=>e+Vw(n),0)}function gk(t){return t.reduce((e,n)=>e+Gw(n),0)}function Kw(t,e){if(e===void 0&&(e=ec),!t)return;const{top:n,left:i,bottom:a,right:o}=e(t);$w(t)&&(a<=0||o<=0||n>=window.innerHeight||i>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const mk=[["x",["left","right"],fk],["y",["top","bottom"],gk]];class Lm{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const i=jm(n),a=Ww(i);this.rect={...e},this.width=e.width,this.height=e.height;for(const[o,l,u]of mk)for(const d of l)Object.defineProperty(this,d,{get:()=>{const f=u(i),g=a[o]-f;return this.rect[d]+g},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Tl{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var i;return(i=this.target)==null?void 0:i.removeEventListener(...n)})},this.target=e}add(e,n,i){var a;(a=this.target)==null||a.addEventListener(e,n,i),this.listeners.push([e,n,i])}}function pk(t){const{EventTarget:e}=Tn(t);return t instanceof e?t:to(t)}function fg(t,e){const n=Math.abs(t.x),i=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+i**2)>e:"x"in e&&"y"in e?n>e.x&&i>e.y:"x"in e?n>e.x:"y"in e?i>e.y:!1}var ti;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(ti||(ti={}));function s0(t){t.preventDefault()}function vk(t){t.stopPropagation()}var dt;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(dt||(dt={}));const Xw={start:[dt.Space,dt.Enter],cancel:[dt.Esc],end:[dt.Space,dt.Enter,dt.Tab]},yk=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case dt.Right:return{...n,x:n.x+25};case dt.Left:return{...n,x:n.x-25};case dt.Down:return{...n,y:n.y+25};case dt.Up:return{...n,y:n.y-25}}};class Qw{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new Tl(to(n)),this.windowListeners=new Tl(Tn(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(ti.Resize,this.handleCancel),this.windowListeners.add(ti.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(ti.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,i=e.node.current;i&&Kw(i),n(bi)}handleKeyDown(e){if(Nm(e)){const{active:n,context:i,options:a}=this.props,{keyboardCodes:o=Xw,coordinateGetter:l=yk,scrollBehavior:u="smooth"}=a,{code:d}=e;if(o.end.includes(d)){this.handleEnd(e);return}if(o.cancel.includes(d)){this.handleCancel(e);return}const{collisionRect:f}=i.current,g=f?{x:f.left,y:f.top}:bi;this.referenceCoordinates||(this.referenceCoordinates=g);const p=l(e,{active:n,context:i.current,currentCoordinates:g});if(p){const y=id(p,g),b={x:0,y:0},{scrollableAncestors:S}=i.current;for(const w of S){const x=e.code,{isTop:E,isRight:C,isLeft:R,isBottom:M,maxScroll:D,minScroll:I}=Yw(w),L=hk(w),z={x:Math.min(x===dt.Right?L.right-L.width/2:L.right,Math.max(x===dt.Right?L.left:L.left+L.width/2,p.x)),y:Math.min(x===dt.Down?L.bottom-L.height/2:L.bottom,Math.max(x===dt.Down?L.top:L.top+L.height/2,p.y))},P=x===dt.Right&&!C||x===dt.Left&&!R,K=x===dt.Down&&!M||x===dt.Up&&!E;if(P&&z.x!==p.x){const X=w.scrollLeft+y.x,H=x===dt.Right&&X<=D.x||x===dt.Left&&X>=I.x;if(H&&!y.y){w.scrollTo({left:X,behavior:u});return}H?b.x=w.scrollLeft-X:b.x=x===dt.Right?w.scrollLeft-D.x:w.scrollLeft-I.x,b.x&&w.scrollBy({left:-b.x,behavior:u});break}else if(K&&z.y!==p.y){const X=w.scrollTop+y.y,H=x===dt.Down&&X<=D.y||x===dt.Up&&X>=I.y;if(H&&!y.x){w.scrollTo({top:X,behavior:u});return}H?b.y=w.scrollTop-X:b.y=x===dt.Down?w.scrollTop-D.y:w.scrollTop-I.y,b.y&&w.scrollBy({top:-b.y,behavior:u});break}}this.handleMove(e,Hr(id(p,this.referenceCoordinates),b))}}}handleMove(e,n){const{onMove:i}=this.props;e.preventDefault(),i(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Qw.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:i=Xw,onActivation:a}=e,{active:o}=n;const{code:l}=t.nativeEvent;if(i.start.includes(l)){const u=o.activatorNode.current;return u&&t.target!==u?!1:(t.preventDefault(),a?.({event:t.nativeEvent}),!0)}return!1}}];function a0(t){return!!(t&&"distance"in t)}function r0(t){return!!(t&&"delay"in t)}class Im{constructor(e,n,i){var a;i===void 0&&(i=pk(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:o}=e,{target:l}=o;this.props=e,this.events=n,this.document=to(l),this.documentListeners=new Tl(this.document),this.listeners=new Tl(i),this.windowListeners=new Tl(Tn(l)),this.initialCoordinates=(a=sd(o))!=null?a:bi,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:i}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(ti.Resize,this.handleCancel),this.windowListeners.add(ti.DragStart,s0),this.windowListeners.add(ti.VisibilityChange,this.handleCancel),this.windowListeners.add(ti.ContextMenu,s0),this.documentListeners.add(ti.Keydown,this.handleKeydown),n){if(i!=null&&i({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(r0(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(a0(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,n){const{active:i,onPending:a}=this.props;a(i,e,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(ti.Click,vk,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(ti.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:i,initialCoordinates:a,props:o}=this,{onMove:l,options:{activationConstraint:u}}=o;if(!a)return;const d=(n=sd(e))!=null?n:bi,f=id(a,d);if(!i&&u){if(a0(u)){if(u.tolerance!=null&&fg(f,u.tolerance))return this.handleCancel();if(fg(f,u.distance))return this.handleStart()}if(r0(u)&&fg(f,u.tolerance))return this.handleCancel();this.handlePending(u,f);return}e.cancelable&&e.preventDefault(),l(d)}handleEnd(){const{onAbort:e,onEnd:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleCancel(){const{onAbort:e,onCancel:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleKeydown(e){e.code===dt.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const _k={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Zw extends Im{constructor(e){const{event:n}=e,i=to(n.target);super(e,_k,i)}}Zw.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:i}=e;return!n.isPrimary||n.button!==0?!1:(i?.({event:n}),!0)}}];const bk={move:{name:"mousemove"},end:{name:"mouseup"}};var Yg;(function(t){t[t.RightClick=2]="RightClick"})(Yg||(Yg={}));class Sk extends Im{constructor(e){super(e,bk,to(e.event.target))}}Sk.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:i}=e;return n.button===Yg.RightClick?!1:(i?.({event:n}),!0)}}];const gg={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class wk extends Im{constructor(e){super(e,gg)}static setup(){return window.addEventListener(gg.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(gg.move.name,e)};function e(){}}}wk.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:i}=e;const{touches:a}=n;return a.length>1?!1:(i?.({event:n}),!0)}}];var Cl;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(Cl||(Cl={}));var rd;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(rd||(rd={}));function xk(t){let{acceleration:e,activator:n=Cl.Pointer,canScroll:i,draggingRect:a,enabled:o,interval:l=5,order:u=rd.TreeOrder,pointerCoordinates:d,scrollableAncestors:f,scrollableAncestorRects:g,delta:p,threshold:y}=t;const b=Tk({delta:p,disabled:!o}),[S,w]=P1(),x=A.useRef({x:0,y:0}),E=A.useRef({x:0,y:0}),C=A.useMemo(()=>{switch(n){case Cl.Pointer:return d?{top:d.y,bottom:d.y,left:d.x,right:d.x}:null;case Cl.DraggableRect:return a}},[n,a,d]),R=A.useRef(null),M=A.useCallback(()=>{const I=R.current;if(!I)return;const L=x.current.x*E.current.x,z=x.current.y*E.current.y;I.scrollBy(L,z)},[]),D=A.useMemo(()=>u===rd.TreeOrder?[...f].reverse():f,[u,f]);A.useEffect(()=>{if(!o||!f.length||!C){w();return}for(const I of D){if(i?.(I)===!1)continue;const L=f.indexOf(I),z=g[L];if(!z)continue;const{direction:P,speed:K}=dk(I,z,C,e,y);for(const X of["x","y"])b[X][P[X]]||(K[X]=0,P[X]=0);if(K.x>0||K.y>0){w(),R.current=I,S(M,l),x.current=K,E.current=P;return}}x.current={x:0,y:0},E.current={x:0,y:0},w()},[e,M,i,w,o,l,JSON.stringify(C),JSON.stringify(b),S,f,D,g,JSON.stringify(y)])}const Ek={x:{[nn.Backward]:!1,[nn.Forward]:!1},y:{[nn.Backward]:!1,[nn.Forward]:!1}};function Tk(t){let{delta:e,disabled:n}=t;const i=nd(e);return Jl(a=>{if(n||!i||!a)return Ek;const o={x:Math.sign(e.x-i.x),y:Math.sign(e.y-i.y)};return{x:{[nn.Backward]:a.x[nn.Backward]||o.x===-1,[nn.Forward]:a.x[nn.Forward]||o.x===1},y:{[nn.Backward]:a.y[nn.Backward]||o.y===-1,[nn.Forward]:a.y[nn.Forward]||o.y===1}}},[n,e,i])}function Ck(t,e){const n=e!=null?t.get(e):void 0,i=n?n.node.current:null;return Jl(a=>{var o;return e==null?null:(o=i??a)!=null?o:null},[i,e])}function Rk(t,e){return A.useMemo(()=>t.reduce((n,i)=>{const{sensor:a}=i,o=a.activators.map(l=>({eventName:l.eventName,handler:e(l.handler,i)}));return[...n,...o]},[]),[t,e])}var Pl;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(Pl||(Pl={}));var Wg;(function(t){t.Optimized="optimized"})(Wg||(Wg={}));const o0=new Map;function Ak(t,e){let{dragging:n,dependencies:i,config:a}=e;const[o,l]=A.useState(null),{frequency:u,measure:d,strategy:f}=a,g=A.useRef(t),p=x(),y=Il(p),b=A.useCallback(function(E){E===void 0&&(E=[]),!y.current&&l(C=>C===null?E:C.concat(E.filter(R=>!C.includes(R))))},[y]),S=A.useRef(null),w=Jl(E=>{if(p&&!n)return o0;if(!E||E===o0||g.current!==t||o!=null){const C=new Map;for(let R of t){if(!R)continue;if(o&&o.length>0&&!o.includes(R.id)&&R.rect.current){C.set(R.id,R.rect.current);continue}const M=R.node.current,D=M?new Lm(d(M),M):null;R.rect.current=D,D&&C.set(R.id,D)}return C}return E},[t,o,n,p,d]);return A.useEffect(()=>{g.current=t},[t]),A.useEffect(()=>{p||b()},[n,p]),A.useEffect(()=>{o&&o.length>0&&l(null)},[JSON.stringify(o)]),A.useEffect(()=>{p||typeof u!="number"||S.current!==null||(S.current=setTimeout(()=>{b(),S.current=null},u))},[u,p,b,...i]),{droppableRects:w,measureDroppableContainers:b,measuringScheduled:o!=null};function x(){switch(f){case Pl.Always:return!1;case Pl.BeforeDragging:return n;default:return!n}}}function Um(t,e){return Jl(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function Ok(t,e){return Um(t,e)}function Dk(t){let{callback:e,disabled:n}=t;const i=Ed(e),a=A.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:o}=window;return new o(i)},[i,n]);return A.useEffect(()=>()=>a?.disconnect(),[a]),a}function Cd(t){let{callback:e,disabled:n}=t;const i=Ed(e),a=A.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:o}=window;return new o(i)},[n]);return A.useEffect(()=>()=>a?.disconnect(),[a]),a}function Mk(t){return new Lm(ec(t),t)}function l0(t,e,n){e===void 0&&(e=Mk);const[i,a]=A.useState(null);function o(){a(d=>{if(!t)return null;if(t.isConnected===!1){var f;return(f=d??n)!=null?f:null}const g=e(t);return JSON.stringify(d)===JSON.stringify(g)?d:g})}const l=Dk({callback(d){if(t)for(const f of d){const{type:g,target:p}=f;if(g==="childList"&&p instanceof HTMLElement&&p.contains(t)){o();break}}}}),u=Cd({callback:o});return ys(()=>{o(),t?(u?.observe(t),l?.observe(document.body,{childList:!0,subtree:!0})):(u?.disconnect(),l?.disconnect())},[t]),i}function kk(t){const e=Um(t);return Bw(t,e)}const c0=[];function Nk(t){const e=A.useRef(t),n=Jl(i=>t?i&&i!==c0&&t&&e.current&&t.parentNode===e.current.parentNode?i:jm(t):c0,[t]);return A.useEffect(()=>{e.current=t},[t]),n}function jk(t){const[e,n]=A.useState(null),i=A.useRef(t),a=A.useCallback(o=>{const l=hg(o.target);l&&n(u=>u?(u.set(l,qg(l)),new Map(u)):null)},[]);return A.useEffect(()=>{const o=i.current;if(t!==o){l(o);const u=t.map(d=>{const f=hg(d);return f?(f.addEventListener("scroll",a,{passive:!0}),[f,qg(f)]):null}).filter(d=>d!=null);n(u.length?new Map(u):null),i.current=t}return()=>{l(t),l(o)};function l(u){u.forEach(d=>{const f=hg(d);f?.removeEventListener("scroll",a)})}},[a,t]),A.useMemo(()=>t.length?e?Array.from(e.values()).reduce((o,l)=>Hr(o,l),bi):Ww(t):bi,[t,e])}function u0(t,e){e===void 0&&(e=[]);const n=A.useRef(null);return A.useEffect(()=>{n.current=null},e),A.useEffect(()=>{const i=t!==bi;i&&!n.current&&(n.current=t),!i&&n.current&&(n.current=null)},[t]),n.current?id(t,n.current):bi}function Lk(t){A.useEffect(()=>{if(!xd)return;const e=t.map(n=>{let{sensor:i}=n;return i.setup==null?void 0:i.setup()});return()=>{for(const n of e)n?.()}},t.map(e=>{let{sensor:n}=e;return n}))}function Ik(t,e){return A.useMemo(()=>t.reduce((n,i)=>{let{eventName:a,handler:o}=i;return n[a]=l=>{o(l,e)},n},{}),[t,e])}function Jw(t){return A.useMemo(()=>t?ok(t):null,[t])}const d0=[];function Uk(t,e){e===void 0&&(e=ec);const[n]=t,i=Jw(n?Tn(n):null),[a,o]=A.useState(d0);function l(){o(()=>t.length?t.map(d=>qw(d)?i:new Lm(e(d),d)):d0)}const u=Cd({callback:l});return ys(()=>{u?.disconnect(),l(),t.forEach(d=>u?.observe(d))},[t]),a}function ex(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return Zl(e)?e:t}function Pk(t){let{measure:e}=t;const[n,i]=A.useState(null),a=A.useCallback(f=>{for(const{target:g}of f)if(Zl(g)){i(p=>{const y=e(g);return p?{...p,width:y.width,height:y.height}:y});break}},[e]),o=Cd({callback:a}),l=A.useCallback(f=>{const g=ex(f);o?.disconnect(),g&&o?.observe(g),i(g?e(g):null)},[e,o]),[u,d]=td(l);return A.useMemo(()=>({nodeRef:u,rect:n,setRef:d}),[n,u,d])}const Fk=[{sensor:Zw,options:{}},{sensor:Qw,options:{}}],zk={current:{}},Gu={draggable:{measure:i0},droppable:{measure:i0,strategy:Pl.WhileDragging,frequency:Wg.Optimized},dragOverlay:{measure:ec}};class Rl extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,i;return(n=(i=this.get(e))==null?void 0:i.node.current)!=null?n:void 0}}const Bk={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Rl,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:ad},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Gu,measureDroppableContainers:ad,windowRect:null,measuringScheduled:!1},tx={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:ad,draggableNodes:new Map,over:null,measureDroppableContainers:ad},tc=A.createContext(tx),nx=A.createContext(Bk);function Hk(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Rl}}}function $k(t,e){switch(e.type){case Yt.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case Yt.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case Yt.DragEnd:case Yt.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Yt.RegisterDroppable:{const{element:n}=e,{id:i}=n,a=new Rl(t.droppable.containers);return a.set(i,n),{...t,droppable:{...t.droppable,containers:a}}}case Yt.SetDroppableDisabled:{const{id:n,key:i,disabled:a}=e,o=t.droppable.containers.get(n);if(!o||i!==o.key)return t;const l=new Rl(t.droppable.containers);return l.set(n,{...o,disabled:a}),{...t,droppable:{...t.droppable,containers:l}}}case Yt.UnregisterDroppable:{const{id:n,key:i}=e,a=t.droppable.containers.get(n);if(!a||i!==a.key)return t;const o=new Rl(t.droppable.containers);return o.delete(n),{...t,droppable:{...t.droppable,containers:o}}}default:return t}}function Vk(t){let{disabled:e}=t;const{active:n,activatorEvent:i,draggableNodes:a}=A.useContext(tc),o=nd(i),l=nd(n?.id);return A.useEffect(()=>{if(!e&&!i&&o&&l!=null){if(!Nm(o)||document.activeElement===o.target)return;const u=a.get(l);if(!u)return;const{activatorNode:d,node:f}=u;if(!d.current&&!f.current)return;requestAnimationFrame(()=>{for(const g of[d.current,f.current]){if(!g)continue;const p=B1(g);if(p){p.focus();break}}})}},[i,e,a,l,o]),null}function ix(t,e){let{transform:n,...i}=e;return t!=null&&t.length?t.reduce((a,o)=>o({transform:a,...i}),n):n}function Gk(t){return A.useMemo(()=>({draggable:{...Gu.draggable,...t?.draggable},droppable:{...Gu.droppable,...t?.droppable},dragOverlay:{...Gu.dragOverlay,...t?.dragOverlay}}),[t?.draggable,t?.droppable,t?.dragOverlay])}function qk(t){let{activeNode:e,measure:n,initialRect:i,config:a=!0}=t;const o=A.useRef(!1),{x:l,y:u}=typeof a=="boolean"?{x:a,y:a}:a;ys(()=>{if(!l&&!u||!e){o.current=!1;return}if(o.current||!i)return;const f=e?.node.current;if(!f||f.isConnected===!1)return;const g=n(f),p=Bw(g,i);if(l||(p.x=0),u||(p.y=0),o.current=!0,Math.abs(p.x)>0||Math.abs(p.y)>0){const y=$w(f);y&&y.scrollBy({top:p.y,left:p.x})}},[e,l,u,i,n])}const Rd=A.createContext({...bi,scaleX:1,scaleY:1});var Ys;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(Ys||(Ys={}));const Yk=A.memo(function(e){var n,i,a,o;let{id:l,accessibility:u,autoScroll:d=!0,children:f,sensors:g=Fk,collisionDetection:p=tk,measuring:y,modifiers:b,...S}=e;const w=A.useReducer($k,void 0,Hk),[x,E]=w,[C,R]=Y1(),[M,D]=A.useState(Ys.Uninitialized),I=M===Ys.Initialized,{draggable:{active:L,nodes:z,translate:P},droppable:{containers:K}}=x,X=L!=null?z.get(L):null,H=A.useRef({initial:null,translated:null}),ee=A.useMemo(()=>{var Ct;return L!=null?{id:L,data:(Ct=X?.data)!=null?Ct:zk,rect:H}:null},[L,X]),se=A.useRef(null),[te,U]=A.useState(null),[Y,le]=A.useState(null),ue=Il(S,Object.values(S)),k=Td("DndDescribedBy",l),Z=A.useMemo(()=>K.getEnabled(),[K]),re=Gk(y),{droppableRects:oe,measureDroppableContainers:ge,measuringScheduled:xe}=Ak(Z,{dragging:I,dependencies:[P.x,P.y],config:re.droppable}),fe=Ck(z,L),vt=A.useMemo(()=>Y?sd(Y):null,[Y]),$e=io(),ke=Ok(fe,re.draggable.measure);qk({activeNode:L!=null?z.get(L):null,config:$e.layoutShiftCompensation,initialRect:ke,measure:re.draggable.measure});const et=l0(fe,re.draggable.measure,ke),Lt=l0(fe?fe.parentElement:null),he=A.useRef({activatorEvent:null,active:null,activeNode:fe,collisionRect:null,collisions:null,droppableRects:oe,draggableNodes:z,draggingNode:null,draggingNodeRect:null,droppableContainers:K,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),_e=K.getNodeFor((n=he.current.over)==null?void 0:n.id),Ee=Pk({measure:re.dragOverlay.measure}),Ge=(i=Ee.nodeRef.current)!=null?i:fe,Ne=I?(a=Ee.rect)!=null?a:et:null,Ze=!!(Ee.nodeRef.current&&Ee.rect),un=kk(Ze?null:et),Dt=Jw(Ge?Tn(Ge):null),j=Nk(I?_e??fe:null),$=Uk(j),Q=ix(b,{transform:{x:P.x-un.x,y:P.y-un.y,scaleX:1,scaleY:1},activatorEvent:Y,active:ee,activeNodeRect:et,containerNodeRect:Lt,draggingNodeRect:Ne,over:he.current.over,overlayNodeRect:Ee.rect,scrollableAncestors:j,scrollableAncestorRects:$,windowRect:Dt}),de=vt?Hr(vt,P):null,ce=jk(j),ae=u0(ce),ve=u0(ce,[et]),Te=Hr(Q,ae),je=Ne?sk(Ne,Q):null,We=ee&&je?p({active:ee,collisionRect:je,droppableRects:oe,droppableContainers:Z,pointerCoordinates:de}):null,Bi=J1(We,"id"),[zt,Ba]=A.useState(null),xi=Ze?Q:Hr(Q,ve),Ei=nk(xi,(o=zt?.rect)!=null?o:null,et),jn=A.useRef(null),Ti=A.useCallback((Ct,_n)=>{let{sensor:dn,options:li}=_n;if(se.current==null)return;const hn=z.get(se.current);if(!hn)return;const rn=Ct.nativeEvent,Ln=new dn({active:se.current,activeNode:hn,event:rn,options:li,context:he,onAbort(ht){if(!z.get(ht))return;const{onDragAbort:_t}=ue.current,fn={id:ht};_t?.(fn),C({type:"onDragAbort",event:fn})},onPending(ht,yt,_t,fn){if(!z.get(ht))return;const{onDragPending:ra}=ue.current,Ci={id:ht,constraint:yt,initialCoordinates:_t,offset:fn};ra?.(Ci),C({type:"onDragPending",event:Ci})},onStart(ht){const yt=se.current;if(yt==null)return;const _t=z.get(yt);if(!_t)return;const{onDragStart:fn}=ue.current,$i={activatorEvent:rn,active:{id:yt,data:_t.data,rect:H}};fl.unstable_batchedUpdates(()=>{fn?.($i),D(Ys.Initializing),E({type:Yt.DragStart,initialCoordinates:ht,active:yt}),C({type:"onDragStart",event:$i}),U(jn.current),le(rn)})},onMove(ht){E({type:Yt.DragMove,coordinates:ht})},onEnd:Ss(Yt.DragEnd),onCancel:Ss(Yt.DragCancel)});jn.current=Ln;function Ss(ht){return async function(){const{active:_t,collisions:fn,over:$i,scrollAdjustedTranslate:ra}=he.current;let Ci=null;if(_t&&ra){const{cancelDrop:ws}=ue.current;Ci={activatorEvent:rn,active:_t,collisions:fn,delta:ra,over:$i},ht===Yt.DragEnd&&typeof ws=="function"&&await Promise.resolve(ws(Ci))&&(ht=Yt.DragCancel)}se.current=null,fl.unstable_batchedUpdates(()=>{E({type:ht}),D(Ys.Uninitialized),Ba(null),U(null),le(null),jn.current=null;const ws=ht===Yt.DragEnd?"onDragEnd":"onDragCancel";if(Ci){const Vi=ue.current[ws];Vi?.(Ci),C({type:ws,event:Ci})}})}}},[z]),Hi=A.useCallback((Ct,_n)=>(dn,li)=>{const hn=dn.nativeEvent,rn=z.get(li);if(se.current!==null||!rn||hn.dndKit||hn.defaultPrevented)return;const Ln={active:rn};Ct(dn,_n.options,Ln)===!0&&(hn.dndKit={capturedBy:_n.sensor},se.current=li,Ti(dn,_n))},[z,Ti]),aa=Rk(g,Hi);Lk(g),ys(()=>{et&&M===Ys.Initializing&&D(Ys.Initialized)},[et,M]),A.useEffect(()=>{const{onDragMove:Ct}=ue.current,{active:_n,activatorEvent:dn,collisions:li,over:hn}=he.current;if(!_n||!dn)return;const rn={active:_n,activatorEvent:dn,collisions:li,delta:{x:Te.x,y:Te.y},over:hn};fl.unstable_batchedUpdates(()=>{Ct?.(rn),C({type:"onDragMove",event:rn})})},[Te.x,Te.y]),A.useEffect(()=>{const{active:Ct,activatorEvent:_n,collisions:dn,droppableContainers:li,scrollAdjustedTranslate:hn}=he.current;if(!Ct||se.current==null||!_n||!hn)return;const{onDragOver:rn}=ue.current,Ln=li.get(Bi),Ss=Ln&&Ln.rect.current?{id:Ln.id,rect:Ln.rect.current,data:Ln.data,disabled:Ln.disabled}:null,ht={active:Ct,activatorEvent:_n,collisions:dn,delta:{x:hn.x,y:hn.y},over:Ss};fl.unstable_batchedUpdates(()=>{Ba(Ss),rn?.(ht),C({type:"onDragOver",event:ht})})},[Bi]),ys(()=>{he.current={activatorEvent:Y,active:ee,activeNode:fe,collisionRect:je,collisions:We,droppableRects:oe,draggableNodes:z,draggingNode:Ge,draggingNodeRect:Ne,droppableContainers:K,over:zt,scrollableAncestors:j,scrollAdjustedTranslate:Te},H.current={initial:Ne,translated:je}},[ee,fe,We,je,z,Ge,Ne,oe,K,zt,j,Te]),xk({...$e,delta:P,draggingRect:je,pointerCoordinates:de,scrollableAncestors:j,scrollableAncestorRects:$});const ic=A.useMemo(()=>({active:ee,activeNode:fe,activeNodeRect:et,activatorEvent:Y,collisions:We,containerNodeRect:Lt,dragOverlay:Ee,draggableNodes:z,droppableContainers:K,droppableRects:oe,over:zt,measureDroppableContainers:ge,scrollableAncestors:j,scrollableAncestorRects:$,measuringConfiguration:re,measuringScheduled:xe,windowRect:Dt}),[ee,fe,et,Y,We,Lt,Ee,z,K,oe,zt,ge,j,$,re,xe,Dt]),sc=A.useMemo(()=>({activatorEvent:Y,activators:aa,active:ee,activeNodeRect:et,ariaDescribedById:{draggable:k},dispatch:E,draggableNodes:z,over:zt,measureDroppableContainers:ge}),[Y,aa,ee,et,E,k,z,zt,ge]);return Ie.createElement(zw.Provider,{value:R},Ie.createElement(tc.Provider,{value:sc},Ie.createElement(nx.Provider,{value:ic},Ie.createElement(Rd.Provider,{value:Ei},f)),Ie.createElement(Vk,{disabled:u?.restoreFocus===!1})),Ie.createElement(X1,{...u,hiddenTextDescribedById:k}));function io(){const Ct=te?.autoScrollEnabled===!1,_n=typeof d=="object"?d.enabled===!1:d===!1,dn=I&&!Ct&&!_n;return typeof d=="object"?{...d,enabled:dn}:{enabled:dn}}}),Wk=A.createContext(null),h0="button",Kk="Draggable";function JI(t){let{id:e,data:n,disabled:i=!1,attributes:a}=t;const o=Td(Kk),{activators:l,activatorEvent:u,active:d,activeNodeRect:f,ariaDescribedById:g,draggableNodes:p,over:y}=A.useContext(tc),{role:b=h0,roleDescription:S="draggable",tabIndex:w=0}=a??{},x=d?.id===e,E=A.useContext(x?Rd:Wk),[C,R]=td(),[M,D]=td(),I=Ik(l,e),L=Il(n);ys(()=>(p.set(e,{id:e,key:o,node:C,activatorNode:M,data:L}),()=>{const P=p.get(e);P&&P.key===o&&p.delete(e)}),[p,e]);const z=A.useMemo(()=>({role:b,tabIndex:w,"aria-disabled":i,"aria-pressed":x&&b===h0?!0:void 0,"aria-roledescription":S,"aria-describedby":g.draggable}),[i,b,w,x,S,g.draggable]);return{active:d,activatorEvent:u,activeNodeRect:f,attributes:z,isDragging:x,listeners:i?void 0:I,node:C,over:y,setNodeRef:R,setActivatorNodeRef:D,transform:E}}function Xk(){return A.useContext(nx)}const Qk="Droppable",Zk={timeout:25};function eU(t){let{data:e,disabled:n=!1,id:i,resizeObserverConfig:a}=t;const o=Td(Qk),{active:l,dispatch:u,over:d,measureDroppableContainers:f}=A.useContext(tc),g=A.useRef({disabled:n}),p=A.useRef(!1),y=A.useRef(null),b=A.useRef(null),{disabled:S,updateMeasurementsFor:w,timeout:x}={...Zk,...a},E=Il(w??i),C=A.useCallback(()=>{if(!p.current){p.current=!0;return}b.current!=null&&clearTimeout(b.current),b.current=setTimeout(()=>{f(Array.isArray(E.current)?E.current:[E.current]),b.current=null},x)},[x]),R=Cd({callback:C,disabled:S||!l}),M=A.useCallback((z,P)=>{R&&(P&&(R.unobserve(P),p.current=!1),z&&R.observe(z))},[R]),[D,I]=td(M),L=Il(e);return A.useEffect(()=>{!R||!D.current||(R.disconnect(),p.current=!1,R.observe(D.current))},[D,R]),A.useEffect(()=>(u({type:Yt.RegisterDroppable,element:{id:i,key:o,disabled:n,node:D,rect:y,data:L}}),()=>u({type:Yt.UnregisterDroppable,key:o,id:i})),[i]),A.useEffect(()=>{n!==g.current.disabled&&(u({type:Yt.SetDroppableDisabled,id:i,key:o,disabled:n}),g.current.disabled=n)},[i,o,n,u]),{active:l,rect:y,isOver:d?.id===i,node:D,over:d,setNodeRef:I}}function Jk(t){let{animation:e,children:n}=t;const[i,a]=A.useState(null),[o,l]=A.useState(null),u=nd(n);return!n&&!i&&u&&a(u),ys(()=>{if(!o)return;const d=i?.key,f=i?.props.id;if(d==null||f==null){a(null);return}Promise.resolve(e(f,o)).then(()=>{a(null)})},[e,i,o]),Ie.createElement(Ie.Fragment,null,n,i?A.cloneElement(i,{ref:l}):null)}const eN={x:0,y:0,scaleX:1,scaleY:1};function tN(t){let{children:e}=t;return Ie.createElement(tc.Provider,{value:tx},Ie.createElement(Rd.Provider,{value:eN},e))}const nN={position:"fixed",touchAction:"none"},iN=t=>Nm(t)?"transform 250ms ease":void 0,sN=A.forwardRef((t,e)=>{let{as:n,activatorEvent:i,adjustScale:a,children:o,className:l,rect:u,style:d,transform:f,transition:g=iN}=t;if(!u)return null;const p=a?f:{...f,scaleX:1,scaleY:1},y={...nN,width:u.width,height:u.height,top:u.top,left:u.left,transform:Ul.Transform.toString(p),transformOrigin:a&&i?Q1(i,u):void 0,transition:typeof g=="function"?g(i):g,...d};return Ie.createElement(n,{className:l,style:y,ref:e},o)}),aN=t=>e=>{let{active:n,dragOverlay:i}=e;const a={},{styles:o,className:l}=t;if(o!=null&&o.active)for(const[u,d]of Object.entries(o.active))d!==void 0&&(a[u]=n.node.style.getPropertyValue(u),n.node.style.setProperty(u,d));if(o!=null&&o.dragOverlay)for(const[u,d]of Object.entries(o.dragOverlay))d!==void 0&&i.node.style.setProperty(u,d);return l!=null&&l.active&&n.node.classList.add(l.active),l!=null&&l.dragOverlay&&i.node.classList.add(l.dragOverlay),function(){for(const[d,f]of Object.entries(a))n.node.style.setProperty(d,f);l!=null&&l.active&&n.node.classList.remove(l.active)}},rN=t=>{let{transform:{initial:e,final:n}}=t;return[{transform:Ul.Transform.toString(e)},{transform:Ul.Transform.toString(n)}]},oN={duration:250,easing:"ease",keyframes:rN,sideEffects:aN({styles:{active:{opacity:"0"}}})};function lN(t){let{config:e,draggableNodes:n,droppableContainers:i,measuringConfiguration:a}=t;return Ed((o,l)=>{if(e===null)return;const u=n.get(o);if(!u)return;const d=u.node.current;if(!d)return;const f=ex(l);if(!f)return;const{transform:g}=Tn(l).getComputedStyle(l),p=Hw(g);if(!p)return;const y=typeof e=="function"?e:cN(e);return Kw(d,a.draggable.measure),y({active:{id:o,data:u.data,node:d,rect:a.draggable.measure(d)},draggableNodes:n,dragOverlay:{node:l,rect:a.dragOverlay.measure(f)},droppableContainers:i,measuringConfiguration:a,transform:p})})}function cN(t){const{duration:e,easing:n,sideEffects:i,keyframes:a}={...oN,...t};return o=>{let{active:l,dragOverlay:u,transform:d,...f}=o;if(!e)return;const g={x:u.rect.left-l.rect.left,y:u.rect.top-l.rect.top},p={scaleX:d.scaleX!==1?l.rect.width*d.scaleX/u.rect.width:1,scaleY:d.scaleY!==1?l.rect.height*d.scaleY/u.rect.height:1},y={x:d.x-g.x,y:d.y-g.y,...p},b=a({...f,active:l,dragOverlay:u,transform:{initial:d,final:y}}),[S]=b,w=b[b.length-1];if(JSON.stringify(S)===JSON.stringify(w))return;const x=i?.({active:l,dragOverlay:u,...f}),E=u.node.animate(b,{duration:e,easing:n,fill:"forwards"});return new Promise(C=>{E.onfinish=()=>{x?.(),C()}})}}let f0=0;function uN(t){return A.useMemo(()=>{if(t!=null)return f0++,f0},[t])}const dN=Ie.memo(t=>{let{adjustScale:e=!1,children:n,dropAnimation:i,style:a,transition:o,modifiers:l,wrapperElement:u="div",className:d,zIndex:f=999}=t;const{activatorEvent:g,active:p,activeNodeRect:y,containerNodeRect:b,draggableNodes:S,droppableContainers:w,dragOverlay:x,over:E,measuringConfiguration:C,scrollableAncestors:R,scrollableAncestorRects:M,windowRect:D}=Xk(),I=A.useContext(Rd),L=uN(p?.id),z=ix(l,{activatorEvent:g,active:p,activeNodeRect:y,containerNodeRect:b,draggingNodeRect:x.rect,over:E,overlayNodeRect:x.rect,scrollableAncestors:R,scrollableAncestorRects:M,transform:I,windowRect:D}),P=Um(y),K=lN({config:i,draggableNodes:S,droppableContainers:w,measuringConfiguration:C}),X=P?x.setRef:void 0;return Ie.createElement(tN,null,Ie.createElement(Jk,{animation:K},p&&L?Ie.createElement(sN,{key:L,id:p.id,ref:X,as:u,activatorEvent:g,adjustScale:e,className:d,transition:o,rect:P,style:{zIndex:f,...a},transform:z},n):null))});function Cu({label:t,options:e,selectedOptions:n,onSelectionChange:i,searchPlaceholder:a,id:o,width:l="200px"}){const[u,d]=A.useState(!1),[f,g]=A.useState(""),p=A.useRef(null);A.useEffect(()=>{const C=R=>{p.current&&!p.current.contains(R.target)&&d(!1)};return document.addEventListener("mousedown",C),()=>document.removeEventListener("mousedown",C)},[]);const y=e.filter(C=>C.toLowerCase().includes(f.toLowerCase())),b=y.length>0&&y.every(C=>n.includes(C)),S=C=>{if(C.preventDefault(),C.stopPropagation(),b){const R=n.filter(M=>!y.includes(M));i(R)}else{const R=[...new Set([...n,...y])];i(R)}},w=(C,R)=>{if(C.preventDefault(),C.stopPropagation(),n.includes(R)){const M=n.filter(D=>D!==R);i(M)}else{const M=[...n.filter(D=>D!==""),R];i(M)}},x=()=>{d(!0)},E=C=>{g(C.target.value)};return _.jsxs("div",{className:"searchable-dropdown",ref:p,style:{width:l},children:[_.jsxs("label",{htmlFor:o,children:[t,":"]}),_.jsx("input",{type:"text",id:o,value:f,onChange:E,onFocus:x,placeholder:a}),u&&e.length>0&&_.jsxs("div",{className:"dropdown-options",children:[_.jsxs("div",{className:`dropdown-option ${b?"selected":""}`,onMouseDown:S,children:[_.jsxs("span",{className:"phase-name",children:["Tutti i ",t]}),_.jsxs("span",{className:"phase-description",children:["Mostra tutti i ",t.toLowerCase()]})]}),y.map(C=>_.jsxs("div",{className:`dropdown-option ${n.includes(C)?"selected":""}`,onMouseDown:R=>w(R,C),children:[_.jsx("span",{className:"phase-name",children:C}),_.jsx("span",{className:"phase-description",children:t})]},C))]})]})}const mg=({placeholder:t,value:e,onChange:n,onLookup:i,suggestions:a,field:o,fieldLabel:l,onDropdownSelect:u})=>{const d=p=>{p.key==="Enter"&&i()},g=e?a.filter(p=>{const y=p[o];return y&&y.toLowerCase().includes(e.toLowerCase())}).sort((p,y)=>{const b=p[o]&&p[o].toLowerCase()===e.toLowerCase(),S=y[o]&&y[o].toLowerCase()===e.toLowerCase();return b&&!S?-1:!b&&S?1:(p[o]||"").localeCompare(y[o]||"")}).slice(0,5):[];return _.jsxs("div",{className:"task-lookup-item",children:[_.jsxs("div",{className:"task-lookup-input-container",children:[_.jsx("input",{type:"text",placeholder:t,value:e,onChange:n,onKeyPress:d,className:"task-lookup-input"}),e&&_.jsx("div",{className:"task-lookup-dropdown",children:g.length>0?g.map(p=>_.jsxs("div",{className:"task-lookup-option",onClick:()=>u(p,o,l,p[o]),children:[_.jsx("span",{className:"task-lookup-odp",children:p[o]}),_.jsx("span",{className:"task-lookup-product",children:p.product_name||"Prodotto non specificato"}),_.jsxs("span",{className:"task-lookup-workcenter",children:["(",p.work_center,")"]})]},p.id)):_.jsx("div",{className:"task-lookup-option no-results",children:_.jsx("span",{children:"Nessun risultato trovato"})})})]}),_.jsxs("button",{onClick:i,className:"nav-btn today",children:["Cerca ",l]})]})},hN=A.lazy(()=>Pa(()=>import("./TaskPool-CfC80RRd.js"),[])),fN=A.lazy(()=>Pa(()=>import("./GanttChart-CTWIXdbW.js"),[])),g0=()=>_.jsx("div",{className:"loading",children:"Caricamento componenti scheduler..."}),gN=(t,e)=>{const n=document.querySelector(t);if(!n){alert("Grafico Gantt non trovato. Assicurati che il grafico sia visibile sullo schermo.");return}const i=Array.from(document.styleSheets);let a="";i.forEach(y=>{try{Array.from(y.cssRules||y.rules||[]).forEach(S=>{a+=S.cssText+`
`})}catch{}});const o=n.cloneNode(!0),l=`
    <!DOCTYPE html>
    <html>
      <head>
        <title>Grafico Gantt - ${e}</title>
        <style>
          ${a}
          body { 
            margin: 0; 
            padding: 20px; 
            font-family: Arial, sans-serif;
          }
          .calendar-section {
            width: 100%;
            overflow-x: auto;
          }
        </style>
      </head>
      <body>
        <div style="text-align: center; margin-bottom: 20px; font-size: 16px; font-weight: bold;">
          Grafico Gantt - ${e}
        </div>
        <div class="calendar-section">
          ${o.outerHTML}
        </div>
      </body>
    </html>
  `,u=new Blob([l],{type:"text/html"}),d=window.URL.createObjectURL(u),f=document.createElement("a");f.href=d;const g=new Date().toISOString().split("T")[0],p=new Date().toTimeString().split(" ")[0].replace(/:/g,"-");f.download=`grafico-gantt-${g}-${p}.html`,document.body.appendChild(f),f.click(),document.body.removeChild(f),window.URL.revokeObjectURL(d)};function mN(){const{machines:t}=sn(),{odpOrders:e,getOdpOrdersByWorkCenter:n,getScheduledOrders:i}=Je(),{selectedWorkCenter:a,isLoading:o,isInitialized:l,showAlert:u,isEditMode:d,toggleEditMode:f,showConflictDialog:g}=Se(),{scheduleTask:p,unscheduleTask:y,scheduleTaskFromSlot:b,rescheduleTaskToSlot:S,validateSlotAvailability:w}=Pi(),{init:x,cleanup:E}=zi(),[C,R]=A.useState(()=>{const he=new Date;return new Date(Date.UTC(he.getUTCFullYear(),he.getUTCMonth(),he.getUTCDate()))}),[M,D]=A.useState(null),[I,L]=A.useState(null),[z,P]=A.useState(""),[K,X]=A.useState(""),[H,ee]=A.useState(""),se={workCenter:[],department:[],machineType:[],machineName:[]};function te(he,_e){switch(_e.type){case"SET_FILTER":return{...he,[_e.payload.filterName]:_e.payload.value};case"CLEAR_FILTERS":return se;default:return he}}const[U,Y]=A.useReducer(te,se);A.useEffect(()=>(l||x(),()=>{E()}),[x,l,E]);const le=A.useMemo(()=>a?n(a):[],[a,n]),ue=A.useMemo(()=>le.filter(_e=>_e.status==="SCHEDULED"),[le,a]),k=A.useMemo(()=>{if(performance.now(),!t||t.length===0)return{activeMachines:[],workCenters:[],departments:[],machineTypes:[],machineNames:[]};let he=t;a&&a!==Me.BOTH&&(he=t.filter(Q=>Q.work_center===a));const _e=he.filter(Q=>Q.status===Ui.ACTIVE);if(_e.length===0)return{activeMachines:[],workCenters:[],departments:[],machineTypes:[],machineNames:[]};const Ee=new Set,Ge=new Set,Ne=new Set,Ze=new Set;for(const Q of _e)Q.work_center&&Ee.add(Q.work_center),Q.department&&Ge.add(Q.department),Q.machine_type&&Ne.add(Q.machine_type),Q.machine_name&&Ze.add(Q.machine_name);const un=Array.from(Ee).sort(),Dt=Array.from(Ge).sort(),j=Array.from(Ne).sort(),$=Array.from(Ze).sort();return performance.now(),{activeMachines:_e,workCenters:un,departments:Dt,machineTypes:j,machineNames:$}},[t,a]),Z=A.useMemo(()=>{const{activeMachines:he}=k;let _e=he;return U.workCenter.length>0&&(_e=_e.filter(Ee=>U.workCenter.includes(Ee.work_center))),U.department.length>0&&(_e=_e.filter(Ee=>U.department.includes(Ee.department))),U.machineType.length>0&&(_e=_e.filter(Ee=>U.machineType.includes(Ee.machine_type))),U.machineName.length>0&&(_e=_e.filter(Ee=>U.machineName.includes(Ee.machine_name))),_e},[k,U]),re=A.useCallback(he=>{R(_e=>{if(he==="today"){const Ee=new Date,Ge=Ee.getUTCFullYear(),Ne=Ee.getUTCMonth(),Ze=Ee.getUTCDate();return new Date(Date.UTC(Ge,Ne,Ze))}else if(he==="prev"){const Ee=new Date(_e);return Ee.setUTCDate(Ee.getUTCDate()-1),Ee}else if(he==="next"){const Ee=new Date(_e);return Ee.setUTCDate(Ee.getUTCDate()+1),Ee}return _e})},[]),oe=A.useCallback(()=>{const he=new Date,_e=he.getUTCFullYear(),Ee=he.getUTCMonth(),Ge=he.getUTCDate(),Ne=new Date(Date.UTC(_e,Ee,Ge));return C.getTime()===Ne.getTime()?"Oggi":si(C)},[C]),ge=A.useCallback(()=>{Y({type:"CLEAR_FILTERS"})},[]),xe=A.useCallback((he,_e,Ee)=>{if(!he.trim())return;let Ge=ue.find(Ne=>Ne[_e]===he.trim());if(Ge||(Ge=ue.find(Ne=>Ne[_e]&&Ne[_e].toLowerCase().includes(he.trim().toLowerCase()))),!Ge){u(`Lavoro non trovato per ${Ee}: ${he}`,"warning");return}fe(Ge,_e,Ee,he)},[ue,t,u]),fe=A.useCallback((he,_e,Ee,Ge)=>{const Ne=t.find(un=>un.id===he.scheduled_machine_id);if(!Ne){u("Macchina non trovata per questo lavoro","error");return}if(Y({type:"SET_FILTER",payload:{filterName:"machineName",value:[Ne.machine_name]}}),Y({type:"SET_FILTER",payload:{filterName:"workCenter",value:[Ne.work_center]}}),Y({type:"SET_FILTER",payload:{filterName:"department",value:[Ne.department]}}),Y({type:"SET_FILTER",payload:{filterName:"machineType",value:[Ne.machine_type]}}),he.scheduled_start_time){const un=new Date(he.scheduled_start_time),Dt=un.getUTCFullYear(),j=un.getUTCMonth(),$=un.getUTCDate();R(new Date(Date.UTC(Dt,j,$)))}_e==="odp_number"?P(""):_e==="article_code"?X(""):_e==="nome_cliente"&&ee("");const Ze=he[_e];u(`Lavoro trovato per ${Ee} "${Ze}" su ${Ne.machine_name}`,"success")},[t,u,P,X,ee,R]),vt=A.useRef(null),$e=A.useRef(!1),ke=A.useCallback(he=>{performance.now();const _e=he.active.data.current;_e.type==="task"?D(_e.task):_e.type==="event"&&D(_e.event)},[]),et=A.useCallback(he=>{const{over:_e}=he;if(_e&&_e.data.current?.type==="slot"){const{machine:Ee,hour:Ge,minute:Ne,isUnavailable:Ze,hasScheduledTask:un}=_e.data.current;if(Ze||un){L(null);return}const Dt=`${Ee.id}-${Ge}-${Ne}`;L(Dt)}else L(null)},[]),Lt=A.useCallback(async he=>{if(performance.now(),vt.current&&clearTimeout(vt.current),$e.current)return;D(null),L(null);const{over:_e,active:Ee}=he;if(!_e)return;const Ge=Ee.data.current,Ne=_e.data.current;if(!(!Ge||!Ne)){$e.current=!0;try{await new Promise(Ze=>{requestAnimationFrame(async()=>{const un=performance.now();if(Ge.type==="task"&&Ne.type==="slot"){const Dt=Ge.task,{machine:j,hour:$,minute:Q,isUnavailable:de,hasScheduledTask:ce}=Ne;if(ce)return u("Impossibile pianificare il lavoro su uno slot temporale occupato","error"),Ze();const ae=await b(Dt.id,j,C,$,Q);ae?.error?u(ae.error,"error"):ae?.conflict&&g(ae)}else if(Ge.type==="event"&&Ne.type==="slot"){const Dt=Ge.event,{machine:j,hour:$,minute:Q,isUnavailable:de,hasScheduledTask:ce}=Ne;if(ce)return u("Impossibile riprogrammare il lavoro su uno slot temporale occupato","error"),Ze();const ae=await S(Dt.id,j,C,$,Q);ae?.error?u(ae.error,"error"):ae?.conflict&&g(ae)}else if(Ge.type==="event"&&Ne.type==="pool"){const Dt=Ge.event;y(Dt.id)}Ze()})})}catch{u("Si  verificato un errore durante l'operazione di trascinamento","error")}finally{$e.current=!1}}},[C,b,S,y,u,g]);return o?_.jsx("div",{className:"content-section",children:_.jsx("div",{className:"loading",children:"Caricamento Scheduler Produzione..."})}):a?_.jsxs(Yk,{onDragStart:ke,onDragOver:et,onDragEnd:Lt,children:[_.jsxs("div",{className:`content-section ${d?"edit-mode":""}`,children:[_.jsx(bs,{title:"Scheduler Produzione"}),_.jsx(A.Suspense,{fallback:_.jsx(g0,{}),children:_.jsx(hN,{})}),_.jsxs("div",{className:"section-controls",children:[_.jsx("h2",{className:"section-title",children:"Ricerca Lavoro"}),_.jsxs("div",{className:"task-lookup-grid",children:[_.jsx(mg,{placeholder:"Inserisci numero ODP per cercare...",value:z,onChange:he=>P(he.target.value),onLookup:()=>xe(z,"odp_number","ODP"),suggestions:ue,field:"odp_number",fieldLabel:"ODP",onDropdownSelect:fe}),_.jsx(mg,{placeholder:"Inserisci codice articolo per cercare...",value:K,onChange:he=>X(he.target.value),onLookup:()=>xe(K,"article_code","codice articolo"),suggestions:ue,field:"article_code",fieldLabel:"Articolo",onDropdownSelect:fe}),_.jsx(mg,{placeholder:"Inserisci nome cliente per cercare...",value:H,onChange:he=>ee(he.target.value),onLookup:()=>xe(H,"nome_cliente","cliente"),suggestions:ue,field:"nome_cliente",fieldLabel:"Cliente",onDropdownSelect:fe})]})]}),_.jsxs("div",{className:"section-controls",children:[_.jsx("h2",{className:"section-title",children:"Programma Produzione"}),_.jsxs("div",{className:"controls-grid",children:[_.jsxs("div",{className:"filters-section",children:[_.jsx(Cu,{label:"Centro di Lavoro",options:k.workCenters,selectedOptions:U.workCenter,onSelectionChange:he=>Y({type:"SET_FILTER",payload:{filterName:"workCenter",value:he}}),searchPlaceholder:"Cerca Centri di Lavoro",id:"work_center_filter"}),_.jsx(Cu,{label:"Reparto",options:k.departments,selectedOptions:U.department,onSelectionChange:he=>Y({type:"SET_FILTER",payload:{filterName:"department",value:he}}),searchPlaceholder:"Cerca Reparti",id:"department_filter"}),_.jsx(Cu,{label:"Tipo Macchina",options:k.machineTypes,selectedOptions:U.machineType,onSelectionChange:he=>Y({type:"SET_FILTER",payload:{filterName:"machineType",value:he}}),searchPlaceholder:"Cerca Tipi di Macchina",id:"machine_type_filter"}),_.jsx(Cu,{label:"Nome Macchina",options:k.machineNames,selectedOptions:U.machineName,onSelectionChange:he=>Y({type:"SET_FILTER",payload:{filterName:"machineName",value:he}}),searchPlaceholder:"Cerca Nomi Macchine",id:"machine_name_filter"})]}),_.jsxs("div",{className:"actions-section",children:[_.jsx("button",{className:`nav-btn ${d?"edit-mode-active":""}`,onClick:f,title:d?"Disabilita modalit modifica":"Abilita modalit modifica",style:{backgroundColor:d?"#dc3545":"#007bff",color:"white",border:d?"2px solid #bd2130":"2px solid #0056b3",fontWeight:"bold"},children:d?"Disabilita Modalit Modifica":"Abilita Modalit Modifica"}),_.jsx("button",{className:"nav-btn today",onClick:ge,title:"Clear all filters",children:"Cancella Filtri"}),_.jsxs("div",{className:"calendar-navigation",children:[_.jsx("button",{className:"nav-btn today",onClick:()=>re("today"),children:"Oggi"}),_.jsx("button",{className:"nav-btn",onClick:()=>re("prev"),children:"<"}),_.jsx("span",{className:"current-date",children:oe()}),_.jsx("button",{className:"nav-btn",onClick:()=>re("next"),children:">"})]}),_.jsx("button",{className:"nav-btn today",onClick:()=>gN(".calendar-section .calendar-grid",oe()),title:"Download exact Gantt chart as HTML file",children:"Scarica HTML"})]})]})]}),_.jsx(A.Suspense,{fallback:_.jsx(g0,{}),children:_.jsx(fN,{machines:Z,currentDate:C,dropTargetId:I})})]}),_.jsx(dN,{children:M?_.jsxs("div",{className:"task-item drag-overlay",style:{boxShadow:"0 8px 25px rgba(0,0,0,0.3)",transform:"rotate(3deg) scale(1.05)",opacity:.9,zIndex:1002,pointerEvents:"none"},children:[_.jsx("span",{children:M.odp_number}),_.jsxs("span",{className:"task-time",children:[M.time_remaining?Number(M.time_remaining).toFixed(1):(M.duration||1).toFixed(1),"h"]})]}):null})]}):_.jsx("div",{className:"content-section",children:_.jsx("div",{className:"error",children:"Seleziona un centro di lavoro per visualizzare i dati dello scheduler."})})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function nc(t){return t+.5|0}const Zs=(t,e,n)=>Math.max(Math.min(t,n),e);function ml(t){return Zs(nc(t*2.55),0,255)}function Js(t){return Zs(nc(t*255),0,255)}function fs(t){return Zs(nc(t/2.55)/100,0,1)}function m0(t){return Zs(nc(t*100),0,100)}const ei={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Kg=[..."0123456789ABCDEF"],pN=t=>Kg[t&15],vN=t=>Kg[(t&240)>>4]+Kg[t&15],Ru=t=>(t&240)>>4===(t&15),yN=t=>Ru(t.r)&&Ru(t.g)&&Ru(t.b)&&Ru(t.a);function _N(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&ei[t[1]]*17,g:255&ei[t[2]]*17,b:255&ei[t[3]]*17,a:e===5?ei[t[4]]*17:255}:(e===7||e===9)&&(n={r:ei[t[1]]<<4|ei[t[2]],g:ei[t[3]]<<4|ei[t[4]],b:ei[t[5]]<<4|ei[t[6]],a:e===9?ei[t[7]]<<4|ei[t[8]]:255})),n}const bN=(t,e)=>t<255?e(t):"";function SN(t){var e=yN(t)?pN:vN;return t?"#"+e(t.r)+e(t.g)+e(t.b)+bN(t.a,e):void 0}const wN=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function sx(t,e,n){const i=e*Math.min(n,1-n),a=(o,l=(o+t/30)%12)=>n-i*Math.max(Math.min(l-3,9-l,1),-1);return[a(0),a(8),a(4)]}function xN(t,e,n){const i=(a,o=(a+t/60)%6)=>n-n*e*Math.max(Math.min(o,4-o,1),0);return[i(5),i(3),i(1)]}function EN(t,e,n){const i=sx(t,1,.5);let a;for(e+n>1&&(a=1/(e+n),e*=a,n*=a),a=0;a<3;a++)i[a]*=1-e-n,i[a]+=e;return i}function TN(t,e,n,i,a){return t===a?(e-n)/i+(e<n?6:0):e===a?(n-t)/i+2:(t-e)/i+4}function Pm(t){const n=t.r/255,i=t.g/255,a=t.b/255,o=Math.max(n,i,a),l=Math.min(n,i,a),u=(o+l)/2;let d,f,g;return o!==l&&(g=o-l,f=u>.5?g/(2-o-l):g/(o+l),d=TN(n,i,a,g,o),d=d*60+.5),[d|0,f||0,u]}function Fm(t,e,n,i){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,i)).map(Js)}function zm(t,e,n){return Fm(sx,t,e,n)}function CN(t,e,n){return Fm(EN,t,e,n)}function RN(t,e,n){return Fm(xN,t,e,n)}function ax(t){return(t%360+360)%360}function AN(t){const e=wN.exec(t);let n=255,i;if(!e)return;e[5]!==i&&(n=e[6]?ml(+e[5]):Js(+e[5]));const a=ax(+e[2]),o=+e[3]/100,l=+e[4]/100;return e[1]==="hwb"?i=CN(a,o,l):e[1]==="hsv"?i=RN(a,o,l):i=zm(a,o,l),{r:i[0],g:i[1],b:i[2],a:n}}function ON(t,e){var n=Pm(t);n[0]=ax(n[0]+e),n=zm(n),t.r=n[0],t.g=n[1],t.b=n[2]}function DN(t){if(!t)return;const e=Pm(t),n=e[0],i=m0(e[1]),a=m0(e[2]);return t.a<255?`hsla(${n}, ${i}%, ${a}%, ${fs(t.a)})`:`hsl(${n}, ${i}%, ${a}%)`}const p0={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},v0={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function MN(){const t={},e=Object.keys(v0),n=Object.keys(p0);let i,a,o,l,u;for(i=0;i<e.length;i++){for(l=u=e[i],a=0;a<n.length;a++)o=n[a],u=u.replace(o,p0[o]);o=parseInt(v0[l],16),t[u]=[o>>16&255,o>>8&255,o&255]}return t}let Au;function kN(t){Au||(Au=MN(),Au.transparent=[0,0,0,0]);const e=Au[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const NN=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function jN(t){const e=NN.exec(t);let n=255,i,a,o;if(e){if(e[7]!==i){const l=+e[7];n=e[8]?ml(l):Zs(l*255,0,255)}return i=+e[1],a=+e[3],o=+e[5],i=255&(e[2]?ml(i):Zs(i,0,255)),a=255&(e[4]?ml(a):Zs(a,0,255)),o=255&(e[6]?ml(o):Zs(o,0,255)),{r:i,g:a,b:o,a:n}}}function LN(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${fs(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const pg=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,Ur=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function IN(t,e,n){const i=Ur(fs(t.r)),a=Ur(fs(t.g)),o=Ur(fs(t.b));return{r:Js(pg(i+n*(Ur(fs(e.r))-i))),g:Js(pg(a+n*(Ur(fs(e.g))-a))),b:Js(pg(o+n*(Ur(fs(e.b))-o))),a:t.a+n*(e.a-t.a)}}function Ou(t,e,n){if(t){let i=Pm(t);i[e]=Math.max(0,Math.min(i[e]+i[e]*n,e===0?360:1)),i=zm(i),t.r=i[0],t.g=i[1],t.b=i[2]}}function rx(t,e){return t&&Object.assign(e||{},t)}function y0(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Js(t[3]))):(e=rx(t,{r:0,g:0,b:0,a:1}),e.a=Js(e.a)),e}function UN(t){return t.charAt(0)==="r"?jN(t):AN(t)}class Fl{constructor(e){if(e instanceof Fl)return e;const n=typeof e;let i;n==="object"?i=y0(e):n==="string"&&(i=_N(e)||kN(e)||UN(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=rx(this._rgb);return e&&(e.a=fs(e.a)),e}set rgb(e){this._rgb=y0(e)}rgbString(){return this._valid?LN(this._rgb):void 0}hexString(){return this._valid?SN(this._rgb):void 0}hslString(){return this._valid?DN(this._rgb):void 0}mix(e,n){if(e){const i=this.rgb,a=e.rgb;let o;const l=n===o?.5:n,u=2*l-1,d=i.a-a.a,f=((u*d===-1?u:(u+d)/(1+u*d))+1)/2;o=1-f,i.r=255&f*i.r+o*a.r+.5,i.g=255&f*i.g+o*a.g+.5,i.b=255&f*i.b+o*a.b+.5,i.a=l*i.a+(1-l)*a.a,this.rgb=i}return this}interpolate(e,n){return e&&(this._rgb=IN(this._rgb,e._rgb,n)),this}clone(){return new Fl(this.rgb)}alpha(e){return this._rgb.a=Js(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=nc(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Ou(this._rgb,2,e),this}darken(e){return Ou(this._rgb,2,-e),this}saturate(e){return Ou(this._rgb,1,e),this}desaturate(e){return Ou(this._rgb,1,-e),this}rotate(e){return ON(this._rgb,e),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function os(){}const PN=(()=>{let t=0;return()=>t++})();function pt(t){return t==null}function an(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Xe(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function ai(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function ki(t,e){return ai(t)?t:e}function Ve(t,e){return typeof t>"u"?e:t}const FN=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,ox=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function bt(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function it(t,e,n,i){let a,o,l;if(an(t))for(o=t.length,a=0;a<o;a++)e.call(n,t[a],a);else if(Xe(t))for(l=Object.keys(t),o=l.length,a=0;a<o;a++)e.call(n,t[l[a]],l[a])}function od(t,e){let n,i,a,o;if(!t||!e||t.length!==e.length)return!1;for(n=0,i=t.length;n<i;++n)if(a=t[n],o=e[n],a.datasetIndex!==o.datasetIndex||a.index!==o.index)return!1;return!0}function ld(t){if(an(t))return t.map(ld);if(Xe(t)){const e=Object.create(null),n=Object.keys(t),i=n.length;let a=0;for(;a<i;++a)e[n[a]]=ld(t[n[a]]);return e}return t}function lx(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function zN(t,e,n,i){if(!lx(t))return;const a=e[t],o=n[t];Xe(a)&&Xe(o)?zl(a,o,i):e[t]=ld(o)}function zl(t,e,n){const i=an(e)?e:[e],a=i.length;if(!Xe(t))return t;n=n||{};const o=n.merger||zN;let l;for(let u=0;u<a;++u){if(l=i[u],!Xe(l))continue;const d=Object.keys(l);for(let f=0,g=d.length;f<g;++f)o(d[f],t,l,n)}return t}function Al(t,e){return zl(t,e,{merger:BN})}function BN(t,e,n){if(!lx(t))return;const i=e[t],a=n[t];Xe(i)&&Xe(a)?Al(i,a):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=ld(a))}const _0={"":t=>t,x:t=>t.x,y:t=>t.y};function HN(t){const e=t.split("."),n=[];let i="";for(const a of e)i+=a,i.endsWith("\\")?i=i.slice(0,-1)+".":(n.push(i),i="");return n}function $N(t){const e=HN(t);return n=>{for(const i of e){if(i==="")break;n=n&&n[i]}return n}}function Bl(t,e){return(_0[e]||(_0[e]=$N(e)))(t)}function Bm(t){return t.charAt(0).toUpperCase()+t.slice(1)}const cd=t=>typeof t<"u",ta=t=>typeof t=="function",b0=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function VN(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const st=Math.PI,Ot=2*st,GN=Ot+st,ud=Number.POSITIVE_INFINITY,qN=st/180,Wt=st/2,Ca=st/4,S0=st*2/3,cx=Math.log10,qr=Math.sign;function Ol(t,e,n){return Math.abs(t-e)<n}function w0(t){const e=Math.round(t);t=Ol(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(cx(t))),i=t/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function YN(t){const e=[],n=Math.sqrt(t);let i;for(i=1;i<n;i++)t%i===0&&(e.push(i),e.push(t/i));return n===(n|0)&&e.push(n),e.sort((a,o)=>a-o).pop(),e}function WN(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function Hl(t){return!WN(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function KN(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function XN(t,e,n){let i,a,o;for(i=0,a=t.length;i<a;i++)o=t[i][n],isNaN(o)||(e.min=Math.min(e.min,o),e.max=Math.max(e.max,o))}function ms(t){return t*(st/180)}function QN(t){return t*(180/st)}function x0(t){if(!ai(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function ux(t,e){const n=e.x-t.x,i=e.y-t.y,a=Math.sqrt(n*n+i*i);let o=Math.atan2(i,n);return o<-.5*st&&(o+=Ot),{angle:o,distance:a}}function Xg(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function ZN(t,e){return(t-e+GN)%Ot-st}function mi(t){return(t%Ot+Ot)%Ot}function $l(t,e,n,i){const a=mi(t),o=mi(e),l=mi(n),u=mi(o-a),d=mi(l-a),f=mi(a-o),g=mi(a-l);return a===o||a===l||i&&o===l||u>d&&f<g}function En(t,e,n){return Math.max(e,Math.min(n,t))}function JN(t){return En(t,-32768,32767)}function Br(t,e,n,i=1e-6){return t>=Math.min(e,n)-i&&t<=Math.max(e,n)+i}function Hm(t,e,n){n=n||(l=>t[l]<e);let i=t.length-1,a=0,o;for(;i-a>1;)o=a+i>>1,n(o)?a=o:i=o;return{lo:a,hi:i}}const ja=(t,e,n,i)=>Hm(t,n,i?a=>{const o=t[a][e];return o<n||o===n&&t[a+1][e]===n}:a=>t[a][e]<n),ej=(t,e,n)=>Hm(t,n,i=>t[i][e]>=n);function tj(t,e,n){let i=0,a=t.length;for(;i<a&&t[i]<e;)i++;for(;a>i&&t[a-1]>n;)a--;return i>0||a<t.length?t.slice(i,a):t}const dx=["push","pop","shift","splice","unshift"];function nj(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),dx.forEach(n=>{const i="_onData"+Bm(n),a=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...o){const l=a.apply(this,o);return t._chartjs.listeners.forEach(u=>{typeof u[i]=="function"&&u[i](...o)}),l}})})}function E0(t,e){const n=t._chartjs;if(!n)return;const i=n.listeners,a=i.indexOf(e);a!==-1&&i.splice(a,1),!(i.length>0)&&(dx.forEach(o=>{delete t[o]}),delete t._chartjs)}function ij(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const hx=(function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame})();function fx(t,e){let n=[],i=!1;return function(...a){n=a,i||(i=!0,hx.call(window,()=>{i=!1,t.apply(e,n)}))}}function sj(t,e){let n;return function(...i){return e?(clearTimeout(n),n=setTimeout(t,e,i)):t.apply(this,i),e}}const $m=t=>t==="start"?"left":t==="end"?"right":"center",vn=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,aj=(t,e,n,i)=>t===(i?"left":"right")?n:t==="center"?(e+n)/2:e;function rj(t,e,n){const i=e.length;let a=0,o=i;if(t._sorted){const{iScale:l,vScale:u,_parsed:d}=t,f=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,g=l.axis,{min:p,max:y,minDefined:b,maxDefined:S}=l.getUserBounds();if(b){if(a=Math.min(ja(d,g,p).lo,n?i:ja(e,g,l.getPixelForValue(p)).lo),f){const w=d.slice(0,a+1).reverse().findIndex(x=>!pt(x[u.axis]));a-=Math.max(0,w)}a=En(a,0,i-1)}if(S){let w=Math.max(ja(d,l.axis,y,!0).hi+1,n?0:ja(e,g,l.getPixelForValue(y),!0).hi+1);if(f){const x=d.slice(w-1).findIndex(E=>!pt(E[u.axis]));w+=Math.max(0,x)}o=En(w,a,i)-a}else o=i-a}return{start:a,count:o}}function oj(t){const{xScale:e,yScale:n,_scaleRanges:i}=t,a={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!i)return t._scaleRanges=a,!0;const o=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==n.min||i.ymax!==n.max;return Object.assign(i,a),o}const Du=t=>t===0||t===1,T0=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*Ot/n)),C0=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*Ot/n)+1,Dl={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*Wt)+1,easeOutSine:t=>Math.sin(t*Wt),easeInOutSine:t=>-.5*(Math.cos(st*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>Du(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Du(t)?t:T0(t,.075,.3),easeOutElastic:t=>Du(t)?t:C0(t,.075,.3),easeInOutElastic(t){return Du(t)?t:t<.5?.5*T0(t*2,.1125,.45):.5+.5*C0(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-Dl.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?Dl.easeInBounce(t*2)*.5:Dl.easeOutBounce(t*2-1)*.5+.5};function Vm(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function R0(t){return Vm(t)?t:new Fl(t)}function vg(t){return Vm(t)?t:new Fl(t).saturate(.5).darken(.1).hexString()}const lj=["x","y","borderWidth","radius","tension"],cj=["color","borderColor","backgroundColor"];function uj(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:cj},numbers:{type:"number",properties:lj}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function dj(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const A0=new Map;function hj(t,e){e=e||{};const n=t+JSON.stringify(e);let i=A0.get(n);return i||(i=new Intl.NumberFormat(t,e),A0.set(n,i)),i}function Gm(t,e,n){return hj(e,n).format(t)}const fj={values(t){return an(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const i=this.chart.options.locale;let a,o=t;if(n.length>1){const f=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(f<1e-4||f>1e15)&&(a="scientific"),o=gj(t,n)}const l=cx(Math.abs(o)),u=isNaN(l)?1:Math.max(Math.min(-1*Math.floor(l),20),0),d={notation:a,minimumFractionDigits:u,maximumFractionDigits:u};return Object.assign(d,this.options.ticks.format),Gm(t,i,d)}};function gj(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var gx={formatters:fj};function mj(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:gx.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Ua=Object.create(null),Qg=Object.create(null);function Ml(t,e){if(!e)return t;const n=e.split(".");for(let i=0,a=n.length;i<a;++i){const o=n[i];t=t[o]||(t[o]=Object.create(null))}return t}function yg(t,e,n){return typeof e=="string"?zl(Ml(t,e),n):zl(Ml(t,""),e)}class pj{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,a)=>vg(a.backgroundColor),this.hoverBorderColor=(i,a)=>vg(a.borderColor),this.hoverColor=(i,a)=>vg(a.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return yg(this,e,n)}get(e){return Ml(this,e)}describe(e,n){return yg(Qg,e,n)}override(e,n){return yg(Ua,e,n)}route(e,n,i,a){const o=Ml(this,e),l=Ml(this,i),u="_"+n;Object.defineProperties(o,{[u]:{value:o[n],writable:!0},[n]:{enumerable:!0,get(){const d=this[u],f=l[a];return Xe(d)?Object.assign({},f,d):Ve(d,f)},set(d){this[u]=d}}})}apply(e){e.forEach(n=>n(this))}}var Nt=new pj({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[uj,dj,mj]);function vj(t){return!t||pt(t.size)||pt(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function O0(t,e,n,i,a){let o=e[a];return o||(o=e[a]=t.measureText(a).width,n.push(a)),o>i&&(i=o),i}function Ra(t,e,n){const i=t.currentDevicePixelRatio,a=n!==0?Math.max(n/2,.5):0;return Math.round((e-a)*i)/i+a}function D0(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function Zg(t,e,n,i){mx(t,e,n,i,null)}function mx(t,e,n,i,a){let o,l,u,d,f,g,p,y;const b=e.pointStyle,S=e.rotation,w=e.radius;let x=(S||0)*qN;if(b&&typeof b=="object"&&(o=b.toString(),o==="[object HTMLImageElement]"||o==="[object HTMLCanvasElement]")){t.save(),t.translate(n,i),t.rotate(x),t.drawImage(b,-b.width/2,-b.height/2,b.width,b.height),t.restore();return}if(!(isNaN(w)||w<=0)){switch(t.beginPath(),b){default:a?t.ellipse(n,i,a/2,w,0,0,Ot):t.arc(n,i,w,0,Ot),t.closePath();break;case"triangle":g=a?a/2:w,t.moveTo(n+Math.sin(x)*g,i-Math.cos(x)*w),x+=S0,t.lineTo(n+Math.sin(x)*g,i-Math.cos(x)*w),x+=S0,t.lineTo(n+Math.sin(x)*g,i-Math.cos(x)*w),t.closePath();break;case"rectRounded":f=w*.516,d=w-f,l=Math.cos(x+Ca)*d,p=Math.cos(x+Ca)*(a?a/2-f:d),u=Math.sin(x+Ca)*d,y=Math.sin(x+Ca)*(a?a/2-f:d),t.arc(n-p,i-u,f,x-st,x-Wt),t.arc(n+y,i-l,f,x-Wt,x),t.arc(n+p,i+u,f,x,x+Wt),t.arc(n-y,i+l,f,x+Wt,x+st),t.closePath();break;case"rect":if(!S){d=Math.SQRT1_2*w,g=a?a/2:d,t.rect(n-g,i-d,2*g,2*d);break}x+=Ca;case"rectRot":p=Math.cos(x)*(a?a/2:w),l=Math.cos(x)*w,u=Math.sin(x)*w,y=Math.sin(x)*(a?a/2:w),t.moveTo(n-p,i-u),t.lineTo(n+y,i-l),t.lineTo(n+p,i+u),t.lineTo(n-y,i+l),t.closePath();break;case"crossRot":x+=Ca;case"cross":p=Math.cos(x)*(a?a/2:w),l=Math.cos(x)*w,u=Math.sin(x)*w,y=Math.sin(x)*(a?a/2:w),t.moveTo(n-p,i-u),t.lineTo(n+p,i+u),t.moveTo(n+y,i-l),t.lineTo(n-y,i+l);break;case"star":p=Math.cos(x)*(a?a/2:w),l=Math.cos(x)*w,u=Math.sin(x)*w,y=Math.sin(x)*(a?a/2:w),t.moveTo(n-p,i-u),t.lineTo(n+p,i+u),t.moveTo(n+y,i-l),t.lineTo(n-y,i+l),x+=Ca,p=Math.cos(x)*(a?a/2:w),l=Math.cos(x)*w,u=Math.sin(x)*w,y=Math.sin(x)*(a?a/2:w),t.moveTo(n-p,i-u),t.lineTo(n+p,i+u),t.moveTo(n+y,i-l),t.lineTo(n-y,i+l);break;case"line":l=a?a/2:Math.cos(x)*w,u=Math.sin(x)*w,t.moveTo(n-l,i-u),t.lineTo(n+l,i+u);break;case"dash":t.moveTo(n,i),t.lineTo(n+Math.cos(x)*(a?a/2:w),i+Math.sin(x)*w);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function Vl(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function qm(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Ym(t){t.restore()}function yj(t,e,n,i,a){if(!e)return t.lineTo(n.x,n.y);if(a==="middle"){const o=(e.x+n.x)/2;t.lineTo(o,e.y),t.lineTo(o,n.y)}else a==="after"!=!!i?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function _j(t,e,n,i){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?n.cp2x:n.cp1x,i?n.cp2y:n.cp1y,n.x,n.y)}function bj(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),pt(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function Sj(t,e,n,i,a){if(a.strikethrough||a.underline){const o=t.measureText(i),l=e-o.actualBoundingBoxLeft,u=e+o.actualBoundingBoxRight,d=n-o.actualBoundingBoxAscent,f=n+o.actualBoundingBoxDescent,g=a.strikethrough?(d+f)/2:f;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=a.decorationWidth||2,t.moveTo(l,g),t.lineTo(u,g),t.stroke()}}function wj(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function Gl(t,e,n,i,a,o={}){const l=an(e)?e:[e],u=o.strokeWidth>0&&o.strokeColor!=="";let d,f;for(t.save(),t.font=a.string,bj(t,o),d=0;d<l.length;++d)f=l[d],o.backdrop&&wj(t,o.backdrop),u&&(o.strokeColor&&(t.strokeStyle=o.strokeColor),pt(o.strokeWidth)||(t.lineWidth=o.strokeWidth),t.strokeText(f,n,i,o.maxWidth)),t.fillText(f,n,i,o.maxWidth),Sj(t,n,i,f,o),i+=Number(a.lineHeight);t.restore()}function Jg(t,e){const{x:n,y:i,w:a,h:o,radius:l}=e;t.arc(n+l.topLeft,i+l.topLeft,l.topLeft,1.5*st,st,!0),t.lineTo(n,i+o-l.bottomLeft),t.arc(n+l.bottomLeft,i+o-l.bottomLeft,l.bottomLeft,st,Wt,!0),t.lineTo(n+a-l.bottomRight,i+o),t.arc(n+a-l.bottomRight,i+o-l.bottomRight,l.bottomRight,Wt,0,!0),t.lineTo(n+a,i+l.topRight),t.arc(n+a-l.topRight,i+l.topRight,l.topRight,0,-Wt,!0),t.lineTo(n+l.topLeft,i)}const xj=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Ej=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Tj(t,e){const n=(""+t).match(xj);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const Cj=t=>+t||0;function Wm(t,e){const n={},i=Xe(e),a=i?Object.keys(e):e,o=Xe(t)?i?l=>Ve(t[l],t[e[l]]):l=>t[l]:()=>t;for(const l of a)n[l]=Cj(o(l));return n}function Rj(t){return Wm(t,{top:"y",right:"x",bottom:"y",left:"x"})}function kl(t){return Wm(t,["topLeft","topRight","bottomLeft","bottomRight"])}function ri(t){const e=Rj(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function yn(t,e){t=t||{},e=e||Nt.font;let n=Ve(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let i=Ve(t.style,e.style);i&&!(""+i).match(Ej)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const a={family:Ve(t.family,e.family),lineHeight:Tj(Ve(t.lineHeight,e.lineHeight),n),size:n,style:i,weight:Ve(t.weight,e.weight),string:""};return a.string=vj(a),a}function Mu(t,e,n,i){let a,o,l;for(a=0,o=t.length;a<o;++a)if(l=t[a],l!==void 0&&l!==void 0)return l}function Aj(t,e,n){const{min:i,max:a}=t,o=ox(e,(a-i)/2),l=(u,d)=>n&&u===0?0:u+d;return{min:l(i,-Math.abs(o)),max:l(a,o)}}function za(t,e){return Object.assign(Object.create(t),e)}function Km(t,e=[""],n,i,a=()=>t[0]){const o=n||t;typeof i>"u"&&(i=_x("_fallback",t));const l={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:o,_fallback:i,_getTarget:a,override:u=>Km([u,...t],e,o,i)};return new Proxy(l,{deleteProperty(u,d){return delete u[d],delete u._keys,delete t[0][d],!0},get(u,d){return vx(u,d,()=>Ij(d,e,t,u))},getOwnPropertyDescriptor(u,d){return Reflect.getOwnPropertyDescriptor(u._scopes[0],d)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(u,d){return k0(u).includes(d)},ownKeys(u){return k0(u)},set(u,d,f){const g=u._storage||(u._storage=a());return u[d]=g[d]=f,delete u._keys,!0}})}function Yr(t,e,n,i){const a={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:px(t,i),setContext:o=>Yr(t,o,n,i),override:o=>Yr(t.override(o),e,n,i)};return new Proxy(a,{deleteProperty(o,l){return delete o[l],delete t[l],!0},get(o,l,u){return vx(o,l,()=>Dj(o,l,u))},getOwnPropertyDescriptor(o,l){return o._descriptors.allKeys?Reflect.has(t,l)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,l)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(o,l){return Reflect.has(t,l)},ownKeys(){return Reflect.ownKeys(t)},set(o,l,u){return t[l]=u,delete o[l],!0}})}function px(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:i=e.indexable,_allKeys:a=e.allKeys}=t;return{allKeys:a,scriptable:n,indexable:i,isScriptable:ta(n)?n:()=>n,isIndexable:ta(i)?i:()=>i}}const Oj=(t,e)=>t?t+Bm(e):e,Xm=(t,e)=>Xe(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function vx(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const i=n();return t[e]=i,i}function Dj(t,e,n){const{_proxy:i,_context:a,_subProxy:o,_descriptors:l}=t;let u=i[e];return ta(u)&&l.isScriptable(e)&&(u=Mj(e,u,t,n)),an(u)&&u.length&&(u=kj(e,u,t,l.isIndexable)),Xm(e,u)&&(u=Yr(u,a,o&&o[e],l)),u}function Mj(t,e,n,i){const{_proxy:a,_context:o,_subProxy:l,_stack:u}=n;if(u.has(t))throw new Error("Recursion detected: "+Array.from(u).join("->")+"->"+t);u.add(t);let d=e(o,l||i);return u.delete(t),Xm(t,d)&&(d=Qm(a._scopes,a,t,d)),d}function kj(t,e,n,i){const{_proxy:a,_context:o,_subProxy:l,_descriptors:u}=n;if(typeof o.index<"u"&&i(t))return e[o.index%e.length];if(Xe(e[0])){const d=e,f=a._scopes.filter(g=>g!==d);e=[];for(const g of d){const p=Qm(f,a,t,g);e.push(Yr(p,o,l&&l[t],u))}}return e}function yx(t,e,n){return ta(t)?t(e,n):t}const Nj=(t,e)=>t===!0?e:typeof t=="string"?Bl(e,t):void 0;function jj(t,e,n,i,a){for(const o of e){const l=Nj(n,o);if(l){t.add(l);const u=yx(l._fallback,n,a);if(typeof u<"u"&&u!==n&&u!==i)return u}else if(l===!1&&typeof i<"u"&&n!==i)return null}return!1}function Qm(t,e,n,i){const a=e._rootScopes,o=yx(e._fallback,n,i),l=[...t,...a],u=new Set;u.add(i);let d=M0(u,l,n,o||n,i);return d===null||typeof o<"u"&&o!==n&&(d=M0(u,l,o,d,i),d===null)?!1:Km(Array.from(u),[""],a,o,()=>Lj(e,n,i))}function M0(t,e,n,i,a){for(;n;)n=jj(t,e,n,i,a);return n}function Lj(t,e,n){const i=t._getTarget();e in i||(i[e]={});const a=i[e];return an(a)&&Xe(n)?n:a||{}}function Ij(t,e,n,i){let a;for(const o of e)if(a=_x(Oj(o,t),n),typeof a<"u")return Xm(t,a)?Qm(n,i,t,a):a}function _x(t,e){for(const n of e){if(!n)continue;const i=n[t];if(typeof i<"u")return i}}function k0(t){let e=t._keys;return e||(e=t._keys=Uj(t._scopes)),e}function Uj(t){const e=new Set;for(const n of t)for(const i of Object.keys(n).filter(a=>!a.startsWith("_")))e.add(i);return Array.from(e)}const Pj=Number.EPSILON||1e-14,Wr=(t,e)=>e<t.length&&!t[e].skip&&t[e],bx=t=>t==="x"?"y":"x";function Fj(t,e,n,i){const a=t.skip?e:t,o=e,l=n.skip?e:n,u=Xg(o,a),d=Xg(l,o);let f=u/(u+d),g=d/(u+d);f=isNaN(f)?0:f,g=isNaN(g)?0:g;const p=i*f,y=i*g;return{previous:{x:o.x-p*(l.x-a.x),y:o.y-p*(l.y-a.y)},next:{x:o.x+y*(l.x-a.x),y:o.y+y*(l.y-a.y)}}}function zj(t,e,n){const i=t.length;let a,o,l,u,d,f=Wr(t,0);for(let g=0;g<i-1;++g)if(d=f,f=Wr(t,g+1),!(!d||!f)){if(Ol(e[g],0,Pj)){n[g]=n[g+1]=0;continue}a=n[g]/e[g],o=n[g+1]/e[g],u=Math.pow(a,2)+Math.pow(o,2),!(u<=9)&&(l=3/Math.sqrt(u),n[g]=a*l*e[g],n[g+1]=o*l*e[g])}}function Bj(t,e,n="x"){const i=bx(n),a=t.length;let o,l,u,d=Wr(t,0);for(let f=0;f<a;++f){if(l=u,u=d,d=Wr(t,f+1),!u)continue;const g=u[n],p=u[i];l&&(o=(g-l[n])/3,u[`cp1${n}`]=g-o,u[`cp1${i}`]=p-o*e[f]),d&&(o=(d[n]-g)/3,u[`cp2${n}`]=g+o,u[`cp2${i}`]=p+o*e[f])}}function Hj(t,e="x"){const n=bx(e),i=t.length,a=Array(i).fill(0),o=Array(i);let l,u,d,f=Wr(t,0);for(l=0;l<i;++l)if(u=d,d=f,f=Wr(t,l+1),!!d){if(f){const g=f[e]-d[e];a[l]=g!==0?(f[n]-d[n])/g:0}o[l]=u?f?qr(a[l-1])!==qr(a[l])?0:(a[l-1]+a[l])/2:a[l-1]:a[l]}zj(t,a,o),Bj(t,o,e)}function ku(t,e,n){return Math.max(Math.min(t,n),e)}function $j(t,e){let n,i,a,o,l,u=Vl(t[0],e);for(n=0,i=t.length;n<i;++n)l=o,o=u,u=n<i-1&&Vl(t[n+1],e),o&&(a=t[n],l&&(a.cp1x=ku(a.cp1x,e.left,e.right),a.cp1y=ku(a.cp1y,e.top,e.bottom)),u&&(a.cp2x=ku(a.cp2x,e.left,e.right),a.cp2y=ku(a.cp2y,e.top,e.bottom)))}function Vj(t,e,n,i,a){let o,l,u,d;if(e.spanGaps&&(t=t.filter(f=>!f.skip)),e.cubicInterpolationMode==="monotone")Hj(t,a);else{let f=i?t[t.length-1]:t[0];for(o=0,l=t.length;o<l;++o)u=t[o],d=Fj(f,u,t[Math.min(o+1,l-(i?0:1))%l],e.tension),u.cp1x=d.previous.x,u.cp1y=d.previous.y,u.cp2x=d.next.x,u.cp2y=d.next.y,f=u}e.capBezierPoints&&$j(t,n)}function Zm(){return typeof window<"u"&&typeof document<"u"}function Jm(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function dd(t,e,n){let i;return typeof t=="string"?(i=parseInt(t,10),t.indexOf("%")!==-1&&(i=i/100*e.parentNode[n])):i=t,i}const Ad=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function Gj(t,e){return Ad(t).getPropertyValue(e)}const qj=["top","right","bottom","left"];function Ia(t,e,n){const i={};n=n?"-"+n:"";for(let a=0;a<4;a++){const o=qj[a];i[o]=parseFloat(t[e+"-"+o+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const Yj=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function Wj(t,e){const n=t.touches,i=n&&n.length?n[0]:t,{offsetX:a,offsetY:o}=i;let l=!1,u,d;if(Yj(a,o,t.target))u=a,d=o;else{const f=e.getBoundingClientRect();u=i.clientX-f.left,d=i.clientY-f.top,l=!0}return{x:u,y:d,box:l}}function Da(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:i}=e,a=Ad(n),o=a.boxSizing==="border-box",l=Ia(a,"padding"),u=Ia(a,"border","width"),{x:d,y:f,box:g}=Wj(t,n),p=l.left+(g&&u.left),y=l.top+(g&&u.top);let{width:b,height:S}=e;return o&&(b-=l.width+u.width,S-=l.height+u.height),{x:Math.round((d-p)/b*n.width/i),y:Math.round((f-y)/S*n.height/i)}}function Kj(t,e,n){let i,a;if(e===void 0||n===void 0){const o=t&&Jm(t);if(!o)e=t.clientWidth,n=t.clientHeight;else{const l=o.getBoundingClientRect(),u=Ad(o),d=Ia(u,"border","width"),f=Ia(u,"padding");e=l.width-f.width-d.width,n=l.height-f.height-d.height,i=dd(u.maxWidth,o,"clientWidth"),a=dd(u.maxHeight,o,"clientHeight")}}return{width:e,height:n,maxWidth:i||ud,maxHeight:a||ud}}const Nu=t=>Math.round(t*10)/10;function Xj(t,e,n,i){const a=Ad(t),o=Ia(a,"margin"),l=dd(a.maxWidth,t,"clientWidth")||ud,u=dd(a.maxHeight,t,"clientHeight")||ud,d=Kj(t,e,n);let{width:f,height:g}=d;if(a.boxSizing==="content-box"){const y=Ia(a,"border","width"),b=Ia(a,"padding");f-=b.width+y.width,g-=b.height+y.height}return f=Math.max(0,f-o.width),g=Math.max(0,i?f/i:g-o.height),f=Nu(Math.min(f,l,d.maxWidth)),g=Nu(Math.min(g,u,d.maxHeight)),f&&!g&&(g=Nu(f/2)),(e!==void 0||n!==void 0)&&i&&d.height&&g>d.height&&(g=d.height,f=Nu(Math.floor(g*i))),{width:f,height:g}}function N0(t,e,n){const i=e||1,a=Math.floor(t.height*i),o=Math.floor(t.width*i);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const l=t.canvas;return l.style&&(n||!l.style.height&&!l.style.width)&&(l.style.height=`${t.height}px`,l.style.width=`${t.width}px`),t.currentDevicePixelRatio!==i||l.height!==a||l.width!==o?(t.currentDevicePixelRatio=i,l.height=a,l.width=o,t.ctx.setTransform(i,0,0,i,0,0),!0):!1}const Qj=(function(){let t=!1;try{const e={get passive(){return t=!0,!1}};Zm()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t})();function j0(t,e){const n=Gj(t,e),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function Ma(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function Zj(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:i==="middle"?n<.5?t.y:e.y:i==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function Jj(t,e,n,i){const a={x:t.cp2x,y:t.cp2y},o={x:e.cp1x,y:e.cp1y},l=Ma(t,a,n),u=Ma(a,o,n),d=Ma(o,e,n),f=Ma(l,u,n),g=Ma(u,d,n);return Ma(f,g,n)}const e2=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,i){return n-i},leftForLtr(n,i){return n-i}}},t2=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function $r(t,e,n){return t?e2(e,n):t2()}function Sx(t,e){let n,i;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=i)}function wx(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function xx(t){return t==="angle"?{between:$l,compare:ZN,normalize:mi}:{between:Br,compare:(e,n)=>e-n,normalize:e=>e}}function L0({start:t,end:e,count:n,loop:i,style:a}){return{start:t%n,end:e%n,loop:i&&(e-t+1)%n===0,style:a}}function n2(t,e,n){const{property:i,start:a,end:o}=n,{between:l,normalize:u}=xx(i),d=e.length;let{start:f,end:g,loop:p}=t,y,b;if(p){for(f+=d,g+=d,y=0,b=d;y<b&&l(u(e[f%d][i]),a,o);++y)f--,g--;f%=d,g%=d}return g<f&&(g+=d),{start:f,end:g,loop:p,style:t.style}}function i2(t,e,n){if(!n)return[t];const{property:i,start:a,end:o}=n,l=e.length,{compare:u,between:d,normalize:f}=xx(i),{start:g,end:p,loop:y,style:b}=n2(t,e,n),S=[];let w=!1,x=null,E,C,R;const M=()=>d(a,R,E)&&u(a,R)!==0,D=()=>u(o,E)===0||d(o,R,E),I=()=>w||M(),L=()=>!w||D();for(let z=g,P=g;z<=p;++z)C=e[z%l],!C.skip&&(E=f(C[i]),E!==R&&(w=d(E,a,o),x===null&&I()&&(x=u(E,a)===0?z:P),x!==null&&L()&&(S.push(L0({start:x,end:z,loop:y,count:l,style:b})),x=null),P=z,R=E));return x!==null&&S.push(L0({start:x,end:p,loop:y,count:l,style:b})),S}function s2(t,e){const n=[],i=t.segments;for(let a=0;a<i.length;a++){const o=i2(i[a],t.points,e);o.length&&n.push(...o)}return n}function a2(t,e,n,i){let a=0,o=e-1;if(n&&!i)for(;a<e&&!t[a].skip;)a++;for(;a<e&&t[a].skip;)a++;for(a%=e,n&&(o+=a);o>a&&t[o%e].skip;)o--;return o%=e,{start:a,end:o}}function r2(t,e,n,i){const a=t.length,o=[];let l=e,u=t[e],d;for(d=e+1;d<=n;++d){const f=t[d%a];f.skip||f.stop?u.skip||(i=!1,o.push({start:e%a,end:(d-1)%a,loop:i}),e=l=f.stop?d:null):(l=d,u.skip&&(e=d)),u=f}return l!==null&&o.push({start:e%a,end:l%a,loop:i}),o}function o2(t,e){const n=t.points,i=t.options.spanGaps,a=n.length;if(!a)return[];const o=!!t._loop,{start:l,end:u}=a2(n,a,o,i);if(i===!0)return I0(t,[{start:l,end:u,loop:o}],n,e);const d=u<l?u+a:u,f=!!t._fullLoop&&l===0&&u===a-1;return I0(t,r2(n,l,d,f),n,e)}function I0(t,e,n,i){return!i||!i.setContext||!n?e:l2(t,e,n,i)}function l2(t,e,n,i){const a=t._chart.getContext(),o=U0(t.options),{_datasetIndex:l,options:{spanGaps:u}}=t,d=n.length,f=[];let g=o,p=e[0].start,y=p;function b(S,w,x,E){const C=u?-1:1;if(S!==w){for(S+=d;n[S%d].skip;)S-=C;for(;n[w%d].skip;)w+=C;S%d!==w%d&&(f.push({start:S%d,end:w%d,loop:x,style:E}),g=E,p=w%d)}}for(const S of e){p=u?p:S.start;let w=n[p%d],x;for(y=p+1;y<=S.end;y++){const E=n[y%d];x=U0(i.setContext(za(a,{type:"segment",p0:w,p1:E,p0DataIndex:(y-1)%d,p1DataIndex:y%d,datasetIndex:l}))),c2(x,g)&&b(p,y-1,S.loop,g),w=E,g=x}p<y-1&&b(p,y-1,S.loop,g)}return f}function U0(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function c2(t,e){if(!e)return!1;const n=[],i=function(a,o){return Vm(o)?(n.includes(o)||n.push(o),n.indexOf(o)):o};return JSON.stringify(t,i)!==JSON.stringify(e,i)}function ju(t,e,n){return t.options.clip?t[n]:e[n]}function u2(t,e){const{xScale:n,yScale:i}=t;return n&&i?{left:ju(n,e,"left"),right:ju(n,e,"right"),top:ju(i,e,"top"),bottom:ju(i,e,"bottom")}:e}function d2(t,e){const n=e._clip;if(n.disabled)return!1;const i=u2(e,t.chartArea);return{left:n.left===!1?0:i.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:i.right+(n.right===!0?0:n.right),top:n.top===!1?0:i.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:i.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class h2{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,i,a){const o=n.listeners[a],l=n.duration;o.forEach(u=>u({chart:e,initial:n.initial,numSteps:l,currentStep:Math.min(i-n.start,l)}))}_refresh(){this._request||(this._running=!0,this._request=hx.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((i,a)=>{if(!i.running||!i.items.length)return;const o=i.items;let l=o.length-1,u=!1,d;for(;l>=0;--l)d=o[l],d._active?(d._total>i.duration&&(i.duration=d._total),d.tick(e),u=!0):(o[l]=o[o.length-1],o.pop());u&&(a.draw(),this._notify(a,i,e,"progress")),o.length||(i.running=!1,this._notify(a,i,e,"complete"),i.initial=!1),n+=o.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let i=n.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,i)),i}listen(e,n,i){this._getAnims(e).listeners[n].push(i)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((i,a)=>Math.max(i,a._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const i=n.items;let a=i.length-1;for(;a>=0;--a)i[a].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var cs=new h2;const P0="transparent",f2={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const i=R0(t||P0),a=i.valid&&R0(e||P0);return a&&a.valid?a.mix(i,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class g2{constructor(e,n,i,a){const o=n[i];a=Mu([e.to,a,o,e.from]);const l=Mu([e.from,o,a]);this._active=!0,this._fn=e.fn||f2[e.type||typeof l],this._easing=Dl[e.easing]||Dl.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=i,this._from=l,this._to=a,this._promises=void 0}active(){return this._active}update(e,n,i){if(this._active){this._notify(!1);const a=this._target[this._prop],o=i-this._start,l=this._duration-o;this._start=i,this._duration=Math.floor(Math.max(l,e.duration)),this._total+=o,this._loop=!!e.loop,this._to=Mu([e.to,n,a,e.from]),this._from=Mu([e.from,a,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,i=this._duration,a=this._prop,o=this._from,l=this._loop,u=this._to;let d;if(this._active=o!==u&&(l||n<i),!this._active){this._target[a]=u,this._notify(!0);return}if(n<0){this._target[a]=o;return}d=n/i%2,d=l&&d>1?2-d:d,d=this._easing(Math.min(1,Math.max(0,d))),this._target[a]=this._fn(o,u,d)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,i)=>{e.push({res:n,rej:i})})}_notify(e){const n=e?"res":"rej",i=this._promises||[];for(let a=0;a<i.length;a++)i[a][n]()}}class Ex{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!Xe(e))return;const n=Object.keys(Nt.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(a=>{const o=e[a];if(!Xe(o))return;const l={};for(const u of n)l[u]=o[u];(an(o.properties)&&o.properties||[a]).forEach(u=>{(u===a||!i.has(u))&&i.set(u,l)})})}_animateOptions(e,n){const i=n.options,a=p2(e,i);if(!a)return[];const o=this._createAnimations(a,i);return i.$shared&&m2(e.options.$animations,i).then(()=>{e.options=i},()=>{}),o}_createAnimations(e,n){const i=this._properties,a=[],o=e.$animations||(e.$animations={}),l=Object.keys(n),u=Date.now();let d;for(d=l.length-1;d>=0;--d){const f=l[d];if(f.charAt(0)==="$")continue;if(f==="options"){a.push(...this._animateOptions(e,n));continue}const g=n[f];let p=o[f];const y=i.get(f);if(p)if(y&&p.active()){p.update(y,g,u);continue}else p.cancel();if(!y||!y.duration){e[f]=g;continue}o[f]=p=new g2(y,e,f,g),a.push(p)}return a}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const i=this._createAnimations(e,n);if(i.length)return cs.add(this._chart,i),!0}}function m2(t,e){const n=[],i=Object.keys(e);for(let a=0;a<i.length;a++){const o=t[i[a]];o&&o.active()&&n.push(o.wait())}return Promise.all(n)}function p2(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function F0(t,e){const n=t&&t.options||{},i=n.reverse,a=n.min===void 0?e:0,o=n.max===void 0?e:0;return{start:i?o:a,end:i?a:o}}function v2(t,e,n){if(n===!1)return!1;const i=F0(t,n),a=F0(e,n);return{top:a.end,right:i.end,bottom:a.start,left:i.start}}function y2(t){let e,n,i,a;return Xe(t)?(e=t.top,n=t.right,i=t.bottom,a=t.left):e=n=i=a=t,{top:e,right:n,bottom:i,left:a,disabled:t===!1}}function Tx(t,e){const n=[],i=t._getSortedDatasetMetas(e);let a,o;for(a=0,o=i.length;a<o;++a)n.push(i[a].index);return n}function z0(t,e,n,i={}){const a=t.keys,o=i.mode==="single";let l,u,d,f;if(e===null)return;let g=!1;for(l=0,u=a.length;l<u;++l){if(d=+a[l],d===n){if(g=!0,i.all)continue;break}f=t.values[d],ai(f)&&(o||e===0||qr(e)===qr(f))&&(e+=f)}return!g&&!i.all?0:e}function _2(t,e){const{iScale:n,vScale:i}=e,a=n.axis==="x"?"x":"y",o=i.axis==="x"?"x":"y",l=Object.keys(t),u=new Array(l.length);let d,f,g;for(d=0,f=l.length;d<f;++d)g=l[d],u[d]={[a]:g,[o]:t[g]};return u}function _g(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function b2(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function S2(t){const{min:e,max:n,minDefined:i,maxDefined:a}=t.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:a?n:Number.POSITIVE_INFINITY}}function w2(t,e,n){const i=t[e]||(t[e]={});return i[n]||(i[n]={})}function B0(t,e,n,i){for(const a of e.getMatchingVisibleMetas(i).reverse()){const o=t[a.index];if(n&&o>0||!n&&o<0)return a.index}return null}function H0(t,e){const{chart:n,_cachedMeta:i}=t,a=n._stacks||(n._stacks={}),{iScale:o,vScale:l,index:u}=i,d=o.axis,f=l.axis,g=b2(o,l,i),p=e.length;let y;for(let b=0;b<p;++b){const S=e[b],{[d]:w,[f]:x}=S,E=S._stacks||(S._stacks={});y=E[f]=w2(a,g,w),y[u]=x,y._top=B0(y,l,!0,i.type),y._bottom=B0(y,l,!1,i.type);const C=y._visualValues||(y._visualValues={});C[u]=x}}function bg(t,e){const n=t.scales;return Object.keys(n).filter(i=>n[i].axis===e).shift()}function x2(t,e){return za(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function E2(t,e,n){return za(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function ll(t,e){const n=t.controller.index,i=t.vScale&&t.vScale.axis;if(i){e=e||t._parsed;for(const a of e){const o=a._stacks;if(!o||o[i]===void 0||o[i][n]===void 0)return;delete o[i][n],o[i]._visualValues!==void 0&&o[i]._visualValues[n]!==void 0&&delete o[i]._visualValues[n]}}}const Sg=t=>t==="reset"||t==="none",$0=(t,e)=>e?t:Object.assign({},t),T2=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:Tx(n,!0),values:null};class ep{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=_g(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&ll(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,i=this.getDataset(),a=(p,y,b,S)=>p==="x"?y:p==="r"?S:b,o=n.xAxisID=Ve(i.xAxisID,bg(e,"x")),l=n.yAxisID=Ve(i.yAxisID,bg(e,"y")),u=n.rAxisID=Ve(i.rAxisID,bg(e,"r")),d=n.indexAxis,f=n.iAxisID=a(d,o,l,u),g=n.vAxisID=a(d,l,o,u);n.xScale=this.getScaleForId(o),n.yScale=this.getScaleForId(l),n.rScale=this.getScaleForId(u),n.iScale=this.getScaleForId(f),n.vScale=this.getScaleForId(g)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&E0(this._data,this),e._stacked&&ll(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),i=this._data;if(Xe(n)){const a=this._cachedMeta;this._data=_2(n,a)}else if(i!==n){if(i){E0(i,this);const a=this._cachedMeta;ll(a),a._parsed=[]}n&&Object.isExtensible(n)&&nj(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,i=this.getDataset();let a=!1;this._dataCheck();const o=n._stacked;n._stacked=_g(n.vScale,n),n.stack!==i.stack&&(a=!0,ll(n),n.stack=i.stack),this._resyncElements(e),(a||o!==n._stacked)&&(H0(this,n._parsed),n._stacked=_g(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),i=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:i,_data:a}=this,{iScale:o,_stacked:l}=i,u=o.axis;let d=e===0&&n===a.length?!0:i._sorted,f=e>0&&i._parsed[e-1],g,p,y;if(this._parsing===!1)i._parsed=a,i._sorted=!0,y=a;else{an(a[e])?y=this.parseArrayData(i,a,e,n):Xe(a[e])?y=this.parseObjectData(i,a,e,n):y=this.parsePrimitiveData(i,a,e,n);const b=()=>p[u]===null||f&&p[u]<f[u];for(g=0;g<n;++g)i._parsed[g+e]=p=y[g],d&&(b()&&(d=!1),f=p);i._sorted=d}l&&H0(this,y)}parsePrimitiveData(e,n,i,a){const{iScale:o,vScale:l}=e,u=o.axis,d=l.axis,f=o.getLabels(),g=o===l,p=new Array(a);let y,b,S;for(y=0,b=a;y<b;++y)S=y+i,p[y]={[u]:g||o.parse(f[S],S),[d]:l.parse(n[S],S)};return p}parseArrayData(e,n,i,a){const{xScale:o,yScale:l}=e,u=new Array(a);let d,f,g,p;for(d=0,f=a;d<f;++d)g=d+i,p=n[g],u[d]={x:o.parse(p[0],g),y:l.parse(p[1],g)};return u}parseObjectData(e,n,i,a){const{xScale:o,yScale:l}=e,{xAxisKey:u="x",yAxisKey:d="y"}=this._parsing,f=new Array(a);let g,p,y,b;for(g=0,p=a;g<p;++g)y=g+i,b=n[y],f[g]={x:o.parse(Bl(b,u),y),y:l.parse(Bl(b,d),y)};return f}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,i){const a=this.chart,o=this._cachedMeta,l=n[e.axis],u={keys:Tx(a,!0),values:n._stacks[e.axis]._visualValues};return z0(u,l,o.index,{mode:i})}updateRangeFromParsed(e,n,i,a){const o=i[n.axis];let l=o===null?NaN:o;const u=a&&i._stacks[n.axis];a&&u&&(a.values=u,l=z0(a,o,this._cachedMeta.index)),e.min=Math.min(e.min,l),e.max=Math.max(e.max,l)}getMinMax(e,n){const i=this._cachedMeta,a=i._parsed,o=i._sorted&&e===i.iScale,l=a.length,u=this._getOtherScale(e),d=T2(n,i,this.chart),f={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:g,max:p}=S2(u);let y,b;function S(){b=a[y];const w=b[u.axis];return!ai(b[e.axis])||g>w||p<w}for(y=0;y<l&&!(!S()&&(this.updateRangeFromParsed(f,e,b,d),o));++y);if(o){for(y=l-1;y>=0;--y)if(!S()){this.updateRangeFromParsed(f,e,b,d);break}}return f}getAllParsedValues(e){const n=this._cachedMeta._parsed,i=[];let a,o,l;for(a=0,o=n.length;a<o;++a)l=n[a][e.axis],ai(l)&&i.push(l);return i}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,i=n.iScale,a=n.vScale,o=this.getParsed(e);return{label:i?""+i.getLabelForValue(o[i.axis]):"",value:a?""+a.getLabelForValue(o[a.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=y2(Ve(this.options.clip,v2(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,i=this._cachedMeta,a=i.data||[],o=n.chartArea,l=[],u=this._drawStart||0,d=this._drawCount||a.length-u,f=this.options.drawActiveElementsOnTop;let g;for(i.dataset&&i.dataset.draw(e,o,u,d),g=u;g<u+d;++g){const p=a[g];p.hidden||(p.active&&f?l.push(p):p.draw(e,o))}for(g=0;g<l.length;++g)l[g].draw(e,o)}getStyle(e,n){const i=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(e||0,i)}getContext(e,n,i){const a=this.getDataset();let o;if(e>=0&&e<this._cachedMeta.data.length){const l=this._cachedMeta.data[e];o=l.$context||(l.$context=E2(this.getContext(),e,l)),o.parsed=this.getParsed(e),o.raw=a.data[e],o.index=o.dataIndex=e}else o=this.$context||(this.$context=x2(this.chart.getContext(),this.index)),o.dataset=a,o.index=o.datasetIndex=this.index;return o.active=!!n,o.mode=i,o}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",i){const a=n==="active",o=this._cachedDataOpts,l=e+"-"+n,u=o[l],d=this.enableOptionSharing&&cd(i);if(u)return $0(u,d);const f=this.chart.config,g=f.datasetElementScopeKeys(this._type,e),p=a?[`${e}Hover`,"hover",e,""]:[e,""],y=f.getOptionScopes(this.getDataset(),g),b=Object.keys(Nt.elements[e]),S=()=>this.getContext(i,a,n),w=f.resolveNamedOptions(y,b,S,p);return w.$shared&&(w.$shared=d,o[l]=Object.freeze($0(w,d))),w}_resolveAnimations(e,n,i){const a=this.chart,o=this._cachedDataOpts,l=`animation-${n}`,u=o[l];if(u)return u;let d;if(a.options.animation!==!1){const g=this.chart.config,p=g.datasetAnimationScopeKeys(this._type,n),y=g.getOptionScopes(this.getDataset(),p);d=g.createResolver(y,this.getContext(e,i,n))}const f=new Ex(a,d&&d.animations);return d&&d._cacheable&&(o[l]=Object.freeze(f)),f}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||Sg(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const i=this.resolveDataElementOptions(e,n),a=this._sharedOptions,o=this.getSharedOptions(i),l=this.includeOptions(n,o)||o!==a;return this.updateSharedOptions(o,n,i),{sharedOptions:o,includeOptions:l}}updateElement(e,n,i,a){Sg(a)?Object.assign(e,i):this._resolveAnimations(n,a).update(e,i)}updateSharedOptions(e,n,i){e&&!Sg(n)&&this._resolveAnimations(void 0,n).update(e,i)}_setStyle(e,n,i,a){e.active=a;const o=this.getStyle(n,a);this._resolveAnimations(n,i,a).update(e,{options:!a&&this.getSharedOptions(o)||o})}removeHoverStyle(e,n,i){this._setStyle(e,i,"active",!1)}setHoverStyle(e,n,i){this._setStyle(e,i,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,i=this._cachedMeta.data;for(const[u,d,f]of this._syncList)this[u](d,f);this._syncList=[];const a=i.length,o=n.length,l=Math.min(o,a);l&&this.parse(0,l),o>a?this._insertElements(a,o-a,e):o<a&&this._removeElements(o,a-o)}_insertElements(e,n,i=!0){const a=this._cachedMeta,o=a.data,l=e+n;let u;const d=f=>{for(f.length+=n,u=f.length-1;u>=l;u--)f[u]=f[u-n]};for(d(o),u=e;u<l;++u)o[u]=new this.dataElementType;this._parsing&&d(a._parsed),this.parse(e,n),i&&this.updateElements(o,e,n,"reset")}updateElements(e,n,i,a){}_removeElements(e,n){const i=this._cachedMeta;if(this._parsing){const a=i._parsed.splice(e,n);i._stacked&&ll(i,a)}i.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,i,a]=e;this[n](i,a)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const i=arguments.length-2;i&&this._sync(["_insertElements",e,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function C2(t,e,n){let i=1,a=1,o=0,l=0;if(e<Ot){const u=t,d=u+e,f=Math.cos(u),g=Math.sin(u),p=Math.cos(d),y=Math.sin(d),b=(R,M,D)=>$l(R,u,d,!0)?1:Math.max(M,M*n,D,D*n),S=(R,M,D)=>$l(R,u,d,!0)?-1:Math.min(M,M*n,D,D*n),w=b(0,f,p),x=b(Wt,g,y),E=S(st,f,p),C=S(st+Wt,g,y);i=(w-E)/2,a=(x-C)/2,o=-(w+E)/2,l=-(x+C)/2}return{ratioX:i,ratioY:a,offsetX:o,offsetY:l}}class R2 extends ep{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:i,color:a}}=e.legend.options;return n.labels.map((o,l)=>{const d=e.getDatasetMeta(0).controller.getStyle(l);return{text:o,fillStyle:d.backgroundColor,strokeStyle:d.borderColor,fontColor:a,lineWidth:d.borderWidth,pointStyle:i,hidden:!e.getDataVisibility(l),index:l}})}return[]}},onClick(e,n,i){i.chart.toggleDataVisibility(n.index),i.chart.update()}}}};constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const i=this.getDataset().data,a=this._cachedMeta;if(this._parsing===!1)a._parsed=i;else{let o=d=>+i[d];if(Xe(i[e])){const{key:d="value"}=this._parsing;o=f=>+Bl(i[f],d)}let l,u;for(l=e,u=e+n;l<u;++l)a._parsed[l]=o(l)}}_getRotation(){return ms(this.options.rotation-90)}_getCircumference(){return ms(this.options.circumference)}_getRotationExtents(){let e=Ot,n=-Ot;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const a=this.chart.getDatasetMeta(i).controller,o=a._getRotation(),l=a._getCircumference();e=Math.min(e,o),n=Math.max(n,o+l)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:i}=n,a=this._cachedMeta,o=a.data,l=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,u=Math.max((Math.min(i.width,i.height)-l)/2,0),d=Math.min(FN(this.options.cutout,u),1),f=this._getRingWeight(this.index),{circumference:g,rotation:p}=this._getRotationExtents(),{ratioX:y,ratioY:b,offsetX:S,offsetY:w}=C2(p,g,d),x=(i.width-l)/y,E=(i.height-l)/b,C=Math.max(Math.min(x,E)/2,0),R=ox(this.options.radius,C),M=Math.max(R*d,0),D=(R-M)/this._getVisibleDatasetWeightTotal();this.offsetX=S*R,this.offsetY=w*R,a.total=this.calculateTotal(),this.outerRadius=R-D*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-D*f,0),this.updateElements(o,0,o.length,e)}_circumference(e,n){const i=this.options,a=this._cachedMeta,o=this._getCircumference();return n&&i.animation.animateRotate||!this.chart.getDataVisibility(e)||a._parsed[e]===null||a.data[e].hidden?0:this.calculateCircumference(a._parsed[e]*o/Ot)}updateElements(e,n,i,a){const o=a==="reset",l=this.chart,u=l.chartArea,f=l.options.animation,g=(u.left+u.right)/2,p=(u.top+u.bottom)/2,y=o&&f.animateScale,b=y?0:this.innerRadius,S=y?0:this.outerRadius,{sharedOptions:w,includeOptions:x}=this._getSharedOptions(n,a);let E=this._getRotation(),C;for(C=0;C<n;++C)E+=this._circumference(C,o);for(C=n;C<n+i;++C){const R=this._circumference(C,o),M=e[C],D={x:g+this.offsetX,y:p+this.offsetY,startAngle:E,endAngle:E+R,circumference:R,outerRadius:S,innerRadius:b};x&&(D.options=w||this.resolveDataElementOptions(C,M.active?"active":a)),E+=R,this.updateElement(M,C,D,a)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let i=0,a;for(a=0;a<n.length;a++){const o=e._parsed[a];o!==null&&!isNaN(o)&&this.chart.getDataVisibility(a)&&!n[a].hidden&&(i+=Math.abs(o))}return i}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?Ot*(Math.abs(e)/n):0}getLabelAndValue(e){const n=this._cachedMeta,i=this.chart,a=i.data.labels||[],o=Gm(n._parsed[e],i.options.locale);return{label:a[e]||"",value:o}}getMaxBorderWidth(e){let n=0;const i=this.chart;let a,o,l,u,d;if(!e){for(a=0,o=i.data.datasets.length;a<o;++a)if(i.isDatasetVisible(a)){l=i.getDatasetMeta(a),e=l.data,u=l.controller;break}}if(!e)return 0;for(a=0,o=e.length;a<o;++a)d=u.resolveDataElementOptions(a),d.borderAlign!=="inner"&&(n=Math.max(n,d.borderWidth||0,d.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let i=0,a=e.length;i<a;++i){const o=this.resolveDataElementOptions(i);n=Math.max(n,o.offset||0,o.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let i=0;i<e;++i)this.chart.isDatasetVisible(i)&&(n+=this._getRingWeight(i));return n}_getRingWeight(e){return Math.max(Ve(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class A2 extends ep{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:i,data:a=[],_dataset:o}=n,l=this.chart._animationsDisabled;let{start:u,count:d}=rj(n,a,l);this._drawStart=u,this._drawCount=d,oj(n)&&(u=0,d=a.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!o._decimated,i.points=a;const f=this.resolveDatasetElementOptions(e);this.options.showLine||(f.borderWidth=0),f.segment=this.options.segment,this.updateElement(i,void 0,{animated:!l,options:f},e),this.updateElements(a,u,d,e)}updateElements(e,n,i,a){const o=a==="reset",{iScale:l,vScale:u,_stacked:d,_dataset:f}=this._cachedMeta,{sharedOptions:g,includeOptions:p}=this._getSharedOptions(n,a),y=l.axis,b=u.axis,{spanGaps:S,segment:w}=this.options,x=Hl(S)?S:Number.POSITIVE_INFINITY,E=this.chart._animationsDisabled||o||a==="none",C=n+i,R=e.length;let M=n>0&&this.getParsed(n-1);for(let D=0;D<R;++D){const I=e[D],L=E?I:{};if(D<n||D>=C){L.skip=!0;continue}const z=this.getParsed(D),P=pt(z[b]),K=L[y]=l.getPixelForValue(z[y],D),X=L[b]=o||P?u.getBasePixel():u.getPixelForValue(d?this.applyStack(u,z,d):z[b],D);L.skip=isNaN(K)||isNaN(X)||P,L.stop=D>0&&Math.abs(z[y]-M[y])>x,w&&(L.parsed=z,L.raw=f.data[D]),p&&(L.options=g||this.resolveDataElementOptions(D,I.active?"active":a)),E||this.updateElement(I,D,L,a),M=z}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,i=n.options&&n.options.borderWidth||0,a=e.data||[];if(!a.length)return i;const o=a[0].size(this.resolveDataElementOptions(0)),l=a[a.length-1].size(this.resolveDataElementOptions(a.length-1));return Math.max(i,o,l)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}class O2 extends R2{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}function Aa(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class tp{static override(e){Object.assign(tp.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return Aa()}parse(){return Aa()}format(){return Aa()}add(){return Aa()}diff(){return Aa()}startOf(){return Aa()}endOf(){return Aa()}}var D2={_date:tp};function M2(t,e,n,i){const{controller:a,data:o,_sorted:l}=t,u=a._cachedMeta.iScale,d=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(u&&e===u.axis&&e!=="r"&&l&&o.length){const f=u._reversePixels?ej:ja;if(i){if(a._sharedOptions){const g=o[0],p=typeof g.getRange=="function"&&g.getRange(e);if(p){const y=f(o,e,n-p),b=f(o,e,n+p);return{lo:y.lo,hi:b.hi}}}}else{const g=f(o,e,n);if(d){const{vScale:p}=a._cachedMeta,{_parsed:y}=t,b=y.slice(0,g.lo+1).reverse().findIndex(w=>!pt(w[p.axis]));g.lo-=Math.max(0,b);const S=y.slice(g.hi).findIndex(w=>!pt(w[p.axis]));g.hi+=Math.max(0,S)}return g}}return{lo:0,hi:o.length-1}}function Od(t,e,n,i,a){const o=t.getSortedVisibleDatasetMetas(),l=n[e];for(let u=0,d=o.length;u<d;++u){const{index:f,data:g}=o[u],{lo:p,hi:y}=M2(o[u],e,l,a);for(let b=p;b<=y;++b){const S=g[b];S.skip||i(S,f,b)}}}function k2(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(i,a){const o=e?Math.abs(i.x-a.x):0,l=n?Math.abs(i.y-a.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(l,2))}}function wg(t,e,n,i,a){const o=[];return!a&&!t.isPointInArea(e)||Od(t,n,e,function(u,d,f){!a&&!Vl(u,t.chartArea,0)||u.inRange(e.x,e.y,i)&&o.push({element:u,datasetIndex:d,index:f})},!0),o}function N2(t,e,n,i){let a=[];function o(l,u,d){const{startAngle:f,endAngle:g}=l.getProps(["startAngle","endAngle"],i),{angle:p}=ux(l,{x:e.x,y:e.y});$l(p,f,g)&&a.push({element:l,datasetIndex:u,index:d})}return Od(t,n,e,o),a}function j2(t,e,n,i,a,o){let l=[];const u=k2(n);let d=Number.POSITIVE_INFINITY;function f(g,p,y){const b=g.inRange(e.x,e.y,a);if(i&&!b)return;const S=g.getCenterPoint(a);if(!(!!o||t.isPointInArea(S))&&!b)return;const x=u(e,S);x<d?(l=[{element:g,datasetIndex:p,index:y}],d=x):x===d&&l.push({element:g,datasetIndex:p,index:y})}return Od(t,n,e,f),l}function xg(t,e,n,i,a,o){return!o&&!t.isPointInArea(e)?[]:n==="r"&&!i?N2(t,e,n,a):j2(t,e,n,i,a,o)}function V0(t,e,n,i,a){const o=[],l=n==="x"?"inXRange":"inYRange";let u=!1;return Od(t,n,e,(d,f,g)=>{d[l]&&d[l](e[n],a)&&(o.push({element:d,datasetIndex:f,index:g}),u=u||d.inRange(e.x,e.y,a))}),i&&!u?[]:o}var L2={modes:{index(t,e,n,i){const a=Da(e,t),o=n.axis||"x",l=n.includeInvisible||!1,u=n.intersect?wg(t,a,o,i,l):xg(t,a,o,!1,i,l),d=[];return u.length?(t.getSortedVisibleDatasetMetas().forEach(f=>{const g=u[0].index,p=f.data[g];p&&!p.skip&&d.push({element:p,datasetIndex:f.index,index:g})}),d):[]},dataset(t,e,n,i){const a=Da(e,t),o=n.axis||"xy",l=n.includeInvisible||!1;let u=n.intersect?wg(t,a,o,i,l):xg(t,a,o,!1,i,l);if(u.length>0){const d=u[0].datasetIndex,f=t.getDatasetMeta(d).data;u=[];for(let g=0;g<f.length;++g)u.push({element:f[g],datasetIndex:d,index:g})}return u},point(t,e,n,i){const a=Da(e,t),o=n.axis||"xy",l=n.includeInvisible||!1;return wg(t,a,o,i,l)},nearest(t,e,n,i){const a=Da(e,t),o=n.axis||"xy",l=n.includeInvisible||!1;return xg(t,a,o,n.intersect,i,l)},x(t,e,n,i){const a=Da(e,t);return V0(t,a,"x",n.intersect,i)},y(t,e,n,i){const a=Da(e,t);return V0(t,a,"y",n.intersect,i)}}};const Cx=["left","top","right","bottom"];function cl(t,e){return t.filter(n=>n.pos===e)}function G0(t,e){return t.filter(n=>Cx.indexOf(n.pos)===-1&&n.box.axis===e)}function ul(t,e){return t.sort((n,i)=>{const a=e?i:n,o=e?n:i;return a.weight===o.weight?a.index-o.index:a.weight-o.weight})}function I2(t){const e=[];let n,i,a,o,l,u;for(n=0,i=(t||[]).length;n<i;++n)a=t[n],{position:o,options:{stack:l,stackWeight:u=1}}=a,e.push({index:n,box:a,pos:o,horizontal:a.isHorizontal(),weight:a.weight,stack:l&&o+l,stackWeight:u});return e}function U2(t){const e={};for(const n of t){const{stack:i,pos:a,stackWeight:o}=n;if(!i||!Cx.includes(a))continue;const l=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});l.count++,l.weight+=o}return e}function P2(t,e){const n=U2(t),{vBoxMaxWidth:i,hBoxMaxHeight:a}=e;let o,l,u;for(o=0,l=t.length;o<l;++o){u=t[o];const{fullSize:d}=u.box,f=n[u.stack],g=f&&u.stackWeight/f.weight;u.horizontal?(u.width=g?g*i:d&&e.availableWidth,u.height=a):(u.width=i,u.height=g?g*a:d&&e.availableHeight)}return n}function F2(t){const e=I2(t),n=ul(e.filter(f=>f.box.fullSize),!0),i=ul(cl(e,"left"),!0),a=ul(cl(e,"right")),o=ul(cl(e,"top"),!0),l=ul(cl(e,"bottom")),u=G0(e,"x"),d=G0(e,"y");return{fullSize:n,leftAndTop:i.concat(o),rightAndBottom:a.concat(d).concat(l).concat(u),chartArea:cl(e,"chartArea"),vertical:i.concat(a).concat(d),horizontal:o.concat(l).concat(u)}}function q0(t,e,n,i){return Math.max(t[n],e[n])+Math.max(t[i],e[i])}function Rx(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function z2(t,e,n,i){const{pos:a,box:o}=n,l=t.maxPadding;if(!Xe(a)){n.size&&(t[a]-=n.size);const p=i[n.stack]||{size:0,count:1};p.size=Math.max(p.size,n.horizontal?o.height:o.width),n.size=p.size/p.count,t[a]+=n.size}o.getPadding&&Rx(l,o.getPadding());const u=Math.max(0,e.outerWidth-q0(l,t,"left","right")),d=Math.max(0,e.outerHeight-q0(l,t,"top","bottom")),f=u!==t.w,g=d!==t.h;return t.w=u,t.h=d,n.horizontal?{same:f,other:g}:{same:g,other:f}}function B2(t){const e=t.maxPadding;function n(i){const a=Math.max(e[i]-t[i],0);return t[i]+=a,a}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function H2(t,e){const n=e.maxPadding;function i(a){const o={left:0,top:0,right:0,bottom:0};return a.forEach(l=>{o[l]=Math.max(e[l],n[l])}),o}return i(t?["left","right"]:["top","bottom"])}function pl(t,e,n,i){const a=[];let o,l,u,d,f,g;for(o=0,l=t.length,f=0;o<l;++o){u=t[o],d=u.box,d.update(u.width||e.w,u.height||e.h,H2(u.horizontal,e));const{same:p,other:y}=z2(e,n,u,i);f|=p&&a.length,g=g||y,d.fullSize||a.push(u)}return f&&pl(a,e,n,i)||g}function Lu(t,e,n,i,a){t.top=n,t.left=e,t.right=e+i,t.bottom=n+a,t.width=i,t.height=a}function Y0(t,e,n,i){const a=n.padding;let{x:o,y:l}=e;for(const u of t){const d=u.box,f=i[u.stack]||{placed:0,weight:1},g=u.stackWeight/f.weight||1;if(u.horizontal){const p=e.w*g,y=f.size||d.height;cd(f.start)&&(l=f.start),d.fullSize?Lu(d,a.left,l,n.outerWidth-a.right-a.left,y):Lu(d,e.left+f.placed,l,p,y),f.start=l,f.placed+=p,l=d.bottom}else{const p=e.h*g,y=f.size||d.width;cd(f.start)&&(o=f.start),d.fullSize?Lu(d,o,a.top,y,n.outerHeight-a.bottom-a.top):Lu(d,o,e.top+f.placed,y,p),f.start=o,f.placed+=p,o=d.right}}e.x=o,e.y=l}var ii={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,i){if(!t)return;const a=ri(t.options.layout.padding),o=Math.max(e-a.width,0),l=Math.max(n-a.height,0),u=F2(t.boxes),d=u.vertical,f=u.horizontal;it(t.boxes,w=>{typeof w.beforeLayout=="function"&&w.beforeLayout()});const g=d.reduce((w,x)=>x.box.options&&x.box.options.display===!1?w:w+1,0)||1,p=Object.freeze({outerWidth:e,outerHeight:n,padding:a,availableWidth:o,availableHeight:l,vBoxMaxWidth:o/2/g,hBoxMaxHeight:l/2}),y=Object.assign({},a);Rx(y,ri(i));const b=Object.assign({maxPadding:y,w:o,h:l,x:a.left,y:a.top},a),S=P2(d.concat(f),p);pl(u.fullSize,b,p,S),pl(d,b,p,S),pl(f,b,p,S)&&pl(d,b,p,S),B2(b),Y0(u.leftAndTop,b,p,S),b.x+=b.w,b.y+=b.h,Y0(u.rightAndBottom,b,p,S),t.chartArea={left:b.left,top:b.top,right:b.left+b.w,bottom:b.top+b.h,height:b.h,width:b.w},it(u.chartArea,w=>{const x=w.box;Object.assign(x,t.chartArea),x.update(b.w,b.h,{left:0,top:0,right:0,bottom:0})})}};class Ax{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,i){}removeEventListener(e,n,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,i,a){return n=Math.max(0,n||e.width),i=i||e.height,{width:n,height:Math.max(0,a?Math.floor(n/a):i)}}isAttached(e){return!0}updateConfig(e){}}class $2 extends Ax{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const qu="$chartjs",V2={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},W0=t=>t===null||t==="";function G2(t,e){const n=t.style,i=t.getAttribute("height"),a=t.getAttribute("width");if(t[qu]={initial:{height:i,width:a,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",W0(a)){const o=j0(t,"width");o!==void 0&&(t.width=o)}if(W0(i))if(t.style.height==="")t.height=t.width/(e||2);else{const o=j0(t,"height");o!==void 0&&(t.height=o)}return t}const Ox=Qj?{passive:!0}:!1;function q2(t,e,n){t&&t.addEventListener(e,n,Ox)}function Y2(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,Ox)}function W2(t,e){const n=V2[t.type]||t.type,{x:i,y:a}=Da(t,e);return{type:n,chart:e,native:t,x:i!==void 0?i:null,y:a!==void 0?a:null}}function hd(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function K2(t,e,n){const i=t.canvas,a=new MutationObserver(o=>{let l=!1;for(const u of o)l=l||hd(u.addedNodes,i),l=l&&!hd(u.removedNodes,i);l&&n()});return a.observe(document,{childList:!0,subtree:!0}),a}function X2(t,e,n){const i=t.canvas,a=new MutationObserver(o=>{let l=!1;for(const u of o)l=l||hd(u.removedNodes,i),l=l&&!hd(u.addedNodes,i);l&&n()});return a.observe(document,{childList:!0,subtree:!0}),a}const ql=new Map;let K0=0;function Dx(){const t=window.devicePixelRatio;t!==K0&&(K0=t,ql.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function Q2(t,e){ql.size||window.addEventListener("resize",Dx),ql.set(t,e)}function Z2(t){ql.delete(t),ql.size||window.removeEventListener("resize",Dx)}function J2(t,e,n){const i=t.canvas,a=i&&Jm(i);if(!a)return;const o=fx((u,d)=>{const f=a.clientWidth;n(u,d),f<a.clientWidth&&n()},window),l=new ResizeObserver(u=>{const d=u[0],f=d.contentRect.width,g=d.contentRect.height;f===0&&g===0||o(f,g)});return l.observe(a),Q2(t,o),l}function Eg(t,e,n){n&&n.disconnect(),e==="resize"&&Z2(t)}function eL(t,e,n){const i=t.canvas,a=fx(o=>{t.ctx!==null&&n(W2(o,t))},t);return q2(i,e,a),a}class tL extends Ax{acquireContext(e,n){const i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(G2(e,n),i):null}releaseContext(e){const n=e.canvas;if(!n[qu])return!1;const i=n[qu].initial;["height","width"].forEach(o=>{const l=i[o];pt(l)?n.removeAttribute(o):n.setAttribute(o,l)});const a=i.style||{};return Object.keys(a).forEach(o=>{n.style[o]=a[o]}),n.width=n.width,delete n[qu],!0}addEventListener(e,n,i){this.removeEventListener(e,n);const a=e.$proxies||(e.$proxies={}),l={attach:K2,detach:X2,resize:J2}[n]||eL;a[n]=l(e,n,i)}removeEventListener(e,n){const i=e.$proxies||(e.$proxies={}),a=i[n];if(!a)return;({attach:Eg,detach:Eg,resize:Eg}[n]||Y2)(e,n,a),i[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,i,a){return Xj(e,n,i,a)}isAttached(e){const n=e&&Jm(e);return!!(n&&n.isConnected)}}function nL(t){return!Zm()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?$2:tL}class sa{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){const{x:n,y:i}=this.getProps(["x","y"],e);return{x:n,y:i}}hasValue(){return Hl(this.x)&&Hl(this.y)}getProps(e,n){const i=this.$animations;if(!n||!i)return this;const a={};return e.forEach(o=>{a[o]=i[o]&&i[o].active()?i[o]._to:this[o]}),a}}function iL(t,e){const n=t.options.ticks,i=sL(t),a=Math.min(n.maxTicksLimit||i,i),o=n.major.enabled?rL(e):[],l=o.length,u=o[0],d=o[l-1],f=[];if(l>a)return oL(e,f,o,l/a),f;const g=aL(o,e,a);if(l>0){let p,y;const b=l>1?Math.round((d-u)/(l-1)):null;for(Iu(e,f,g,pt(b)?0:u-b,u),p=0,y=l-1;p<y;p++)Iu(e,f,g,o[p],o[p+1]);return Iu(e,f,g,d,pt(b)?e.length:d+b),f}return Iu(e,f,g),f}function sL(t){const e=t.options.offset,n=t._tickSize(),i=t._length/n+(e?0:1),a=t._maxLength/n;return Math.floor(Math.min(i,a))}function aL(t,e,n){const i=lL(t),a=e.length/n;if(!i)return Math.max(a,1);const o=YN(i);for(let l=0,u=o.length-1;l<u;l++){const d=o[l];if(d>a)return d}return Math.max(a,1)}function rL(t){const e=[];let n,i;for(n=0,i=t.length;n<i;n++)t[n].major&&e.push(n);return e}function oL(t,e,n,i){let a=0,o=n[0],l;for(i=Math.ceil(i),l=0;l<t.length;l++)l===o&&(e.push(t[l]),a++,o=n[a*i])}function Iu(t,e,n,i,a){const o=Ve(i,0),l=Math.min(Ve(a,t.length),t.length);let u=0,d,f,g;for(n=Math.ceil(n),a&&(d=a-i,n=d/Math.floor(d/n)),g=o;g<0;)u++,g=Math.round(o+u*n);for(f=Math.max(o,0);f<l;f++)f===g&&(e.push(t[f]),u++,g=Math.round(o+u*n))}function lL(t){const e=t.length;let n,i;if(e<2)return!1;for(i=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==i)return!1;return i}const cL=t=>t==="left"?"right":t==="right"?"left":t,X0=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,Q0=(t,e)=>Math.min(e||t,t);function Z0(t,e){const n=[],i=t.length/e,a=t.length;let o=0;for(;o<a;o+=i)n.push(t[Math.floor(o)]);return n}function uL(t,e,n){const i=t.ticks.length,a=Math.min(e,i-1),o=t._startPixel,l=t._endPixel,u=1e-6;let d=t.getPixelForTick(a),f;if(!(n&&(i===1?f=Math.max(d-o,l-d):e===0?f=(t.getPixelForTick(1)-d)/2:f=(d-t.getPixelForTick(a-1))/2,d+=a<e?f:-f,d<o-u||d>l+u)))return d}function dL(t,e){it(t,n=>{const i=n.gc,a=i.length/2;let o;if(a>e){for(o=0;o<a;++o)delete n.data[i[o]];i.splice(0,a)}})}function dl(t){return t.drawTicks?t.tickLength:0}function J0(t,e){if(!t.display)return 0;const n=yn(t.font,e),i=ri(t.padding);return(an(t.text)?t.text.length:1)*n.lineHeight+i.height}function hL(t,e){return za(t,{scale:e,type:"scale"})}function fL(t,e,n){return za(t,{tick:n,index:e,type:"tick"})}function gL(t,e,n){let i=$m(t);return(n&&e!=="right"||!n&&e==="right")&&(i=cL(i)),i}function mL(t,e,n,i){const{top:a,left:o,bottom:l,right:u,chart:d}=t,{chartArea:f,scales:g}=d;let p=0,y,b,S;const w=l-a,x=u-o;if(t.isHorizontal()){if(b=vn(i,o,u),Xe(n)){const E=Object.keys(n)[0],C=n[E];S=g[E].getPixelForValue(C)+w-e}else n==="center"?S=(f.bottom+f.top)/2+w-e:S=X0(t,n,e);y=u-o}else{if(Xe(n)){const E=Object.keys(n)[0],C=n[E];b=g[E].getPixelForValue(C)-x+e}else n==="center"?b=(f.left+f.right)/2-x+e:b=X0(t,n,e);S=vn(i,l,a),p=n==="left"?-Wt:Wt}return{titleX:b,titleY:S,maxWidth:y,rotation:p}}class no extends sa{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:i,_suggestedMax:a}=this;return e=ki(e,Number.POSITIVE_INFINITY),n=ki(n,Number.NEGATIVE_INFINITY),i=ki(i,Number.POSITIVE_INFINITY),a=ki(a,Number.NEGATIVE_INFINITY),{min:ki(e,i),max:ki(n,a),minDefined:ai(e),maxDefined:ai(n)}}getMinMax(e){let{min:n,max:i,minDefined:a,maxDefined:o}=this.getUserBounds(),l;if(a&&o)return{min:n,max:i};const u=this.getMatchingVisibleMetas();for(let d=0,f=u.length;d<f;++d)l=u[d].controller.getMinMax(this,e),a||(n=Math.min(n,l.min)),o||(i=Math.max(i,l.max));return n=o&&n>i?i:n,i=a&&n>i?n:i,{min:ki(n,ki(i,n)),max:ki(i,ki(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){bt(this.options.beforeUpdate,[this])}update(e,n,i){const{beginAtZero:a,grace:o,ticks:l}=this.options,u=l.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Aj(this,o,a),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const d=u<this.ticks.length;this._convertTicksToLabels(d?Z0(this.ticks,u):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),l.display&&(l.autoSkip||l.source==="auto")&&(this.ticks=iL(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),d&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,i;this.isHorizontal()?(n=this.left,i=this.right):(n=this.top,i=this.bottom,e=!e),this._startPixel=n,this._endPixel=i,this._reversePixels=e,this._length=i-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){bt(this.options.afterUpdate,[this])}beforeSetDimensions(){bt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){bt(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),bt(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){bt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let i,a,o;for(i=0,a=e.length;i<a;i++)o=e[i],o.label=bt(n.callback,[o.value,i,e],this)}afterTickToLabelConversion(){bt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){bt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,i=Q0(this.ticks.length,e.ticks.maxTicksLimit),a=n.minRotation||0,o=n.maxRotation;let l=a,u,d,f;if(!this._isVisible()||!n.display||a>=o||i<=1||!this.isHorizontal()){this.labelRotation=a;return}const g=this._getLabelSizes(),p=g.widest.width,y=g.highest.height,b=En(this.chart.width-p,0,this.maxWidth);u=e.offset?this.maxWidth/i:b/(i-1),p+6>u&&(u=b/(i-(e.offset?.5:1)),d=this.maxHeight-dl(e.grid)-n.padding-J0(e.title,this.chart.options.font),f=Math.sqrt(p*p+y*y),l=QN(Math.min(Math.asin(En((g.highest.height+6)/u,-1,1)),Math.asin(En(d/f,-1,1))-Math.asin(En(y/f,-1,1)))),l=Math.max(a,Math.min(o,l))),this.labelRotation=l}afterCalculateLabelRotation(){bt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){bt(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:i,title:a,grid:o}}=this,l=this._isVisible(),u=this.isHorizontal();if(l){const d=J0(a,n.options.font);if(u?(e.width=this.maxWidth,e.height=dl(o)+d):(e.height=this.maxHeight,e.width=dl(o)+d),i.display&&this.ticks.length){const{first:f,last:g,widest:p,highest:y}=this._getLabelSizes(),b=i.padding*2,S=ms(this.labelRotation),w=Math.cos(S),x=Math.sin(S);if(u){const E=i.mirror?0:x*p.width+w*y.height;e.height=Math.min(this.maxHeight,e.height+E+b)}else{const E=i.mirror?0:w*p.width+x*y.height;e.width=Math.min(this.maxWidth,e.width+E+b)}this._calculatePadding(f,g,x,w)}}this._handleMargins(),u?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,i,a){const{ticks:{align:o,padding:l},position:u}=this.options,d=this.labelRotation!==0,f=u!=="top"&&this.axis==="x";if(this.isHorizontal()){const g=this.getPixelForTick(0)-this.left,p=this.right-this.getPixelForTick(this.ticks.length-1);let y=0,b=0;d?f?(y=a*e.width,b=i*n.height):(y=i*e.height,b=a*n.width):o==="start"?b=n.width:o==="end"?y=e.width:o!=="inner"&&(y=e.width/2,b=n.width/2),this.paddingLeft=Math.max((y-g+l)*this.width/(this.width-g),0),this.paddingRight=Math.max((b-p+l)*this.width/(this.width-p),0)}else{let g=n.height/2,p=e.height/2;o==="start"?(g=0,p=e.height):o==="end"&&(g=n.height,p=0),this.paddingTop=g+l,this.paddingBottom=p+l}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){bt(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,i;for(n=0,i=e.length;n<i;n++)pt(e[n].label)&&(e.splice(n,1),i--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let i=this.ticks;n<i.length&&(i=Z0(i,n)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,i){const{ctx:a,_longestTextCache:o}=this,l=[],u=[],d=Math.floor(n/Q0(n,i));let f=0,g=0,p,y,b,S,w,x,E,C,R,M,D;for(p=0;p<n;p+=d){if(S=e[p].label,w=this._resolveTickFontOptions(p),a.font=x=w.string,E=o[x]=o[x]||{data:{},gc:[]},C=w.lineHeight,R=M=0,!pt(S)&&!an(S))R=O0(a,E.data,E.gc,R,S),M=C;else if(an(S))for(y=0,b=S.length;y<b;++y)D=S[y],!pt(D)&&!an(D)&&(R=O0(a,E.data,E.gc,R,D),M+=C);l.push(R),u.push(M),f=Math.max(R,f),g=Math.max(M,g)}dL(o,n);const I=l.indexOf(f),L=u.indexOf(g),z=P=>({width:l[P]||0,height:u[P]||0});return{first:z(0),last:z(n-1),widest:z(I),highest:z(L),widths:l,heights:u}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return JN(this._alignToPixels?Ra(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const i=n[e];return i.$context||(i.$context=fL(this.getContext(),e,i))}return this.$context||(this.$context=hL(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=ms(this.labelRotation),i=Math.abs(Math.cos(n)),a=Math.abs(Math.sin(n)),o=this._getLabelSizes(),l=e.autoSkipPadding||0,u=o?o.widest.width+l:0,d=o?o.highest.height+l:0;return this.isHorizontal()?d*i>u*a?u/i:d/a:d*a<u*i?d/i:u/a}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,i=this.chart,a=this.options,{grid:o,position:l,border:u}=a,d=o.offset,f=this.isHorizontal(),p=this.ticks.length+(d?1:0),y=dl(o),b=[],S=u.setContext(this.getContext()),w=S.display?S.width:0,x=w/2,E=function(U){return Ra(i,U,w)};let C,R,M,D,I,L,z,P,K,X,H,ee;if(l==="top")C=E(this.bottom),L=this.bottom-y,P=C-x,X=E(e.top)+x,ee=e.bottom;else if(l==="bottom")C=E(this.top),X=e.top,ee=E(e.bottom)-x,L=C+x,P=this.top+y;else if(l==="left")C=E(this.right),I=this.right-y,z=C-x,K=E(e.left)+x,H=e.right;else if(l==="right")C=E(this.left),K=e.left,H=E(e.right)-x,I=C+x,z=this.left+y;else if(n==="x"){if(l==="center")C=E((e.top+e.bottom)/2+.5);else if(Xe(l)){const U=Object.keys(l)[0],Y=l[U];C=E(this.chart.scales[U].getPixelForValue(Y))}X=e.top,ee=e.bottom,L=C+x,P=L+y}else if(n==="y"){if(l==="center")C=E((e.left+e.right)/2);else if(Xe(l)){const U=Object.keys(l)[0],Y=l[U];C=E(this.chart.scales[U].getPixelForValue(Y))}I=C-x,z=I-y,K=e.left,H=e.right}const se=Ve(a.ticks.maxTicksLimit,p),te=Math.max(1,Math.ceil(p/se));for(R=0;R<p;R+=te){const U=this.getContext(R),Y=o.setContext(U),le=u.setContext(U),ue=Y.lineWidth,k=Y.color,Z=le.dash||[],re=le.dashOffset,oe=Y.tickWidth,ge=Y.tickColor,xe=Y.tickBorderDash||[],fe=Y.tickBorderDashOffset;M=uL(this,R,d),M!==void 0&&(D=Ra(i,M,ue),f?I=z=K=H=D:L=P=X=ee=D,b.push({tx1:I,ty1:L,tx2:z,ty2:P,x1:K,y1:X,x2:H,y2:ee,width:ue,color:k,borderDash:Z,borderDashOffset:re,tickWidth:oe,tickColor:ge,tickBorderDash:xe,tickBorderDashOffset:fe}))}return this._ticksLength=p,this._borderValue=C,b}_computeLabelItems(e){const n=this.axis,i=this.options,{position:a,ticks:o}=i,l=this.isHorizontal(),u=this.ticks,{align:d,crossAlign:f,padding:g,mirror:p}=o,y=dl(i.grid),b=y+g,S=p?-g:b,w=-ms(this.labelRotation),x=[];let E,C,R,M,D,I,L,z,P,K,X,H,ee="middle";if(a==="top")I=this.bottom-S,L=this._getXAxisLabelAlignment();else if(a==="bottom")I=this.top+S,L=this._getXAxisLabelAlignment();else if(a==="left"){const te=this._getYAxisLabelAlignment(y);L=te.textAlign,D=te.x}else if(a==="right"){const te=this._getYAxisLabelAlignment(y);L=te.textAlign,D=te.x}else if(n==="x"){if(a==="center")I=(e.top+e.bottom)/2+b;else if(Xe(a)){const te=Object.keys(a)[0],U=a[te];I=this.chart.scales[te].getPixelForValue(U)+b}L=this._getXAxisLabelAlignment()}else if(n==="y"){if(a==="center")D=(e.left+e.right)/2-b;else if(Xe(a)){const te=Object.keys(a)[0],U=a[te];D=this.chart.scales[te].getPixelForValue(U)}L=this._getYAxisLabelAlignment(y).textAlign}n==="y"&&(d==="start"?ee="top":d==="end"&&(ee="bottom"));const se=this._getLabelSizes();for(E=0,C=u.length;E<C;++E){R=u[E],M=R.label;const te=o.setContext(this.getContext(E));z=this.getPixelForTick(E)+o.labelOffset,P=this._resolveTickFontOptions(E),K=P.lineHeight,X=an(M)?M.length:1;const U=X/2,Y=te.color,le=te.textStrokeColor,ue=te.textStrokeWidth;let k=L;l?(D=z,L==="inner"&&(E===C-1?k=this.options.reverse?"left":"right":E===0?k=this.options.reverse?"right":"left":k="center"),a==="top"?f==="near"||w!==0?H=-X*K+K/2:f==="center"?H=-se.highest.height/2-U*K+K:H=-se.highest.height+K/2:f==="near"||w!==0?H=K/2:f==="center"?H=se.highest.height/2-U*K:H=se.highest.height-X*K,p&&(H*=-1),w!==0&&!te.showLabelBackdrop&&(D+=K/2*Math.sin(w))):(I=z,H=(1-X)*K/2);let Z;if(te.showLabelBackdrop){const re=ri(te.backdropPadding),oe=se.heights[E],ge=se.widths[E];let xe=H-re.top,fe=0-re.left;switch(ee){case"middle":xe-=oe/2;break;case"bottom":xe-=oe;break}switch(L){case"center":fe-=ge/2;break;case"right":fe-=ge;break;case"inner":E===C-1?fe-=ge:E>0&&(fe-=ge/2);break}Z={left:fe,top:xe,width:ge+re.width,height:oe+re.height,color:te.backdropColor}}x.push({label:M,font:P,textOffset:H,options:{rotation:w,color:Y,strokeColor:le,strokeWidth:ue,textAlign:k,textBaseline:ee,translation:[D,I],backdrop:Z}})}return x}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-ms(this.labelRotation))return e==="top"?"left":"right";let a="center";return n.align==="start"?a="left":n.align==="end"?a="right":n.align==="inner"&&(a="inner"),a}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:i,mirror:a,padding:o}}=this.options,l=this._getLabelSizes(),u=e+o,d=l.widest.width;let f,g;return n==="left"?a?(g=this.right+o,i==="near"?f="left":i==="center"?(f="center",g+=d/2):(f="right",g+=d)):(g=this.right-u,i==="near"?f="right":i==="center"?(f="center",g-=d/2):(f="left",g=this.left)):n==="right"?a?(g=this.left+o,i==="near"?f="right":i==="center"?(f="center",g-=d/2):(f="left",g-=d)):(g=this.left+u,i==="near"?f="left":i==="center"?(f="center",g+=d/2):(f="right",g=this.right)):f="right",{textAlign:f,x:g}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:i,top:a,width:o,height:l}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(i,a,o,l),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const a=this.ticks.findIndex(o=>o.value===e);return a>=0?n.setContext(this.getContext(a)).lineWidth:0}drawGrid(e){const n=this.options.grid,i=this.ctx,a=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let o,l;const u=(d,f,g)=>{!g.width||!g.color||(i.save(),i.lineWidth=g.width,i.strokeStyle=g.color,i.setLineDash(g.borderDash||[]),i.lineDashOffset=g.borderDashOffset,i.beginPath(),i.moveTo(d.x,d.y),i.lineTo(f.x,f.y),i.stroke(),i.restore())};if(n.display)for(o=0,l=a.length;o<l;++o){const d=a[o];n.drawOnChartArea&&u({x:d.x1,y:d.y1},{x:d.x2,y:d.y2},d),n.drawTicks&&u({x:d.tx1,y:d.ty1},{x:d.tx2,y:d.ty2},{color:d.tickColor,width:d.tickWidth,borderDash:d.tickBorderDash,borderDashOffset:d.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:i,grid:a}}=this,o=i.setContext(this.getContext()),l=i.display?o.width:0;if(!l)return;const u=a.setContext(this.getContext(0)).lineWidth,d=this._borderValue;let f,g,p,y;this.isHorizontal()?(f=Ra(e,this.left,l)-l/2,g=Ra(e,this.right,u)+u/2,p=y=d):(p=Ra(e,this.top,l)-l/2,y=Ra(e,this.bottom,u)+u/2,f=g=d),n.save(),n.lineWidth=o.width,n.strokeStyle=o.color,n.beginPath(),n.moveTo(f,p),n.lineTo(g,y),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const i=this.ctx,a=this._computeLabelArea();a&&qm(i,a);const o=this.getLabelItems(e);for(const l of o){const u=l.options,d=l.font,f=l.label,g=l.textOffset;Gl(i,f,0,g,d,u)}a&&Ym(i)}drawTitle(){const{ctx:e,options:{position:n,title:i,reverse:a}}=this;if(!i.display)return;const o=yn(i.font),l=ri(i.padding),u=i.align;let d=o.lineHeight/2;n==="bottom"||n==="center"||Xe(n)?(d+=l.bottom,an(i.text)&&(d+=o.lineHeight*(i.text.length-1))):d+=l.top;const{titleX:f,titleY:g,maxWidth:p,rotation:y}=mL(this,d,n,u);Gl(e,i.text,0,0,o,{color:i.color,maxWidth:p,rotation:y,textAlign:gL(u,n,a),textBaseline:"middle",translation:[f,g]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,i=Ve(e.grid&&e.grid.z,-1),a=Ve(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==no.prototype.draw?[{z:n,draw:o=>{this.draw(o)}}]:[{z:i,draw:o=>{this.drawBackground(),this.drawGrid(o),this.drawTitle()}},{z:a,draw:()=>{this.drawBorder()}},{z:n,draw:o=>{this.drawLabels(o)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",a=[];let o,l;for(o=0,l=n.length;o<l;++o){const u=n[o];u[i]===this.id&&(!e||u.type===e)&&a.push(u)}return a}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return yn(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Uu{constructor(e,n,i){this.type=e,this.scope=n,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let i;yL(n)&&(i=this.register(n));const a=this.items,o=e.id,l=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+e);return o in a||(a[o]=e,pL(e,l,i),this.override&&Nt.override(e.id,e.overrides)),l}get(e){return this.items[e]}unregister(e){const n=this.items,i=e.id,a=this.scope;i in n&&delete n[i],a&&i in Nt[a]&&(delete Nt[a][i],this.override&&delete Ua[i])}}function pL(t,e,n){const i=zl(Object.create(null),[n?Nt.get(n):{},Nt.get(e),t.defaults]);Nt.set(e,i),t.defaultRoutes&&vL(e,t.defaultRoutes),t.descriptors&&Nt.describe(e,t.descriptors)}function vL(t,e){Object.keys(e).forEach(n=>{const i=n.split("."),a=i.pop(),o=[t].concat(i).join("."),l=e[n].split("."),u=l.pop(),d=l.join(".");Nt.route(o,a,d,u)})}function yL(t){return"id"in t&&"defaults"in t}class _L{constructor(){this.controllers=new Uu(ep,"datasets",!0),this.elements=new Uu(sa,"elements"),this.plugins=new Uu(Object,"plugins"),this.scales=new Uu(no,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,i){[...n].forEach(a=>{const o=i||this._getRegistryForType(a);i||o.isForType(a)||o===this.plugins&&a.id?this._exec(e,o,a):it(a,l=>{const u=i||this._getRegistryForType(l);this._exec(e,u,l)})})}_exec(e,n,i){const a=Bm(e);bt(i["before"+a],[],i),n[e](i),bt(i["after"+a],[],i)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const i=this._typedRegistries[n];if(i.isForType(e))return i}return this.plugins}_get(e,n,i){const a=n.get(e);if(a===void 0)throw new Error('"'+e+'" is not a registered '+i+".");return a}}var Li=new _L;class bL{constructor(){this._init=[]}notify(e,n,i,a){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const o=a?this._descriptors(e).filter(a):this._descriptors(e),l=this._notify(o,e,n,i);return n==="afterDestroy"&&(this._notify(o,e,"stop"),this._notify(this._init,e,"uninstall")),l}_notify(e,n,i,a){a=a||{};for(const o of e){const l=o.plugin,u=l[i],d=[n,a,o.options];if(bt(u,d,l)===!1&&a.cancelable)return!1}return!0}invalidate(){pt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const i=e&&e.config,a=Ve(i.options&&i.options.plugins,{}),o=SL(i);return a===!1&&!n?[]:xL(e,o,a,n)}_notifyStateChanges(e){const n=this._oldCache||[],i=this._cache,a=(o,l)=>o.filter(u=>!l.some(d=>u.plugin.id===d.plugin.id));this._notify(a(n,i),e,"stop"),this._notify(a(i,n),e,"start")}}function SL(t){const e={},n=[],i=Object.keys(Li.plugins.items);for(let o=0;o<i.length;o++)n.push(Li.getPlugin(i[o]));const a=t.plugins||[];for(let o=0;o<a.length;o++){const l=a[o];n.indexOf(l)===-1&&(n.push(l),e[l.id]=!0)}return{plugins:n,localIds:e}}function wL(t,e){return!e&&t===!1?null:t===!0?{}:t}function xL(t,{plugins:e,localIds:n},i,a){const o=[],l=t.getContext();for(const u of e){const d=u.id,f=wL(i[d],a);f!==null&&o.push({plugin:u,options:EL(t.config,{plugin:u,local:n[d]},f,l)})}return o}function EL(t,{plugin:e,local:n},i,a){const o=t.pluginScopeKeys(e),l=t.getOptionScopes(i,o);return n&&e.defaults&&l.push(e.defaults),t.createResolver(l,a,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function em(t,e){const n=Nt.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function TL(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function CL(t,e){return t===e?"_index_":"_value_"}function eS(t){if(t==="x"||t==="y"||t==="r")return t}function RL(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function tm(t,...e){if(eS(t))return t;for(const n of e){const i=n.axis||RL(n.position)||t.length>1&&eS(t[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function tS(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function AL(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(i=>i.xAxisID===t||i.yAxisID===t);if(n.length)return tS(t,"x",n[0])||tS(t,"y",n[0])}return{}}function OL(t,e){const n=Ua[t.type]||{scales:{}},i=e.scales||{},a=em(t.type,e),o=Object.create(null);return Object.keys(i).forEach(l=>{const u=i[l];if(!Xe(u))return console.error(`Invalid scale configuration for scale: ${l}`);if(u._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${l}`);const d=tm(l,u,AL(l,t),Nt.scales[u.type]),f=CL(d,a),g=n.scales||{};o[l]=Al(Object.create(null),[{axis:d},u,g[d],g[f]])}),t.data.datasets.forEach(l=>{const u=l.type||t.type,d=l.indexAxis||em(u,e),g=(Ua[u]||{}).scales||{};Object.keys(g).forEach(p=>{const y=TL(p,d),b=l[y+"AxisID"]||y;o[b]=o[b]||Object.create(null),Al(o[b],[{axis:y},i[b],g[p]])})}),Object.keys(o).forEach(l=>{const u=o[l];Al(u,[Nt.scales[u.type],Nt.scale])}),o}function Mx(t){const e=t.options||(t.options={});e.plugins=Ve(e.plugins,{}),e.scales=OL(t,e)}function kx(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function DL(t){return t=t||{},t.data=kx(t.data),Mx(t),t}const nS=new Map,Nx=new Set;function Pu(t,e){let n=nS.get(t);return n||(n=e(),nS.set(t,n),Nx.add(n)),n}const hl=(t,e,n)=>{const i=Bl(e,n);i!==void 0&&t.add(i)};class ML{constructor(e){this._config=DL(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=kx(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),Mx(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Pu(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return Pu(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return Pu(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,i=this.type;return Pu(`${i}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const i=this._scopeCache;let a=i.get(e);return(!a||n)&&(a=new Map,i.set(e,a)),a}getOptionScopes(e,n,i){const{options:a,type:o}=this,l=this._cachedScopes(e,i),u=l.get(n);if(u)return u;const d=new Set;n.forEach(g=>{e&&(d.add(e),g.forEach(p=>hl(d,e,p))),g.forEach(p=>hl(d,a,p)),g.forEach(p=>hl(d,Ua[o]||{},p)),g.forEach(p=>hl(d,Nt,p)),g.forEach(p=>hl(d,Qg,p))});const f=Array.from(d);return f.length===0&&f.push(Object.create(null)),Nx.has(n)&&l.set(n,f),f}chartOptionScopes(){const{options:e,type:n}=this;return[e,Ua[n]||{},Nt.datasets[n]||{},{type:n},Nt,Qg]}resolveNamedOptions(e,n,i,a=[""]){const o={$shared:!0},{resolver:l,subPrefixes:u}=iS(this._resolverCache,e,a);let d=l;if(NL(l,n)){o.$shared=!1,i=ta(i)?i():i;const f=this.createResolver(e,i,u);d=Yr(l,i,f)}for(const f of n)o[f]=d[f];return o}createResolver(e,n,i=[""],a){const{resolver:o}=iS(this._resolverCache,e,i);return Xe(n)?Yr(o,n,void 0,a):o}}function iS(t,e,n){let i=t.get(e);i||(i=new Map,t.set(e,i));const a=n.join();let o=i.get(a);return o||(o={resolver:Km(e,n),subPrefixes:n.filter(u=>!u.toLowerCase().includes("hover"))},i.set(a,o)),o}const kL=t=>Xe(t)&&Object.getOwnPropertyNames(t).some(e=>ta(t[e]));function NL(t,e){const{isScriptable:n,isIndexable:i}=px(t);for(const a of e){const o=n(a),l=i(a),u=(l||o)&&t[a];if(o&&(ta(u)||kL(u))||l&&an(u))return!0}return!1}var jL="4.5.0";const LL=["top","bottom","left","right","chartArea"];function sS(t,e){return t==="top"||t==="bottom"||LL.indexOf(t)===-1&&e==="x"}function aS(t,e){return function(n,i){return n[t]===i[t]?n[e]-i[e]:n[t]-i[t]}}function rS(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),bt(n&&n.onComplete,[t],e)}function IL(t){const e=t.chart,n=e.options.animation;bt(n&&n.onProgress,[t],e)}function jx(t){return Zm()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Yu={},oS=t=>{const e=jx(t);return Object.values(Yu).filter(n=>n.canvas===e).pop()};function UL(t,e,n){const i=Object.keys(t);for(const a of i){const o=+a;if(o>=e){const l=t[a];delete t[a],(n>0||o>e)&&(t[o+n]=l)}}}function PL(t,e,n,i){return!n||t.type==="mouseout"?null:i?e:t}let Dd=class{static defaults=Nt;static instances=Yu;static overrides=Ua;static registry=Li;static version=jL;static getChart=oS;static register(...e){Li.add(...e),lS()}static unregister(...e){Li.remove(...e),lS()}constructor(e,n){const i=this.config=new ML(n),a=jx(e),o=oS(a);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");const l=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||nL(a)),this.platform.updateConfig(i);const u=this.platform.acquireContext(a,l.aspectRatio),d=u&&u.canvas,f=d&&d.height,g=d&&d.width;if(this.id=PN(),this.ctx=u,this.canvas=d,this.width=g,this.height=f,this._options=l,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new bL,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=sj(p=>this.update(p),l.resizeDelay||0),this._dataChanges=[],Yu[this.id]=this,!u||!d){console.error("Failed to create chart: can't acquire context from the given item");return}cs.listen(this,"complete",rS),cs.listen(this,"progress",IL),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:i,height:a,_aspectRatio:o}=this;return pt(e)?n&&o?o:a?i/a:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Li}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():N0(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return D0(this.canvas,this.ctx),this}stop(){return cs.stop(this),this}resize(e,n){cs.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const i=this.options,a=this.canvas,o=i.maintainAspectRatio&&this.aspectRatio,l=this.platform.getMaximumSize(a,e,n,o),u=i.devicePixelRatio||this.platform.getDevicePixelRatio(),d=this.width?"resize":"attach";this.width=l.width,this.height=l.height,this._aspectRatio=this.aspectRatio,N0(this,u,!0)&&(this.notifyPlugins("resize",{size:l}),bt(i.onResize,[this,l],this),this.attached&&this._doResize(d)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};it(n,(i,a)=>{i.id=a})}buildOrUpdateScales(){const e=this.options,n=e.scales,i=this.scales,a=Object.keys(i).reduce((l,u)=>(l[u]=!1,l),{});let o=[];n&&(o=o.concat(Object.keys(n).map(l=>{const u=n[l],d=tm(l,u),f=d==="r",g=d==="x";return{options:u,dposition:f?"chartArea":g?"bottom":"left",dtype:f?"radialLinear":g?"category":"linear"}}))),it(o,l=>{const u=l.options,d=u.id,f=tm(d,u),g=Ve(u.type,l.dtype);(u.position===void 0||sS(u.position,f)!==sS(l.dposition))&&(u.position=l.dposition),a[d]=!0;let p=null;if(d in i&&i[d].type===g)p=i[d];else{const y=Li.getScale(g);p=new y({id:d,type:g,ctx:this.ctx,chart:this}),i[p.id]=p}p.init(u,e)}),it(a,(l,u)=>{l||delete i[u]}),it(i,l=>{ii.configure(this,l,l.options),ii.addBox(this,l)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,i=e.length;if(e.sort((a,o)=>a.index-o.index),i>n){for(let a=n;a<i;++a)this._destroyDatasetMeta(a);e.splice(n,i-n)}this._sortedMetasets=e.slice(0).sort(aS("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((i,a)=>{n.filter(o=>o===i._dataset).length===0&&this._destroyDatasetMeta(a)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let i,a;for(this._removeUnreferencedMetasets(),i=0,a=n.length;i<a;i++){const o=n[i];let l=this.getDatasetMeta(i);const u=o.type||this.config.type;if(l.type&&l.type!==u&&(this._destroyDatasetMeta(i),l=this.getDatasetMeta(i)),l.type=u,l.indexAxis=o.indexAxis||em(u,this.options),l.order=o.order||0,l.index=i,l.label=""+o.label,l.visible=this.isDatasetVisible(i),l.controller)l.controller.updateIndex(i),l.controller.linkScales();else{const d=Li.getController(u),{datasetElementType:f,dataElementType:g}=Nt.datasets[u];Object.assign(d,{dataElementType:Li.getElement(g),datasetElementType:f&&Li.getElement(f)}),l.controller=new d(this,i),e.push(l.controller)}}return this._updateMetasets(),e}_resetElements(){it(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const i=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),a=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let l=0;for(let f=0,g=this.data.datasets.length;f<g;f++){const{controller:p}=this.getDatasetMeta(f),y=!a&&o.indexOf(p)===-1;p.buildOrUpdateElements(y),l=Math.max(+p.getMaxOverflow(),l)}l=this._minPadding=i.layout.autoPadding?l:0,this._updateLayout(l),a||it(o,f=>{f.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(aS("z","_idx"));const{_active:u,_lastEvent:d}=this;d?this._eventHandler(d,!0):u.length&&this._updateHoverStyles(u,u,!0),this.render()}_updateScales(){it(this.scales,e=>{ii.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),i=new Set(e.events);(!b0(n,i)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:i,start:a,count:o}of n){const l=i==="_removeElements"?-o:o;UL(e,a,l)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,i=o=>new Set(e.filter(l=>l[0]===o).map((l,u)=>u+","+l.splice(1).join(","))),a=i(0);for(let o=1;o<n;o++)if(!b0(a,i(o)))return;return Array.from(a).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;ii.update(this,this.width,this.height,e);const n=this.chartArea,i=n.width<=0||n.height<=0;this._layers=[],it(this.boxes,a=>{i&&a.position==="chartArea"||(a.configure&&a.configure(),this._layers.push(...a._layers()))},this),this._layers.forEach((a,o)=>{a._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,i=this.data.datasets.length;n<i;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,i=this.data.datasets.length;n<i;++n)this._updateDataset(n,ta(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const i=this.getDatasetMeta(e),a={meta:i,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",a)!==!1&&(i.controller._update(n),a.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",a))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(cs.has(this)?this.attached&&!cs.running(this)&&cs.start(this):(this.draw(),rS({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:i,height:a}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,a)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,i=[];let a,o;for(a=0,o=n.length;a<o;++a){const l=n[a];(!e||l.visible)&&i.push(l)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,i={meta:e,index:e.index,cancelable:!0},a=d2(this,e);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(a&&qm(n,a),e.controller.draw(),a&&Ym(n),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(e){return Vl(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,i,a){const o=L2.modes[n];return typeof o=="function"?o(this,e,i,a):[]}getDatasetMeta(e){const n=this.data.datasets[e],i=this._metasets;let a=i.filter(o=>o&&o._dataset===n).pop();return a||(a={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},i.push(a)),a}getContext(){return this.$context||(this.$context=za(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const i=this.getDatasetMeta(e);return typeof i.hidden=="boolean"?!i.hidden:!n.hidden}setDatasetVisibility(e,n){const i=this.getDatasetMeta(e);i.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,i){const a=i?"show":"hide",o=this.getDatasetMeta(e),l=o.controller._resolveAnimations(void 0,a);cd(n)?(o.data[n].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),l.update(o,{visible:i}),this.update(u=>u.datasetIndex===e?a:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),cs.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),D0(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Yu[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,i=(o,l)=>{n.addEventListener(this,o,l),e[o]=l},a=(o,l,u)=>{o.offsetX=l,o.offsetY=u,this._eventHandler(o)};it(this.options.events,o=>i(o,a))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,i=(d,f)=>{n.addEventListener(this,d,f),e[d]=f},a=(d,f)=>{e[d]&&(n.removeEventListener(this,d,f),delete e[d])},o=(d,f)=>{this.canvas&&this.resize(d,f)};let l;const u=()=>{a("attach",u),this.attached=!0,this.resize(),i("resize",o),i("detach",l)};l=()=>{this.attached=!1,a("resize",o),this._stop(),this._resize(0,0),i("attach",u)},n.isAttached(this.canvas)?u():l()}unbindEvents(){it(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},it(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,i){const a=i?"set":"remove";let o,l,u,d;for(n==="dataset"&&(o=this.getDatasetMeta(e[0].datasetIndex),o.controller["_"+a+"DatasetHoverStyle"]()),u=0,d=e.length;u<d;++u){l=e[u];const f=l&&this.getDatasetMeta(l.datasetIndex).controller;f&&f[a+"HoverStyle"](l.element,l.datasetIndex,l.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],i=e.map(({datasetIndex:o,index:l})=>{const u=this.getDatasetMeta(o);if(!u)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:u.data[l],index:l}});!od(i,n)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,n))}notifyPlugins(e,n,i){return this._plugins.notify(this,e,n,i)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,i){const a=this.options.hover,o=(d,f)=>d.filter(g=>!f.some(p=>g.datasetIndex===p.datasetIndex&&g.index===p.index)),l=o(n,e),u=i?e:o(e,n);l.length&&this.updateHoverStyle(l,a.mode,!1),u.length&&a.mode&&this.updateHoverStyle(u,a.mode,!0)}_eventHandler(e,n){const i={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},a=l=>(l.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",i,a)===!1)return;const o=this._handleEvent(e,n,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,a),(o||i.changed)&&this.render(),this}_handleEvent(e,n,i){const{_active:a=[],options:o}=this,l=n,u=this._getActiveElements(e,a,i,l),d=VN(e),f=PL(e,this._lastEvent,i,d);i&&(this._lastEvent=null,bt(o.onHover,[e,u,this],this),d&&bt(o.onClick,[e,u,this],this));const g=!od(u,a);return(g||n)&&(this._active=u,this._updateHoverStyles(u,a,n)),this._lastEvent=f,g}_getActiveElements(e,n,i,a){if(e.type==="mouseout")return[];if(!i)return n;const o=this.options.hover;return this.getElementsAtEventForMode(e,o.mode,o,a)}};function lS(){return it(Dd.instances,t=>t._plugins.invalidate())}function FL(t,e,n){const{startAngle:i,x:a,y:o,outerRadius:l,innerRadius:u,options:d}=e,{borderWidth:f,borderJoinStyle:g}=d,p=Math.min(f/l,mi(i-n));if(t.beginPath(),t.arc(a,o,l-f/2,i+p/2,n-p/2),u>0){const y=Math.min(f/u,mi(i-n));t.arc(a,o,u+f/2,n-y/2,i+y/2,!0)}else{const y=Math.min(f/2,l*mi(i-n));if(g==="round")t.arc(a,o,y,n-st/2,i+st/2,!0);else if(g==="bevel"){const b=2*y*y,S=-b*Math.cos(n+st/2)+a,w=-b*Math.sin(n+st/2)+o,x=b*Math.cos(i+st/2)+a,E=b*Math.sin(i+st/2)+o;t.lineTo(S,w),t.lineTo(x,E)}}t.closePath(),t.moveTo(0,0),t.rect(0,0,t.canvas.width,t.canvas.height),t.clip("evenodd")}function zL(t,e,n){const{startAngle:i,pixelMargin:a,x:o,y:l,outerRadius:u,innerRadius:d}=e;let f=a/u;t.beginPath(),t.arc(o,l,u,i-f,n+f),d>a?(f=a/d,t.arc(o,l,d,n+f,i-f,!0)):t.arc(o,l,a,n+Wt,i-Wt),t.closePath(),t.clip()}function BL(t){return Wm(t,["outerStart","outerEnd","innerStart","innerEnd"])}function HL(t,e,n,i){const a=BL(t.options.borderRadius),o=(n-e)/2,l=Math.min(o,i*e/2),u=d=>{const f=(n-Math.min(o,d))*i/2;return En(d,0,Math.min(o,f))};return{outerStart:u(a.outerStart),outerEnd:u(a.outerEnd),innerStart:En(a.innerStart,0,l),innerEnd:En(a.innerEnd,0,l)}}function Pr(t,e,n,i){return{x:n+t*Math.cos(e),y:i+t*Math.sin(e)}}function fd(t,e,n,i,a,o){const{x:l,y:u,startAngle:d,pixelMargin:f,innerRadius:g}=e,p=Math.max(e.outerRadius+i+n-f,0),y=g>0?g+i+n+f:0;let b=0;const S=a-d;if(i){const te=g>0?g-i:0,U=p>0?p-i:0,Y=(te+U)/2,le=Y!==0?S*Y/(Y+i):S;b=(S-le)/2}const w=Math.max(.001,S*p-n/st)/p,x=(S-w)/2,E=d+x+b,C=a-x-b,{outerStart:R,outerEnd:M,innerStart:D,innerEnd:I}=HL(e,y,p,C-E),L=p-R,z=p-M,P=E+R/L,K=C-M/z,X=y+D,H=y+I,ee=E+D/X,se=C-I/H;if(t.beginPath(),o){const te=(P+K)/2;if(t.arc(l,u,p,P,te),t.arc(l,u,p,te,K),M>0){const ue=Pr(z,K,l,u);t.arc(ue.x,ue.y,M,K,C+Wt)}const U=Pr(H,C,l,u);if(t.lineTo(U.x,U.y),I>0){const ue=Pr(H,se,l,u);t.arc(ue.x,ue.y,I,C+Wt,se+Math.PI)}const Y=(C-I/y+(E+D/y))/2;if(t.arc(l,u,y,C-I/y,Y,!0),t.arc(l,u,y,Y,E+D/y,!0),D>0){const ue=Pr(X,ee,l,u);t.arc(ue.x,ue.y,D,ee+Math.PI,E-Wt)}const le=Pr(L,E,l,u);if(t.lineTo(le.x,le.y),R>0){const ue=Pr(L,P,l,u);t.arc(ue.x,ue.y,R,E-Wt,P)}}else{t.moveTo(l,u);const te=Math.cos(P)*p+l,U=Math.sin(P)*p+u;t.lineTo(te,U);const Y=Math.cos(K)*p+l,le=Math.sin(K)*p+u;t.lineTo(Y,le)}t.closePath()}function $L(t,e,n,i,a){const{fullCircles:o,startAngle:l,circumference:u}=e;let d=e.endAngle;if(o){fd(t,e,n,i,d,a);for(let f=0;f<o;++f)t.fill();isNaN(u)||(d=l+(u%Ot||Ot))}return fd(t,e,n,i,d,a),t.fill(),d}function VL(t,e,n,i,a){const{fullCircles:o,startAngle:l,circumference:u,options:d}=e,{borderWidth:f,borderJoinStyle:g,borderDash:p,borderDashOffset:y,borderRadius:b}=d,S=d.borderAlign==="inner";if(!f)return;t.setLineDash(p||[]),t.lineDashOffset=y,S?(t.lineWidth=f*2,t.lineJoin=g||"round"):(t.lineWidth=f,t.lineJoin=g||"bevel");let w=e.endAngle;if(o){fd(t,e,n,i,w,a);for(let x=0;x<o;++x)t.stroke();isNaN(u)||(w=l+(u%Ot||Ot))}S&&zL(t,e,w),d.selfJoin&&w-l>=st&&b===0&&g!=="miter"&&FL(t,e,w),o||(fd(t,e,n,i,w,a),t.stroke())}class GL extends sa{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,n,i){const a=this.getProps(["x","y"],i),{angle:o,distance:l}=ux(a,{x:e,y:n}),{startAngle:u,endAngle:d,innerRadius:f,outerRadius:g,circumference:p}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),y=(this.options.spacing+this.options.borderWidth)/2,b=Ve(p,d-u),S=$l(o,u,d)&&u!==d,w=b>=Ot||S,x=Br(l,f+y,g+y);return w&&x}getCenterPoint(e){const{x:n,y:i,startAngle:a,endAngle:o,innerRadius:l,outerRadius:u}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:d,spacing:f}=this.options,g=(a+o)/2,p=(l+u+f+d)/2;return{x:n+Math.cos(g)*p,y:i+Math.sin(g)*p}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:n,circumference:i}=this,a=(n.offset||0)/4,o=(n.spacing||0)/2,l=n.circular;if(this.pixelMargin=n.borderAlign==="inner"?.33:0,this.fullCircles=i>Ot?Math.floor(i/Ot):0,i===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const u=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(u)*a,Math.sin(u)*a);const d=1-Math.sin(Math.min(st,i||0)),f=a*d;e.fillStyle=n.backgroundColor,e.strokeStyle=n.borderColor,$L(e,this,f,o,l),VL(e,this,f,o,l),e.restore()}}function Lx(t,e,n=e){t.lineCap=Ve(n.borderCapStyle,e.borderCapStyle),t.setLineDash(Ve(n.borderDash,e.borderDash)),t.lineDashOffset=Ve(n.borderDashOffset,e.borderDashOffset),t.lineJoin=Ve(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=Ve(n.borderWidth,e.borderWidth),t.strokeStyle=Ve(n.borderColor,e.borderColor)}function qL(t,e,n){t.lineTo(n.x,n.y)}function YL(t){return t.stepped?yj:t.tension||t.cubicInterpolationMode==="monotone"?_j:qL}function Ix(t,e,n={}){const i=t.length,{start:a=0,end:o=i-1}=n,{start:l,end:u}=e,d=Math.max(a,l),f=Math.min(o,u),g=a<l&&o<l||a>u&&o>u;return{count:i,start:d,loop:e.loop,ilen:f<d&&!g?i+f-d:f-d}}function WL(t,e,n,i){const{points:a,options:o}=e,{count:l,start:u,loop:d,ilen:f}=Ix(a,n,i),g=YL(o);let{move:p=!0,reverse:y}=i||{},b,S,w;for(b=0;b<=f;++b)S=a[(u+(y?f-b:b))%l],!S.skip&&(p?(t.moveTo(S.x,S.y),p=!1):g(t,w,S,y,o.stepped),w=S);return d&&(S=a[(u+(y?f:0))%l],g(t,w,S,y,o.stepped)),!!d}function KL(t,e,n,i){const a=e.points,{count:o,start:l,ilen:u}=Ix(a,n,i),{move:d=!0,reverse:f}=i||{};let g=0,p=0,y,b,S,w,x,E;const C=M=>(l+(f?u-M:M))%o,R=()=>{w!==x&&(t.lineTo(g,x),t.lineTo(g,w),t.lineTo(g,E))};for(d&&(b=a[C(0)],t.moveTo(b.x,b.y)),y=0;y<=u;++y){if(b=a[C(y)],b.skip)continue;const M=b.x,D=b.y,I=M|0;I===S?(D<w?w=D:D>x&&(x=D),g=(p*g+M)/++p):(R(),t.lineTo(M,D),S=I,p=0,w=x=D),E=D}R()}function nm(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?KL:WL}function XL(t){return t.stepped?Zj:t.tension||t.cubicInterpolationMode==="monotone"?Jj:Ma}function QL(t,e,n,i){let a=e._path;a||(a=e._path=new Path2D,e.path(a,n,i)&&a.closePath()),Lx(t,e.options),t.stroke(a)}function ZL(t,e,n,i){const{segments:a,options:o}=e,l=nm(e);for(const u of a)Lx(t,o,u.style),t.beginPath(),l(t,e,u,{start:n,end:n+i-1})&&t.closePath(),t.stroke()}const JL=typeof Path2D=="function";function eI(t,e,n,i){JL&&!e.options.segment?QL(t,e,n,i):ZL(t,e,n,i)}class tI extends sa{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const a=i.spanGaps?this._loop:this._fullLoop;Vj(this._points,i,e,a,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=o2(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,i=e.length;return i&&n[e[i-1].end]}interpolate(e,n){const i=this.options,a=e[n],o=this.points,l=s2(this,{property:n,start:a,end:a});if(!l.length)return;const u=[],d=XL(i);let f,g;for(f=0,g=l.length;f<g;++f){const{start:p,end:y}=l[f],b=o[p],S=o[y];if(b===S){u.push(b);continue}const w=Math.abs((a-b[n])/(S[n]-b[n])),x=d(b,S,w,i.stepped);x[n]=e[n],u.push(x)}return u.length===1?u[0]:u}pathSegment(e,n,i){return nm(this)(e,this,n,i)}path(e,n,i){const a=this.segments,o=nm(this);let l=this._loop;n=n||0,i=i||this.points.length-n;for(const u of a)l&=o(e,this,u,{start:n,end:n+i-1});return!!l}draw(e,n,i,a){const o=this.options||{};(this.points||[]).length&&o.borderWidth&&(e.save(),eI(e,this,i,a),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function cS(t,e,n,i){const a=t.options,{[n]:o}=t.getProps([n],i);return Math.abs(e-o)<a.radius+a.hitRadius}class nI extends sa{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,n,i){const a=this.options,{x:o,y:l}=this.getProps(["x","y"],i);return Math.pow(e-o,2)+Math.pow(n-l,2)<Math.pow(a.hitRadius+a.radius,2)}inXRange(e,n){return cS(this,e,"x",n)}inYRange(e,n){return cS(this,e,"y",n)}getCenterPoint(e){const{x:n,y:i}=this.getProps(["x","y"],e);return{x:n,y:i}}size(e){e=e||this.options||{};let n=e.radius||0;n=Math.max(n,n&&e.hoverRadius||0);const i=n&&e.borderWidth||0;return(n+i)*2}draw(e,n){const i=this.options;this.skip||i.radius<.1||!Vl(this,n,this.size(i)/2)||(e.strokeStyle=i.borderColor,e.lineWidth=i.borderWidth,e.fillStyle=i.backgroundColor,Zg(e,i,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}const uS=(t,e)=>{let{boxHeight:n=e,boxWidth:i=e}=t;return t.usePointStyle&&(n=Math.min(n,e),i=t.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(e,n)}},iI=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class dS extends sa{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,i){this.maxWidth=e,this.maxHeight=n,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=bt(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(i=>e.filter(i,this.chart.data))),e.sort&&(n=n.sort((i,a)=>e.sort(i,a,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const i=e.labels,a=yn(i.font),o=a.size,l=this._computeTitleHeight(),{boxWidth:u,itemHeight:d}=uS(i,o);let f,g;n.font=a.string,this.isHorizontal()?(f=this.maxWidth,g=this._fitRows(l,o,u,d)+10):(g=this.maxHeight,f=this._fitCols(l,a,u,d)+10),this.width=Math.min(f,e.maxWidth||this.maxWidth),this.height=Math.min(g,e.maxHeight||this.maxHeight)}_fitRows(e,n,i,a){const{ctx:o,maxWidth:l,options:{labels:{padding:u}}}=this,d=this.legendHitBoxes=[],f=this.lineWidths=[0],g=a+u;let p=e;o.textAlign="left",o.textBaseline="middle";let y=-1,b=-g;return this.legendItems.forEach((S,w)=>{const x=i+n/2+o.measureText(S.text).width;(w===0||f[f.length-1]+x+2*u>l)&&(p+=g,f[f.length-(w>0?0:1)]=0,b+=g,y++),d[w]={left:0,top:b,row:y,width:x,height:a},f[f.length-1]+=x+u}),p}_fitCols(e,n,i,a){const{ctx:o,maxHeight:l,options:{labels:{padding:u}}}=this,d=this.legendHitBoxes=[],f=this.columnSizes=[],g=l-e;let p=u,y=0,b=0,S=0,w=0;return this.legendItems.forEach((x,E)=>{const{itemWidth:C,itemHeight:R}=sI(i,n,o,x,a);E>0&&b+R+2*u>g&&(p+=y+u,f.push({width:y,height:b}),S+=y+u,w++,y=b=0),d[E]={left:S,top:b,col:w,width:C,height:R},y=Math.max(y,C),b+=R+u}),p+=y,f.push({width:y,height:b}),p}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:i,labels:{padding:a},rtl:o}}=this,l=$r(o,this.left,this.width);if(this.isHorizontal()){let u=0,d=vn(i,this.left+a,this.right-this.lineWidths[u]);for(const f of n)u!==f.row&&(u=f.row,d=vn(i,this.left+a,this.right-this.lineWidths[u])),f.top+=this.top+e+a,f.left=l.leftForLtr(l.x(d),f.width),d+=f.width+a}else{let u=0,d=vn(i,this.top+e+a,this.bottom-this.columnSizes[u].height);for(const f of n)f.col!==u&&(u=f.col,d=vn(i,this.top+e+a,this.bottom-this.columnSizes[u].height)),f.top=d,f.left+=this.left+a,f.left=l.leftForLtr(l.x(f.left),f.width),d+=f.height+a}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;qm(e,this),this._draw(),Ym(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:i,ctx:a}=this,{align:o,labels:l}=e,u=Nt.color,d=$r(e.rtl,this.left,this.width),f=yn(l.font),{padding:g}=l,p=f.size,y=p/2;let b;this.drawTitle(),a.textAlign=d.textAlign("left"),a.textBaseline="middle",a.lineWidth=.5,a.font=f.string;const{boxWidth:S,boxHeight:w,itemHeight:x}=uS(l,p),E=function(I,L,z){if(isNaN(S)||S<=0||isNaN(w)||w<0)return;a.save();const P=Ve(z.lineWidth,1);if(a.fillStyle=Ve(z.fillStyle,u),a.lineCap=Ve(z.lineCap,"butt"),a.lineDashOffset=Ve(z.lineDashOffset,0),a.lineJoin=Ve(z.lineJoin,"miter"),a.lineWidth=P,a.strokeStyle=Ve(z.strokeStyle,u),a.setLineDash(Ve(z.lineDash,[])),l.usePointStyle){const K={radius:w*Math.SQRT2/2,pointStyle:z.pointStyle,rotation:z.rotation,borderWidth:P},X=d.xPlus(I,S/2),H=L+y;mx(a,K,X,H,l.pointStyleWidth&&S)}else{const K=L+Math.max((p-w)/2,0),X=d.leftForLtr(I,S),H=kl(z.borderRadius);a.beginPath(),Object.values(H).some(ee=>ee!==0)?Jg(a,{x:X,y:K,w:S,h:w,radius:H}):a.rect(X,K,S,w),a.fill(),P!==0&&a.stroke()}a.restore()},C=function(I,L,z){Gl(a,z.text,I,L+x/2,f,{strikethrough:z.hidden,textAlign:d.textAlign(z.textAlign)})},R=this.isHorizontal(),M=this._computeTitleHeight();R?b={x:vn(o,this.left+g,this.right-i[0]),y:this.top+g+M,line:0}:b={x:this.left+g,y:vn(o,this.top+M+g,this.bottom-n[0].height),line:0},Sx(this.ctx,e.textDirection);const D=x+g;this.legendItems.forEach((I,L)=>{a.strokeStyle=I.fontColor,a.fillStyle=I.fontColor;const z=a.measureText(I.text).width,P=d.textAlign(I.textAlign||(I.textAlign=l.textAlign)),K=S+y+z;let X=b.x,H=b.y;d.setWidth(this.width),R?L>0&&X+K+g>this.right&&(H=b.y+=D,b.line++,X=b.x=vn(o,this.left+g,this.right-i[b.line])):L>0&&H+D>this.bottom&&(X=b.x=X+n[b.line].width+g,b.line++,H=b.y=vn(o,this.top+M+g,this.bottom-n[b.line].height));const ee=d.x(X);if(E(ee,H,I),X=aj(P,X+S+y,R?X+K:this.right,e.rtl),C(d.x(X),H,I),R)b.x+=K+g;else if(typeof I.text!="string"){const se=f.lineHeight;b.y+=Ux(I,se)+g}else b.y+=D}),wx(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,i=yn(n.font),a=ri(n.padding);if(!n.display)return;const o=$r(e.rtl,this.left,this.width),l=this.ctx,u=n.position,d=i.size/2,f=a.top+d;let g,p=this.left,y=this.width;if(this.isHorizontal())y=Math.max(...this.lineWidths),g=this.top+f,p=vn(e.align,p,this.right-y);else{const S=this.columnSizes.reduce((w,x)=>Math.max(w,x.height),0);g=f+vn(e.align,this.top,this.bottom-S-e.labels.padding-this._computeTitleHeight())}const b=vn(u,p,p+y);l.textAlign=o.textAlign($m(u)),l.textBaseline="middle",l.strokeStyle=n.color,l.fillStyle=n.color,l.font=i.string,Gl(l,n.text,b,g,i)}_computeTitleHeight(){const e=this.options.title,n=yn(e.font),i=ri(e.padding);return e.display?n.lineHeight+i.height:0}_getLegendItemAt(e,n){let i,a,o;if(Br(e,this.left,this.right)&&Br(n,this.top,this.bottom)){for(o=this.legendHitBoxes,i=0;i<o.length;++i)if(a=o[i],Br(e,a.left,a.left+a.width)&&Br(n,a.top,a.top+a.height))return this.legendItems[i]}return null}handleEvent(e){const n=this.options;if(!oI(e.type,n))return;const i=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const a=this._hoveredItem,o=iI(a,i);a&&!o&&bt(n.onLeave,[e,a,this],this),this._hoveredItem=i,i&&!o&&bt(n.onHover,[e,i,this],this)}else i&&bt(n.onClick,[e,i,this],this)}}function sI(t,e,n,i,a){const o=aI(i,t,e,n),l=rI(a,i,e.lineHeight);return{itemWidth:o,itemHeight:l}}function aI(t,e,n,i){let a=t.text;return a&&typeof a!="string"&&(a=a.reduce((o,l)=>o.length>l.length?o:l)),e+n.size/2+i.measureText(a).width}function rI(t,e,n){let i=t;return typeof e.text!="string"&&(i=Ux(e,n)),i}function Ux(t,e){const n=t.text?t.text.length:0;return e*n}function oI(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var lI={id:"legend",_element:dS,start(t,e,n){const i=t.legend=new dS({ctx:t.ctx,options:n,chart:t});ii.configure(t,i,n),ii.addBox(t,i)},stop(t){ii.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const i=t.legend;ii.configure(t,i,n),i.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const i=e.datasetIndex,a=n.chart;a.isDatasetVisible(i)?(a.hide(i),e.hidden=!0):(a.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:a,color:o,useBorderRadius:l,borderRadius:u}}=t.legend.options;return t._getSortedDatasetMetas().map(d=>{const f=d.controller.getStyle(n?0:void 0),g=ri(f.borderWidth);return{text:e[d.index].label,fillStyle:f.backgroundColor,fontColor:o,hidden:!d.visible,lineCap:f.borderCapStyle,lineDash:f.borderDash,lineDashOffset:f.borderDashOffset,lineJoin:f.borderJoinStyle,lineWidth:(g.width+g.height)/4,strokeStyle:f.borderColor,pointStyle:i||f.pointStyle,rotation:f.rotation,textAlign:a||f.textAlign,borderRadius:l&&(u||f.borderRadius),datasetIndex:d.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class Px extends sa{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const a=an(i.text)?i.text.length:1;this._padding=ri(i.padding);const o=a*yn(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=o:this.width=o}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:i,bottom:a,right:o,options:l}=this,u=l.align;let d=0,f,g,p;return this.isHorizontal()?(g=vn(u,i,o),p=n+e,f=o-i):(l.position==="left"?(g=i+e,p=vn(u,a,n),d=st*-.5):(g=o-e,p=vn(u,n,a),d=st*.5),f=a-n),{titleX:g,titleY:p,maxWidth:f,rotation:d}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const i=yn(n.font),o=i.lineHeight/2+this._padding.top,{titleX:l,titleY:u,maxWidth:d,rotation:f}=this._drawArgs(o);Gl(e,n.text,0,0,i,{color:n.color,maxWidth:d,rotation:f,textAlign:$m(n.align),textBaseline:"middle",translation:[l,u]})}}function cI(t,e){const n=new Px({ctx:t.ctx,options:e,chart:t});ii.configure(t,n,e),ii.addBox(t,n),t.titleBlock=n}var uI={id:"title",_element:Px,start(t,e,n){cI(t,n)},stop(t){const e=t.titleBlock;ii.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const i=t.titleBlock;ii.configure(t,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const vl={average(t){if(!t.length)return!1;let e,n,i=new Set,a=0,o=0;for(e=0,n=t.length;e<n;++e){const u=t[e].element;if(u&&u.hasValue()){const d=u.tooltipPosition();i.add(d.x),a+=d.y,++o}}return o===0||i.size===0?!1:{x:[...i].reduce((u,d)=>u+d)/i.size,y:a/o}},nearest(t,e){if(!t.length)return!1;let n=e.x,i=e.y,a=Number.POSITIVE_INFINITY,o,l,u;for(o=0,l=t.length;o<l;++o){const d=t[o].element;if(d&&d.hasValue()){const f=d.getCenterPoint(),g=Xg(e,f);g<a&&(a=g,u=d)}}if(u){const d=u.tooltipPosition();n=d.x,i=d.y}return{x:n,y:i}}};function Ni(t,e){return e&&(an(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function us(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function dI(t,e){const{element:n,datasetIndex:i,index:a}=e,o=t.getDatasetMeta(i).controller,{label:l,value:u}=o.getLabelAndValue(a);return{chart:t,label:l,parsed:o.getParsed(a),raw:t.data.datasets[i].data[a],formattedValue:u,dataset:o.getDataset(),dataIndex:a,datasetIndex:i,element:n}}function hS(t,e){const n=t.chart.ctx,{body:i,footer:a,title:o}=t,{boxWidth:l,boxHeight:u}=e,d=yn(e.bodyFont),f=yn(e.titleFont),g=yn(e.footerFont),p=o.length,y=a.length,b=i.length,S=ri(e.padding);let w=S.height,x=0,E=i.reduce((M,D)=>M+D.before.length+D.lines.length+D.after.length,0);if(E+=t.beforeBody.length+t.afterBody.length,p&&(w+=p*f.lineHeight+(p-1)*e.titleSpacing+e.titleMarginBottom),E){const M=e.displayColors?Math.max(u,d.lineHeight):d.lineHeight;w+=b*M+(E-b)*d.lineHeight+(E-1)*e.bodySpacing}y&&(w+=e.footerMarginTop+y*g.lineHeight+(y-1)*e.footerSpacing);let C=0;const R=function(M){x=Math.max(x,n.measureText(M).width+C)};return n.save(),n.font=f.string,it(t.title,R),n.font=d.string,it(t.beforeBody.concat(t.afterBody),R),C=e.displayColors?l+2+e.boxPadding:0,it(i,M=>{it(M.before,R),it(M.lines,R),it(M.after,R)}),C=0,n.font=g.string,it(t.footer,R),n.restore(),x+=S.width,{width:x,height:w}}function hI(t,e){const{y:n,height:i}=e;return n<i/2?"top":n>t.height-i/2?"bottom":"center"}function fI(t,e,n,i){const{x:a,width:o}=i,l=n.caretSize+n.caretPadding;if(t==="left"&&a+o+l>e.width||t==="right"&&a-o-l<0)return!0}function gI(t,e,n,i){const{x:a,width:o}=n,{width:l,chartArea:{left:u,right:d}}=t;let f="center";return i==="center"?f=a<=(u+d)/2?"left":"right":a<=o/2?f="left":a>=l-o/2&&(f="right"),fI(f,t,e,n)&&(f="center"),f}function fS(t,e,n){const i=n.yAlign||e.yAlign||hI(t,n);return{xAlign:n.xAlign||e.xAlign||gI(t,e,n,i),yAlign:i}}function mI(t,e){let{x:n,width:i}=t;return e==="right"?n-=i:e==="center"&&(n-=i/2),n}function pI(t,e,n){let{y:i,height:a}=t;return e==="top"?i+=n:e==="bottom"?i-=a+n:i-=a/2,i}function gS(t,e,n,i){const{caretSize:a,caretPadding:o,cornerRadius:l}=t,{xAlign:u,yAlign:d}=n,f=a+o,{topLeft:g,topRight:p,bottomLeft:y,bottomRight:b}=kl(l);let S=mI(e,u);const w=pI(e,d,f);return d==="center"?u==="left"?S+=f:u==="right"&&(S-=f):u==="left"?S-=Math.max(g,y)+a:u==="right"&&(S+=Math.max(p,b)+a),{x:En(S,0,i.width-e.width),y:En(w,0,i.height-e.height)}}function Fu(t,e,n){const i=ri(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-i.right:t.x+i.left}function mS(t){return Ni([],us(t))}function vI(t,e,n){return za(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function pS(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const Fx={beforeTitle:os,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,i=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return n[e.dataIndex]}return""},afterTitle:os,beforeBody:os,beforeLabel:os,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return pt(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:os,afterBody:os,beforeFooter:os,footer:os,afterFooter:os};function Dn(t,e,n,i){const a=t[e].call(n,i);return typeof a>"u"?Fx[e].call(n,i):a}class vS extends sa{static positioners=vl;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,i=this.options.setContext(this.getContext()),a=i.enabled&&n.options.animation&&i.animations,o=new Ex(this.chart,a);return a._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=vI(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:i}=n,a=Dn(i,"beforeTitle",this,e),o=Dn(i,"title",this,e),l=Dn(i,"afterTitle",this,e);let u=[];return u=Ni(u,us(a)),u=Ni(u,us(o)),u=Ni(u,us(l)),u}getBeforeBody(e,n){return mS(Dn(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:i}=n,a=[];return it(e,o=>{const l={before:[],lines:[],after:[]},u=pS(i,o);Ni(l.before,us(Dn(u,"beforeLabel",this,o))),Ni(l.lines,Dn(u,"label",this,o)),Ni(l.after,us(Dn(u,"afterLabel",this,o))),a.push(l)}),a}getAfterBody(e,n){return mS(Dn(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:i}=n,a=Dn(i,"beforeFooter",this,e),o=Dn(i,"footer",this,e),l=Dn(i,"afterFooter",this,e);let u=[];return u=Ni(u,us(a)),u=Ni(u,us(o)),u=Ni(u,us(l)),u}_createItems(e){const n=this._active,i=this.chart.data,a=[],o=[],l=[];let u=[],d,f;for(d=0,f=n.length;d<f;++d)u.push(dI(this.chart,n[d]));return e.filter&&(u=u.filter((g,p,y)=>e.filter(g,p,y,i))),e.itemSort&&(u=u.sort((g,p)=>e.itemSort(g,p,i))),it(u,g=>{const p=pS(e.callbacks,g);a.push(Dn(p,"labelColor",this,g)),o.push(Dn(p,"labelPointStyle",this,g)),l.push(Dn(p,"labelTextColor",this,g))}),this.labelColors=a,this.labelPointStyles=o,this.labelTextColors=l,this.dataPoints=u,u}update(e,n){const i=this.options.setContext(this.getContext()),a=this._active;let o,l=[];if(!a.length)this.opacity!==0&&(o={opacity:0});else{const u=vl[i.position].call(this,a,this._eventPosition);l=this._createItems(i),this.title=this.getTitle(l,i),this.beforeBody=this.getBeforeBody(l,i),this.body=this.getBody(l,i),this.afterBody=this.getAfterBody(l,i),this.footer=this.getFooter(l,i);const d=this._size=hS(this,i),f=Object.assign({},u,d),g=fS(this.chart,i,f),p=gS(i,f,g,this.chart);this.xAlign=g.xAlign,this.yAlign=g.yAlign,o={opacity:1,x:p.x,y:p.y,width:d.width,height:d.height,caretX:u.x,caretY:u.y}}this._tooltipItems=l,this.$context=void 0,o&&this._resolveAnimations().update(this,o),e&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,i,a){const o=this.getCaretPosition(e,i,a);n.lineTo(o.x1,o.y1),n.lineTo(o.x2,o.y2),n.lineTo(o.x3,o.y3)}getCaretPosition(e,n,i){const{xAlign:a,yAlign:o}=this,{caretSize:l,cornerRadius:u}=i,{topLeft:d,topRight:f,bottomLeft:g,bottomRight:p}=kl(u),{x:y,y:b}=e,{width:S,height:w}=n;let x,E,C,R,M,D;return o==="center"?(M=b+w/2,a==="left"?(x=y,E=x-l,R=M+l,D=M-l):(x=y+S,E=x+l,R=M-l,D=M+l),C=x):(a==="left"?E=y+Math.max(d,g)+l:a==="right"?E=y+S-Math.max(f,p)-l:E=this.caretX,o==="top"?(R=b,M=R-l,x=E-l,C=E+l):(R=b+w,M=R+l,x=E+l,C=E-l),D=R),{x1:x,x2:E,x3:C,y1:R,y2:M,y3:D}}drawTitle(e,n,i){const a=this.title,o=a.length;let l,u,d;if(o){const f=$r(i.rtl,this.x,this.width);for(e.x=Fu(this,i.titleAlign,i),n.textAlign=f.textAlign(i.titleAlign),n.textBaseline="middle",l=yn(i.titleFont),u=i.titleSpacing,n.fillStyle=i.titleColor,n.font=l.string,d=0;d<o;++d)n.fillText(a[d],f.x(e.x),e.y+l.lineHeight/2),e.y+=l.lineHeight+u,d+1===o&&(e.y+=i.titleMarginBottom-u)}}_drawColorBox(e,n,i,a,o){const l=this.labelColors[i],u=this.labelPointStyles[i],{boxHeight:d,boxWidth:f}=o,g=yn(o.bodyFont),p=Fu(this,"left",o),y=a.x(p),b=d<g.lineHeight?(g.lineHeight-d)/2:0,S=n.y+b;if(o.usePointStyle){const w={radius:Math.min(f,d)/2,pointStyle:u.pointStyle,rotation:u.rotation,borderWidth:1},x=a.leftForLtr(y,f)+f/2,E=S+d/2;e.strokeStyle=o.multiKeyBackground,e.fillStyle=o.multiKeyBackground,Zg(e,w,x,E),e.strokeStyle=l.borderColor,e.fillStyle=l.backgroundColor,Zg(e,w,x,E)}else{e.lineWidth=Xe(l.borderWidth)?Math.max(...Object.values(l.borderWidth)):l.borderWidth||1,e.strokeStyle=l.borderColor,e.setLineDash(l.borderDash||[]),e.lineDashOffset=l.borderDashOffset||0;const w=a.leftForLtr(y,f),x=a.leftForLtr(a.xPlus(y,1),f-2),E=kl(l.borderRadius);Object.values(E).some(C=>C!==0)?(e.beginPath(),e.fillStyle=o.multiKeyBackground,Jg(e,{x:w,y:S,w:f,h:d,radius:E}),e.fill(),e.stroke(),e.fillStyle=l.backgroundColor,e.beginPath(),Jg(e,{x,y:S+1,w:f-2,h:d-2,radius:E}),e.fill()):(e.fillStyle=o.multiKeyBackground,e.fillRect(w,S,f,d),e.strokeRect(w,S,f,d),e.fillStyle=l.backgroundColor,e.fillRect(x,S+1,f-2,d-2))}e.fillStyle=this.labelTextColors[i]}drawBody(e,n,i){const{body:a}=this,{bodySpacing:o,bodyAlign:l,displayColors:u,boxHeight:d,boxWidth:f,boxPadding:g}=i,p=yn(i.bodyFont);let y=p.lineHeight,b=0;const S=$r(i.rtl,this.x,this.width),w=function(z){n.fillText(z,S.x(e.x+b),e.y+y/2),e.y+=y+o},x=S.textAlign(l);let E,C,R,M,D,I,L;for(n.textAlign=l,n.textBaseline="middle",n.font=p.string,e.x=Fu(this,x,i),n.fillStyle=i.bodyColor,it(this.beforeBody,w),b=u&&x!=="right"?l==="center"?f/2+g:f+2+g:0,M=0,I=a.length;M<I;++M){for(E=a[M],C=this.labelTextColors[M],n.fillStyle=C,it(E.before,w),R=E.lines,u&&R.length&&(this._drawColorBox(n,e,M,S,i),y=Math.max(p.lineHeight,d)),D=0,L=R.length;D<L;++D)w(R[D]),y=p.lineHeight;it(E.after,w)}b=0,y=p.lineHeight,it(this.afterBody,w),e.y-=o}drawFooter(e,n,i){const a=this.footer,o=a.length;let l,u;if(o){const d=$r(i.rtl,this.x,this.width);for(e.x=Fu(this,i.footerAlign,i),e.y+=i.footerMarginTop,n.textAlign=d.textAlign(i.footerAlign),n.textBaseline="middle",l=yn(i.footerFont),n.fillStyle=i.footerColor,n.font=l.string,u=0;u<o;++u)n.fillText(a[u],d.x(e.x),e.y+l.lineHeight/2),e.y+=l.lineHeight+i.footerSpacing}}drawBackground(e,n,i,a){const{xAlign:o,yAlign:l}=this,{x:u,y:d}=e,{width:f,height:g}=i,{topLeft:p,topRight:y,bottomLeft:b,bottomRight:S}=kl(a.cornerRadius);n.fillStyle=a.backgroundColor,n.strokeStyle=a.borderColor,n.lineWidth=a.borderWidth,n.beginPath(),n.moveTo(u+p,d),l==="top"&&this.drawCaret(e,n,i,a),n.lineTo(u+f-y,d),n.quadraticCurveTo(u+f,d,u+f,d+y),l==="center"&&o==="right"&&this.drawCaret(e,n,i,a),n.lineTo(u+f,d+g-S),n.quadraticCurveTo(u+f,d+g,u+f-S,d+g),l==="bottom"&&this.drawCaret(e,n,i,a),n.lineTo(u+b,d+g),n.quadraticCurveTo(u,d+g,u,d+g-b),l==="center"&&o==="left"&&this.drawCaret(e,n,i,a),n.lineTo(u,d+p),n.quadraticCurveTo(u,d,u+p,d),n.closePath(),n.fill(),a.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,i=this.$animations,a=i&&i.x,o=i&&i.y;if(a||o){const l=vl[e.position].call(this,this._active,this._eventPosition);if(!l)return;const u=this._size=hS(this,e),d=Object.assign({},l,this._size),f=fS(n,e,d),g=gS(e,d,f,n);(a._to!==g.x||o._to!==g.y)&&(this.xAlign=f.xAlign,this.yAlign=f.yAlign,this.width=u.width,this.height=u.height,this.caretX=l.x,this.caretY=l.y,this._resolveAnimations().update(this,g))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(n);const a={width:this.width,height:this.height},o={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const l=ri(n.padding),u=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&u&&(e.save(),e.globalAlpha=i,this.drawBackground(o,e,a,n),Sx(e,n.textDirection),o.y+=l.top,this.drawTitle(o,e,n),this.drawBody(o,e,n),this.drawFooter(o,e,n),wx(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const i=this._active,a=e.map(({datasetIndex:u,index:d})=>{const f=this.chart.getDatasetMeta(u);if(!f)throw new Error("Cannot find a dataset at index "+u);return{datasetIndex:u,element:f.data[d],index:d}}),o=!od(i,a),l=this._positionChanged(a,n);(o||l)&&(this._active=a,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,i=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const a=this.options,o=this._active||[],l=this._getActiveElements(e,o,n,i),u=this._positionChanged(l,e),d=n||!od(l,o)||u;return d&&(this._active=l,(a.enabled||a.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),d}_getActiveElements(e,n,i,a){const o=this.options;if(e.type==="mouseout")return[];if(!a)return n.filter(u=>this.chart.data.datasets[u.datasetIndex]&&this.chart.getDatasetMeta(u.datasetIndex).controller.getParsed(u.index)!==void 0);const l=this.chart.getElementsAtEventForMode(e,o.mode,o,i);return o.reverse&&l.reverse(),l}_positionChanged(e,n){const{caretX:i,caretY:a,options:o}=this,l=vl[o.position].call(this,e,n);return l!==!1&&(i!==l.x||a!==l.y)}}var yI={id:"tooltip",_element:vS,positioners:vl,afterInit(t,e,n){n&&(t.tooltip=new vS({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Fx},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const _I=(t,e,n,i)=>(typeof e=="string"?(n=t.push(e)-1,i.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function bI(t,e,n,i){const a=t.indexOf(e);if(a===-1)return _I(t,e,n,i);const o=t.lastIndexOf(e);return a!==o?n:a}const SI=(t,e)=>t===null?null:En(Math.round(t),0,e);function yS(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class wI extends no{static id="category";static defaults={ticks:{callback:yS}};constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const i=this.getLabels();for(const{index:a,label:o}of n)i[a]===o&&i.splice(a,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(pt(e))return null;const i=this.getLabels();return n=isFinite(n)&&i[n]===e?n:bI(i,e,Ve(n,e),this._addedLabels),SI(n,i.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:i,max:a}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(i=0),n||(a=this.getLabels().length-1)),this.min=i,this.max=a}buildTicks(){const e=this.min,n=this.max,i=this.options.offset,a=[];let o=this.getLabels();o=e===0&&n===o.length-1?o:o.slice(e,n+1),this._valueRange=Math.max(o.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let l=e;l<=n;l++)a.push({value:l});return a}getLabelForValue(e){return yS.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function xI(t,e){const n=[],{bounds:a,step:o,min:l,max:u,precision:d,count:f,maxTicks:g,maxDigits:p,includeBounds:y}=t,b=o||1,S=g-1,{min:w,max:x}=e,E=!pt(l),C=!pt(u),R=!pt(f),M=(x-w)/(p+1);let D=w0((x-w)/S/b)*b,I,L,z,P;if(D<1e-14&&!E&&!C)return[{value:w},{value:x}];P=Math.ceil(x/D)-Math.floor(w/D),P>S&&(D=w0(P*D/S/b)*b),pt(d)||(I=Math.pow(10,d),D=Math.ceil(D*I)/I),a==="ticks"?(L=Math.floor(w/D)*D,z=Math.ceil(x/D)*D):(L=w,z=x),E&&C&&o&&KN((u-l)/o,D/1e3)?(P=Math.round(Math.min((u-l)/D,g)),D=(u-l)/P,L=l,z=u):R?(L=E?l:L,z=C?u:z,P=f-1,D=(z-L)/P):(P=(z-L)/D,Ol(P,Math.round(P),D/1e3)?P=Math.round(P):P=Math.ceil(P));const K=Math.max(x0(D),x0(L));I=Math.pow(10,pt(d)?K:d),L=Math.round(L*I)/I,z=Math.round(z*I)/I;let X=0;for(E&&(y&&L!==l?(n.push({value:l}),L<l&&X++,Ol(Math.round((L+X*D)*I)/I,l,_S(l,M,t))&&X++):L<l&&X++);X<P;++X){const H=Math.round((L+X*D)*I)/I;if(C&&H>u)break;n.push({value:H})}return C&&y&&z!==u?n.length&&Ol(n[n.length-1].value,u,_S(u,M,t))?n[n.length-1].value=u:n.push({value:u}):(!C||z===u)&&n.push({value:z}),n}function _S(t,e,{horizontal:n,minRotation:i}){const a=ms(i),o=(n?Math.sin(a):Math.cos(a))||.001,l=.75*e*(""+t).length;return Math.min(e/o,l)}class EI extends no{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return pt(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:i}=this.getUserBounds();let{min:a,max:o}=this;const l=d=>a=n?a:d,u=d=>o=i?o:d;if(e){const d=qr(a),f=qr(o);d<0&&f<0?u(0):d>0&&f>0&&l(0)}if(a===o){let d=o===0?1:Math.abs(o*.05);u(o+d),e||l(a-d)}this.min=a,this.max=o}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:i}=e,a;return i?(a=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,a>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${a} ticks. Limiting to 1000.`),a=1e3)):(a=this.computeTickLimit(),n=n||11),n&&(a=Math.min(n,a)),a}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let i=this.getTickLimit();i=Math.max(2,i);const a={maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},o=this._range||this,l=xI(a,o);return e.bounds==="ticks"&&XN(l,this,"value"),e.reverse?(l.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),l}configure(){const e=this.ticks;let n=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){const a=(i-n)/Math.max(e.length-1,1)/2;n-=a,i+=a}this._startValue=n,this._endValue=i,this._valueRange=i-n}getLabelForValue(e){return Gm(e,this.chart.options.locale,this.options.ticks.format)}}class TI extends EI{static id="linear";static defaults={ticks:{callback:gx.formatters.numeric}};determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=ai(e)?e:0,this.max=ai(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,i=ms(this.options.ticks.minRotation),a=(e?Math.sin(i):Math.cos(i))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,o.lineHeight/a))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}const Md={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},kn=Object.keys(Md);function bS(t,e){return t-e}function SS(t,e){if(pt(e))return null;const n=t._adapter,{parser:i,round:a,isoWeekday:o}=t._parseOpts;let l=e;return typeof i=="function"&&(l=i(l)),ai(l)||(l=typeof i=="string"?n.parse(l,i):n.parse(l)),l===null?null:(a&&(l=a==="week"&&(Hl(o)||o===!0)?n.startOf(l,"isoWeek",o):n.startOf(l,a)),+l)}function wS(t,e,n,i){const a=kn.length;for(let o=kn.indexOf(t);o<a-1;++o){const l=Md[kn[o]],u=l.steps?l.steps:Number.MAX_SAFE_INTEGER;if(l.common&&Math.ceil((n-e)/(u*l.size))<=i)return kn[o]}return kn[a-1]}function CI(t,e,n,i,a){for(let o=kn.length-1;o>=kn.indexOf(n);o--){const l=kn[o];if(Md[l].common&&t._adapter.diff(a,i,l)>=e-1)return l}return kn[n?kn.indexOf(n):0]}function RI(t){for(let e=kn.indexOf(t)+1,n=kn.length;e<n;++e)if(Md[kn[e]].common)return kn[e]}function xS(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:i,hi:a}=Hm(n,e),o=n[i]>=e?n[i]:n[a];t[o]=!0}}function AI(t,e,n,i){const a=t._adapter,o=+a.startOf(e[0].value,i),l=e[e.length-1].value;let u,d;for(u=o;u<=l;u=+a.add(u,1,i))d=n[u],d>=0&&(e[d].major=!0);return e}function ES(t,e,n){const i=[],a={},o=e.length;let l,u;for(l=0;l<o;++l)u=e[l],a[u]=l,i.push({value:u,major:!1});return o===0||!n?i:AI(t,i,a,n)}class TS extends no{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const i=e.time||(e.time={}),a=this._adapter=new D2._date(e.adapters.date);a.init(n),Al(i.displayFormats,a.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:SS(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,i=e.time.unit||"day";let{min:a,max:o,minDefined:l,maxDefined:u}=this.getUserBounds();function d(f){!l&&!isNaN(f.min)&&(a=Math.min(a,f.min)),!u&&!isNaN(f.max)&&(o=Math.max(o,f.max))}(!l||!u)&&(d(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&d(this.getMinMax(!1))),a=ai(a)&&!isNaN(a)?a:+n.startOf(Date.now(),i),o=ai(o)&&!isNaN(o)?o:+n.endOf(Date.now(),i)+1,this.min=Math.min(a,o-1),this.max=Math.max(a+1,o)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],i=e[e.length-1]),{min:n,max:i}}buildTicks(){const e=this.options,n=e.time,i=e.ticks,a=i.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&a.length&&(this.min=this._userMin||a[0],this.max=this._userMax||a[a.length-1]);const o=this.min,l=this.max,u=tj(a,o,l);return this._unit=n.unit||(i.autoSkip?wS(n.minUnit,this.min,this.max,this._getLabelCapacity(o)):CI(this,u.length,n.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:RI(this._unit),this.initOffsets(a),e.reverse&&u.reverse(),ES(this,u,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,i=0,a,o;this.options.offset&&e.length&&(a=this.getDecimalForValue(e[0]),e.length===1?n=1-a:n=(this.getDecimalForValue(e[1])-a)/2,o=this.getDecimalForValue(e[e.length-1]),e.length===1?i=o:i=(o-this.getDecimalForValue(e[e.length-2]))/2);const l=e.length<3?.5:.25;n=En(n,0,l),i=En(i,0,l),this._offsets={start:n,end:i,factor:1/(n+1+i)}}_generate(){const e=this._adapter,n=this.min,i=this.max,a=this.options,o=a.time,l=o.unit||wS(o.minUnit,n,i,this._getLabelCapacity(n)),u=Ve(a.ticks.stepSize,1),d=l==="week"?o.isoWeekday:!1,f=Hl(d)||d===!0,g={};let p=n,y,b;if(f&&(p=+e.startOf(p,"isoWeek",d)),p=+e.startOf(p,f?"day":l),e.diff(i,n,l)>1e5*u)throw new Error(n+" and "+i+" are too far apart with stepSize of "+u+" "+l);const S=a.ticks.source==="data"&&this.getDataTimestamps();for(y=p,b=0;y<i;y=+e.add(y,u,l),b++)xS(g,y,S);return(y===i||a.bounds==="ticks"||b===1)&&xS(g,y,S),Object.keys(g).sort(bS).map(w=>+w)}getLabelForValue(e){const n=this._adapter,i=this.options.time;return i.tooltipFormat?n.format(e,i.tooltipFormat):n.format(e,i.displayFormats.datetime)}format(e,n){const a=this.options.time.displayFormats,o=this._unit,l=n||a[o];return this._adapter.format(e,l)}_tickFormatFunction(e,n,i,a){const o=this.options,l=o.ticks.callback;if(l)return bt(l,[e,n,i],this);const u=o.time.displayFormats,d=this._unit,f=this._majorUnit,g=d&&u[d],p=f&&u[f],y=i[n],b=f&&p&&y&&y.major;return this._adapter.format(e,a||(b?p:g))}generateTickLabels(e){let n,i,a;for(n=0,i=e.length;n<i;++n)a=e[n],a.label=this._tickFormatFunction(a.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,i=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+i)*n.factor)}getValueForPixel(e){const n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+i*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,i=this.ctx.measureText(e).width,a=ms(this.isHorizontal()?n.maxRotation:n.minRotation),o=Math.cos(a),l=Math.sin(a),u=this._resolveTickFontOptions(0).size;return{w:i*o+u*l,h:i*l+u*o}}_getLabelCapacity(e){const n=this.options.time,i=n.displayFormats,a=i[n.unit]||i.millisecond,o=this._tickFormatFunction(e,0,ES(this,[e],this._majorUnit),a),l=this._getLabelSize(o),u=Math.floor(this.isHorizontal()?this.width/l.w:this.height/l.h)-1;return u>0?u:1}getDataTimestamps(){let e=this._cache.data||[],n,i;if(e.length)return e;const a=this.getMatchingVisibleMetas();if(this._normalized&&a.length)return this._cache.data=a[0].controller.getAllParsedValues(this);for(n=0,i=a.length;n<i;++n)e=e.concat(a[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,i;if(e.length)return e;const a=this.getLabels();for(n=0,i=a.length;n<i;++n)e.push(SS(this,a[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return ij(e.sort(bS))}}function zu(t,e,n){let i=0,a=t.length-1,o,l,u,d;n?(e>=t[i].pos&&e<=t[a].pos&&({lo:i,hi:a}=ja(t,"pos",e)),{pos:o,time:u}=t[i],{pos:l,time:d}=t[a]):(e>=t[i].time&&e<=t[a].time&&({lo:i,hi:a}=ja(t,"time",e)),{time:o,pos:u}=t[i],{time:l,pos:d}=t[a]);const f=l-o;return f?u+(d-u)*(e-o)/f:u}class nU extends TS{static id="timeseries";static defaults=TS.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=zu(n,this.min),this._tableRange=zu(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:i}=this,a=[],o=[];let l,u,d,f,g;for(l=0,u=e.length;l<u;++l)f=e[l],f>=n&&f<=i&&a.push(f);if(a.length<2)return[{time:n,pos:0},{time:i,pos:1}];for(l=0,u=a.length;l<u;++l)g=a[l+1],d=a[l-1],f=a[l],Math.round((g+d)/2)!==f&&o.push({time:f,pos:l/(u-1)});return o}_generate(){const e=this.min,n=this.max;let i=super.getDataTimestamps();return(!i.includes(e)||!i.length)&&i.splice(0,0,e),(!i.includes(n)||i.length===1)&&i.push(n),i.sort((a,o)=>a-o)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),i=this.getLabelTimestamps();return n.length&&i.length?e=this.normalize(n.concat(i)):e=n.length?n:i,e=this._cache.all=e,e}getDecimalForValue(e){return(zu(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return zu(this._table,i*this._tableRange+this._minPos,!0)}}const zx="label";function CS(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function OI(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function Bx(t,e){t.labels=e}function Hx(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:zx;const i=[];t.datasets=e.map(a=>{const o=t.datasets.find(l=>l[n]===a[n]);return!o||!a.data||i.includes(o)?{...a}:(i.push(o),Object.assign(o,a),o)})}function DI(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:zx;const n={labels:[],datasets:[]};return Bx(n,t.labels),Hx(n,t.datasets,e),n}function MI(t,e){const{height:n=150,width:i=300,redraw:a=!1,datasetIdKey:o,type:l,data:u,options:d,plugins:f=[],fallbackContent:g,updateMode:p,...y}=t,b=A.useRef(null),S=A.useRef(null),w=()=>{b.current&&(S.current=new Dd(b.current,{type:l,data:DI(u,o),options:d&&{...d},plugins:f}),CS(e,S.current))},x=()=>{CS(e,null),S.current&&(S.current.destroy(),S.current=null)};return A.useEffect(()=>{!a&&S.current&&d&&OI(S.current,d)},[a,d]),A.useEffect(()=>{!a&&S.current&&Bx(S.current.config.data,u.labels)},[a,u.labels]),A.useEffect(()=>{!a&&S.current&&u.datasets&&Hx(S.current.config.data,u.datasets,o)},[a,u.datasets]),A.useEffect(()=>{S.current&&(a?(x(),setTimeout(w)):S.current.update(p))},[a,d,u.labels,u.datasets,p]),A.useEffect(()=>{S.current&&(x(),setTimeout(w))},[l]),A.useEffect(()=>(w(),()=>x()),[]),Ie.createElement("canvas",{ref:b,role:"img",height:n,width:i,...y},g)}const kI=A.forwardRef(MI);function $x(t,e){return Dd.register(e),A.forwardRef((n,i)=>Ie.createElement(kI,{...n,ref:i,type:t}))}const NI=$x("line",A2),jI=$x("pie",O2);Dd.register(wI,TI,nI,tI,uI,yI,lI,GL);function LI(){const{machines:t}=sn(),{odpOrders:e}=Je(),{isLoading:n,isInitialized:i}=Se(),{init:a,cleanup:o}=zi();A.useEffect(()=>(i||a(),()=>{o()}),[a,i,o]);const l=A.useMemo(()=>{if(n)return{};const g=t.reduce((H,ee)=>{const se=ee.work_center||"Unknown";return H[se]||(H[se]={[Ui.ACTIVE]:0,[Ui.INACTIVE]:0,[Ui.MAINTENANCE]:0}),H[se][ee.status]=(H[se][ee.status]||0)+1,H},{}),p=new Date,y=new Date(p);y.setDate(p.getDate()-p.getDay()),y.setHours(0,0,0,0);const b=e.filter(H=>H.completion_date?new Date(H.completion_date)>=y:!1).length,S=e.filter(H=>H.status==="IN PROGRESS"||H.status==="SCHEDULED").length,w=e.filter(H=>H.delivery_date?new Date(H.delivery_date)<p&&(H.quantity_completed||0)<(H.quantity||0):!1).length,x=t.filter(H=>H.status===Ui.ACTIVE).length,E={},C=new Date(p);C.setDate(p.getDate()-30),e.forEach(H=>{if(H.scheduled_start_time){const ee=new Date(H.scheduled_start_time);if(ee>=C){const se=ee.toISOString().split("T")[0];E[se]=(E[se]||0)+1}}});const R=e.filter(H=>H.scheduled_start_time?new Date(H.scheduled_start_time)>=y:!1),M=R.filter(H=>H.cost&&H.cost>0).map(H=>H.cost),D=R.filter(H=>H.duration&&H.duration>0).map(H=>H.duration),I=M.length>0?M.reduce((H,ee)=>H+ee,0)/M.length:0,L=D.length>0?D.reduce((H,ee)=>H+ee,0)/D.length:0,z={},P={},K=["STAMPA","CONFEZIONAMENTO"],X=["ZANICA","BUSTO_GAROLFO"];return K.forEach(H=>{const ee=H.toLowerCase();z[ee]={},P[ee]={},X.forEach(se=>{const te=se==="BUSTO_GAROLFO"?"busto_garolfo":se.toLowerCase(),U=e.filter(Z=>!Z.work_center||!Z.department?!1:Z.work_center===se&&Z.department===H),Y=U.filter(Z=>Z.cost&&Z.cost>0).map(Z=>Z.cost),le=Y.length>0?Y.reduce((Z,re)=>Z+re,0)/Y.length:0,ue=U.filter(Z=>Z.duration&&Z.duration>0).map(Z=>Z.duration),k=ue.length>0?ue.reduce((Z,re)=>Z+re,0)/ue.length:0;z[ee][te]=le,P[ee][te]=k})}),{machinesByWorkCenter:g,completedThisWeek:b,tasksInWip:S,delayedTasks:w,activeMachines:x,totalMachines:t.length,totalOrders:e.length,tasksPerDay:E,avgWeeklyCost:I,avgWeeklyDuration:L,weeklyOrdersCount:R.length,costMatrix:z,durationMatrix:P}},[t,e,n]),u=A.useMemo(()=>{if(!l.tasksPerDay)return null;const p=Object.keys(l.tasksPerDay).sort().slice(-7);return{labels:p.map(y=>{const b=new Date(y);return gD(b)}),datasets:[{label:"Lavori Iniziati",data:p.map(y=>l.tasksPerDay[y]||0),borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.4}]}},[l.tasksPerDay]),d={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},title:{display:!1}},scales:{y:{beginAtZero:!0,ticks:{stepSize:1}}}},f={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{padding:20,usePointStyle:!0}}}};return n?_.jsx("div",{className:"content-section",children:_.jsx("div",{className:"loading",children:"Caricamento dashboard..."})}):_.jsxs("div",{className:"content-section",children:[_.jsx(bs,{title:"Dashboard Produzione"}),_.jsxs("div",{className:"metrics-grid",children:[_.jsxs("div",{className:"metric-card",children:[_.jsx("h3",{children:"Macchine Totali"}),_.jsx("div",{className:"metric-value",children:l.totalMachines}),_.jsxs("div",{className:"metric-subtitle",children:["Attive: ",l.activeMachines]})]}),_.jsxs("div",{className:"metric-card",children:[_.jsx("h3",{children:"Ordini Totali"}),_.jsx("div",{className:"metric-value",children:l.totalOrders})]}),_.jsxs("div",{className:"metric-card",children:[_.jsx("h3",{children:"Completati Questa Settimana"}),_.jsx("div",{className:"metric-value",children:l.completedThisWeek})]}),_.jsxs("div",{className:"metric-card",children:[_.jsx("h3",{children:"Lavori in Corso"}),_.jsx("div",{className:"metric-value",children:l.tasksInWip})]}),_.jsxs("div",{className:"metric-card",children:[_.jsx("h3",{children:"Lavori Ritardati"}),_.jsx("div",{className:"metric-value delayed",children:l.delayedTasks})]})]}),_.jsxs("div",{className:"weekly-metrics-row",children:[_.jsxs("div",{className:"weekly-metric-card",children:[_.jsx("h3",{children:"Ordini Settimanali"}),_.jsx("div",{className:"metric-value",children:l.weeklyOrdersCount}),_.jsx("div",{className:"metric-subtitle",children:"Questa Settimana"})]}),_.jsxs("div",{className:"weekly-metric-card",children:[_.jsx("h3",{children:"Costo Medio"}),_.jsxs("div",{className:"metric-value",children:["",l.avgWeeklyCost.toFixed(2)]}),_.jsx("div",{className:"metric-subtitle",children:"Per Lavoro Questa Settimana"})]}),_.jsxs("div",{className:"metric-card",children:[_.jsx("h3",{children:"Durata Media"}),_.jsxs("div",{className:"metric-value",children:[l.avgWeeklyDuration.toFixed(1),"h"]}),_.jsx("div",{className:"metric-subtitle",children:"Per Lavoro Questa Settimana"})]})]}),_.jsxs("div",{className:"matrix-tables-container",children:[_.jsxs("div",{className:"matrix-table-section",children:[_.jsx("h3",{children:"Costo Medio per Centro di Lavoro e Reparto"}),_.jsx("div",{className:"matrix-table",children:_.jsxs("table",{children:[_.jsx("thead",{children:_.jsxs("tr",{children:[_.jsx("th",{}),_.jsx("th",{children:"ZANICA"}),_.jsx("th",{children:"BUSTO GAROLFO"})]})}),_.jsxs("tbody",{children:[_.jsxs("tr",{children:[_.jsx("td",{className:"department-label",children:"STAMPA"}),_.jsxs("td",{className:"metric-cell",children:["",l.costMatrix?.stampa?.zanica?.toFixed(2)||"0.00"]}),_.jsxs("td",{className:"metric-cell",children:["",l.costMatrix?.stampa?.busto_garolfo?.toFixed(2)||"0.00"]})]}),_.jsxs("tr",{children:[_.jsx("td",{className:"department-label",children:"CONFEZIONAMENTO"}),_.jsxs("td",{className:"metric-cell",children:["",l.costMatrix?.confezionamento?.zanica?.toFixed(2)||"0.00"]}),_.jsxs("td",{className:"metric-cell",children:["",l.costMatrix?.confezionamento?.busto_garolfo?.toFixed(2)||"0.00"]})]})]})]})})]}),_.jsxs("div",{className:"matrix-table-section",children:[_.jsx("h3",{children:"Durata Media per Centro di Lavoro e Reparto"}),_.jsx("div",{className:"matrix-table",children:_.jsxs("table",{children:[_.jsx("thead",{children:_.jsxs("tr",{children:[_.jsx("th",{}),_.jsx("th",{children:"ZANICA"}),_.jsx("th",{children:"BUSTO GAROLFO"})]})}),_.jsxs("tbody",{children:[_.jsxs("tr",{children:[_.jsx("td",{className:"department-label",children:"STAMPA"}),_.jsxs("td",{className:"metric-cell",children:[l.durationMatrix?.stampa?.zanica?.toFixed(1)||"0.0","h"]}),_.jsxs("td",{className:"metric-cell",children:[l.durationMatrix?.stampa?.busto_garolfo?.toFixed(1)||"0.0","h"]})]}),_.jsxs("tr",{children:[_.jsx("td",{className:"department-label",children:"CONFEZIONAMENTO"}),_.jsxs("td",{className:"metric-cell",children:[l.durationMatrix?.confezionamento?.zanica?.toFixed(1)||"0.0","h"]}),_.jsxs("td",{className:"metric-cell",children:[l.durationMatrix?.confezionamento?.busto_garolfo?.toFixed(1)||"0.0","h"]})]})]})]})})]})]}),_.jsxs("div",{className:"charts-container",children:[_.jsxs("div",{className:"chart-section line-chart-section",children:[_.jsx("h3",{children:"Lavori Iniziati per Giorno (Ultimi 7 Giorni)"}),_.jsx("div",{className:"chart-container",children:u&&_.jsx(NI,{data:u,options:d,height:300})})]}),_.jsxs("div",{className:"chart-section pie-charts-section",children:[_.jsx("h3",{children:"Macchine per Centro di Lavoro e Stato"}),_.jsx("div",{className:"pie-charts-grid",children:Object.entries(l.machinesByWorkCenter||{}).map(([g,p])=>{const y={labels:Object.keys(p).map(b=>b.charAt(0).toUpperCase()+b.slice(1).toLowerCase()),datasets:[{data:Object.values(p),backgroundColor:["rgba(34, 197, 94, 0.8)","rgba(239, 68, 68, 0.8)","rgba(245, 158, 11, 0.8)"],borderColor:["rgba(34, 197, 94, 1)","rgba(239, 68, 68, 1)","rgba(245, 158, 11, 1)"],borderWidth:2}]};return _.jsxs("div",{className:"pie-chart-item",children:[_.jsx("h4",{children:g}),_.jsx("div",{className:"pie-chart-container",children:_.jsx(jI,{data:y,options:f,height:200})}),_.jsx("div",{className:"pie-chart-legend",children:Object.entries(p).map(([b,S])=>_.jsxs("div",{className:"legend-item",children:[_.jsx("span",{className:"legend-color",style:{backgroundColor:b==="ACTIVE"?"rgba(34, 197, 94, 0.8)":b==="INACTIVE"?"rgba(239, 68, 68, 0.8)":"rgba(245, 158, 11, 0.8)"}}),_.jsxs("span",{className:"legend-label",children:[b,": ",S]})]},b))})]},g)})})]})]})]})}function II(){const[t,e]=A.useState({email:"",password:"",workCenter:""}),[n,i]=A.useState(!1),[a,o]=A.useState({}),{signIn:l,error:u}=Xl(),{setSelectedWorkCenter:d}=Se(),f=na(),{handleAsync:g}=wi("LoginPage"),p=w=>{const{name:x,value:E}=w.target;e(C=>({...C,[x]:E})),a[x]&&o(C=>({...C,[x]:""}))},y=()=>{const w={};return t.email.trim()?/\S+@\S+\.\S+/.test(t.email)||(w.email="Inserisci un indirizzo email valido"):w.email="Email richiesta",t.password?t.password.length<6&&(w.password="La password deve essere di almeno 6 caratteri"):w.password="Password richiesta",t.workCenter||(w.workCenter="Centro di lavoro richiesto"),o(w),Object.keys(w).length===0},b=async w=>{w.preventDefault(),y()&&(i(!0),await g(async()=>{(await l(t.email,t.password)).success&&(d(t.workCenter),f("/",{replace:!0}))},{context:"Login",fallbackMessage:"Accesso fallito. Riprova.",onFinally:()=>i(!1)}))},S=w=>a[w]?_.jsx("span",{className:"error-message",style:{color:"red",fontSize:"12px",marginTop:"4px"},children:a[w]}):null;return _.jsx("div",{className:"auth-page",children:_.jsxs("div",{className:"auth-container",children:[_.jsxs("div",{className:"auth-header",children:[_.jsx("h1",{children:"Bentornato"}),_.jsx("p",{children:"Accedi al tuo account per continuare"})]}),_.jsxs("form",{onSubmit:b,className:"auth-form",children:[_.jsxs("div",{className:"form-group",children:[_.jsx("label",{htmlFor:"email",children:"Indirizzo Email"}),_.jsx("input",{type:"email",id:"email",name:"email",value:t.email,onChange:p,placeholder:"Inserisci la tua email",className:a.email?"error":"",disabled:n,autoComplete:"email"}),S("email")]}),_.jsxs("div",{className:"form-group",children:[_.jsx("label",{htmlFor:"password",children:"Password"}),_.jsx("input",{type:"password",id:"password",name:"password",value:t.password,onChange:p,placeholder:"Inserisci la tua password",className:a.password?"error":"",disabled:n,autoComplete:"current-password"}),S("password")]}),_.jsxs("div",{className:"form-group",children:[_.jsx("label",{htmlFor:"workCenter",children:"Centro di Lavoro *"}),_.jsxs("select",{id:"workCenter",name:"workCenter",value:t.workCenter,onChange:p,className:a.workCenter?"error":"",disabled:n,children:[_.jsx("option",{value:"",children:"Seleziona un centro di lavoro"}),_.jsx("option",{value:Me.ZANICA,children:Me.ZANICA}),_.jsx("option",{value:Me.BUSTO_GAROLFO,children:Me.BUSTO_GAROLFO}),_.jsx("option",{value:Me.BOTH,children:Me.BOTH})]}),S("workCenter")]}),u&&_.jsxs("div",{className:"auth-error",children:[_.jsx("span",{className:"error-icon",children:""}),u]}),_.jsx("button",{type:"submit",className:"btn btn-primary auth-submit",disabled:n,children:n?"Accesso in corso...":"Accedi"})]}),_.jsxs("div",{className:"auth-links",children:[_.jsx(xn,{to:"/forgot-password",className:"auth-link",children:"Password dimenticata?"}),_.jsx("div",{className:"auth-divider",children:_.jsx("span",{children:"Non hai un account?"})}),_.jsx(xn,{to:"/signup",className:"btn btn-secondary",children:"Crea Account"})]}),!1]})})}function UI(){const[t,e]=A.useState({email:"",password:"",confirmPassword:"",firstName:"",lastName:""}),[n,i]=A.useState(!1),[a,o]=A.useState({}),{signUp:l,error:u}=Xl(),d=na(),{handleAsync:f}=wi("SignupPage"),g=S=>{const{name:w,value:x}=S.target;e(E=>({...E,[w]:x})),a[w]&&o(E=>({...E,[w]:""}))},p=()=>{const S={};return t.email.trim()?/\S+@\S+\.\S+/.test(t.email)||(S.email="Inserisci un indirizzo email valido"):S.email="Email richiesta",t.password?t.password.length<6&&(S.password="La password deve essere di almeno 6 caratteri"):S.password="Password richiesta",t.confirmPassword?t.password!==t.confirmPassword&&(S.confirmPassword="Le password non coincidono"):S.confirmPassword="Conferma la tua password",t.firstName.trim()||(S.firstName="Nome richiesto"),t.lastName.trim()||(S.lastName="Cognome richiesto"),o(S),Object.keys(S).length===0},y=async S=>{S.preventDefault(),p()&&(i(!0),await f(async()=>{const w={first_name:t.firstName,last_name:t.lastName,full_name:`${t.firstName} ${t.lastName}`};(await l(t.email,t.password,w)).success&&d("/",{replace:!0})},{context:"Signup",fallbackMessage:"Creazione account fallita. Riprova.",onFinally:()=>i(!1)}))},b=S=>a[S]?_.jsx("span",{className:"error-message",style:{color:"red",fontSize:"12px",marginTop:"4px"},children:a[S]}):null;return _.jsx("div",{className:"auth-page",children:_.jsxs("div",{className:"auth-container",children:[_.jsxs("div",{className:"auth-header",children:[_.jsx("h1",{children:"Crea Account"}),_.jsx("p",{children:"Registrati per iniziare con il tuo account"})]}),_.jsxs("form",{onSubmit:y,className:"auth-form",children:[_.jsxs("div",{className:"form-row",children:[_.jsxs("div",{className:"form-group",children:[_.jsx("label",{htmlFor:"firstName",children:"Nome"}),_.jsx("input",{type:"text",id:"firstName",name:"firstName",value:t.firstName,onChange:g,placeholder:"Inserisci il tuo nome",className:a.firstName?"error":"",disabled:n,autoComplete:"given-name"}),b("firstName")]}),_.jsxs("div",{className:"form-group",children:[_.jsx("label",{htmlFor:"lastName",children:"Cognome"}),_.jsx("input",{type:"text",id:"lastName",name:"lastName",value:t.lastName,onChange:g,placeholder:"Inserisci il tuo cognome",className:a.lastName?"error":"",disabled:n,autoComplete:"family-name"}),b("lastName")]})]}),_.jsxs("div",{className:"form-group",children:[_.jsx("label",{htmlFor:"email",children:"Indirizzo Email"}),_.jsx("input",{type:"email",id:"email",name:"email",value:t.email,onChange:g,placeholder:"Inserisci la tua email",className:a.email?"error":"",disabled:n,autoComplete:"email"}),b("email")]}),_.jsxs("div",{className:"form-row",children:[_.jsxs("div",{className:"form-group",children:[_.jsx("label",{htmlFor:"password",children:"Password"}),_.jsx("input",{type:"password",id:"password",name:"password",value:t.password,onChange:g,placeholder:"Crea una password",className:a.password?"error":"",disabled:n,autoComplete:"new-password"}),b("password")]}),_.jsxs("div",{className:"form-group",children:[_.jsx("label",{htmlFor:"confirmPassword",children:"Conferma Password"}),_.jsx("input",{type:"password",id:"confirmPassword",name:"confirmPassword",value:t.confirmPassword,onChange:g,placeholder:"Conferma la tua password",className:a.confirmPassword?"error":"",disabled:n,autoComplete:"new-password"}),b("confirmPassword")]})]}),u&&_.jsxs("div",{className:"auth-error",children:[_.jsx("span",{className:"error-icon",children:""}),u]}),_.jsx("button",{type:"submit",className:"btn btn-primary auth-submit",disabled:n,children:n?"Creazione Account...":"Crea Account"})]}),_.jsxs("div",{className:"auth-links",children:[_.jsx("div",{className:"auth-divider",children:_.jsx("span",{children:"Hai gi un account?"})}),_.jsx(xn,{to:"/login",className:"btn btn-secondary",children:"Accedi"})]})]})})}function PI(){const[t,e]=A.useState(""),[n,i]=A.useState(!1),[a,o]=A.useState(!1),[l,u]=A.useState(""),{resetPassword:d}=Xl(),{handleAsync:f}=wi("ForgotPasswordPage"),g=async p=>{if(p.preventDefault(),!t.trim()){u("Inserisci il tuo indirizzo email");return}if(!/\S+@\S+\.\S+/.test(t)){u("Inserisci un indirizzo email valido");return}i(!0),u(""),await f(async()=>{const y=await d(t);y.success?o(!0):u(y.error||"Invio email di reset fallito")},{context:"Password Reset",fallbackMessage:"Invio email di reset fallito. Riprova.",onFinally:()=>i(!1)})};return a?_.jsx("div",{className:"auth-page",children:_.jsxs("div",{className:"auth-container",children:[_.jsxs("div",{className:"auth-header",children:[_.jsx("h1",{children:"Controlla la Tua Email"}),_.jsxs("p",{children:["Abbiamo inviato un link per il reset della password a ",t]})]}),_.jsxs("div",{className:"auth-success",children:[_.jsx("div",{className:"success-icon",children:""}),_.jsx("p",{children:"Se non vedi l'email, controlla la cartella spam."})]}),_.jsx("div",{className:"auth-links",children:_.jsx(xn,{to:"/login",className:"btn btn-primary",children:"Torna all'Accesso"})})]})}):_.jsx("div",{className:"auth-page",children:_.jsxs("div",{className:"auth-container",children:[_.jsxs("div",{className:"auth-header",children:[_.jsx("h1",{children:"Reset Password"}),_.jsx("p",{children:"Inserisci la tua email per ricevere un link per il reset della password"})]}),_.jsxs("form",{onSubmit:g,className:"auth-form",children:[_.jsxs("div",{className:"form-group",children:[_.jsx("label",{htmlFor:"email",children:"Indirizzo Email"}),_.jsx("input",{type:"email",id:"email",name:"email",value:t,onChange:p=>e(p.target.value),placeholder:"Inserisci la tua email",disabled:n,autoComplete:"email"})]}),l&&_.jsxs("div",{className:"auth-error",children:[_.jsx("span",{className:"error-icon",children:""}),l]}),_.jsx("button",{type:"submit",className:"btn btn-primary auth-submit",disabled:n,children:n?"Invio...":"Invia Link di Reset"})]}),_.jsx("div",{className:"auth-links",children:_.jsx(xn,{to:"/login",className:"auth-link",children:"Torna all'Accesso"})})]})})}class gd extends Ie.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null,errorId:null}}static generateErrorId(){return`ERR_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}static getDerivedStateFromError(e){return{hasError:!0,error:e,errorId:gd.generateErrorId()}}componentDidCatch(e,n){this.setState({errorInfo:n,errorId:this.state.errorId||gd.generateErrorId()}),gi(e,"ErrorBoundary"),this.logErrorToService(e,n)}logErrorToService(e,n){}handleRetry=()=>{this.setState({hasError:!1,error:null,errorInfo:null,errorId:null}),window.location.reload()};handleGoHome=()=>{window.location.href="/"};handleReportIssue=()=>{const e=encodeURIComponent(`App Error Report - ${this.state.errorId}`),n=encodeURIComponent(`
Error Report Details:
- Error ID: ${this.state.errorId}
- Error: ${this.state.error?.message||"Unknown error"}
- URL: ${window.location.href}
- User Agent: ${navigator.userAgent}
- Timestamp: ${new Date().toISOString()}

Please describe what you were doing when this error occurred:
    `);window.open(`mailto:support@company.com?subject=${e}&body=${n}`)};getErrorRecommendations=e=>{switch(cw(e)){case Xs.CRITICAL:return _.jsxs("div",{className:"error-boundary__recommendation critical",children:[_.jsx("strong",{children:"Critical Error:"})," This is a serious issue. Please contact support immediately."]});case Xs.HIGH:return _.jsxs("div",{className:"error-boundary__recommendation high",children:[_.jsx("strong",{children:"High Priority:"})," Please try refreshing the page or contact support if the problem persists."]});case Xs.MEDIUM:return _.jsxs("div",{className:"error-boundary__recommendation medium",children:[_.jsx("strong",{children:"Medium Priority:"})," Try refreshing the page or navigating to a different section."]});case Xs.LOW:return _.jsxs("div",{className:"error-boundary__recommendation low",children:[_.jsx("strong",{children:"Low Priority:"})," This error should resolve itself. Try continuing with your task."]});default:return null}};render(){return this.state.hasError?_.jsx("div",{className:"error-boundary",children:_.jsxs("div",{className:"error-boundary__container",children:[_.jsx("div",{className:"error-boundary__icon",children:""}),_.jsx("h1",{className:"error-boundary__title",children:"Oops! Something went wrong"}),_.jsx("p",{className:"error-boundary__message",children:"We're sorry, but something unexpected happened. Our team has been notified and is working to fix this issue."}),!1,_.jsxs("div",{className:"error-boundary__actions",children:[_.jsx("button",{onClick:this.handleRetry,className:"btn-primary",children:"Try Again"}),_.jsx("button",{onClick:this.handleGoHome,className:"btn-secondary",children:"Go to Home"}),_.jsx("button",{onClick:this.handleReportIssue,className:"error-boundary__button error-boundary__button--secondary",children:" Report Issue"})]}),this.state.error&&_.jsx("div",{className:"error-boundary__recommendations",children:this.getErrorRecommendations(this.state.error)}),_.jsxs("div",{className:"error-boundary__footer",children:[_.jsxs("p",{className:"error-boundary__error-id",children:["Error ID: ",_.jsx("code",{children:this.state.errorId})]}),_.jsx("p",{className:"error-boundary__help",children:"If this problem persists, please contact support with the Error ID above."})]})]})}):this.props.children}}const FI=()=>{const{user:t,loading:e}=Xl();return e?_.jsx("div",{className:"auth-loading",children:_.jsxs("div",{className:"auth-loading__container",children:[_.jsx("div",{className:"auth-loading__spinner"}),_.jsx("p",{children:"Checking authentication..."})]})}):t?_.jsx(FS,{}):_.jsx(PS,{to:"/login",replace:!0})},zI=({message:t,type:e="info",isVisible:n,onClose:i,autoClose:a=!0,duration:o=5e3})=>{if(A.useEffect(()=>{if(a&&n){const d=setTimeout(()=>{i()},o);return()=>clearTimeout(d)}},[n,a,o,i]),!n)return null;const l="alert",u={success:"alert--success",error:"alert--error",warning:"alert--warning",info:"alert--info"};return _.jsx("div",{className:`${l} ${u[e]||u.info}`,children:_.jsxs("div",{className:"alert__content",children:[_.jsx("span",{className:"alert__message",children:t}),_.jsx("button",{onClick:i,className:"alert__close","aria-label":"Close",children:""})]})})},RS=({isOpen:t,title:e,message:n,onConfirm:i,onCancel:a,confirmText:o="Elimina",cancelText:l="Annulla",type:u="danger",customButtons:d=null})=>{if(!t)return null;const f="confirm-dialog",g={danger:"confirm-dialog--danger",warning:"confirm-dialog--warning",info:"confirm-dialog--info"};return _.jsxs("div",{className:`${f} ${g[u]||g.danger}`,children:[_.jsx("div",{className:"confirm-dialog__overlay",onClick:a}),_.jsxs("div",{className:"confirm-dialog__content",children:[_.jsx("div",{className:"confirm-dialog__header",children:_.jsx("h3",{className:"confirm-dialog__title",children:e})}),_.jsx("div",{className:"confirm-dialog__body",children:_.jsx("p",{className:"confirm-dialog__message",children:n})}),_.jsx("div",{className:"confirm-dialog__footer",children:d?d.map((p,y)=>_.jsx("button",{onClick:p.onClick,className:`confirm-dialog__button confirm-dialog__button--${p.variant||"secondary"}`,children:p.text},y)):_.jsxs(_.Fragment,{children:[_.jsx("button",{onClick:a,className:"confirm-dialog__button confirm-dialog__button--secondary",children:l}),_.jsx("button",{onClick:i,className:"confirm-dialog__button confirm-dialog__button--primary",children:o})]})})]})]})},BI=()=>{const{alert:t,hideAlert:e,confirmDialog:n,hideConfirmDialog:i,conflictDialog:a,hideConflictDialog:o}=Se(),{cleanup:l}=zi(),{resolveConflictByShunting:u}=Pi();return A.useEffect(()=>()=>{l()},[l]),_.jsxs("div",{className:"main-content",children:[_.jsx(kD,{}),_.jsx("div",{className:"page-container",children:_.jsx("main",{children:_.jsx(FS,{})})}),_.jsx(zI,{message:t.message,type:t.type,isVisible:t.isVisible,onClose:e}),_.jsx(RS,{isOpen:n.isOpen,title:n.title,message:n.message,onConfirm:()=>{n.onConfirm?.(),i()},onCancel:i,type:n.type}),_.jsx(RS,{isOpen:a.isOpen,title:"Risoluzione Conflitto",message:a.details?`Il lavoro "${a.details.draggedTask?.odp_number}" si sovrappone con "${a.details.conflictingTask?.odp_number}". Come vuoi procedere?`:"",type:"warning",customButtons:[{text:"Annulla",variant:"secondary",onClick:o},{text:"Sposta a Sinistra ",variant:"primary",onClick:async()=>{if(a.details){const d=await u(a.details,"left");d.error&&Se.getState().showAlert(d.error,"error")}}},{text:"Sposta a Destra ",variant:"primary",onClick:async()=>{if(a.details){const d=await u(a.details,"right");d.error&&Se.getState().showAlert(d.error,"error")}}}]})]})};function HI(){return _.jsx(gd,{children:_.jsxs(eR,{children:[_.jsx($t,{path:"/login",element:_.jsx(II,{})}),_.jsx($t,{path:"/signup",element:_.jsx(UI,{})}),_.jsx($t,{path:"/forgot-password",element:_.jsx(PI,{})}),_.jsx($t,{path:"/",element:_.jsx(FI,{}),children:_.jsxs($t,{element:_.jsx(BI,{}),children:[_.jsx($t,{index:!0,element:_.jsx(LI,{})}),_.jsx($t,{path:"machinery",element:_.jsx(GM,{})}),_.jsx($t,{path:"machinery/add",element:_.jsx(Zb,{})}),_.jsx($t,{path:"machinery/:id/edit",element:_.jsx(Zb,{})}),_.jsx($t,{path:"machinery/:machineId/calendar",element:_.jsx(x1,{})}),_.jsx($t,{path:"phases",element:_.jsx(E1,{})}),_.jsx($t,{path:"phases/add",element:_.jsx(e0,{})}),_.jsx($t,{path:"phases/:id/edit",element:_.jsx(e0,{})}),_.jsx($t,{path:"backlog",element:_.jsx(A1,{})}),_.jsx($t,{path:"backlog/add",element:_.jsx(t0,{})}),_.jsx($t,{path:"backlog/:id/edit",element:_.jsx(t0,{})}),_.jsx($t,{path:"scheduler",element:_.jsx(mN,{})})]})}),_.jsx($t,{path:"*",element:_.jsx(PS,{to:"/",replace:!0})})]})})}const $I="/";lC.createRoot(document.getElementById("root")).render(_.jsx(Ie.StrictMode,{children:_.jsx(xR,{basename:$I,children:_.jsx(zO,{children:_.jsx(HI,{})})})}));export{Ie as R,Je as a,eU as b,wi as c,na as d,JI as e,si as f,Pi as g,_m as h,KI as i,_ as j,XI as k,QI as l,ZI as m,A as r,qt as t,Se as u};
