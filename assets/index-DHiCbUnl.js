(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(a){if(a.ep)return;a.ep=!0;const o=n(a);fetch(a.href,o)}})();function dm(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function gO(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function i(){var a=!1;try{a=this instanceof i}catch{}return a?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var a=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(n,i,a.get?a:{enumerable:!0,get:function(){return t[i]}})}),n}var Kf={exports:{}},il={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gb;function mO(){if(Gb)return il;Gb=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,a,o){var l=null;if(o!==void 0&&(l=""+o),a.key!==void 0&&(l=""+a.key),"key"in a){o={};for(var u in a)u!=="key"&&(o[u]=a[u])}else o=a;return a=o.ref,{$$typeof:t,type:i,key:l,ref:a!==void 0?a:null,props:o}}return il.Fragment=e,il.jsx=n,il.jsxs=n,il}var Yb;function pO(){return Yb||(Yb=1,Kf.exports=mO()),Kf.exports}var y=pO(),Xf={exports:{}},ke={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wb;function vO(){if(Wb)return ke;Wb=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),p=Symbol.iterator;function b(N){return N===null||typeof N!="object"?null:(N=p&&N[p]||N["@@iterator"],typeof N=="function"?N:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,S={};function x(N,Z,ae){this.props=N,this.context=Z,this.refs=S,this.updater=ae||_}x.prototype.isReactComponent={},x.prototype.setState=function(N,Z){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,Z,"setState")},x.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function C(){}C.prototype=x.prototype;function O(N,Z,ae){this.props=N,this.context=Z,this.refs=S,this.updater=ae||_}var A=O.prototype=new C;A.constructor=O,w(A,x.prototype),A.isPureReactComponent=!0;var M=Array.isArray,D={H:null,A:null,T:null,S:null,V:null},V=Object.prototype.hasOwnProperty;function F(N,Z,ae,re,me,be){return ae=be.ref,{$$typeof:t,type:N,key:Z,ref:ae!==void 0?ae:null,props:be}}function I(N,Z){return F(N.type,Z,void 0,void 0,void 0,N.props)}function W(N){return typeof N=="object"&&N!==null&&N.$$typeof===t}function X(N){var Z={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(ae){return Z[ae]})}var Q=/\/+/g;function H(N,Z){return typeof N=="object"&&N!==null&&N.key!=null?X(""+N.key):Z.toString(36)}function ie(){}function se(N){switch(N.status){case"fulfilled":return N.value;case"rejected":throw N.reason;default:switch(typeof N.status=="string"?N.then(ie,ie):(N.status="pending",N.then(function(Z){N.status==="pending"&&(N.status="fulfilled",N.value=Z)},function(Z){N.status==="pending"&&(N.status="rejected",N.reason=Z)})),N.status){case"fulfilled":return N.value;case"rejected":throw N.reason}}throw N}function ue(N,Z,ae,re,me){var be=typeof N;(be==="undefined"||be==="boolean")&&(N=null);var q=!1;if(N===null)q=!0;else switch(be){case"bigint":case"string":case"number":q=!0;break;case"object":switch(N.$$typeof){case t:case e:q=!0;break;case g:return q=N._init,ue(q(N._payload),Z,ae,re,me)}}if(q)return me=me(N),q=re===""?"."+H(N,0):re,M(me)?(ae="",q!=null&&(ae=q.replace(Q,"$&/")+"/"),ue(me,Z,ae,"",function(Ne){return Ne})):me!=null&&(W(me)&&(me=I(me,ae+(me.key==null||N&&N.key===me.key?"":(""+me.key).replace(Q,"$&/")+"/")+q)),Z.push(me)),1;q=0;var oe=re===""?".":re+":";if(M(N))for(var fe=0;fe<N.length;fe++)re=N[fe],be=oe+H(re,fe),q+=ue(re,Z,ae,be,me);else if(fe=b(N),typeof fe=="function")for(N=fe.call(N),fe=0;!(re=N.next()).done;)re=re.value,be=oe+H(re,fe++),q+=ue(re,Z,ae,be,me);else if(be==="object"){if(typeof N.then=="function")return ue(se(N),Z,ae,re,me);throw Z=String(N),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return q}function P(N,Z,ae){if(N==null)return N;var re=[],me=0;return ue(N,re,"","",function(be){return Z.call(ae,be,me++)}),re}function K(N){if(N._status===-1){var Z=N._result;Z=Z(),Z.then(function(ae){(N._status===0||N._status===-1)&&(N._status=1,N._result=ae)},function(ae){(N._status===0||N._status===-1)&&(N._status=2,N._result=ae)}),N._status===-1&&(N._status=0,N._result=Z)}if(N._status===1)return N._result.default;throw N._result}var le=typeof reportError=="function"?reportError:function(N){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof N=="object"&&N!==null&&typeof N.message=="string"?String(N.message):String(N),error:N});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",N);return}console.error(N)};function de(){}return ke.Children={map:P,forEach:function(N,Z,ae){P(N,function(){Z.apply(this,arguments)},ae)},count:function(N){var Z=0;return P(N,function(){Z++}),Z},toArray:function(N){return P(N,function(Z){return Z})||[]},only:function(N){if(!W(N))throw Error("React.Children.only expected to receive a single React element child.");return N}},ke.Component=x,ke.Fragment=n,ke.Profiler=a,ke.PureComponent=O,ke.StrictMode=i,ke.Suspense=d,ke.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,ke.__COMPILER_RUNTIME={__proto__:null,c:function(N){return D.H.useMemoCache(N)}},ke.cache=function(N){return function(){return N.apply(null,arguments)}},ke.cloneElement=function(N,Z,ae){if(N==null)throw Error("The argument must be a React element, but you passed "+N+".");var re=w({},N.props),me=N.key,be=void 0;if(Z!=null)for(q in Z.ref!==void 0&&(be=void 0),Z.key!==void 0&&(me=""+Z.key),Z)!V.call(Z,q)||q==="key"||q==="__self"||q==="__source"||q==="ref"&&Z.ref===void 0||(re[q]=Z[q]);var q=arguments.length-2;if(q===1)re.children=ae;else if(1<q){for(var oe=Array(q),fe=0;fe<q;fe++)oe[fe]=arguments[fe+2];re.children=oe}return F(N.type,me,void 0,void 0,be,re)},ke.createContext=function(N){return N={$$typeof:l,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null},N.Provider=N,N.Consumer={$$typeof:o,_context:N},N},ke.createElement=function(N,Z,ae){var re,me={},be=null;if(Z!=null)for(re in Z.key!==void 0&&(be=""+Z.key),Z)V.call(Z,re)&&re!=="key"&&re!=="__self"&&re!=="__source"&&(me[re]=Z[re]);var q=arguments.length-2;if(q===1)me.children=ae;else if(1<q){for(var oe=Array(q),fe=0;fe<q;fe++)oe[fe]=arguments[fe+2];me.children=oe}if(N&&N.defaultProps)for(re in q=N.defaultProps,q)me[re]===void 0&&(me[re]=q[re]);return F(N,be,void 0,void 0,null,me)},ke.createRef=function(){return{current:null}},ke.forwardRef=function(N){return{$$typeof:u,render:N}},ke.isValidElement=W,ke.lazy=function(N){return{$$typeof:g,_payload:{_status:-1,_result:N},_init:K}},ke.memo=function(N,Z){return{$$typeof:f,type:N,compare:Z===void 0?null:Z}},ke.startTransition=function(N){var Z=D.T,ae={};D.T=ae;try{var re=N(),me=D.S;me!==null&&me(ae,re),typeof re=="object"&&re!==null&&typeof re.then=="function"&&re.then(de,le)}catch(be){le(be)}finally{D.T=Z}},ke.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},ke.use=function(N){return D.H.use(N)},ke.useActionState=function(N,Z,ae){return D.H.useActionState(N,Z,ae)},ke.useCallback=function(N,Z){return D.H.useCallback(N,Z)},ke.useContext=function(N){return D.H.useContext(N)},ke.useDebugValue=function(){},ke.useDeferredValue=function(N,Z){return D.H.useDeferredValue(N,Z)},ke.useEffect=function(N,Z,ae){var re=D.H;if(typeof ae=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return re.useEffect(N,Z)},ke.useId=function(){return D.H.useId()},ke.useImperativeHandle=function(N,Z,ae){return D.H.useImperativeHandle(N,Z,ae)},ke.useInsertionEffect=function(N,Z){return D.H.useInsertionEffect(N,Z)},ke.useLayoutEffect=function(N,Z){return D.H.useLayoutEffect(N,Z)},ke.useMemo=function(N,Z){return D.H.useMemo(N,Z)},ke.useOptimistic=function(N,Z){return D.H.useOptimistic(N,Z)},ke.useReducer=function(N,Z,ae){return D.H.useReducer(N,Z,ae)},ke.useRef=function(N){return D.H.useRef(N)},ke.useState=function(N){return D.H.useState(N)},ke.useSyncExternalStore=function(N,Z,ae){return D.H.useSyncExternalStore(N,Z,ae)},ke.useTransition=function(){return D.H.useTransition()},ke.version="19.1.1",ke}var Kb;function hm(){return Kb||(Kb=1,Xf.exports=vO()),Xf.exports}var R=hm();const Me=dm(R);var Qf={exports:{}},sl={},Zf={exports:{}},Jf={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xb;function yO(){return Xb||(Xb=1,(function(t){function e(P,K){var le=P.length;P.push(K);e:for(;0<le;){var de=le-1>>>1,N=P[de];if(0<a(N,K))P[de]=K,P[le]=N,le=de;else break e}}function n(P){return P.length===0?null:P[0]}function i(P){if(P.length===0)return null;var K=P[0],le=P.pop();if(le!==K){P[0]=le;e:for(var de=0,N=P.length,Z=N>>>1;de<Z;){var ae=2*(de+1)-1,re=P[ae],me=ae+1,be=P[me];if(0>a(re,le))me<N&&0>a(be,re)?(P[de]=be,P[me]=le,de=me):(P[de]=re,P[ae]=le,de=ae);else if(me<N&&0>a(be,le))P[de]=be,P[me]=le,de=me;else break e}}return K}function a(P,K){var le=P.sortIndex-K.sortIndex;return le!==0?le:P.id-K.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();t.unstable_now=function(){return l.now()-u}}var d=[],f=[],g=1,p=null,b=3,_=!1,w=!1,S=!1,x=!1,C=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;function M(P){for(var K=n(f);K!==null;){if(K.callback===null)i(f);else if(K.startTime<=P)i(f),K.sortIndex=K.expirationTime,e(d,K);else break;K=n(f)}}function D(P){if(S=!1,M(P),!w)if(n(d)!==null)w=!0,V||(V=!0,H());else{var K=n(f);K!==null&&ue(D,K.startTime-P)}}var V=!1,F=-1,I=5,W=-1;function X(){return x?!0:!(t.unstable_now()-W<I)}function Q(){if(x=!1,V){var P=t.unstable_now();W=P;var K=!0;try{e:{w=!1,S&&(S=!1,O(F),F=-1),_=!0;var le=b;try{t:{for(M(P),p=n(d);p!==null&&!(p.expirationTime>P&&X());){var de=p.callback;if(typeof de=="function"){p.callback=null,b=p.priorityLevel;var N=de(p.expirationTime<=P);if(P=t.unstable_now(),typeof N=="function"){p.callback=N,M(P),K=!0;break t}p===n(d)&&i(d),M(P)}else i(d);p=n(d)}if(p!==null)K=!0;else{var Z=n(f);Z!==null&&ue(D,Z.startTime-P),K=!1}}break e}finally{p=null,b=le,_=!1}K=void 0}}finally{K?H():V=!1}}}var H;if(typeof A=="function")H=function(){A(Q)};else if(typeof MessageChannel<"u"){var ie=new MessageChannel,se=ie.port2;ie.port1.onmessage=Q,H=function(){se.postMessage(null)}}else H=function(){C(Q,0)};function ue(P,K){F=C(function(){P(t.unstable_now())},K)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(P){P.callback=null},t.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<P?Math.floor(1e3/P):5},t.unstable_getCurrentPriorityLevel=function(){return b},t.unstable_next=function(P){switch(b){case 1:case 2:case 3:var K=3;break;default:K=b}var le=b;b=K;try{return P()}finally{b=le}},t.unstable_requestPaint=function(){x=!0},t.unstable_runWithPriority=function(P,K){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var le=b;b=P;try{return K()}finally{b=le}},t.unstable_scheduleCallback=function(P,K,le){var de=t.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?de+le:de):le=de,P){case 1:var N=-1;break;case 2:N=250;break;case 5:N=1073741823;break;case 4:N=1e4;break;default:N=5e3}return N=le+N,P={id:g++,callback:K,priorityLevel:P,startTime:le,expirationTime:N,sortIndex:-1},le>de?(P.sortIndex=le,e(f,P),n(d)===null&&P===n(f)&&(S?(O(F),F=-1):S=!0,ue(D,le-de))):(P.sortIndex=N,e(d,P),w||_||(w=!0,V||(V=!0,H()))),P},t.unstable_shouldYield=X,t.unstable_wrapCallback=function(P){var K=b;return function(){var le=b;b=K;try{return P.apply(this,arguments)}finally{b=le}}}})(Jf)),Jf}var Qb;function bO(){return Qb||(Qb=1,Zf.exports=yO()),Zf.exports}var eg={exports:{}},fn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zb;function _O(){if(Zb)return fn;Zb=1;var t=hm();function e(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)f+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");function o(d,f,g){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:p==null?null:""+p,children:d,containerInfo:f,implementation:g}}var l=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(d,f){if(d==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return fn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,fn.createPortal=function(d,f){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return o(d,f,null,g)},fn.flushSync=function(d){var f=l.T,g=i.p;try{if(l.T=null,i.p=2,d)return d()}finally{l.T=f,i.p=g,i.d.f()}},fn.preconnect=function(d,f){typeof d=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,i.d.C(d,f))},fn.prefetchDNS=function(d){typeof d=="string"&&i.d.D(d)},fn.preinit=function(d,f){if(typeof d=="string"&&f&&typeof f.as=="string"){var g=f.as,p=u(g,f.crossOrigin),b=typeof f.integrity=="string"?f.integrity:void 0,_=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;g==="style"?i.d.S(d,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:p,integrity:b,fetchPriority:_}):g==="script"&&i.d.X(d,{crossOrigin:p,integrity:b,fetchPriority:_,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},fn.preinitModule=function(d,f){if(typeof d=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var g=u(f.as,f.crossOrigin);i.d.M(d,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&i.d.M(d)},fn.preload=function(d,f){if(typeof d=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var g=f.as,p=u(g,f.crossOrigin);i.d.L(d,g,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},fn.preloadModule=function(d,f){if(typeof d=="string")if(f){var g=u(f.as,f.crossOrigin);i.d.m(d,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else i.d.m(d)},fn.requestFormReset=function(d){i.d.r(d)},fn.unstable_batchedUpdates=function(d,f){return d(f)},fn.useFormState=function(d,f,g){return l.H.useFormState(d,f,g)},fn.useFormStatus=function(){return l.H.useHostTransitionStatus()},fn.version="19.1.1",fn}var Jb;function Iw(){if(Jb)return eg.exports;Jb=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),eg.exports=_O(),eg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e_;function wO(){if(e_)return sl;e_=1;var t=bO(),e=hm(),n=Iw();function i(s){var r="https://react.dev/errors/"+s;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)r+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+s+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function o(s){var r=s,c=s;if(s.alternate)for(;r.return;)r=r.return;else{s=r;do r=s,(r.flags&4098)!==0&&(c=r.return),s=r.return;while(s)}return r.tag===3?c:null}function l(s){if(s.tag===13){var r=s.memoizedState;if(r===null&&(s=s.alternate,s!==null&&(r=s.memoizedState)),r!==null)return r.dehydrated}return null}function u(s){if(o(s)!==s)throw Error(i(188))}function d(s){var r=s.alternate;if(!r){if(r=o(s),r===null)throw Error(i(188));return r!==s?null:s}for(var c=s,h=r;;){var m=c.return;if(m===null)break;var v=m.alternate;if(v===null){if(h=m.return,h!==null){c=h;continue}break}if(m.child===v.child){for(v=m.child;v;){if(v===c)return u(m),s;if(v===h)return u(m),r;v=v.sibling}throw Error(i(188))}if(c.return!==h.return)c=m,h=v;else{for(var E=!1,T=m.child;T;){if(T===c){E=!0,c=m,h=v;break}if(T===h){E=!0,h=m,c=v;break}T=T.sibling}if(!E){for(T=v.child;T;){if(T===c){E=!0,c=v,h=m;break}if(T===h){E=!0,h=v,c=m;break}T=T.sibling}if(!E)throw Error(i(189))}}if(c.alternate!==h)throw Error(i(190))}if(c.tag!==3)throw Error(i(188));return c.stateNode.current===c?s:r}function f(s){var r=s.tag;if(r===5||r===26||r===27||r===6)return s;for(s=s.child;s!==null;){if(r=f(s),r!==null)return r;s=s.sibling}return null}var g=Object.assign,p=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),O=Symbol.for("react.consumer"),A=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),V=Symbol.for("react.suspense_list"),F=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),W=Symbol.for("react.activity"),X=Symbol.for("react.memo_cache_sentinel"),Q=Symbol.iterator;function H(s){return s===null||typeof s!="object"?null:(s=Q&&s[Q]||s["@@iterator"],typeof s=="function"?s:null)}var ie=Symbol.for("react.client.reference");function se(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===ie?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case w:return"Fragment";case x:return"Profiler";case S:return"StrictMode";case D:return"Suspense";case V:return"SuspenseList";case W:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case _:return"Portal";case A:return(s.displayName||"Context")+".Provider";case O:return(s._context.displayName||"Context")+".Consumer";case M:var r=s.render;return s=s.displayName,s||(s=r.displayName||r.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case F:return r=s.displayName||null,r!==null?r:se(s.type)||"Memo";case I:r=s._payload,s=s._init;try{return se(s(r))}catch{}}return null}var ue=Array.isArray,P=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le={pending:!1,data:null,method:null,action:null},de=[],N=-1;function Z(s){return{current:s}}function ae(s){0>N||(s.current=de[N],de[N]=null,N--)}function re(s,r){N++,de[N]=s.current,s.current=r}var me=Z(null),be=Z(null),q=Z(null),oe=Z(null);function fe(s,r){switch(re(q,r),re(be,s),re(me,null),r.nodeType){case 9:case 11:s=(s=r.documentElement)&&(s=s.namespaceURI)?_b(s):0;break;default:if(s=r.tagName,r=r.namespaceURI)r=_b(r),s=wb(r,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}ae(me),re(me,s)}function Ne(){ae(me),ae(be),ae(q)}function Le(s){s.memoizedState!==null&&re(oe,s);var r=me.current,c=wb(r,s.type);r!==c&&(re(be,s),re(me,c))}function vt(s){be.current===s&&(ae(me),ae(be)),oe.current===s&&(ae(oe),Zo._currentValue=le)}var We=Object.prototype.hasOwnProperty,Ft=t.unstable_scheduleCallback,tt=t.unstable_cancelCallback,Rt=t.unstable_shouldYield,Ke=t.unstable_requestPaint,At=t.unstable_now,li=t.unstable_getCurrentPriorityLevel,Nn=t.unstable_ImmediatePriority,j=t.unstable_UserBlockingPriority,B=t.unstable_NormalPriority,J=t.unstable_LowPriority,ge=t.unstable_IdlePriority,he=t.log,ce=t.unstable_setDisableYieldValue,ve=null,Se=null;function Te(s){if(typeof he=="function"&&ce(s),Se&&typeof Se.setStrictMode=="function")try{Se.setStrictMode(ve,s)}catch{}}var $e=Math.clz32?Math.clz32:Va,Hi=Math.log,Ut=Math.LN2;function Va(s){return s>>>=0,s===0?32:31-(Hi(s)/Ut|0)|0}var Ei=256,Ci=4194304;function jn(s){var r=s&42;if(r!==0)return r;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Oi(s,r,c){var h=s.pendingLanes;if(h===0)return 0;var m=0,v=s.suspendedLanes,E=s.pingedLanes;s=s.warmLanes;var T=h&134217727;return T!==0?(h=T&~v,h!==0?m=jn(h):(E&=T,E!==0?m=jn(E):c||(c=T&~s,c!==0&&(m=jn(c))))):(T=h&~v,T!==0?m=jn(T):E!==0?m=jn(E):c||(c=h&~s,c!==0&&(m=jn(c)))),m===0?0:r!==0&&r!==m&&(r&v)===0&&(v=m&-m,c=r&-r,v>=c||v===32&&(c&4194048)!==0)?r:m}function Bi(s,r){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&r)===0}function oa(s,r){switch(s){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function hc(){var s=Ei;return Ei<<=1,(Ei&4194048)===0&&(Ei=256),s}function fc(){var s=Ci;return Ci<<=1,(Ci&62914560)===0&&(Ci=4194304),s}function lo(s){for(var r=[],c=0;31>c;c++)r.push(s);return r}function xt(s,r){s.pendingLanes|=r,r!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function bn(s,r,c,h,m,v){var E=s.pendingLanes;s.pendingLanes=c,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=c,s.entangledLanes&=c,s.errorRecoveryDisabledLanes&=c,s.shellSuspendCounter=0;var T=s.entanglements,k=s.expirationTimes,$=s.hiddenUpdates;for(c=E&~c;0<c;){var ee=31-$e(c),ne=1<<ee;T[ee]=0,k[ee]=-1;var G=$[ee];if(G!==null)for($[ee]=null,ee=0;ee<G.length;ee++){var Y=G[ee];Y!==null&&(Y.lane&=-536870913)}c&=~ne}h!==0&&cn(s,h,0),v!==0&&m===0&&s.tag!==0&&(s.suspendedLanes|=v&~(E&~r))}function cn(s,r,c){s.pendingLanes|=r,s.suspendedLanes&=~r;var h=31-$e(r);s.entangledLanes|=r,s.entanglements[h]=s.entanglements[h]|1073741824|c&4194090}function ci(s,r){var c=s.entangledLanes|=r;for(s=s.entanglements;c;){var h=31-$e(c),m=1<<h;m&r|s[h]&r&&(s[h]|=r),c&=~m}}function un(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function sn(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Ln(){var s=K.p;return s!==0?s:(s=window.event,s===void 0?32:Ub(s.type))}function Ss(s,r){var c=K.p;try{return K.p=s,r()}finally{K.p=c}}var ct=Math.random().toString(36).slice(2),ft="__reactFiber$"+ct,gt="__reactProps$"+ct,dn="__reactContainer$"+ct,Vi="__reactEvents$"+ct,la="__reactListeners$"+ct,Ri="__reactHandles$"+ct,xs="__reactResources$"+ct,$i="__reactMarker$"+ct;function Hd(s){delete s[ft],delete s[gt],delete s[Vi],delete s[la],delete s[Ri]}function $a(s){var r=s[ft];if(r)return r;for(var c=s.parentNode;c;){if(r=c[dn]||c[ft]){if(c=r.alternate,r.child!==null||c!==null&&c.child!==null)for(s=Cb(s);s!==null;){if(c=s[ft])return c;s=Cb(s)}return r}s=c,c=s.parentNode}return null}function qa(s){if(s=s[ft]||s[dn]){var r=s.tag;if(r===5||r===6||r===13||r===26||r===27||r===3)return s}return null}function co(s){var r=s.tag;if(r===5||r===26||r===27||r===6)return s.stateNode;throw Error(i(33))}function Ga(s){var r=s[xs];return r||(r=s[xs]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Kt(s){s[$i]=!0}var cp=new Set,up={};function ca(s,r){Ya(s,r),Ya(s+"Capture",r)}function Ya(s,r){for(up[s]=r,s=0;s<r.length;s++)cp.add(r[s])}var rE=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),dp={},hp={};function oE(s){return We.call(hp,s)?!0:We.call(dp,s)?!1:rE.test(s)?hp[s]=!0:(dp[s]=!0,!1)}function gc(s,r,c){if(oE(r))if(c===null)s.removeAttribute(r);else{switch(typeof c){case"undefined":case"function":case"symbol":s.removeAttribute(r);return;case"boolean":var h=r.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){s.removeAttribute(r);return}}s.setAttribute(r,""+c)}}function mc(s,r,c){if(c===null)s.removeAttribute(r);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(r);return}s.setAttribute(r,""+c)}}function qi(s,r,c,h){if(h===null)s.removeAttribute(c);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(c);return}s.setAttributeNS(r,c,""+h)}}var Bd,fp;function Wa(s){if(Bd===void 0)try{throw Error()}catch(c){var r=c.stack.trim().match(/\n( *(at )?)/);Bd=r&&r[1]||"",fp=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Bd+s+fp}var Vd=!1;function $d(s,r){if(!s||Vd)return"";Vd=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(r){var ne=function(){throw Error()};if(Object.defineProperty(ne.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ne,[])}catch(Y){var G=Y}Reflect.construct(s,[],ne)}else{try{ne.call()}catch(Y){G=Y}s.call(ne.prototype)}}else{try{throw Error()}catch(Y){G=Y}(ne=s())&&typeof ne.catch=="function"&&ne.catch(function(){})}}catch(Y){if(Y&&G&&typeof Y.stack=="string")return[Y.stack,G.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=h.DetermineComponentFrameRoot(),E=v[0],T=v[1];if(E&&T){var k=E.split(`
`),$=T.split(`
`);for(m=h=0;h<k.length&&!k[h].includes("DetermineComponentFrameRoot");)h++;for(;m<$.length&&!$[m].includes("DetermineComponentFrameRoot");)m++;if(h===k.length||m===$.length)for(h=k.length-1,m=$.length-1;1<=h&&0<=m&&k[h]!==$[m];)m--;for(;1<=h&&0<=m;h--,m--)if(k[h]!==$[m]){if(h!==1||m!==1)do if(h--,m--,0>m||k[h]!==$[m]){var ee=`
`+k[h].replace(" at new "," at ");return s.displayName&&ee.includes("<anonymous>")&&(ee=ee.replace("<anonymous>",s.displayName)),ee}while(1<=h&&0<=m);break}}}finally{Vd=!1,Error.prepareStackTrace=c}return(c=s?s.displayName||s.name:"")?Wa(c):""}function lE(s){switch(s.tag){case 26:case 27:case 5:return Wa(s.type);case 16:return Wa("Lazy");case 13:return Wa("Suspense");case 19:return Wa("SuspenseList");case 0:case 15:return $d(s.type,!1);case 11:return $d(s.type.render,!1);case 1:return $d(s.type,!0);case 31:return Wa("Activity");default:return""}}function gp(s){try{var r="";do r+=lE(s),s=s.return;while(s);return r}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}function qn(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function mp(s){var r=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function cE(s){var r=mp(s)?"checked":"value",c=Object.getOwnPropertyDescriptor(s.constructor.prototype,r),h=""+s[r];if(!s.hasOwnProperty(r)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var m=c.get,v=c.set;return Object.defineProperty(s,r,{configurable:!0,get:function(){return m.call(this)},set:function(E){h=""+E,v.call(this,E)}}),Object.defineProperty(s,r,{enumerable:c.enumerable}),{getValue:function(){return h},setValue:function(E){h=""+E},stopTracking:function(){s._valueTracker=null,delete s[r]}}}}function pc(s){s._valueTracker||(s._valueTracker=cE(s))}function pp(s){if(!s)return!1;var r=s._valueTracker;if(!r)return!0;var c=r.getValue(),h="";return s&&(h=mp(s)?s.checked?"true":"false":s.value),s=h,s!==c?(r.setValue(s),!0):!1}function vc(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var uE=/[\n"\\]/g;function Gn(s){return s.replace(uE,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function qd(s,r,c,h,m,v,E,T){s.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?s.type=E:s.removeAttribute("type"),r!=null?E==="number"?(r===0&&s.value===""||s.value!=r)&&(s.value=""+qn(r)):s.value!==""+qn(r)&&(s.value=""+qn(r)):E!=="submit"&&E!=="reset"||s.removeAttribute("value"),r!=null?Gd(s,E,qn(r)):c!=null?Gd(s,E,qn(c)):h!=null&&s.removeAttribute("value"),m==null&&v!=null&&(s.defaultChecked=!!v),m!=null&&(s.checked=m&&typeof m!="function"&&typeof m!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?s.name=""+qn(T):s.removeAttribute("name")}function vp(s,r,c,h,m,v,E,T){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(s.type=v),r!=null||c!=null){if(!(v!=="submit"&&v!=="reset"||r!=null))return;c=c!=null?""+qn(c):"",r=r!=null?""+qn(r):c,T||r===s.value||(s.value=r),s.defaultValue=r}h=h??m,h=typeof h!="function"&&typeof h!="symbol"&&!!h,s.checked=T?s.checked:!!h,s.defaultChecked=!!h,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(s.name=E)}function Gd(s,r,c){r==="number"&&vc(s.ownerDocument)===s||s.defaultValue===""+c||(s.defaultValue=""+c)}function Ka(s,r,c,h){if(s=s.options,r){r={};for(var m=0;m<c.length;m++)r["$"+c[m]]=!0;for(c=0;c<s.length;c++)m=r.hasOwnProperty("$"+s[c].value),s[c].selected!==m&&(s[c].selected=m),m&&h&&(s[c].defaultSelected=!0)}else{for(c=""+qn(c),r=null,m=0;m<s.length;m++){if(s[m].value===c){s[m].selected=!0,h&&(s[m].defaultSelected=!0);return}r!==null||s[m].disabled||(r=s[m])}r!==null&&(r.selected=!0)}}function yp(s,r,c){if(r!=null&&(r=""+qn(r),r!==s.value&&(s.value=r),c==null)){s.defaultValue!==r&&(s.defaultValue=r);return}s.defaultValue=c!=null?""+qn(c):""}function bp(s,r,c,h){if(r==null){if(h!=null){if(c!=null)throw Error(i(92));if(ue(h)){if(1<h.length)throw Error(i(93));h=h[0]}c=h}c==null&&(c=""),r=c}c=qn(r),s.defaultValue=c,h=s.textContent,h===c&&h!==""&&h!==null&&(s.value=h)}function Xa(s,r){if(r){var c=s.firstChild;if(c&&c===s.lastChild&&c.nodeType===3){c.nodeValue=r;return}}s.textContent=r}var dE=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function _p(s,r,c){var h=r.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?h?s.setProperty(r,""):r==="float"?s.cssFloat="":s[r]="":h?s.setProperty(r,c):typeof c!="number"||c===0||dE.has(r)?r==="float"?s.cssFloat=c:s[r]=(""+c).trim():s[r]=c+"px"}function wp(s,r,c){if(r!=null&&typeof r!="object")throw Error(i(62));if(s=s.style,c!=null){for(var h in c)!c.hasOwnProperty(h)||r!=null&&r.hasOwnProperty(h)||(h.indexOf("--")===0?s.setProperty(h,""):h==="float"?s.cssFloat="":s[h]="");for(var m in r)h=r[m],r.hasOwnProperty(m)&&c[m]!==h&&_p(s,m,h)}else for(var v in r)r.hasOwnProperty(v)&&_p(s,v,r[v])}function Yd(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var hE=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),fE=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function yc(s){return fE.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var Wd=null;function Kd(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Qa=null,Za=null;function Sp(s){var r=qa(s);if(r&&(s=r.stateNode)){var c=s[gt]||null;e:switch(s=r.stateNode,r.type){case"input":if(qd(s,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),r=c.name,c.type==="radio"&&r!=null){for(c=s;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+Gn(""+r)+'"][type="radio"]'),r=0;r<c.length;r++){var h=c[r];if(h!==s&&h.form===s.form){var m=h[gt]||null;if(!m)throw Error(i(90));qd(h,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(r=0;r<c.length;r++)h=c[r],h.form===s.form&&pp(h)}break e;case"textarea":yp(s,c.value,c.defaultValue);break e;case"select":r=c.value,r!=null&&Ka(s,!!c.multiple,r,!1)}}}var Xd=!1;function xp(s,r,c){if(Xd)return s(r,c);Xd=!0;try{var h=s(r);return h}finally{if(Xd=!1,(Qa!==null||Za!==null)&&(iu(),Qa&&(r=Qa,s=Za,Za=Qa=null,Sp(r),s)))for(r=0;r<s.length;r++)Sp(s[r])}}function uo(s,r){var c=s.stateNode;if(c===null)return null;var h=c[gt]||null;if(h===null)return null;c=h[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(s=s.type,h=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!h;break e;default:s=!1}if(s)return null;if(c&&typeof c!="function")throw Error(i(231,r,typeof c));return c}var Gi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Qd=!1;if(Gi)try{var ho={};Object.defineProperty(ho,"passive",{get:function(){Qd=!0}}),window.addEventListener("test",ho,ho),window.removeEventListener("test",ho,ho)}catch{Qd=!1}var Es=null,Zd=null,bc=null;function Ep(){if(bc)return bc;var s,r=Zd,c=r.length,h,m="value"in Es?Es.value:Es.textContent,v=m.length;for(s=0;s<c&&r[s]===m[s];s++);var E=c-s;for(h=1;h<=E&&r[c-h]===m[v-h];h++);return bc=m.slice(s,1<h?1-h:void 0)}function _c(s){var r=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&r===13&&(s=13)):s=r,s===10&&(s=13),32<=s||s===13?s:0}function wc(){return!0}function Cp(){return!1}function On(s){function r(c,h,m,v,E){this._reactName=c,this._targetInst=m,this.type=h,this.nativeEvent=v,this.target=E,this.currentTarget=null;for(var T in s)s.hasOwnProperty(T)&&(c=s[T],this[T]=c?c(v):v[T]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?wc:Cp,this.isPropagationStopped=Cp,this}return g(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=wc)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=wc)},persist:function(){},isPersistent:wc}),r}var ua={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Sc=On(ua),fo=g({},ua,{view:0,detail:0}),gE=On(fo),Jd,eh,go,xc=g({},fo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:nh,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==go&&(go&&s.type==="mousemove"?(Jd=s.screenX-go.screenX,eh=s.screenY-go.screenY):eh=Jd=0,go=s),Jd)},movementY:function(s){return"movementY"in s?s.movementY:eh}}),Op=On(xc),mE=g({},xc,{dataTransfer:0}),pE=On(mE),vE=g({},fo,{relatedTarget:0}),th=On(vE),yE=g({},ua,{animationName:0,elapsedTime:0,pseudoElement:0}),bE=On(yE),_E=g({},ua,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),wE=On(_E),SE=g({},ua,{data:0}),Rp=On(SE),xE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},EE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},CE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function OE(s){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(s):(s=CE[s])?!!r[s]:!1}function nh(){return OE}var RE=g({},fo,{key:function(s){if(s.key){var r=xE[s.key]||s.key;if(r!=="Unidentified")return r}return s.type==="keypress"?(s=_c(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?EE[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:nh,charCode:function(s){return s.type==="keypress"?_c(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?_c(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),AE=On(RE),TE=g({},xc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ap=On(TE),DE=g({},fo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:nh}),ME=On(DE),kE=g({},ua,{propertyName:0,elapsedTime:0,pseudoElement:0}),NE=On(kE),jE=g({},xc,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),LE=On(jE),PE=g({},ua,{newState:0,oldState:0}),zE=On(PE),IE=[9,13,27,32],ih=Gi&&"CompositionEvent"in window,mo=null;Gi&&"documentMode"in document&&(mo=document.documentMode);var FE=Gi&&"TextEvent"in window&&!mo,Tp=Gi&&(!ih||mo&&8<mo&&11>=mo),Dp=" ",Mp=!1;function kp(s,r){switch(s){case"keyup":return IE.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Np(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Ja=!1;function UE(s,r){switch(s){case"compositionend":return Np(r);case"keypress":return r.which!==32?null:(Mp=!0,Dp);case"textInput":return s=r.data,s===Dp&&Mp?null:s;default:return null}}function HE(s,r){if(Ja)return s==="compositionend"||!ih&&kp(s,r)?(s=Ep(),bc=Zd=Es=null,Ja=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Tp&&r.locale!=="ko"?null:r.data;default:return null}}var BE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jp(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r==="input"?!!BE[s.type]:r==="textarea"}function Lp(s,r,c,h){Qa?Za?Za.push(h):Za=[h]:Qa=h,r=cu(r,"onChange"),0<r.length&&(c=new Sc("onChange","change",null,c,h),s.push({event:c,listeners:r}))}var po=null,vo=null;function VE(s){mb(s,0)}function Ec(s){var r=co(s);if(pp(r))return s}function Pp(s,r){if(s==="change")return r}var zp=!1;if(Gi){var sh;if(Gi){var ah="oninput"in document;if(!ah){var Ip=document.createElement("div");Ip.setAttribute("oninput","return;"),ah=typeof Ip.oninput=="function"}sh=ah}else sh=!1;zp=sh&&(!document.documentMode||9<document.documentMode)}function Fp(){po&&(po.detachEvent("onpropertychange",Up),vo=po=null)}function Up(s){if(s.propertyName==="value"&&Ec(vo)){var r=[];Lp(r,vo,s,Kd(s)),xp(VE,r)}}function $E(s,r,c){s==="focusin"?(Fp(),po=r,vo=c,po.attachEvent("onpropertychange",Up)):s==="focusout"&&Fp()}function qE(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Ec(vo)}function GE(s,r){if(s==="click")return Ec(r)}function YE(s,r){if(s==="input"||s==="change")return Ec(r)}function WE(s,r){return s===r&&(s!==0||1/s===1/r)||s!==s&&r!==r}var Pn=typeof Object.is=="function"?Object.is:WE;function yo(s,r){if(Pn(s,r))return!0;if(typeof s!="object"||s===null||typeof r!="object"||r===null)return!1;var c=Object.keys(s),h=Object.keys(r);if(c.length!==h.length)return!1;for(h=0;h<c.length;h++){var m=c[h];if(!We.call(r,m)||!Pn(s[m],r[m]))return!1}return!0}function Hp(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Bp(s,r){var c=Hp(s);s=0;for(var h;c;){if(c.nodeType===3){if(h=s+c.textContent.length,s<=r&&h>=r)return{node:c,offset:r-s};s=h}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=Hp(c)}}function Vp(s,r){return s&&r?s===r?!0:s&&s.nodeType===3?!1:r&&r.nodeType===3?Vp(s,r.parentNode):"contains"in s?s.contains(r):s.compareDocumentPosition?!!(s.compareDocumentPosition(r)&16):!1:!1}function $p(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var r=vc(s.document);r instanceof s.HTMLIFrameElement;){try{var c=typeof r.contentWindow.location.href=="string"}catch{c=!1}if(c)s=r.contentWindow;else break;r=vc(s.document)}return r}function rh(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r&&(r==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||r==="textarea"||s.contentEditable==="true")}var KE=Gi&&"documentMode"in document&&11>=document.documentMode,er=null,oh=null,bo=null,lh=!1;function qp(s,r,c){var h=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;lh||er==null||er!==vc(h)||(h=er,"selectionStart"in h&&rh(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),bo&&yo(bo,h)||(bo=h,h=cu(oh,"onSelect"),0<h.length&&(r=new Sc("onSelect","select",null,r,c),s.push({event:r,listeners:h}),r.target=er)))}function da(s,r){var c={};return c[s.toLowerCase()]=r.toLowerCase(),c["Webkit"+s]="webkit"+r,c["Moz"+s]="moz"+r,c}var tr={animationend:da("Animation","AnimationEnd"),animationiteration:da("Animation","AnimationIteration"),animationstart:da("Animation","AnimationStart"),transitionrun:da("Transition","TransitionRun"),transitionstart:da("Transition","TransitionStart"),transitioncancel:da("Transition","TransitionCancel"),transitionend:da("Transition","TransitionEnd")},ch={},Gp={};Gi&&(Gp=document.createElement("div").style,"AnimationEvent"in window||(delete tr.animationend.animation,delete tr.animationiteration.animation,delete tr.animationstart.animation),"TransitionEvent"in window||delete tr.transitionend.transition);function ha(s){if(ch[s])return ch[s];if(!tr[s])return s;var r=tr[s],c;for(c in r)if(r.hasOwnProperty(c)&&c in Gp)return ch[s]=r[c];return s}var Yp=ha("animationend"),Wp=ha("animationiteration"),Kp=ha("animationstart"),XE=ha("transitionrun"),QE=ha("transitionstart"),ZE=ha("transitioncancel"),Xp=ha("transitionend"),Qp=new Map,uh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");uh.push("scrollEnd");function ui(s,r){Qp.set(s,r),ca(r,[s])}var Zp=new WeakMap;function Yn(s,r){if(typeof s=="object"&&s!==null){var c=Zp.get(s);return c!==void 0?c:(r={value:s,source:r,stack:gp(r)},Zp.set(s,r),r)}return{value:s,source:r,stack:gp(r)}}var Wn=[],nr=0,dh=0;function Cc(){for(var s=nr,r=dh=nr=0;r<s;){var c=Wn[r];Wn[r++]=null;var h=Wn[r];Wn[r++]=null;var m=Wn[r];Wn[r++]=null;var v=Wn[r];if(Wn[r++]=null,h!==null&&m!==null){var E=h.pending;E===null?m.next=m:(m.next=E.next,E.next=m),h.pending=m}v!==0&&Jp(c,m,v)}}function Oc(s,r,c,h){Wn[nr++]=s,Wn[nr++]=r,Wn[nr++]=c,Wn[nr++]=h,dh|=h,s.lanes|=h,s=s.alternate,s!==null&&(s.lanes|=h)}function hh(s,r,c,h){return Oc(s,r,c,h),Rc(s)}function ir(s,r){return Oc(s,null,null,r),Rc(s)}function Jp(s,r,c){s.lanes|=c;var h=s.alternate;h!==null&&(h.lanes|=c);for(var m=!1,v=s.return;v!==null;)v.childLanes|=c,h=v.alternate,h!==null&&(h.childLanes|=c),v.tag===22&&(s=v.stateNode,s===null||s._visibility&1||(m=!0)),s=v,v=v.return;return s.tag===3?(v=s.stateNode,m&&r!==null&&(m=31-$e(c),s=v.hiddenUpdates,h=s[m],h===null?s[m]=[r]:h.push(r),r.lane=c|536870912),v):null}function Rc(s){if(50<$o)throw $o=0,bf=null,Error(i(185));for(var r=s.return;r!==null;)s=r,r=s.return;return s.tag===3?s.stateNode:null}var sr={};function JE(s,r,c,h){this.tag=s,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zn(s,r,c,h){return new JE(s,r,c,h)}function fh(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Yi(s,r){var c=s.alternate;return c===null?(c=zn(s.tag,r,s.key,s.mode),c.elementType=s.elementType,c.type=s.type,c.stateNode=s.stateNode,c.alternate=s,s.alternate=c):(c.pendingProps=r,c.type=s.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=s.flags&65011712,c.childLanes=s.childLanes,c.lanes=s.lanes,c.child=s.child,c.memoizedProps=s.memoizedProps,c.memoizedState=s.memoizedState,c.updateQueue=s.updateQueue,r=s.dependencies,c.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},c.sibling=s.sibling,c.index=s.index,c.ref=s.ref,c.refCleanup=s.refCleanup,c}function ev(s,r){s.flags&=65011714;var c=s.alternate;return c===null?(s.childLanes=0,s.lanes=r,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=c.childLanes,s.lanes=c.lanes,s.child=c.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=c.memoizedProps,s.memoizedState=c.memoizedState,s.updateQueue=c.updateQueue,s.type=c.type,r=c.dependencies,s.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),s}function Ac(s,r,c,h,m,v){var E=0;if(h=s,typeof s=="function")fh(s)&&(E=1);else if(typeof s=="string")E=tO(s,c,me.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case W:return s=zn(31,c,r,m),s.elementType=W,s.lanes=v,s;case w:return fa(c.children,m,v,r);case S:E=8,m|=24;break;case x:return s=zn(12,c,r,m|2),s.elementType=x,s.lanes=v,s;case D:return s=zn(13,c,r,m),s.elementType=D,s.lanes=v,s;case V:return s=zn(19,c,r,m),s.elementType=V,s.lanes=v,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case C:case A:E=10;break e;case O:E=9;break e;case M:E=11;break e;case F:E=14;break e;case I:E=16,h=null;break e}E=29,c=Error(i(130,s===null?"null":typeof s,"")),h=null}return r=zn(E,c,r,m),r.elementType=s,r.type=h,r.lanes=v,r}function fa(s,r,c,h){return s=zn(7,s,h,r),s.lanes=c,s}function gh(s,r,c){return s=zn(6,s,null,r),s.lanes=c,s}function mh(s,r,c){return r=zn(4,s.children!==null?s.children:[],s.key,r),r.lanes=c,r.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},r}var ar=[],rr=0,Tc=null,Dc=0,Kn=[],Xn=0,ga=null,Wi=1,Ki="";function ma(s,r){ar[rr++]=Dc,ar[rr++]=Tc,Tc=s,Dc=r}function tv(s,r,c){Kn[Xn++]=Wi,Kn[Xn++]=Ki,Kn[Xn++]=ga,ga=s;var h=Wi;s=Ki;var m=32-$e(h)-1;h&=~(1<<m),c+=1;var v=32-$e(r)+m;if(30<v){var E=m-m%5;v=(h&(1<<E)-1).toString(32),h>>=E,m-=E,Wi=1<<32-$e(r)+m|c<<m|h,Ki=v+s}else Wi=1<<v|c<<m|h,Ki=s}function ph(s){s.return!==null&&(ma(s,1),tv(s,1,0))}function vh(s){for(;s===Tc;)Tc=ar[--rr],ar[rr]=null,Dc=ar[--rr],ar[rr]=null;for(;s===ga;)ga=Kn[--Xn],Kn[Xn]=null,Ki=Kn[--Xn],Kn[Xn]=null,Wi=Kn[--Xn],Kn[Xn]=null}var _n=null,Et=null,Ye=!1,pa=null,Ai=!1,yh=Error(i(519));function va(s){var r=Error(i(418,""));throw So(Yn(r,s)),yh}function nv(s){var r=s.stateNode,c=s.type,h=s.memoizedProps;switch(r[ft]=s,r[gt]=h,c){case"dialog":Ie("cancel",r),Ie("close",r);break;case"iframe":case"object":case"embed":Ie("load",r);break;case"video":case"audio":for(c=0;c<Go.length;c++)Ie(Go[c],r);break;case"source":Ie("error",r);break;case"img":case"image":case"link":Ie("error",r),Ie("load",r);break;case"details":Ie("toggle",r);break;case"input":Ie("invalid",r),vp(r,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0),pc(r);break;case"select":Ie("invalid",r);break;case"textarea":Ie("invalid",r),bp(r,h.value,h.defaultValue,h.children),pc(r)}c=h.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||r.textContent===""+c||h.suppressHydrationWarning===!0||bb(r.textContent,c)?(h.popover!=null&&(Ie("beforetoggle",r),Ie("toggle",r)),h.onScroll!=null&&Ie("scroll",r),h.onScrollEnd!=null&&Ie("scrollend",r),h.onClick!=null&&(r.onclick=uu),r=!0):r=!1,r||va(s)}function iv(s){for(_n=s.return;_n;)switch(_n.tag){case 5:case 13:Ai=!1;return;case 27:case 3:Ai=!0;return;default:_n=_n.return}}function _o(s){if(s!==_n)return!1;if(!Ye)return iv(s),Ye=!0,!1;var r=s.tag,c;if((c=r!==3&&r!==27)&&((c=r===5)&&(c=s.type,c=!(c!=="form"&&c!=="button")||Lf(s.type,s.memoizedProps)),c=!c),c&&Et&&va(s),iv(s),r===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));e:{for(s=s.nextSibling,r=0;s;){if(s.nodeType===8)if(c=s.data,c==="/$"){if(r===0){Et=hi(s.nextSibling);break e}r--}else c!=="$"&&c!=="$!"&&c!=="$?"||r++;s=s.nextSibling}Et=null}}else r===27?(r=Et,Us(s.type)?(s=Ff,Ff=null,Et=s):Et=r):Et=_n?hi(s.stateNode.nextSibling):null;return!0}function wo(){Et=_n=null,Ye=!1}function sv(){var s=pa;return s!==null&&(Tn===null?Tn=s:Tn.push.apply(Tn,s),pa=null),s}function So(s){pa===null?pa=[s]:pa.push(s)}var bh=Z(null),ya=null,Xi=null;function Cs(s,r,c){re(bh,r._currentValue),r._currentValue=c}function Qi(s){s._currentValue=bh.current,ae(bh)}function _h(s,r,c){for(;s!==null;){var h=s.alternate;if((s.childLanes&r)!==r?(s.childLanes|=r,h!==null&&(h.childLanes|=r)):h!==null&&(h.childLanes&r)!==r&&(h.childLanes|=r),s===c)break;s=s.return}}function wh(s,r,c,h){var m=s.child;for(m!==null&&(m.return=s);m!==null;){var v=m.dependencies;if(v!==null){var E=m.child;v=v.firstContext;e:for(;v!==null;){var T=v;v=m;for(var k=0;k<r.length;k++)if(T.context===r[k]){v.lanes|=c,T=v.alternate,T!==null&&(T.lanes|=c),_h(v.return,c,s),h||(E=null);break e}v=T.next}}else if(m.tag===18){if(E=m.return,E===null)throw Error(i(341));E.lanes|=c,v=E.alternate,v!==null&&(v.lanes|=c),_h(E,c,s),E=null}else E=m.child;if(E!==null)E.return=m;else for(E=m;E!==null;){if(E===s){E=null;break}if(m=E.sibling,m!==null){m.return=E.return,E=m;break}E=E.return}m=E}}function xo(s,r,c,h){s=null;for(var m=r,v=!1;m!==null;){if(!v){if((m.flags&524288)!==0)v=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var E=m.alternate;if(E===null)throw Error(i(387));if(E=E.memoizedProps,E!==null){var T=m.type;Pn(m.pendingProps.value,E.value)||(s!==null?s.push(T):s=[T])}}else if(m===oe.current){if(E=m.alternate,E===null)throw Error(i(387));E.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(s!==null?s.push(Zo):s=[Zo])}m=m.return}s!==null&&wh(r,s,c,h),r.flags|=262144}function Mc(s){for(s=s.firstContext;s!==null;){if(!Pn(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function ba(s){ya=s,Xi=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function hn(s){return av(ya,s)}function kc(s,r){return ya===null&&ba(s),av(s,r)}function av(s,r){var c=r._currentValue;if(r={context:r,memoizedValue:c,next:null},Xi===null){if(s===null)throw Error(i(308));Xi=r,s.dependencies={lanes:0,firstContext:r},s.flags|=524288}else Xi=Xi.next=r;return c}var eC=typeof AbortController<"u"?AbortController:function(){var s=[],r=this.signal={aborted:!1,addEventListener:function(c,h){s.push(h)}};this.abort=function(){r.aborted=!0,s.forEach(function(c){return c()})}},tC=t.unstable_scheduleCallback,nC=t.unstable_NormalPriority,Ht={$$typeof:A,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Sh(){return{controller:new eC,data:new Map,refCount:0}}function Eo(s){s.refCount--,s.refCount===0&&tC(nC,function(){s.controller.abort()})}var Co=null,xh=0,or=0,lr=null;function iC(s,r){if(Co===null){var c=Co=[];xh=0,or=Of(),lr={status:"pending",value:void 0,then:function(h){c.push(h)}}}return xh++,r.then(rv,rv),r}function rv(){if(--xh===0&&Co!==null){lr!==null&&(lr.status="fulfilled");var s=Co;Co=null,or=0,lr=null;for(var r=0;r<s.length;r++)(0,s[r])()}}function sC(s,r){var c=[],h={status:"pending",value:null,reason:null,then:function(m){c.push(m)}};return s.then(function(){h.status="fulfilled",h.value=r;for(var m=0;m<c.length;m++)(0,c[m])(r)},function(m){for(h.status="rejected",h.reason=m,m=0;m<c.length;m++)(0,c[m])(void 0)}),h}var ov=P.S;P.S=function(s,r){typeof r=="object"&&r!==null&&typeof r.then=="function"&&iC(s,r),ov!==null&&ov(s,r)};var _a=Z(null);function Eh(){var s=_a.current;return s!==null?s:ut.pooledCache}function Nc(s,r){r===null?re(_a,_a.current):re(_a,r.pool)}function lv(){var s=Eh();return s===null?null:{parent:Ht._currentValue,pool:s}}var Oo=Error(i(460)),cv=Error(i(474)),jc=Error(i(542)),Ch={then:function(){}};function uv(s){return s=s.status,s==="fulfilled"||s==="rejected"}function Lc(){}function dv(s,r,c){switch(c=s[c],c===void 0?s.push(r):c!==r&&(r.then(Lc,Lc),r=c),r.status){case"fulfilled":return r.value;case"rejected":throw s=r.reason,fv(s),s;default:if(typeof r.status=="string")r.then(Lc,Lc);else{if(s=ut,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=r,s.status="pending",s.then(function(h){if(r.status==="pending"){var m=r;m.status="fulfilled",m.value=h}},function(h){if(r.status==="pending"){var m=r;m.status="rejected",m.reason=h}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw s=r.reason,fv(s),s}throw Ro=r,Oo}}var Ro=null;function hv(){if(Ro===null)throw Error(i(459));var s=Ro;return Ro=null,s}function fv(s){if(s===Oo||s===jc)throw Error(i(483))}var Os=!1;function Oh(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Rh(s,r){s=s.updateQueue,r.updateQueue===s&&(r.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Rs(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function As(s,r,c){var h=s.updateQueue;if(h===null)return null;if(h=h.shared,(Xe&2)!==0){var m=h.pending;return m===null?r.next=r:(r.next=m.next,m.next=r),h.pending=r,r=Rc(s),Jp(s,null,c),r}return Oc(s,h,r,c),Rc(s)}function Ao(s,r,c){if(r=r.updateQueue,r!==null&&(r=r.shared,(c&4194048)!==0)){var h=r.lanes;h&=s.pendingLanes,c|=h,r.lanes=c,ci(s,c)}}function Ah(s,r){var c=s.updateQueue,h=s.alternate;if(h!==null&&(h=h.updateQueue,c===h)){var m=null,v=null;if(c=c.firstBaseUpdate,c!==null){do{var E={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};v===null?m=v=E:v=v.next=E,c=c.next}while(c!==null);v===null?m=v=r:v=v.next=r}else m=v=r;c={baseState:h.baseState,firstBaseUpdate:m,lastBaseUpdate:v,shared:h.shared,callbacks:h.callbacks},s.updateQueue=c;return}s=c.lastBaseUpdate,s===null?c.firstBaseUpdate=r:s.next=r,c.lastBaseUpdate=r}var Th=!1;function To(){if(Th){var s=lr;if(s!==null)throw s}}function Do(s,r,c,h){Th=!1;var m=s.updateQueue;Os=!1;var v=m.firstBaseUpdate,E=m.lastBaseUpdate,T=m.shared.pending;if(T!==null){m.shared.pending=null;var k=T,$=k.next;k.next=null,E===null?v=$:E.next=$,E=k;var ee=s.alternate;ee!==null&&(ee=ee.updateQueue,T=ee.lastBaseUpdate,T!==E&&(T===null?ee.firstBaseUpdate=$:T.next=$,ee.lastBaseUpdate=k))}if(v!==null){var ne=m.baseState;E=0,ee=$=k=null,T=v;do{var G=T.lane&-536870913,Y=G!==T.lane;if(Y?(Be&G)===G:(h&G)===G){G!==0&&G===or&&(Th=!0),ee!==null&&(ee=ee.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var Ee=s,we=T;G=r;var st=c;switch(we.tag){case 1:if(Ee=we.payload,typeof Ee=="function"){ne=Ee.call(st,ne,G);break e}ne=Ee;break e;case 3:Ee.flags=Ee.flags&-65537|128;case 0:if(Ee=we.payload,G=typeof Ee=="function"?Ee.call(st,ne,G):Ee,G==null)break e;ne=g({},ne,G);break e;case 2:Os=!0}}G=T.callback,G!==null&&(s.flags|=64,Y&&(s.flags|=8192),Y=m.callbacks,Y===null?m.callbacks=[G]:Y.push(G))}else Y={lane:G,tag:T.tag,payload:T.payload,callback:T.callback,next:null},ee===null?($=ee=Y,k=ne):ee=ee.next=Y,E|=G;if(T=T.next,T===null){if(T=m.shared.pending,T===null)break;Y=T,T=Y.next,Y.next=null,m.lastBaseUpdate=Y,m.shared.pending=null}}while(!0);ee===null&&(k=ne),m.baseState=k,m.firstBaseUpdate=$,m.lastBaseUpdate=ee,v===null&&(m.shared.lanes=0),Ps|=E,s.lanes=E,s.memoizedState=ne}}function gv(s,r){if(typeof s!="function")throw Error(i(191,s));s.call(r)}function mv(s,r){var c=s.callbacks;if(c!==null)for(s.callbacks=null,s=0;s<c.length;s++)gv(c[s],r)}var cr=Z(null),Pc=Z(0);function pv(s,r){s=ss,re(Pc,s),re(cr,r),ss=s|r.baseLanes}function Dh(){re(Pc,ss),re(cr,cr.current)}function Mh(){ss=Pc.current,ae(cr),ae(Pc)}var Ts=0,je=null,nt=null,jt=null,zc=!1,ur=!1,wa=!1,Ic=0,Mo=0,dr=null,aC=0;function Tt(){throw Error(i(321))}function kh(s,r){if(r===null)return!1;for(var c=0;c<r.length&&c<s.length;c++)if(!Pn(s[c],r[c]))return!1;return!0}function Nh(s,r,c,h,m,v){return Ts=v,je=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,P.H=s===null||s.memoizedState===null?Jv:ey,wa=!1,v=c(h,m),wa=!1,ur&&(v=yv(r,c,h,m)),vv(s),v}function vv(s){P.H=$c;var r=nt!==null&&nt.next!==null;if(Ts=0,jt=nt=je=null,zc=!1,Mo=0,dr=null,r)throw Error(i(300));s===null||Xt||(s=s.dependencies,s!==null&&Mc(s)&&(Xt=!0))}function yv(s,r,c,h){je=s;var m=0;do{if(ur&&(dr=null),Mo=0,ur=!1,25<=m)throw Error(i(301));if(m+=1,jt=nt=null,s.updateQueue!=null){var v=s.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}P.H=hC,v=r(c,h)}while(ur);return v}function rC(){var s=P.H,r=s.useState()[0];return r=typeof r.then=="function"?ko(r):r,s=s.useState()[0],(nt!==null?nt.memoizedState:null)!==s&&(je.flags|=1024),r}function jh(){var s=Ic!==0;return Ic=0,s}function Lh(s,r,c){r.updateQueue=s.updateQueue,r.flags&=-2053,s.lanes&=~c}function Ph(s){if(zc){for(s=s.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}zc=!1}Ts=0,jt=nt=je=null,ur=!1,Mo=Ic=0,dr=null}function Rn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return jt===null?je.memoizedState=jt=s:jt=jt.next=s,jt}function Lt(){if(nt===null){var s=je.alternate;s=s!==null?s.memoizedState:null}else s=nt.next;var r=jt===null?je.memoizedState:jt.next;if(r!==null)jt=r,nt=s;else{if(s===null)throw je.alternate===null?Error(i(467)):Error(i(310));nt=s,s={memoizedState:nt.memoizedState,baseState:nt.baseState,baseQueue:nt.baseQueue,queue:nt.queue,next:null},jt===null?je.memoizedState=jt=s:jt=jt.next=s}return jt}function zh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ko(s){var r=Mo;return Mo+=1,dr===null&&(dr=[]),s=dv(dr,s,r),r=je,(jt===null?r.memoizedState:jt.next)===null&&(r=r.alternate,P.H=r===null||r.memoizedState===null?Jv:ey),s}function Fc(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return ko(s);if(s.$$typeof===A)return hn(s)}throw Error(i(438,String(s)))}function Ih(s){var r=null,c=je.updateQueue;if(c!==null&&(r=c.memoCache),r==null){var h=je.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(r={data:h.data.map(function(m){return m.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),c===null&&(c=zh(),je.updateQueue=c),c.memoCache=r,c=r.data[r.index],c===void 0)for(c=r.data[r.index]=Array(s),h=0;h<s;h++)c[h]=X;return r.index++,c}function Zi(s,r){return typeof r=="function"?r(s):r}function Uc(s){var r=Lt();return Fh(r,nt,s)}function Fh(s,r,c){var h=s.queue;if(h===null)throw Error(i(311));h.lastRenderedReducer=c;var m=s.baseQueue,v=h.pending;if(v!==null){if(m!==null){var E=m.next;m.next=v.next,v.next=E}r.baseQueue=m=v,h.pending=null}if(v=s.baseState,m===null)s.memoizedState=v;else{r=m.next;var T=E=null,k=null,$=r,ee=!1;do{var ne=$.lane&-536870913;if(ne!==$.lane?(Be&ne)===ne:(Ts&ne)===ne){var G=$.revertLane;if(G===0)k!==null&&(k=k.next={lane:0,revertLane:0,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),ne===or&&(ee=!0);else if((Ts&G)===G){$=$.next,G===or&&(ee=!0);continue}else ne={lane:0,revertLane:$.revertLane,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},k===null?(T=k=ne,E=v):k=k.next=ne,je.lanes|=G,Ps|=G;ne=$.action,wa&&c(v,ne),v=$.hasEagerState?$.eagerState:c(v,ne)}else G={lane:ne,revertLane:$.revertLane,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},k===null?(T=k=G,E=v):k=k.next=G,je.lanes|=ne,Ps|=ne;$=$.next}while($!==null&&$!==r);if(k===null?E=v:k.next=T,!Pn(v,s.memoizedState)&&(Xt=!0,ee&&(c=lr,c!==null)))throw c;s.memoizedState=v,s.baseState=E,s.baseQueue=k,h.lastRenderedState=v}return m===null&&(h.lanes=0),[s.memoizedState,h.dispatch]}function Uh(s){var r=Lt(),c=r.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=s;var h=c.dispatch,m=c.pending,v=r.memoizedState;if(m!==null){c.pending=null;var E=m=m.next;do v=s(v,E.action),E=E.next;while(E!==m);Pn(v,r.memoizedState)||(Xt=!0),r.memoizedState=v,r.baseQueue===null&&(r.baseState=v),c.lastRenderedState=v}return[v,h]}function bv(s,r,c){var h=je,m=Lt(),v=Ye;if(v){if(c===void 0)throw Error(i(407));c=c()}else c=r();var E=!Pn((nt||m).memoizedState,c);E&&(m.memoizedState=c,Xt=!0),m=m.queue;var T=Sv.bind(null,h,m,s);if(No(2048,8,T,[s]),m.getSnapshot!==r||E||jt!==null&&jt.memoizedState.tag&1){if(h.flags|=2048,hr(9,Hc(),wv.bind(null,h,m,c,r),null),ut===null)throw Error(i(349));v||(Ts&124)!==0||_v(h,r,c)}return c}function _v(s,r,c){s.flags|=16384,s={getSnapshot:r,value:c},r=je.updateQueue,r===null?(r=zh(),je.updateQueue=r,r.stores=[s]):(c=r.stores,c===null?r.stores=[s]:c.push(s))}function wv(s,r,c,h){r.value=c,r.getSnapshot=h,xv(r)&&Ev(s)}function Sv(s,r,c){return c(function(){xv(r)&&Ev(s)})}function xv(s){var r=s.getSnapshot;s=s.value;try{var c=r();return!Pn(s,c)}catch{return!0}}function Ev(s){var r=ir(s,2);r!==null&&Bn(r,s,2)}function Hh(s){var r=Rn();if(typeof s=="function"){var c=s;if(s=c(),wa){Te(!0);try{c()}finally{Te(!1)}}}return r.memoizedState=r.baseState=s,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zi,lastRenderedState:s},r}function Cv(s,r,c,h){return s.baseState=c,Fh(s,nt,typeof h=="function"?h:Zi)}function oC(s,r,c,h,m){if(Vc(s))throw Error(i(485));if(s=r.action,s!==null){var v={payload:m,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){v.listeners.push(E)}};P.T!==null?c(!0):v.isTransition=!1,h(v),c=r.pending,c===null?(v.next=r.pending=v,Ov(r,v)):(v.next=c.next,r.pending=c.next=v)}}function Ov(s,r){var c=r.action,h=r.payload,m=s.state;if(r.isTransition){var v=P.T,E={};P.T=E;try{var T=c(m,h),k=P.S;k!==null&&k(E,T),Rv(s,r,T)}catch($){Bh(s,r,$)}finally{P.T=v}}else try{v=c(m,h),Rv(s,r,v)}catch($){Bh(s,r,$)}}function Rv(s,r,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(h){Av(s,r,h)},function(h){return Bh(s,r,h)}):Av(s,r,c)}function Av(s,r,c){r.status="fulfilled",r.value=c,Tv(r),s.state=c,r=s.pending,r!==null&&(c=r.next,c===r?s.pending=null:(c=c.next,r.next=c,Ov(s,c)))}function Bh(s,r,c){var h=s.pending;if(s.pending=null,h!==null){h=h.next;do r.status="rejected",r.reason=c,Tv(r),r=r.next;while(r!==h)}s.action=null}function Tv(s){s=s.listeners;for(var r=0;r<s.length;r++)(0,s[r])()}function Dv(s,r){return r}function Mv(s,r){if(Ye){var c=ut.formState;if(c!==null){e:{var h=je;if(Ye){if(Et){t:{for(var m=Et,v=Ai;m.nodeType!==8;){if(!v){m=null;break t}if(m=hi(m.nextSibling),m===null){m=null;break t}}v=m.data,m=v==="F!"||v==="F"?m:null}if(m){Et=hi(m.nextSibling),h=m.data==="F!";break e}}va(h)}h=!1}h&&(r=c[0])}}return c=Rn(),c.memoizedState=c.baseState=r,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Dv,lastRenderedState:r},c.queue=h,c=Xv.bind(null,je,h),h.dispatch=c,h=Hh(!1),v=Yh.bind(null,je,!1,h.queue),h=Rn(),m={state:r,dispatch:null,action:s,pending:null},h.queue=m,c=oC.bind(null,je,m,v,c),m.dispatch=c,h.memoizedState=s,[r,c,!1]}function kv(s){var r=Lt();return Nv(r,nt,s)}function Nv(s,r,c){if(r=Fh(s,r,Dv)[0],s=Uc(Zi)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var h=ko(r)}catch(E){throw E===Oo?jc:E}else h=r;r=Lt();var m=r.queue,v=m.dispatch;return c!==r.memoizedState&&(je.flags|=2048,hr(9,Hc(),lC.bind(null,m,c),null)),[h,v,s]}function lC(s,r){s.action=r}function jv(s){var r=Lt(),c=nt;if(c!==null)return Nv(r,c,s);Lt(),r=r.memoizedState,c=Lt();var h=c.queue.dispatch;return c.memoizedState=s,[r,h,!1]}function hr(s,r,c,h){return s={tag:s,create:c,deps:h,inst:r,next:null},r=je.updateQueue,r===null&&(r=zh(),je.updateQueue=r),c=r.lastEffect,c===null?r.lastEffect=s.next=s:(h=c.next,c.next=s,s.next=h,r.lastEffect=s),s}function Hc(){return{destroy:void 0,resource:void 0}}function Lv(){return Lt().memoizedState}function Bc(s,r,c,h){var m=Rn();h=h===void 0?null:h,je.flags|=s,m.memoizedState=hr(1|r,Hc(),c,h)}function No(s,r,c,h){var m=Lt();h=h===void 0?null:h;var v=m.memoizedState.inst;nt!==null&&h!==null&&kh(h,nt.memoizedState.deps)?m.memoizedState=hr(r,v,c,h):(je.flags|=s,m.memoizedState=hr(1|r,v,c,h))}function Pv(s,r){Bc(8390656,8,s,r)}function zv(s,r){No(2048,8,s,r)}function Iv(s,r){return No(4,2,s,r)}function Fv(s,r){return No(4,4,s,r)}function Uv(s,r){if(typeof r=="function"){s=s();var c=r(s);return function(){typeof c=="function"?c():r(null)}}if(r!=null)return s=s(),r.current=s,function(){r.current=null}}function Hv(s,r,c){c=c!=null?c.concat([s]):null,No(4,4,Uv.bind(null,r,s),c)}function Vh(){}function Bv(s,r){var c=Lt();r=r===void 0?null:r;var h=c.memoizedState;return r!==null&&kh(r,h[1])?h[0]:(c.memoizedState=[s,r],s)}function Vv(s,r){var c=Lt();r=r===void 0?null:r;var h=c.memoizedState;if(r!==null&&kh(r,h[1]))return h[0];if(h=s(),wa){Te(!0);try{s()}finally{Te(!1)}}return c.memoizedState=[h,r],h}function $h(s,r,c){return c===void 0||(Ts&1073741824)!==0?s.memoizedState=r:(s.memoizedState=c,s=Gy(),je.lanes|=s,Ps|=s,c)}function $v(s,r,c,h){return Pn(c,r)?c:cr.current!==null?(s=$h(s,c,h),Pn(s,r)||(Xt=!0),s):(Ts&42)===0?(Xt=!0,s.memoizedState=c):(s=Gy(),je.lanes|=s,Ps|=s,r)}function qv(s,r,c,h,m){var v=K.p;K.p=v!==0&&8>v?v:8;var E=P.T,T={};P.T=T,Yh(s,!1,r,c);try{var k=m(),$=P.S;if($!==null&&$(T,k),k!==null&&typeof k=="object"&&typeof k.then=="function"){var ee=sC(k,h);jo(s,r,ee,Hn(s))}else jo(s,r,h,Hn(s))}catch(ne){jo(s,r,{then:function(){},status:"rejected",reason:ne},Hn())}finally{K.p=v,P.T=E}}function cC(){}function qh(s,r,c,h){if(s.tag!==5)throw Error(i(476));var m=Gv(s).queue;qv(s,m,r,le,c===null?cC:function(){return Yv(s),c(h)})}function Gv(s){var r=s.memoizedState;if(r!==null)return r;r={memoizedState:le,baseState:le,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zi,lastRenderedState:le},next:null};var c={};return r.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zi,lastRenderedState:c},next:null},s.memoizedState=r,s=s.alternate,s!==null&&(s.memoizedState=r),r}function Yv(s){var r=Gv(s).next.queue;jo(s,r,{},Hn())}function Gh(){return hn(Zo)}function Wv(){return Lt().memoizedState}function Kv(){return Lt().memoizedState}function uC(s){for(var r=s.return;r!==null;){switch(r.tag){case 24:case 3:var c=Hn();s=Rs(c);var h=As(r,s,c);h!==null&&(Bn(h,r,c),Ao(h,r,c)),r={cache:Sh()},s.payload=r;return}r=r.return}}function dC(s,r,c){var h=Hn();c={lane:h,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null},Vc(s)?Qv(r,c):(c=hh(s,r,c,h),c!==null&&(Bn(c,s,h),Zv(c,r,h)))}function Xv(s,r,c){var h=Hn();jo(s,r,c,h)}function jo(s,r,c,h){var m={lane:h,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null};if(Vc(s))Qv(r,m);else{var v=s.alternate;if(s.lanes===0&&(v===null||v.lanes===0)&&(v=r.lastRenderedReducer,v!==null))try{var E=r.lastRenderedState,T=v(E,c);if(m.hasEagerState=!0,m.eagerState=T,Pn(T,E))return Oc(s,r,m,0),ut===null&&Cc(),!1}catch{}finally{}if(c=hh(s,r,m,h),c!==null)return Bn(c,s,h),Zv(c,r,h),!0}return!1}function Yh(s,r,c,h){if(h={lane:2,revertLane:Of(),action:h,hasEagerState:!1,eagerState:null,next:null},Vc(s)){if(r)throw Error(i(479))}else r=hh(s,c,h,2),r!==null&&Bn(r,s,2)}function Vc(s){var r=s.alternate;return s===je||r!==null&&r===je}function Qv(s,r){ur=zc=!0;var c=s.pending;c===null?r.next=r:(r.next=c.next,c.next=r),s.pending=r}function Zv(s,r,c){if((c&4194048)!==0){var h=r.lanes;h&=s.pendingLanes,c|=h,r.lanes=c,ci(s,c)}}var $c={readContext:hn,use:Fc,useCallback:Tt,useContext:Tt,useEffect:Tt,useImperativeHandle:Tt,useLayoutEffect:Tt,useInsertionEffect:Tt,useMemo:Tt,useReducer:Tt,useRef:Tt,useState:Tt,useDebugValue:Tt,useDeferredValue:Tt,useTransition:Tt,useSyncExternalStore:Tt,useId:Tt,useHostTransitionStatus:Tt,useFormState:Tt,useActionState:Tt,useOptimistic:Tt,useMemoCache:Tt,useCacheRefresh:Tt},Jv={readContext:hn,use:Fc,useCallback:function(s,r){return Rn().memoizedState=[s,r===void 0?null:r],s},useContext:hn,useEffect:Pv,useImperativeHandle:function(s,r,c){c=c!=null?c.concat([s]):null,Bc(4194308,4,Uv.bind(null,r,s),c)},useLayoutEffect:function(s,r){return Bc(4194308,4,s,r)},useInsertionEffect:function(s,r){Bc(4,2,s,r)},useMemo:function(s,r){var c=Rn();r=r===void 0?null:r;var h=s();if(wa){Te(!0);try{s()}finally{Te(!1)}}return c.memoizedState=[h,r],h},useReducer:function(s,r,c){var h=Rn();if(c!==void 0){var m=c(r);if(wa){Te(!0);try{c(r)}finally{Te(!1)}}}else m=r;return h.memoizedState=h.baseState=m,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:m},h.queue=s,s=s.dispatch=dC.bind(null,je,s),[h.memoizedState,s]},useRef:function(s){var r=Rn();return s={current:s},r.memoizedState=s},useState:function(s){s=Hh(s);var r=s.queue,c=Xv.bind(null,je,r);return r.dispatch=c,[s.memoizedState,c]},useDebugValue:Vh,useDeferredValue:function(s,r){var c=Rn();return $h(c,s,r)},useTransition:function(){var s=Hh(!1);return s=qv.bind(null,je,s.queue,!0,!1),Rn().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,r,c){var h=je,m=Rn();if(Ye){if(c===void 0)throw Error(i(407));c=c()}else{if(c=r(),ut===null)throw Error(i(349));(Be&124)!==0||_v(h,r,c)}m.memoizedState=c;var v={value:c,getSnapshot:r};return m.queue=v,Pv(Sv.bind(null,h,v,s),[s]),h.flags|=2048,hr(9,Hc(),wv.bind(null,h,v,c,r),null),c},useId:function(){var s=Rn(),r=ut.identifierPrefix;if(Ye){var c=Ki,h=Wi;c=(h&~(1<<32-$e(h)-1)).toString(32)+c,r="«"+r+"R"+c,c=Ic++,0<c&&(r+="H"+c.toString(32)),r+="»"}else c=aC++,r="«"+r+"r"+c.toString(32)+"»";return s.memoizedState=r},useHostTransitionStatus:Gh,useFormState:Mv,useActionState:Mv,useOptimistic:function(s){var r=Rn();r.memoizedState=r.baseState=s;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=c,r=Yh.bind(null,je,!0,c),c.dispatch=r,[s,r]},useMemoCache:Ih,useCacheRefresh:function(){return Rn().memoizedState=uC.bind(null,je)}},ey={readContext:hn,use:Fc,useCallback:Bv,useContext:hn,useEffect:zv,useImperativeHandle:Hv,useInsertionEffect:Iv,useLayoutEffect:Fv,useMemo:Vv,useReducer:Uc,useRef:Lv,useState:function(){return Uc(Zi)},useDebugValue:Vh,useDeferredValue:function(s,r){var c=Lt();return $v(c,nt.memoizedState,s,r)},useTransition:function(){var s=Uc(Zi)[0],r=Lt().memoizedState;return[typeof s=="boolean"?s:ko(s),r]},useSyncExternalStore:bv,useId:Wv,useHostTransitionStatus:Gh,useFormState:kv,useActionState:kv,useOptimistic:function(s,r){var c=Lt();return Cv(c,nt,s,r)},useMemoCache:Ih,useCacheRefresh:Kv},hC={readContext:hn,use:Fc,useCallback:Bv,useContext:hn,useEffect:zv,useImperativeHandle:Hv,useInsertionEffect:Iv,useLayoutEffect:Fv,useMemo:Vv,useReducer:Uh,useRef:Lv,useState:function(){return Uh(Zi)},useDebugValue:Vh,useDeferredValue:function(s,r){var c=Lt();return nt===null?$h(c,s,r):$v(c,nt.memoizedState,s,r)},useTransition:function(){var s=Uh(Zi)[0],r=Lt().memoizedState;return[typeof s=="boolean"?s:ko(s),r]},useSyncExternalStore:bv,useId:Wv,useHostTransitionStatus:Gh,useFormState:jv,useActionState:jv,useOptimistic:function(s,r){var c=Lt();return nt!==null?Cv(c,nt,s,r):(c.baseState=s,[s,c.queue.dispatch])},useMemoCache:Ih,useCacheRefresh:Kv},fr=null,Lo=0;function qc(s){var r=Lo;return Lo+=1,fr===null&&(fr=[]),dv(fr,s,r)}function Po(s,r){r=r.props.ref,s.ref=r!==void 0?r:null}function Gc(s,r){throw r.$$typeof===p?Error(i(525)):(s=Object.prototype.toString.call(r),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":s)))}function ty(s){var r=s._init;return r(s._payload)}function ny(s){function r(z,L){if(s){var U=z.deletions;U===null?(z.deletions=[L],z.flags|=16):U.push(L)}}function c(z,L){if(!s)return null;for(;L!==null;)r(z,L),L=L.sibling;return null}function h(z){for(var L=new Map;z!==null;)z.key!==null?L.set(z.key,z):L.set(z.index,z),z=z.sibling;return L}function m(z,L){return z=Yi(z,L),z.index=0,z.sibling=null,z}function v(z,L,U){return z.index=U,s?(U=z.alternate,U!==null?(U=U.index,U<L?(z.flags|=67108866,L):U):(z.flags|=67108866,L)):(z.flags|=1048576,L)}function E(z){return s&&z.alternate===null&&(z.flags|=67108866),z}function T(z,L,U,te){return L===null||L.tag!==6?(L=gh(U,z.mode,te),L.return=z,L):(L=m(L,U),L.return=z,L)}function k(z,L,U,te){var pe=U.type;return pe===w?ee(z,L,U.props.children,te,U.key):L!==null&&(L.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===I&&ty(pe)===L.type)?(L=m(L,U.props),Po(L,U),L.return=z,L):(L=Ac(U.type,U.key,U.props,null,z.mode,te),Po(L,U),L.return=z,L)}function $(z,L,U,te){return L===null||L.tag!==4||L.stateNode.containerInfo!==U.containerInfo||L.stateNode.implementation!==U.implementation?(L=mh(U,z.mode,te),L.return=z,L):(L=m(L,U.children||[]),L.return=z,L)}function ee(z,L,U,te,pe){return L===null||L.tag!==7?(L=fa(U,z.mode,te,pe),L.return=z,L):(L=m(L,U),L.return=z,L)}function ne(z,L,U){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=gh(""+L,z.mode,U),L.return=z,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case b:return U=Ac(L.type,L.key,L.props,null,z.mode,U),Po(U,L),U.return=z,U;case _:return L=mh(L,z.mode,U),L.return=z,L;case I:var te=L._init;return L=te(L._payload),ne(z,L,U)}if(ue(L)||H(L))return L=fa(L,z.mode,U,null),L.return=z,L;if(typeof L.then=="function")return ne(z,qc(L),U);if(L.$$typeof===A)return ne(z,kc(z,L),U);Gc(z,L)}return null}function G(z,L,U,te){var pe=L!==null?L.key:null;if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return pe!==null?null:T(z,L,""+U,te);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case b:return U.key===pe?k(z,L,U,te):null;case _:return U.key===pe?$(z,L,U,te):null;case I:return pe=U._init,U=pe(U._payload),G(z,L,U,te)}if(ue(U)||H(U))return pe!==null?null:ee(z,L,U,te,null);if(typeof U.then=="function")return G(z,L,qc(U),te);if(U.$$typeof===A)return G(z,L,kc(z,U),te);Gc(z,U)}return null}function Y(z,L,U,te,pe){if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return z=z.get(U)||null,T(L,z,""+te,pe);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case b:return z=z.get(te.key===null?U:te.key)||null,k(L,z,te,pe);case _:return z=z.get(te.key===null?U:te.key)||null,$(L,z,te,pe);case I:var Pe=te._init;return te=Pe(te._payload),Y(z,L,U,te,pe)}if(ue(te)||H(te))return z=z.get(U)||null,ee(L,z,te,pe,null);if(typeof te.then=="function")return Y(z,L,U,qc(te),pe);if(te.$$typeof===A)return Y(z,L,U,kc(L,te),pe);Gc(L,te)}return null}function Ee(z,L,U,te){for(var pe=null,Pe=null,_e=L,xe=L=0,Zt=null;_e!==null&&xe<U.length;xe++){_e.index>xe?(Zt=_e,_e=null):Zt=_e.sibling;var qe=G(z,_e,U[xe],te);if(qe===null){_e===null&&(_e=Zt);break}s&&_e&&qe.alternate===null&&r(z,_e),L=v(qe,L,xe),Pe===null?pe=qe:Pe.sibling=qe,Pe=qe,_e=Zt}if(xe===U.length)return c(z,_e),Ye&&ma(z,xe),pe;if(_e===null){for(;xe<U.length;xe++)_e=ne(z,U[xe],te),_e!==null&&(L=v(_e,L,xe),Pe===null?pe=_e:Pe.sibling=_e,Pe=_e);return Ye&&ma(z,xe),pe}for(_e=h(_e);xe<U.length;xe++)Zt=Y(_e,z,xe,U[xe],te),Zt!==null&&(s&&Zt.alternate!==null&&_e.delete(Zt.key===null?xe:Zt.key),L=v(Zt,L,xe),Pe===null?pe=Zt:Pe.sibling=Zt,Pe=Zt);return s&&_e.forEach(function(qs){return r(z,qs)}),Ye&&ma(z,xe),pe}function we(z,L,U,te){if(U==null)throw Error(i(151));for(var pe=null,Pe=null,_e=L,xe=L=0,Zt=null,qe=U.next();_e!==null&&!qe.done;xe++,qe=U.next()){_e.index>xe?(Zt=_e,_e=null):Zt=_e.sibling;var qs=G(z,_e,qe.value,te);if(qs===null){_e===null&&(_e=Zt);break}s&&_e&&qs.alternate===null&&r(z,_e),L=v(qs,L,xe),Pe===null?pe=qs:Pe.sibling=qs,Pe=qs,_e=Zt}if(qe.done)return c(z,_e),Ye&&ma(z,xe),pe;if(_e===null){for(;!qe.done;xe++,qe=U.next())qe=ne(z,qe.value,te),qe!==null&&(L=v(qe,L,xe),Pe===null?pe=qe:Pe.sibling=qe,Pe=qe);return Ye&&ma(z,xe),pe}for(_e=h(_e);!qe.done;xe++,qe=U.next())qe=Y(_e,z,xe,qe.value,te),qe!==null&&(s&&qe.alternate!==null&&_e.delete(qe.key===null?xe:qe.key),L=v(qe,L,xe),Pe===null?pe=qe:Pe.sibling=qe,Pe=qe);return s&&_e.forEach(function(fO){return r(z,fO)}),Ye&&ma(z,xe),pe}function st(z,L,U,te){if(typeof U=="object"&&U!==null&&U.type===w&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case b:e:{for(var pe=U.key;L!==null;){if(L.key===pe){if(pe=U.type,pe===w){if(L.tag===7){c(z,L.sibling),te=m(L,U.props.children),te.return=z,z=te;break e}}else if(L.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===I&&ty(pe)===L.type){c(z,L.sibling),te=m(L,U.props),Po(te,U),te.return=z,z=te;break e}c(z,L);break}else r(z,L);L=L.sibling}U.type===w?(te=fa(U.props.children,z.mode,te,U.key),te.return=z,z=te):(te=Ac(U.type,U.key,U.props,null,z.mode,te),Po(te,U),te.return=z,z=te)}return E(z);case _:e:{for(pe=U.key;L!==null;){if(L.key===pe)if(L.tag===4&&L.stateNode.containerInfo===U.containerInfo&&L.stateNode.implementation===U.implementation){c(z,L.sibling),te=m(L,U.children||[]),te.return=z,z=te;break e}else{c(z,L);break}else r(z,L);L=L.sibling}te=mh(U,z.mode,te),te.return=z,z=te}return E(z);case I:return pe=U._init,U=pe(U._payload),st(z,L,U,te)}if(ue(U))return Ee(z,L,U,te);if(H(U)){if(pe=H(U),typeof pe!="function")throw Error(i(150));return U=pe.call(U),we(z,L,U,te)}if(typeof U.then=="function")return st(z,L,qc(U),te);if(U.$$typeof===A)return st(z,L,kc(z,U),te);Gc(z,U)}return typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint"?(U=""+U,L!==null&&L.tag===6?(c(z,L.sibling),te=m(L,U),te.return=z,z=te):(c(z,L),te=gh(U,z.mode,te),te.return=z,z=te),E(z)):c(z,L)}return function(z,L,U,te){try{Lo=0;var pe=st(z,L,U,te);return fr=null,pe}catch(_e){if(_e===Oo||_e===jc)throw _e;var Pe=zn(29,_e,null,z.mode);return Pe.lanes=te,Pe.return=z,Pe}finally{}}}var gr=ny(!0),iy=ny(!1),Qn=Z(null),Ti=null;function Ds(s){var r=s.alternate;re(Bt,Bt.current&1),re(Qn,s),Ti===null&&(r===null||cr.current!==null||r.memoizedState!==null)&&(Ti=s)}function sy(s){if(s.tag===22){if(re(Bt,Bt.current),re(Qn,s),Ti===null){var r=s.alternate;r!==null&&r.memoizedState!==null&&(Ti=s)}}else Ms()}function Ms(){re(Bt,Bt.current),re(Qn,Qn.current)}function Ji(s){ae(Qn),Ti===s&&(Ti=null),ae(Bt)}var Bt=Z(0);function Yc(s){for(var r=s;r!==null;){if(r.tag===13){var c=r.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||If(c)))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}function Wh(s,r,c,h){r=s.memoizedState,c=c(h,r),c=c==null?r:g({},r,c),s.memoizedState=c,s.lanes===0&&(s.updateQueue.baseState=c)}var Kh={enqueueSetState:function(s,r,c){s=s._reactInternals;var h=Hn(),m=Rs(h);m.payload=r,c!=null&&(m.callback=c),r=As(s,m,h),r!==null&&(Bn(r,s,h),Ao(r,s,h))},enqueueReplaceState:function(s,r,c){s=s._reactInternals;var h=Hn(),m=Rs(h);m.tag=1,m.payload=r,c!=null&&(m.callback=c),r=As(s,m,h),r!==null&&(Bn(r,s,h),Ao(r,s,h))},enqueueForceUpdate:function(s,r){s=s._reactInternals;var c=Hn(),h=Rs(c);h.tag=2,r!=null&&(h.callback=r),r=As(s,h,c),r!==null&&(Bn(r,s,c),Ao(r,s,c))}};function ay(s,r,c,h,m,v,E){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(h,v,E):r.prototype&&r.prototype.isPureReactComponent?!yo(c,h)||!yo(m,v):!0}function ry(s,r,c,h){s=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(c,h),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(c,h),r.state!==s&&Kh.enqueueReplaceState(r,r.state,null)}function Sa(s,r){var c=r;if("ref"in r){c={};for(var h in r)h!=="ref"&&(c[h]=r[h])}if(s=s.defaultProps){c===r&&(c=g({},c));for(var m in s)c[m]===void 0&&(c[m]=s[m])}return c}var Wc=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function oy(s){Wc(s)}function ly(s){console.error(s)}function cy(s){Wc(s)}function Kc(s,r){try{var c=s.onUncaughtError;c(r.value,{componentStack:r.stack})}catch(h){setTimeout(function(){throw h})}}function uy(s,r,c){try{var h=s.onCaughtError;h(c.value,{componentStack:c.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function Xh(s,r,c){return c=Rs(c),c.tag=3,c.payload={element:null},c.callback=function(){Kc(s,r)},c}function dy(s){return s=Rs(s),s.tag=3,s}function hy(s,r,c,h){var m=c.type.getDerivedStateFromError;if(typeof m=="function"){var v=h.value;s.payload=function(){return m(v)},s.callback=function(){uy(r,c,h)}}var E=c.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(s.callback=function(){uy(r,c,h),typeof m!="function"&&(zs===null?zs=new Set([this]):zs.add(this));var T=h.stack;this.componentDidCatch(h.value,{componentStack:T!==null?T:""})})}function fC(s,r,c,h,m){if(c.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(r=c.alternate,r!==null&&xo(r,c,m,!0),c=Qn.current,c!==null){switch(c.tag){case 13:return Ti===null?wf():c.alternate===null&&Ct===0&&(Ct=3),c.flags&=-257,c.flags|=65536,c.lanes=m,h===Ch?c.flags|=16384:(r=c.updateQueue,r===null?c.updateQueue=new Set([h]):r.add(h),xf(s,h,m)),!1;case 22:return c.flags|=65536,h===Ch?c.flags|=16384:(r=c.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([h])},c.updateQueue=r):(c=r.retryQueue,c===null?r.retryQueue=new Set([h]):c.add(h)),xf(s,h,m)),!1}throw Error(i(435,c.tag))}return xf(s,h,m),wf(),!1}if(Ye)return r=Qn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=m,h!==yh&&(s=Error(i(422),{cause:h}),So(Yn(s,c)))):(h!==yh&&(r=Error(i(423),{cause:h}),So(Yn(r,c))),s=s.current.alternate,s.flags|=65536,m&=-m,s.lanes|=m,h=Yn(h,c),m=Xh(s.stateNode,h,m),Ah(s,m),Ct!==4&&(Ct=2)),!1;var v=Error(i(520),{cause:h});if(v=Yn(v,c),Vo===null?Vo=[v]:Vo.push(v),Ct!==4&&(Ct=2),r===null)return!0;h=Yn(h,c),c=r;do{switch(c.tag){case 3:return c.flags|=65536,s=m&-m,c.lanes|=s,s=Xh(c.stateNode,h,s),Ah(c,s),!1;case 1:if(r=c.type,v=c.stateNode,(c.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(zs===null||!zs.has(v))))return c.flags|=65536,m&=-m,c.lanes|=m,m=dy(m),hy(m,s,c,h),Ah(c,m),!1}c=c.return}while(c!==null);return!1}var fy=Error(i(461)),Xt=!1;function an(s,r,c,h){r.child=s===null?iy(r,null,c,h):gr(r,s.child,c,h)}function gy(s,r,c,h,m){c=c.render;var v=r.ref;if("ref"in h){var E={};for(var T in h)T!=="ref"&&(E[T]=h[T])}else E=h;return ba(r),h=Nh(s,r,c,E,v,m),T=jh(),s!==null&&!Xt?(Lh(s,r,m),es(s,r,m)):(Ye&&T&&ph(r),r.flags|=1,an(s,r,h,m),r.child)}function my(s,r,c,h,m){if(s===null){var v=c.type;return typeof v=="function"&&!fh(v)&&v.defaultProps===void 0&&c.compare===null?(r.tag=15,r.type=v,py(s,r,v,h,m)):(s=Ac(c.type,null,h,r,r.mode,m),s.ref=r.ref,s.return=r,r.child=s)}if(v=s.child,!af(s,m)){var E=v.memoizedProps;if(c=c.compare,c=c!==null?c:yo,c(E,h)&&s.ref===r.ref)return es(s,r,m)}return r.flags|=1,s=Yi(v,h),s.ref=r.ref,s.return=r,r.child=s}function py(s,r,c,h,m){if(s!==null){var v=s.memoizedProps;if(yo(v,h)&&s.ref===r.ref)if(Xt=!1,r.pendingProps=h=v,af(s,m))(s.flags&131072)!==0&&(Xt=!0);else return r.lanes=s.lanes,es(s,r,m)}return Qh(s,r,c,h,m)}function vy(s,r,c){var h=r.pendingProps,m=h.children,v=s!==null?s.memoizedState:null;if(h.mode==="hidden"){if((r.flags&128)!==0){if(h=v!==null?v.baseLanes|c:c,s!==null){for(m=r.child=s.child,v=0;m!==null;)v=v|m.lanes|m.childLanes,m=m.sibling;r.childLanes=v&~h}else r.childLanes=0,r.child=null;return yy(s,r,h,c)}if((c&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},s!==null&&Nc(r,v!==null?v.cachePool:null),v!==null?pv(r,v):Dh(),sy(r);else return r.lanes=r.childLanes=536870912,yy(s,r,v!==null?v.baseLanes|c:c,c)}else v!==null?(Nc(r,v.cachePool),pv(r,v),Ms(),r.memoizedState=null):(s!==null&&Nc(r,null),Dh(),Ms());return an(s,r,m,c),r.child}function yy(s,r,c,h){var m=Eh();return m=m===null?null:{parent:Ht._currentValue,pool:m},r.memoizedState={baseLanes:c,cachePool:m},s!==null&&Nc(r,null),Dh(),sy(r),s!==null&&xo(s,r,h,!0),null}function Xc(s,r){var c=r.ref;if(c===null)s!==null&&s.ref!==null&&(r.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(i(284));(s===null||s.ref!==c)&&(r.flags|=4194816)}}function Qh(s,r,c,h,m){return ba(r),c=Nh(s,r,c,h,void 0,m),h=jh(),s!==null&&!Xt?(Lh(s,r,m),es(s,r,m)):(Ye&&h&&ph(r),r.flags|=1,an(s,r,c,m),r.child)}function by(s,r,c,h,m,v){return ba(r),r.updateQueue=null,c=yv(r,h,c,m),vv(s),h=jh(),s!==null&&!Xt?(Lh(s,r,v),es(s,r,v)):(Ye&&h&&ph(r),r.flags|=1,an(s,r,c,v),r.child)}function _y(s,r,c,h,m){if(ba(r),r.stateNode===null){var v=sr,E=c.contextType;typeof E=="object"&&E!==null&&(v=hn(E)),v=new c(h,v),r.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=Kh,r.stateNode=v,v._reactInternals=r,v=r.stateNode,v.props=h,v.state=r.memoizedState,v.refs={},Oh(r),E=c.contextType,v.context=typeof E=="object"&&E!==null?hn(E):sr,v.state=r.memoizedState,E=c.getDerivedStateFromProps,typeof E=="function"&&(Wh(r,c,E,h),v.state=r.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(E=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),E!==v.state&&Kh.enqueueReplaceState(v,v.state,null),Do(r,h,v,m),To(),v.state=r.memoizedState),typeof v.componentDidMount=="function"&&(r.flags|=4194308),h=!0}else if(s===null){v=r.stateNode;var T=r.memoizedProps,k=Sa(c,T);v.props=k;var $=v.context,ee=c.contextType;E=sr,typeof ee=="object"&&ee!==null&&(E=hn(ee));var ne=c.getDerivedStateFromProps;ee=typeof ne=="function"||typeof v.getSnapshotBeforeUpdate=="function",T=r.pendingProps!==T,ee||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(T||$!==E)&&ry(r,v,h,E),Os=!1;var G=r.memoizedState;v.state=G,Do(r,h,v,m),To(),$=r.memoizedState,T||G!==$||Os?(typeof ne=="function"&&(Wh(r,c,ne,h),$=r.memoizedState),(k=Os||ay(r,c,k,h,G,$,E))?(ee||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(r.flags|=4194308)):(typeof v.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=h,r.memoizedState=$),v.props=h,v.state=$,v.context=E,h=k):(typeof v.componentDidMount=="function"&&(r.flags|=4194308),h=!1)}else{v=r.stateNode,Rh(s,r),E=r.memoizedProps,ee=Sa(c,E),v.props=ee,ne=r.pendingProps,G=v.context,$=c.contextType,k=sr,typeof $=="object"&&$!==null&&(k=hn($)),T=c.getDerivedStateFromProps,($=typeof T=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(E!==ne||G!==k)&&ry(r,v,h,k),Os=!1,G=r.memoizedState,v.state=G,Do(r,h,v,m),To();var Y=r.memoizedState;E!==ne||G!==Y||Os||s!==null&&s.dependencies!==null&&Mc(s.dependencies)?(typeof T=="function"&&(Wh(r,c,T,h),Y=r.memoizedState),(ee=Os||ay(r,c,ee,h,G,Y,k)||s!==null&&s.dependencies!==null&&Mc(s.dependencies))?($||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(h,Y,k),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(h,Y,k)),typeof v.componentDidUpdate=="function"&&(r.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof v.componentDidUpdate!="function"||E===s.memoizedProps&&G===s.memoizedState||(r.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||E===s.memoizedProps&&G===s.memoizedState||(r.flags|=1024),r.memoizedProps=h,r.memoizedState=Y),v.props=h,v.state=Y,v.context=k,h=ee):(typeof v.componentDidUpdate!="function"||E===s.memoizedProps&&G===s.memoizedState||(r.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||E===s.memoizedProps&&G===s.memoizedState||(r.flags|=1024),h=!1)}return v=h,Xc(s,r),h=(r.flags&128)!==0,v||h?(v=r.stateNode,c=h&&typeof c.getDerivedStateFromError!="function"?null:v.render(),r.flags|=1,s!==null&&h?(r.child=gr(r,s.child,null,m),r.child=gr(r,null,c,m)):an(s,r,c,m),r.memoizedState=v.state,s=r.child):s=es(s,r,m),s}function wy(s,r,c,h){return wo(),r.flags|=256,an(s,r,c,h),r.child}var Zh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Jh(s){return{baseLanes:s,cachePool:lv()}}function ef(s,r,c){return s=s!==null?s.childLanes&~c:0,r&&(s|=Zn),s}function Sy(s,r,c){var h=r.pendingProps,m=!1,v=(r.flags&128)!==0,E;if((E=v)||(E=s!==null&&s.memoizedState===null?!1:(Bt.current&2)!==0),E&&(m=!0,r.flags&=-129),E=(r.flags&32)!==0,r.flags&=-33,s===null){if(Ye){if(m?Ds(r):Ms(),Ye){var T=Et,k;if(k=T){e:{for(k=T,T=Ai;k.nodeType!==8;){if(!T){T=null;break e}if(k=hi(k.nextSibling),k===null){T=null;break e}}T=k}T!==null?(r.memoizedState={dehydrated:T,treeContext:ga!==null?{id:Wi,overflow:Ki}:null,retryLane:536870912,hydrationErrors:null},k=zn(18,null,null,0),k.stateNode=T,k.return=r,r.child=k,_n=r,Et=null,k=!0):k=!1}k||va(r)}if(T=r.memoizedState,T!==null&&(T=T.dehydrated,T!==null))return If(T)?r.lanes=32:r.lanes=536870912,null;Ji(r)}return T=h.children,h=h.fallback,m?(Ms(),m=r.mode,T=Qc({mode:"hidden",children:T},m),h=fa(h,m,c,null),T.return=r,h.return=r,T.sibling=h,r.child=T,m=r.child,m.memoizedState=Jh(c),m.childLanes=ef(s,E,c),r.memoizedState=Zh,h):(Ds(r),tf(r,T))}if(k=s.memoizedState,k!==null&&(T=k.dehydrated,T!==null)){if(v)r.flags&256?(Ds(r),r.flags&=-257,r=nf(s,r,c)):r.memoizedState!==null?(Ms(),r.child=s.child,r.flags|=128,r=null):(Ms(),m=h.fallback,T=r.mode,h=Qc({mode:"visible",children:h.children},T),m=fa(m,T,c,null),m.flags|=2,h.return=r,m.return=r,h.sibling=m,r.child=h,gr(r,s.child,null,c),h=r.child,h.memoizedState=Jh(c),h.childLanes=ef(s,E,c),r.memoizedState=Zh,r=m);else if(Ds(r),If(T)){if(E=T.nextSibling&&T.nextSibling.dataset,E)var $=E.dgst;E=$,h=Error(i(419)),h.stack="",h.digest=E,So({value:h,source:null,stack:null}),r=nf(s,r,c)}else if(Xt||xo(s,r,c,!1),E=(c&s.childLanes)!==0,Xt||E){if(E=ut,E!==null&&(h=c&-c,h=(h&42)!==0?1:un(h),h=(h&(E.suspendedLanes|c))!==0?0:h,h!==0&&h!==k.retryLane))throw k.retryLane=h,ir(s,h),Bn(E,s,h),fy;T.data==="$?"||wf(),r=nf(s,r,c)}else T.data==="$?"?(r.flags|=192,r.child=s.child,r=null):(s=k.treeContext,Et=hi(T.nextSibling),_n=r,Ye=!0,pa=null,Ai=!1,s!==null&&(Kn[Xn++]=Wi,Kn[Xn++]=Ki,Kn[Xn++]=ga,Wi=s.id,Ki=s.overflow,ga=r),r=tf(r,h.children),r.flags|=4096);return r}return m?(Ms(),m=h.fallback,T=r.mode,k=s.child,$=k.sibling,h=Yi(k,{mode:"hidden",children:h.children}),h.subtreeFlags=k.subtreeFlags&65011712,$!==null?m=Yi($,m):(m=fa(m,T,c,null),m.flags|=2),m.return=r,h.return=r,h.sibling=m,r.child=h,h=m,m=r.child,T=s.child.memoizedState,T===null?T=Jh(c):(k=T.cachePool,k!==null?($=Ht._currentValue,k=k.parent!==$?{parent:$,pool:$}:k):k=lv(),T={baseLanes:T.baseLanes|c,cachePool:k}),m.memoizedState=T,m.childLanes=ef(s,E,c),r.memoizedState=Zh,h):(Ds(r),c=s.child,s=c.sibling,c=Yi(c,{mode:"visible",children:h.children}),c.return=r,c.sibling=null,s!==null&&(E=r.deletions,E===null?(r.deletions=[s],r.flags|=16):E.push(s)),r.child=c,r.memoizedState=null,c)}function tf(s,r){return r=Qc({mode:"visible",children:r},s.mode),r.return=s,s.child=r}function Qc(s,r){return s=zn(22,s,null,r),s.lanes=0,s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},s}function nf(s,r,c){return gr(r,s.child,null,c),s=tf(r,r.pendingProps.children),s.flags|=2,r.memoizedState=null,s}function xy(s,r,c){s.lanes|=r;var h=s.alternate;h!==null&&(h.lanes|=r),_h(s.return,r,c)}function sf(s,r,c,h,m){var v=s.memoizedState;v===null?s.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:h,tail:c,tailMode:m}:(v.isBackwards=r,v.rendering=null,v.renderingStartTime=0,v.last=h,v.tail=c,v.tailMode=m)}function Ey(s,r,c){var h=r.pendingProps,m=h.revealOrder,v=h.tail;if(an(s,r,h.children,c),h=Bt.current,(h&2)!==0)h=h&1|2,r.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=r.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&xy(s,c,r);else if(s.tag===19)xy(s,c,r);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}h&=1}switch(re(Bt,h),m){case"forwards":for(c=r.child,m=null;c!==null;)s=c.alternate,s!==null&&Yc(s)===null&&(m=c),c=c.sibling;c=m,c===null?(m=r.child,r.child=null):(m=c.sibling,c.sibling=null),sf(r,!1,m,c,v);break;case"backwards":for(c=null,m=r.child,r.child=null;m!==null;){if(s=m.alternate,s!==null&&Yc(s)===null){r.child=m;break}s=m.sibling,m.sibling=c,c=m,m=s}sf(r,!0,c,null,v);break;case"together":sf(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function es(s,r,c){if(s!==null&&(r.dependencies=s.dependencies),Ps|=r.lanes,(c&r.childLanes)===0)if(s!==null){if(xo(s,r,c,!1),(c&r.childLanes)===0)return null}else return null;if(s!==null&&r.child!==s.child)throw Error(i(153));if(r.child!==null){for(s=r.child,c=Yi(s,s.pendingProps),r.child=c,c.return=r;s.sibling!==null;)s=s.sibling,c=c.sibling=Yi(s,s.pendingProps),c.return=r;c.sibling=null}return r.child}function af(s,r){return(s.lanes&r)!==0?!0:(s=s.dependencies,!!(s!==null&&Mc(s)))}function gC(s,r,c){switch(r.tag){case 3:fe(r,r.stateNode.containerInfo),Cs(r,Ht,s.memoizedState.cache),wo();break;case 27:case 5:Le(r);break;case 4:fe(r,r.stateNode.containerInfo);break;case 10:Cs(r,r.type,r.memoizedProps.value);break;case 13:var h=r.memoizedState;if(h!==null)return h.dehydrated!==null?(Ds(r),r.flags|=128,null):(c&r.child.childLanes)!==0?Sy(s,r,c):(Ds(r),s=es(s,r,c),s!==null?s.sibling:null);Ds(r);break;case 19:var m=(s.flags&128)!==0;if(h=(c&r.childLanes)!==0,h||(xo(s,r,c,!1),h=(c&r.childLanes)!==0),m){if(h)return Ey(s,r,c);r.flags|=128}if(m=r.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),re(Bt,Bt.current),h)break;return null;case 22:case 23:return r.lanes=0,vy(s,r,c);case 24:Cs(r,Ht,s.memoizedState.cache)}return es(s,r,c)}function Cy(s,r,c){if(s!==null)if(s.memoizedProps!==r.pendingProps)Xt=!0;else{if(!af(s,c)&&(r.flags&128)===0)return Xt=!1,gC(s,r,c);Xt=(s.flags&131072)!==0}else Xt=!1,Ye&&(r.flags&1048576)!==0&&tv(r,Dc,r.index);switch(r.lanes=0,r.tag){case 16:e:{s=r.pendingProps;var h=r.elementType,m=h._init;if(h=m(h._payload),r.type=h,typeof h=="function")fh(h)?(s=Sa(h,s),r.tag=1,r=_y(null,r,h,s,c)):(r.tag=0,r=Qh(null,r,h,s,c));else{if(h!=null){if(m=h.$$typeof,m===M){r.tag=11,r=gy(null,r,h,s,c);break e}else if(m===F){r.tag=14,r=my(null,r,h,s,c);break e}}throw r=se(h)||h,Error(i(306,r,""))}}return r;case 0:return Qh(s,r,r.type,r.pendingProps,c);case 1:return h=r.type,m=Sa(h,r.pendingProps),_y(s,r,h,m,c);case 3:e:{if(fe(r,r.stateNode.containerInfo),s===null)throw Error(i(387));h=r.pendingProps;var v=r.memoizedState;m=v.element,Rh(s,r),Do(r,h,null,c);var E=r.memoizedState;if(h=E.cache,Cs(r,Ht,h),h!==v.cache&&wh(r,[Ht],c,!0),To(),h=E.element,v.isDehydrated)if(v={element:h,isDehydrated:!1,cache:E.cache},r.updateQueue.baseState=v,r.memoizedState=v,r.flags&256){r=wy(s,r,h,c);break e}else if(h!==m){m=Yn(Error(i(424)),r),So(m),r=wy(s,r,h,c);break e}else{switch(s=r.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(Et=hi(s.firstChild),_n=r,Ye=!0,pa=null,Ai=!0,c=iy(r,null,h,c),r.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(wo(),h===m){r=es(s,r,c);break e}an(s,r,h,c)}r=r.child}return r;case 26:return Xc(s,r),s===null?(c=Tb(r.type,null,r.pendingProps,null))?r.memoizedState=c:Ye||(c=r.type,s=r.pendingProps,h=du(q.current).createElement(c),h[ft]=r,h[gt]=s,on(h,c,s),Kt(h),r.stateNode=h):r.memoizedState=Tb(r.type,s.memoizedProps,r.pendingProps,s.memoizedState),null;case 27:return Le(r),s===null&&Ye&&(h=r.stateNode=Ob(r.type,r.pendingProps,q.current),_n=r,Ai=!0,m=Et,Us(r.type)?(Ff=m,Et=hi(h.firstChild)):Et=m),an(s,r,r.pendingProps.children,c),Xc(s,r),s===null&&(r.flags|=4194304),r.child;case 5:return s===null&&Ye&&((m=h=Et)&&(h=BC(h,r.type,r.pendingProps,Ai),h!==null?(r.stateNode=h,_n=r,Et=hi(h.firstChild),Ai=!1,m=!0):m=!1),m||va(r)),Le(r),m=r.type,v=r.pendingProps,E=s!==null?s.memoizedProps:null,h=v.children,Lf(m,v)?h=null:E!==null&&Lf(m,E)&&(r.flags|=32),r.memoizedState!==null&&(m=Nh(s,r,rC,null,null,c),Zo._currentValue=m),Xc(s,r),an(s,r,h,c),r.child;case 6:return s===null&&Ye&&((s=c=Et)&&(c=VC(c,r.pendingProps,Ai),c!==null?(r.stateNode=c,_n=r,Et=null,s=!0):s=!1),s||va(r)),null;case 13:return Sy(s,r,c);case 4:return fe(r,r.stateNode.containerInfo),h=r.pendingProps,s===null?r.child=gr(r,null,h,c):an(s,r,h,c),r.child;case 11:return gy(s,r,r.type,r.pendingProps,c);case 7:return an(s,r,r.pendingProps,c),r.child;case 8:return an(s,r,r.pendingProps.children,c),r.child;case 12:return an(s,r,r.pendingProps.children,c),r.child;case 10:return h=r.pendingProps,Cs(r,r.type,h.value),an(s,r,h.children,c),r.child;case 9:return m=r.type._context,h=r.pendingProps.children,ba(r),m=hn(m),h=h(m),r.flags|=1,an(s,r,h,c),r.child;case 14:return my(s,r,r.type,r.pendingProps,c);case 15:return py(s,r,r.type,r.pendingProps,c);case 19:return Ey(s,r,c);case 31:return h=r.pendingProps,c=r.mode,h={mode:h.mode,children:h.children},s===null?(c=Qc(h,c),c.ref=r.ref,r.child=c,c.return=r,r=c):(c=Yi(s.child,h),c.ref=r.ref,r.child=c,c.return=r,r=c),r;case 22:return vy(s,r,c);case 24:return ba(r),h=hn(Ht),s===null?(m=Eh(),m===null&&(m=ut,v=Sh(),m.pooledCache=v,v.refCount++,v!==null&&(m.pooledCacheLanes|=c),m=v),r.memoizedState={parent:h,cache:m},Oh(r),Cs(r,Ht,m)):((s.lanes&c)!==0&&(Rh(s,r),Do(r,null,null,c),To()),m=s.memoizedState,v=r.memoizedState,m.parent!==h?(m={parent:h,cache:h},r.memoizedState=m,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=m),Cs(r,Ht,h)):(h=v.cache,Cs(r,Ht,h),h!==m.cache&&wh(r,[Ht],c,!0))),an(s,r,r.pendingProps.children,c),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function ts(s){s.flags|=4}function Oy(s,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!jb(r)){if(r=Qn.current,r!==null&&((Be&4194048)===Be?Ti!==null:(Be&62914560)!==Be&&(Be&536870912)===0||r!==Ti))throw Ro=Ch,cv;s.flags|=8192}}function Zc(s,r){r!==null&&(s.flags|=4),s.flags&16384&&(r=s.tag!==22?fc():536870912,s.lanes|=r,yr|=r)}function zo(s,r){if(!Ye)switch(s.tailMode){case"hidden":r=s.tail;for(var c=null;r!==null;)r.alternate!==null&&(c=r),r=r.sibling;c===null?s.tail=null:c.sibling=null;break;case"collapsed":c=s.tail;for(var h=null;c!==null;)c.alternate!==null&&(h=c),c=c.sibling;h===null?r||s.tail===null?s.tail=null:s.tail.sibling=null:h.sibling=null}}function St(s){var r=s.alternate!==null&&s.alternate.child===s.child,c=0,h=0;if(r)for(var m=s.child;m!==null;)c|=m.lanes|m.childLanes,h|=m.subtreeFlags&65011712,h|=m.flags&65011712,m.return=s,m=m.sibling;else for(m=s.child;m!==null;)c|=m.lanes|m.childLanes,h|=m.subtreeFlags,h|=m.flags,m.return=s,m=m.sibling;return s.subtreeFlags|=h,s.childLanes=c,r}function mC(s,r,c){var h=r.pendingProps;switch(vh(r),r.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return St(r),null;case 1:return St(r),null;case 3:return c=r.stateNode,h=null,s!==null&&(h=s.memoizedState.cache),r.memoizedState.cache!==h&&(r.flags|=2048),Qi(Ht),Ne(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(s===null||s.child===null)&&(_o(r)?ts(r):s===null||s.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,sv())),St(r),null;case 26:return c=r.memoizedState,s===null?(ts(r),c!==null?(St(r),Oy(r,c)):(St(r),r.flags&=-16777217)):c?c!==s.memoizedState?(ts(r),St(r),Oy(r,c)):(St(r),r.flags&=-16777217):(s.memoizedProps!==h&&ts(r),St(r),r.flags&=-16777217),null;case 27:vt(r),c=q.current;var m=r.type;if(s!==null&&r.stateNode!=null)s.memoizedProps!==h&&ts(r);else{if(!h){if(r.stateNode===null)throw Error(i(166));return St(r),null}s=me.current,_o(r)?nv(r):(s=Ob(m,h,c),r.stateNode=s,ts(r))}return St(r),null;case 5:if(vt(r),c=r.type,s!==null&&r.stateNode!=null)s.memoizedProps!==h&&ts(r);else{if(!h){if(r.stateNode===null)throw Error(i(166));return St(r),null}if(s=me.current,_o(r))nv(r);else{switch(m=du(q.current),s){case 1:s=m.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:s=m.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":s=m.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":s=m.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":s=m.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof h.is=="string"?m.createElement("select",{is:h.is}):m.createElement("select"),h.multiple?s.multiple=!0:h.size&&(s.size=h.size);break;default:s=typeof h.is=="string"?m.createElement(c,{is:h.is}):m.createElement(c)}}s[ft]=r,s[gt]=h;e:for(m=r.child;m!==null;){if(m.tag===5||m.tag===6)s.appendChild(m.stateNode);else if(m.tag!==4&&m.tag!==27&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===r)break e;for(;m.sibling===null;){if(m.return===null||m.return===r)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}r.stateNode=s;e:switch(on(s,c,h),c){case"button":case"input":case"select":case"textarea":s=!!h.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&ts(r)}}return St(r),r.flags&=-16777217,null;case 6:if(s&&r.stateNode!=null)s.memoizedProps!==h&&ts(r);else{if(typeof h!="string"&&r.stateNode===null)throw Error(i(166));if(s=q.current,_o(r)){if(s=r.stateNode,c=r.memoizedProps,h=null,m=_n,m!==null)switch(m.tag){case 27:case 5:h=m.memoizedProps}s[ft]=r,s=!!(s.nodeValue===c||h!==null&&h.suppressHydrationWarning===!0||bb(s.nodeValue,c)),s||va(r)}else s=du(s).createTextNode(h),s[ft]=r,r.stateNode=s}return St(r),null;case 13:if(h=r.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(m=_o(r),h!==null&&h.dehydrated!==null){if(s===null){if(!m)throw Error(i(318));if(m=r.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(i(317));m[ft]=r}else wo(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;St(r),m=!1}else m=sv(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=m),m=!0;if(!m)return r.flags&256?(Ji(r),r):(Ji(r),null)}if(Ji(r),(r.flags&128)!==0)return r.lanes=c,r;if(c=h!==null,s=s!==null&&s.memoizedState!==null,c){h=r.child,m=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(m=h.alternate.memoizedState.cachePool.pool);var v=null;h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(v=h.memoizedState.cachePool.pool),v!==m&&(h.flags|=2048)}return c!==s&&c&&(r.child.flags|=8192),Zc(r,r.updateQueue),St(r),null;case 4:return Ne(),s===null&&Df(r.stateNode.containerInfo),St(r),null;case 10:return Qi(r.type),St(r),null;case 19:if(ae(Bt),m=r.memoizedState,m===null)return St(r),null;if(h=(r.flags&128)!==0,v=m.rendering,v===null)if(h)zo(m,!1);else{if(Ct!==0||s!==null&&(s.flags&128)!==0)for(s=r.child;s!==null;){if(v=Yc(s),v!==null){for(r.flags|=128,zo(m,!1),s=v.updateQueue,r.updateQueue=s,Zc(r,s),r.subtreeFlags=0,s=c,c=r.child;c!==null;)ev(c,s),c=c.sibling;return re(Bt,Bt.current&1|2),r.child}s=s.sibling}m.tail!==null&&At()>tu&&(r.flags|=128,h=!0,zo(m,!1),r.lanes=4194304)}else{if(!h)if(s=Yc(v),s!==null){if(r.flags|=128,h=!0,s=s.updateQueue,r.updateQueue=s,Zc(r,s),zo(m,!0),m.tail===null&&m.tailMode==="hidden"&&!v.alternate&&!Ye)return St(r),null}else 2*At()-m.renderingStartTime>tu&&c!==536870912&&(r.flags|=128,h=!0,zo(m,!1),r.lanes=4194304);m.isBackwards?(v.sibling=r.child,r.child=v):(s=m.last,s!==null?s.sibling=v:r.child=v,m.last=v)}return m.tail!==null?(r=m.tail,m.rendering=r,m.tail=r.sibling,m.renderingStartTime=At(),r.sibling=null,s=Bt.current,re(Bt,h?s&1|2:s&1),r):(St(r),null);case 22:case 23:return Ji(r),Mh(),h=r.memoizedState!==null,s!==null?s.memoizedState!==null!==h&&(r.flags|=8192):h&&(r.flags|=8192),h?(c&536870912)!==0&&(r.flags&128)===0&&(St(r),r.subtreeFlags&6&&(r.flags|=8192)):St(r),c=r.updateQueue,c!==null&&Zc(r,c.retryQueue),c=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),h=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(h=r.memoizedState.cachePool.pool),h!==c&&(r.flags|=2048),s!==null&&ae(_a),null;case 24:return c=null,s!==null&&(c=s.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),Qi(Ht),St(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function pC(s,r){switch(vh(r),r.tag){case 1:return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 3:return Qi(Ht),Ne(),s=r.flags,(s&65536)!==0&&(s&128)===0?(r.flags=s&-65537|128,r):null;case 26:case 27:case 5:return vt(r),null;case 13:if(Ji(r),s=r.memoizedState,s!==null&&s.dehydrated!==null){if(r.alternate===null)throw Error(i(340));wo()}return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 19:return ae(Bt),null;case 4:return Ne(),null;case 10:return Qi(r.type),null;case 22:case 23:return Ji(r),Mh(),s!==null&&ae(_a),s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 24:return Qi(Ht),null;case 25:return null;default:return null}}function Ry(s,r){switch(vh(r),r.tag){case 3:Qi(Ht),Ne();break;case 26:case 27:case 5:vt(r);break;case 4:Ne();break;case 13:Ji(r);break;case 19:ae(Bt);break;case 10:Qi(r.type);break;case 22:case 23:Ji(r),Mh(),s!==null&&ae(_a);break;case 24:Qi(Ht)}}function Io(s,r){try{var c=r.updateQueue,h=c!==null?c.lastEffect:null;if(h!==null){var m=h.next;c=m;do{if((c.tag&s)===s){h=void 0;var v=c.create,E=c.inst;h=v(),E.destroy=h}c=c.next}while(c!==m)}}catch(T){rt(r,r.return,T)}}function ks(s,r,c){try{var h=r.updateQueue,m=h!==null?h.lastEffect:null;if(m!==null){var v=m.next;h=v;do{if((h.tag&s)===s){var E=h.inst,T=E.destroy;if(T!==void 0){E.destroy=void 0,m=r;var k=c,$=T;try{$()}catch(ee){rt(m,k,ee)}}}h=h.next}while(h!==v)}}catch(ee){rt(r,r.return,ee)}}function Ay(s){var r=s.updateQueue;if(r!==null){var c=s.stateNode;try{mv(r,c)}catch(h){rt(s,s.return,h)}}}function Ty(s,r,c){c.props=Sa(s.type,s.memoizedProps),c.state=s.memoizedState;try{c.componentWillUnmount()}catch(h){rt(s,r,h)}}function Fo(s,r){try{var c=s.ref;if(c!==null){switch(s.tag){case 26:case 27:case 5:var h=s.stateNode;break;case 30:h=s.stateNode;break;default:h=s.stateNode}typeof c=="function"?s.refCleanup=c(h):c.current=h}}catch(m){rt(s,r,m)}}function Di(s,r){var c=s.ref,h=s.refCleanup;if(c!==null)if(typeof h=="function")try{h()}catch(m){rt(s,r,m)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(m){rt(s,r,m)}else c.current=null}function Dy(s){var r=s.type,c=s.memoizedProps,h=s.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":c.autoFocus&&h.focus();break e;case"img":c.src?h.src=c.src:c.srcSet&&(h.srcset=c.srcSet)}}catch(m){rt(s,s.return,m)}}function rf(s,r,c){try{var h=s.stateNode;zC(h,s.type,c,r),h[gt]=r}catch(m){rt(s,s.return,m)}}function My(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Us(s.type)||s.tag===4}function of(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||My(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Us(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function lf(s,r,c){var h=s.tag;if(h===5||h===6)s=s.stateNode,r?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(s,r):(r=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,r.appendChild(s),c=c._reactRootContainer,c!=null||r.onclick!==null||(r.onclick=uu));else if(h!==4&&(h===27&&Us(s.type)&&(c=s.stateNode,r=null),s=s.child,s!==null))for(lf(s,r,c),s=s.sibling;s!==null;)lf(s,r,c),s=s.sibling}function Jc(s,r,c){var h=s.tag;if(h===5||h===6)s=s.stateNode,r?c.insertBefore(s,r):c.appendChild(s);else if(h!==4&&(h===27&&Us(s.type)&&(c=s.stateNode),s=s.child,s!==null))for(Jc(s,r,c),s=s.sibling;s!==null;)Jc(s,r,c),s=s.sibling}function ky(s){var r=s.stateNode,c=s.memoizedProps;try{for(var h=s.type,m=r.attributes;m.length;)r.removeAttributeNode(m[0]);on(r,h,c),r[ft]=s,r[gt]=c}catch(v){rt(s,s.return,v)}}var ns=!1,Dt=!1,cf=!1,Ny=typeof WeakSet=="function"?WeakSet:Set,Qt=null;function vC(s,r){if(s=s.containerInfo,Nf=vu,s=$p(s),rh(s)){if("selectionStart"in s)var c={start:s.selectionStart,end:s.selectionEnd};else e:{c=(c=s.ownerDocument)&&c.defaultView||window;var h=c.getSelection&&c.getSelection();if(h&&h.rangeCount!==0){c=h.anchorNode;var m=h.anchorOffset,v=h.focusNode;h=h.focusOffset;try{c.nodeType,v.nodeType}catch{c=null;break e}var E=0,T=-1,k=-1,$=0,ee=0,ne=s,G=null;t:for(;;){for(var Y;ne!==c||m!==0&&ne.nodeType!==3||(T=E+m),ne!==v||h!==0&&ne.nodeType!==3||(k=E+h),ne.nodeType===3&&(E+=ne.nodeValue.length),(Y=ne.firstChild)!==null;)G=ne,ne=Y;for(;;){if(ne===s)break t;if(G===c&&++$===m&&(T=E),G===v&&++ee===h&&(k=E),(Y=ne.nextSibling)!==null)break;ne=G,G=ne.parentNode}ne=Y}c=T===-1||k===-1?null:{start:T,end:k}}else c=null}c=c||{start:0,end:0}}else c=null;for(jf={focusedElem:s,selectionRange:c},vu=!1,Qt=r;Qt!==null;)if(r=Qt,s=r.child,(r.subtreeFlags&1024)!==0&&s!==null)s.return=r,Qt=s;else for(;Qt!==null;){switch(r=Qt,v=r.alternate,s=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&v!==null){s=void 0,c=r,m=v.memoizedProps,v=v.memoizedState,h=c.stateNode;try{var Ee=Sa(c.type,m,c.elementType===c.type);s=h.getSnapshotBeforeUpdate(Ee,v),h.__reactInternalSnapshotBeforeUpdate=s}catch(we){rt(c,c.return,we)}}break;case 3:if((s&1024)!==0){if(s=r.stateNode.containerInfo,c=s.nodeType,c===9)zf(s);else if(c===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":zf(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=r.sibling,s!==null){s.return=r.return,Qt=s;break}Qt=r.return}}function jy(s,r,c){var h=c.flags;switch(c.tag){case 0:case 11:case 15:Ns(s,c),h&4&&Io(5,c);break;case 1:if(Ns(s,c),h&4)if(s=c.stateNode,r===null)try{s.componentDidMount()}catch(E){rt(c,c.return,E)}else{var m=Sa(c.type,r.memoizedProps);r=r.memoizedState;try{s.componentDidUpdate(m,r,s.__reactInternalSnapshotBeforeUpdate)}catch(E){rt(c,c.return,E)}}h&64&&Ay(c),h&512&&Fo(c,c.return);break;case 3:if(Ns(s,c),h&64&&(s=c.updateQueue,s!==null)){if(r=null,c.child!==null)switch(c.child.tag){case 27:case 5:r=c.child.stateNode;break;case 1:r=c.child.stateNode}try{mv(s,r)}catch(E){rt(c,c.return,E)}}break;case 27:r===null&&h&4&&ky(c);case 26:case 5:Ns(s,c),r===null&&h&4&&Dy(c),h&512&&Fo(c,c.return);break;case 12:Ns(s,c);break;case 13:Ns(s,c),h&4&&zy(s,c),h&64&&(s=c.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(c=OC.bind(null,c),$C(s,c))));break;case 22:if(h=c.memoizedState!==null||ns,!h){r=r!==null&&r.memoizedState!==null||Dt,m=ns;var v=Dt;ns=h,(Dt=r)&&!v?js(s,c,(c.subtreeFlags&8772)!==0):Ns(s,c),ns=m,Dt=v}break;case 30:break;default:Ns(s,c)}}function Ly(s){var r=s.alternate;r!==null&&(s.alternate=null,Ly(r)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(r=s.stateNode,r!==null&&Hd(r)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var yt=null,An=!1;function is(s,r,c){for(c=c.child;c!==null;)Py(s,r,c),c=c.sibling}function Py(s,r,c){if(Se&&typeof Se.onCommitFiberUnmount=="function")try{Se.onCommitFiberUnmount(ve,c)}catch{}switch(c.tag){case 26:Dt||Di(c,r),is(s,r,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:Dt||Di(c,r);var h=yt,m=An;Us(c.type)&&(yt=c.stateNode,An=!1),is(s,r,c),Wo(c.stateNode),yt=h,An=m;break;case 5:Dt||Di(c,r);case 6:if(h=yt,m=An,yt=null,is(s,r,c),yt=h,An=m,yt!==null)if(An)try{(yt.nodeType===9?yt.body:yt.nodeName==="HTML"?yt.ownerDocument.body:yt).removeChild(c.stateNode)}catch(v){rt(c,r,v)}else try{yt.removeChild(c.stateNode)}catch(v){rt(c,r,v)}break;case 18:yt!==null&&(An?(s=yt,Eb(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,c.stateNode),nl(s)):Eb(yt,c.stateNode));break;case 4:h=yt,m=An,yt=c.stateNode.containerInfo,An=!0,is(s,r,c),yt=h,An=m;break;case 0:case 11:case 14:case 15:Dt||ks(2,c,r),Dt||ks(4,c,r),is(s,r,c);break;case 1:Dt||(Di(c,r),h=c.stateNode,typeof h.componentWillUnmount=="function"&&Ty(c,r,h)),is(s,r,c);break;case 21:is(s,r,c);break;case 22:Dt=(h=Dt)||c.memoizedState!==null,is(s,r,c),Dt=h;break;default:is(s,r,c)}}function zy(s,r){if(r.memoizedState===null&&(s=r.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{nl(s)}catch(c){rt(r,r.return,c)}}function yC(s){switch(s.tag){case 13:case 19:var r=s.stateNode;return r===null&&(r=s.stateNode=new Ny),r;case 22:return s=s.stateNode,r=s._retryCache,r===null&&(r=s._retryCache=new Ny),r;default:throw Error(i(435,s.tag))}}function uf(s,r){var c=yC(s);r.forEach(function(h){var m=RC.bind(null,s,h);c.has(h)||(c.add(h),h.then(m,m))})}function In(s,r){var c=r.deletions;if(c!==null)for(var h=0;h<c.length;h++){var m=c[h],v=s,E=r,T=E;e:for(;T!==null;){switch(T.tag){case 27:if(Us(T.type)){yt=T.stateNode,An=!1;break e}break;case 5:yt=T.stateNode,An=!1;break e;case 3:case 4:yt=T.stateNode.containerInfo,An=!0;break e}T=T.return}if(yt===null)throw Error(i(160));Py(v,E,m),yt=null,An=!1,v=m.alternate,v!==null&&(v.return=null),m.return=null}if(r.subtreeFlags&13878)for(r=r.child;r!==null;)Iy(r,s),r=r.sibling}var di=null;function Iy(s,r){var c=s.alternate,h=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:In(r,s),Fn(s),h&4&&(ks(3,s,s.return),Io(3,s),ks(5,s,s.return));break;case 1:In(r,s),Fn(s),h&512&&(Dt||c===null||Di(c,c.return)),h&64&&ns&&(s=s.updateQueue,s!==null&&(h=s.callbacks,h!==null&&(c=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=c===null?h:c.concat(h))));break;case 26:var m=di;if(In(r,s),Fn(s),h&512&&(Dt||c===null||Di(c,c.return)),h&4){var v=c!==null?c.memoizedState:null;if(h=s.memoizedState,c===null)if(h===null)if(s.stateNode===null){e:{h=s.type,c=s.memoizedProps,m=m.ownerDocument||m;t:switch(h){case"title":v=m.getElementsByTagName("title")[0],(!v||v[$i]||v[ft]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=m.createElement(h),m.head.insertBefore(v,m.querySelector("head > title"))),on(v,h,c),v[ft]=s,Kt(v),h=v;break e;case"link":var E=kb("link","href",m).get(h+(c.href||""));if(E){for(var T=0;T<E.length;T++)if(v=E[T],v.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&v.getAttribute("rel")===(c.rel==null?null:c.rel)&&v.getAttribute("title")===(c.title==null?null:c.title)&&v.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){E.splice(T,1);break t}}v=m.createElement(h),on(v,h,c),m.head.appendChild(v);break;case"meta":if(E=kb("meta","content",m).get(h+(c.content||""))){for(T=0;T<E.length;T++)if(v=E[T],v.getAttribute("content")===(c.content==null?null:""+c.content)&&v.getAttribute("name")===(c.name==null?null:c.name)&&v.getAttribute("property")===(c.property==null?null:c.property)&&v.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&v.getAttribute("charset")===(c.charSet==null?null:c.charSet)){E.splice(T,1);break t}}v=m.createElement(h),on(v,h,c),m.head.appendChild(v);break;default:throw Error(i(468,h))}v[ft]=s,Kt(v),h=v}s.stateNode=h}else Nb(m,s.type,s.stateNode);else s.stateNode=Mb(m,h,s.memoizedProps);else v!==h?(v===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):v.count--,h===null?Nb(m,s.type,s.stateNode):Mb(m,h,s.memoizedProps)):h===null&&s.stateNode!==null&&rf(s,s.memoizedProps,c.memoizedProps)}break;case 27:In(r,s),Fn(s),h&512&&(Dt||c===null||Di(c,c.return)),c!==null&&h&4&&rf(s,s.memoizedProps,c.memoizedProps);break;case 5:if(In(r,s),Fn(s),h&512&&(Dt||c===null||Di(c,c.return)),s.flags&32){m=s.stateNode;try{Xa(m,"")}catch(Y){rt(s,s.return,Y)}}h&4&&s.stateNode!=null&&(m=s.memoizedProps,rf(s,m,c!==null?c.memoizedProps:m)),h&1024&&(cf=!0);break;case 6:if(In(r,s),Fn(s),h&4){if(s.stateNode===null)throw Error(i(162));h=s.memoizedProps,c=s.stateNode;try{c.nodeValue=h}catch(Y){rt(s,s.return,Y)}}break;case 3:if(gu=null,m=di,di=hu(r.containerInfo),In(r,s),di=m,Fn(s),h&4&&c!==null&&c.memoizedState.isDehydrated)try{nl(r.containerInfo)}catch(Y){rt(s,s.return,Y)}cf&&(cf=!1,Fy(s));break;case 4:h=di,di=hu(s.stateNode.containerInfo),In(r,s),Fn(s),di=h;break;case 12:In(r,s),Fn(s);break;case 13:In(r,s),Fn(s),s.child.flags&8192&&s.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(pf=At()),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,uf(s,h)));break;case 22:m=s.memoizedState!==null;var k=c!==null&&c.memoizedState!==null,$=ns,ee=Dt;if(ns=$||m,Dt=ee||k,In(r,s),Dt=ee,ns=$,Fn(s),h&8192)e:for(r=s.stateNode,r._visibility=m?r._visibility&-2:r._visibility|1,m&&(c===null||k||ns||Dt||xa(s)),c=null,r=s;;){if(r.tag===5||r.tag===26){if(c===null){k=c=r;try{if(v=k.stateNode,m)E=v.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{T=k.stateNode;var ne=k.memoizedProps.style,G=ne!=null&&ne.hasOwnProperty("display")?ne.display:null;T.style.display=G==null||typeof G=="boolean"?"":(""+G).trim()}}catch(Y){rt(k,k.return,Y)}}}else if(r.tag===6){if(c===null){k=r;try{k.stateNode.nodeValue=m?"":k.memoizedProps}catch(Y){rt(k,k.return,Y)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===s)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;c===r&&(c=null),r=r.return}c===r&&(c=null),r.sibling.return=r.return,r=r.sibling}h&4&&(h=s.updateQueue,h!==null&&(c=h.retryQueue,c!==null&&(h.retryQueue=null,uf(s,c))));break;case 19:In(r,s),Fn(s),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,uf(s,h)));break;case 30:break;case 21:break;default:In(r,s),Fn(s)}}function Fn(s){var r=s.flags;if(r&2){try{for(var c,h=s.return;h!==null;){if(My(h)){c=h;break}h=h.return}if(c==null)throw Error(i(160));switch(c.tag){case 27:var m=c.stateNode,v=of(s);Jc(s,v,m);break;case 5:var E=c.stateNode;c.flags&32&&(Xa(E,""),c.flags&=-33);var T=of(s);Jc(s,T,E);break;case 3:case 4:var k=c.stateNode.containerInfo,$=of(s);lf(s,$,k);break;default:throw Error(i(161))}}catch(ee){rt(s,s.return,ee)}s.flags&=-3}r&4096&&(s.flags&=-4097)}function Fy(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var r=s;Fy(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),s=s.sibling}}function Ns(s,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)jy(s,r.alternate,r),r=r.sibling}function xa(s){for(s=s.child;s!==null;){var r=s;switch(r.tag){case 0:case 11:case 14:case 15:ks(4,r,r.return),xa(r);break;case 1:Di(r,r.return);var c=r.stateNode;typeof c.componentWillUnmount=="function"&&Ty(r,r.return,c),xa(r);break;case 27:Wo(r.stateNode);case 26:case 5:Di(r,r.return),xa(r);break;case 22:r.memoizedState===null&&xa(r);break;case 30:xa(r);break;default:xa(r)}s=s.sibling}}function js(s,r,c){for(c=c&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var h=r.alternate,m=s,v=r,E=v.flags;switch(v.tag){case 0:case 11:case 15:js(m,v,c),Io(4,v);break;case 1:if(js(m,v,c),h=v,m=h.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch($){rt(h,h.return,$)}if(h=v,m=h.updateQueue,m!==null){var T=h.stateNode;try{var k=m.shared.hiddenCallbacks;if(k!==null)for(m.shared.hiddenCallbacks=null,m=0;m<k.length;m++)gv(k[m],T)}catch($){rt(h,h.return,$)}}c&&E&64&&Ay(v),Fo(v,v.return);break;case 27:ky(v);case 26:case 5:js(m,v,c),c&&h===null&&E&4&&Dy(v),Fo(v,v.return);break;case 12:js(m,v,c);break;case 13:js(m,v,c),c&&E&4&&zy(m,v);break;case 22:v.memoizedState===null&&js(m,v,c),Fo(v,v.return);break;case 30:break;default:js(m,v,c)}r=r.sibling}}function df(s,r){var c=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),s=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(s=r.memoizedState.cachePool.pool),s!==c&&(s!=null&&s.refCount++,c!=null&&Eo(c))}function hf(s,r){s=null,r.alternate!==null&&(s=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==s&&(r.refCount++,s!=null&&Eo(s))}function Mi(s,r,c,h){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Uy(s,r,c,h),r=r.sibling}function Uy(s,r,c,h){var m=r.flags;switch(r.tag){case 0:case 11:case 15:Mi(s,r,c,h),m&2048&&Io(9,r);break;case 1:Mi(s,r,c,h);break;case 3:Mi(s,r,c,h),m&2048&&(s=null,r.alternate!==null&&(s=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==s&&(r.refCount++,s!=null&&Eo(s)));break;case 12:if(m&2048){Mi(s,r,c,h),s=r.stateNode;try{var v=r.memoizedProps,E=v.id,T=v.onPostCommit;typeof T=="function"&&T(E,r.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(k){rt(r,r.return,k)}}else Mi(s,r,c,h);break;case 13:Mi(s,r,c,h);break;case 23:break;case 22:v=r.stateNode,E=r.alternate,r.memoizedState!==null?v._visibility&2?Mi(s,r,c,h):Uo(s,r):v._visibility&2?Mi(s,r,c,h):(v._visibility|=2,mr(s,r,c,h,(r.subtreeFlags&10256)!==0)),m&2048&&df(E,r);break;case 24:Mi(s,r,c,h),m&2048&&hf(r.alternate,r);break;default:Mi(s,r,c,h)}}function mr(s,r,c,h,m){for(m=m&&(r.subtreeFlags&10256)!==0,r=r.child;r!==null;){var v=s,E=r,T=c,k=h,$=E.flags;switch(E.tag){case 0:case 11:case 15:mr(v,E,T,k,m),Io(8,E);break;case 23:break;case 22:var ee=E.stateNode;E.memoizedState!==null?ee._visibility&2?mr(v,E,T,k,m):Uo(v,E):(ee._visibility|=2,mr(v,E,T,k,m)),m&&$&2048&&df(E.alternate,E);break;case 24:mr(v,E,T,k,m),m&&$&2048&&hf(E.alternate,E);break;default:mr(v,E,T,k,m)}r=r.sibling}}function Uo(s,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var c=s,h=r,m=h.flags;switch(h.tag){case 22:Uo(c,h),m&2048&&df(h.alternate,h);break;case 24:Uo(c,h),m&2048&&hf(h.alternate,h);break;default:Uo(c,h)}r=r.sibling}}var Ho=8192;function pr(s){if(s.subtreeFlags&Ho)for(s=s.child;s!==null;)Hy(s),s=s.sibling}function Hy(s){switch(s.tag){case 26:pr(s),s.flags&Ho&&s.memoizedState!==null&&iO(di,s.memoizedState,s.memoizedProps);break;case 5:pr(s);break;case 3:case 4:var r=di;di=hu(s.stateNode.containerInfo),pr(s),di=r;break;case 22:s.memoizedState===null&&(r=s.alternate,r!==null&&r.memoizedState!==null?(r=Ho,Ho=16777216,pr(s),Ho=r):pr(s));break;default:pr(s)}}function By(s){var r=s.alternate;if(r!==null&&(s=r.child,s!==null)){r.child=null;do r=s.sibling,s.sibling=null,s=r;while(s!==null)}}function Bo(s){var r=s.deletions;if((s.flags&16)!==0){if(r!==null)for(var c=0;c<r.length;c++){var h=r[c];Qt=h,$y(h,s)}By(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Vy(s),s=s.sibling}function Vy(s){switch(s.tag){case 0:case 11:case 15:Bo(s),s.flags&2048&&ks(9,s,s.return);break;case 3:Bo(s);break;case 12:Bo(s);break;case 22:var r=s.stateNode;s.memoizedState!==null&&r._visibility&2&&(s.return===null||s.return.tag!==13)?(r._visibility&=-3,eu(s)):Bo(s);break;default:Bo(s)}}function eu(s){var r=s.deletions;if((s.flags&16)!==0){if(r!==null)for(var c=0;c<r.length;c++){var h=r[c];Qt=h,$y(h,s)}By(s)}for(s=s.child;s!==null;){switch(r=s,r.tag){case 0:case 11:case 15:ks(8,r,r.return),eu(r);break;case 22:c=r.stateNode,c._visibility&2&&(c._visibility&=-3,eu(r));break;default:eu(r)}s=s.sibling}}function $y(s,r){for(;Qt!==null;){var c=Qt;switch(c.tag){case 0:case 11:case 15:ks(8,c,r);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var h=c.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:Eo(c.memoizedState.cache)}if(h=c.child,h!==null)h.return=c,Qt=h;else e:for(c=s;Qt!==null;){h=Qt;var m=h.sibling,v=h.return;if(Ly(h),h===c){Qt=null;break e}if(m!==null){m.return=v,Qt=m;break e}Qt=v}}}var bC={getCacheForType:function(s){var r=hn(Ht),c=r.data.get(s);return c===void 0&&(c=s(),r.data.set(s,c)),c}},_C=typeof WeakMap=="function"?WeakMap:Map,Xe=0,ut=null,ze=null,Be=0,Qe=0,Un=null,Ls=!1,vr=!1,ff=!1,ss=0,Ct=0,Ps=0,Ea=0,gf=0,Zn=0,yr=0,Vo=null,Tn=null,mf=!1,pf=0,tu=1/0,nu=null,zs=null,rn=0,Is=null,br=null,_r=0,vf=0,yf=null,qy=null,$o=0,bf=null;function Hn(){if((Xe&2)!==0&&Be!==0)return Be&-Be;if(P.T!==null){var s=or;return s!==0?s:Of()}return Ln()}function Gy(){Zn===0&&(Zn=(Be&536870912)===0||Ye?hc():536870912);var s=Qn.current;return s!==null&&(s.flags|=32),Zn}function Bn(s,r,c){(s===ut&&(Qe===2||Qe===9)||s.cancelPendingCommit!==null)&&(wr(s,0),Fs(s,Be,Zn,!1)),xt(s,c),((Xe&2)===0||s!==ut)&&(s===ut&&((Xe&2)===0&&(Ea|=c),Ct===4&&Fs(s,Be,Zn,!1)),ki(s))}function Yy(s,r,c){if((Xe&6)!==0)throw Error(i(327));var h=!c&&(r&124)===0&&(r&s.expiredLanes)===0||Bi(s,r),m=h?xC(s,r):Sf(s,r,!0),v=h;do{if(m===0){vr&&!h&&Fs(s,r,0,!1);break}else{if(c=s.current.alternate,v&&!wC(c)){m=Sf(s,r,!1),v=!1;continue}if(m===2){if(v=r,s.errorRecoveryDisabledLanes&v)var E=0;else E=s.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){r=E;e:{var T=s;m=Vo;var k=T.current.memoizedState.isDehydrated;if(k&&(wr(T,E).flags|=256),E=Sf(T,E,!1),E!==2){if(ff&&!k){T.errorRecoveryDisabledLanes|=v,Ea|=v,m=4;break e}v=Tn,Tn=m,v!==null&&(Tn===null?Tn=v:Tn.push.apply(Tn,v))}m=E}if(v=!1,m!==2)continue}}if(m===1){wr(s,0),Fs(s,r,0,!0);break}e:{switch(h=s,v=m,v){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:Fs(h,r,Zn,!Ls);break e;case 2:Tn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(m=pf+300-At(),10<m)){if(Fs(h,r,Zn,!Ls),Oi(h,0,!0)!==0)break e;h.timeoutHandle=Sb(Wy.bind(null,h,c,Tn,nu,mf,r,Zn,Ea,yr,Ls,v,2,-0,0),m);break e}Wy(h,c,Tn,nu,mf,r,Zn,Ea,yr,Ls,v,0,-0,0)}}break}while(!0);ki(s)}function Wy(s,r,c,h,m,v,E,T,k,$,ee,ne,G,Y){if(s.timeoutHandle=-1,ne=r.subtreeFlags,(ne&8192||(ne&16785408)===16785408)&&(Qo={stylesheets:null,count:0,unsuspend:nO},Hy(r),ne=sO(),ne!==null)){s.cancelPendingCommit=ne(tb.bind(null,s,r,v,c,h,m,E,T,k,ee,1,G,Y)),Fs(s,v,E,!$);return}tb(s,r,v,c,h,m,E,T,k)}function wC(s){for(var r=s;;){var c=r.tag;if((c===0||c===11||c===15)&&r.flags&16384&&(c=r.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var h=0;h<c.length;h++){var m=c[h],v=m.getSnapshot;m=m.value;try{if(!Pn(v(),m))return!1}catch{return!1}}if(c=r.child,r.subtreeFlags&16384&&c!==null)c.return=r,r=c;else{if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Fs(s,r,c,h){r&=~gf,r&=~Ea,s.suspendedLanes|=r,s.pingedLanes&=~r,h&&(s.warmLanes|=r),h=s.expirationTimes;for(var m=r;0<m;){var v=31-$e(m),E=1<<v;h[v]=-1,m&=~E}c!==0&&cn(s,c,r)}function iu(){return(Xe&6)===0?(qo(0),!1):!0}function _f(){if(ze!==null){if(Qe===0)var s=ze.return;else s=ze,Xi=ya=null,Ph(s),fr=null,Lo=0,s=ze;for(;s!==null;)Ry(s.alternate,s),s=s.return;ze=null}}function wr(s,r){var c=s.timeoutHandle;c!==-1&&(s.timeoutHandle=-1,FC(c)),c=s.cancelPendingCommit,c!==null&&(s.cancelPendingCommit=null,c()),_f(),ut=s,ze=c=Yi(s.current,null),Be=r,Qe=0,Un=null,Ls=!1,vr=Bi(s,r),ff=!1,yr=Zn=gf=Ea=Ps=Ct=0,Tn=Vo=null,mf=!1,(r&8)!==0&&(r|=r&32);var h=s.entangledLanes;if(h!==0)for(s=s.entanglements,h&=r;0<h;){var m=31-$e(h),v=1<<m;r|=s[m],h&=~v}return ss=r,Cc(),c}function Ky(s,r){je=null,P.H=$c,r===Oo||r===jc?(r=hv(),Qe=3):r===cv?(r=hv(),Qe=4):Qe=r===fy?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Un=r,ze===null&&(Ct=1,Kc(s,Yn(r,s.current)))}function Xy(){var s=P.H;return P.H=$c,s===null?$c:s}function Qy(){var s=P.A;return P.A=bC,s}function wf(){Ct=4,Ls||(Be&4194048)!==Be&&Qn.current!==null||(vr=!0),(Ps&134217727)===0&&(Ea&134217727)===0||ut===null||Fs(ut,Be,Zn,!1)}function Sf(s,r,c){var h=Xe;Xe|=2;var m=Xy(),v=Qy();(ut!==s||Be!==r)&&(nu=null,wr(s,r)),r=!1;var E=Ct;e:do try{if(Qe!==0&&ze!==null){var T=ze,k=Un;switch(Qe){case 8:_f(),E=6;break e;case 3:case 2:case 9:case 6:Qn.current===null&&(r=!0);var $=Qe;if(Qe=0,Un=null,Sr(s,T,k,$),c&&vr){E=0;break e}break;default:$=Qe,Qe=0,Un=null,Sr(s,T,k,$)}}SC(),E=Ct;break}catch(ee){Ky(s,ee)}while(!0);return r&&s.shellSuspendCounter++,Xi=ya=null,Xe=h,P.H=m,P.A=v,ze===null&&(ut=null,Be=0,Cc()),E}function SC(){for(;ze!==null;)Zy(ze)}function xC(s,r){var c=Xe;Xe|=2;var h=Xy(),m=Qy();ut!==s||Be!==r?(nu=null,tu=At()+500,wr(s,r)):vr=Bi(s,r);e:do try{if(Qe!==0&&ze!==null){r=ze;var v=Un;t:switch(Qe){case 1:Qe=0,Un=null,Sr(s,r,v,1);break;case 2:case 9:if(uv(v)){Qe=0,Un=null,Jy(r);break}r=function(){Qe!==2&&Qe!==9||ut!==s||(Qe=7),ki(s)},v.then(r,r);break e;case 3:Qe=7;break e;case 4:Qe=5;break e;case 7:uv(v)?(Qe=0,Un=null,Jy(r)):(Qe=0,Un=null,Sr(s,r,v,7));break;case 5:var E=null;switch(ze.tag){case 26:E=ze.memoizedState;case 5:case 27:var T=ze;if(!E||jb(E)){Qe=0,Un=null;var k=T.sibling;if(k!==null)ze=k;else{var $=T.return;$!==null?(ze=$,su($)):ze=null}break t}}Qe=0,Un=null,Sr(s,r,v,5);break;case 6:Qe=0,Un=null,Sr(s,r,v,6);break;case 8:_f(),Ct=6;break e;default:throw Error(i(462))}}EC();break}catch(ee){Ky(s,ee)}while(!0);return Xi=ya=null,P.H=h,P.A=m,Xe=c,ze!==null?0:(ut=null,Be=0,Cc(),Ct)}function EC(){for(;ze!==null&&!Rt();)Zy(ze)}function Zy(s){var r=Cy(s.alternate,s,ss);s.memoizedProps=s.pendingProps,r===null?su(s):ze=r}function Jy(s){var r=s,c=r.alternate;switch(r.tag){case 15:case 0:r=by(c,r,r.pendingProps,r.type,void 0,Be);break;case 11:r=by(c,r,r.pendingProps,r.type.render,r.ref,Be);break;case 5:Ph(r);default:Ry(c,r),r=ze=ev(r,ss),r=Cy(c,r,ss)}s.memoizedProps=s.pendingProps,r===null?su(s):ze=r}function Sr(s,r,c,h){Xi=ya=null,Ph(r),fr=null,Lo=0;var m=r.return;try{if(fC(s,m,r,c,Be)){Ct=1,Kc(s,Yn(c,s.current)),ze=null;return}}catch(v){if(m!==null)throw ze=m,v;Ct=1,Kc(s,Yn(c,s.current)),ze=null;return}r.flags&32768?(Ye||h===1?s=!0:vr||(Be&536870912)!==0?s=!1:(Ls=s=!0,(h===2||h===9||h===3||h===6)&&(h=Qn.current,h!==null&&h.tag===13&&(h.flags|=16384))),eb(r,s)):su(r)}function su(s){var r=s;do{if((r.flags&32768)!==0){eb(r,Ls);return}s=r.return;var c=mC(r.alternate,r,ss);if(c!==null){ze=c;return}if(r=r.sibling,r!==null){ze=r;return}ze=r=s}while(r!==null);Ct===0&&(Ct=5)}function eb(s,r){do{var c=pC(s.alternate,s);if(c!==null){c.flags&=32767,ze=c;return}if(c=s.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!r&&(s=s.sibling,s!==null)){ze=s;return}ze=s=c}while(s!==null);Ct=6,ze=null}function tb(s,r,c,h,m,v,E,T,k){s.cancelPendingCommit=null;do au();while(rn!==0);if((Xe&6)!==0)throw Error(i(327));if(r!==null){if(r===s.current)throw Error(i(177));if(v=r.lanes|r.childLanes,v|=dh,bn(s,c,v,E,T,k),s===ut&&(ze=ut=null,Be=0),br=r,Is=s,_r=c,vf=v,yf=m,qy=h,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,AC(B,function(){return rb(),null})):(s.callbackNode=null,s.callbackPriority=0),h=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||h){h=P.T,P.T=null,m=K.p,K.p=2,E=Xe,Xe|=4;try{vC(s,r,c)}finally{Xe=E,K.p=m,P.T=h}}rn=1,nb(),ib(),sb()}}function nb(){if(rn===1){rn=0;var s=Is,r=br,c=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||c){c=P.T,P.T=null;var h=K.p;K.p=2;var m=Xe;Xe|=4;try{Iy(r,s);var v=jf,E=$p(s.containerInfo),T=v.focusedElem,k=v.selectionRange;if(E!==T&&T&&T.ownerDocument&&Vp(T.ownerDocument.documentElement,T)){if(k!==null&&rh(T)){var $=k.start,ee=k.end;if(ee===void 0&&(ee=$),"selectionStart"in T)T.selectionStart=$,T.selectionEnd=Math.min(ee,T.value.length);else{var ne=T.ownerDocument||document,G=ne&&ne.defaultView||window;if(G.getSelection){var Y=G.getSelection(),Ee=T.textContent.length,we=Math.min(k.start,Ee),st=k.end===void 0?we:Math.min(k.end,Ee);!Y.extend&&we>st&&(E=st,st=we,we=E);var z=Bp(T,we),L=Bp(T,st);if(z&&L&&(Y.rangeCount!==1||Y.anchorNode!==z.node||Y.anchorOffset!==z.offset||Y.focusNode!==L.node||Y.focusOffset!==L.offset)){var U=ne.createRange();U.setStart(z.node,z.offset),Y.removeAllRanges(),we>st?(Y.addRange(U),Y.extend(L.node,L.offset)):(U.setEnd(L.node,L.offset),Y.addRange(U))}}}}for(ne=[],Y=T;Y=Y.parentNode;)Y.nodeType===1&&ne.push({element:Y,left:Y.scrollLeft,top:Y.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<ne.length;T++){var te=ne[T];te.element.scrollLeft=te.left,te.element.scrollTop=te.top}}vu=!!Nf,jf=Nf=null}finally{Xe=m,K.p=h,P.T=c}}s.current=r,rn=2}}function ib(){if(rn===2){rn=0;var s=Is,r=br,c=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||c){c=P.T,P.T=null;var h=K.p;K.p=2;var m=Xe;Xe|=4;try{jy(s,r.alternate,r)}finally{Xe=m,K.p=h,P.T=c}}rn=3}}function sb(){if(rn===4||rn===3){rn=0,Ke();var s=Is,r=br,c=_r,h=qy;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?rn=5:(rn=0,br=Is=null,ab(s,s.pendingLanes));var m=s.pendingLanes;if(m===0&&(zs=null),sn(c),r=r.stateNode,Se&&typeof Se.onCommitFiberRoot=="function")try{Se.onCommitFiberRoot(ve,r,void 0,(r.current.flags&128)===128)}catch{}if(h!==null){r=P.T,m=K.p,K.p=2,P.T=null;try{for(var v=s.onRecoverableError,E=0;E<h.length;E++){var T=h[E];v(T.value,{componentStack:T.stack})}}finally{P.T=r,K.p=m}}(_r&3)!==0&&au(),ki(s),m=s.pendingLanes,(c&4194090)!==0&&(m&42)!==0?s===bf?$o++:($o=0,bf=s):$o=0,qo(0)}}function ab(s,r){(s.pooledCacheLanes&=r)===0&&(r=s.pooledCache,r!=null&&(s.pooledCache=null,Eo(r)))}function au(s){return nb(),ib(),sb(),rb()}function rb(){if(rn!==5)return!1;var s=Is,r=vf;vf=0;var c=sn(_r),h=P.T,m=K.p;try{K.p=32>c?32:c,P.T=null,c=yf,yf=null;var v=Is,E=_r;if(rn=0,br=Is=null,_r=0,(Xe&6)!==0)throw Error(i(331));var T=Xe;if(Xe|=4,Vy(v.current),Uy(v,v.current,E,c),Xe=T,qo(0,!1),Se&&typeof Se.onPostCommitFiberRoot=="function")try{Se.onPostCommitFiberRoot(ve,v)}catch{}return!0}finally{K.p=m,P.T=h,ab(s,r)}}function ob(s,r,c){r=Yn(c,r),r=Xh(s.stateNode,r,2),s=As(s,r,2),s!==null&&(xt(s,2),ki(s))}function rt(s,r,c){if(s.tag===3)ob(s,s,c);else for(;r!==null;){if(r.tag===3){ob(r,s,c);break}else if(r.tag===1){var h=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(zs===null||!zs.has(h))){s=Yn(c,s),c=dy(2),h=As(r,c,2),h!==null&&(hy(c,h,r,s),xt(h,2),ki(h));break}}r=r.return}}function xf(s,r,c){var h=s.pingCache;if(h===null){h=s.pingCache=new _C;var m=new Set;h.set(r,m)}else m=h.get(r),m===void 0&&(m=new Set,h.set(r,m));m.has(c)||(ff=!0,m.add(c),s=CC.bind(null,s,r,c),r.then(s,s))}function CC(s,r,c){var h=s.pingCache;h!==null&&h.delete(r),s.pingedLanes|=s.suspendedLanes&c,s.warmLanes&=~c,ut===s&&(Be&c)===c&&(Ct===4||Ct===3&&(Be&62914560)===Be&&300>At()-pf?(Xe&2)===0&&wr(s,0):gf|=c,yr===Be&&(yr=0)),ki(s)}function lb(s,r){r===0&&(r=fc()),s=ir(s,r),s!==null&&(xt(s,r),ki(s))}function OC(s){var r=s.memoizedState,c=0;r!==null&&(c=r.retryLane),lb(s,c)}function RC(s,r){var c=0;switch(s.tag){case 13:var h=s.stateNode,m=s.memoizedState;m!==null&&(c=m.retryLane);break;case 19:h=s.stateNode;break;case 22:h=s.stateNode._retryCache;break;default:throw Error(i(314))}h!==null&&h.delete(r),lb(s,c)}function AC(s,r){return Ft(s,r)}var ru=null,xr=null,Ef=!1,ou=!1,Cf=!1,Ca=0;function ki(s){s!==xr&&s.next===null&&(xr===null?ru=xr=s:xr=xr.next=s),ou=!0,Ef||(Ef=!0,DC())}function qo(s,r){if(!Cf&&ou){Cf=!0;do for(var c=!1,h=ru;h!==null;){if(s!==0){var m=h.pendingLanes;if(m===0)var v=0;else{var E=h.suspendedLanes,T=h.pingedLanes;v=(1<<31-$e(42|s)+1)-1,v&=m&~(E&~T),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(c=!0,hb(h,v))}else v=Be,v=Oi(h,h===ut?v:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(v&3)===0||Bi(h,v)||(c=!0,hb(h,v));h=h.next}while(c);Cf=!1}}function TC(){cb()}function cb(){ou=Ef=!1;var s=0;Ca!==0&&(IC()&&(s=Ca),Ca=0);for(var r=At(),c=null,h=ru;h!==null;){var m=h.next,v=ub(h,r);v===0?(h.next=null,c===null?ru=m:c.next=m,m===null&&(xr=c)):(c=h,(s!==0||(v&3)!==0)&&(ou=!0)),h=m}qo(s)}function ub(s,r){for(var c=s.suspendedLanes,h=s.pingedLanes,m=s.expirationTimes,v=s.pendingLanes&-62914561;0<v;){var E=31-$e(v),T=1<<E,k=m[E];k===-1?((T&c)===0||(T&h)!==0)&&(m[E]=oa(T,r)):k<=r&&(s.expiredLanes|=T),v&=~T}if(r=ut,c=Be,c=Oi(s,s===r?c:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),h=s.callbackNode,c===0||s===r&&(Qe===2||Qe===9)||s.cancelPendingCommit!==null)return h!==null&&h!==null&&tt(h),s.callbackNode=null,s.callbackPriority=0;if((c&3)===0||Bi(s,c)){if(r=c&-c,r===s.callbackPriority)return r;switch(h!==null&&tt(h),sn(c)){case 2:case 8:c=j;break;case 32:c=B;break;case 268435456:c=ge;break;default:c=B}return h=db.bind(null,s),c=Ft(c,h),s.callbackPriority=r,s.callbackNode=c,r}return h!==null&&h!==null&&tt(h),s.callbackPriority=2,s.callbackNode=null,2}function db(s,r){if(rn!==0&&rn!==5)return s.callbackNode=null,s.callbackPriority=0,null;var c=s.callbackNode;if(au()&&s.callbackNode!==c)return null;var h=Be;return h=Oi(s,s===ut?h:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),h===0?null:(Yy(s,h,r),ub(s,At()),s.callbackNode!=null&&s.callbackNode===c?db.bind(null,s):null)}function hb(s,r){if(au())return null;Yy(s,r,!0)}function DC(){UC(function(){(Xe&6)!==0?Ft(Nn,TC):cb()})}function Of(){return Ca===0&&(Ca=hc()),Ca}function fb(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:yc(""+s)}function gb(s,r){var c=r.ownerDocument.createElement("input");return c.name=r.name,c.value=r.value,s.id&&c.setAttribute("form",s.id),r.parentNode.insertBefore(c,r),s=new FormData(s),c.parentNode.removeChild(c),s}function MC(s,r,c,h,m){if(r==="submit"&&c&&c.stateNode===m){var v=fb((m[gt]||null).action),E=h.submitter;E&&(r=(r=E[gt]||null)?fb(r.formAction):E.getAttribute("formAction"),r!==null&&(v=r,E=null));var T=new Sc("action","action",null,h,m);s.push({event:T,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(Ca!==0){var k=E?gb(m,E):new FormData(m);qh(c,{pending:!0,data:k,method:m.method,action:v},null,k)}}else typeof v=="function"&&(T.preventDefault(),k=E?gb(m,E):new FormData(m),qh(c,{pending:!0,data:k,method:m.method,action:v},v,k))},currentTarget:m}]})}}for(var Rf=0;Rf<uh.length;Rf++){var Af=uh[Rf],kC=Af.toLowerCase(),NC=Af[0].toUpperCase()+Af.slice(1);ui(kC,"on"+NC)}ui(Yp,"onAnimationEnd"),ui(Wp,"onAnimationIteration"),ui(Kp,"onAnimationStart"),ui("dblclick","onDoubleClick"),ui("focusin","onFocus"),ui("focusout","onBlur"),ui(XE,"onTransitionRun"),ui(QE,"onTransitionStart"),ui(ZE,"onTransitionCancel"),ui(Xp,"onTransitionEnd"),Ya("onMouseEnter",["mouseout","mouseover"]),Ya("onMouseLeave",["mouseout","mouseover"]),Ya("onPointerEnter",["pointerout","pointerover"]),Ya("onPointerLeave",["pointerout","pointerover"]),ca("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ca("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ca("onBeforeInput",["compositionend","keypress","textInput","paste"]),ca("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ca("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ca("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Go="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jC=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Go));function mb(s,r){r=(r&4)!==0;for(var c=0;c<s.length;c++){var h=s[c],m=h.event;h=h.listeners;e:{var v=void 0;if(r)for(var E=h.length-1;0<=E;E--){var T=h[E],k=T.instance,$=T.currentTarget;if(T=T.listener,k!==v&&m.isPropagationStopped())break e;v=T,m.currentTarget=$;try{v(m)}catch(ee){Wc(ee)}m.currentTarget=null,v=k}else for(E=0;E<h.length;E++){if(T=h[E],k=T.instance,$=T.currentTarget,T=T.listener,k!==v&&m.isPropagationStopped())break e;v=T,m.currentTarget=$;try{v(m)}catch(ee){Wc(ee)}m.currentTarget=null,v=k}}}}function Ie(s,r){var c=r[Vi];c===void 0&&(c=r[Vi]=new Set);var h=s+"__bubble";c.has(h)||(pb(r,s,2,!1),c.add(h))}function Tf(s,r,c){var h=0;r&&(h|=4),pb(c,s,h,r)}var lu="_reactListening"+Math.random().toString(36).slice(2);function Df(s){if(!s[lu]){s[lu]=!0,cp.forEach(function(c){c!=="selectionchange"&&(jC.has(c)||Tf(c,!1,s),Tf(c,!0,s))});var r=s.nodeType===9?s:s.ownerDocument;r===null||r[lu]||(r[lu]=!0,Tf("selectionchange",!1,r))}}function pb(s,r,c,h){switch(Ub(r)){case 2:var m=oO;break;case 8:m=lO;break;default:m=$f}c=m.bind(null,r,c,s),m=void 0,!Qd||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(m=!0),h?m!==void 0?s.addEventListener(r,c,{capture:!0,passive:m}):s.addEventListener(r,c,!0):m!==void 0?s.addEventListener(r,c,{passive:m}):s.addEventListener(r,c,!1)}function Mf(s,r,c,h,m){var v=h;if((r&1)===0&&(r&2)===0&&h!==null)e:for(;;){if(h===null)return;var E=h.tag;if(E===3||E===4){var T=h.stateNode.containerInfo;if(T===m)break;if(E===4)for(E=h.return;E!==null;){var k=E.tag;if((k===3||k===4)&&E.stateNode.containerInfo===m)return;E=E.return}for(;T!==null;){if(E=$a(T),E===null)return;if(k=E.tag,k===5||k===6||k===26||k===27){h=v=E;continue e}T=T.parentNode}}h=h.return}xp(function(){var $=v,ee=Kd(c),ne=[];e:{var G=Qp.get(s);if(G!==void 0){var Y=Sc,Ee=s;switch(s){case"keypress":if(_c(c)===0)break e;case"keydown":case"keyup":Y=AE;break;case"focusin":Ee="focus",Y=th;break;case"focusout":Ee="blur",Y=th;break;case"beforeblur":case"afterblur":Y=th;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Y=Op;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Y=pE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Y=ME;break;case Yp:case Wp:case Kp:Y=bE;break;case Xp:Y=NE;break;case"scroll":case"scrollend":Y=gE;break;case"wheel":Y=LE;break;case"copy":case"cut":case"paste":Y=wE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Y=Ap;break;case"toggle":case"beforetoggle":Y=zE}var we=(r&4)!==0,st=!we&&(s==="scroll"||s==="scrollend"),z=we?G!==null?G+"Capture":null:G;we=[];for(var L=$,U;L!==null;){var te=L;if(U=te.stateNode,te=te.tag,te!==5&&te!==26&&te!==27||U===null||z===null||(te=uo(L,z),te!=null&&we.push(Yo(L,te,U))),st)break;L=L.return}0<we.length&&(G=new Y(G,Ee,null,c,ee),ne.push({event:G,listeners:we}))}}if((r&7)===0){e:{if(G=s==="mouseover"||s==="pointerover",Y=s==="mouseout"||s==="pointerout",G&&c!==Wd&&(Ee=c.relatedTarget||c.fromElement)&&($a(Ee)||Ee[dn]))break e;if((Y||G)&&(G=ee.window===ee?ee:(G=ee.ownerDocument)?G.defaultView||G.parentWindow:window,Y?(Ee=c.relatedTarget||c.toElement,Y=$,Ee=Ee?$a(Ee):null,Ee!==null&&(st=o(Ee),we=Ee.tag,Ee!==st||we!==5&&we!==27&&we!==6)&&(Ee=null)):(Y=null,Ee=$),Y!==Ee)){if(we=Op,te="onMouseLeave",z="onMouseEnter",L="mouse",(s==="pointerout"||s==="pointerover")&&(we=Ap,te="onPointerLeave",z="onPointerEnter",L="pointer"),st=Y==null?G:co(Y),U=Ee==null?G:co(Ee),G=new we(te,L+"leave",Y,c,ee),G.target=st,G.relatedTarget=U,te=null,$a(ee)===$&&(we=new we(z,L+"enter",Ee,c,ee),we.target=U,we.relatedTarget=st,te=we),st=te,Y&&Ee)t:{for(we=Y,z=Ee,L=0,U=we;U;U=Er(U))L++;for(U=0,te=z;te;te=Er(te))U++;for(;0<L-U;)we=Er(we),L--;for(;0<U-L;)z=Er(z),U--;for(;L--;){if(we===z||z!==null&&we===z.alternate)break t;we=Er(we),z=Er(z)}we=null}else we=null;Y!==null&&vb(ne,G,Y,we,!1),Ee!==null&&st!==null&&vb(ne,st,Ee,we,!0)}}e:{if(G=$?co($):window,Y=G.nodeName&&G.nodeName.toLowerCase(),Y==="select"||Y==="input"&&G.type==="file")var pe=Pp;else if(jp(G))if(zp)pe=YE;else{pe=qE;var Pe=$E}else Y=G.nodeName,!Y||Y.toLowerCase()!=="input"||G.type!=="checkbox"&&G.type!=="radio"?$&&Yd($.elementType)&&(pe=Pp):pe=GE;if(pe&&(pe=pe(s,$))){Lp(ne,pe,c,ee);break e}Pe&&Pe(s,G,$),s==="focusout"&&$&&G.type==="number"&&$.memoizedProps.value!=null&&Gd(G,"number",G.value)}switch(Pe=$?co($):window,s){case"focusin":(jp(Pe)||Pe.contentEditable==="true")&&(er=Pe,oh=$,bo=null);break;case"focusout":bo=oh=er=null;break;case"mousedown":lh=!0;break;case"contextmenu":case"mouseup":case"dragend":lh=!1,qp(ne,c,ee);break;case"selectionchange":if(KE)break;case"keydown":case"keyup":qp(ne,c,ee)}var _e;if(ih)e:{switch(s){case"compositionstart":var xe="onCompositionStart";break e;case"compositionend":xe="onCompositionEnd";break e;case"compositionupdate":xe="onCompositionUpdate";break e}xe=void 0}else Ja?kp(s,c)&&(xe="onCompositionEnd"):s==="keydown"&&c.keyCode===229&&(xe="onCompositionStart");xe&&(Tp&&c.locale!=="ko"&&(Ja||xe!=="onCompositionStart"?xe==="onCompositionEnd"&&Ja&&(_e=Ep()):(Es=ee,Zd="value"in Es?Es.value:Es.textContent,Ja=!0)),Pe=cu($,xe),0<Pe.length&&(xe=new Rp(xe,s,null,c,ee),ne.push({event:xe,listeners:Pe}),_e?xe.data=_e:(_e=Np(c),_e!==null&&(xe.data=_e)))),(_e=FE?UE(s,c):HE(s,c))&&(xe=cu($,"onBeforeInput"),0<xe.length&&(Pe=new Rp("onBeforeInput","beforeinput",null,c,ee),ne.push({event:Pe,listeners:xe}),Pe.data=_e)),MC(ne,s,$,c,ee)}mb(ne,r)})}function Yo(s,r,c){return{instance:s,listener:r,currentTarget:c}}function cu(s,r){for(var c=r+"Capture",h=[];s!==null;){var m=s,v=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||v===null||(m=uo(s,c),m!=null&&h.unshift(Yo(s,m,v)),m=uo(s,r),m!=null&&h.push(Yo(s,m,v))),s.tag===3)return h;s=s.return}return[]}function Er(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function vb(s,r,c,h,m){for(var v=r._reactName,E=[];c!==null&&c!==h;){var T=c,k=T.alternate,$=T.stateNode;if(T=T.tag,k!==null&&k===h)break;T!==5&&T!==26&&T!==27||$===null||(k=$,m?($=uo(c,v),$!=null&&E.unshift(Yo(c,$,k))):m||($=uo(c,v),$!=null&&E.push(Yo(c,$,k)))),c=c.return}E.length!==0&&s.push({event:r,listeners:E})}var LC=/\r\n?/g,PC=/\u0000|\uFFFD/g;function yb(s){return(typeof s=="string"?s:""+s).replace(LC,`
`).replace(PC,"")}function bb(s,r){return r=yb(r),yb(s)===r}function uu(){}function it(s,r,c,h,m,v){switch(c){case"children":typeof h=="string"?r==="body"||r==="textarea"&&h===""||Xa(s,h):(typeof h=="number"||typeof h=="bigint")&&r!=="body"&&Xa(s,""+h);break;case"className":mc(s,"class",h);break;case"tabIndex":mc(s,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":mc(s,c,h);break;case"style":wp(s,h,v);break;case"data":if(r!=="object"){mc(s,"data",h);break}case"src":case"href":if(h===""&&(r!=="a"||c!=="href")){s.removeAttribute(c);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){s.removeAttribute(c);break}h=yc(""+h),s.setAttribute(c,h);break;case"action":case"formAction":if(typeof h=="function"){s.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(c==="formAction"?(r!=="input"&&it(s,r,"name",m.name,m,null),it(s,r,"formEncType",m.formEncType,m,null),it(s,r,"formMethod",m.formMethod,m,null),it(s,r,"formTarget",m.formTarget,m,null)):(it(s,r,"encType",m.encType,m,null),it(s,r,"method",m.method,m,null),it(s,r,"target",m.target,m,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){s.removeAttribute(c);break}h=yc(""+h),s.setAttribute(c,h);break;case"onClick":h!=null&&(s.onclick=uu);break;case"onScroll":h!=null&&Ie("scroll",s);break;case"onScrollEnd":h!=null&&Ie("scrollend",s);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(i(61));if(c=h.__html,c!=null){if(m.children!=null)throw Error(i(60));s.innerHTML=c}}break;case"multiple":s.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":s.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){s.removeAttribute("xlink:href");break}c=yc(""+h),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(c,""+h):s.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(c,""):s.removeAttribute(c);break;case"capture":case"download":h===!0?s.setAttribute(c,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(c,h):s.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?s.setAttribute(c,h):s.removeAttribute(c);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?s.removeAttribute(c):s.setAttribute(c,h);break;case"popover":Ie("beforetoggle",s),Ie("toggle",s),gc(s,"popover",h);break;case"xlinkActuate":qi(s,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":qi(s,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":qi(s,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":qi(s,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":qi(s,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":qi(s,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":qi(s,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":qi(s,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":qi(s,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":gc(s,"is",h);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=hE.get(c)||c,gc(s,c,h))}}function kf(s,r,c,h,m,v){switch(c){case"style":wp(s,h,v);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(i(61));if(c=h.__html,c!=null){if(m.children!=null)throw Error(i(60));s.innerHTML=c}}break;case"children":typeof h=="string"?Xa(s,h):(typeof h=="number"||typeof h=="bigint")&&Xa(s,""+h);break;case"onScroll":h!=null&&Ie("scroll",s);break;case"onScrollEnd":h!=null&&Ie("scrollend",s);break;case"onClick":h!=null&&(s.onclick=uu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!up.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(m=c.endsWith("Capture"),r=c.slice(2,m?c.length-7:void 0),v=s[gt]||null,v=v!=null?v[c]:null,typeof v=="function"&&s.removeEventListener(r,v,m),typeof h=="function")){typeof v!="function"&&v!==null&&(c in s?s[c]=null:s.hasAttribute(c)&&s.removeAttribute(c)),s.addEventListener(r,h,m);break e}c in s?s[c]=h:h===!0?s.setAttribute(c,""):gc(s,c,h)}}}function on(s,r,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ie("error",s),Ie("load",s);var h=!1,m=!1,v;for(v in c)if(c.hasOwnProperty(v)){var E=c[v];if(E!=null)switch(v){case"src":h=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:it(s,r,v,E,c,null)}}m&&it(s,r,"srcSet",c.srcSet,c,null),h&&it(s,r,"src",c.src,c,null);return;case"input":Ie("invalid",s);var T=v=E=m=null,k=null,$=null;for(h in c)if(c.hasOwnProperty(h)){var ee=c[h];if(ee!=null)switch(h){case"name":m=ee;break;case"type":E=ee;break;case"checked":k=ee;break;case"defaultChecked":$=ee;break;case"value":v=ee;break;case"defaultValue":T=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(i(137,r));break;default:it(s,r,h,ee,c,null)}}vp(s,v,T,k,$,E,m,!1),pc(s);return;case"select":Ie("invalid",s),h=E=v=null;for(m in c)if(c.hasOwnProperty(m)&&(T=c[m],T!=null))switch(m){case"value":v=T;break;case"defaultValue":E=T;break;case"multiple":h=T;default:it(s,r,m,T,c,null)}r=v,c=E,s.multiple=!!h,r!=null?Ka(s,!!h,r,!1):c!=null&&Ka(s,!!h,c,!0);return;case"textarea":Ie("invalid",s),v=m=h=null;for(E in c)if(c.hasOwnProperty(E)&&(T=c[E],T!=null))switch(E){case"value":h=T;break;case"defaultValue":m=T;break;case"children":v=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(i(91));break;default:it(s,r,E,T,c,null)}bp(s,h,m,v),pc(s);return;case"option":for(k in c)if(c.hasOwnProperty(k)&&(h=c[k],h!=null))switch(k){case"selected":s.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:it(s,r,k,h,c,null)}return;case"dialog":Ie("beforetoggle",s),Ie("toggle",s),Ie("cancel",s),Ie("close",s);break;case"iframe":case"object":Ie("load",s);break;case"video":case"audio":for(h=0;h<Go.length;h++)Ie(Go[h],s);break;case"image":Ie("error",s),Ie("load",s);break;case"details":Ie("toggle",s);break;case"embed":case"source":case"link":Ie("error",s),Ie("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for($ in c)if(c.hasOwnProperty($)&&(h=c[$],h!=null))switch($){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:it(s,r,$,h,c,null)}return;default:if(Yd(r)){for(ee in c)c.hasOwnProperty(ee)&&(h=c[ee],h!==void 0&&kf(s,r,ee,h,c,void 0));return}}for(T in c)c.hasOwnProperty(T)&&(h=c[T],h!=null&&it(s,r,T,h,c,null))}function zC(s,r,c,h){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,v=null,E=null,T=null,k=null,$=null,ee=null;for(Y in c){var ne=c[Y];if(c.hasOwnProperty(Y)&&ne!=null)switch(Y){case"checked":break;case"value":break;case"defaultValue":k=ne;default:h.hasOwnProperty(Y)||it(s,r,Y,null,h,ne)}}for(var G in h){var Y=h[G];if(ne=c[G],h.hasOwnProperty(G)&&(Y!=null||ne!=null))switch(G){case"type":v=Y;break;case"name":m=Y;break;case"checked":$=Y;break;case"defaultChecked":ee=Y;break;case"value":E=Y;break;case"defaultValue":T=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(i(137,r));break;default:Y!==ne&&it(s,r,G,Y,h,ne)}}qd(s,E,T,k,$,ee,v,m);return;case"select":Y=E=T=G=null;for(v in c)if(k=c[v],c.hasOwnProperty(v)&&k!=null)switch(v){case"value":break;case"multiple":Y=k;default:h.hasOwnProperty(v)||it(s,r,v,null,h,k)}for(m in h)if(v=h[m],k=c[m],h.hasOwnProperty(m)&&(v!=null||k!=null))switch(m){case"value":G=v;break;case"defaultValue":T=v;break;case"multiple":E=v;default:v!==k&&it(s,r,m,v,h,k)}r=T,c=E,h=Y,G!=null?Ka(s,!!c,G,!1):!!h!=!!c&&(r!=null?Ka(s,!!c,r,!0):Ka(s,!!c,c?[]:"",!1));return;case"textarea":Y=G=null;for(T in c)if(m=c[T],c.hasOwnProperty(T)&&m!=null&&!h.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:it(s,r,T,null,h,m)}for(E in h)if(m=h[E],v=c[E],h.hasOwnProperty(E)&&(m!=null||v!=null))switch(E){case"value":G=m;break;case"defaultValue":Y=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(i(91));break;default:m!==v&&it(s,r,E,m,h,v)}yp(s,G,Y);return;case"option":for(var Ee in c)if(G=c[Ee],c.hasOwnProperty(Ee)&&G!=null&&!h.hasOwnProperty(Ee))switch(Ee){case"selected":s.selected=!1;break;default:it(s,r,Ee,null,h,G)}for(k in h)if(G=h[k],Y=c[k],h.hasOwnProperty(k)&&G!==Y&&(G!=null||Y!=null))switch(k){case"selected":s.selected=G&&typeof G!="function"&&typeof G!="symbol";break;default:it(s,r,k,G,h,Y)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var we in c)G=c[we],c.hasOwnProperty(we)&&G!=null&&!h.hasOwnProperty(we)&&it(s,r,we,null,h,G);for($ in h)if(G=h[$],Y=c[$],h.hasOwnProperty($)&&G!==Y&&(G!=null||Y!=null))switch($){case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(i(137,r));break;default:it(s,r,$,G,h,Y)}return;default:if(Yd(r)){for(var st in c)G=c[st],c.hasOwnProperty(st)&&G!==void 0&&!h.hasOwnProperty(st)&&kf(s,r,st,void 0,h,G);for(ee in h)G=h[ee],Y=c[ee],!h.hasOwnProperty(ee)||G===Y||G===void 0&&Y===void 0||kf(s,r,ee,G,h,Y);return}}for(var z in c)G=c[z],c.hasOwnProperty(z)&&G!=null&&!h.hasOwnProperty(z)&&it(s,r,z,null,h,G);for(ne in h)G=h[ne],Y=c[ne],!h.hasOwnProperty(ne)||G===Y||G==null&&Y==null||it(s,r,ne,G,h,Y)}var Nf=null,jf=null;function du(s){return s.nodeType===9?s:s.ownerDocument}function _b(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function wb(s,r){if(s===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&r==="foreignObject"?0:s}function Lf(s,r){return s==="textarea"||s==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Pf=null;function IC(){var s=window.event;return s&&s.type==="popstate"?s===Pf?!1:(Pf=s,!0):(Pf=null,!1)}var Sb=typeof setTimeout=="function"?setTimeout:void 0,FC=typeof clearTimeout=="function"?clearTimeout:void 0,xb=typeof Promise=="function"?Promise:void 0,UC=typeof queueMicrotask=="function"?queueMicrotask:typeof xb<"u"?function(s){return xb.resolve(null).then(s).catch(HC)}:Sb;function HC(s){setTimeout(function(){throw s})}function Us(s){return s==="head"}function Eb(s,r){var c=r,h=0,m=0;do{var v=c.nextSibling;if(s.removeChild(c),v&&v.nodeType===8)if(c=v.data,c==="/$"){if(0<h&&8>h){c=h;var E=s.ownerDocument;if(c&1&&Wo(E.documentElement),c&2&&Wo(E.body),c&4)for(c=E.head,Wo(c),E=c.firstChild;E;){var T=E.nextSibling,k=E.nodeName;E[$i]||k==="SCRIPT"||k==="STYLE"||k==="LINK"&&E.rel.toLowerCase()==="stylesheet"||c.removeChild(E),E=T}}if(m===0){s.removeChild(v),nl(r);return}m--}else c==="$"||c==="$?"||c==="$!"?m++:h=c.charCodeAt(0)-48;else h=0;c=v}while(c);nl(r)}function zf(s){var r=s.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var c=r;switch(r=r.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":zf(c),Hd(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}s.removeChild(c)}}function BC(s,r,c,h){for(;s.nodeType===1;){var m=c;if(s.nodeName.toLowerCase()!==r.toLowerCase()){if(!h&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(h){if(!s[$i])switch(r){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(v=s.getAttribute("rel"),v==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(v!==m.rel||s.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||s.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||s.getAttribute("title")!==(m.title==null?null:m.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(v=s.getAttribute("src"),(v!==(m.src==null?null:m.src)||s.getAttribute("type")!==(m.type==null?null:m.type)||s.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&v&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(r==="input"&&s.type==="hidden"){var v=m.name==null?null:""+m.name;if(m.type==="hidden"&&s.getAttribute("name")===v)return s}else return s;if(s=hi(s.nextSibling),s===null)break}return null}function VC(s,r,c){if(r==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!c||(s=hi(s.nextSibling),s===null))return null;return s}function If(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState==="complete"}function $C(s,r){var c=s.ownerDocument;if(s.data!=="$?"||c.readyState==="complete")r();else{var h=function(){r(),c.removeEventListener("DOMContentLoaded",h)};c.addEventListener("DOMContentLoaded",h),s._reactRetry=h}}function hi(s){for(;s!=null;s=s.nextSibling){var r=s.nodeType;if(r===1||r===3)break;if(r===8){if(r=s.data,r==="$"||r==="$!"||r==="$?"||r==="F!"||r==="F")break;if(r==="/$")return null}}return s}var Ff=null;function Cb(s){s=s.previousSibling;for(var r=0;s;){if(s.nodeType===8){var c=s.data;if(c==="$"||c==="$!"||c==="$?"){if(r===0)return s;r--}else c==="/$"&&r++}s=s.previousSibling}return null}function Ob(s,r,c){switch(r=du(c),s){case"html":if(s=r.documentElement,!s)throw Error(i(452));return s;case"head":if(s=r.head,!s)throw Error(i(453));return s;case"body":if(s=r.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function Wo(s){for(var r=s.attributes;r.length;)s.removeAttributeNode(r[0]);Hd(s)}var Jn=new Map,Rb=new Set;function hu(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var as=K.d;K.d={f:qC,r:GC,D:YC,C:WC,L:KC,m:XC,X:ZC,S:QC,M:JC};function qC(){var s=as.f(),r=iu();return s||r}function GC(s){var r=qa(s);r!==null&&r.tag===5&&r.type==="form"?Yv(r):as.r(s)}var Cr=typeof document>"u"?null:document;function Ab(s,r,c){var h=Cr;if(h&&typeof r=="string"&&r){var m=Gn(r);m='link[rel="'+s+'"][href="'+m+'"]',typeof c=="string"&&(m+='[crossorigin="'+c+'"]'),Rb.has(m)||(Rb.add(m),s={rel:s,crossOrigin:c,href:r},h.querySelector(m)===null&&(r=h.createElement("link"),on(r,"link",s),Kt(r),h.head.appendChild(r)))}}function YC(s){as.D(s),Ab("dns-prefetch",s,null)}function WC(s,r){as.C(s,r),Ab("preconnect",s,r)}function KC(s,r,c){as.L(s,r,c);var h=Cr;if(h&&s&&r){var m='link[rel="preload"][as="'+Gn(r)+'"]';r==="image"&&c&&c.imageSrcSet?(m+='[imagesrcset="'+Gn(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(m+='[imagesizes="'+Gn(c.imageSizes)+'"]')):m+='[href="'+Gn(s)+'"]';var v=m;switch(r){case"style":v=Or(s);break;case"script":v=Rr(s)}Jn.has(v)||(s=g({rel:"preload",href:r==="image"&&c&&c.imageSrcSet?void 0:s,as:r},c),Jn.set(v,s),h.querySelector(m)!==null||r==="style"&&h.querySelector(Ko(v))||r==="script"&&h.querySelector(Xo(v))||(r=h.createElement("link"),on(r,"link",s),Kt(r),h.head.appendChild(r)))}}function XC(s,r){as.m(s,r);var c=Cr;if(c&&s){var h=r&&typeof r.as=="string"?r.as:"script",m='link[rel="modulepreload"][as="'+Gn(h)+'"][href="'+Gn(s)+'"]',v=m;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=Rr(s)}if(!Jn.has(v)&&(s=g({rel:"modulepreload",href:s},r),Jn.set(v,s),c.querySelector(m)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Xo(v)))return}h=c.createElement("link"),on(h,"link",s),Kt(h),c.head.appendChild(h)}}}function QC(s,r,c){as.S(s,r,c);var h=Cr;if(h&&s){var m=Ga(h).hoistableStyles,v=Or(s);r=r||"default";var E=m.get(v);if(!E){var T={loading:0,preload:null};if(E=h.querySelector(Ko(v)))T.loading=5;else{s=g({rel:"stylesheet",href:s,"data-precedence":r},c),(c=Jn.get(v))&&Uf(s,c);var k=E=h.createElement("link");Kt(k),on(k,"link",s),k._p=new Promise(function($,ee){k.onload=$,k.onerror=ee}),k.addEventListener("load",function(){T.loading|=1}),k.addEventListener("error",function(){T.loading|=2}),T.loading|=4,fu(E,r,h)}E={type:"stylesheet",instance:E,count:1,state:T},m.set(v,E)}}}function ZC(s,r){as.X(s,r);var c=Cr;if(c&&s){var h=Ga(c).hoistableScripts,m=Rr(s),v=h.get(m);v||(v=c.querySelector(Xo(m)),v||(s=g({src:s,async:!0},r),(r=Jn.get(m))&&Hf(s,r),v=c.createElement("script"),Kt(v),on(v,"link",s),c.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},h.set(m,v))}}function JC(s,r){as.M(s,r);var c=Cr;if(c&&s){var h=Ga(c).hoistableScripts,m=Rr(s),v=h.get(m);v||(v=c.querySelector(Xo(m)),v||(s=g({src:s,async:!0,type:"module"},r),(r=Jn.get(m))&&Hf(s,r),v=c.createElement("script"),Kt(v),on(v,"link",s),c.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},h.set(m,v))}}function Tb(s,r,c,h){var m=(m=q.current)?hu(m):null;if(!m)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(r=Or(c.href),c=Ga(m).hoistableStyles,h=c.get(r),h||(h={type:"style",instance:null,count:0,state:null},c.set(r,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){s=Or(c.href);var v=Ga(m).hoistableStyles,E=v.get(s);if(E||(m=m.ownerDocument||m,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(s,E),(v=m.querySelector(Ko(s)))&&!v._p&&(E.instance=v,E.state.loading=5),Jn.has(s)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},Jn.set(s,c),v||eO(m,s,c,E.state))),r&&h===null)throw Error(i(528,""));return E}if(r&&h!==null)throw Error(i(529,""));return null;case"script":return r=c.async,c=c.src,typeof c=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Rr(c),c=Ga(m).hoistableScripts,h=c.get(r),h||(h={type:"script",instance:null,count:0,state:null},c.set(r,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function Or(s){return'href="'+Gn(s)+'"'}function Ko(s){return'link[rel="stylesheet"]['+s+"]"}function Db(s){return g({},s,{"data-precedence":s.precedence,precedence:null})}function eO(s,r,c,h){s.querySelector('link[rel="preload"][as="style"]['+r+"]")?h.loading=1:(r=s.createElement("link"),h.preload=r,r.addEventListener("load",function(){return h.loading|=1}),r.addEventListener("error",function(){return h.loading|=2}),on(r,"link",c),Kt(r),s.head.appendChild(r))}function Rr(s){return'[src="'+Gn(s)+'"]'}function Xo(s){return"script[async]"+s}function Mb(s,r,c){if(r.count++,r.instance===null)switch(r.type){case"style":var h=s.querySelector('style[data-href~="'+Gn(c.href)+'"]');if(h)return r.instance=h,Kt(h),h;var m=g({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return h=(s.ownerDocument||s).createElement("style"),Kt(h),on(h,"style",m),fu(h,c.precedence,s),r.instance=h;case"stylesheet":m=Or(c.href);var v=s.querySelector(Ko(m));if(v)return r.state.loading|=4,r.instance=v,Kt(v),v;h=Db(c),(m=Jn.get(m))&&Uf(h,m),v=(s.ownerDocument||s).createElement("link"),Kt(v);var E=v;return E._p=new Promise(function(T,k){E.onload=T,E.onerror=k}),on(v,"link",h),r.state.loading|=4,fu(v,c.precedence,s),r.instance=v;case"script":return v=Rr(c.src),(m=s.querySelector(Xo(v)))?(r.instance=m,Kt(m),m):(h=c,(m=Jn.get(v))&&(h=g({},c),Hf(h,m)),s=s.ownerDocument||s,m=s.createElement("script"),Kt(m),on(m,"link",h),s.head.appendChild(m),r.instance=m);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(h=r.instance,r.state.loading|=4,fu(h,c.precedence,s));return r.instance}function fu(s,r,c){for(var h=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=h.length?h[h.length-1]:null,v=m,E=0;E<h.length;E++){var T=h[E];if(T.dataset.precedence===r)v=T;else if(v!==m)break}v?v.parentNode.insertBefore(s,v.nextSibling):(r=c.nodeType===9?c.head:c,r.insertBefore(s,r.firstChild))}function Uf(s,r){s.crossOrigin==null&&(s.crossOrigin=r.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=r.referrerPolicy),s.title==null&&(s.title=r.title)}function Hf(s,r){s.crossOrigin==null&&(s.crossOrigin=r.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=r.referrerPolicy),s.integrity==null&&(s.integrity=r.integrity)}var gu=null;function kb(s,r,c){if(gu===null){var h=new Map,m=gu=new Map;m.set(c,h)}else m=gu,h=m.get(c),h||(h=new Map,m.set(c,h));if(h.has(s))return h;for(h.set(s,null),c=c.getElementsByTagName(s),m=0;m<c.length;m++){var v=c[m];if(!(v[$i]||v[ft]||s==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var E=v.getAttribute(r)||"";E=s+E;var T=h.get(E);T?T.push(v):h.set(E,[v])}}return h}function Nb(s,r,c){s=s.ownerDocument||s,s.head.insertBefore(c,r==="title"?s.querySelector("head > title"):null)}function tO(s,r,c){if(c===1||r.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return s=r.disabled,typeof r.precedence=="string"&&s==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function jb(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var Qo=null;function nO(){}function iO(s,r,c){if(Qo===null)throw Error(i(475));var h=Qo;if(r.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var m=Or(c.href),v=s.querySelector(Ko(m));if(v){s=v._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(h.count++,h=mu.bind(h),s.then(h,h)),r.state.loading|=4,r.instance=v,Kt(v);return}v=s.ownerDocument||s,c=Db(c),(m=Jn.get(m))&&Uf(c,m),v=v.createElement("link"),Kt(v);var E=v;E._p=new Promise(function(T,k){E.onload=T,E.onerror=k}),on(v,"link",c),r.instance=v}h.stylesheets===null&&(h.stylesheets=new Map),h.stylesheets.set(r,s),(s=r.state.preload)&&(r.state.loading&3)===0&&(h.count++,r=mu.bind(h),s.addEventListener("load",r),s.addEventListener("error",r))}}function sO(){if(Qo===null)throw Error(i(475));var s=Qo;return s.stylesheets&&s.count===0&&Bf(s,s.stylesheets),0<s.count?function(r){var c=setTimeout(function(){if(s.stylesheets&&Bf(s,s.stylesheets),s.unsuspend){var h=s.unsuspend;s.unsuspend=null,h()}},6e4);return s.unsuspend=r,function(){s.unsuspend=null,clearTimeout(c)}}:null}function mu(){if(this.count--,this.count===0){if(this.stylesheets)Bf(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var pu=null;function Bf(s,r){s.stylesheets=null,s.unsuspend!==null&&(s.count++,pu=new Map,r.forEach(aO,s),pu=null,mu.call(s))}function aO(s,r){if(!(r.state.loading&4)){var c=pu.get(s);if(c)var h=c.get(null);else{c=new Map,pu.set(s,c);for(var m=s.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<m.length;v++){var E=m[v];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(c.set(E.dataset.precedence,E),h=E)}h&&c.set(null,h)}m=r.instance,E=m.getAttribute("data-precedence"),v=c.get(E)||h,v===h&&c.set(null,m),c.set(E,m),this.count++,h=mu.bind(this),m.addEventListener("load",h),m.addEventListener("error",h),v?v.parentNode.insertBefore(m,v.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(m,s.firstChild)),r.state.loading|=4}}var Zo={$$typeof:A,Provider:null,Consumer:null,_currentValue:le,_currentValue2:le,_threadCount:0};function rO(s,r,c,h,m,v,E,T){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=lo(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=lo(0),this.hiddenUpdates=lo(null),this.identifierPrefix=h,this.onUncaughtError=m,this.onCaughtError=v,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=T,this.incompleteTransitions=new Map}function Lb(s,r,c,h,m,v,E,T,k,$,ee,ne){return s=new rO(s,r,c,E,T,k,$,ne),r=1,v===!0&&(r|=24),v=zn(3,null,null,r),s.current=v,v.stateNode=s,r=Sh(),r.refCount++,s.pooledCache=r,r.refCount++,v.memoizedState={element:h,isDehydrated:c,cache:r},Oh(v),s}function Pb(s){return s?(s=sr,s):sr}function zb(s,r,c,h,m,v){m=Pb(m),h.context===null?h.context=m:h.pendingContext=m,h=Rs(r),h.payload={element:c},v=v===void 0?null:v,v!==null&&(h.callback=v),c=As(s,h,r),c!==null&&(Bn(c,s,r),Ao(c,s,r))}function Ib(s,r){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var c=s.retryLane;s.retryLane=c!==0&&c<r?c:r}}function Vf(s,r){Ib(s,r),(s=s.alternate)&&Ib(s,r)}function Fb(s){if(s.tag===13){var r=ir(s,67108864);r!==null&&Bn(r,s,67108864),Vf(s,67108864)}}var vu=!0;function oO(s,r,c,h){var m=P.T;P.T=null;var v=K.p;try{K.p=2,$f(s,r,c,h)}finally{K.p=v,P.T=m}}function lO(s,r,c,h){var m=P.T;P.T=null;var v=K.p;try{K.p=8,$f(s,r,c,h)}finally{K.p=v,P.T=m}}function $f(s,r,c,h){if(vu){var m=qf(h);if(m===null)Mf(s,r,h,yu,c),Hb(s,h);else if(uO(m,s,r,c,h))h.stopPropagation();else if(Hb(s,h),r&4&&-1<cO.indexOf(s)){for(;m!==null;){var v=qa(m);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var E=jn(v.pendingLanes);if(E!==0){var T=v;for(T.pendingLanes|=2,T.entangledLanes|=2;E;){var k=1<<31-$e(E);T.entanglements[1]|=k,E&=~k}ki(v),(Xe&6)===0&&(tu=At()+500,qo(0))}}break;case 13:T=ir(v,2),T!==null&&Bn(T,v,2),iu(),Vf(v,2)}if(v=qf(h),v===null&&Mf(s,r,h,yu,c),v===m)break;m=v}m!==null&&h.stopPropagation()}else Mf(s,r,h,null,c)}}function qf(s){return s=Kd(s),Gf(s)}var yu=null;function Gf(s){if(yu=null,s=$a(s),s!==null){var r=o(s);if(r===null)s=null;else{var c=r.tag;if(c===13){if(s=l(r),s!==null)return s;s=null}else if(c===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;s=null}else r!==s&&(s=null)}}return yu=s,null}function Ub(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(li()){case Nn:return 2;case j:return 8;case B:case J:return 32;case ge:return 268435456;default:return 32}default:return 32}}var Yf=!1,Hs=null,Bs=null,Vs=null,Jo=new Map,el=new Map,$s=[],cO="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Hb(s,r){switch(s){case"focusin":case"focusout":Hs=null;break;case"dragenter":case"dragleave":Bs=null;break;case"mouseover":case"mouseout":Vs=null;break;case"pointerover":case"pointerout":Jo.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":el.delete(r.pointerId)}}function tl(s,r,c,h,m,v){return s===null||s.nativeEvent!==v?(s={blockedOn:r,domEventName:c,eventSystemFlags:h,nativeEvent:v,targetContainers:[m]},r!==null&&(r=qa(r),r!==null&&Fb(r)),s):(s.eventSystemFlags|=h,r=s.targetContainers,m!==null&&r.indexOf(m)===-1&&r.push(m),s)}function uO(s,r,c,h,m){switch(r){case"focusin":return Hs=tl(Hs,s,r,c,h,m),!0;case"dragenter":return Bs=tl(Bs,s,r,c,h,m),!0;case"mouseover":return Vs=tl(Vs,s,r,c,h,m),!0;case"pointerover":var v=m.pointerId;return Jo.set(v,tl(Jo.get(v)||null,s,r,c,h,m)),!0;case"gotpointercapture":return v=m.pointerId,el.set(v,tl(el.get(v)||null,s,r,c,h,m)),!0}return!1}function Bb(s){var r=$a(s.target);if(r!==null){var c=o(r);if(c!==null){if(r=c.tag,r===13){if(r=l(c),r!==null){s.blockedOn=r,Ss(s.priority,function(){if(c.tag===13){var h=Hn();h=un(h);var m=ir(c,h);m!==null&&Bn(m,c,h),Vf(c,h)}});return}}else if(r===3&&c.stateNode.current.memoizedState.isDehydrated){s.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}s.blockedOn=null}function bu(s){if(s.blockedOn!==null)return!1;for(var r=s.targetContainers;0<r.length;){var c=qf(s.nativeEvent);if(c===null){c=s.nativeEvent;var h=new c.constructor(c.type,c);Wd=h,c.target.dispatchEvent(h),Wd=null}else return r=qa(c),r!==null&&Fb(r),s.blockedOn=c,!1;r.shift()}return!0}function Vb(s,r,c){bu(s)&&c.delete(r)}function dO(){Yf=!1,Hs!==null&&bu(Hs)&&(Hs=null),Bs!==null&&bu(Bs)&&(Bs=null),Vs!==null&&bu(Vs)&&(Vs=null),Jo.forEach(Vb),el.forEach(Vb)}function _u(s,r){s.blockedOn===r&&(s.blockedOn=null,Yf||(Yf=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,dO)))}var wu=null;function $b(s){wu!==s&&(wu=s,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){wu===s&&(wu=null);for(var r=0;r<s.length;r+=3){var c=s[r],h=s[r+1],m=s[r+2];if(typeof h!="function"){if(Gf(h||c)===null)continue;break}var v=qa(c);v!==null&&(s.splice(r,3),r-=3,qh(v,{pending:!0,data:m,method:c.method,action:h},h,m))}}))}function nl(s){function r(k){return _u(k,s)}Hs!==null&&_u(Hs,s),Bs!==null&&_u(Bs,s),Vs!==null&&_u(Vs,s),Jo.forEach(r),el.forEach(r);for(var c=0;c<$s.length;c++){var h=$s[c];h.blockedOn===s&&(h.blockedOn=null)}for(;0<$s.length&&(c=$s[0],c.blockedOn===null);)Bb(c),c.blockedOn===null&&$s.shift();if(c=(s.ownerDocument||s).$$reactFormReplay,c!=null)for(h=0;h<c.length;h+=3){var m=c[h],v=c[h+1],E=m[gt]||null;if(typeof v=="function")E||$b(c);else if(E){var T=null;if(v&&v.hasAttribute("formAction")){if(m=v,E=v[gt]||null)T=E.formAction;else if(Gf(m)!==null)continue}else T=E.action;typeof T=="function"?c[h+1]=T:(c.splice(h,3),h-=3),$b(c)}}}function Wf(s){this._internalRoot=s}Su.prototype.render=Wf.prototype.render=function(s){var r=this._internalRoot;if(r===null)throw Error(i(409));var c=r.current,h=Hn();zb(c,h,s,r,null,null)},Su.prototype.unmount=Wf.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var r=s.containerInfo;zb(s.current,2,null,s,null,null),iu(),r[dn]=null}};function Su(s){this._internalRoot=s}Su.prototype.unstable_scheduleHydration=function(s){if(s){var r=Ln();s={blockedOn:null,target:s,priority:r};for(var c=0;c<$s.length&&r!==0&&r<$s[c].priority;c++);$s.splice(c,0,s),c===0&&Bb(s)}};var qb=e.version;if(qb!=="19.1.1")throw Error(i(527,qb,"19.1.1"));K.findDOMNode=function(s){var r=s._reactInternals;if(r===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=d(r),s=s!==null?f(s):null,s=s===null?null:s.stateNode,s};var hO={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:P,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xu.isDisabled&&xu.supportsFiber)try{ve=xu.inject(hO),Se=xu}catch{}}return sl.createRoot=function(s,r){if(!a(s))throw Error(i(299));var c=!1,h="",m=oy,v=ly,E=cy,T=null;return r!=null&&(r.unstable_strictMode===!0&&(c=!0),r.identifierPrefix!==void 0&&(h=r.identifierPrefix),r.onUncaughtError!==void 0&&(m=r.onUncaughtError),r.onCaughtError!==void 0&&(v=r.onCaughtError),r.onRecoverableError!==void 0&&(E=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(T=r.unstable_transitionCallbacks)),r=Lb(s,1,!1,null,null,c,h,m,v,E,T,null),s[dn]=r.current,Df(s),new Wf(r)},sl.hydrateRoot=function(s,r,c){if(!a(s))throw Error(i(299));var h=!1,m="",v=oy,E=ly,T=cy,k=null,$=null;return c!=null&&(c.unstable_strictMode===!0&&(h=!0),c.identifierPrefix!==void 0&&(m=c.identifierPrefix),c.onUncaughtError!==void 0&&(v=c.onUncaughtError),c.onCaughtError!==void 0&&(E=c.onCaughtError),c.onRecoverableError!==void 0&&(T=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(k=c.unstable_transitionCallbacks),c.formState!==void 0&&($=c.formState)),r=Lb(s,1,!0,r,c??null,h,m,v,E,T,k,$),r.context=Pb(null),c=r.current,h=Hn(),h=un(h),m=Rs(h),m.callback=null,As(c,m,h),c=h,r.current.lanes=c,xt(r,c),ki(r),s[dn]=r.current,Df(s),new Su(r)},sl.version="19.1.1",sl}var t_;function SO(){if(t_)return Qf.exports;t_=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Qf.exports=wO(),Qf.exports}var xO=SO();const EO=dm(xO);/**
 * react-router v7.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var n_="popstate";function CO(t={}){function e(i,a){let{pathname:o,search:l,hash:u}=i.location;return Ng("",{pathname:o,search:l,hash:u},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(i,a){return typeof a=="string"?a:Ul(a)}return RO(e,n,null,t)}function wt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function _i(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function OO(){return Math.random().toString(36).substring(2,10)}function i_(t,e){return{usr:t.state,key:t.key,idx:e}}function Ng(t,e,n=null,i){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?eo(e):e,state:n,key:e&&e.key||i||OO()}}function Ul({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function eo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substring(i),t=t.substring(0,i)),t&&(e.pathname=t)}return e}function RO(t,e,n,i={}){let{window:a=document.defaultView,v5Compat:o=!1}=i,l=a.history,u="POP",d=null,f=g();f==null&&(f=0,l.replaceState({...l.state,idx:f},""));function g(){return(l.state||{idx:null}).idx}function p(){u="POP";let x=g(),C=x==null?null:x-f;f=x,d&&d({action:u,location:S.location,delta:C})}function b(x,C){u="PUSH";let O=Ng(S.location,x,C);f=g()+1;let A=i_(O,f),M=S.createHref(O);try{l.pushState(A,"",M)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;a.location.assign(M)}o&&d&&d({action:u,location:S.location,delta:1})}function _(x,C){u="REPLACE";let O=Ng(S.location,x,C);f=g();let A=i_(O,f),M=S.createHref(O);l.replaceState(A,"",M),o&&d&&d({action:u,location:S.location,delta:0})}function w(x){return AO(x)}let S={get action(){return u},get location(){return t(a,l)},listen(x){if(d)throw new Error("A history only accepts one active listener");return a.addEventListener(n_,p),d=x,()=>{a.removeEventListener(n_,p),d=null}},createHref(x){return e(a,x)},createURL:w,encodeLocation(x){let C=w(x);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:b,replace:_,go(x){return l.go(x)}};return S}function AO(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),wt(n,"No window.location.(origin|href) available to create URL");let i=typeof t=="string"?t:Ul(t);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=n+i),new URL(i,n)}function Fw(t,e,n="/"){return TO(t,e,n,!1)}function TO(t,e,n,i){let a=typeof e=="string"?eo(e):e,o=vs(a.pathname||"/",n);if(o==null)return null;let l=Uw(t);DO(l);let u=null;for(let d=0;u==null&&d<l.length;++d){let f=HO(o);u=FO(l[d],f,i)}return u}function Uw(t,e=[],n=[],i="",a=!1){let o=(l,u,d=a,f)=>{let g={relativePath:f===void 0?l.path||"":f,caseSensitive:l.caseSensitive===!0,childrenIndex:u,route:l};if(g.relativePath.startsWith("/")){if(!g.relativePath.startsWith(i)&&d)return;wt(g.relativePath.startsWith(i),`Absolute route path "${g.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(i.length)}let p=ps([i,g.relativePath]),b=n.concat(g);l.children&&l.children.length>0&&(wt(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),Uw(l.children,e,b,p,d)),!(l.path==null&&!l.index)&&e.push({path:p,score:zO(p,l.index),routesMeta:b})};return t.forEach((l,u)=>{if(l.path===""||!l.path?.includes("?"))o(l,u);else for(let d of Hw(l.path))o(l,u,!0,d)}),e}function Hw(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,a=n.endsWith("?"),o=n.replace(/\?$/,"");if(i.length===0)return a?[o,""]:[o];let l=Hw(i.join("/")),u=[];return u.push(...l.map(d=>d===""?o:[o,d].join("/"))),a&&u.push(...l),u.map(d=>t.startsWith("/")&&d===""?"/":d)}function DO(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:IO(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var MO=/^:[\w-]+$/,kO=3,NO=2,jO=1,LO=10,PO=-2,s_=t=>t==="*";function zO(t,e){let n=t.split("/"),i=n.length;return n.some(s_)&&(i+=PO),e&&(i+=NO),n.filter(a=>!s_(a)).reduce((a,o)=>a+(MO.test(o)?kO:o===""?jO:LO),i)}function IO(t,e){return t.length===e.length&&t.slice(0,-1).every((i,a)=>i===e[a])?t[t.length-1]-e[e.length-1]:0}function FO(t,e,n=!1){let{routesMeta:i}=t,a={},o="/",l=[];for(let u=0;u<i.length;++u){let d=i[u],f=u===i.length-1,g=o==="/"?e:e.slice(o.length)||"/",p=nd({path:d.relativePath,caseSensitive:d.caseSensitive,end:f},g),b=d.route;if(!p&&f&&n&&!i[i.length-1].route.index&&(p=nd({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},g)),!p)return null;Object.assign(a,p.params),l.push({params:a,pathname:ps([o,p.pathname]),pathnameBase:qO(ps([o,p.pathnameBase])),route:b}),p.pathnameBase!=="/"&&(o=ps([o,p.pathnameBase]))}return l}function nd(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=UO(t.path,t.caseSensitive,t.end),a=e.match(n);if(!a)return null;let o=a[0],l=o.replace(/(.)\/+$/,"$1"),u=a.slice(1);return{params:i.reduce((f,{paramName:g,isOptional:p},b)=>{if(g==="*"){let w=u[b]||"";l=o.slice(0,o.length-w.length).replace(/(.)\/+$/,"$1")}const _=u[b];return p&&!_?f[g]=void 0:f[g]=(_||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:l,pattern:t}}function UO(t,e=!1,n=!0){_i(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let i=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,d)=>(i.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(i.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),i]}function HO(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return _i(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function vs(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}function BO(t,e="/"){let{pathname:n,search:i="",hash:a=""}=typeof t=="string"?eo(t):t;return{pathname:n?n.startsWith("/")?n:VO(n,e):e,search:GO(i),hash:YO(a)}}function VO(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function tg(t,e,n,i){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function $O(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function fm(t){let e=$O(t);return e.map((n,i)=>i===e.length-1?n.pathname:n.pathnameBase)}function gm(t,e,n,i=!1){let a;typeof t=="string"?a=eo(t):(a={...t},wt(!a.pathname||!a.pathname.includes("?"),tg("?","pathname","search",a)),wt(!a.pathname||!a.pathname.includes("#"),tg("#","pathname","hash",a)),wt(!a.search||!a.search.includes("#"),tg("#","search","hash",a)));let o=t===""||a.pathname==="",l=o?"/":a.pathname,u;if(l==null)u=n;else{let p=e.length-1;if(!i&&l.startsWith("..")){let b=l.split("/");for(;b[0]==="..";)b.shift(),p-=1;a.pathname=b.join("/")}u=p>=0?e[p]:"/"}let d=BO(a,u),f=l&&l!=="/"&&l.endsWith("/"),g=(o||l===".")&&n.endsWith("/");return!d.pathname.endsWith("/")&&(f||g)&&(d.pathname+="/"),d}var ps=t=>t.join("/").replace(/\/\/+/g,"/"),qO=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),GO=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,YO=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function WO(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var Bw=["POST","PUT","PATCH","DELETE"];new Set(Bw);var KO=["GET",...Bw];new Set(KO);var to=R.createContext(null);to.displayName="DataRouter";var Ed=R.createContext(null);Ed.displayName="DataRouterState";R.createContext(!1);var Vw=R.createContext({isTransitioning:!1});Vw.displayName="ViewTransition";var XO=R.createContext(new Map);XO.displayName="Fetchers";var QO=R.createContext(null);QO.displayName="Await";var xi=R.createContext(null);xi.displayName="Navigation";var nc=R.createContext(null);nc.displayName="Location";var oi=R.createContext({outlet:null,matches:[],isDataRoute:!1});oi.displayName="Route";var mm=R.createContext(null);mm.displayName="RouteError";function ZO(t,{relative:e}={}){wt(no(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=R.useContext(xi),{hash:a,pathname:o,search:l}=ic(t,{relative:e}),u=o;return n!=="/"&&(u=o==="/"?n:ps([n,o])),i.createHref({pathname:u,search:l,hash:a})}function no(){return R.useContext(nc)!=null}function bs(){return wt(no(),"useLocation() may be used only in the context of a <Router> component."),R.useContext(nc).location}var $w="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function qw(t){R.useContext(xi).static||R.useLayoutEffect(t)}function sa(){let{isDataRoute:t}=R.useContext(oi);return t?fR():JO()}function JO(){wt(no(),"useNavigate() may be used only in the context of a <Router> component.");let t=R.useContext(to),{basename:e,navigator:n}=R.useContext(xi),{matches:i}=R.useContext(oi),{pathname:a}=bs(),o=JSON.stringify(fm(i)),l=R.useRef(!1);return qw(()=>{l.current=!0}),R.useCallback((d,f={})=>{if(_i(l.current,$w),!l.current)return;if(typeof d=="number"){n.go(d);return}let g=gm(d,JSON.parse(o),a,f.relative==="path");t==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:ps([e,g.pathname])),(f.replace?n.replace:n.push)(g,f.state,f)},[e,n,o,a,t])}var eR=R.createContext(null);function tR(t){let e=R.useContext(oi).outlet;return e&&R.createElement(eR.Provider,{value:t},e)}function Cd(){let{matches:t}=R.useContext(oi),e=t[t.length-1];return e?e.params:{}}function ic(t,{relative:e}={}){let{matches:n}=R.useContext(oi),{pathname:i}=bs(),a=JSON.stringify(fm(n));return R.useMemo(()=>gm(t,JSON.parse(a),i,e==="path"),[t,a,i,e])}function nR(t,e){return Gw(t,e)}function Gw(t,e,n,i){wt(no(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=R.useContext(xi),{matches:o}=R.useContext(oi),l=o[o.length-1],u=l?l.params:{},d=l?l.pathname:"/",f=l?l.pathnameBase:"/",g=l&&l.route;{let C=g&&g.path||"";Yw(d,!g||C.endsWith("*")||C.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${C}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${C}"> to <Route path="${C==="/"?"*":`${C}/*`}">.`)}let p=bs(),b;if(e){let C=typeof e=="string"?eo(e):e;wt(f==="/"||C.pathname?.startsWith(f),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${C.pathname}" was given in the \`location\` prop.`),b=C}else b=p;let _=b.pathname||"/",w=_;if(f!=="/"){let C=f.replace(/^\//,"").split("/");w="/"+_.replace(/^\//,"").split("/").slice(C.length).join("/")}let S=Fw(t,{pathname:w});_i(g||S!=null,`No routes matched location "${b.pathname}${b.search}${b.hash}" `),_i(S==null||S[S.length-1].route.element!==void 0||S[S.length-1].route.Component!==void 0||S[S.length-1].route.lazy!==void 0,`Matched leaf route at location "${b.pathname}${b.search}${b.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let x=oR(S&&S.map(C=>Object.assign({},C,{params:Object.assign({},u,C.params),pathname:ps([f,a.encodeLocation?a.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?f:ps([f,a.encodeLocation?a.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),o,n,i);return e&&x?R.createElement(nc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...b},navigationType:"POP"}},x):x}function iR(){let t=hR(),e=WO(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i},o={padding:"2px 4px",backgroundColor:i},l=null;return console.error("Error handled by React Router default ErrorBoundary:",t),l=R.createElement(R.Fragment,null,R.createElement("p",null,"💿 Hey developer 👋"),R.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",R.createElement("code",{style:o},"ErrorBoundary")," or"," ",R.createElement("code",{style:o},"errorElement")," prop on your route.")),R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},e),n?R.createElement("pre",{style:a},n):null,l)}var sR=R.createElement(iR,null),aR=class extends R.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?R.createElement(oi.Provider,{value:this.props.routeContext},R.createElement(mm.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function rR({routeContext:t,match:e,children:n}){let i=R.useContext(to);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),R.createElement(oi.Provider,{value:t},n)}function oR(t,e=[],n=null,i=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,o=n?.errors;if(o!=null){let d=a.findIndex(f=>f.route.id&&o?.[f.route.id]!==void 0);wt(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),a=a.slice(0,Math.min(a.length,d+1))}let l=!1,u=-1;if(n)for(let d=0;d<a.length;d++){let f=a[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=d),f.route.id){let{loaderData:g,errors:p}=n,b=f.route.loader&&!g.hasOwnProperty(f.route.id)&&(!p||p[f.route.id]===void 0);if(f.route.lazy||b){l=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((d,f,g)=>{let p,b=!1,_=null,w=null;n&&(p=o&&f.route.id?o[f.route.id]:void 0,_=f.route.errorElement||sR,l&&(u<0&&g===0?(Yw("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,w=null):u===g&&(b=!0,w=f.route.hydrateFallbackElement||null)));let S=e.concat(a.slice(0,g+1)),x=()=>{let C;return p?C=_:b?C=w:f.route.Component?C=R.createElement(f.route.Component,null):f.route.element?C=f.route.element:C=d,R.createElement(rR,{match:f,routeContext:{outlet:d,matches:S,isDataRoute:n!=null},children:C})};return n&&(f.route.ErrorBoundary||f.route.errorElement||g===0)?R.createElement(aR,{location:n.location,revalidation:n.revalidation,component:_,error:p,children:x(),routeContext:{outlet:null,matches:S,isDataRoute:!0}}):x()},null)}function pm(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function lR(t){let e=R.useContext(to);return wt(e,pm(t)),e}function cR(t){let e=R.useContext(Ed);return wt(e,pm(t)),e}function uR(t){let e=R.useContext(oi);return wt(e,pm(t)),e}function vm(t){let e=uR(t),n=e.matches[e.matches.length-1];return wt(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function dR(){return vm("useRouteId")}function hR(){let t=R.useContext(mm),e=cR("useRouteError"),n=vm("useRouteError");return t!==void 0?t:e.errors?.[n]}function fR(){let{router:t}=lR("useNavigate"),e=vm("useNavigate"),n=R.useRef(!1);return qw(()=>{n.current=!0}),R.useCallback(async(a,o={})=>{_i(n.current,$w),n.current&&(typeof a=="number"?t.navigate(a):await t.navigate(a,{fromRouteId:e,...o}))},[t,e])}var a_={};function Yw(t,e,n){!e&&!a_[t]&&(a_[t]=!0,_i(!1,n))}R.memo(gR);function gR({routes:t,future:e,state:n}){return Gw(t,void 0,n,e)}function Ww({to:t,replace:e,state:n,relative:i}){wt(no(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=R.useContext(xi);_i(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=R.useContext(oi),{pathname:l}=bs(),u=sa(),d=gm(t,fm(o),l,i==="path"),f=JSON.stringify(d);return R.useEffect(()=>{u(JSON.parse(f),{replace:e,state:n,relative:i})},[u,f,i,e,n]),null}function Kw(t){return tR(t.context)}function Vt(t){wt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function mR({basename:t="/",children:e=null,location:n,navigationType:i="POP",navigator:a,static:o=!1}){wt(!no(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=t.replace(/^\/*/,"/"),u=R.useMemo(()=>({basename:l,navigator:a,static:o,future:{}}),[l,a,o]);typeof n=="string"&&(n=eo(n));let{pathname:d="/",search:f="",hash:g="",state:p=null,key:b="default"}=n,_=R.useMemo(()=>{let w=vs(d,l);return w==null?null:{location:{pathname:w,search:f,hash:g,state:p,key:b},navigationType:i}},[l,d,f,g,p,b,i]);return _i(_!=null,`<Router basename="${l}"> is not able to match the URL "${d}${f}${g}" because it does not start with the basename, so the <Router> won't render anything.`),_==null?null:R.createElement(xi.Provider,{value:u},R.createElement(nc.Provider,{children:e,value:_}))}function pR({children:t,location:e}){return nR(jg(t),e)}function jg(t,e=[]){let n=[];return R.Children.forEach(t,(i,a)=>{if(!R.isValidElement(i))return;let o=[...e,a];if(i.type===R.Fragment){n.push.apply(n,jg(i.props.children,o));return}wt(i.type===Vt,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),wt(!i.props.index||!i.props.children,"An index route cannot have child routes.");let l={id:i.props.id||o.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(l.children=jg(i.props.children,o)),n.push(l)}),n}var Xu="get",Qu="application/x-www-form-urlencoded";function Od(t){return t!=null&&typeof t.tagName=="string"}function vR(t){return Od(t)&&t.tagName.toLowerCase()==="button"}function yR(t){return Od(t)&&t.tagName.toLowerCase()==="form"}function bR(t){return Od(t)&&t.tagName.toLowerCase()==="input"}function _R(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function wR(t,e){return t.button===0&&(!e||e==="_self")&&!_R(t)}var Eu=null;function SR(){if(Eu===null)try{new FormData(document.createElement("form"),0),Eu=!1}catch{Eu=!0}return Eu}var xR=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ng(t){return t!=null&&!xR.has(t)?(_i(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Qu}"`),null):t}function ER(t,e){let n,i,a,o,l;if(yR(t)){let u=t.getAttribute("action");i=u?vs(u,e):null,n=t.getAttribute("method")||Xu,a=ng(t.getAttribute("enctype"))||Qu,o=new FormData(t)}else if(vR(t)||bR(t)&&(t.type==="submit"||t.type==="image")){let u=t.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=t.getAttribute("formaction")||u.getAttribute("action");if(i=d?vs(d,e):null,n=t.getAttribute("formmethod")||u.getAttribute("method")||Xu,a=ng(t.getAttribute("formenctype"))||ng(u.getAttribute("enctype"))||Qu,o=new FormData(u,t),!SR()){let{name:f,type:g,value:p}=t;if(g==="image"){let b=f?`${f}.`:"";o.append(`${b}x`,"0"),o.append(`${b}y`,"0")}else f&&o.append(f,p)}}else{if(Od(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Xu,i=null,a=Qu,l=t}return o&&a==="text/plain"&&(l=o,o=void 0),{action:i,method:n.toLowerCase(),encType:a,formData:o,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function ym(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function CR(t,e,n){let i=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return i.pathname==="/"?i.pathname=`_root.${n}`:e&&vs(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${n}`,i}async function OR(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function RR(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function AR(t,e,n){let i=await Promise.all(t.map(async a=>{let o=e.routes[a.route.id];if(o){let l=await OR(o,n);return l.links?l.links():[]}return[]}));return kR(i.flat(1).filter(RR).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function r_(t,e,n,i,a,o){let l=(d,f)=>n[f]?d.route.id!==n[f].route.id:!0,u=(d,f)=>n[f].pathname!==d.pathname||n[f].route.path?.endsWith("*")&&n[f].params["*"]!==d.params["*"];return o==="assets"?e.filter((d,f)=>l(d,f)||u(d,f)):o==="data"?e.filter((d,f)=>{let g=i.routes[d.route.id];if(!g||!g.hasLoader)return!1;if(l(d,f)||u(d,f))return!0;if(d.route.shouldRevalidate){let p=d.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function TR(t,e,{includeHydrateFallback:n}={}){return DR(t.map(i=>{let a=e.routes[i.route.id];if(!a)return[];let o=[a.module];return a.clientActionModule&&(o=o.concat(a.clientActionModule)),a.clientLoaderModule&&(o=o.concat(a.clientLoaderModule)),n&&a.hydrateFallbackModule&&(o=o.concat(a.hydrateFallbackModule)),a.imports&&(o=o.concat(a.imports)),o}).flat(1))}function DR(t){return[...new Set(t)]}function MR(t){let e={},n=Object.keys(t).sort();for(let i of n)e[i]=t[i];return e}function kR(t,e){let n=new Set;return new Set(e),t.reduce((i,a)=>{let o=JSON.stringify(MR(a));return n.has(o)||(n.add(o),i.push({key:o,link:a})),i},[])}function Xw(){let t=R.useContext(to);return ym(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function NR(){let t=R.useContext(Ed);return ym(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var bm=R.createContext(void 0);bm.displayName="FrameworkContext";function Qw(){let t=R.useContext(bm);return ym(t,"You must render this element inside a <HydratedRouter> element"),t}function jR(t,e){let n=R.useContext(bm),[i,a]=R.useState(!1),[o,l]=R.useState(!1),{onFocus:u,onBlur:d,onMouseEnter:f,onMouseLeave:g,onTouchStart:p}=e,b=R.useRef(null);R.useEffect(()=>{if(t==="render"&&l(!0),t==="viewport"){let S=C=>{C.forEach(O=>{l(O.isIntersecting)})},x=new IntersectionObserver(S,{threshold:.5});return b.current&&x.observe(b.current),()=>{x.disconnect()}}},[t]),R.useEffect(()=>{if(i){let S=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(S)}}},[i]);let _=()=>{a(!0)},w=()=>{a(!1),l(!1)};return n?t!=="intent"?[o,b,{}]:[o,b,{onFocus:al(u,_),onBlur:al(d,w),onMouseEnter:al(f,_),onMouseLeave:al(g,w),onTouchStart:al(p,_)}]:[!1,b,{}]}function al(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function LR({page:t,...e}){let{router:n}=Xw(),i=R.useMemo(()=>Fw(n.routes,t,n.basename),[n.routes,t,n.basename]);return i?R.createElement(zR,{page:t,matches:i,...e}):null}function PR(t){let{manifest:e,routeModules:n}=Qw(),[i,a]=R.useState([]);return R.useEffect(()=>{let o=!1;return AR(t,e,n).then(l=>{o||a(l)}),()=>{o=!0}},[t,e,n]),i}function zR({page:t,matches:e,...n}){let i=bs(),{manifest:a,routeModules:o}=Qw(),{basename:l}=Xw(),{loaderData:u,matches:d}=NR(),f=R.useMemo(()=>r_(t,e,d,a,i,"data"),[t,e,d,a,i]),g=R.useMemo(()=>r_(t,e,d,a,i,"assets"),[t,e,d,a,i]),p=R.useMemo(()=>{if(t===i.pathname+i.search+i.hash)return[];let w=new Set,S=!1;if(e.forEach(C=>{let O=a.routes[C.route.id];!O||!O.hasLoader||(!f.some(A=>A.route.id===C.route.id)&&C.route.id in u&&o[C.route.id]?.shouldRevalidate||O.hasClientLoader?S=!0:w.add(C.route.id))}),w.size===0)return[];let x=CR(t,l,"data");return S&&w.size>0&&x.searchParams.set("_routes",e.filter(C=>w.has(C.route.id)).map(C=>C.route.id).join(",")),[x.pathname+x.search]},[l,u,i,a,f,e,t,o]),b=R.useMemo(()=>TR(g,a),[g,a]),_=PR(g);return R.createElement(R.Fragment,null,p.map(w=>R.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...n})),b.map(w=>R.createElement("link",{key:w,rel:"modulepreload",href:w,...n})),_.map(({key:w,link:S})=>R.createElement("link",{key:w,nonce:n.nonce,...S})))}function IR(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var Zw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Zw&&(window.__reactRouterVersion="7.8.1")}catch{}function FR({basename:t,children:e,window:n}){let i=R.useRef();i.current==null&&(i.current=CO({window:n,v5Compat:!0}));let a=i.current,[o,l]=R.useState({action:a.action,location:a.location}),u=R.useCallback(d=>{R.startTransition(()=>l(d))},[l]);return R.useLayoutEffect(()=>a.listen(u),[a,u]),R.createElement(mR,{basename:t,children:e,location:o.location,navigationType:o.action,navigator:a})}var Jw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,xn=R.forwardRef(function({onClick:e,discover:n="render",prefetch:i="none",relative:a,reloadDocument:o,replace:l,state:u,target:d,to:f,preventScrollReset:g,viewTransition:p,...b},_){let{basename:w}=R.useContext(xi),S=typeof f=="string"&&Jw.test(f),x,C=!1;if(typeof f=="string"&&S&&(x=f,Zw))try{let W=new URL(window.location.href),X=f.startsWith("//")?new URL(W.protocol+f):new URL(f),Q=vs(X.pathname,w);X.origin===W.origin&&Q!=null?f=Q+X.search+X.hash:C=!0}catch{_i(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let O=ZO(f,{relative:a}),[A,M,D]=jR(i,b),V=VR(f,{replace:l,state:u,target:d,preventScrollReset:g,relative:a,viewTransition:p});function F(W){e&&e(W),W.defaultPrevented||V(W)}let I=R.createElement("a",{...b,...D,href:x||O,onClick:C||o?e:F,ref:IR(_,M),target:d,"data-discover":!S&&n==="render"?"true":void 0});return A&&!S?R.createElement(R.Fragment,null,I,R.createElement(LR,{page:O})):I});xn.displayName="Link";var UR=R.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:i="",end:a=!1,style:o,to:l,viewTransition:u,children:d,...f},g){let p=ic(l,{relative:f.relative}),b=bs(),_=R.useContext(Ed),{navigator:w,basename:S}=R.useContext(xi),x=_!=null&&WR(p)&&u===!0,C=w.encodeLocation?w.encodeLocation(p).pathname:p.pathname,O=b.pathname,A=_&&_.navigation&&_.navigation.location?_.navigation.location.pathname:null;n||(O=O.toLowerCase(),A=A?A.toLowerCase():null,C=C.toLowerCase()),A&&S&&(A=vs(A,S)||A);const M=C!=="/"&&C.endsWith("/")?C.length-1:C.length;let D=O===C||!a&&O.startsWith(C)&&O.charAt(M)==="/",V=A!=null&&(A===C||!a&&A.startsWith(C)&&A.charAt(C.length)==="/"),F={isActive:D,isPending:V,isTransitioning:x},I=D?e:void 0,W;typeof i=="function"?W=i(F):W=[i,D?"active":null,V?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let X=typeof o=="function"?o(F):o;return R.createElement(xn,{...f,"aria-current":I,className:W,ref:g,style:X,to:l,viewTransition:u},typeof d=="function"?d(F):d)});UR.displayName="NavLink";var HR=R.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:i,replace:a,state:o,method:l=Xu,action:u,onSubmit:d,relative:f,preventScrollReset:g,viewTransition:p,...b},_)=>{let w=GR(),S=YR(u,{relative:f}),x=l.toLowerCase()==="get"?"get":"post",C=typeof u=="string"&&Jw.test(u),O=A=>{if(d&&d(A),A.defaultPrevented)return;A.preventDefault();let M=A.nativeEvent.submitter,D=M?.getAttribute("formmethod")||l;w(M||A.currentTarget,{fetcherKey:e,method:D,navigate:n,replace:a,state:o,relative:f,preventScrollReset:g,viewTransition:p})};return R.createElement("form",{ref:_,method:x,action:S,onSubmit:i?d:O,...b,"data-discover":!C&&t==="render"?"true":void 0})});HR.displayName="Form";function BR(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function eS(t){let e=R.useContext(to);return wt(e,BR(t)),e}function VR(t,{target:e,replace:n,state:i,preventScrollReset:a,relative:o,viewTransition:l}={}){let u=sa(),d=bs(),f=ic(t,{relative:o});return R.useCallback(g=>{if(wR(g,e)){g.preventDefault();let p=n!==void 0?n:Ul(d)===Ul(f);u(t,{replace:p,state:i,preventScrollReset:a,relative:o,viewTransition:l})}},[d,u,f,n,i,e,t,a,o,l])}var $R=0,qR=()=>`__${String(++$R)}__`;function GR(){let{router:t}=eS("useSubmit"),{basename:e}=R.useContext(xi),n=dR();return R.useCallback(async(i,a={})=>{let{action:o,method:l,encType:u,formData:d,body:f}=ER(i,e);if(a.navigate===!1){let g=a.fetcherKey||qR();await t.fetch(g,n,a.action||o,{preventScrollReset:a.preventScrollReset,formData:d,body:f,formMethod:a.method||l,formEncType:a.encType||u,flushSync:a.flushSync})}else await t.navigate(a.action||o,{preventScrollReset:a.preventScrollReset,formData:d,body:f,formMethod:a.method||l,formEncType:a.encType||u,replace:a.replace,state:a.state,fromRouteId:n,flushSync:a.flushSync,viewTransition:a.viewTransition})},[t,e,n])}function YR(t,{relative:e}={}){let{basename:n}=R.useContext(xi),i=R.useContext(oi);wt(i,"useFormAction must be used inside a RouteContext");let[a]=i.matches.slice(-1),o={...ic(t||".",{relative:e})},l=bs();if(t==null){o.search=l.search;let u=new URLSearchParams(o.search),d=u.getAll("index");if(d.some(g=>g==="")){u.delete("index"),d.filter(p=>p).forEach(p=>u.append("index",p));let g=u.toString();o.search=g?`?${g}`:""}}return(!t||t===".")&&a.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(o.pathname=o.pathname==="/"?n:ps([n,o.pathname])),Ul(o)}function WR(t,{relative:e}={}){let n=R.useContext(Vw);wt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=eS("useViewTransitionState"),a=ic(t,{relative:e});if(!n.isTransitioning)return!1;let o=vs(n.currentLocation.pathname,i)||n.currentLocation.pathname,l=vs(n.nextLocation.pathname,i)||n.nextLocation.pathname;return nd(a.pathname,l)!=null||nd(a.pathname,o)!=null}var _l=Iw();const KR="modulepreload",XR=function(t){return"/flexi/"+t},o_={},Ua=function(e,n,i){let a=Promise.resolve();if(n&&n.length>0){let d=function(f){return Promise.all(f.map(g=>Promise.resolve(g).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),u=l?.nonce||l?.getAttribute("nonce");a=d(n.map(f=>{if(f=XR(f),f in o_)return;o_[f]=!0;const g=f.endsWith(".css"),p=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${p}`))return;const b=document.createElement("link");if(b.rel=g?"stylesheet":KR,g||(b.as="script"),b.crossOrigin="",b.href=f,u&&b.setAttribute("nonce",u),document.head.appendChild(b),g)return new Promise((_,w)=>{b.addEventListener("load",_),b.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${f}`)))})}))}function o(l){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=l,window.dispatchEvent(u),!u.defaultPrevented)throw l}return a.then(l=>{for(const u of l||[])u.status==="rejected"&&o(u.reason);return e().catch(o)})},QR=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Ua(async()=>{const{default:i}=await Promise.resolve().then(()=>io);return{default:i}},[]).then(({default:i})=>i(...n)):e=fetch,(...n)=>e(...n)};class _m extends Error{constructor(e,n="FunctionsError",i){super(e),this.name=n,this.context=i}}class ZR extends _m{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class l_ extends _m{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class c_ extends _m{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Lg;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Lg||(Lg={}));var JR=function(t,e,n,i){function a(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(g){try{f(i.next(g))}catch(p){l(p)}}function d(g){try{f(i.throw(g))}catch(p){l(p)}}function f(g){g.done?o(g.value):a(g.value).then(u,d)}f((i=i.apply(t,e||[])).next())})};class eA{constructor(e,{headers:n={},customFetch:i,region:a=Lg.Any}={}){this.url=e,this.headers=n,this.region=a,this.fetch=QR(i)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var i;return JR(this,void 0,void 0,function*(){try{const{headers:a,method:o,body:l}=n;let u={},{region:d}=n;d||(d=this.region);const f=new URL(`${this.url}/${e}`);d&&d!=="any"&&(u["x-region"]=d,f.searchParams.set("forceFunctionRegion",d));let g;l&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(u["Content-Type"]="application/octet-stream",g=l):typeof l=="string"?(u["Content-Type"]="text/plain",g=l):typeof FormData<"u"&&l instanceof FormData?g=l:(u["Content-Type"]="application/json",g=JSON.stringify(l)));const p=yield this.fetch(f.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},u),this.headers),a),body:g}).catch(S=>{throw new ZR(S)}),b=p.headers.get("x-relay-error");if(b&&b==="true")throw new l_(p);if(!p.ok)throw new c_(p);let _=((i=p.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),w;return _==="application/json"?w=yield p.json():_==="application/octet-stream"?w=yield p.blob():_==="text/event-stream"?w=p:_==="multipart/form-data"?w=yield p.formData():w=yield p.text(),{data:w,error:null,response:p}}catch(a){return{data:null,error:a,response:a instanceof c_||a instanceof l_?a.context:void 0}}})}}var Jt={},Ar={},Tr={},Dr={},Mr={},kr={},tA=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Kr=tA();const nA=Kr.fetch,tS=Kr.fetch.bind(Kr),nS=Kr.Headers,iA=Kr.Request,sA=Kr.Response,io=Object.freeze(Object.defineProperty({__proto__:null,Headers:nS,Request:iA,Response:sA,default:tS,fetch:nA},Symbol.toStringTag,{value:"Module"})),aA=gO(io);var Cu={},u_;function iS(){if(u_)return Cu;u_=1,Object.defineProperty(Cu,"__esModule",{value:!0});class t extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return Cu.default=t,Cu}var d_;function sS(){if(d_)return kr;d_=1;var t=kr&&kr.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(kr,"__esModule",{value:!0});const e=t(aA),n=t(iS());class i{constructor(o){this.shouldThrowOnError=!1,this.method=o.method,this.url=o.url,this.headers=o.headers,this.schema=o.schema,this.body=o.body,this.shouldThrowOnError=o.shouldThrowOnError,this.signal=o.signal,this.isMaybeSingle=o.isMaybeSingle,o.fetch?this.fetch=o.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(o,l){return this.headers=Object.assign({},this.headers),this.headers[o]=l,this}then(o,l){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const u=this.fetch;let d=u(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async f=>{var g,p,b;let _=null,w=null,S=null,x=f.status,C=f.statusText;if(f.ok){if(this.method!=="HEAD"){const D=await f.text();D===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?w=D:w=JSON.parse(D))}const A=(g=this.headers.Prefer)===null||g===void 0?void 0:g.match(/count=(exact|planned|estimated)/),M=(p=f.headers.get("content-range"))===null||p===void 0?void 0:p.split("/");A&&M&&M.length>1&&(S=parseInt(M[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(w)&&(w.length>1?(_={code:"PGRST116",details:`Results contain ${w.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},w=null,S=null,x=406,C="Not Acceptable"):w.length===1?w=w[0]:w=null)}else{const A=await f.text();try{_=JSON.parse(A),Array.isArray(_)&&f.status===404&&(w=[],_=null,x=200,C="OK")}catch{f.status===404&&A===""?(x=204,C="No Content"):_={message:A}}if(_&&this.isMaybeSingle&&(!((b=_?.details)===null||b===void 0)&&b.includes("0 rows"))&&(_=null,x=200,C="OK"),_&&this.shouldThrowOnError)throw new n.default(_)}return{error:_,data:w,count:S,status:x,statusText:C}});return this.shouldThrowOnError||(d=d.catch(f=>{var g,p,b;return{error:{message:`${(g=f?.name)!==null&&g!==void 0?g:"FetchError"}: ${f?.message}`,details:`${(p=f?.stack)!==null&&p!==void 0?p:""}`,hint:"",code:`${(b=f?.code)!==null&&b!==void 0?b:""}`},data:null,count:null,status:0,statusText:""}})),d.then(o,l)}returns(){return this}overrideTypes(){return this}}return kr.default=i,kr}var h_;function aS(){if(h_)return Mr;h_=1;var t=Mr&&Mr.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Mr,"__esModule",{value:!0});const e=t(sS());class n extends e.default{select(a){let o=!1;const l=(a??"*").split("").map(u=>/\s/.test(u)&&!o?"":(u==='"'&&(o=!o),u)).join("");return this.url.searchParams.set("select",l),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(a,{ascending:o=!0,nullsFirst:l,foreignTable:u,referencedTable:d=u}={}){const f=d?`${d}.order`:"order",g=this.url.searchParams.get(f);return this.url.searchParams.set(f,`${g?`${g},`:""}${a}.${o?"asc":"desc"}${l===void 0?"":l?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:o,referencedTable:l=o}={}){const u=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(u,`${a}`),this}range(a,o,{foreignTable:l,referencedTable:u=l}={}){const d=typeof u>"u"?"offset":`${u}.offset`,f=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(d,`${a}`),this.url.searchParams.set(f,`${o-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:a=!1,verbose:o=!1,settings:l=!1,buffers:u=!1,wal:d=!1,format:f="text"}={}){var g;const p=[a?"analyze":null,o?"verbose":null,l?"settings":null,u?"buffers":null,d?"wal":null].filter(Boolean).join("|"),b=(g=this.headers.Accept)!==null&&g!==void 0?g:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${f}; for="${b}"; options=${p};`,f==="json"?this:this}rollback(){var a;return((a=this.headers.Prefer)!==null&&a!==void 0?a:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return Mr.default=n,Mr}var f_;function wm(){if(f_)return Dr;f_=1;var t=Dr&&Dr.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Dr,"__esModule",{value:!0});const e=t(aS());class n extends e.default{eq(a,o){return this.url.searchParams.append(a,`eq.${o}`),this}neq(a,o){return this.url.searchParams.append(a,`neq.${o}`),this}gt(a,o){return this.url.searchParams.append(a,`gt.${o}`),this}gte(a,o){return this.url.searchParams.append(a,`gte.${o}`),this}lt(a,o){return this.url.searchParams.append(a,`lt.${o}`),this}lte(a,o){return this.url.searchParams.append(a,`lte.${o}`),this}like(a,o){return this.url.searchParams.append(a,`like.${o}`),this}likeAllOf(a,o){return this.url.searchParams.append(a,`like(all).{${o.join(",")}}`),this}likeAnyOf(a,o){return this.url.searchParams.append(a,`like(any).{${o.join(",")}}`),this}ilike(a,o){return this.url.searchParams.append(a,`ilike.${o}`),this}ilikeAllOf(a,o){return this.url.searchParams.append(a,`ilike(all).{${o.join(",")}}`),this}ilikeAnyOf(a,o){return this.url.searchParams.append(a,`ilike(any).{${o.join(",")}}`),this}is(a,o){return this.url.searchParams.append(a,`is.${o}`),this}in(a,o){const l=Array.from(new Set(o)).map(u=>typeof u=="string"&&new RegExp("[,()]").test(u)?`"${u}"`:`${u}`).join(",");return this.url.searchParams.append(a,`in.(${l})`),this}contains(a,o){return typeof o=="string"?this.url.searchParams.append(a,`cs.${o}`):Array.isArray(o)?this.url.searchParams.append(a,`cs.{${o.join(",")}}`):this.url.searchParams.append(a,`cs.${JSON.stringify(o)}`),this}containedBy(a,o){return typeof o=="string"?this.url.searchParams.append(a,`cd.${o}`):Array.isArray(o)?this.url.searchParams.append(a,`cd.{${o.join(",")}}`):this.url.searchParams.append(a,`cd.${JSON.stringify(o)}`),this}rangeGt(a,o){return this.url.searchParams.append(a,`sr.${o}`),this}rangeGte(a,o){return this.url.searchParams.append(a,`nxl.${o}`),this}rangeLt(a,o){return this.url.searchParams.append(a,`sl.${o}`),this}rangeLte(a,o){return this.url.searchParams.append(a,`nxr.${o}`),this}rangeAdjacent(a,o){return this.url.searchParams.append(a,`adj.${o}`),this}overlaps(a,o){return typeof o=="string"?this.url.searchParams.append(a,`ov.${o}`):this.url.searchParams.append(a,`ov.{${o.join(",")}}`),this}textSearch(a,o,{config:l,type:u}={}){let d="";u==="plain"?d="pl":u==="phrase"?d="ph":u==="websearch"&&(d="w");const f=l===void 0?"":`(${l})`;return this.url.searchParams.append(a,`${d}fts${f}.${o}`),this}match(a){return Object.entries(a).forEach(([o,l])=>{this.url.searchParams.append(o,`eq.${l}`)}),this}not(a,o,l){return this.url.searchParams.append(a,`not.${o}.${l}`),this}or(a,{foreignTable:o,referencedTable:l=o}={}){const u=l?`${l}.or`:"or";return this.url.searchParams.append(u,`(${a})`),this}filter(a,o,l){return this.url.searchParams.append(a,`${o}.${l}`),this}}return Dr.default=n,Dr}var g_;function rS(){if(g_)return Tr;g_=1;var t=Tr&&Tr.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Tr,"__esModule",{value:!0});const e=t(wm());class n{constructor(a,{headers:o={},schema:l,fetch:u}){this.url=a,this.headers=o,this.schema=l,this.fetch=u}select(a,{head:o=!1,count:l}={}){const u=o?"HEAD":"GET";let d=!1;const f=(a??"*").split("").map(g=>/\s/.test(g)&&!d?"":(g==='"'&&(d=!d),g)).join("");return this.url.searchParams.set("select",f),l&&(this.headers.Prefer=`count=${l}`),new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(a,{count:o,defaultToNull:l=!0}={}){const u="POST",d=[];if(this.headers.Prefer&&d.push(this.headers.Prefer),o&&d.push(`count=${o}`),l||d.push("missing=default"),this.headers.Prefer=d.join(","),Array.isArray(a)){const f=a.reduce((g,p)=>g.concat(Object.keys(p)),[]);if(f.length>0){const g=[...new Set(f)].map(p=>`"${p}"`);this.url.searchParams.set("columns",g.join(","))}}return new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:this.fetch,allowEmpty:!1})}upsert(a,{onConflict:o,ignoreDuplicates:l=!1,count:u,defaultToNull:d=!0}={}){const f="POST",g=[`resolution=${l?"ignore":"merge"}-duplicates`];if(o!==void 0&&this.url.searchParams.set("on_conflict",o),this.headers.Prefer&&g.push(this.headers.Prefer),u&&g.push(`count=${u}`),d||g.push("missing=default"),this.headers.Prefer=g.join(","),Array.isArray(a)){const p=a.reduce((b,_)=>b.concat(Object.keys(_)),[]);if(p.length>0){const b=[...new Set(p)].map(_=>`"${_}"`);this.url.searchParams.set("columns",b.join(","))}}return new e.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:this.fetch,allowEmpty:!1})}update(a,{count:o}={}){const l="PATCH",u=[];return this.headers.Prefer&&u.push(this.headers.Prefer),o&&u.push(`count=${o}`),this.headers.Prefer=u.join(","),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:this.fetch,allowEmpty:!1})}delete({count:a}={}){const o="DELETE",l=[];return a&&l.push(`count=${a}`),this.headers.Prefer&&l.unshift(this.headers.Prefer),this.headers.Prefer=l.join(","),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return Tr.default=n,Tr}var rl={},ol={},m_;function rA(){return m_||(m_=1,Object.defineProperty(ol,"__esModule",{value:!0}),ol.version=void 0,ol.version="0.0.0-automated"),ol}var p_;function oA(){if(p_)return rl;p_=1,Object.defineProperty(rl,"__esModule",{value:!0}),rl.DEFAULT_HEADERS=void 0;const t=rA();return rl.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${t.version}`},rl}var v_;function lA(){if(v_)return Ar;v_=1;var t=Ar&&Ar.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Ar,"__esModule",{value:!0});const e=t(rS()),n=t(wm()),i=oA();class a{constructor(l,{headers:u={},schema:d,fetch:f}={}){this.url=l,this.headers=Object.assign(Object.assign({},i.DEFAULT_HEADERS),u),this.schemaName=d,this.fetch=f}from(l){const u=new URL(`${this.url}/${l}`);return new e.default(u,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(l){return new a(this.url,{headers:this.headers,schema:l,fetch:this.fetch})}rpc(l,u={},{head:d=!1,get:f=!1,count:g}={}){let p;const b=new URL(`${this.url}/rpc/${l}`);let _;d||f?(p=d?"HEAD":"GET",Object.entries(u).filter(([S,x])=>x!==void 0).map(([S,x])=>[S,Array.isArray(x)?`{${x.join(",")}}`:`${x}`]).forEach(([S,x])=>{b.searchParams.append(S,x)})):(p="POST",_=u);const w=Object.assign({},this.headers);return g&&(w.Prefer=`count=${g}`),new n.default({method:p,url:b,headers:w,schema:this.schemaName,body:_,fetch:this.fetch,allowEmpty:!1})}}return Ar.default=a,Ar}var y_;function cA(){if(y_)return Jt;y_=1;var t=Jt&&Jt.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(Jt,"__esModule",{value:!0}),Jt.PostgrestError=Jt.PostgrestBuilder=Jt.PostgrestTransformBuilder=Jt.PostgrestFilterBuilder=Jt.PostgrestQueryBuilder=Jt.PostgrestClient=void 0;const e=t(lA());Jt.PostgrestClient=e.default;const n=t(rS());Jt.PostgrestQueryBuilder=n.default;const i=t(wm());Jt.PostgrestFilterBuilder=i.default;const a=t(aS());Jt.PostgrestTransformBuilder=a.default;const o=t(sS());Jt.PostgrestBuilder=o.default;const l=t(iS());return Jt.PostgrestError=l.default,Jt.default={PostgrestClient:e.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:i.default,PostgrestTransformBuilder:a.default,PostgrestBuilder:o.default,PostgrestError:l.default},Jt}var uA=cA();const dA=dm(uA),{PostgrestClient:hA,PostgrestQueryBuilder:Vz,PostgrestFilterBuilder:$z,PostgrestTransformBuilder:qz,PostgrestBuilder:Gz,PostgrestError:Yz}=dA;class fA{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const n=parseInt(process.versions.node.split(".")[0]);return n>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${n} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${n} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const i=this.getWebSocketConstructor();return new i(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const gA="2.15.1",mA=`realtime-js/${gA}`,pA="1.0.0",Pg=1e4,vA=1e3,yA=100;var Cl;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Cl||(Cl={}));var $t;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})($t||($t={}));var gi;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(gi||(gi={}));var zg;(function(t){t.websocket="websocket"})(zg||(zg={}));var La;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(La||(La={}));class bA{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),i=new TextDecoder;return this._decodeBroadcast(e,n,i)}_decodeBroadcast(e,n,i){const a=n.getUint8(1),o=n.getUint8(2);let l=this.HEADER_LENGTH+2;const u=i.decode(e.slice(l,l+a));l=l+a;const d=i.decode(e.slice(l,l+o));l=l+o;const f=JSON.parse(i.decode(e.slice(l,e.byteLength)));return{ref:null,topic:u,event:d,payload:f}}}class oS{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var dt;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(dt||(dt={}));const b_=(t,e,n={})=>{var i;const a=(i=n.skipTypes)!==null&&i!==void 0?i:[];return Object.keys(e).reduce((o,l)=>(o[l]=_A(l,t,e,a),o),{})},_A=(t,e,n,i)=>{const a=e.find(u=>u.name===t),o=a?.type,l=n[t];return o&&!i.includes(o)?lS(o,l):Ig(l)},lS=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return EA(e,n)}switch(t){case dt.bool:return wA(e);case dt.float4:case dt.float8:case dt.int2:case dt.int4:case dt.int8:case dt.numeric:case dt.oid:return SA(e);case dt.json:case dt.jsonb:return xA(e);case dt.timestamp:return CA(e);case dt.abstime:case dt.date:case dt.daterange:case dt.int4range:case dt.int8range:case dt.money:case dt.reltime:case dt.text:case dt.time:case dt.timestamptz:case dt.timetz:case dt.tsrange:case dt.tstzrange:return Ig(e);default:return Ig(e)}},Ig=t=>t,wA=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},SA=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},xA=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},EA=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,i=t[n];if(t[0]==="{"&&i==="}"){let o;const l=t.slice(1,n);try{o=JSON.parse("["+l+"]")}catch{o=l?l.split(","):[]}return o.map(u=>lS(e,u))}return t},CA=t=>typeof t=="string"?t.replace(" ","T"):t,cS=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class ig{constructor(e,n,i={},a=Pg){this.channel=e,this.event=n,this.payload=i,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var i;return this._hasReceived(e)&&n((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(i=>i.status===e).forEach(i=>i.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var __;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(__||(__={}));class Ol{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=n?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},a=>{const{onJoin:o,onLeave:l,onSync:u}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ol.syncState(this.state,a,o,l),this.pendingDiffs.forEach(d=>{this.state=Ol.syncDiff(this.state,d,o,l)}),this.pendingDiffs=[],u()}),this.channel._on(i.diff,{},a=>{const{onJoin:o,onLeave:l,onSync:u}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=Ol.syncDiff(this.state,a,o,l),u())}),this.onJoin((a,o,l)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:o,newPresences:l})}),this.onLeave((a,o,l)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:o,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,i,a){const o=this.cloneDeep(e),l=this.transformState(n),u={},d={};return this.map(o,(f,g)=>{l[f]||(d[f]=g)}),this.map(l,(f,g)=>{const p=o[f];if(p){const b=g.map(x=>x.presence_ref),_=p.map(x=>x.presence_ref),w=g.filter(x=>_.indexOf(x.presence_ref)<0),S=p.filter(x=>b.indexOf(x.presence_ref)<0);w.length>0&&(u[f]=w),S.length>0&&(d[f]=S)}else u[f]=g}),this.syncDiff(o,{joins:u,leaves:d},i,a)}static syncDiff(e,n,i,a){const{joins:o,leaves:l}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return i||(i=()=>{}),a||(a=()=>{}),this.map(o,(u,d)=>{var f;const g=(f=e[u])!==null&&f!==void 0?f:[];if(e[u]=this.cloneDeep(d),g.length>0){const p=e[u].map(_=>_.presence_ref),b=g.filter(_=>p.indexOf(_.presence_ref)<0);e[u].unshift(...b)}i(u,g,d)}),this.map(l,(u,d)=>{let f=e[u];if(!f)return;const g=d.map(p=>p.presence_ref);f=f.filter(p=>g.indexOf(p.presence_ref)<0),e[u]=f,a(u,f,d),f.length===0&&delete e[u]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(i=>n(i,e[i]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,i)=>{const a=e[i];return"metas"in a?n[i]=a.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):n[i]=a,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var w_;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(w_||(w_={}));var Rl;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Rl||(Rl={}));var ds;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(ds||(ds={}));class Sm{constructor(e,n={config:{}},i){this.topic=e,this.params=n,this.socket=i,this.bindings={},this.state=$t.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new ig(this,gi.join,this.params,this.timeout),this.rejoinTimer=new oS(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=$t.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=$t.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=$t.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=$t.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=$t.errored,this.rejoinTimer.scheduleTimeout())}),this._on(gi.reply,{},(a,o)=>{this._trigger(this._replyEventName(o),a)}),this.presence=new Ol(this),this.broadcastEndpointURL=cS(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var i,a;if(this.socket.isConnected()||this.socket.connect(),this.state==$t.closed){const{config:{broadcast:o,presence:l,private:u}}=this.params,d=(a=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(b=>b.filter))!==null&&a!==void 0?a:[],f=!!this.bindings[Rl.PRESENCE]&&this.bindings[Rl.PRESENCE].length>0,g={},p={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:f}),postgres_changes:d,private:u};this.socket.accessTokenValue&&(g.access_token=this.socket.accessTokenValue),this._onError(b=>e?.(ds.CHANNEL_ERROR,b)),this._onClose(()=>e?.(ds.CLOSED)),this.updateJoinPayload(Object.assign({config:p},g)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:b})=>{var _;if(this.socket.setAuth(),b===void 0){e?.(ds.SUBSCRIBED);return}else{const w=this.bindings.postgres_changes,S=(_=w?.length)!==null&&_!==void 0?_:0,x=[];for(let C=0;C<S;C++){const O=w[C],{filter:{event:A,schema:M,table:D,filter:V}}=O,F=b&&b[C];if(F&&F.event===A&&F.schema===M&&F.table===D&&F.filter===V)x.push(Object.assign(Object.assign({},O),{id:F.id}));else{this.unsubscribe(),this.state=$t.errored,e?.(ds.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=x,e&&e(ds.SUBSCRIBED);return}}).receive("error",b=>{this.state=$t.errored,e?.(ds.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(b).join(", ")||"error")))}).receive("timeout",()=>{e?.(ds.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,i){return this.state===$t.joined&&e===Rl.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,n,i)}async send(e,n={}){var i,a;if(!this._canPush()&&e.type==="broadcast"){const{event:o,payload:l}=e,d={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:l,private:this.private}]})};try{const f=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(i=n.timeout)!==null&&i!==void 0?i:this.timeout);return await((a=f.body)===null||a===void 0?void 0:a.cancel()),f.ok?"ok":"error"}catch(f){return f.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var l,u,d;const f=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((d=(u=(l=this.params)===null||l===void 0?void 0:l.config)===null||u===void 0?void 0:u.broadcast)===null||d===void 0)&&d.ack)&&o("ok"),f.receive("ok",()=>o("ok")),f.receive("error",()=>o("error")),f.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=$t.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(gi.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(a=>{i=new ig(this,gi.leave,{},e),i.receive("ok",()=>{n(),a("ok")}).receive("timeout",()=>{n(),a("timed out")}).receive("error",()=>{a("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=$t.closed,this.bindings={}}async _fetchWithTimeout(e,n,i){const a=new AbortController,o=setTimeout(()=>a.abort(),i),l=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:a.signal}));return clearTimeout(o),l}_push(e,n,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new ig(this,e,n,i);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>yA){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,i){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,i){var a,o;const l=e.toLocaleLowerCase(),{close:u,error:d,leave:f,join:g}=gi;if(i&&[u,d,f,g].indexOf(l)>=0&&i!==this._joinRef())return;let b=this._onMessage(l,n,i);if(n&&!b)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(_=>{var w,S,x;return((w=_.filter)===null||w===void 0?void 0:w.event)==="*"||((x=(S=_.filter)===null||S===void 0?void 0:S.event)===null||x===void 0?void 0:x.toLocaleLowerCase())===l}).map(_=>_.callback(b,i)):(o=this.bindings[l])===null||o===void 0||o.filter(_=>{var w,S,x,C,O,A;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in _){const M=_.id,D=(w=_.filter)===null||w===void 0?void 0:w.event;return M&&((S=n.ids)===null||S===void 0?void 0:S.includes(M))&&(D==="*"||D?.toLocaleLowerCase()===((x=n.data)===null||x===void 0?void 0:x.type.toLocaleLowerCase()))}else{const M=(O=(C=_?.filter)===null||C===void 0?void 0:C.event)===null||O===void 0?void 0:O.toLocaleLowerCase();return M==="*"||M===((A=n?.event)===null||A===void 0?void 0:A.toLocaleLowerCase())}else return _.type.toLocaleLowerCase()===l}).map(_=>{if(typeof b=="object"&&"ids"in b){const w=b.data,{schema:S,table:x,commit_timestamp:C,type:O,errors:A}=w;b=Object.assign(Object.assign({},{schema:S,table:x,commit_timestamp:C,eventType:O,new:{},old:{},errors:A}),this._getPayloadRecords(w))}_.callback(b,i)})}_isClosed(){return this.state===$t.closed}_isJoined(){return this.state===$t.joined}_isJoining(){return this.state===$t.joining}_isLeaving(){return this.state===$t.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,i){const a=e.toLocaleLowerCase(),o={type:a,filter:n,callback:i};return this.bindings[a]?this.bindings[a].push(o):this.bindings[a]=[o],this}_off(e,n){const i=e.toLocaleLowerCase();return this.bindings[i]&&(this.bindings[i]=this.bindings[i].filter(a=>{var o;return!(((o=a.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===i&&Sm.isEqual(a.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const i in e)if(e[i]!==n[i])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(gi.close,{},e)}_onError(e){this._on(gi.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=$t.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=b_(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=b_(e.columns,e.old_record)),n}}const S_=()=>{},Ou={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},OA=[1e3,2e3,5e3,1e4],RA=1e4,AA=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class TA{constructor(e,n){var i;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Pg,this.transport=null,this.heartbeatIntervalMs=Ou.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=S_,this.ref=0,this.reconnectTimer=null,this.logger=S_,this.conn=null,this.sendBuffer=[],this.serializer=new bA,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>{let o;return a?o=a:typeof fetch>"u"?o=(...l)=>Ua(async()=>{const{default:u}=await Promise.resolve().then(()=>io);return{default:u}},void 0).then(({default:u})=>u(...l)).catch(u=>{throw new Error(`Failed to load @supabase/node-fetch: ${u.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):o=fetch,(...l)=>o(...l)},!(!((i=n?.params)===null||i===void 0)&&i.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${zg.websocket}`,this.httpEndpoint=cS(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=fA.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:pA}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const i=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(i),this._setConnectionState("disconnected")},e?this.conn.close(e,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,i){this.logger(e,n,i)}connectionState(){switch(this.conn&&this.conn.readyState){case Cl.connecting:return La.Connecting;case Cl.open:return La.Open;case Cl.closing:return La.Closing;default:return La.Closed}}isConnected(){return this.connectionState()===La.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const i=`realtime:${e}`,a=this.getChannels().find(o=>o.topic===i);if(a)return a;{const o=new Sm(`realtime:${e}`,n,this);return this.channels.push(o),o}}push(e){const{topic:n,event:i,payload:a,ref:o}=e,l=()=>{this.encode(e,u=>{var d;(d=this.conn)===null||d===void 0||d.send(u)})};this.log("push",`${n} ${i} (${o})`,a),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(vA,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Ou.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(i=>i.topic===e&&(i._isJoined()||i._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{n.topic==="phoenix"&&n.event==="phx_reply"&&this.heartbeatCallback(n.payload.status==="ok"?"ok":"error"),n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:i,event:a,payload:o,ref:l}=n,u=l?`(${l})`:"",d=o.status||"";this.log("receive",`${d} ${i} ${a} ${u}`.trim(),o),this.channels.filter(f=>f._isMember(i)).forEach(f=>f._trigger(a,o,l)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(gi.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const i=e.match(/\?/)?"&":"?",a=new URLSearchParams(n);return`${e}${i}${a}`}_workerObjectUrl(e){let n;if(e)n=e;else{const i=new Blob([AA],{type:"application/javascript"});n=URL.createObjectURL(i)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n;e?n=e:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(i=>{const a={access_token:n,version:mA};n&&i.updateJoinPayload(a),i.joinedOnce&&i._isJoined()&&i._push(gi.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(i=>{try{i(n)}catch(a){this.log("error",`error in ${e} callback`,a)}})}catch(i){this.log("error",`error triggering ${e} callbacks`,i)}}_setupReconnectionTimer(){this.reconnectTimer=new oS(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Ou.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,i,a,o,l,u,d,f;if(this.transport=(n=e?.transport)!==null&&n!==void 0?n:null,this.timeout=(i=e?.timeout)!==null&&i!==void 0?i:Pg,this.heartbeatIntervalMs=(a=e?.heartbeatIntervalMs)!==null&&a!==void 0?a:Ou.HEARTBEAT_INTERVAL,this.worker=(o=e?.worker)!==null&&o!==void 0?o:!1,this.accessToken=(l=e?.accessToken)!==null&&l!==void 0?l:null,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=e?.reconnectAfterMs)!==null&&u!==void 0?u:(g=>OA[g-1]||RA),this.encode=(d=e?.encode)!==null&&d!==void 0?d:((g,p)=>p(JSON.stringify(g))),this.decode=(f=e?.decode)!==null&&f!==void 0?f:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}}class xm extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function qt(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class DA extends xm{constructor(e,n,i){super(e),this.name="StorageApiError",this.status=n,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Fg extends xm{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var MA=function(t,e,n,i){function a(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(g){try{f(i.next(g))}catch(p){l(p)}}function d(g){try{f(i.throw(g))}catch(p){l(p)}}function f(g){g.done?o(g.value):a(g.value).then(u,d)}f((i=i.apply(t,e||[])).next())})};const uS=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Ua(async()=>{const{default:i}=await Promise.resolve().then(()=>io);return{default:i}},void 0).then(({default:i})=>i(...n)):e=fetch,(...n)=>e(...n)},kA=()=>MA(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Ua(()=>Promise.resolve().then(()=>io),void 0)).Response:Response}),Ug=t=>{if(Array.isArray(t))return t.map(n=>Ug(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,i])=>{const a=n.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[a]=Ug(i)}),e},NA=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var Ha=function(t,e,n,i){function a(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(g){try{f(i.next(g))}catch(p){l(p)}}function d(g){try{f(i.throw(g))}catch(p){l(p)}}function f(g){g.done?o(g.value):a(g.value).then(u,d)}f((i=i.apply(t,e||[])).next())})};const sg=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),jA=(t,e,n)=>Ha(void 0,void 0,void 0,function*(){const i=yield kA();t instanceof i&&!n?.noResolveJson?t.json().then(a=>{const o=t.status||500,l=a?.statusCode||o+"";e(new DA(sg(a),o,l))}).catch(a=>{e(new Fg(sg(a),a))}):e(new Fg(sg(t),t))}),LA=(t,e,n,i)=>{const a={method:t,headers:e?.headers||{}};return t==="GET"||!i?a:(NA(i)?(a.headers=Object.assign({"Content-Type":"application/json"},e?.headers),a.body=JSON.stringify(i)):a.body=i,e?.duplex&&(a.duplex=e.duplex),Object.assign(Object.assign({},a),n))};function sc(t,e,n,i,a,o){return Ha(this,void 0,void 0,function*(){return new Promise((l,u)=>{t(n,LA(e,i,a,o)).then(d=>{if(!d.ok)throw d;return i?.noResolveJson?d:d.json()}).then(d=>l(d)).catch(d=>jA(d,u,i))})})}function id(t,e,n,i){return Ha(this,void 0,void 0,function*(){return sc(t,"GET",e,n,i)})}function Pi(t,e,n,i,a){return Ha(this,void 0,void 0,function*(){return sc(t,"POST",e,i,a,n)})}function Hg(t,e,n,i,a){return Ha(this,void 0,void 0,function*(){return sc(t,"PUT",e,i,a,n)})}function PA(t,e,n,i){return Ha(this,void 0,void 0,function*(){return sc(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),i)})}function dS(t,e,n,i,a){return Ha(this,void 0,void 0,function*(){return sc(t,"DELETE",e,i,a,n)})}var wn=function(t,e,n,i){function a(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(g){try{f(i.next(g))}catch(p){l(p)}}function d(g){try{f(i.throw(g))}catch(p){l(p)}}function f(g){g.done?o(g.value):a(g.value).then(u,d)}f((i=i.apply(t,e||[])).next())})};const zA={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},x_={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class IA{constructor(e,n={},i,a){this.url=e,this.headers=n,this.bucketId=i,this.fetch=uS(a)}uploadOrUpdate(e,n,i,a){return wn(this,void 0,void 0,function*(){try{let o;const l=Object.assign(Object.assign({},x_),a);let u=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(l.upsert)});const d=l.metadata;typeof Blob<"u"&&i instanceof Blob?(o=new FormData,o.append("cacheControl",l.cacheControl),d&&o.append("metadata",this.encodeMetadata(d)),o.append("",i)):typeof FormData<"u"&&i instanceof FormData?(o=i,o.append("cacheControl",l.cacheControl),d&&o.append("metadata",this.encodeMetadata(d))):(o=i,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType,d&&(u["x-metadata"]=this.toBase64(this.encodeMetadata(d)))),a?.headers&&(u=Object.assign(Object.assign({},u),a.headers));const f=this._removeEmptyFolders(n),g=this._getFinalPath(f),p=yield(e=="PUT"?Hg:Pi)(this.fetch,`${this.url}/object/${g}`,o,Object.assign({headers:u},l?.duplex?{duplex:l.duplex}:{}));return{data:{path:f,id:p.Id,fullPath:p.Key},error:null}}catch(o){if(qt(o))return{data:null,error:o};throw o}})}upload(e,n,i){return wn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,i)})}uploadToSignedUrl(e,n,i,a){return wn(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(e),l=this._getFinalPath(o),u=new URL(this.url+`/object/upload/sign/${l}`);u.searchParams.set("token",n);try{let d;const f=Object.assign({upsert:x_.upsert},a),g=Object.assign(Object.assign({},this.headers),{"x-upsert":String(f.upsert)});typeof Blob<"u"&&i instanceof Blob?(d=new FormData,d.append("cacheControl",f.cacheControl),d.append("",i)):typeof FormData<"u"&&i instanceof FormData?(d=i,d.append("cacheControl",f.cacheControl)):(d=i,g["cache-control"]=`max-age=${f.cacheControl}`,g["content-type"]=f.contentType);const p=yield Hg(this.fetch,u.toString(),d,{headers:g});return{data:{path:o,fullPath:p.Key},error:null}}catch(d){if(qt(d))return{data:null,error:d};throw d}})}createSignedUploadUrl(e,n){return wn(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e);const a=Object.assign({},this.headers);n?.upsert&&(a["x-upsert"]="true");const o=yield Pi(this.fetch,`${this.url}/object/upload/sign/${i}`,{},{headers:a}),l=new URL(this.url+o.url),u=l.searchParams.get("token");if(!u)throw new xm("No token returned by API");return{data:{signedUrl:l.toString(),path:e,token:u},error:null}}catch(i){if(qt(i))return{data:null,error:i};throw i}})}update(e,n,i){return wn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,i)})}move(e,n,i){return wn(this,void 0,void 0,function*(){try{return{data:yield Pi(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:i?.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(qt(a))return{data:null,error:a};throw a}})}copy(e,n,i){return wn(this,void 0,void 0,function*(){try{return{data:{path:(yield Pi(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:i?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(qt(a))return{data:null,error:a};throw a}})}createSignedUrl(e,n,i){return wn(this,void 0,void 0,function*(){try{let a=this._getFinalPath(e),o=yield Pi(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:n},i?.transform?{transform:i.transform}:{}),{headers:this.headers});const l=i?.download?`&download=${i.download===!0?"":i.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${l}`)},{data:o,error:null}}catch(a){if(qt(a))return{data:null,error:a};throw a}})}createSignedUrls(e,n,i){return wn(this,void 0,void 0,function*(){try{const a=yield Pi(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),o=i?.download?`&download=${i.download===!0?"":i.download}`:"";return{data:a.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${o}`):null})),error:null}}catch(a){if(qt(a))return{data:null,error:a};throw a}})}download(e,n){return wn(this,void 0,void 0,function*(){const a=typeof n?.transform<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString(n?.transform||{}),l=o?`?${o}`:"";try{const u=this._getFinalPath(e);return{data:yield(yield id(this.fetch,`${this.url}/${a}/${u}${l}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(u){if(qt(u))return{data:null,error:u};throw u}})}info(e){return wn(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const i=yield id(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Ug(i),error:null}}catch(i){if(qt(i))return{data:null,error:i};throw i}})}exists(e){return wn(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield PA(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(i){if(qt(i)&&i instanceof Fg){const a=i.originalError;if([400,404].includes(a?.status))return{data:!1,error:i}}throw i}})}getPublicUrl(e,n){const i=this._getFinalPath(e),a=[],o=n?.download?`download=${n.download===!0?"":n.download}`:"";o!==""&&a.push(o);const u=typeof n?.transform<"u"?"render/image":"object",d=this.transformOptsToQueryString(n?.transform||{});d!==""&&a.push(d);let f=a.join("&");return f!==""&&(f=`?${f}`),{data:{publicUrl:encodeURI(`${this.url}/${u}/public/${i}${f}`)}}}remove(e){return wn(this,void 0,void 0,function*(){try{return{data:yield dS(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(qt(n))return{data:null,error:n};throw n}})}list(e,n,i){return wn(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},zA),n),{prefix:e||""});return{data:yield Pi(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},i),error:null}}catch(a){if(qt(a))return{data:null,error:a};throw a}})}listV2(e,n){return wn(this,void 0,void 0,function*(){try{const i=Object.assign({},e);return{data:yield Pi(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,i,{headers:this.headers},n),error:null}}catch(i){if(qt(i))return{data:null,error:i};throw i}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const FA="2.11.0",UA={"X-Client-Info":`storage-js/${FA}`};var Nr=function(t,e,n,i){function a(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(g){try{f(i.next(g))}catch(p){l(p)}}function d(g){try{f(i.throw(g))}catch(p){l(p)}}function f(g){g.done?o(g.value):a(g.value).then(u,d)}f((i=i.apply(t,e||[])).next())})};class HA{constructor(e,n={},i,a){const o=new URL(e);a?.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href,this.headers=Object.assign(Object.assign({},UA),n),this.fetch=uS(i)}listBuckets(){return Nr(this,void 0,void 0,function*(){try{return{data:yield id(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(qt(e))return{data:null,error:e};throw e}})}getBucket(e){return Nr(this,void 0,void 0,function*(){try{return{data:yield id(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(qt(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return Nr(this,void 0,void 0,function*(){try{return{data:yield Pi(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(qt(i))return{data:null,error:i};throw i}})}updateBucket(e,n){return Nr(this,void 0,void 0,function*(){try{return{data:yield Hg(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(qt(i))return{data:null,error:i};throw i}})}emptyBucket(e){return Nr(this,void 0,void 0,function*(){try{return{data:yield Pi(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(qt(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Nr(this,void 0,void 0,function*(){try{return{data:yield dS(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(qt(n))return{data:null,error:n};throw n}})}}class BA extends HA{constructor(e,n={},i,a){super(e,n,i,a)}from(e){return new IA(this.url,this.headers,e,this.fetch)}}const VA="2.55.0";let wl="";typeof Deno<"u"?wl="deno":typeof document<"u"?wl="web":typeof navigator<"u"&&navigator.product==="ReactNative"?wl="react-native":wl="node";const $A={"X-Client-Info":`supabase-js-${wl}/${VA}`},qA={headers:$A},GA={schema:"public"},YA={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},WA={};var KA=function(t,e,n,i){function a(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(g){try{f(i.next(g))}catch(p){l(p)}}function d(g){try{f(i.throw(g))}catch(p){l(p)}}function f(g){g.done?o(g.value):a(g.value).then(u,d)}f((i=i.apply(t,e||[])).next())})};const XA=t=>{let e;return t?e=t:typeof fetch>"u"?e=tS:e=fetch,(...n)=>e(...n)},QA=()=>typeof Headers>"u"?nS:Headers,ZA=(t,e,n)=>{const i=XA(n),a=QA();return(o,l)=>KA(void 0,void 0,void 0,function*(){var u;const d=(u=yield e())!==null&&u!==void 0?u:t;let f=new a(l?.headers);return f.has("apikey")||f.set("apikey",t),f.has("Authorization")||f.set("Authorization",`Bearer ${d}`),i(o,Object.assign(Object.assign({},l),{headers:f}))})};var JA=function(t,e,n,i){function a(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(g){try{f(i.next(g))}catch(p){l(p)}}function d(g){try{f(i.throw(g))}catch(p){l(p)}}function f(g){g.done?o(g.value):a(g.value).then(u,d)}f((i=i.apply(t,e||[])).next())})};function eT(t){return t.endsWith("/")?t:t+"/"}function tT(t,e){var n,i;const{db:a,auth:o,realtime:l,global:u}=t,{db:d,auth:f,realtime:g,global:p}=e,b={db:Object.assign(Object.assign({},d),a),auth:Object.assign(Object.assign({},f),o),realtime:Object.assign(Object.assign({},g),l),storage:{},global:Object.assign(Object.assign(Object.assign({},p),u),{headers:Object.assign(Object.assign({},(n=p?.headers)!==null&&n!==void 0?n:{}),(i=u?.headers)!==null&&i!==void 0?i:{})}),accessToken:()=>JA(this,void 0,void 0,function*(){return""})};return t.accessToken?b.accessToken=t.accessToken:delete b.accessToken,b}const hS="2.71.1",Br=30*1e3,Bg=3,ag=Bg*Br,nT="http://localhost:9999",iT="supabase.auth.token",sT={"X-Client-Info":`gotrue-js/${hS}`},Vg="X-Supabase-Api-Version",fS={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},aT=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,rT=600*1e3;class Em extends Error{constructor(e,n,i){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=i}}function De(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class oT extends Em{constructor(e,n,i){super(e,n,i),this.name="AuthApiError",this.status=n,this.code=i}}function lT(t){return De(t)&&t.name==="AuthApiError"}class gS extends Em{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class aa extends Em{constructor(e,n,i,a){super(e,i,a),this.name=n,this.status=i}}class Ws extends aa{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function cT(t){return De(t)&&t.name==="AuthSessionMissingError"}class Ru extends aa{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Au extends aa{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Tu extends aa{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function uT(t){return De(t)&&t.name==="AuthImplicitGrantRedirectError"}class E_ extends aa{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class $g extends aa{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function rg(t){return De(t)&&t.name==="AuthRetryableFetchError"}class C_ extends aa{constructor(e,n,i){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=i}}class qg extends aa{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const sd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),O_=` 	
\r=`.split(""),dT=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<O_.length;e+=1)t[O_[e].charCodeAt(0)]=-2;for(let e=0;e<sd.length;e+=1)t[sd[e].charCodeAt(0)]=e;return t})();function R_(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const i=e.queue>>e.queuedBits-6&63;n(sd[i]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const i=e.queue>>e.queuedBits-6&63;n(sd[i]),e.queuedBits-=6}}function mS(t,e,n){const i=dT[t];if(i>-1)for(e.queue=e.queue<<6|i,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function A_(t){const e=[],n=l=>{e.push(String.fromCodePoint(l))},i={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},o=l=>{gT(l,i,n)};for(let l=0;l<t.length;l+=1)mS(t.charCodeAt(l),a,o);return e.join("")}function hT(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function fT(t,e){for(let n=0;n<t.length;n+=1){let i=t.charCodeAt(n);if(i>55295&&i<=56319){const a=(i-55296)*1024&65535;i=(t.charCodeAt(n+1)-56320&65535|a)+65536,n+=1}hT(i,e)}}function gT(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let i=1;i<6;i+=1)if((t>>7-i&1)===0){e.utf8seq=i;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function mT(t){const e=[],n={queue:0,queuedBits:0},i=a=>{e.push(a)};for(let a=0;a<t.length;a+=1)mS(t.charCodeAt(a),n,i);return new Uint8Array(e)}function pT(t){const e=[];return fT(t,n=>e.push(n)),new Uint8Array(e)}function vT(t){const e=[],n={queue:0,queuedBits:0},i=a=>{e.push(a)};return t.forEach(a=>R_(a,n,i)),R_(null,n,i),e.join("")}function yT(t){return Math.round(Date.now()/1e3)+t}function bT(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const fi=()=>typeof window<"u"&&typeof document<"u",Oa={tested:!1,writable:!1},pS=()=>{if(!fi())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Oa.tested)return Oa.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Oa.tested=!0,Oa.writable=!0}catch{Oa.tested=!0,Oa.writable=!1}return Oa.writable};function _T(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((a,o)=>{e[o]=a})}catch{}return n.searchParams.forEach((i,a)=>{e[a]=i}),e}const vS=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Ua(async()=>{const{default:i}=await Promise.resolve().then(()=>io);return{default:i}},void 0).then(({default:i})=>i(...n)):e=fetch,(...n)=>e(...n)},wT=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Vr=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},Ra=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Gs=async(t,e)=>{await t.removeItem(e)};class Rd{constructor(){this.promise=new Rd.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}Rd.promiseConstructor=Promise;function og(t){const e=t.split(".");if(e.length!==3)throw new qg("Invalid JWT structure");for(let i=0;i<e.length;i++)if(!aT.test(e[i]))throw new qg("JWT not in base64url format");return{header:JSON.parse(A_(e[0])),payload:JSON.parse(A_(e[1])),signature:mT(e[2]),raw:{header:e[0],payload:e[1]}}}async function ST(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function xT(t,e){return new Promise((i,a)=>{(async()=>{for(let o=0;o<1/0;o++)try{const l=await t(o);if(!e(o,null,l)){i(l);return}}catch(l){if(!e(o,l)){a(l);return}}})()})}function ET(t){return("0"+t.toString(16)).substr(-2)}function CT(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=n.length;let a="";for(let o=0;o<56;o++)a+=n.charAt(Math.floor(Math.random()*i));return a}return crypto.getRandomValues(e),Array.from(e,ET).join("")}async function OT(t){const n=new TextEncoder().encode(t),i=await crypto.subtle.digest("SHA-256",n),a=new Uint8Array(i);return Array.from(a).map(o=>String.fromCharCode(o)).join("")}async function RT(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await OT(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function jr(t,e,n=!1){const i=CT();let a=i;n&&(a+="/PASSWORD_RECOVERY"),await Vr(t,`${e}-code-verifier`,a);const o=await RT(i);return[o,i===o?"plain":"s256"]}const AT=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function TT(t){const e=t.headers.get(Vg);if(!e||!e.match(AT))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function DT(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function MT(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const kT=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Lr(t){if(!kT.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function lg(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function T_(t){return JSON.parse(JSON.stringify(t))}var NT=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(t);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(t,i[a])&&(n[i[a]]=t[i[a]]);return n};const Ma=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),jT=[502,503,504];async function D_(t){var e;if(!wT(t))throw new $g(Ma(t),0);if(jT.includes(t.status))throw new $g(Ma(t),t.status);let n;try{n=await t.json()}catch(o){throw new gS(Ma(o),o)}let i;const a=TT(t);if(a&&a.getTime()>=fS["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?i=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(i=n.error_code),i){if(i==="weak_password")throw new C_(Ma(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(i==="session_not_found")throw new Ws}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((o,l)=>o&&typeof l=="string",!0))throw new C_(Ma(n),t.status,n.weak_password.reasons);throw new oT(Ma(n),t.status||500,i)}const LT=(t,e,n,i)=>{const a={method:t,headers:e?.headers||{}};return t==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),a.body=JSON.stringify(i),Object.assign(Object.assign({},a),n))};async function Fe(t,e,n,i){var a;const o=Object.assign({},i?.headers);o[Vg]||(o[Vg]=fS["2024-01-01"].name),i?.jwt&&(o.Authorization=`Bearer ${i.jwt}`);const l=(a=i?.query)!==null&&a!==void 0?a:{};i?.redirectTo&&(l.redirect_to=i.redirectTo);const u=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",d=await PT(t,e,n+u,{headers:o,noResolveJson:i?.noResolveJson},{},i?.body);return i?.xform?i?.xform(d):{data:Object.assign({},d),error:null}}async function PT(t,e,n,i,a,o){const l=LT(e,i,a,o);let u;try{u=await t(n,Object.assign({},l))}catch(d){throw console.error(d),new $g(Ma(d),0)}if(u.ok||await D_(u),i?.noResolveJson)return u;try{return await u.json()}catch(d){await D_(d)}}function ls(t){var e;let n=null;UT(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=yT(t.expires_in)));const i=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:i},error:null}}function M_(t){const e=ls(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,i)=>n&&typeof i=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Xs(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function zT(t){return{data:t,error:null}}function IT(t){const{action_link:e,email_otp:n,hashed_token:i,redirect_to:a,verification_type:o}=t,l=NT(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),u={action_link:e,email_otp:n,hashed_token:i,redirect_to:a,verification_type:o},d=Object.assign({},l);return{data:{properties:u,user:d},error:null}}function FT(t){return t}function UT(t){return t.access_token&&t.refresh_token&&t.expires_in}const cg=["global","local","others"];var HT=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(t);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(t,i[a])&&(n[i[a]]=t[i[a]]);return n};class BT{constructor({url:e="",headers:n={},fetch:i}){this.url=e,this.headers=n,this.fetch=vS(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n=cg[0]){if(cg.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${cg.join(", ")}`);try{return await Fe(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(i){if(De(i))return{data:null,error:i};throw i}}async inviteUserByEmail(e,n={}){try{return await Fe(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Xs})}catch(i){if(De(i))return{data:{user:null},error:i};throw i}}async generateLink(e){try{const{options:n}=e,i=HT(e,["options"]),a=Object.assign(Object.assign({},i),n);return"newEmail"in i&&(a.new_email=i?.newEmail,delete a.newEmail),await Fe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:IT,redirectTo:n?.redirectTo})}catch(n){if(De(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await Fe(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Xs})}catch(n){if(De(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,i,a,o,l,u,d;try{const f={nextPage:null,lastPage:0,total:0},g=await Fe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(n=e?.page)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:"",per_page:(o=(a=e?.perPage)===null||a===void 0?void 0:a.toString())!==null&&o!==void 0?o:""},xform:FT});if(g.error)throw g.error;const p=await g.json(),b=(l=g.headers.get("x-total-count"))!==null&&l!==void 0?l:0,_=(d=(u=g.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&d!==void 0?d:[];return _.length>0&&(_.forEach(w=>{const S=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(w.split(";")[1].split("=")[1]);f[`${x}Page`]=S}),f.total=parseInt(b)),{data:Object.assign(Object.assign({},p),f),error:null}}catch(f){if(De(f))return{data:{users:[]},error:f};throw f}}async getUserById(e){Lr(e);try{return await Fe(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Xs})}catch(n){if(De(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Lr(e);try{return await Fe(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Xs})}catch(i){if(De(i))return{data:{user:null},error:i};throw i}}async deleteUser(e,n=!1){Lr(e);try{return await Fe(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Xs})}catch(i){if(De(i))return{data:{user:null},error:i};throw i}}async _listFactors(e){Lr(e.userId);try{const{data:n,error:i}=await Fe(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:n,error:i}}catch(n){if(De(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Lr(e.userId),Lr(e.id);try{return{data:await Fe(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(De(n))return{data:null,error:n};throw n}}}function k_(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function VT(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Pr={debug:!!(globalThis&&pS()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class yS extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class $T extends yS{}async function qT(t,e,n){Pr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const i=new globalThis.AbortController;return e>0&&setTimeout(()=>{i.abort(),Pr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async a=>{if(a){Pr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,a.name);try{return await n()}finally{Pr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,a.name)}}else{if(e===0)throw Pr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new $T(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Pr.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}VT();const GT={url:nT,storageKey:iT,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:sT,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function N_(t,e,n){return await n()}const zr={};class Hl{constructor(e){var n,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Hl.nextInstanceID,Hl.nextInstanceID+=1,this.instanceID>0&&fi()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},GT),e);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new BT({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=vS(a.fetch),this.lock=a.lock||N_,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:fi()&&(!((n=globalThis?.navigator)===null||n===void 0)&&n.locks)?this.lock=qT:this.lock=N_,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:pS()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=k_(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=k_(this.memoryStorage)),fi()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}get jwks(){var e,n;return(n=(e=zr[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){zr[this.storageKey]=Object.assign(Object.assign({},zr[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=zr[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){zr[this.storageKey]=Object.assign(Object.assign({},zr[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${hS}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=_T(window.location.href);let i="none";if(this._isImplicitGrantCallback(n)?i="implicit":await this._isPKCECallback(n)&&(i="pkce"),fi()&&this.detectSessionInUrl&&i!=="none"){const{data:a,error:o}=await this._getSessionFromURL(n,i);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),uT(o)){const d=(e=o.details)===null||e===void 0?void 0:e.code;if(d==="identity_already_exists"||d==="identity_not_found"||d==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:l,redirectType:u}=a;return this._debug("#_initialize()","detected session in URL",l,"redirect type",u),await this._saveSession(l),setTimeout(async()=>{u==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return De(n)?{error:n}:{error:new gS("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,i,a;try{const o=await Fe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(n=e?.options)===null||n===void 0?void 0:n.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(a=e?.options)===null||a===void 0?void 0:a.captchaToken}},xform:ls}),{data:l,error:u}=o;if(u||!l)return{data:{user:null,session:null},error:u};const d=l.session,f=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:f,session:d},error:null}}catch(o){if(De(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(e){var n,i,a;try{let o;if("email"in e){const{email:g,password:p,options:b}=e;let _=null,w=null;this.flowType==="pkce"&&([_,w]=await jr(this.storage,this.storageKey)),o=await Fe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:b?.emailRedirectTo,body:{email:g,password:p,data:(n=b?.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:b?.captchaToken},code_challenge:_,code_challenge_method:w},xform:ls})}else if("phone"in e){const{phone:g,password:p,options:b}=e;o=await Fe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:g,password:p,data:(i=b?.data)!==null&&i!==void 0?i:{},channel:(a=b?.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:b?.captchaToken}},xform:ls})}else throw new Au("You must provide either an email or phone number and a password");const{data:l,error:u}=o;if(u||!l)return{data:{user:null,session:null},error:u};const d=l.session,f=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:f,session:d},error:null}}catch(o){if(De(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(e){try{let n;if("email"in e){const{email:o,password:l,options:u}=e;n=await Fe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:l,gotrue_meta_security:{captcha_token:u?.captchaToken}},xform:M_})}else if("phone"in e){const{phone:o,password:l,options:u}=e;n=await Fe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:l,gotrue_meta_security:{captcha_token:u?.captchaToken}},xform:M_})}else throw new Au("You must provide either an email or phone number and a password");const{data:i,error:a}=n;return a?{data:{user:null,session:null},error:a}:!i||!i.session||!i.user?{data:{user:null,session:null},error:new Ru}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:a})}catch(n){if(De(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,i,a,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(i=e.options)===null||i===void 0?void 0:i.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;if(n==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(e){var n,i,a,o,l,u,d,f,g,p,b,_;let w,S;if("message"in e)w=e.message,S=e.signature;else{const{chain:x,wallet:C,statement:O,options:A}=e;let M;if(fi())if(typeof C=="object")M=C;else{const V=window;if("solana"in V&&typeof V.solana=="object"&&("signIn"in V.solana&&typeof V.solana.signIn=="function"||"signMessage"in V.solana&&typeof V.solana.signMessage=="function"))M=V.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof C!="object"||!A?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");M=C}const D=new URL((n=A?.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in M&&M.signIn){const V=await M.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},A?.signInWithSolana),{version:"1",domain:D.host,uri:D.href}),O?{statement:O}:null));let F;if(Array.isArray(V)&&V[0]&&typeof V[0]=="object")F=V[0];else if(V&&typeof V=="object"&&"signedMessage"in V&&"signature"in V)F=V;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in F&&"signature"in F&&(typeof F.signedMessage=="string"||F.signedMessage instanceof Uint8Array)&&F.signature instanceof Uint8Array)w=typeof F.signedMessage=="string"?F.signedMessage:new TextDecoder().decode(F.signedMessage),S=F.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in M)||typeof M.signMessage!="function"||!("publicKey"in M)||typeof M!="object"||!M.publicKey||!("toBase58"in M.publicKey)||typeof M.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");w=[`${D.host} wants you to sign in with your Solana account:`,M.publicKey.toBase58(),...O?["",O,""]:[""],"Version: 1",`URI: ${D.href}`,`Issued At: ${(a=(i=A?.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((o=A?.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${A.signInWithSolana.notBefore}`]:[],...!((l=A?.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${A.signInWithSolana.expirationTime}`]:[],...!((u=A?.signInWithSolana)===null||u===void 0)&&u.chainId?[`Chain ID: ${A.signInWithSolana.chainId}`]:[],...!((d=A?.signInWithSolana)===null||d===void 0)&&d.nonce?[`Nonce: ${A.signInWithSolana.nonce}`]:[],...!((f=A?.signInWithSolana)===null||f===void 0)&&f.requestId?[`Request ID: ${A.signInWithSolana.requestId}`]:[],...!((p=(g=A?.signInWithSolana)===null||g===void 0?void 0:g.resources)===null||p===void 0)&&p.length?["Resources",...A.signInWithSolana.resources.map(F=>`- ${F}`)]:[]].join(`
`);const V=await M.signMessage(new TextEncoder().encode(w),"utf8");if(!V||!(V instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");S=V}}try{const{data:x,error:C}=await Fe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:w,signature:vT(S)},!((b=e.options)===null||b===void 0)&&b.captchaToken?{gotrue_meta_security:{captcha_token:(_=e.options)===null||_===void 0?void 0:_.captchaToken}}:null),xform:ls});if(C)throw C;return!x||!x.session||!x.user?{data:{user:null,session:null},error:new Ru}:(x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),{data:Object.assign({},x),error:C})}catch(x){if(De(x))return{data:{user:null,session:null},error:x};throw x}}async _exchangeCodeForSession(e){const n=await Ra(this.storage,`${this.storageKey}-code-verifier`),[i,a]=(n??"").split("/");try{const{data:o,error:l}=await Fe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:i},xform:ls});if(await Gs(this.storage,`${this.storageKey}-code-verifier`),l)throw l;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new Ru}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:a??null}),error:l})}catch(o){if(De(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(e){try{const{options:n,provider:i,token:a,access_token:o,nonce:l}=e,u=await Fe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:a,access_token:o,nonce:l,gotrue_meta_security:{captcha_token:n?.captchaToken}},xform:ls}),{data:d,error:f}=u;return f?{data:{user:null,session:null},error:f}:!d||!d.session||!d.user?{data:{user:null,session:null},error:new Ru}:(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),{data:d,error:f})}catch(n){if(De(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,i,a,o,l;try{if("email"in e){const{email:u,options:d}=e;let f=null,g=null;this.flowType==="pkce"&&([f,g]=await jr(this.storage,this.storageKey));const{error:p}=await Fe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:u,data:(n=d?.data)!==null&&n!==void 0?n:{},create_user:(i=d?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:d?.captchaToken},code_challenge:f,code_challenge_method:g},redirectTo:d?.emailRedirectTo});return{data:{user:null,session:null},error:p}}if("phone"in e){const{phone:u,options:d}=e,{data:f,error:g}=await Fe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:u,data:(a=d?.data)!==null&&a!==void 0?a:{},create_user:(o=d?.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:d?.captchaToken},channel:(l=d?.channel)!==null&&l!==void 0?l:"sms"}});return{data:{user:null,session:null,messageId:f?.message_id},error:g}}throw new Au("You must provide either an email or phone number.")}catch(u){if(De(u))return{data:{user:null,session:null},error:u};throw u}}async verifyOtp(e){var n,i;try{let a,o;"options"in e&&(a=(n=e.options)===null||n===void 0?void 0:n.redirectTo,o=(i=e.options)===null||i===void 0?void 0:i.captchaToken);const{data:l,error:u}=await Fe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:a,xform:ls});if(u)throw u;if(!l)throw new Error("An error occurred on token verification.");const d=l.session,f=l.user;return d?.access_token&&(await this._saveSession(d),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",d)),{data:{user:f,session:d},error:null}}catch(a){if(De(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(e){var n,i,a;try{let o=null,l=null;return this.flowType==="pkce"&&([o,l]=await jr(this.storage,this.storageKey)),await Fe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(i=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&i!==void 0?i:void 0}),!((a=e?.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:l}),headers:this.headers,xform:zT})}catch(o){if(De(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:i}=e;if(i)throw i;if(!n)throw new Ws;const{error:a}=await Fe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:a}})}catch(e){if(De(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:i,type:a,options:o}=e,{error:l}=await Fe(this.fetch,"POST",n,{headers:this.headers,body:{email:i,type:a,gotrue_meta_security:{captcha_token:o?.captchaToken}},redirectTo:o?.emailRedirectTo});return{data:{user:null,session:null},error:l}}else if("phone"in e){const{phone:i,type:a,options:o}=e,{data:l,error:u}=await Fe(this.fetch,"POST",n,{headers:this.headers,body:{phone:i,type:a,gotrue_meta_security:{captcha_token:o?.captchaToken}}});return{data:{user:null,session:null,messageId:l?.message_id},error:u}}throw new Au("You must provide either an email or phone number and a type")}catch(n){if(De(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await i,await n()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=n();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Ra(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const i=e.expires_at?e.expires_at*1e3-Date.now()<ag:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",e.expires_at),!i){if(this.userStorage){const l=await Ra(this.userStorage,this.storageKey+"-user");l?.user?e.user=l.user:e.user=lg()}if(this.storage.isServer&&e.user){let l=this.suppressGetSessionWarning;e=new Proxy(e,{get:(d,f,g)=>(!l&&f==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),l=!0,this.suppressGetSessionWarning=!0),Reflect.get(d,f,g))})}return{data:{session:e},error:null}}const{session:a,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{session:null},error:o}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Fe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Xs}):await this._useSession(async n=>{var i,a,o;const{data:l,error:u}=n;if(u)throw u;return!(!((i=l.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ws}:await Fe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(a=l.session)===null||a===void 0?void 0:a.access_token)!==null&&o!==void 0?o:void 0,xform:Xs})})}catch(n){if(De(n))return cT(n)&&(await this._removeSession(),await Gs(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async i=>{const{data:a,error:o}=i;if(o)throw o;if(!a.session)throw new Ws;const l=a.session;let u=null,d=null;this.flowType==="pkce"&&e.email!=null&&([u,d]=await jr(this.storage,this.storageKey));const{data:f,error:g}=await Fe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:u,code_challenge_method:d}),jwt:l.access_token,xform:Xs});if(g)throw g;return l.user=f.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}})}catch(i){if(De(i))return{data:{user:null},error:i};throw i}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Ws;const n=Date.now()/1e3;let i=n,a=!0,o=null;const{payload:l}=og(e.access_token);if(l.exp&&(i=l.exp,a=i<=n),a){const{session:u,error:d}=await this._callRefreshToken(e.refresh_token);if(d)return{data:{user:null,session:null},error:d};if(!u)return{data:{user:null,session:null},error:null};o=u}else{const{data:u,error:d}=await this._getUser(e.access_token);if(d)throw d;o={access_token:e.access_token,refresh_token:e.refresh_token,user:u.user,token_type:"bearer",expires_in:i-n,expires_at:i},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(n){if(De(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var i;if(!e){const{data:l,error:u}=n;if(u)throw u;e=(i=l.session)!==null&&i!==void 0?i:void 0}if(!e?.refresh_token)throw new Ws;const{session:a,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{user:null,session:null},error:o}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(De(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!fi())throw new Tu("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Tu(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new E_("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Tu("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new E_("No code detected.");const{data:O,error:A}=await this._exchangeCodeForSession(e.code);if(A)throw A;const M=new URL(window.location.href);return M.searchParams.delete("code"),window.history.replaceState(window.history.state,"",M.toString()),{data:{session:O.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:a,access_token:o,refresh_token:l,expires_in:u,expires_at:d,token_type:f}=e;if(!o||!u||!l||!f)throw new Tu("No session defined in URL");const g=Math.round(Date.now()/1e3),p=parseInt(u);let b=g+p;d&&(b=parseInt(d));const _=b-g;_*1e3<=Br&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${_}s, should have been closer to ${p}s`);const w=b-p;g-w>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",w,b,g):g-w<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",w,b,g);const{data:S,error:x}=await this._getUser(o);if(x)throw x;const C={provider_token:i,provider_refresh_token:a,access_token:o,expires_in:p,expires_at:b,refresh_token:l,token_type:f,user:S.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:C,redirectType:e.type},error:null}}catch(i){if(De(i))return{data:{session:null,redirectType:null},error:i};throw i}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Ra(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var i;const{data:a,error:o}=n;if(o)return{error:o};const l=(i=a.session)===null||i===void 0?void 0:i.access_token;if(l){const{error:u}=await this.admin.signOut(l,e);if(u&&!(lT(u)&&(u.status===404||u.status===401||u.status===403)))return{error:u}}return e!=="others"&&(await this._removeSession(),await Gs(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=bT(),i={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,i),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:i}}}async _emitInitialSession(e){return await this._useSession(async n=>{var i,a;try{const{data:{session:o},error:l}=n;if(l)throw l;await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,n={}){let i=null,a=null;this.flowType==="pkce"&&([i,a]=await jr(this.storage,this.storageKey,!0));try{return await Fe(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:i,code_challenge_method:a,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(o){if(De(o))return{data:null,error:o};throw o}}async getUserIdentities(){var e;try{const{data:n,error:i}=await this.getUser();if(i)throw i;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(De(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:i,error:a}=await this._useSession(async o=>{var l,u,d,f,g;const{data:p,error:b}=o;if(b)throw b;const _=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(l=e.options)===null||l===void 0?void 0:l.redirectTo,scopes:(u=e.options)===null||u===void 0?void 0:u.scopes,queryParams:(d=e.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:!0});return await Fe(this.fetch,"GET",_,{headers:this.headers,jwt:(g=(f=p.session)===null||f===void 0?void 0:f.access_token)!==null&&g!==void 0?g:void 0})});if(a)throw a;return fi()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(i?.url),{data:{provider:e.provider,url:i?.url},error:null}}catch(i){if(De(i))return{data:{provider:e.provider,url:null},error:i};throw i}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var i,a;const{data:o,error:l}=n;if(l)throw l;return await Fe(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(a=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&a!==void 0?a:void 0})})}catch(n){if(De(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const i=Date.now();return await xT(async a=>(a>0&&await ST(200*Math.pow(2,a-1)),this._debug(n,"refreshing attempt",a),await Fe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ls})),(a,o)=>{const l=200*Math.pow(2,a);return o&&rg(o)&&Date.now()+l-i<Br})}catch(i){if(this._debug(n,"error",i),De(i))return{data:{session:null,user:null},error:i};throw i}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const i=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",i),fi()&&!n.skipBrowserRedirect&&window.location.assign(i),{data:{provider:e,url:i},error:null}}async _recoverAndRefresh(){var e,n;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const a=await Ra(this.storage,this.storageKey);if(a&&this.userStorage){let l=await Ra(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:a.user},await Vr(this.userStorage,this.storageKey+"-user",l)),a.user=(e=l?.user)!==null&&e!==void 0?e:lg()}else if(a&&!a.user&&!a.user){const l=await Ra(this.storage,this.storageKey+"-user");l&&l?.user?(a.user=l.user,await Gs(this.storage,this.storageKey+"-user"),await Vr(this.storage,this.storageKey,a)):a.user=lg()}if(this._debug(i,"session from storage",a),!this._isValidSession(a)){this._debug(i,"session is not valid"),a!==null&&await this._removeSession();return}const o=((n=a.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<ag;if(this._debug(i,`session has${o?"":" not"} expired with margin of ${ag}s`),o){if(this.autoRefreshToken&&a.refresh_token){const{error:l}=await this._callRefreshToken(a.refresh_token);l&&(console.error(l),rg(l)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:u}=await this._getUser(a.access_token);!u&&l?.user?(a.user=l.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(i,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(i,"error",a),console.error(a);return}finally{this._debug(i,"end")}}async _callRefreshToken(e){var n,i;if(!e)throw new Ws;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Rd;const{data:o,error:l}=await this._refreshAccessToken(e);if(l)throw l;if(!o.session)throw new Ws;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const u={session:o.session,error:null};return this.refreshingDeferred.resolve(u),u}catch(o){if(this._debug(a,"error",o),De(o)){const l={session:null,error:o};return rg(o)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(l),l}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(o),o}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(e,n,i=!0){const a=`#_notifyAllSubscribers(${e})`;this._debug(a,"begin",n,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:e,session:n});const o=[],l=Array.from(this.stateChangeEmitters.values()).map(async u=>{try{await u.callback(e,n)}catch(d){o.push(d)}});if(await Promise.all(l),o.length>0){for(let u=0;u<o.length;u+=1)console.error(o[u]);throw o[0]}}finally{this._debug(a,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const n=Object.assign({},e),i=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&n.user&&await Vr(this.userStorage,this.storageKey+"-user",{user:n.user});const a=Object.assign({},n);delete a.user;const o=T_(a);await Vr(this.storage,this.storageKey,o)}else{const a=T_(n);await Vr(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await Gs(this.storage,this.storageKey),await Gs(this.storage,this.storageKey+"-code-verifier"),await Gs(this.storage,this.storageKey+"-user"),this.userStorage&&await Gs(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&fi()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Br);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:i}}=n;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((i.expires_at*1e3-e)/Br);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Br}ms, refresh threshold is ${Bg} ticks`),a<=Bg&&await this._callRefreshToken(i.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof yS)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!fi()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,i){const a=[`provider=${encodeURIComponent(n)}`];if(i?.redirectTo&&a.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i?.scopes&&a.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[o,l]=await jr(this.storage,this.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(l)}`});a.push(u.toString())}if(i?.queryParams){const o=new URLSearchParams(i.queryParams);a.push(o.toString())}return i?.skipBrowserRedirect&&a.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${e}?${a.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var i;const{data:a,error:o}=n;return o?{data:null,error:o}:await Fe(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(i=a?.session)===null||i===void 0?void 0:i.access_token})})}catch(n){if(De(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var i,a;const{data:o,error:l}=n;if(l)return{data:null,error:l};const u=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:d,error:f}=await Fe(this.fetch,"POST",`${this.url}/factors`,{body:u,headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token});return f?{data:null,error:f}:(e.factorType==="totp"&&(!((a=d?.totp)===null||a===void 0)&&a.qr_code)&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),{data:d,error:null})})}catch(n){if(De(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var i;const{data:a,error:o}=n;if(o)return{data:null,error:o};const{data:l,error:u}=await Fe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(i=a?.session)===null||i===void 0?void 0:i.access_token});return u?{data:null,error:u}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:u})})}catch(n){if(De(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var i;const{data:a,error:o}=n;return o?{data:null,error:o}:await Fe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(i=a?.session)===null||i===void 0?void 0:i.access_token})})}catch(n){if(De(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:i}=await this._challenge({factorId:e.factorId});return i?{data:null,error:i}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const i=e?.factors||[],a=i.filter(l=>l.factor_type==="totp"&&l.status==="verified"),o=i.filter(l=>l.factor_type==="phone"&&l.status==="verified");return{data:{all:i,totp:a,phone:o},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,i;const{data:{session:a},error:o}=e;if(o)return{data:null,error:o};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=og(a.access_token);let u=null;l.aal&&(u=l.aal);let d=u;((i=(n=a.user.factors)===null||n===void 0?void 0:n.filter(p=>p.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(d="aal2");const g=l.amr||[];return{data:{currentLevel:u,nextLevel:d,currentAuthenticationMethods:g},error:null}}))}async fetchJwk(e,n={keys:[]}){let i=n.keys.find(u=>u.kid===e);if(i)return i;const a=Date.now();if(i=this.jwks.keys.find(u=>u.kid===e),i&&this.jwks_cached_at+rT>a)return i;const{data:o,error:l}=await Fe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=a,i=o.keys.find(u=>u.kid===e),!i)?null:i}async getClaims(e,n={}){try{let i=e;if(!i){const{data:_,error:w}=await this.getSession();if(w||!_.session)return{data:null,error:w};i=_.session.access_token}const{header:a,payload:o,signature:l,raw:{header:u,payload:d}}=og(i);n?.allowExpired||DT(o.exp);const f=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,n?.keys?{keys:n.keys}:n?.jwks);if(!f){const{error:_}=await this.getUser(i);if(_)throw _;return{data:{claims:o,header:a,signature:l},error:null}}const g=MT(a.alg),p=await crypto.subtle.importKey("jwk",f,g,!0,["verify"]);if(!await crypto.subtle.verify(g,p,l,pT(`${u}.${d}`)))throw new qg("Invalid JWT signature");return{data:{claims:o,header:a,signature:l},error:null}}catch(i){if(De(i))return{data:null,error:i};throw i}}}Hl.nextInstanceID=0;const YT=Hl;class WT extends YT{constructor(e){super(e)}}var KT=function(t,e,n,i){function a(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(g){try{f(i.next(g))}catch(p){l(p)}}function d(g){try{f(i.throw(g))}catch(p){l(p)}}function f(g){g.done?o(g.value):a(g.value).then(u,d)}f((i=i.apply(t,e||[])).next())})};class XT{constructor(e,n,i){var a,o,l;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const u=eT(e),d=new URL(u);this.realtimeUrl=new URL("realtime/v1",d),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",d),this.storageUrl=new URL("storage/v1",d),this.functionsUrl=new URL("functions/v1",d);const f=`sb-${d.hostname.split(".")[0]}-auth-token`,g={db:GA,realtime:WA,auth:Object.assign(Object.assign({},YA),{storageKey:f}),global:qA},p=tT(i??{},g);this.storageKey=(a=p.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(o=p.global.headers)!==null&&o!==void 0?o:{},p.accessToken?(this.accessToken=p.accessToken,this.auth=new Proxy({},{get:(b,_)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(_)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((l=p.auth)!==null&&l!==void 0?l:{},this.headers,p.global.fetch),this.fetch=ZA(n,this._getAccessToken.bind(this),p.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},p.realtime)),this.rest=new hA(new URL("rest/v1",d).href,{headers:this.headers,schema:p.db.schema,fetch:this.fetch}),this.storage=new BA(this.storageUrl.href,this.headers,this.fetch,i?.storage),p.accessToken||this._listenForAuthEvents()}get functions(){return new eA(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},i={}){return this.rest.rpc(e,n,i)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return KT(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:i}=yield this.auth.getSession();return(n=(e=i.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:i,storage:a,storageKey:o,flowType:l,lock:u,debug:d},f,g){const p={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new WT({url:this.authUrl.href,headers:Object.assign(Object.assign({},p),f),storageKey:o,autoRefreshToken:e,persistSession:n,detectSessionInUrl:i,storage:a,flowType:l,lock:u,debug:d,fetch:g,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new TA(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,i)=>{this._handleTokenChanged(n,"CLIENT",i?.access_token)})}_handleTokenChanged(e,n,i){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==i?this.changedAccessToken=i:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const QT=(t,e,n)=>new XT(t,e,n);function ZT(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}ZT()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const JT="https://jyrfznujcyqskpfthrsf.supabase.co",eD="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imp5cmZ6bnVqY3lxc2twZnRocnNmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUwODM1OTMsImV4cCI6MjA3MDY1OTU5M30.JOZLGHslSQO7wDeFSq7FHAV6_VNtD9DS-gMNUu4rEnM",ot=QT(JT,eD,{auth:{persistSession:!0,autoRefreshToken:!0},realtime:{params:{eventsPerSecond:10}}}),ln=(t,e="")=>t.code==="23505"?"This record already exists":t.code==="23503"?"Cannot perform this operation due to related records":t.code==="PGRST116"?"No records found":t.message?.includes("JWT")?"Authentication error. Please refresh the page":t.message||"An unexpected error occurred",It={PRINTING:"STAMPA",PACKAGING:"CONFEZIONAMENTO"},Ae={ZANICA:"ZANICA",BUSTO_GAROLFO:"BUSTO_GAROLFO",BOTH:"BOTH"},ni={ACTIVE:"ACTIVE",INACTIVE:"INACTIVE",MAINTENANCE:"MAINTENANCE"},qr={CREMA:"crema",LIQUIDO:"liquido",POLVERI:"polveri"},ji={T1:"T1",T2:"T2",T3:"T3"},Bl={THREE:"3",FOUR:"4"},j_={END_DATE_BEFORE_START:"End date cannot be before start date",END_TIME_BEFORE_START:"End time must be after start time when dates are the same"},_t={MACHINE:{DEPARTMENT:It.PRINTING,WORK_CENTER:Ae.ZANICA,MIN_WEB_WIDTH:"100",MAX_WEB_WIDTH:"1000",MIN_BAG_HEIGHT:"50",MAX_BAG_HEIGHT:"500",SETUP_TIME_STANDARD:"0.5",CHANGEOVER_COLOR:"0.25",CHANGEOVER_MATERIAL:"0.75",ACTIVE_SHIFTS:[ji.T1],STATUS:ni.ACTIVE},PHASE:{DEPARTMENT:It.PRINTING,NUMERO_PERSONE:1,WORK_CENTER:Ae.ZANICA,V_STAMPA:6e3,T_SETUP_STAMPA:.5,COSTO_H_STAMPA:50,V_CONF:1e3,T_SETUP_CONF:.25,COSTO_H_CONF:40},ORDER:{SEAL_SIDES:Bl.THREE,QUANTITY_COMPLETED:0},OFF_TIME:{START_TIME:"09:00",END_TIME:"17:00"}},ll={DECIMAL_PRECISION:{ONE_DECIMAL:["setup_time_standard","changeover_color","changeover_material","t_setup_stampa","t_setup_conf"],TWO_DECIMAL:["costo_h_stampa","costo_h_conf"]},FIELD_STEPS:{TIME:.1,COST:.01}},bS=R.createContext(),tD=({children:t})=>{const[e,n]=R.useState(null),[i,a]=R.useState(null),[o,l]=R.useState(!0),[u,d]=R.useState(null);R.useEffect(()=>{(async()=>{try{const{data:{session:O},error:A}=await ot.auth.getSession();A?d("Failed to initialize authentication"):(a(O),n(O?.user??null))}catch{d("Failed to initialize authentication")}finally{l(!1)}})();const{data:{subscription:C}}=ot.auth.onAuthStateChange(async(O,A)=>{a(A),n(A?.user??null),l(!1),d(null)});return()=>C.unsubscribe()},[]);const S={user:e,session:i,loading:o,error:u,signIn:async(x,C)=>{try{d(null),l(!0);const{data:O,error:A}=await ot.auth.signInWithPassword({email:x,password:C});if(A)throw A;return{success:!0,user:O.user}}catch(O){return d(O.message),{success:!1,error:O.message}}finally{l(!1)}},signUp:async(x,C,O={})=>{try{d(null),l(!0);const{data:A,error:M}=await ot.auth.signUp({email:x,password:C,options:{data:O}});if(M)throw M;return{success:!0,user:A.user}}catch(A){return d(A.message),{success:!1,error:A.message}}finally{l(!1)}},signOut:async()=>{try{d(null),l(!0);const{error:x}=await ot.auth.signOut();if(x)throw x;return{success:!0}}catch(x){return d(x.message),{success:!1,error:x.message}}finally{l(!1)}},resetPassword:async x=>{try{d(null),l(!0);const{error:C}=await ot.auth.resetPasswordForEmail(x,{redirectTo:`${window.location.origin}/reset-password`});if(C)throw C;return{success:!0}}catch(C){return d(C.message),{success:!1,error:C.message}}finally{l(!1)}},updateProfile:async x=>{try{d(null),l(!0);const{data:C,error:O}=await ot.auth.updateUser({data:x});if(O)throw O;return{success:!0,user:C.user}}catch(C){return d(C.message),{success:!1,error:C.message}}finally{l(!1)}},getUserProfile:async()=>{if(!e)return null;try{const{data:x,error:C}=await ot.from("profiles").select("*").eq("id",e.id).single();return C?null:x}catch{return null}},isAuthenticated:!!e};return y.jsx(bS.Provider,{value:S,children:t})},ac=()=>{const t=R.useContext(bS);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},L_=t=>{let e;const n=new Set,i=(f,g)=>{const p=typeof f=="function"?f(e):f;if(!Object.is(p,e)){const b=e;e=g??(typeof p!="object"||p===null)?p:Object.assign({},e,p),n.forEach(_=>_(e,b))}},a=()=>e,u={setState:i,getState:a,getInitialState:()=>d,subscribe:f=>(n.add(f),()=>n.delete(f))},d=e=t(i,a,u);return u},nD=(t=>t?L_(t):L_),iD=t=>t;function sD(t,e=iD){const n=Me.useSyncExternalStore(t.subscribe,Me.useCallback(()=>e(t.getState()),[t,e]),Me.useCallback(()=>e(t.getInitialState()),[t,e]));return Me.useDebugValue(n),n}const P_=t=>{const e=nD(t),n=i=>sD(e,i);return Object.assign(n,e),n},so=(t=>t?P_(t):P_);class mn extends Error{constructor(e,n="GENERIC_ERROR",i=500,a=null,o=""){super(e),this.name="AppError",this.code=n,this.statusCode=i,this.originalError=a,this.context=o,this.timestamp=new Date().toISOString(),this.id=this.generateErrorId(),this.userMessage=this.getUserFriendlyMessage()}generateErrorId(){return`ERR_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}getUserFriendlyMessage(){return aD(this)}toJSON(){return{id:this.id,message:this.message,code:this.code,statusCode:this.statusCode,context:this.context,timestamp:this.timestamp,userMessage:this.userMessage,stack:this.stack}}}const Ue={VALIDATION_ERROR:"VALIDATION_ERROR",NETWORK_ERROR:"NETWORK_ERROR",AUTHENTICATION_ERROR:"AUTHENTICATION_ERROR",AUTHORIZATION_ERROR:"AUTHORIZATION_ERROR",NOT_FOUND_ERROR:"NOT_FOUND_ERROR",SERVER_ERROR:"SERVER_ERROR",CLIENT_ERROR:"CLIENT_ERROR",BUSINESS_LOGIC_ERROR:"BUSINESS_LOGIC_ERROR",TIMEOUT_ERROR:"TIMEOUT_ERROR",RATE_LIMIT_ERROR:"RATE_LIMIT_ERROR"},Zs={LOW:"low",MEDIUM:"medium",HIGH:"high",CRITICAL:"critical"},Vn=(t,e="")=>{if(t instanceof mn)return t;if(t?.code)switch(t.code){case"23505":return new mn("This record already exists",Ue.VALIDATION_ERROR,409,t,e);case"23503":return new mn("Cannot delete this record as it is referenced by other data",Ue.VALIDATION_ERROR,400,t,e);case"PGRST116":return new mn("Record not found",Ue.NOT_FOUND_ERROR,404,t,e);case"PGRST301":return new mn("Session expired. Please log in again.",Ue.AUTHENTICATION_ERROR,401,t,e);case"PGRST302":return new mn("Invalid session. Please log in again.",Ue.AUTHENTICATION_ERROR,401,t,e);case"PGRST303":return new mn("Authentication required. Please log in.",Ue.AUTHENTICATION_ERROR,401,t,e);default:return new mn(t.message||"An unexpected error occurred",Ue.SERVER_ERROR,500,t,e)}return t.name==="NetworkError"||t.message?.includes("fetch")||t.message?.includes("network")?new mn("Network error. Please check your connection and try again.",Ue.NETWORK_ERROR,0,t,e):t.name==="TimeoutError"||t.message?.includes("timeout")?new mn("Request timed out. Please try again.",Ue.TIMEOUT_ERROR,408,t,e):t.status===429||t.message?.includes("rate limit")?new mn("Too many requests. Please wait a moment and try again.",Ue.RATE_LIMIT_ERROR,429,t,e):t.name==="ValidationError"||t.message?.includes("validation")?new mn(t.message,Ue.VALIDATION_ERROR,400,t,e):t.message?.includes("Cannot add")||t.message?.includes("work center")?new mn(t.message,Ue.BUSINESS_LOGIC_ERROR,400,t,e):new mn(t.message||"An unexpected error occurred",Ue.CLIENT_ERROR,t.status||500,t,e)},mi=(t,e="")=>({id:t.id||`ERR_${Date.now()}`,message:t.message,code:t.code||"UNKNOWN_ERROR",context:e,timestamp:new Date().toISOString(),url:typeof window<"u"?window.location.href:"server",userAgent:typeof navigator<"u"?navigator.userAgent:"server",stack:t.stack,severity:_S(t)}),_S=t=>t.code===Ue.AUTHENTICATION_ERROR||t.code===Ue.AUTHORIZATION_ERROR?Zs.HIGH:t.code===Ue.NETWORK_ERROR||t.code===Ue.SERVER_ERROR?Zs.MEDIUM:t.code===Ue.VALIDATION_ERROR||t.code===Ue.BUSINESS_LOGIC_ERROR?Zs.LOW:Zs.MEDIUM,Cm=t=>e=>{const n=Vn(e,t);return mi(n,t),n},aD=t=>{switch(t.code){case Ue.NETWORK_ERROR:return"Please check your internet connection and try again.";case Ue.AUTHENTICATION_ERROR:return"Please log in to continue.";case Ue.AUTHORIZATION_ERROR:return"You don't have permission to perform this action.";case Ue.NOT_FOUND_ERROR:return"The requested item was not found.";case Ue.VALIDATION_ERROR:return"Please check your input and try again.";case Ue.BUSINESS_LOGIC_ERROR:return t.message||"This operation cannot be completed.";case Ue.TIMEOUT_ERROR:return"The request took too long. Please try again.";case Ue.RATE_LIMIT_ERROR:return"Too many requests. Please wait a moment and try again.";default:return"Something went wrong. Please try again or contact support if the problem persists."}},z_=async(t,e=3,n=1e3)=>{let i;for(let a=1;a<=e;a++)try{return await t()}catch(o){if(i=o,o.code===Ue.VALIDATION_ERROR||o.code===Ue.AUTHORIZATION_ERROR||o.code===Ue.BUSINESS_LOGIC_ERROR)throw o;a<e&&(await new Promise(l=>setTimeout(l,n)),n*=2)}throw i},Gg=(t,e="")=>async(...n)=>{try{return await t(...n)}catch(i){const a=Vn(i,e);throw mi(a,e),a}},wS=6048e5,rD=864e5,SS=6e4,Om=36e5,I_=Symbol.for("constructDateFrom");function wi(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&I_ in t?t[I_](e):t instanceof Date?new t.constructor(e):new Date(e)}function pt(t,e){return wi(e||t,t)}function oD(t,e,n){const i=pt(t,n?.in);return isNaN(e)?wi(t,NaN):(e&&i.setDate(i.getDate()+e),i)}function lD(t,e,n){return wi(t,+pt(t)+e)}function cD(t,e,n){return lD(t,e*Om)}let uD={};function Ad(){return uD}function Xr(t,e){const n=Ad(),i=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,a=pt(t,e?.in),o=a.getDay(),l=(o<i?7:0)+o-i;return a.setDate(a.getDate()-l),a.setHours(0,0,0,0),a}function ad(t,e){return Xr(t,{...e,weekStartsOn:1})}function xS(t,e){const n=pt(t,e?.in),i=n.getFullYear(),a=wi(n,0);a.setFullYear(i+1,0,4),a.setHours(0,0,0,0);const o=ad(a),l=wi(n,0);l.setFullYear(i,0,4),l.setHours(0,0,0,0);const u=ad(l);return n.getTime()>=o.getTime()?i+1:n.getTime()>=u.getTime()?i:i-1}function F_(t){const e=pt(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function ES(t,...e){const n=wi.bind(null,e.find(i=>typeof i=="object"));return e.map(n)}function Vl(t,e){const n=pt(t,e?.in);return n.setHours(0,0,0,0),n}function dD(t,e,n){const[i,a]=ES(n?.in,t,e),o=Vl(i),l=Vl(a),u=+o-F_(o),d=+l-F_(l);return Math.round((u-d)/rD)}function hD(t,e){const n=xS(t,e),i=wi(t,0);return i.setFullYear(n,0,4),i.setHours(0,0,0,0),ad(i)}function fD(t,e,n){const[i,a]=ES(n?.in,t,e);return+Vl(i)==+Vl(a)}function gD(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function mD(t){return!(!gD(t)&&typeof t!="number"||isNaN(+pt(t)))}function pD(t,e){const n=pt(t,e?.in);return n.setHours(23,59,59,999),n}function vD(t,e){const n=pt(t,e?.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}function yD(t,e){const n=e?.weekStartsOn,i=pt(t,e?.in),a=i.getDay(),o=(a<n?-7:0)+6-(a-n);return i.setDate(i.getDate()+o),i.setHours(23,59,59,999),i}const bD={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},_D=(t,e,n)=>{let i;const a=bD[t];return typeof a=="string"?i=a:e===1?i=a.one:i=a.other.replace("{{count}}",e.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+i:i+" ago":i};function ug(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const wD={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},SD={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},xD={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},ED={date:ug({formats:wD,defaultWidth:"full"}),time:ug({formats:SD,defaultWidth:"full"}),dateTime:ug({formats:xD,defaultWidth:"full"})},CD={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},OD=(t,e,n,i)=>CD[t];function cl(t){return(e,n)=>{const i=n?.context?String(n.context):"standalone";let a;if(i==="formatting"&&t.formattingValues){const l=t.defaultFormattingWidth||t.defaultWidth,u=n?.width?String(n.width):l;a=t.formattingValues[u]||t.formattingValues[l]}else{const l=t.defaultWidth,u=n?.width?String(n.width):t.defaultWidth;a=t.values[u]||t.values[l]}const o=t.argumentCallback?t.argumentCallback(e):e;return a[o]}}const RD={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},AD={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},TD={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},DD={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},MD={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},kD={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},ND=(t,e)=>{const n=Number(t),i=n%100;if(i>20||i<10)switch(i%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},jD={ordinalNumber:ND,era:cl({values:RD,defaultWidth:"wide"}),quarter:cl({values:AD,defaultWidth:"wide",argumentCallback:t=>t-1}),month:cl({values:TD,defaultWidth:"wide"}),day:cl({values:DD,defaultWidth:"wide"}),dayPeriod:cl({values:MD,defaultWidth:"wide",formattingValues:kD,defaultFormattingWidth:"wide"})};function ul(t){return(e,n={})=>{const i=n.width,a=i&&t.matchPatterns[i]||t.matchPatterns[t.defaultMatchWidth],o=e.match(a);if(!o)return null;const l=o[0],u=i&&t.parsePatterns[i]||t.parsePatterns[t.defaultParseWidth],d=Array.isArray(u)?PD(u,p=>p.test(l)):LD(u,p=>p.test(l));let f;f=t.valueCallback?t.valueCallback(d):d,f=n.valueCallback?n.valueCallback(f):f;const g=e.slice(l.length);return{value:f,rest:g}}}function LD(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function PD(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function zD(t){return(e,n={})=>{const i=e.match(t.matchPattern);if(!i)return null;const a=i[0],o=e.match(t.parsePattern);if(!o)return null;let l=t.valueCallback?t.valueCallback(o[0]):o[0];l=n.valueCallback?n.valueCallback(l):l;const u=e.slice(a.length);return{value:l,rest:u}}}const ID=/^(\d+)(th|st|nd|rd)?/i,FD=/\d+/i,UD={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},HD={any:[/^b/i,/^(a|c)/i]},BD={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},VD={any:[/1/i,/2/i,/3/i,/4/i]},$D={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},qD={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},GD={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},YD={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},WD={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},KD={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},XD={ordinalNumber:zD({matchPattern:ID,parsePattern:FD,valueCallback:t=>parseInt(t,10)}),era:ul({matchPatterns:UD,defaultMatchWidth:"wide",parsePatterns:HD,defaultParseWidth:"any"}),quarter:ul({matchPatterns:BD,defaultMatchWidth:"wide",parsePatterns:VD,defaultParseWidth:"any",valueCallback:t=>t+1}),month:ul({matchPatterns:$D,defaultMatchWidth:"wide",parsePatterns:qD,defaultParseWidth:"any"}),day:ul({matchPatterns:GD,defaultMatchWidth:"wide",parsePatterns:YD,defaultParseWidth:"any"}),dayPeriod:ul({matchPatterns:WD,defaultMatchWidth:"any",parsePatterns:KD,defaultParseWidth:"any"})},QD={code:"en-US",formatDistance:_D,formatLong:ED,formatRelative:OD,localize:jD,match:XD,options:{weekStartsOn:0,firstWeekContainsDate:1}};function ZD(t,e){const n=pt(t,e?.in);return dD(n,vD(n))+1}function JD(t,e){const n=pt(t,e?.in),i=+ad(n)-+hD(n);return Math.round(i/wS)+1}function CS(t,e){const n=pt(t,e?.in),i=n.getFullYear(),a=Ad(),o=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??a.firstWeekContainsDate??a.locale?.options?.firstWeekContainsDate??1,l=wi(e?.in||t,0);l.setFullYear(i+1,0,o),l.setHours(0,0,0,0);const u=Xr(l,e),d=wi(e?.in||t,0);d.setFullYear(i,0,o),d.setHours(0,0,0,0);const f=Xr(d,e);return+n>=+u?i+1:+n>=+f?i:i-1}function e1(t,e){const n=Ad(),i=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,a=CS(t,e),o=wi(e?.in||t,0);return o.setFullYear(a,0,i),o.setHours(0,0,0,0),Xr(o,e)}function t1(t,e){const n=pt(t,e?.in),i=+Xr(n,e)-+e1(n,e);return Math.round(i/wS)+1}function Ze(t,e){const n=t<0?"-":"",i=Math.abs(t).toString().padStart(e,"0");return n+i}const Ys={y(t,e){const n=t.getFullYear(),i=n>0?n:1-n;return Ze(e==="yy"?i%100:i,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):Ze(n+1,2)},d(t,e){return Ze(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return Ze(t.getHours()%12||12,e.length)},H(t,e){return Ze(t.getHours(),e.length)},m(t,e){return Ze(t.getMinutes(),e.length)},s(t,e){return Ze(t.getSeconds(),e.length)},S(t,e){const n=e.length,i=t.getMilliseconds(),a=Math.trunc(i*Math.pow(10,n-3));return Ze(a,e.length)}},Ir={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},U_={G:function(t,e,n){const i=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(i,{width:"abbreviated"});case"GGGGG":return n.era(i,{width:"narrow"});case"GGGG":default:return n.era(i,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const i=t.getFullYear(),a=i>0?i:1-i;return n.ordinalNumber(a,{unit:"year"})}return Ys.y(t,e)},Y:function(t,e,n,i){const a=CS(t,i),o=a>0?a:1-a;if(e==="YY"){const l=o%100;return Ze(l,2)}return e==="Yo"?n.ordinalNumber(o,{unit:"year"}):Ze(o,e.length)},R:function(t,e){const n=xS(t);return Ze(n,e.length)},u:function(t,e){const n=t.getFullYear();return Ze(n,e.length)},Q:function(t,e,n){const i=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(i);case"QQ":return Ze(i,2);case"Qo":return n.ordinalNumber(i,{unit:"quarter"});case"QQQ":return n.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(i,{width:"wide",context:"formatting"})}},q:function(t,e,n){const i=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(i);case"qq":return Ze(i,2);case"qo":return n.ordinalNumber(i,{unit:"quarter"});case"qqq":return n.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(i,{width:"wide",context:"standalone"})}},M:function(t,e,n){const i=t.getMonth();switch(e){case"M":case"MM":return Ys.M(t,e);case"Mo":return n.ordinalNumber(i+1,{unit:"month"});case"MMM":return n.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(i,{width:"wide",context:"formatting"})}},L:function(t,e,n){const i=t.getMonth();switch(e){case"L":return String(i+1);case"LL":return Ze(i+1,2);case"Lo":return n.ordinalNumber(i+1,{unit:"month"});case"LLL":return n.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(i,{width:"wide",context:"standalone"})}},w:function(t,e,n,i){const a=t1(t,i);return e==="wo"?n.ordinalNumber(a,{unit:"week"}):Ze(a,e.length)},I:function(t,e,n){const i=JD(t);return e==="Io"?n.ordinalNumber(i,{unit:"week"}):Ze(i,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):Ys.d(t,e)},D:function(t,e,n){const i=ZD(t);return e==="Do"?n.ordinalNumber(i,{unit:"dayOfYear"}):Ze(i,e.length)},E:function(t,e,n){const i=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(i,{width:"short",context:"formatting"});case"EEEE":default:return n.day(i,{width:"wide",context:"formatting"})}},e:function(t,e,n,i){const a=t.getDay(),o=(a-i.weekStartsOn+8)%7||7;switch(e){case"e":return String(o);case"ee":return Ze(o,2);case"eo":return n.ordinalNumber(o,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});case"eeee":default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(t,e,n,i){const a=t.getDay(),o=(a-i.weekStartsOn+8)%7||7;switch(e){case"c":return String(o);case"cc":return Ze(o,e.length);case"co":return n.ordinalNumber(o,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});case"cccc":default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(t,e,n){const i=t.getDay(),a=i===0?7:i;switch(e){case"i":return String(a);case"ii":return Ze(a,e.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(i,{width:"short",context:"formatting"});case"iiii":default:return n.day(i,{width:"wide",context:"formatting"})}},a:function(t,e,n){const a=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(t,e,n){const i=t.getHours();let a;switch(i===12?a=Ir.noon:i===0?a=Ir.midnight:a=i/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(t,e,n){const i=t.getHours();let a;switch(i>=17?a=Ir.evening:i>=12?a=Ir.afternoon:i>=4?a=Ir.morning:a=Ir.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let i=t.getHours()%12;return i===0&&(i=12),n.ordinalNumber(i,{unit:"hour"})}return Ys.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):Ys.H(t,e)},K:function(t,e,n){const i=t.getHours()%12;return e==="Ko"?n.ordinalNumber(i,{unit:"hour"}):Ze(i,e.length)},k:function(t,e,n){let i=t.getHours();return i===0&&(i=24),e==="ko"?n.ordinalNumber(i,{unit:"hour"}):Ze(i,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):Ys.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):Ys.s(t,e)},S:function(t,e){return Ys.S(t,e)},X:function(t,e,n){const i=t.getTimezoneOffset();if(i===0)return"Z";switch(e){case"X":return B_(i);case"XXXX":case"XX":return ka(i);case"XXXXX":case"XXX":default:return ka(i,":")}},x:function(t,e,n){const i=t.getTimezoneOffset();switch(e){case"x":return B_(i);case"xxxx":case"xx":return ka(i);case"xxxxx":case"xxx":default:return ka(i,":")}},O:function(t,e,n){const i=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+H_(i,":");case"OOOO":default:return"GMT"+ka(i,":")}},z:function(t,e,n){const i=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+H_(i,":");case"zzzz":default:return"GMT"+ka(i,":")}},t:function(t,e,n){const i=Math.trunc(+t/1e3);return Ze(i,e.length)},T:function(t,e,n){return Ze(+t,e.length)}};function H_(t,e=""){const n=t>0?"-":"+",i=Math.abs(t),a=Math.trunc(i/60),o=i%60;return o===0?n+String(a):n+String(a)+e+Ze(o,2)}function B_(t,e){return t%60===0?(t>0?"-":"+")+Ze(Math.abs(t)/60,2):ka(t,e)}function ka(t,e=""){const n=t>0?"-":"+",i=Math.abs(t),a=Ze(Math.trunc(i/60),2),o=Ze(i%60,2);return n+a+e+o}const V_=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},OS=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},n1=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],i=n[1],a=n[2];if(!a)return V_(t,e);let o;switch(i){case"P":o=e.dateTime({width:"short"});break;case"PP":o=e.dateTime({width:"medium"});break;case"PPP":o=e.dateTime({width:"long"});break;case"PPPP":default:o=e.dateTime({width:"full"});break}return o.replace("{{date}}",V_(i,e)).replace("{{time}}",OS(a,e))},i1={p:OS,P:n1},s1=/^D+$/,a1=/^Y+$/,r1=["D","DD","YY","YYYY"];function o1(t){return s1.test(t)}function l1(t){return a1.test(t)}function c1(t,e,n){const i=u1(t,e,n);if(console.warn(i),r1.includes(t))throw new RangeError(i)}function u1(t,e,n){const i=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${i} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const d1=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,h1=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,f1=/^'([^]*?)'?$/,g1=/''/g,m1=/[a-zA-Z]/;function p1(t,e,n){const i=Ad(),a=i.locale??QD,o=i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,l=i.weekStartsOn??i.locale?.options?.weekStartsOn??0,u=pt(t,n?.in);if(!mD(u))throw new RangeError("Invalid time value");let d=e.match(h1).map(g=>{const p=g[0];if(p==="p"||p==="P"){const b=i1[p];return b(g,a.formatLong)}return g}).join("").match(d1).map(g=>{if(g==="''")return{isToken:!1,value:"'"};const p=g[0];if(p==="'")return{isToken:!1,value:v1(g)};if(U_[p])return{isToken:!0,value:g};if(p.match(m1))throw new RangeError("Format string contains an unescaped latin alphabet character `"+p+"`");return{isToken:!1,value:g}});a.localize.preprocessor&&(d=a.localize.preprocessor(u,d));const f={firstWeekContainsDate:o,weekStartsOn:l,locale:a};return d.map(g=>{if(!g.isToken)return g.value;const p=g.value;(l1(p)||o1(p))&&c1(p,e,String(t));const b=U_[p[0]];return b(u,p,a.localize,f)}).join("")}function v1(t){const e=t.match(f1);return e?e[1].replace(g1,"'"):t}function y1(t,e){return+pt(t)>+pt(e)}function b1(t,e){return+pt(t)<+pt(e)}function Du(t,e){const n=()=>wi(e?.in,NaN),a=x1(t);let o;if(a.date){const f=E1(a.date,2);o=C1(f.restDateString,f.year)}if(!o||isNaN(+o))return n();const l=+o;let u=0,d;if(a.time&&(u=O1(a.time),isNaN(u)))return n();if(a.timezone){if(d=R1(a.timezone),isNaN(d))return n()}else{const f=new Date(l+u),g=pt(0,e?.in);return g.setFullYear(f.getUTCFullYear(),f.getUTCMonth(),f.getUTCDate()),g.setHours(f.getUTCHours(),f.getUTCMinutes(),f.getUTCSeconds(),f.getUTCMilliseconds()),g}return pt(l+u+d,e?.in)}const Mu={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},_1=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,w1=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,S1=/^([+-])(\d{2})(?::?(\d{2}))?$/;function x1(t){const e={},n=t.split(Mu.dateTimeDelimiter);let i;if(n.length>2)return e;if(/:/.test(n[0])?i=n[0]:(e.date=n[0],i=n[1],Mu.timeZoneDelimiter.test(e.date)&&(e.date=t.split(Mu.timeZoneDelimiter)[0],i=t.substr(e.date.length,t.length))),i){const a=Mu.timezone.exec(i);a?(e.time=i.replace(a[1],""),e.timezone=a[1]):e.time=i}return e}function E1(t,e){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),i=t.match(n);if(!i)return{year:NaN,restDateString:""};const a=i[1]?parseInt(i[1]):null,o=i[2]?parseInt(i[2]):null;return{year:o===null?a:o*100,restDateString:t.slice((i[1]||i[2]).length)}}function C1(t,e){if(e===null)return new Date(NaN);const n=t.match(_1);if(!n)return new Date(NaN);const i=!!n[4],a=dl(n[1]),o=dl(n[2])-1,l=dl(n[3]),u=dl(n[4]),d=dl(n[5])-1;if(i)return k1(e,u,d)?A1(e,u,d):new Date(NaN);{const f=new Date(0);return!D1(e,o,l)||!M1(e,a)?new Date(NaN):(f.setUTCFullYear(e,o,Math.max(a,l)),f)}}function dl(t){return t?parseInt(t):1}function O1(t){const e=t.match(w1);if(!e)return NaN;const n=dg(e[1]),i=dg(e[2]),a=dg(e[3]);return N1(n,i,a)?n*Om+i*SS+a*1e3:NaN}function dg(t){return t&&parseFloat(t.replace(",","."))||0}function R1(t){if(t==="Z")return 0;const e=t.match(S1);if(!e)return 0;const n=e[1]==="+"?-1:1,i=parseInt(e[2]),a=e[3]&&parseInt(e[3])||0;return j1(i,a)?n*(i*Om+a*SS):NaN}function A1(t,e,n){const i=new Date(0);i.setUTCFullYear(t,0,4);const a=i.getUTCDay()||7,o=(e-1)*7+n+1-a;return i.setUTCDate(i.getUTCDate()+o),i}const T1=[31,null,31,30,31,30,31,31,30,31,30,31];function RS(t){return t%400===0||t%4===0&&t%100!==0}function D1(t,e,n){return e>=0&&e<=11&&n>=1&&n<=(T1[e]||(RS(t)?29:28))}function M1(t,e){return e>=1&&e<=(RS(t)?366:365)}function k1(t,e,n){return e>=1&&e<=53&&n>=0&&n<=6}function N1(t,e,n){return t===24?e===0&&n===0:n>=0&&n<60&&e>=0&&e<60&&t>=0&&t<25}function j1(t,e){return e>=0&&e<=59}function $_(t,e,n){const i=pt(t,n?.in);return i.setHours(e),i}function q_(t,e,n){const i=pt(t,n?.in);return i.setMilliseconds(e),i}function G_(t,e,n){const i=pt(t,n?.in);return i.setMinutes(e),i}function Y_(t,e,n){const i=pt(t,n?.in);return i.setSeconds(e),i}function vn(t){return p1(t,"yyyy-MM-dd")}function L1(t,e,n){if(!t.scheduled_start_time||!t.scheduled_end_time)return!1;const i=Du(t.scheduled_start_time),a=Du(t.scheduled_end_time),o=q_(Y_(G_($_(Du(e),n),0),0),0),l=q_(Y_(G_($_(Du(e),n+1),0),0),0);return b1(i,l)&&y1(a,o)}function AS(t){return Xr(t,{weekStartsOn:0})}function P1(t){return yD(t,{weekStartsOn:0})}function Wz(t){return Vl(t)}function Kz(t){return pD(t)}function Xz(t,e){return fD(t,e)}function W_(t,e){return cD(t,e)}function $l(t,e){return oD(t,e)}class z1{async init(){try{const{error:e}=await ot.from("machines").select("count").limit(1);if(e)throw new Error(`API initialization failed: ${e.message}`);return!0}catch(e){throw e}}async getMachines(){return Gg(async()=>{const{data:e,error:n}=await ot.from("machines").select("*").order("machine_name");if(n)throw n;return e||[]},"getMachines")()}async addMachine(e){try{const{data:n,error:i}=await ot.from("machines").insert([e]).select().single();if(i)throw i;return n}catch(n){throw new Error(`Failed to add machine: ${ln(n)}`)}}async updateMachine(e,n){try{const{data:i,error:a}=await ot.from("machines").update(n).eq("id",e).select().single();if(a)throw a;return i}catch(i){throw new Error(`Failed to update machine: ${ln(i)}`)}}async removeMachine(e){try{const{error:n}=await ot.from("machines").delete().eq("id",e);if(n)throw n;return!0}catch(n){throw new Error(`Failed to remove machine: ${ln(n)}`)}}async getOdpOrders(){try{const{data:e,error:n}=await ot.from("odp_orders").select("*").order("created_at",{ascending:!1});if(n)throw n;return e||[]}catch(e){throw new Error(`Failed to fetch ODP orders: ${ln(e)}`)}}async addOdpOrder(e){try{const{data:n,error:i}=await ot.from("odp_orders").insert([e]).select().single();if(i)throw i;return n}catch(n){throw new Error(`Failed to add ODP order: ${ln(n)}`)}}async updateOdpOrder(e,n){try{const{data:i,error:a}=await ot.from("odp_orders").update(n).eq("id",e).select().single();if(a)throw a;return i}catch(i){throw new Error(`Failed to update ODP order: ${ln(i)}`)}}async removeOdpOrder(e){try{const{error:n}=await ot.from("odp_orders").delete().eq("id",e);if(n)throw n;return!0}catch(n){throw new Error(`Failed to remove ODP order: ${ln(n)}`)}}async getPhases(){try{const{data:e,error:n}=await ot.from("phases").select("*").order("name");if(n)throw n;return e||[]}catch(e){throw new Error(`Failed to fetch phases: ${ln(e)}`)}}async addPhase(e){try{const{data:n,error:i}=await ot.from("phases").insert([e]).select().single();if(i)throw i;return n}catch(n){throw new Error(`Failed to add phase: ${ln(n)}`)}}async updatePhase(e,n){try{const{data:i,error:a}=await ot.from("phases").update(n).eq("id",e).select().single();if(a)throw a;return i}catch(i){throw new Error(`Failed to update phase: ${ln(i)}`)}}async removePhase(e){try{const{error:n}=await ot.from("phases").delete().eq("id",e);if(n)throw n;return!0}catch(n){throw new Error(`Failed to remove phase: ${ln(n)}`)}}async getMachineAvailabilityForDateRange(e,n,i){try{const{data:a,error:o}=await ot.from("machine_availability").select("*").eq("machine_id",e).gte("date",n).lte("date",i).order("date");if(o)throw o;return a||[]}catch(a){throw new Error(`Failed to fetch machine availability for date range: ${ln(a)}`)}}async getMachineAvailabilityForDate(e,n){try{const{data:i,error:a}=await ot.from("machine_availability").select("*").eq("machine_id",e).eq("date",n).maybeSingle();if(a)throw a;return i||null}catch(i){throw new Error(`Failed to fetch machine availability: ${ln(i)}`)}}async getMachineAvailability(e,n){try{return(await this.getMachineAvailabilityForDate(e,n))?.unavailable_hours||[]}catch{return[]}}async setMachineAvailability(e,n,i){try{const{data:a,error:o}=await ot.from("machine_availability").upsert([{machine_id:e,date:n,unavailable_hours:i}],{onConflict:"machine_id,date"}).select().single();if(o)throw o;return a}catch(a){throw new Error(`Failed to set machine availability: ${ln(a)}`)}}async getMachineAvailabilityForDateAllMachines(e){try{const{data:n,error:i}=await ot.from("machine_availability").select("*").eq("date",e);if(i)throw i;return n||[]}catch(n){throw new Error(`Failed to fetch machine availability for all machines: ${ln(n)}`)}}async getEventsByDate(e){try{const{data:n,error:i}=await ot.from("machine_availability").select("*").eq("date",e);if(i)throw i;return n||[]}catch(n){throw new Error(`Failed to fetch events by date: ${ln(n)}`)}}async setUnavailableHoursForRange(e,n,i,a,o){try{const l=parseInt(a.split(":")[0]),u=parseInt(o.split(":")[0]),d=[];for(let _=l;_<u;_++)d.push(_.toString());const f=new Date(n),g=new Date(i);let p=new Date(f);const b=[];for(;p<=g;){const _=vn(p),S=(await this.getMachineAvailabilityForDate(e,_))?.unavailable_hours||[],x=[...new Set([...S,...d])].sort((O,A)=>parseInt(O)-parseInt(A)),C=await this.setMachineAvailability(e,_,x);b.push(C),p=$l(p,1)}return b}catch(l){throw new Error(`Failed to set unavailable hours for range: ${ln(l)}`)}}setupRealtimeSubscriptions(e,n,i){return ot.channel("table-db-changes").on("postgres_changes",{event:"*",schema:"public",table:"odp_orders"},e).on("postgres_changes",{event:"*",schema:"public",table:"machines"},n).on("postgres_changes",{event:"*",schema:"public",table:"phases"},i).subscribe(o=>{})}cleanupRealtimeSubscriptions(e){if(e)try{e.unsubscribe()}catch{}}}const at=new z1,Re=so((t,e)=>({isLoading:!1,isInitialized:!1,selectedWorkCenter:Ae.BOTH,alert:{message:"",type:"info",isVisible:!1},confirmDialog:{isOpen:!1,title:"",message:"",onConfirm:null,type:"danger"},getLoadingState:()=>e().isLoading,getInitializationState:()=>e().isInitialized,getSelectedWorkCenter:()=>e().selectedWorkCenter,getAlert:()=>e().alert,getConfirmDialog:()=>e().confirmDialog,setLoading:n=>t({isLoading:n}),setInitialized:n=>t({isInitialized:n}),setSelectedWorkCenter:n=>t({selectedWorkCenter:n}),showAlert:(n,i="info")=>t({alert:{message:n,type:i,isVisible:!0}}),hideAlert:()=>t({alert:{message:"",type:"info",isVisible:!1}}),showConfirmDialog:(n,i,a,o="danger")=>t({confirmDialog:{isOpen:!0,title:n,message:i,onConfirm:a,type:o}}),hideConfirmDialog:()=>t({confirmDialog:{isOpen:!1,title:"",message:"",onConfirm:null,type:"danger"}}),reset:()=>t({isLoading:!1,isInitialized:!1,selectedWorkCenter:Ae.BOTH,alert:{message:"",type:"info",isVisible:!1},confirmDialog:{isOpen:!1,title:"",message:"",onConfirm:null,type:"danger"}})})),I1=(t,e)=>{const n=Cm("Machine");return{addMachine:async i=>{try{const{selectedWorkCenter:a}=Re.getState();if(a&&a!==Ae.BOTH&&i.work_center&&i.work_center!==a)throw new Error(`Cannot add Machine with different work center. Selected: ${a}, Item: ${i.work_center}`);const o=await at.addMachine(i);return t(l=>({machines:[...l.machines,o]})),Re.getState().showAlert(`Machine "${i?.machine_name||"Unknown"}" added successfully`,"success"),o}catch(a){const o=n(a);throw Re.getState().showAlert(o.message,"error"),o}},updateMachine:async(i,a)=>{try{const o=e().machines.find(u=>u.id===i),l=await at.updateMachine(i,a);return t(u=>({machines:u.machines.map(d=>d.id===i?{...d,...l}:d)})),Re.getState().showAlert(`Machine "${o?.machine_name||"Unknown"}" updated successfully`,"success"),l}catch(o){const l=n(o);throw Re.getState().showAlert(l.message,"error"),l}},removeMachine:async i=>{try{const a=e().machines.find(o=>o.id===i);return await at.removeMachine(i),t(o=>({machines:o.machines.filter(l=>l.id!==i)})),Re.getState().showAlert(`Machine "${a?.machine_name||"Unknown"}" deleted successfully`,"success"),!0}catch(a){const o=n(a);throw Re.getState().showAlert(o.message,"error"),o}}}},Yt=so((t,e)=>({machines:[],getMachines:()=>e().machines,getMachineById:n=>e().machines.find(i=>i.id===n),getMachinesByWorkCenter:n=>n===Ae.BOTH?e().machines:e().machines.filter(i=>i.work_center===n),setMachines:n=>t({machines:n||[]}),...I1(t,e),cleanupDuplicateMachines:()=>{const n=e(),i=[],a=new Set;n.machines.forEach(o=>{a.has(o.id)||(a.add(o.id),i.push(o))}),t({machines:i})},reset:()=>t({machines:[]})})),F1=(t,e)=>{const n=Cm("OdpOrder");return{addOdpOrder:async i=>{try{const{selectedWorkCenter:a}=Re.getState();if(a&&a!==Ae.BOTH&&i.work_center&&i.work_center!==a)throw new Error(`Cannot add ODP Order with different work center. Selected: ${a}, Item: ${i.work_center}`);const o=await at.addOdpOrder(i);return t(l=>({odpOrders:[...l.odpOrders,o]})),Re.getState().showAlert(`ODP Order "${i?.odp_number||"Unknown"}" added successfully`,"success"),o}catch(a){const o=n(a);throw Re.getState().showAlert(o.message,"error"),o}},updateOdpOrder:async(i,a)=>{try{const o=e().odpOrders.find(u=>u.id===i),l=await at.updateOdpOrder(i,a);return t(u=>({odpOrders:u.odpOrders.map(d=>d.id===i?{...d,...l}:d)})),Re.getState().showAlert(`ODP Order "${o?.odp_number||"Unknown"}" updated successfully`,"success"),l}catch(o){const l=n(o);throw Re.getState().showAlert(l.message,"error"),l}},removeOdpOrder:async i=>{try{const a=e().odpOrders.find(o=>o.id===i);return await at.removeOdpOrder(i),t(o=>({odpOrders:o.odpOrders.filter(l=>l.id!==i)})),Re.getState().showAlert(`ODP Order "${a?.odp_number||"Unknown"}" deleted successfully`,"success"),!0}catch(a){const o=n(a);throw Re.getState().showAlert(o.message,"error"),o}}}},Mt=so((t,e)=>({odpOrders:[],getOdpOrders:()=>e().odpOrders,getOdpOrderById:n=>e().odpOrders.find(i=>i.id===n),getOdpOrdersByWorkCenter:n=>n===Ae.BOTH?e().odpOrders:e().odpOrders.filter(i=>i.work_center===n),getScheduledOrders:()=>e().odpOrders.filter(n=>n.status==="SCHEDULED"),getUnscheduledOrders:()=>e().odpOrders.filter(n=>n.status==="NOT SCHEDULED"),setOdpOrders:n=>t({odpOrders:n||[]}),...F1(t,e),cleanupDuplicateOrders:()=>{const n=e(),i=[],a=new Set;n.odpOrders.forEach(o=>{a.has(o.id)||(a.add(o.id),i.push(o))}),t({odpOrders:i})},reset:()=>t({odpOrders:[]})})),U1=(t,e)=>{const n=Cm("Phase");return{addPhase:async i=>{try{const{selectedWorkCenter:a}=Re.getState();if(a&&a!==Ae.BOTH&&i.work_center&&i.work_center!==a)throw new Error(`Cannot add Phase with different work center. Selected: ${a}, Item: ${i.work_center}`);const o=await at.addPhase(i);return t(l=>({phases:[...l.phases,o]})),Re.getState().showAlert(`Phase "${i?.name||"Unknown"}" added successfully`,"success"),o}catch(a){const o=n(a);throw Re.getState().showAlert(o.message,"error"),o}},updatePhase:async(i,a)=>{try{const o=e().phases.find(u=>u.id===i),l=await at.updatePhase(i,a);return t(u=>({phases:u.phases.map(d=>d.id===i?{...d,...l}:d)})),Re.getState().showAlert(`Phase "${o?.name||"Unknown"}" updated successfully`,"success"),l}catch(o){const l=n(o);throw Re.getState().showAlert(l.message,"error"),l}},removePhase:async i=>{try{const a=e().phases.find(o=>o.id===i);return await at.removePhase(i),t(o=>({phases:o.phases.filter(l=>l.id!==i)})),Re.getState().showAlert(`Phase "${a?.name||"Unknown"}" deleted successfully`,"success"),!0}catch(a){const o=n(a);throw Re.getState().showAlert(o.message,"error"),o}}}},ii=so((t,e)=>({phases:[],getPhases:()=>e().phases,getPhaseById:n=>e().phases.find(i=>i.id===n),getPhasesByWorkCenter:n=>n===Ae.BOTH?e().phases:e().phases.filter(i=>i.work_center===n),setPhases:n=>t({phases:n||[]}),...U1(t,e),cleanupDuplicatePhases:()=>{const n=e(),i=[],a=new Set;n.phases.forEach(o=>{a.has(o.id)||(a.add(o.id),i.push(o))}),t({phases:i})},reset:()=>t({phases:[]})})),Gr=so((t,e)=>({machineAvailability:{},getMachineAvailabilityState:()=>e().machineAvailability,setMachineAvailabilityState:n=>t({machineAvailability:n}),scheduleTaskFromSlot:async(n,i,a,o,l)=>{try{const{getOdpOrderById:u}=Mt.getState(),{getMachineById:d}=Yt.getState(),f=u(n),g=d(i.id);if(!f||!g)return{error:"Task or machine not found"};const p=new Date(a);p.setHours(o,l,0,0);const b=f.time_remaining||f.duration||1,_=W_(p,b),w={machine:i.id,start_time:p.toISOString(),end_time:_.toISOString()};return await e().scheduleTask(n,w)}catch{return{error:"An error occurred during scheduling"}}},rescheduleTaskToSlot:async(n,i,a,o,l)=>{try{const{getOdpOrderById:u}=Mt.getState(),{getMachineById:d}=Yt.getState(),f=u(n),g=d(i.id);if(!f||!g)return{error:"Event or machine not found"};const p=new Date(a);p.setHours(o,l,0,0);const b=f.time_remaining||f.duration||1,_=W_(p,b),w={machine:i.id,start_time:p.toISOString(),end_time:_.toISOString()};return await e().scheduleTask(n,w)}catch{return{error:"An error occurred during rescheduling"}}},validateSlotAvailability:async(n,i,a,o)=>{try{const l=vn(i);if(await e().isTimeSlotUnavailable(n.id,l,a))return{error:"Cannot schedule task on unavailable time slot"};const{getOdpOrders:d}=Mt.getState(),f=new Date(i);f.setHours(a,o,0,0);const g=new Date(f.getTime()+3600*1e3),p=d().filter(b=>b.scheduled_machine_id===n.id&&b.status==="SCHEDULED"&&b.scheduled_start_time);for(const b of p){const _=new Date(b.scheduled_start_time),w=b.time_remaining||b.duration||1,S=new Date(_.getTime()+w*60*60*1e3);if(f<S&&g>_)return{error:"Cannot schedule task on occupied time slot"}}return{success:!0}}catch{return{error:"Error validating slot availability"}}},scheduleTask:async(n,i)=>{const{getOdpOrderById:a}=Mt.getState(),{getMachineById:o}=Yt.getState(),l=a(n),u=o(i.machine);if(l&&u&&l.work_center&&u.work_center&&l.work_center!==u.work_center)return{error:`Work center mismatch: task requires '${l.work_center}' but machine is '${u.work_center}'`};const{getOdpOrders:d}=Mt.getState(),f=d().filter(O=>O.scheduled_machine_id===i.machine&&O.status==="SCHEDULED"&&O.id!==n),g=new Date(i.start_time),p=new Date(i.end_time);for(const O of f){const A=new Date(O.scheduled_start_time),M=O.time_remaining||O.duration||1,D=new Date(A.getTime()+M*60*60*1e3);if(g<D&&p>A)return{error:`Task overlaps with existing scheduled task: ${O.odp_number}`}}const b=new Date(g.getFullYear(),g.getMonth(),g.getDate()),_=new Date(p.getFullYear(),p.getMonth(),p.getDate()),w=[];let S=new Date(b);for(;S<=_;)w.push(vn(S)),S.setDate(S.getDate()+1);for(const O of w){const A=e().machineAvailability[O];if(A&&Array.isArray(A)){const M=A.find(D=>D.machine_id===i.machine);if(M&&M.unavailable_hours&&Array.isArray(M.unavailable_hours)){const D=new Date(new Date(O).getFullYear(),new Date(O).getMonth(),new Date(O).getDate());for(const V of M.unavailable_hours){const F=new Date(D.getTime()+parseInt(V)*60*60*1e3),I=new Date(F.getTime()+3600*1e3);if(g<I&&p>F){const X=new Date(O).toLocaleDateString("en-GB");return{error:`Task overlaps with unavailable slot at hour ${V}:00 on ${X}`}}}}}}const x={scheduled_machine_id:i.machine,scheduled_start_time:i.start_time,scheduled_end_time:i.end_time,status:"SCHEDULED"},{updateOdpOrder:C}=Mt.getState();return await C(n,x),{success:!0}},unscheduleTask:async n=>{const i={scheduled_machine_id:null,scheduled_start_time:null,scheduled_end_time:null,status:"NOT SCHEDULED"},{updateOdpOrder:a}=Mt.getState();await a(n,i)},loadMachineAvailabilityForDateRange:async(n,i,a)=>{const o=i instanceof Date?vn(i):i,l=a instanceof Date?vn(a):a;try{const u=await at.getMachineAvailabilityForDateRange(n,o,l);return t(d=>{const f={...d.machineAvailability};return Array.isArray(u)&&u.forEach(g=>{if(g.date&&g.unavailable_hours){const p=g.date;f[p]||(f[p]=[]);const b=f[p].find(_=>_.machine_id===n);b?b.unavailable_hours=g.unavailable_hours:f[p].push({machine_id:n,date:p,unavailable_hours:g.unavailable_hours})}}),{machineAvailability:f}}),u}catch(u){throw u}},getMachineAvailabilityForDate:async(n,i)=>{try{return await at.getMachineAvailabilityForDate(n,i)}catch{return[]}},setMachineAvailability:async(n,i,a)=>{try{const{getOdpOrders:o}=Mt.getState(),l=o().filter(g=>g.scheduled_machine_id===n&&g.status==="SCHEDULED"&&g.scheduled_start_time&&g.scheduled_end_time),u=new Date(i),d=new Date(u.getFullYear(),u.getMonth(),u.getDate()),f=new Date(d.getTime()+1440*60*1e3);for(const g of l){const p=new Date(g.scheduled_start_time),b=new Date(g.scheduled_end_time);if(p<f&&b>d)for(const _ of a){const w=new Date(d.getTime()+parseInt(_)*60*60*1e3),S=new Date(w.getTime()+3600*1e3);if(w<b&&S>p)throw new Error(`Cannot set machine unavailable during scheduled task: ${g.odp_number}`)}}return await at.setMachineAvailability(n,i,a),t(g=>{const p={...g.machineAvailability};p[i]||(p[i]=[]);const b=p[i].find(_=>_.machine_id===n);return b?b.unavailable_hours=a:p[i].push({machine_id:n,date:i,unavailable_hours:a}),{machineAvailability:p}}),Re.getState().showAlert(`Machine availability updated successfully for ${i}`,"success"),!0}catch(o){const l=Vn(o,"Machine Availability");throw Re.getState().showAlert(l.message,"error"),l}},toggleMachineHourAvailability:async(n,i,a)=>{try{const o=await e().getMachineAvailability(n,i),l=a.toString();let u;return o.includes(l)?u=o.filter(d=>d!==l):u=[...o,l].sort((d,f)=>parseInt(d)-parseInt(f)),await at.setMachineAvailability(n,i,u),t(d=>{const f={...d.machineAvailability};f[i]||(f[i]=[]);const g=f[i].find(p=>p.machine_id===n);return g?g.unavailable_hours=u:f[i].push({machine_id:n,date:i,unavailable_hours:u}),{machineAvailability:f}}),Re.getState().showAlert(`Time slot ${l}:00 updated successfully`,"success"),!0}catch(o){const l=Vn(o,"Machine Availability");throw Re.getState().showAlert(l.message,"error"),l}},loadMachineAvailabilityForDate:async n=>{const{machineAvailability:i}=e();if(!i[n]?._loading&&!(i[n]&&i[n].length>=0)){t(a=>({machineAvailability:{...a.machineAvailability,[n]:{_loading:!0}}}));try{const a=await at.getMachineAvailabilityForDateAllMachines(n);t(o=>({machineAvailability:{...o.machineAvailability,[n]:a||[]}}))}catch(a){throw t(o=>{const l={...o.machineAvailability};return l[n]&&delete l[n]._loading,{machineAvailability:l}}),a}}},loadMachineAvailabilityForMachine:async(n,i,a)=>{const o={};try{try{await at.getMachineAvailabilityForDate("test","2025-01-01")}catch{return{}}let l=new Date(i);for(;l<=a;){const u=vn(l);e().machineAvailability[u]||await e().loadMachineAvailabilityForDate(u);const f=e().machineAvailability[u];if(Array.isArray(f)){const g=f.find(p=>p.machine_id===n);g&&(o[u]=g.unavailable_hours||[])}l=$l(l,1)}return o}catch{return{}}},getMachineAvailability:async(n,i)=>{try{const a=e().machineAvailability[i];if(a&&Array.isArray(a)){const l=a.find(u=>u.machine_id===n);if(l)return l.unavailable_hours||[]}const o=await at.getMachineAvailabilityForDate(n,i);if(o){const l=(o.unavailable_hours||[]).map(u=>u.toString());return t(u=>{const d={...u.machineAvailability};d[i]||(d[i]=[]);const f=d[i].find(g=>g.machine_id===n);return f?f.unavailable_hours=l:d[i].push({machine_id:n,date:i,unavailable_hours:l}),{machineAvailability:d}}),l}return[]}catch{return[]}},isTimeSlotUnavailable:async(n,i,a)=>(await e().getMachineAvailability(n,i)).includes(a.toString()),initializeEmptyMachineAvailability:()=>{const{machines:n}=Yt.getState(),{machineAvailability:i}=e(),a={...i};n.forEach(o=>{a[o.id]||(a[o.id]={})}),t({machineAvailability:a})},getEventsByDate:async n=>{try{return await at.getEventsByDate(n)}catch{return[]}},setMachineUnavailability:async(n,i,a,o,l)=>{try{const u=await at.setUnavailableHoursForRange(n,i,a,o,l),d=new Date(i),f=new Date(a),g=await e().loadMachineAvailabilityForDateRange(n,d,f);return g&&Array.isArray(g)&&t(p=>{const b={...p.machineAvailability};return g.forEach(_=>{if(_.date&&_.unavailable_hours){const w=vn(new Date(_.date));b[w]||(b[w]=[]);const S=b[w].find(x=>x.machine_id===n);S?S.unavailable_hours=_.unavailable_hours:b[w].push({machine_id:n,date:w,unavailable_hours:_.unavailable_hours})}}),{machineAvailability:b}}),u}catch(u){throw u}},isMachineAvailabilityAccessible:async()=>{try{return await at.getMachineAvailabilityForDateAllMachines("2025-01-01"),!0}catch{return!1}},getMachineAvailabilityStatus:async()=>{try{const n=await e().isMachineAvailabilityAccessible();return{accessible:n,message:n?"Table is accessible":"Table is not accessible - check permissions or table existence"}}catch(n){return{accessible:!1,message:`Error checking table: ${n.message}`}}},reset:()=>t({machineAvailability:{}})})),H1=(t,e)=>{const n=o=>{V1(o)},i=o=>{$1(o)},a=o=>{q1(o)};return at.setupRealtimeSubscriptions(n,i,a)},Yg=()=>{window.realtimeChannel&&(at.cleanupRealtimeSubscriptions(window.realtimeChannel),window.realtimeChannel=null)};let Al=null;typeof window<"u"&&(Al=()=>{Yg()},window.addEventListener("beforeunload",Al));const B1=()=>{typeof window<"u"&&Al&&(window.removeEventListener("beforeunload",Al),Al=null)},V1=(t,e,n)=>{const{eventType:i,newRecord:a,oldRecord:o}=t,{setOdpOrders:l,getOdpOrders:u}=Mt.getState();switch(i){case"INSERT":l([...u(),a]);break;case"UPDATE":l(u().map(d=>d.id===a.id?a:d));break;case"DELETE":l(u().filter(d=>d.id!==o.id));break}},$1=(t,e,n)=>{const{eventType:i,newRecord:a,oldRecord:o}=t,{setMachines:l,getMachines:u}=Yt.getState();switch(i){case"INSERT":l([...u(),a]);break;case"UPDATE":l(u().map(d=>d.id===a.id?a:d));break;case"DELETE":l(u().filter(d=>d.id!==o.id));break}},q1=(t,e,n)=>{const{eventType:i,newRecord:a,oldRecord:o}=t,{setPhases:l,getPhases:u}=ii.getState();switch(i){case"INSERT":l([...u(),a]);break;case"UPDATE":l(u().map(d=>d.id===a.id?a:d));break;case"DELETE":l(u().filter(d=>d.id!==o.id));break}},Ui=so((t,e)=>({init:async()=>{const{getInitializationState:n,setLoading:i,setInitialized:a,showAlert:o}=Re.getState(),{setMachines:l}=Yt.getState(),{setOdpOrders:u}=Mt.getState(),{setPhases:d}=ii.getState(),{initializeEmptyMachineAvailability:f}=Gr.getState();if(!n()){i(!0);try{let g=!1,p=0;const b=3;for(;!g&&p<b;)try{await at.init(),g=!0}catch(x){p++;const C=Vn(x,"API Service Initialization");if(p>=b)throw mi(C,"API Service Initialization - Final Attempt Failed"),i(!1),a(!1),o("Unable to connect to the server. Please check your internet connection and refresh the page.","error"),new mn("API service initialization failed after multiple attempts","CRITICAL_INIT_ERROR",503,C,"Store Initialization");const O=Math.min(1e3*Math.pow(2,p-1),1e4);await new Promise(A=>setTimeout(A,O)),o(`Connection attempt ${p} failed. Retrying...`,"warning")}let _=[],w=[],S=[];try{_=await at.getMachines()}catch(x){const C=Vn(x,"Machines Data Fetch");mi(C,"Machines Data Fetch Failed"),o("Warning: Unable to load machine data. Some features may be limited.","warning")}try{w=await at.getOdpOrders()}catch(x){const C=Vn(x,"Orders Data Fetch");mi(C,"Orders Data Fetch Failed"),o("Warning: Unable to load order data. Some features may be limited.","warning")}try{S=await at.getPhases()}catch(x){const C=Vn(x,"Phases Data Fetch");mi(C,"Phases Data Fetch Failed"),o("Warning: Unable to load phase data. Some features may be limited.","warning")}try{const x=[],C=new Set;if(_&&_.length>0&&_.forEach(A=>{C.has(A.id)||(C.add(A.id),x.push(A))}),l(x),u(w||[]),d(S||[]),f(),!window.realtimeChannel)try{const A=H1(t,e);A&&(window.realtimeChannel=A)}catch(A){const M=Vn(A,"Real-time Subscriptions Setup");mi(M,"Real-time Subscriptions Setup Failed"),o("Warning: Real-time updates are not available. Data may not update automatically.","warning")}i(!1),a(!0);const O=x.length+(w?.length||0)+(S?.length||0);O>0?o(`Application initialized successfully. Loaded ${O} data items.`,"success"):o("Application initialized with limited functionality due to data loading issues.","warning")}catch(x){const C=Vn(x,"Data Processing");throw mi(C,"Data Processing Failed"),i(!1),a(!1),o("Failed to process application data. Please refresh the page.","error"),C}}catch(g){const p=g instanceof mn?g:Vn(g,"Store Initialization");throw mi(p,"Store Initialization - Unexpected Error"),i(!1),a(!1),p.code==="CRITICAL_INIT_ERROR"?o("Critical initialization error. Please contact support if the problem persists.","error"):o("Application initialization failed. Please refresh the page or contact support.","error"),p}}},refreshData:async()=>{const{setLoading:n}=Re.getState(),{setMachines:i}=Yt.getState(),{setOdpOrders:a}=Mt.getState(),{setPhases:o}=ii.getState();n(!0);try{const[l,u,d]=await Promise.all([at.getMachines(),at.getOdpOrders(),at.getPhases()]);i(l||[]),a(u||[]),o(d||[]),n(!1)}catch{n(!1)}},debugData:()=>{const{getMachines:n}=Yt.getState(),{getOdpOrders:i}=Mt.getState(),{getPhases:a}=ii.getState(),o=n().map(d=>d.id);o.filter((d,f)=>o.indexOf(d)!==f);const l=i().map(d=>d.id);l.filter((d,f)=>l.indexOf(d)!==f);const u=a().map(d=>d.id);u.filter((d,f)=>u.indexOf(d)!==f)},cleanupDuplicates:()=>{const{cleanupDuplicateMachines:n}=Yt.getState(),{cleanupDuplicateOrders:i}=Mt.getState(),{cleanupDuplicatePhases:a}=ii.getState();n(),i(),a()},reset:()=>{Yg();const{reset:n}=Yt.getState(),{reset:i}=Mt.getState(),{reset:a}=ii.getState(),{reset:o}=Gr.getState(),{reset:l}=Re.getState();n(),i(),a(),o(),l()},cleanup:()=>{Yg(),B1()},getState:()=>{const{getMachines:n}=Yt.getState(),{getOdpOrders:i}=Mt.getState(),{getPhases:a}=ii.getState(),{getMachineAvailability:o}=Gr.getState(),{getLoadingState:l,getInitializationState:u}=Re.getState();return{machines:n(),odpOrders:i(),phases:a(),machineAvailability:getMachineAvailabilityState(),isLoading:l(),isInitialized:u()}}}));function G1(){const{user:t,signOut:e}=ac(),{selectedWorkCenter:n}=Re(),i=bs(),a=sa(),o=[{href:"/",label:"Home"},{href:"/machinery",label:"Macchine",subLinks:[{href:"/machinery",label:"Lista"},{href:"/machinery/add",label:"Aggiungi"}]},{href:"/phases",label:"Fasi",subLinks:[{href:"/phases",label:"Lista"},{href:"/phases/add",label:"Aggiungi"}]},{href:"/backlog",label:"Backlog",subLinks:[{href:"/backlog",label:"Lista"},{href:"/backlog/add",label:"Aggiungi"}]},{href:"/scheduler",label:"Scheduler"}],l=async()=>{try{await e(),a("/login")}catch(u){console.error("Sign out error:",u)}};return t?y.jsxs("nav",{className:"sidebar",children:[y.jsx("div",{className:"sidebar-logo",children:y.jsxs(xn,{to:"/",children:[y.jsx("span",{className:"logo-flex",children:"flex"}),y.jsx("span",{className:"logo-i",children:"i"})]})}),y.jsxs("div",{className:"sidebar-links",children:[y.jsx("h3",{className:"sidebar-section-title",children:"NAVIGATION"}),o.map(u=>{const d=i.pathname===u.href||u.subLinks&&u.subLinks.some(f=>i.pathname===f.href);return y.jsxs("div",{className:"nav-item",children:[y.jsx(xn,{to:u.href,className:`sidebar-link ${d?"active":""}`,children:y.jsx("span",{children:u.label})}),u.subLinks&&y.jsx("div",{className:"sub-nav",children:u.subLinks.map(f=>y.jsx(xn,{to:f.href,className:`sub-nav-link ${i.pathname===f.href?"active":""}`,children:y.jsx("span",{children:f.label})},f.href))})]},u.href)})]}),y.jsxs("div",{className:"sidebar-user",children:[y.jsx("div",{className:"user-avatar",children:t.email?t.email.charAt(0).toUpperCase():"U"}),y.jsxs("div",{className:"user-info",children:[y.jsx("div",{className:"user-email",children:t.email}),n&&y.jsxs("div",{className:"work-center-badge",children:["WC: ",n]}),y.jsx("div",{className:"realtime-status",children:y.jsx("span",{className:"status-indicator offline",children:"OFFLINE"})})]})]}),y.jsxs("div",{className:"sidebar-actions",children:[y.jsx("h3",{className:"sidebar-section-title",children:"ACCOUNT"}),y.jsx("button",{onClick:l,className:"sidebar-action-btn signout-btn",children:y.jsx("span",{children:"Esci"})})]})]}):y.jsxs("nav",{className:"sidebar",children:[y.jsx("div",{className:"sidebar-logo",children:y.jsxs(xn,{to:"/login",children:[y.jsx("span",{className:"logo-flex",children:"flex"}),y.jsx("span",{className:"logo-i",children:"i"})]})}),y.jsxs("div",{className:"sidebar-links",children:[y.jsx("h3",{className:"sidebar-section-title",children:"NAVIGATION"}),y.jsx(xn,{to:"/login",className:"sidebar-link",children:y.jsx("span",{children:"Accedi"})}),y.jsx(xn,{to:"/signup",className:"sidebar-link",children:y.jsx("span",{children:"Registrati"})})]})]})}/**
   * table-core
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function Js(t,e){return typeof t=="function"?t(e):t}function $n(t,e){return n=>{e.setState(i=>({...i,[t]:Js(n,i[t])}))}}function Td(t){return t instanceof Function}function Y1(t){return Array.isArray(t)&&t.every(e=>typeof e=="number")}function W1(t,e){const n=[],i=a=>{a.forEach(o=>{n.push(o);const l=e(o);l!=null&&l.length&&i(l)})};return i(t),n}function Ce(t,e,n){let i=[],a;return o=>{let l;n.key&&n.debug&&(l=Date.now());const u=t(o);if(!(u.length!==i.length||u.some((g,p)=>i[p]!==g)))return a;i=u;let f;if(n.key&&n.debug&&(f=Date.now()),a=e(...u),n==null||n.onChange==null||n.onChange(a),n.key&&n.debug&&n!=null&&n.debug()){const g=Math.round((Date.now()-l)*100)/100,p=Math.round((Date.now()-f)*100)/100,b=p/16,_=(w,S)=>{for(w=String(w);w.length<S;)w=" "+w;return w};console.info(`%c⏱ ${_(p,5)} /${_(g,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*b,120))}deg 100% 31%);`,n?.key)}return a}}function Oe(t,e,n,i){return{debug:()=>{var a;return(a=t?.debugAll)!=null?a:t[e]},key:!1,onChange:i}}function K1(t,e,n,i){const a=()=>{var l;return(l=o.getValue())!=null?l:t.options.renderFallbackValue},o={id:`${e.id}_${n.id}`,row:e,column:n,getValue:()=>e.getValue(i),renderValue:a,getContext:Ce(()=>[t,n,e,o],(l,u,d,f)=>({table:l,column:u,row:d,cell:f,getValue:f.getValue,renderValue:f.renderValue}),Oe(t.options,"debugCells"))};return t._features.forEach(l=>{l.createCell==null||l.createCell(o,n,e,t)},{}),o}function X1(t,e,n,i){var a,o;const u={...t._getDefaultColumnDef(),...e},d=u.accessorKey;let f=(a=(o=u.id)!=null?o:d?typeof String.prototype.replaceAll=="function"?d.replaceAll(".","_"):d.replace(/\./g,"_"):void 0)!=null?a:typeof u.header=="string"?u.header:void 0,g;if(u.accessorFn?g=u.accessorFn:d&&(d.includes(".")?g=b=>{let _=b;for(const S of d.split(".")){var w;_=(w=_)==null?void 0:w[S]}return _}:g=b=>b[u.accessorKey]),!f)throw new Error;let p={id:`${String(f)}`,accessorFn:g,parent:i,depth:n,columnDef:u,columns:[],getFlatColumns:Ce(()=>[!0],()=>{var b;return[p,...(b=p.columns)==null?void 0:b.flatMap(_=>_.getFlatColumns())]},Oe(t.options,"debugColumns")),getLeafColumns:Ce(()=>[t._getOrderColumnsFn()],b=>{var _;if((_=p.columns)!=null&&_.length){let w=p.columns.flatMap(S=>S.getLeafColumns());return b(w)}return[p]},Oe(t.options,"debugColumns"))};for(const b of t._features)b.createColumn==null||b.createColumn(p,t);return p}const gn="debugHeaders";function K_(t,e,n){var i;let o={id:(i=n.id)!=null?i:e.id,column:e,index:n.index,isPlaceholder:!!n.isPlaceholder,placeholderId:n.placeholderId,depth:n.depth,subHeaders:[],colSpan:0,rowSpan:0,headerGroup:null,getLeafHeaders:()=>{const l=[],u=d=>{d.subHeaders&&d.subHeaders.length&&d.subHeaders.map(u),l.push(d)};return u(o),l},getContext:()=>({table:t,header:o,column:e})};return t._features.forEach(l=>{l.createHeader==null||l.createHeader(o,t)}),o}const Q1={createTable:t=>{t.getHeaderGroups=Ce(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,n,i,a)=>{var o,l;const u=(o=i?.map(p=>n.find(b=>b.id===p)).filter(Boolean))!=null?o:[],d=(l=a?.map(p=>n.find(b=>b.id===p)).filter(Boolean))!=null?l:[],f=n.filter(p=>!(i!=null&&i.includes(p.id))&&!(a!=null&&a.includes(p.id)));return ku(e,[...u,...f,...d],t)},Oe(t.options,gn)),t.getCenterHeaderGroups=Ce(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,n,i,a)=>(n=n.filter(o=>!(i!=null&&i.includes(o.id))&&!(a!=null&&a.includes(o.id))),ku(e,n,t,"center")),Oe(t.options,gn)),t.getLeftHeaderGroups=Ce(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.left],(e,n,i)=>{var a;const o=(a=i?.map(l=>n.find(u=>u.id===l)).filter(Boolean))!=null?a:[];return ku(e,o,t,"left")},Oe(t.options,gn)),t.getRightHeaderGroups=Ce(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.right],(e,n,i)=>{var a;const o=(a=i?.map(l=>n.find(u=>u.id===l)).filter(Boolean))!=null?a:[];return ku(e,o,t,"right")},Oe(t.options,gn)),t.getFooterGroups=Ce(()=>[t.getHeaderGroups()],e=>[...e].reverse(),Oe(t.options,gn)),t.getLeftFooterGroups=Ce(()=>[t.getLeftHeaderGroups()],e=>[...e].reverse(),Oe(t.options,gn)),t.getCenterFooterGroups=Ce(()=>[t.getCenterHeaderGroups()],e=>[...e].reverse(),Oe(t.options,gn)),t.getRightFooterGroups=Ce(()=>[t.getRightHeaderGroups()],e=>[...e].reverse(),Oe(t.options,gn)),t.getFlatHeaders=Ce(()=>[t.getHeaderGroups()],e=>e.map(n=>n.headers).flat(),Oe(t.options,gn)),t.getLeftFlatHeaders=Ce(()=>[t.getLeftHeaderGroups()],e=>e.map(n=>n.headers).flat(),Oe(t.options,gn)),t.getCenterFlatHeaders=Ce(()=>[t.getCenterHeaderGroups()],e=>e.map(n=>n.headers).flat(),Oe(t.options,gn)),t.getRightFlatHeaders=Ce(()=>[t.getRightHeaderGroups()],e=>e.map(n=>n.headers).flat(),Oe(t.options,gn)),t.getCenterLeafHeaders=Ce(()=>[t.getCenterFlatHeaders()],e=>e.filter(n=>{var i;return!((i=n.subHeaders)!=null&&i.length)}),Oe(t.options,gn)),t.getLeftLeafHeaders=Ce(()=>[t.getLeftFlatHeaders()],e=>e.filter(n=>{var i;return!((i=n.subHeaders)!=null&&i.length)}),Oe(t.options,gn)),t.getRightLeafHeaders=Ce(()=>[t.getRightFlatHeaders()],e=>e.filter(n=>{var i;return!((i=n.subHeaders)!=null&&i.length)}),Oe(t.options,gn)),t.getLeafHeaders=Ce(()=>[t.getLeftHeaderGroups(),t.getCenterHeaderGroups(),t.getRightHeaderGroups()],(e,n,i)=>{var a,o,l,u,d,f;return[...(a=(o=e[0])==null?void 0:o.headers)!=null?a:[],...(l=(u=n[0])==null?void 0:u.headers)!=null?l:[],...(d=(f=i[0])==null?void 0:f.headers)!=null?d:[]].map(g=>g.getLeafHeaders()).flat()},Oe(t.options,gn))}};function ku(t,e,n,i){var a,o;let l=0;const u=function(b,_){_===void 0&&(_=1),l=Math.max(l,_),b.filter(w=>w.getIsVisible()).forEach(w=>{var S;(S=w.columns)!=null&&S.length&&u(w.columns,_+1)},0)};u(t);let d=[];const f=(b,_)=>{const w={depth:_,id:[i,`${_}`].filter(Boolean).join("_"),headers:[]},S=[];b.forEach(x=>{const C=[...S].reverse()[0],O=x.column.depth===w.depth;let A,M=!1;if(O&&x.column.parent?A=x.column.parent:(A=x.column,M=!0),C&&C?.column===A)C.subHeaders.push(x);else{const D=K_(n,A,{id:[i,_,A.id,x?.id].filter(Boolean).join("_"),isPlaceholder:M,placeholderId:M?`${S.filter(V=>V.column===A).length}`:void 0,depth:_,index:S.length});D.subHeaders.push(x),S.push(D)}w.headers.push(x),x.headerGroup=w}),d.push(w),_>0&&f(S,_-1)},g=e.map((b,_)=>K_(n,b,{depth:l,index:_}));f(g,l-1),d.reverse();const p=b=>b.filter(w=>w.column.getIsVisible()).map(w=>{let S=0,x=0,C=[0];w.subHeaders&&w.subHeaders.length?(C=[],p(w.subHeaders).forEach(A=>{let{colSpan:M,rowSpan:D}=A;S+=M,C.push(D)})):S=1;const O=Math.min(...C);return x=x+O,w.colSpan=S,w.rowSpan=x,{colSpan:S,rowSpan:x}});return p((a=(o=d[0])==null?void 0:o.headers)!=null?a:[]),d}const Z1=(t,e,n,i,a,o,l)=>{let u={id:e,index:i,original:n,depth:a,parentId:l,_valuesCache:{},_uniqueValuesCache:{},getValue:d=>{if(u._valuesCache.hasOwnProperty(d))return u._valuesCache[d];const f=t.getColumn(d);if(f!=null&&f.accessorFn)return u._valuesCache[d]=f.accessorFn(u.original,i),u._valuesCache[d]},getUniqueValues:d=>{if(u._uniqueValuesCache.hasOwnProperty(d))return u._uniqueValuesCache[d];const f=t.getColumn(d);if(f!=null&&f.accessorFn)return f.columnDef.getUniqueValues?(u._uniqueValuesCache[d]=f.columnDef.getUniqueValues(u.original,i),u._uniqueValuesCache[d]):(u._uniqueValuesCache[d]=[u.getValue(d)],u._uniqueValuesCache[d])},renderValue:d=>{var f;return(f=u.getValue(d))!=null?f:t.options.renderFallbackValue},subRows:[],getLeafRows:()=>W1(u.subRows,d=>d.subRows),getParentRow:()=>u.parentId?t.getRow(u.parentId,!0):void 0,getParentRows:()=>{let d=[],f=u;for(;;){const g=f.getParentRow();if(!g)break;d.push(g),f=g}return d.reverse()},getAllCells:Ce(()=>[t.getAllLeafColumns()],d=>d.map(f=>K1(t,u,f,f.id)),Oe(t.options,"debugRows")),_getAllCellsByColumnId:Ce(()=>[u.getAllCells()],d=>d.reduce((f,g)=>(f[g.column.id]=g,f),{}),Oe(t.options,"debugRows"))};for(let d=0;d<t._features.length;d++){const f=t._features[d];f==null||f.createRow==null||f.createRow(u,t)}return u},J1={createColumn:(t,e)=>{t._getFacetedRowModel=e.options.getFacetedRowModel&&e.options.getFacetedRowModel(e,t.id),t.getFacetedRowModel=()=>t._getFacetedRowModel?t._getFacetedRowModel():e.getPreFilteredRowModel(),t._getFacetedUniqueValues=e.options.getFacetedUniqueValues&&e.options.getFacetedUniqueValues(e,t.id),t.getFacetedUniqueValues=()=>t._getFacetedUniqueValues?t._getFacetedUniqueValues():new Map,t._getFacetedMinMaxValues=e.options.getFacetedMinMaxValues&&e.options.getFacetedMinMaxValues(e,t.id),t.getFacetedMinMaxValues=()=>{if(t._getFacetedMinMaxValues)return t._getFacetedMinMaxValues()}}},TS=(t,e,n)=>{var i,a;const o=n==null||(i=n.toString())==null?void 0:i.toLowerCase();return!!(!((a=t.getValue(e))==null||(a=a.toString())==null||(a=a.toLowerCase())==null)&&a.includes(o))};TS.autoRemove=t=>bi(t);const DS=(t,e,n)=>{var i;return!!(!((i=t.getValue(e))==null||(i=i.toString())==null)&&i.includes(n))};DS.autoRemove=t=>bi(t);const MS=(t,e,n)=>{var i;return((i=t.getValue(e))==null||(i=i.toString())==null?void 0:i.toLowerCase())===n?.toLowerCase()};MS.autoRemove=t=>bi(t);const kS=(t,e,n)=>{var i;return(i=t.getValue(e))==null?void 0:i.includes(n)};kS.autoRemove=t=>bi(t);const NS=(t,e,n)=>!n.some(i=>{var a;return!((a=t.getValue(e))!=null&&a.includes(i))});NS.autoRemove=t=>bi(t)||!(t!=null&&t.length);const jS=(t,e,n)=>n.some(i=>{var a;return(a=t.getValue(e))==null?void 0:a.includes(i)});jS.autoRemove=t=>bi(t)||!(t!=null&&t.length);const LS=(t,e,n)=>t.getValue(e)===n;LS.autoRemove=t=>bi(t);const PS=(t,e,n)=>t.getValue(e)==n;PS.autoRemove=t=>bi(t);const Rm=(t,e,n)=>{let[i,a]=n;const o=t.getValue(e);return o>=i&&o<=a};Rm.resolveFilterValue=t=>{let[e,n]=t,i=typeof e!="number"?parseFloat(e):e,a=typeof n!="number"?parseFloat(n):n,o=e===null||Number.isNaN(i)?-1/0:i,l=n===null||Number.isNaN(a)?1/0:a;if(o>l){const u=o;o=l,l=u}return[o,l]};Rm.autoRemove=t=>bi(t)||bi(t[0])&&bi(t[1]);const hs={includesString:TS,includesStringSensitive:DS,equalsString:MS,arrIncludes:kS,arrIncludesAll:NS,arrIncludesSome:jS,equals:LS,weakEquals:PS,inNumberRange:Rm};function bi(t){return t==null||t===""}const eM={getDefaultColumnDef:()=>({filterFn:"auto"}),getInitialState:t=>({columnFilters:[],...t}),getDefaultOptions:t=>({onColumnFiltersChange:$n("columnFilters",t),filterFromLeafRows:!1,maxLeafRowFilterDepth:100}),createColumn:(t,e)=>{t.getAutoFilterFn=()=>{const n=e.getCoreRowModel().flatRows[0],i=n?.getValue(t.id);return typeof i=="string"?hs.includesString:typeof i=="number"?hs.inNumberRange:typeof i=="boolean"||i!==null&&typeof i=="object"?hs.equals:Array.isArray(i)?hs.arrIncludes:hs.weakEquals},t.getFilterFn=()=>{var n,i;return Td(t.columnDef.filterFn)?t.columnDef.filterFn:t.columnDef.filterFn==="auto"?t.getAutoFilterFn():(n=(i=e.options.filterFns)==null?void 0:i[t.columnDef.filterFn])!=null?n:hs[t.columnDef.filterFn]},t.getCanFilter=()=>{var n,i,a;return((n=t.columnDef.enableColumnFilter)!=null?n:!0)&&((i=e.options.enableColumnFilters)!=null?i:!0)&&((a=e.options.enableFilters)!=null?a:!0)&&!!t.accessorFn},t.getIsFiltered=()=>t.getFilterIndex()>-1,t.getFilterValue=()=>{var n;return(n=e.getState().columnFilters)==null||(n=n.find(i=>i.id===t.id))==null?void 0:n.value},t.getFilterIndex=()=>{var n,i;return(n=(i=e.getState().columnFilters)==null?void 0:i.findIndex(a=>a.id===t.id))!=null?n:-1},t.setFilterValue=n=>{e.setColumnFilters(i=>{const a=t.getFilterFn(),o=i?.find(g=>g.id===t.id),l=Js(n,o?o.value:void 0);if(X_(a,l,t)){var u;return(u=i?.filter(g=>g.id!==t.id))!=null?u:[]}const d={id:t.id,value:l};if(o){var f;return(f=i?.map(g=>g.id===t.id?d:g))!=null?f:[]}return i!=null&&i.length?[...i,d]:[d]})}},createRow:(t,e)=>{t.columnFilters={},t.columnFiltersMeta={}},createTable:t=>{t.setColumnFilters=e=>{const n=t.getAllLeafColumns(),i=a=>{var o;return(o=Js(e,a))==null?void 0:o.filter(l=>{const u=n.find(d=>d.id===l.id);if(u){const d=u.getFilterFn();if(X_(d,l.value,u))return!1}return!0})};t.options.onColumnFiltersChange==null||t.options.onColumnFiltersChange(i)},t.resetColumnFilters=e=>{var n,i;t.setColumnFilters(e?[]:(n=(i=t.initialState)==null?void 0:i.columnFilters)!=null?n:[])},t.getPreFilteredRowModel=()=>t.getCoreRowModel(),t.getFilteredRowModel=()=>(!t._getFilteredRowModel&&t.options.getFilteredRowModel&&(t._getFilteredRowModel=t.options.getFilteredRowModel(t)),t.options.manualFiltering||!t._getFilteredRowModel?t.getPreFilteredRowModel():t._getFilteredRowModel())}};function X_(t,e,n){return(t&&t.autoRemove?t.autoRemove(e,n):!1)||typeof e>"u"||typeof e=="string"&&!e}const tM=(t,e,n)=>n.reduce((i,a)=>{const o=a.getValue(t);return i+(typeof o=="number"?o:0)},0),nM=(t,e,n)=>{let i;return n.forEach(a=>{const o=a.getValue(t);o!=null&&(i>o||i===void 0&&o>=o)&&(i=o)}),i},iM=(t,e,n)=>{let i;return n.forEach(a=>{const o=a.getValue(t);o!=null&&(i<o||i===void 0&&o>=o)&&(i=o)}),i},sM=(t,e,n)=>{let i,a;return n.forEach(o=>{const l=o.getValue(t);l!=null&&(i===void 0?l>=l&&(i=a=l):(i>l&&(i=l),a<l&&(a=l)))}),[i,a]},aM=(t,e)=>{let n=0,i=0;if(e.forEach(a=>{let o=a.getValue(t);o!=null&&(o=+o)>=o&&(++n,i+=o)}),n)return i/n},rM=(t,e)=>{if(!e.length)return;const n=e.map(o=>o.getValue(t));if(!Y1(n))return;if(n.length===1)return n[0];const i=Math.floor(n.length/2),a=n.sort((o,l)=>o-l);return n.length%2!==0?a[i]:(a[i-1]+a[i])/2},oM=(t,e)=>Array.from(new Set(e.map(n=>n.getValue(t))).values()),lM=(t,e)=>new Set(e.map(n=>n.getValue(t))).size,cM=(t,e)=>e.length,hg={sum:tM,min:nM,max:iM,extent:sM,mean:aM,median:rM,unique:oM,uniqueCount:lM,count:cM},uM={getDefaultColumnDef:()=>({aggregatedCell:t=>{var e,n;return(e=(n=t.getValue())==null||n.toString==null?void 0:n.toString())!=null?e:null},aggregationFn:"auto"}),getInitialState:t=>({grouping:[],...t}),getDefaultOptions:t=>({onGroupingChange:$n("grouping",t),groupedColumnMode:"reorder"}),createColumn:(t,e)=>{t.toggleGrouping=()=>{e.setGrouping(n=>n!=null&&n.includes(t.id)?n.filter(i=>i!==t.id):[...n??[],t.id])},t.getCanGroup=()=>{var n,i;return((n=t.columnDef.enableGrouping)!=null?n:!0)&&((i=e.options.enableGrouping)!=null?i:!0)&&(!!t.accessorFn||!!t.columnDef.getGroupingValue)},t.getIsGrouped=()=>{var n;return(n=e.getState().grouping)==null?void 0:n.includes(t.id)},t.getGroupedIndex=()=>{var n;return(n=e.getState().grouping)==null?void 0:n.indexOf(t.id)},t.getToggleGroupingHandler=()=>{const n=t.getCanGroup();return()=>{n&&t.toggleGrouping()}},t.getAutoAggregationFn=()=>{const n=e.getCoreRowModel().flatRows[0],i=n?.getValue(t.id);if(typeof i=="number")return hg.sum;if(Object.prototype.toString.call(i)==="[object Date]")return hg.extent},t.getAggregationFn=()=>{var n,i;if(!t)throw new Error;return Td(t.columnDef.aggregationFn)?t.columnDef.aggregationFn:t.columnDef.aggregationFn==="auto"?t.getAutoAggregationFn():(n=(i=e.options.aggregationFns)==null?void 0:i[t.columnDef.aggregationFn])!=null?n:hg[t.columnDef.aggregationFn]}},createTable:t=>{t.setGrouping=e=>t.options.onGroupingChange==null?void 0:t.options.onGroupingChange(e),t.resetGrouping=e=>{var n,i;t.setGrouping(e?[]:(n=(i=t.initialState)==null?void 0:i.grouping)!=null?n:[])},t.getPreGroupedRowModel=()=>t.getFilteredRowModel(),t.getGroupedRowModel=()=>(!t._getGroupedRowModel&&t.options.getGroupedRowModel&&(t._getGroupedRowModel=t.options.getGroupedRowModel(t)),t.options.manualGrouping||!t._getGroupedRowModel?t.getPreGroupedRowModel():t._getGroupedRowModel())},createRow:(t,e)=>{t.getIsGrouped=()=>!!t.groupingColumnId,t.getGroupingValue=n=>{if(t._groupingValuesCache.hasOwnProperty(n))return t._groupingValuesCache[n];const i=e.getColumn(n);return i!=null&&i.columnDef.getGroupingValue?(t._groupingValuesCache[n]=i.columnDef.getGroupingValue(t.original),t._groupingValuesCache[n]):t.getValue(n)},t._groupingValuesCache={}},createCell:(t,e,n,i)=>{t.getIsGrouped=()=>e.getIsGrouped()&&e.id===n.groupingColumnId,t.getIsPlaceholder=()=>!t.getIsGrouped()&&e.getIsGrouped(),t.getIsAggregated=()=>{var a;return!t.getIsGrouped()&&!t.getIsPlaceholder()&&!!((a=n.subRows)!=null&&a.length)}}};function dM(t,e,n){if(!(e!=null&&e.length)||!n)return t;const i=t.filter(o=>!e.includes(o.id));return n==="remove"?i:[...e.map(o=>t.find(l=>l.id===o)).filter(Boolean),...i]}const hM={getInitialState:t=>({columnOrder:[],...t}),getDefaultOptions:t=>({onColumnOrderChange:$n("columnOrder",t)}),createColumn:(t,e)=>{t.getIndex=Ce(n=>[Tl(e,n)],n=>n.findIndex(i=>i.id===t.id),Oe(e.options,"debugColumns")),t.getIsFirstColumn=n=>{var i;return((i=Tl(e,n)[0])==null?void 0:i.id)===t.id},t.getIsLastColumn=n=>{var i;const a=Tl(e,n);return((i=a[a.length-1])==null?void 0:i.id)===t.id}},createTable:t=>{t.setColumnOrder=e=>t.options.onColumnOrderChange==null?void 0:t.options.onColumnOrderChange(e),t.resetColumnOrder=e=>{var n;t.setColumnOrder(e?[]:(n=t.initialState.columnOrder)!=null?n:[])},t._getOrderColumnsFn=Ce(()=>[t.getState().columnOrder,t.getState().grouping,t.options.groupedColumnMode],(e,n,i)=>a=>{let o=[];if(!(e!=null&&e.length))o=a;else{const l=[...e],u=[...a];for(;u.length&&l.length;){const d=l.shift(),f=u.findIndex(g=>g.id===d);f>-1&&o.push(u.splice(f,1)[0])}o=[...o,...u]}return dM(o,n,i)},Oe(t.options,"debugTable"))}},fg=()=>({left:[],right:[]}),fM={getInitialState:t=>({columnPinning:fg(),...t}),getDefaultOptions:t=>({onColumnPinningChange:$n("columnPinning",t)}),createColumn:(t,e)=>{t.pin=n=>{const i=t.getLeafColumns().map(a=>a.id).filter(Boolean);e.setColumnPinning(a=>{var o,l;if(n==="right"){var u,d;return{left:((u=a?.left)!=null?u:[]).filter(p=>!(i!=null&&i.includes(p))),right:[...((d=a?.right)!=null?d:[]).filter(p=>!(i!=null&&i.includes(p))),...i]}}if(n==="left"){var f,g;return{left:[...((f=a?.left)!=null?f:[]).filter(p=>!(i!=null&&i.includes(p))),...i],right:((g=a?.right)!=null?g:[]).filter(p=>!(i!=null&&i.includes(p)))}}return{left:((o=a?.left)!=null?o:[]).filter(p=>!(i!=null&&i.includes(p))),right:((l=a?.right)!=null?l:[]).filter(p=>!(i!=null&&i.includes(p)))}})},t.getCanPin=()=>t.getLeafColumns().some(i=>{var a,o,l;return((a=i.columnDef.enablePinning)!=null?a:!0)&&((o=(l=e.options.enableColumnPinning)!=null?l:e.options.enablePinning)!=null?o:!0)}),t.getIsPinned=()=>{const n=t.getLeafColumns().map(u=>u.id),{left:i,right:a}=e.getState().columnPinning,o=n.some(u=>i?.includes(u)),l=n.some(u=>a?.includes(u));return o?"left":l?"right":!1},t.getPinnedIndex=()=>{var n,i;const a=t.getIsPinned();return a?(n=(i=e.getState().columnPinning)==null||(i=i[a])==null?void 0:i.indexOf(t.id))!=null?n:-1:0}},createRow:(t,e)=>{t.getCenterVisibleCells=Ce(()=>[t._getAllVisibleCells(),e.getState().columnPinning.left,e.getState().columnPinning.right],(n,i,a)=>{const o=[...i??[],...a??[]];return n.filter(l=>!o.includes(l.column.id))},Oe(e.options,"debugRows")),t.getLeftVisibleCells=Ce(()=>[t._getAllVisibleCells(),e.getState().columnPinning.left],(n,i)=>(i??[]).map(o=>n.find(l=>l.column.id===o)).filter(Boolean).map(o=>({...o,position:"left"})),Oe(e.options,"debugRows")),t.getRightVisibleCells=Ce(()=>[t._getAllVisibleCells(),e.getState().columnPinning.right],(n,i)=>(i??[]).map(o=>n.find(l=>l.column.id===o)).filter(Boolean).map(o=>({...o,position:"right"})),Oe(e.options,"debugRows"))},createTable:t=>{t.setColumnPinning=e=>t.options.onColumnPinningChange==null?void 0:t.options.onColumnPinningChange(e),t.resetColumnPinning=e=>{var n,i;return t.setColumnPinning(e?fg():(n=(i=t.initialState)==null?void 0:i.columnPinning)!=null?n:fg())},t.getIsSomeColumnsPinned=e=>{var n;const i=t.getState().columnPinning;if(!e){var a,o;return!!((a=i.left)!=null&&a.length||(o=i.right)!=null&&o.length)}return!!((n=i[e])!=null&&n.length)},t.getLeftLeafColumns=Ce(()=>[t.getAllLeafColumns(),t.getState().columnPinning.left],(e,n)=>(n??[]).map(i=>e.find(a=>a.id===i)).filter(Boolean),Oe(t.options,"debugColumns")),t.getRightLeafColumns=Ce(()=>[t.getAllLeafColumns(),t.getState().columnPinning.right],(e,n)=>(n??[]).map(i=>e.find(a=>a.id===i)).filter(Boolean),Oe(t.options,"debugColumns")),t.getCenterLeafColumns=Ce(()=>[t.getAllLeafColumns(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,n,i)=>{const a=[...n??[],...i??[]];return e.filter(o=>!a.includes(o.id))},Oe(t.options,"debugColumns"))}};function gM(t){return t||(typeof document<"u"?document:null)}const Nu={size:150,minSize:20,maxSize:Number.MAX_SAFE_INTEGER},gg=()=>({startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]}),mM={getDefaultColumnDef:()=>Nu,getInitialState:t=>({columnSizing:{},columnSizingInfo:gg(),...t}),getDefaultOptions:t=>({columnResizeMode:"onEnd",columnResizeDirection:"ltr",onColumnSizingChange:$n("columnSizing",t),onColumnSizingInfoChange:$n("columnSizingInfo",t)}),createColumn:(t,e)=>{t.getSize=()=>{var n,i,a;const o=e.getState().columnSizing[t.id];return Math.min(Math.max((n=t.columnDef.minSize)!=null?n:Nu.minSize,(i=o??t.columnDef.size)!=null?i:Nu.size),(a=t.columnDef.maxSize)!=null?a:Nu.maxSize)},t.getStart=Ce(n=>[n,Tl(e,n),e.getState().columnSizing],(n,i)=>i.slice(0,t.getIndex(n)).reduce((a,o)=>a+o.getSize(),0),Oe(e.options,"debugColumns")),t.getAfter=Ce(n=>[n,Tl(e,n),e.getState().columnSizing],(n,i)=>i.slice(t.getIndex(n)+1).reduce((a,o)=>a+o.getSize(),0),Oe(e.options,"debugColumns")),t.resetSize=()=>{e.setColumnSizing(n=>{let{[t.id]:i,...a}=n;return a})},t.getCanResize=()=>{var n,i;return((n=t.columnDef.enableResizing)!=null?n:!0)&&((i=e.options.enableColumnResizing)!=null?i:!0)},t.getIsResizing=()=>e.getState().columnSizingInfo.isResizingColumn===t.id},createHeader:(t,e)=>{t.getSize=()=>{let n=0;const i=a=>{if(a.subHeaders.length)a.subHeaders.forEach(i);else{var o;n+=(o=a.column.getSize())!=null?o:0}};return i(t),n},t.getStart=()=>{if(t.index>0){const n=t.headerGroup.headers[t.index-1];return n.getStart()+n.getSize()}return 0},t.getResizeHandler=n=>{const i=e.getColumn(t.column.id),a=i?.getCanResize();return o=>{if(!i||!a||(o.persist==null||o.persist(),mg(o)&&o.touches&&o.touches.length>1))return;const l=t.getSize(),u=t?t.getLeafHeaders().map(C=>[C.column.id,C.column.getSize()]):[[i.id,i.getSize()]],d=mg(o)?Math.round(o.touches[0].clientX):o.clientX,f={},g=(C,O)=>{typeof O=="number"&&(e.setColumnSizingInfo(A=>{var M,D;const V=e.options.columnResizeDirection==="rtl"?-1:1,F=(O-((M=A?.startOffset)!=null?M:0))*V,I=Math.max(F/((D=A?.startSize)!=null?D:0),-.999999);return A.columnSizingStart.forEach(W=>{let[X,Q]=W;f[X]=Math.round(Math.max(Q+Q*I,0)*100)/100}),{...A,deltaOffset:F,deltaPercentage:I}}),(e.options.columnResizeMode==="onChange"||C==="end")&&e.setColumnSizing(A=>({...A,...f})))},p=C=>g("move",C),b=C=>{g("end",C),e.setColumnSizingInfo(O=>({...O,isResizingColumn:!1,startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,columnSizingStart:[]}))},_=gM(n),w={moveHandler:C=>p(C.clientX),upHandler:C=>{_?.removeEventListener("mousemove",w.moveHandler),_?.removeEventListener("mouseup",w.upHandler),b(C.clientX)}},S={moveHandler:C=>(C.cancelable&&(C.preventDefault(),C.stopPropagation()),p(C.touches[0].clientX),!1),upHandler:C=>{var O;_?.removeEventListener("touchmove",S.moveHandler),_?.removeEventListener("touchend",S.upHandler),C.cancelable&&(C.preventDefault(),C.stopPropagation()),b((O=C.touches[0])==null?void 0:O.clientX)}},x=pM()?{passive:!1}:!1;mg(o)?(_?.addEventListener("touchmove",S.moveHandler,x),_?.addEventListener("touchend",S.upHandler,x)):(_?.addEventListener("mousemove",w.moveHandler,x),_?.addEventListener("mouseup",w.upHandler,x)),e.setColumnSizingInfo(C=>({...C,startOffset:d,startSize:l,deltaOffset:0,deltaPercentage:0,columnSizingStart:u,isResizingColumn:i.id}))}}},createTable:t=>{t.setColumnSizing=e=>t.options.onColumnSizingChange==null?void 0:t.options.onColumnSizingChange(e),t.setColumnSizingInfo=e=>t.options.onColumnSizingInfoChange==null?void 0:t.options.onColumnSizingInfoChange(e),t.resetColumnSizing=e=>{var n;t.setColumnSizing(e?{}:(n=t.initialState.columnSizing)!=null?n:{})},t.resetHeaderSizeInfo=e=>{var n;t.setColumnSizingInfo(e?gg():(n=t.initialState.columnSizingInfo)!=null?n:gg())},t.getTotalSize=()=>{var e,n;return(e=(n=t.getHeaderGroups()[0])==null?void 0:n.headers.reduce((i,a)=>i+a.getSize(),0))!=null?e:0},t.getLeftTotalSize=()=>{var e,n;return(e=(n=t.getLeftHeaderGroups()[0])==null?void 0:n.headers.reduce((i,a)=>i+a.getSize(),0))!=null?e:0},t.getCenterTotalSize=()=>{var e,n;return(e=(n=t.getCenterHeaderGroups()[0])==null?void 0:n.headers.reduce((i,a)=>i+a.getSize(),0))!=null?e:0},t.getRightTotalSize=()=>{var e,n;return(e=(n=t.getRightHeaderGroups()[0])==null?void 0:n.headers.reduce((i,a)=>i+a.getSize(),0))!=null?e:0}}};let ju=null;function pM(){if(typeof ju=="boolean")return ju;let t=!1;try{const e={get passive(){return t=!0,!1}},n=()=>{};window.addEventListener("test",n,e),window.removeEventListener("test",n)}catch{t=!1}return ju=t,ju}function mg(t){return t.type==="touchstart"}const vM={getInitialState:t=>({columnVisibility:{},...t}),getDefaultOptions:t=>({onColumnVisibilityChange:$n("columnVisibility",t)}),createColumn:(t,e)=>{t.toggleVisibility=n=>{t.getCanHide()&&e.setColumnVisibility(i=>({...i,[t.id]:n??!t.getIsVisible()}))},t.getIsVisible=()=>{var n,i;const a=t.columns;return(n=a.length?a.some(o=>o.getIsVisible()):(i=e.getState().columnVisibility)==null?void 0:i[t.id])!=null?n:!0},t.getCanHide=()=>{var n,i;return((n=t.columnDef.enableHiding)!=null?n:!0)&&((i=e.options.enableHiding)!=null?i:!0)},t.getToggleVisibilityHandler=()=>n=>{t.toggleVisibility==null||t.toggleVisibility(n.target.checked)}},createRow:(t,e)=>{t._getAllVisibleCells=Ce(()=>[t.getAllCells(),e.getState().columnVisibility],n=>n.filter(i=>i.column.getIsVisible()),Oe(e.options,"debugRows")),t.getVisibleCells=Ce(()=>[t.getLeftVisibleCells(),t.getCenterVisibleCells(),t.getRightVisibleCells()],(n,i,a)=>[...n,...i,...a],Oe(e.options,"debugRows"))},createTable:t=>{const e=(n,i)=>Ce(()=>[i(),i().filter(a=>a.getIsVisible()).map(a=>a.id).join("_")],a=>a.filter(o=>o.getIsVisible==null?void 0:o.getIsVisible()),Oe(t.options,"debugColumns"));t.getVisibleFlatColumns=e("getVisibleFlatColumns",()=>t.getAllFlatColumns()),t.getVisibleLeafColumns=e("getVisibleLeafColumns",()=>t.getAllLeafColumns()),t.getLeftVisibleLeafColumns=e("getLeftVisibleLeafColumns",()=>t.getLeftLeafColumns()),t.getRightVisibleLeafColumns=e("getRightVisibleLeafColumns",()=>t.getRightLeafColumns()),t.getCenterVisibleLeafColumns=e("getCenterVisibleLeafColumns",()=>t.getCenterLeafColumns()),t.setColumnVisibility=n=>t.options.onColumnVisibilityChange==null?void 0:t.options.onColumnVisibilityChange(n),t.resetColumnVisibility=n=>{var i;t.setColumnVisibility(n?{}:(i=t.initialState.columnVisibility)!=null?i:{})},t.toggleAllColumnsVisible=n=>{var i;n=(i=n)!=null?i:!t.getIsAllColumnsVisible(),t.setColumnVisibility(t.getAllLeafColumns().reduce((a,o)=>({...a,[o.id]:n||!(o.getCanHide!=null&&o.getCanHide())}),{}))},t.getIsAllColumnsVisible=()=>!t.getAllLeafColumns().some(n=>!(n.getIsVisible!=null&&n.getIsVisible())),t.getIsSomeColumnsVisible=()=>t.getAllLeafColumns().some(n=>n.getIsVisible==null?void 0:n.getIsVisible()),t.getToggleAllColumnsVisibilityHandler=()=>n=>{var i;t.toggleAllColumnsVisible((i=n.target)==null?void 0:i.checked)}}};function Tl(t,e){return e?e==="center"?t.getCenterVisibleLeafColumns():e==="left"?t.getLeftVisibleLeafColumns():t.getRightVisibleLeafColumns():t.getVisibleLeafColumns()}const yM={createTable:t=>{t._getGlobalFacetedRowModel=t.options.getFacetedRowModel&&t.options.getFacetedRowModel(t,"__global__"),t.getGlobalFacetedRowModel=()=>t.options.manualFiltering||!t._getGlobalFacetedRowModel?t.getPreFilteredRowModel():t._getGlobalFacetedRowModel(),t._getGlobalFacetedUniqueValues=t.options.getFacetedUniqueValues&&t.options.getFacetedUniqueValues(t,"__global__"),t.getGlobalFacetedUniqueValues=()=>t._getGlobalFacetedUniqueValues?t._getGlobalFacetedUniqueValues():new Map,t._getGlobalFacetedMinMaxValues=t.options.getFacetedMinMaxValues&&t.options.getFacetedMinMaxValues(t,"__global__"),t.getGlobalFacetedMinMaxValues=()=>{if(t._getGlobalFacetedMinMaxValues)return t._getGlobalFacetedMinMaxValues()}}},bM={getInitialState:t=>({globalFilter:void 0,...t}),getDefaultOptions:t=>({onGlobalFilterChange:$n("globalFilter",t),globalFilterFn:"auto",getColumnCanGlobalFilter:e=>{var n;const i=(n=t.getCoreRowModel().flatRows[0])==null||(n=n._getAllCellsByColumnId()[e.id])==null?void 0:n.getValue();return typeof i=="string"||typeof i=="number"}}),createColumn:(t,e)=>{t.getCanGlobalFilter=()=>{var n,i,a,o;return((n=t.columnDef.enableGlobalFilter)!=null?n:!0)&&((i=e.options.enableGlobalFilter)!=null?i:!0)&&((a=e.options.enableFilters)!=null?a:!0)&&((o=e.options.getColumnCanGlobalFilter==null?void 0:e.options.getColumnCanGlobalFilter(t))!=null?o:!0)&&!!t.accessorFn}},createTable:t=>{t.getGlobalAutoFilterFn=()=>hs.includesString,t.getGlobalFilterFn=()=>{var e,n;const{globalFilterFn:i}=t.options;return Td(i)?i:i==="auto"?t.getGlobalAutoFilterFn():(e=(n=t.options.filterFns)==null?void 0:n[i])!=null?e:hs[i]},t.setGlobalFilter=e=>{t.options.onGlobalFilterChange==null||t.options.onGlobalFilterChange(e)},t.resetGlobalFilter=e=>{t.setGlobalFilter(e?void 0:t.initialState.globalFilter)}}},_M={getInitialState:t=>({expanded:{},...t}),getDefaultOptions:t=>({onExpandedChange:$n("expanded",t),paginateExpandedRows:!0}),createTable:t=>{let e=!1,n=!1;t._autoResetExpanded=()=>{var i,a;if(!e){t._queue(()=>{e=!0});return}if((i=(a=t.options.autoResetAll)!=null?a:t.options.autoResetExpanded)!=null?i:!t.options.manualExpanding){if(n)return;n=!0,t._queue(()=>{t.resetExpanded(),n=!1})}},t.setExpanded=i=>t.options.onExpandedChange==null?void 0:t.options.onExpandedChange(i),t.toggleAllRowsExpanded=i=>{i??!t.getIsAllRowsExpanded()?t.setExpanded(!0):t.setExpanded({})},t.resetExpanded=i=>{var a,o;t.setExpanded(i?{}:(a=(o=t.initialState)==null?void 0:o.expanded)!=null?a:{})},t.getCanSomeRowsExpand=()=>t.getPrePaginationRowModel().flatRows.some(i=>i.getCanExpand()),t.getToggleAllRowsExpandedHandler=()=>i=>{i.persist==null||i.persist(),t.toggleAllRowsExpanded()},t.getIsSomeRowsExpanded=()=>{const i=t.getState().expanded;return i===!0||Object.values(i).some(Boolean)},t.getIsAllRowsExpanded=()=>{const i=t.getState().expanded;return typeof i=="boolean"?i===!0:!(!Object.keys(i).length||t.getRowModel().flatRows.some(a=>!a.getIsExpanded()))},t.getExpandedDepth=()=>{let i=0;return(t.getState().expanded===!0?Object.keys(t.getRowModel().rowsById):Object.keys(t.getState().expanded)).forEach(o=>{const l=o.split(".");i=Math.max(i,l.length)}),i},t.getPreExpandedRowModel=()=>t.getSortedRowModel(),t.getExpandedRowModel=()=>(!t._getExpandedRowModel&&t.options.getExpandedRowModel&&(t._getExpandedRowModel=t.options.getExpandedRowModel(t)),t.options.manualExpanding||!t._getExpandedRowModel?t.getPreExpandedRowModel():t._getExpandedRowModel())},createRow:(t,e)=>{t.toggleExpanded=n=>{e.setExpanded(i=>{var a;const o=i===!0?!0:!!(i!=null&&i[t.id]);let l={};if(i===!0?Object.keys(e.getRowModel().rowsById).forEach(u=>{l[u]=!0}):l=i,n=(a=n)!=null?a:!o,!o&&n)return{...l,[t.id]:!0};if(o&&!n){const{[t.id]:u,...d}=l;return d}return i})},t.getIsExpanded=()=>{var n;const i=e.getState().expanded;return!!((n=e.options.getIsRowExpanded==null?void 0:e.options.getIsRowExpanded(t))!=null?n:i===!0||i?.[t.id])},t.getCanExpand=()=>{var n,i,a;return(n=e.options.getRowCanExpand==null?void 0:e.options.getRowCanExpand(t))!=null?n:((i=e.options.enableExpanding)!=null?i:!0)&&!!((a=t.subRows)!=null&&a.length)},t.getIsAllParentsExpanded=()=>{let n=!0,i=t;for(;n&&i.parentId;)i=e.getRow(i.parentId,!0),n=i.getIsExpanded();return n},t.getToggleExpandedHandler=()=>{const n=t.getCanExpand();return()=>{n&&t.toggleExpanded()}}}},Wg=0,Kg=10,pg=()=>({pageIndex:Wg,pageSize:Kg}),wM={getInitialState:t=>({...t,pagination:{...pg(),...t?.pagination}}),getDefaultOptions:t=>({onPaginationChange:$n("pagination",t)}),createTable:t=>{let e=!1,n=!1;t._autoResetPageIndex=()=>{var i,a;if(!e){t._queue(()=>{e=!0});return}if((i=(a=t.options.autoResetAll)!=null?a:t.options.autoResetPageIndex)!=null?i:!t.options.manualPagination){if(n)return;n=!0,t._queue(()=>{t.resetPageIndex(),n=!1})}},t.setPagination=i=>{const a=o=>Js(i,o);return t.options.onPaginationChange==null?void 0:t.options.onPaginationChange(a)},t.resetPagination=i=>{var a;t.setPagination(i?pg():(a=t.initialState.pagination)!=null?a:pg())},t.setPageIndex=i=>{t.setPagination(a=>{let o=Js(i,a.pageIndex);const l=typeof t.options.pageCount>"u"||t.options.pageCount===-1?Number.MAX_SAFE_INTEGER:t.options.pageCount-1;return o=Math.max(0,Math.min(o,l)),{...a,pageIndex:o}})},t.resetPageIndex=i=>{var a,o;t.setPageIndex(i?Wg:(a=(o=t.initialState)==null||(o=o.pagination)==null?void 0:o.pageIndex)!=null?a:Wg)},t.resetPageSize=i=>{var a,o;t.setPageSize(i?Kg:(a=(o=t.initialState)==null||(o=o.pagination)==null?void 0:o.pageSize)!=null?a:Kg)},t.setPageSize=i=>{t.setPagination(a=>{const o=Math.max(1,Js(i,a.pageSize)),l=a.pageSize*a.pageIndex,u=Math.floor(l/o);return{...a,pageIndex:u,pageSize:o}})},t.setPageCount=i=>t.setPagination(a=>{var o;let l=Js(i,(o=t.options.pageCount)!=null?o:-1);return typeof l=="number"&&(l=Math.max(-1,l)),{...a,pageCount:l}}),t.getPageOptions=Ce(()=>[t.getPageCount()],i=>{let a=[];return i&&i>0&&(a=[...new Array(i)].fill(null).map((o,l)=>l)),a},Oe(t.options,"debugTable")),t.getCanPreviousPage=()=>t.getState().pagination.pageIndex>0,t.getCanNextPage=()=>{const{pageIndex:i}=t.getState().pagination,a=t.getPageCount();return a===-1?!0:a===0?!1:i<a-1},t.previousPage=()=>t.setPageIndex(i=>i-1),t.nextPage=()=>t.setPageIndex(i=>i+1),t.firstPage=()=>t.setPageIndex(0),t.lastPage=()=>t.setPageIndex(t.getPageCount()-1),t.getPrePaginationRowModel=()=>t.getExpandedRowModel(),t.getPaginationRowModel=()=>(!t._getPaginationRowModel&&t.options.getPaginationRowModel&&(t._getPaginationRowModel=t.options.getPaginationRowModel(t)),t.options.manualPagination||!t._getPaginationRowModel?t.getPrePaginationRowModel():t._getPaginationRowModel()),t.getPageCount=()=>{var i;return(i=t.options.pageCount)!=null?i:Math.ceil(t.getRowCount()/t.getState().pagination.pageSize)},t.getRowCount=()=>{var i;return(i=t.options.rowCount)!=null?i:t.getPrePaginationRowModel().rows.length}}},vg=()=>({top:[],bottom:[]}),SM={getInitialState:t=>({rowPinning:vg(),...t}),getDefaultOptions:t=>({onRowPinningChange:$n("rowPinning",t)}),createRow:(t,e)=>{t.pin=(n,i,a)=>{const o=i?t.getLeafRows().map(d=>{let{id:f}=d;return f}):[],l=a?t.getParentRows().map(d=>{let{id:f}=d;return f}):[],u=new Set([...l,t.id,...o]);e.setRowPinning(d=>{var f,g;if(n==="bottom"){var p,b;return{top:((p=d?.top)!=null?p:[]).filter(S=>!(u!=null&&u.has(S))),bottom:[...((b=d?.bottom)!=null?b:[]).filter(S=>!(u!=null&&u.has(S))),...Array.from(u)]}}if(n==="top"){var _,w;return{top:[...((_=d?.top)!=null?_:[]).filter(S=>!(u!=null&&u.has(S))),...Array.from(u)],bottom:((w=d?.bottom)!=null?w:[]).filter(S=>!(u!=null&&u.has(S)))}}return{top:((f=d?.top)!=null?f:[]).filter(S=>!(u!=null&&u.has(S))),bottom:((g=d?.bottom)!=null?g:[]).filter(S=>!(u!=null&&u.has(S)))}})},t.getCanPin=()=>{var n;const{enableRowPinning:i,enablePinning:a}=e.options;return typeof i=="function"?i(t):(n=i??a)!=null?n:!0},t.getIsPinned=()=>{const n=[t.id],{top:i,bottom:a}=e.getState().rowPinning,o=n.some(u=>i?.includes(u)),l=n.some(u=>a?.includes(u));return o?"top":l?"bottom":!1},t.getPinnedIndex=()=>{var n,i;const a=t.getIsPinned();if(!a)return-1;const o=(n=a==="top"?e.getTopRows():e.getBottomRows())==null?void 0:n.map(l=>{let{id:u}=l;return u});return(i=o?.indexOf(t.id))!=null?i:-1}},createTable:t=>{t.setRowPinning=e=>t.options.onRowPinningChange==null?void 0:t.options.onRowPinningChange(e),t.resetRowPinning=e=>{var n,i;return t.setRowPinning(e?vg():(n=(i=t.initialState)==null?void 0:i.rowPinning)!=null?n:vg())},t.getIsSomeRowsPinned=e=>{var n;const i=t.getState().rowPinning;if(!e){var a,o;return!!((a=i.top)!=null&&a.length||(o=i.bottom)!=null&&o.length)}return!!((n=i[e])!=null&&n.length)},t._getPinnedRows=(e,n,i)=>{var a;return((a=t.options.keepPinnedRows)==null||a?(n??[]).map(l=>{const u=t.getRow(l,!0);return u.getIsAllParentsExpanded()?u:null}):(n??[]).map(l=>e.find(u=>u.id===l))).filter(Boolean).map(l=>({...l,position:i}))},t.getTopRows=Ce(()=>[t.getRowModel().rows,t.getState().rowPinning.top],(e,n)=>t._getPinnedRows(e,n,"top"),Oe(t.options,"debugRows")),t.getBottomRows=Ce(()=>[t.getRowModel().rows,t.getState().rowPinning.bottom],(e,n)=>t._getPinnedRows(e,n,"bottom"),Oe(t.options,"debugRows")),t.getCenterRows=Ce(()=>[t.getRowModel().rows,t.getState().rowPinning.top,t.getState().rowPinning.bottom],(e,n,i)=>{const a=new Set([...n??[],...i??[]]);return e.filter(o=>!a.has(o.id))},Oe(t.options,"debugRows"))}},xM={getInitialState:t=>({rowSelection:{},...t}),getDefaultOptions:t=>({onRowSelectionChange:$n("rowSelection",t),enableRowSelection:!0,enableMultiRowSelection:!0,enableSubRowSelection:!0}),createTable:t=>{t.setRowSelection=e=>t.options.onRowSelectionChange==null?void 0:t.options.onRowSelectionChange(e),t.resetRowSelection=e=>{var n;return t.setRowSelection(e?{}:(n=t.initialState.rowSelection)!=null?n:{})},t.toggleAllRowsSelected=e=>{t.setRowSelection(n=>{e=typeof e<"u"?e:!t.getIsAllRowsSelected();const i={...n},a=t.getPreGroupedRowModel().flatRows;return e?a.forEach(o=>{o.getCanSelect()&&(i[o.id]=!0)}):a.forEach(o=>{delete i[o.id]}),i})},t.toggleAllPageRowsSelected=e=>t.setRowSelection(n=>{const i=typeof e<"u"?e:!t.getIsAllPageRowsSelected(),a={...n};return t.getRowModel().rows.forEach(o=>{Xg(a,o.id,i,!0,t)}),a}),t.getPreSelectedRowModel=()=>t.getCoreRowModel(),t.getSelectedRowModel=Ce(()=>[t.getState().rowSelection,t.getCoreRowModel()],(e,n)=>Object.keys(e).length?yg(t,n):{rows:[],flatRows:[],rowsById:{}},Oe(t.options,"debugTable")),t.getFilteredSelectedRowModel=Ce(()=>[t.getState().rowSelection,t.getFilteredRowModel()],(e,n)=>Object.keys(e).length?yg(t,n):{rows:[],flatRows:[],rowsById:{}},Oe(t.options,"debugTable")),t.getGroupedSelectedRowModel=Ce(()=>[t.getState().rowSelection,t.getSortedRowModel()],(e,n)=>Object.keys(e).length?yg(t,n):{rows:[],flatRows:[],rowsById:{}},Oe(t.options,"debugTable")),t.getIsAllRowsSelected=()=>{const e=t.getFilteredRowModel().flatRows,{rowSelection:n}=t.getState();let i=!!(e.length&&Object.keys(n).length);return i&&e.some(a=>a.getCanSelect()&&!n[a.id])&&(i=!1),i},t.getIsAllPageRowsSelected=()=>{const e=t.getPaginationRowModel().flatRows.filter(a=>a.getCanSelect()),{rowSelection:n}=t.getState();let i=!!e.length;return i&&e.some(a=>!n[a.id])&&(i=!1),i},t.getIsSomeRowsSelected=()=>{var e;const n=Object.keys((e=t.getState().rowSelection)!=null?e:{}).length;return n>0&&n<t.getFilteredRowModel().flatRows.length},t.getIsSomePageRowsSelected=()=>{const e=t.getPaginationRowModel().flatRows;return t.getIsAllPageRowsSelected()?!1:e.filter(n=>n.getCanSelect()).some(n=>n.getIsSelected()||n.getIsSomeSelected())},t.getToggleAllRowsSelectedHandler=()=>e=>{t.toggleAllRowsSelected(e.target.checked)},t.getToggleAllPageRowsSelectedHandler=()=>e=>{t.toggleAllPageRowsSelected(e.target.checked)}},createRow:(t,e)=>{t.toggleSelected=(n,i)=>{const a=t.getIsSelected();e.setRowSelection(o=>{var l;if(n=typeof n<"u"?n:!a,t.getCanSelect()&&a===n)return o;const u={...o};return Xg(u,t.id,n,(l=i?.selectChildren)!=null?l:!0,e),u})},t.getIsSelected=()=>{const{rowSelection:n}=e.getState();return Am(t,n)},t.getIsSomeSelected=()=>{const{rowSelection:n}=e.getState();return Qg(t,n)==="some"},t.getIsAllSubRowsSelected=()=>{const{rowSelection:n}=e.getState();return Qg(t,n)==="all"},t.getCanSelect=()=>{var n;return typeof e.options.enableRowSelection=="function"?e.options.enableRowSelection(t):(n=e.options.enableRowSelection)!=null?n:!0},t.getCanSelectSubRows=()=>{var n;return typeof e.options.enableSubRowSelection=="function"?e.options.enableSubRowSelection(t):(n=e.options.enableSubRowSelection)!=null?n:!0},t.getCanMultiSelect=()=>{var n;return typeof e.options.enableMultiRowSelection=="function"?e.options.enableMultiRowSelection(t):(n=e.options.enableMultiRowSelection)!=null?n:!0},t.getToggleSelectedHandler=()=>{const n=t.getCanSelect();return i=>{var a;n&&t.toggleSelected((a=i.target)==null?void 0:a.checked)}}}},Xg=(t,e,n,i,a)=>{var o;const l=a.getRow(e,!0);n?(l.getCanMultiSelect()||Object.keys(t).forEach(u=>delete t[u]),l.getCanSelect()&&(t[e]=!0)):delete t[e],i&&(o=l.subRows)!=null&&o.length&&l.getCanSelectSubRows()&&l.subRows.forEach(u=>Xg(t,u.id,n,i,a))};function yg(t,e){const n=t.getState().rowSelection,i=[],a={},o=function(l,u){return l.map(d=>{var f;const g=Am(d,n);if(g&&(i.push(d),a[d.id]=d),(f=d.subRows)!=null&&f.length&&(d={...d,subRows:o(d.subRows)}),g)return d}).filter(Boolean)};return{rows:o(e.rows),flatRows:i,rowsById:a}}function Am(t,e){var n;return(n=e[t.id])!=null?n:!1}function Qg(t,e,n){var i;if(!((i=t.subRows)!=null&&i.length))return!1;let a=!0,o=!1;return t.subRows.forEach(l=>{if(!(o&&!a)&&(l.getCanSelect()&&(Am(l,e)?o=!0:a=!1),l.subRows&&l.subRows.length)){const u=Qg(l,e);u==="all"?o=!0:(u==="some"&&(o=!0),a=!1)}}),a?"all":o?"some":!1}const Zg=/([0-9]+)/gm,EM=(t,e,n)=>zS(na(t.getValue(n)).toLowerCase(),na(e.getValue(n)).toLowerCase()),CM=(t,e,n)=>zS(na(t.getValue(n)),na(e.getValue(n))),OM=(t,e,n)=>Tm(na(t.getValue(n)).toLowerCase(),na(e.getValue(n)).toLowerCase()),RM=(t,e,n)=>Tm(na(t.getValue(n)),na(e.getValue(n))),AM=(t,e,n)=>{const i=t.getValue(n),a=e.getValue(n);return i>a?1:i<a?-1:0},TM=(t,e,n)=>Tm(t.getValue(n),e.getValue(n));function Tm(t,e){return t===e?0:t>e?1:-1}function na(t){return typeof t=="number"?isNaN(t)||t===1/0||t===-1/0?"":String(t):typeof t=="string"?t:""}function zS(t,e){const n=t.split(Zg).filter(Boolean),i=e.split(Zg).filter(Boolean);for(;n.length&&i.length;){const a=n.shift(),o=i.shift(),l=parseInt(a,10),u=parseInt(o,10),d=[l,u].sort();if(isNaN(d[0])){if(a>o)return 1;if(o>a)return-1;continue}if(isNaN(d[1]))return isNaN(l)?-1:1;if(l>u)return 1;if(u>l)return-1}return n.length-i.length}const hl={alphanumeric:EM,alphanumericCaseSensitive:CM,text:OM,textCaseSensitive:RM,datetime:AM,basic:TM},DM={getInitialState:t=>({sorting:[],...t}),getDefaultColumnDef:()=>({sortingFn:"auto",sortUndefined:1}),getDefaultOptions:t=>({onSortingChange:$n("sorting",t),isMultiSortEvent:e=>e.shiftKey}),createColumn:(t,e)=>{t.getAutoSortingFn=()=>{const n=e.getFilteredRowModel().flatRows.slice(10);let i=!1;for(const a of n){const o=a?.getValue(t.id);if(Object.prototype.toString.call(o)==="[object Date]")return hl.datetime;if(typeof o=="string"&&(i=!0,o.split(Zg).length>1))return hl.alphanumeric}return i?hl.text:hl.basic},t.getAutoSortDir=()=>{const n=e.getFilteredRowModel().flatRows[0];return typeof n?.getValue(t.id)=="string"?"asc":"desc"},t.getSortingFn=()=>{var n,i;if(!t)throw new Error;return Td(t.columnDef.sortingFn)?t.columnDef.sortingFn:t.columnDef.sortingFn==="auto"?t.getAutoSortingFn():(n=(i=e.options.sortingFns)==null?void 0:i[t.columnDef.sortingFn])!=null?n:hl[t.columnDef.sortingFn]},t.toggleSorting=(n,i)=>{const a=t.getNextSortingOrder(),o=typeof n<"u"&&n!==null;e.setSorting(l=>{const u=l?.find(_=>_.id===t.id),d=l?.findIndex(_=>_.id===t.id);let f=[],g,p=o?n:a==="desc";if(l!=null&&l.length&&t.getCanMultiSort()&&i?u?g="toggle":g="add":l!=null&&l.length&&d!==l.length-1?g="replace":u?g="toggle":g="replace",g==="toggle"&&(o||a||(g="remove")),g==="add"){var b;f=[...l,{id:t.id,desc:p}],f.splice(0,f.length-((b=e.options.maxMultiSortColCount)!=null?b:Number.MAX_SAFE_INTEGER))}else g==="toggle"?f=l.map(_=>_.id===t.id?{..._,desc:p}:_):g==="remove"?f=l.filter(_=>_.id!==t.id):f=[{id:t.id,desc:p}];return f})},t.getFirstSortDir=()=>{var n,i;return((n=(i=t.columnDef.sortDescFirst)!=null?i:e.options.sortDescFirst)!=null?n:t.getAutoSortDir()==="desc")?"desc":"asc"},t.getNextSortingOrder=n=>{var i,a;const o=t.getFirstSortDir(),l=t.getIsSorted();return l?l!==o&&((i=e.options.enableSortingRemoval)==null||i)&&(!(n&&(a=e.options.enableMultiRemove)!=null)||a)?!1:l==="desc"?"asc":"desc":o},t.getCanSort=()=>{var n,i;return((n=t.columnDef.enableSorting)!=null?n:!0)&&((i=e.options.enableSorting)!=null?i:!0)&&!!t.accessorFn},t.getCanMultiSort=()=>{var n,i;return(n=(i=t.columnDef.enableMultiSort)!=null?i:e.options.enableMultiSort)!=null?n:!!t.accessorFn},t.getIsSorted=()=>{var n;const i=(n=e.getState().sorting)==null?void 0:n.find(a=>a.id===t.id);return i?i.desc?"desc":"asc":!1},t.getSortIndex=()=>{var n,i;return(n=(i=e.getState().sorting)==null?void 0:i.findIndex(a=>a.id===t.id))!=null?n:-1},t.clearSorting=()=>{e.setSorting(n=>n!=null&&n.length?n.filter(i=>i.id!==t.id):[])},t.getToggleSortingHandler=()=>{const n=t.getCanSort();return i=>{n&&(i.persist==null||i.persist(),t.toggleSorting==null||t.toggleSorting(void 0,t.getCanMultiSort()?e.options.isMultiSortEvent==null?void 0:e.options.isMultiSortEvent(i):!1))}}},createTable:t=>{t.setSorting=e=>t.options.onSortingChange==null?void 0:t.options.onSortingChange(e),t.resetSorting=e=>{var n,i;t.setSorting(e?[]:(n=(i=t.initialState)==null?void 0:i.sorting)!=null?n:[])},t.getPreSortedRowModel=()=>t.getGroupedRowModel(),t.getSortedRowModel=()=>(!t._getSortedRowModel&&t.options.getSortedRowModel&&(t._getSortedRowModel=t.options.getSortedRowModel(t)),t.options.manualSorting||!t._getSortedRowModel?t.getPreSortedRowModel():t._getSortedRowModel())}},MM=[Q1,vM,hM,fM,J1,eM,yM,bM,DM,uM,_M,wM,SM,xM,mM];function kM(t){var e,n;const i=[...MM,...(e=t._features)!=null?e:[]];let a={_features:i};const o=a._features.reduce((b,_)=>Object.assign(b,_.getDefaultOptions==null?void 0:_.getDefaultOptions(a)),{}),l=b=>a.options.mergeOptions?a.options.mergeOptions(o,b):{...o,...b};let d={...{},...(n=t.initialState)!=null?n:{}};a._features.forEach(b=>{var _;d=(_=b.getInitialState==null?void 0:b.getInitialState(d))!=null?_:d});const f=[];let g=!1;const p={_features:i,options:{...o,...t},initialState:d,_queue:b=>{f.push(b),g||(g=!0,Promise.resolve().then(()=>{for(;f.length;)f.shift()();g=!1}).catch(_=>setTimeout(()=>{throw _})))},reset:()=>{a.setState(a.initialState)},setOptions:b=>{const _=Js(b,a.options);a.options=l(_)},getState:()=>a.options.state,setState:b=>{a.options.onStateChange==null||a.options.onStateChange(b)},_getRowId:(b,_,w)=>{var S;return(S=a.options.getRowId==null?void 0:a.options.getRowId(b,_,w))!=null?S:`${w?[w.id,_].join("."):_}`},getCoreRowModel:()=>(a._getCoreRowModel||(a._getCoreRowModel=a.options.getCoreRowModel(a)),a._getCoreRowModel()),getRowModel:()=>a.getPaginationRowModel(),getRow:(b,_)=>{let w=(_?a.getPrePaginationRowModel():a.getRowModel()).rowsById[b];if(!w&&(w=a.getCoreRowModel().rowsById[b],!w))throw new Error;return w},_getDefaultColumnDef:Ce(()=>[a.options.defaultColumn],b=>{var _;return b=(_=b)!=null?_:{},{header:w=>{const S=w.header.column.columnDef;return S.accessorKey?S.accessorKey:S.accessorFn?S.id:null},cell:w=>{var S,x;return(S=(x=w.renderValue())==null||x.toString==null?void 0:x.toString())!=null?S:null},...a._features.reduce((w,S)=>Object.assign(w,S.getDefaultColumnDef==null?void 0:S.getDefaultColumnDef()),{}),...b}},Oe(t,"debugColumns")),_getColumnDefs:()=>a.options.columns,getAllColumns:Ce(()=>[a._getColumnDefs()],b=>{const _=function(w,S,x){return x===void 0&&(x=0),w.map(C=>{const O=X1(a,C,x,S),A=C;return O.columns=A.columns?_(A.columns,O,x+1):[],O})};return _(b)},Oe(t,"debugColumns")),getAllFlatColumns:Ce(()=>[a.getAllColumns()],b=>b.flatMap(_=>_.getFlatColumns()),Oe(t,"debugColumns")),_getAllFlatColumnsById:Ce(()=>[a.getAllFlatColumns()],b=>b.reduce((_,w)=>(_[w.id]=w,_),{}),Oe(t,"debugColumns")),getAllLeafColumns:Ce(()=>[a.getAllColumns(),a._getOrderColumnsFn()],(b,_)=>{let w=b.flatMap(S=>S.getLeafColumns());return _(w)},Oe(t,"debugColumns")),getColumn:b=>a._getAllFlatColumnsById()[b]};Object.assign(a,p);for(let b=0;b<a._features.length;b++){const _=a._features[b];_==null||_.createTable==null||_.createTable(a)}return a}function NM(){return t=>Ce(()=>[t.options.data],e=>{const n={rows:[],flatRows:[],rowsById:{}},i=function(a,o,l){o===void 0&&(o=0);const u=[];for(let f=0;f<a.length;f++){const g=Z1(t,t._getRowId(a[f],f,l),a[f],f,o,void 0,l?.id);if(n.flatRows.push(g),n.rowsById[g.id]=g,u.push(g),t.options.getSubRows){var d;g.originalSubRows=t.options.getSubRows(a[f],f),(d=g.originalSubRows)!=null&&d.length&&(g.subRows=i(g.originalSubRows,o+1,g))}}return u};return n.rows=i(e),n},Oe(t.options,"debugTable","getRowModel",()=>t._autoResetPageIndex()))}function jM(){return t=>Ce(()=>[t.getState().sorting,t.getPreSortedRowModel()],(e,n)=>{if(!n.rows.length||!(e!=null&&e.length))return n;const i=t.getState().sorting,a=[],o=i.filter(d=>{var f;return(f=t.getColumn(d.id))==null?void 0:f.getCanSort()}),l={};o.forEach(d=>{const f=t.getColumn(d.id);f&&(l[d.id]={sortUndefined:f.columnDef.sortUndefined,invertSorting:f.columnDef.invertSorting,sortingFn:f.getSortingFn()})});const u=d=>{const f=d.map(g=>({...g}));return f.sort((g,p)=>{for(let _=0;_<o.length;_+=1){var b;const w=o[_],S=l[w.id],x=S.sortUndefined,C=(b=w?.desc)!=null?b:!1;let O=0;if(x){const A=g.getValue(w.id),M=p.getValue(w.id),D=A===void 0,V=M===void 0;if(D||V){if(x==="first")return D?-1:1;if(x==="last")return D?1:-1;O=D&&V?0:D?x:-x}}if(O===0&&(O=S.sortingFn(g,p,w.id)),O!==0)return C&&(O*=-1),S.invertSorting&&(O*=-1),O}return g.index-p.index}),f.forEach(g=>{var p;a.push(g),(p=g.subRows)!=null&&p.length&&(g.subRows=u(g.subRows))}),f};return{rows:u(n.rows),flatRows:a,rowsById:n.rowsById}},Oe(t.options,"debugTable","getSortedRowModel",()=>t._autoResetPageIndex()))}/**
   * react-table
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function Q_(t,e){return t?LM(t)?R.createElement(t,e):t:null}function LM(t){return PM(t)||typeof t=="function"||zM(t)}function PM(t){return typeof t=="function"&&(()=>{const e=Object.getPrototypeOf(t);return e.prototype&&e.prototype.isReactComponent})()}function zM(t){return typeof t=="object"&&typeof t.$$typeof=="symbol"&&["react.memo","react.forward_ref"].includes(t.$$typeof.description)}function IM(t){const e={state:{},onStateChange:()=>{},renderFallbackValue:null,...t},[n]=R.useState(()=>({current:kM(e)})),[i,a]=R.useState(()=>n.current.initialState);return n.current.setOptions(o=>({...o,...t,state:{...i,...t.state},onStateChange:l=>{a(l),t.onStateChange==null||t.onStateChange(l)}})),n.current}function Dm({data:t,columns:e,onSaveRow:n,onDeleteRow:i}){const[a,o]=R.useState(null),[l,u]=R.useState({}),d=R.useMemo(()=>{const p=_=>{const w={};Object.keys(l).forEach(O=>{l[O]!==void 0&&l[O]!==""&&(w[O]=l[O])});const S={..._.original};["machines","progress","n_boxes","time_remaining"].forEach(O=>{delete S[O]});const C={...S,...w};n(C),o(null),u({})},b={id:"actions",header:"Azioni",cell:({row:_})=>{const w=_.id===a;return y.jsx("div",{className:"action-buttons",children:w?y.jsxs(y.Fragment,{children:[y.jsx("button",{onClick:()=>p(_),className:"nav-btn today",children:"Salva"}),y.jsx("button",{onClick:()=>o(null),className:"nav-btn today",children:"Annulla"})]}):y.jsxs(y.Fragment,{children:[y.jsx("button",{onClick:()=>o(_.id),className:"nav-btn today",children:"Modifica"}),y.jsx("button",{onClick:()=>i(_.original),className:"nav-btn today",children:"Elimina"})]})})}};return[...e,b]},[e,a,l,n,i]),f=R.useMemo(()=>{if(t&&t.length>0){const p=t.map(S=>S.id);p.filter((S,x)=>p.indexOf(S)!==x).length>0;const _=new Set,w=[];t.forEach((S,x)=>{_.has(S.id)?w.push({id:S.id,index:x,item:S}):_.add(S.id)})}return t},[t]),g=IM({data:f,columns:d,getCoreRowModel:NM(),getSortedRowModel:jM(),meta:{editingRowId:a,setEditedData:u}});return y.jsx("div",{className:"table-container",children:y.jsxs("table",{className:"modern-table",children:[y.jsx("thead",{children:g.getHeaderGroups().map(p=>y.jsx("tr",{children:p.headers.map((b,_)=>{const w=`${p.id}_${b.id}_${_}`;return y.jsxs("th",{onClick:b.column.getToggleSortingHandler(),children:[Q_(b.column.columnDef.header,b.getContext()),{asc:" 🔼",desc:" 🔽"}[b.column.getIsSorted()]??null]},w)})},p.id))}),y.jsx("tbody",{children:g.getRowModel().rows.map(p=>{const b=p.original.id||p.id;return y.jsx("tr",{children:p.getVisibleCells().map((_,w)=>{const S=`${b}_${_.column.id}_${w}`;return y.jsx("td",{children:Q_(_.column.columnDef.cell,_.getContext())},S)})},b)})})]})})}function Ve({row:t,column:e,table:n,value:i,isEditing:a,onChange:o,type:l="auto",options:u=[],parseValue:d=null,min:f=null,max:g=null,step:p=null}){const b=a??n?.options?.meta?.editingRowId===t?.id,_=i??t?.original?.[e?.id],w=l==="auto"?x(e?.id):l,S=A=>{const M=A.target.value;let D=M;d?D=d(M):w==="number"?D=parseFloat(M)||0:w==="integer"&&(D=parseInt(M)||0),n?.options?.meta?.setEditedData?n.options.meta.setEditedData(V=>({...V,[e?.id]:D})):o&&o(A)};function x(A){if(!A)return"text";if(A==="status")return"select";if(["quantity","quantity_completed","quantity_per_box","numero_persone","bag_height","bag_width","bag_step","min_web_width","max_web_width","min_bag_height","max_bag_height"].includes(A))return"integer";const D=["setup_time_standard","changeover_color","changeover_material","t_setup_stampa","t_setup_conf"],V=["costo_h_stampa","costo_h_conf"],F=["standard_speed","v_stampa","v_conf"];return D.includes(A)||V.includes(A)||F.includes(A)?"number":"text"}function C(A){return A==="status"?[{value:ni.ACTIVE,label:ni.ACTIVE},{value:ni.INACTIVE,label:ni.INACTIVE},{value:ni.MAINTENANCE,label:ni.MAINTENANCE}]:A==="department"?[{value:It.PRINTING,label:It.PRINTING},{value:It.PACKAGING,label:It.PACKAGING}]:A==="work_center"?[{value:Ae.ZANICA,label:Ae.ZANICA},{value:Ae.BUSTO_GAROLFO,label:Ae.BUSTO_GAROLFO}]:A==="product_type"?[{value:qr.CREMA,label:"Crema"},{value:qr.LIQUIDO,label:"Liquido"},{value:qr.POLVERI,label:"Polveri"}]:A==="seal_sides"?[{value:Bl.THREE,label:"3 sides"},{value:Bl.FOUR,label:"4 sides"}]:u}if(b)switch(w){case"select":{const A=C(e?.id);return y.jsx("select",{defaultValue:_,onChange:S,style:{width:"100%",padding:"4px",border:"1px solid #ccc",borderRadius:"4px"},children:A.map(M=>y.jsx("option",{value:M.value,children:M.label},M.value))})}case"number":{const A=ll.DECIMAL_PRECISION.TWO_DECIMAL.includes(e?.id)?ll.FIELD_STEPS.COST:(ll.DECIMAL_PRECISION.ONE_DECIMAL.includes(e?.id),ll.FIELD_STEPS.TIME);return y.jsx("input",{type:"number",defaultValue:_,onChange:S,min:f,max:g,step:p||A,style:{width:"100%",padding:"4px",border:"1px solid #ccc",borderRadius:"4px"}})}case"integer":return y.jsx("input",{type:"number",defaultValue:_,onChange:S,min:f||0,max:g,step:1,style:{width:"100%",padding:"4px",border:"1px solid #ccc",borderRadius:"4px"}});default:return y.jsx("input",{type:"text",defaultValue:_,onChange:S,style:{width:"100%",padding:"4px",border:"1px solid #ccc",borderRadius:"4px"}})}const O=_??"";return w==="number"||w==="integer"?y.jsx("span",{children:O}):y.jsx("span",{children:O})}function _s({title:t,children:e}){return y.jsx("div",{className:"sticky-header",children:y.jsxs("div",{className:"sticky-header-content",children:[y.jsx("div",{className:"sticky-header-text",children:y.jsx("h2",{className:"sticky-header-title",children:t})}),e]})})}const IS=()=>{const t=R.useCallback((d,f,g)=>{if(!d||!f||!g)return null;try{const{department:p}=d;if(p==="STAMPA"){const b=f/(d.v_stampa||1),_=d.t_setup_stampa||0,w=b+_,S=w*(d.costo_h_stampa||0);return{totals:{duration:w,cost:S},breakdown:{print:{time:b,cost:b*(d.costo_h_stampa||0)},setup:{time:_,cost:_*(d.costo_h_stampa||0)}}}}else if(p==="CONFEZIONAMENTO"){const b=f/(d.v_conf||1),_=d.t_setup_conf||0,w=b+_,S=w*(d.costo_h_conf||0);return{totals:{duration:w,cost:S},breakdown:{package:{time:b,cost:b*(d.costo_h_conf||0)},setup:{time:_,cost:_*(d.costo_h_conf||0)}}}}return null}catch{return null}},[]),e=R.useCallback(d=>d&&(d.startsWith("P05")||d.startsWith("ISP05"))?"BUSTO_GAROLFO":"ZANICA",[]),n=R.useCallback(d=>d&&d.startsWith("P0")?"CONFEZIONAMENTO":"STAMPA",[]),i=R.useCallback(d=>({STAMPA:["DIGITAL_PRINT","FLEXO_PRINT","ROTOGRAVURE"],CONFEZIONAMENTO:["DOYPACK","PLURI_PIU","MONO_PIU","CONFEZIONAMENTO_TRADIZIONALE","CONFEZIONAMENTO_POLVERI"]})[d]||[],[]),a=R.useCallback((d,f)=>{const p={DIGITAL_PRINT:"DIGI",FLEXO_PRINT:"FLEX",ROTOGRAVURE:"ROTO",DOYPACK:"DOYP",PLURI_PIU:"PLUR",MONO_PIU:"MONO",CONFEZIONAMENTO_TRADIZIONALE:"CONFTRAD",CONFEZIONAMENTO_POLVERI:"CONFPOL"}[d]||"MACH",b=f==="BUSTO_GAROLFO"?"BGF":"ZAN",_=Date.now().toString(36);return`${p}_${b}_${_}`},[]),o=R.useCallback((d,f)=>!(f<0||f>d),[]),l=R.useCallback((d,f)=>!d||d===0?0:Math.round(f*100/d),[]),u=R.useCallback((d,f)=>!d||d===0?0:!f||f===0?d:Math.round(d*(1-f/100)*100)/100,[]);return{calculateProductionMetrics:t,autoDetermineWorkCenter:e,autoDetermineDepartment:n,getValidMachineTypes:i,generateMachineId:a,validateQuantityCompleted:o,calculateCompletionRate:l,calculateTimeRemaining:u}},rd={PHASE:{STAMPA:{v_stampa:{min:0,message:"Printing speed must be greater than 0"},t_setup_stampa:{min:0,message:"Setup time cannot be negative"},costo_h_stampa:{min:0,message:"Hourly cost cannot be negative"}},CONFEZIONAMENTO:{v_conf:{min:0,message:"Packaging speed must be greater than 0"},t_setup_conf:{min:0,message:"Setup time cannot be negative"},costo_h_conf:{min:0,message:"Hourly cost cannot be negative"}}},MACHINE:{min_web_width:{min:0,message:"Minimum web width cannot be negative"},max_web_width:{min:0,message:"Maximum web width cannot be negative"},min_bag_height:{min:0,message:"Minimum bag height cannot be negative"},max_bag_height:{min:0,message:"Maximum bag height cannot be negative"},standard_speed:{min:0,message:"Standard speed cannot be negative"},setup_time_standard:{min:0,message:"Setup time cannot be negative"},changeover_color:{min:0,message:"Color changeover time cannot be negative"},changeover_material:{min:0,message:"Material changeover time cannot be negative"}},ORDER:{bag_height:{min:0,message:"Bag height must be greater than 0"},bag_width:{min:0,message:"Bag width must be greater than 0"},bag_step:{min:0,message:"Bag step must be greater than 0"},quantity:{min:0,message:"Quantity must be greater than 0"},quantity_per_box:{min:0,message:"Quantity per box cannot be negative"},quantity_completed:{min:0,message:"Quantity completed cannot be negative"}}},FS=(t,e)=>{const n={};return e.forEach(i=>{if(!km(t[i])){const a=i.replace(/_/g," ").replace(/\b\w/g,o=>o.toUpperCase());n[i]=`${a} is required`}}),n},Mm=(t,e)=>{const n={};return Object.entries(e).forEach(([i,a])=>{t[i]!==void 0&&t[i]!==null&&t[i]!==""&&(BS(t[i],a.min,a.max)||(n[i]=a.message))}),n},US=(t,e,n="PHASE")=>{const i=rd[n]?.[e];return i?Mm(t,i):{}},HS=(t,e)=>{const n={};return e.forEach(i=>{const{condition:a,errorField:o,message:l}=i;a(t)&&(n[o]=l)}),n},FM=(t,e)=>{const n={};return e.required&&Object.assign(n,FS(t,e.required)),e.numeric&&Object.assign(n,Mm(t,e.numeric)),e.department&&t.department&&Object.assign(n,US(t,t.department,e.departmentSchema)),e.logical&&Object.assign(n,HS(t,e.logical)),n},UM={PHASE:{required:["name","department","work_center"],numeric:{numero_persone:{min:1,message:"Number of people must be at least 1"}},departmentSchema:"PHASE",logical:[{condition:t=>t.bag_width&&t.bag_step&&parseFloat(t.bag_width)<parseFloat(t.bag_step),errorField:"bag_width",message:"Bag width cannot be less than bag step"}]},MACHINE:{required:["machine_name","machine_type","department","work_center"],numeric:rd.MACHINE,logical:[{condition:t=>t.min_web_width&&t.max_web_width&&parseFloat(t.min_web_width)>parseFloat(t.max_web_width),errorField:"min_web_width",message:"Minimum web width cannot exceed maximum web width"},{condition:t=>t.min_bag_height&&t.max_bag_height&&parseFloat(t.min_bag_height)>parseFloat(t.max_bag_height),errorField:"min_bag_height",message:"Minimum bag height cannot exceed maximum bag height"}]},ORDER:{required:["odp_number","article_code","production_lot","bag_height","bag_width","bag_step","product_type","quantity","delivery_date"],numeric:rd.ORDER,logical:[{condition:t=>t.bag_width&&t.bag_step&&parseFloat(t.bag_width)<parseFloat(t.bag_step),errorField:"bag_width",message:"Bag width cannot be less than bag step"},{condition:t=>t.quantity&&t.quantity_completed&&parseFloat(t.quantity_completed)>parseFloat(t.quantity),errorField:"quantity_completed",message:"Quantity completed cannot exceed total quantity"},{condition:t=>t.delivery_date&&t.scheduled_start_time&&new Date(t.scheduled_start_time)>new Date(t.delivery_date),errorField:"scheduled_start_time",message:"Scheduled start cannot be after delivery date"}]},OFF_TIME:{required:["startDate","startTime","endDate","endTime"],logical:[{condition:t=>t.startDate&&t.endDate&&new Date(t.startDate)>new Date(t.endDate),errorField:"endDate",message:"End date cannot be before start date"},{condition:t=>t.startDate&&t.endDate&&t.startDate===t.endDate&&t.startTime&&t.endTime&&t.startTime>=t.endTime,errorField:"endTime",message:"End time must be after start time when dates are the same"}]}},km=t=>typeof t=="string"?t.trim().length>0:Array.isArray(t)?t.length>0:typeof t=="object"&&t!==null?Object.keys(t).length>0:!!t,HM=t=>!t||typeof t!="string"?!1:/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t),BM=t=>!t||typeof t!="string"?!1:/^[+]?[1-9][\d]{0,15}$/.test(t.replace(/\s/g,"")),VM=t=>{if(!t)return!1;const e=new Date(t);return e instanceof Date&&!isNaN(e)},BS=(t,e=null,n=null)=>{const i=typeof t=="string"?parseFloat(t):t;return!(typeof i!="number"||isNaN(i)||e!==null&&i<e||n!==null&&i>n)},$M=(t,e=null,n=null)=>{const i=typeof t=="string"?parseInt(t,10):t;return!(!Number.isInteger(i)||e!==null&&i<e||n!==null&&i>n)},qM=t=>{if(!t||typeof t!="string")return!1;try{return new URL(t),!0}catch{return!1}},VS=(t,e)=>!t||!e?!1:typeof e=="string"?new RegExp(e).test(t):e instanceof RegExp?e.test(t):!1,$S=(t,e)=>!t||typeof t!="string"?!1:t.length>=e,qS=(t,e)=>!t||typeof t!="string"?!1:t.length<=e,GS=(t,e,n)=>typeof t!="number"||isNaN(t)?!1:t>=e&&t<=n,GM=t=>!t||typeof t!="string"?!1:/^[a-zA-Z0-9\s\-_]{2,100}$/.test(t.trim()),YM=t=>!t||typeof t!="string"?!1:/^[a-zA-Z0-9]{3,20}$/.test(t.trim()),WM=t=>!t||typeof t!="string"?!1:/^[a-zA-Z0-9-]{3,50}$/.test(t.trim()),KM=t=>["ZANICA","BUSTO_GAROLFO"].includes(t),XM=t=>["STAMPA","CONFEZIONAMENTO"].includes(t),QM=t=>["ACTIVE","INACTIVE","MAINTENANCE"].includes(t),ZM=t=>["crema","liquido","polveri"].includes(t),JM=t=>["3","4"].includes(t),ek=(t,e)=>{const n={};return Object.keys(e).forEach(i=>{const a=t[i],o=e[i];if(o.required&&!km(a))n[i]=o.required;else if(a&&o.pattern&&!VS(a,o.pattern))n[i]=o.pattern;else if(a&&o.minLength&&!$S(a,o.minLength))n[i]=o.minLength;else if(a&&o.maxLength&&!qS(a,o.maxLength))n[i]=o.maxLength;else if(a&&o.min!==void 0&&!GS(a,o.min,o.max||1/0))n[i]=o.min;else if(a&&o.custom){const l=o.custom(a,t);l&&(n[i]=l)}}),n},gs={validateRequiredFields:FS,validateNumericFields:Mm,validateDepartmentFields:US,validateLogicalRelations:HS,validateAll:FM,VALIDATION_CONFIGS:UM,VALIDATION_SCHEMAS:rd,isNotEmpty:km,isValidEmail:HM,isValidPhone:BM,isValidDate:VM,isValidNumber:BS,isValidInteger:$M,isValidUrl:qM,matchesPattern:VS,hasMinLength:$S,hasMaxLength:qS,isInRange:GS,isValidMachineName:GM,isValidOdpNumber:YM,isValidArticleCode:WM,isValidWorkCenter:KM,isValidDepartment:XM,isValidMachineStatus:QM,isValidProductType:ZM,isValidSealSides:JM,validateFormData:ek},tk=()=>{const t=R.useCallback(a=>{const o=gs.validateAll(a,gs.VALIDATION_CONFIGS.MACHINE);return Object.values(o)},[]),e=R.useCallback((a,o)=>{const l=[];return o.some(d=>d.scheduled_machine_id===a)&&l.push("Cannot delete machine with scheduled tasks. Please unschedule all tasks first."),l},[]),n=R.useCallback(a=>({name:a?.machine_name||"Unknown Machine",type:a?.machine_type||"Unknown Type",department:a?.department||"Unknown Department",workCenter:a?.work_center||"Unknown Work Center",status:a?.status||"UNKNOWN",isActive:a?.status==="ACTIVE"}),[]),i=R.useCallback((a,o)=>{if(a.status!=="ACTIVE")return!1;const l=a.active_shifts||[];if(l.length===0)return!1;const u=o.getHours();return l.some(f=>{switch(f){case"T1":return u>=6&&u<14;case"T2":return u>=14&&u<22;case"T3":return u>=22||u<6;default:return!1}})},[]);return{validateMachine:t,validateMachineDeletion:e,getMachineDisplayInfo:n,isMachineAvailable:i}},nk=()=>{const t=R.useCallback(a=>{const o=gs.validateAll(a,gs.VALIDATION_CONFIGS.ORDER);return Object.values(o)},[]),e=R.useCallback((a,o)=>{const l=[];if(!a)return l.push("Please select a production phase"),l;o.department&&a.department!==o.department&&l.push(`Selected phase is for ${a.department} department, but order is for ${o.department}`),o.work_center&&a.work_center!==o.work_center&&l.push(`Selected phase is for ${a.work_center} work center, but order is for ${o.work_center}`);const u=gs.validateDepartmentFields(a,a.department,"PHASE");return Object.values(u).forEach(d=>l.push(d)),l},[]),n=R.useCallback((a,o,l,u)=>{const d=[];return a?o?!l||!u?(d.push("Start and end times are required"),d):(o.status!=="ACTIVE"&&d.push(`Machine ${o.machine_name} is not active`),a.scheduled_machine_id&&a.scheduled_machine_id!==o.id&&d.push("Order is already scheduled on a different machine"),a.fase||d.push("Order must have a production phase selected"),(!a.quantity||a.quantity<=0)&&d.push("Order must have a valid quantity"),(!a.duration||a.duration<=0)&&d.push("Order must have calculated duration"),d):(d.push("Machine is required"),d):(d.push("Order is required"),d)},[]),i=R.useCallback(a=>{const o=[];return a?(a.quantity_completed>0&&o.push("Cannot delete order that has started production"),a.scheduled_machine_id&&o.push("Cannot delete scheduled order. Please unschedule first."),o):(o.push("Order is required"),o)},[]);return{validateOrder:t,validatePhaseSelection:e,validateOrderScheduling:n,validateOrderDeletion:i}},ik=()=>({validatePhase:n=>{const i=gs.validateAll(n,gs.VALIDATION_CONFIGS.PHASE);return Object.values(i)},validateForm:n=>gs.validateAll(n,gs.VALIDATION_CONFIGS.PHASE)}),ws=(t="")=>{const{showAlert:e,showConfirmDialog:n}=Re(),i=R.useCallback((b,_={})=>{const{showUserAlert:w=!0,alertType:S="error",logError:x=!0,context:C=t,fallbackMessage:O="An unexpected error occurred"}=_,A=Vn(b,C);if(x&&mi(A,C),w){const M=A.userMessage||O;e(M,S)}return A},[t,e]),a=R.useCallback(async(b,_={})=>{const{showUserAlert:w=!0,alertType:S="error",context:x=t,fallbackMessage:C="Operation failed",retry:O=!1,maxRetries:A=3}=_;try{return O?await z_(b,A):await b()}catch(M){throw i(M,{showUserAlert:w,alertType:S,context:x,fallbackMessage:C})}},[t,i]),o=R.useCallback((b,_)=>{const w=i(b,{showUserAlert:!1});w.code===Ue.VALIDATION_ERROR?w.fieldErrors?Object.entries(w.fieldErrors).forEach(([S,x])=>{_(S,{type:"server",message:x})}):_("root",{type:"server",message:w.userMessage}):_("root",{type:"server",message:w.userMessage})},[i]),l=R.useCallback((b,_,w)=>{const S=i(b,{context:`${_} ${w}`,fallbackMessage:`Failed to ${_} ${w}`});return S.code===Ue.VALIDATION_ERROR?e(`Please check the ${w} information and try again.`,"error"):S.code===Ue.NOT_FOUND_ERROR?e(`${w} not found. It may have been deleted.`,"error"):S.code===Ue.AUTHORIZATION_ERROR&&e(`You don't have permission to ${_} ${w}.`,"error"),S},[i,e]),u=R.useCallback((b,_)=>{const w=i(b,{context:"Network Operation",fallbackMessage:"Network error occurred"});return w.code===Ue.NETWORK_ERROR&&_&&n("Network Error","Your connection seems to be unstable. Would you like to retry?",_,"warning"),w},[i,n]),d=R.useCallback(b=>{const _=i(b,{context:"Authentication",fallbackMessage:"Authentication error occurred"});return _.code===Ue.AUTHENTICATION_ERROR&&e("Please log in again to continue.","warning"),_},[i,e]),f=R.useCallback((b,_="")=>Gg(b,_||t),[t]),g=R.useCallback(b=>Vn(b,t).severity||"medium",[t]),p=R.useMemo(()=>Ue,[]);return{handleError:i,handleAsync:a,handleFormError:o,handleCrudError:l,handleNetworkError:u,handleAuthError:d,createSafeAsync:f,getErrorSeverity:g,errorTypes:p,withRetry:z_,safeAsync:Gg}},sk=(t,e)=>{const{phases:n}=ii(),[i,a]=R.useState(""),[o,l]=R.useState(!1),[u,d]=R.useState(null),[f,g]=R.useState({}),p=R.useRef(null),b=R.useMemo(()=>!n||n.length===0?[]:t||e?n.filter(A=>(!t||A.department===t)&&(!e||A.work_center===e)).filter(A=>A.name.toLowerCase().includes(i.toLowerCase())):[],[i,t,e,n]);R.useEffect(()=>()=>{p.current&&clearTimeout(p.current)},[]);const _=R.useCallback((O,A)=>{g(M=>({...M,[O]:A}))},[]),w=R.useCallback((O,A,M)=>{A("fase",O.id),d(O),a(O.name),l(!1),M("fase"),g({v_stampa:O.v_stampa||"",t_setup_stampa:O.t_setup_stampa||"",costo_h_stampa:O.costo_h_stampa||"",v_conf:O.v_conf||"",t_setup_conf:O.t_setup_conf||"",costo_h_conf:O.costo_h_conf||""})},[]),S=R.useCallback(()=>{a(""),d(null),g({})},[]),x=R.useCallback(()=>{p.current&&clearTimeout(p.current),p.current=setTimeout(()=>l(!1),150)},[]);return R.useMemo(()=>({phaseSearch:i,setPhaseSearch:a,isDropdownVisible:o,setIsDropdownVisible:l,selectedPhase:u,setSelectedPhase:d,filteredPhases:b,editablePhaseParams:f,setEditablePhaseParams:g,handlePhaseParamChange:_,handlePhaseSelect:w,resetPhaseData:S,handleBlur:x,blurTimeoutRef:p}),[i,o,u,b,f,g,_,w,S,x])};function ak(){const{machines:t,updateMachine:e,removeMachine:n}=Yt(),{selectedWorkCenter:i,isLoading:a,isInitialized:o,showAlert:l,showConfirmDialog:u}=Re(),{init:d,cleanup:f}=Ui(),g=R.useMemo(()=>i?i===Ae.BOTH?t:t.filter(x=>x.work_center===i):[],[t,i]),{validateMachine:p}=tk(),{handleAsync:b}=ws("MachineryListPage");R.useEffect(()=>(o||d(),()=>{f()}),[d,o,f]);const _=R.useMemo(()=>[{header:"ID Macchina",accessorKey:"id"},{header:"Tipo Macchina",accessorKey:"machine_type"},{header:"Nome Macchina",accessorKey:"machine_name",cell:Ve},{header:"Centro di Lavoro",accessorKey:"work_center"},{header:"Reparto",accessorKey:"department"},{header:"Stato",accessorKey:"status",cell:Ve},{header:"Larghezza Min (mm)",accessorKey:"min_web_width",cell:Ve},{header:"Larghezza Max (mm)",accessorKey:"max_web_width",cell:Ve},{header:"Altezza Min (mm)",accessorKey:"min_bag_height",cell:Ve},{header:"Altezza Max (mm)",accessorKey:"max_bag_height",cell:Ve},{header:"Velocità Std",accessorKey:"standard_speed",cell:Ve},{header:"Setup (h)",accessorKey:"setup_time_standard",cell:Ve},{header:"Cambio Colore (h)",accessorKey:"changeover_color",cell:Ve},{header:"Cambio Materiale (h)",accessorKey:"changeover_material",cell:Ve},{header:"Turni Attivi",accessorKey:"active_shifts",cell:x=>Array.isArray(x.getValue())?x.getValue().join(", "):""},{header:"Creato il",accessorKey:"created_at",cell:x=>new Date(x.getValue()).toLocaleDateString()},{header:"Aggiornato il",accessorKey:"updated_at",cell:x=>new Date(x.getValue()).toLocaleDateString()},{header:"Calendario",accessorKey:"id",cell:x=>y.jsx(xn,{to:`/machinery/${x.getValue()}/calendar`,className:"nav-btn today",style:{textDecoration:"none"},children:"Visualizza Calendario"})}],[]),w=async x=>{const C=p(x);if(C.length>0){l(`Errori di validazione:
${C.join(`
`)}`,"error");return}await b(()=>e(x.id,x),{context:"Aggiorna Macchina",fallbackMessage:"Aggiornamento macchina fallito"})},S=async x=>{u("Elimina Macchina",`Sei sicuro di voler eliminare "${x.machine_name}"? Questa azione non può essere annullata.`,async()=>{await b(()=>n(x.id),{context:"Elimina Macchina",fallbackMessage:"Eliminazione macchina fallita"})},"danger")};return a?y.jsx("div",{children:"Caricamento dati macchine..."}):i?y.jsxs("div",{className:"content-section",children:[y.jsx(_s,{title:"Catalogo Macchine"}),y.jsx(Dm,{columns:_,data:g,onSaveRow:w,onDeleteRow:S})]}):y.jsx("div",{className:"error",children:"Seleziona un centro di lavoro per visualizzare i dati delle macchine."})}var rc=t=>t.type==="checkbox",Pa=t=>t instanceof Date,Sn=t=>t==null;const YS=t=>typeof t=="object";var Nt=t=>!Sn(t)&&!Array.isArray(t)&&YS(t)&&!Pa(t),rk=t=>Nt(t)&&t.target?rc(t.target)?t.target.checked:t.target.value:t,ok=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,lk=(t,e)=>t.has(ok(e)),ck=t=>{const e=t.constructor&&t.constructor.prototype;return Nt(e)&&e.hasOwnProperty("isPrototypeOf")},Nm=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function en(t){let e;const n=Array.isArray(t),i=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(!(Nm&&(t instanceof Blob||i))&&(n||Nt(t)))if(e=n?[]:Object.create(Object.getPrototypeOf(t)),!n&&!ck(t))e=t;else for(const a in t)t.hasOwnProperty(a)&&(e[a]=en(t[a]));else return t;return e}var Dd=t=>/^\w*$/.test(t),zt=t=>t===void 0,jm=t=>Array.isArray(t)?t.filter(Boolean):[],Lm=t=>jm(t.replace(/["|']|\]/g,"").split(/\.|\[/)),ye=(t,e,n)=>{if(!e||!Nt(t))return n;const i=(Dd(e)?[e]:Lm(e)).reduce((a,o)=>Sn(a)?a:a[o],t);return zt(i)||i===t?zt(t[e])?n:t[e]:i},Ii=t=>typeof t=="boolean",bt=(t,e,n)=>{let i=-1;const a=Dd(e)?[e]:Lm(e),o=a.length,l=o-1;for(;++i<o;){const u=a[i];let d=n;if(i!==l){const f=t[u];d=Nt(f)||Array.isArray(f)?f:isNaN(+a[i+1])?{}:[]}if(u==="__proto__"||u==="constructor"||u==="prototype")return;t[u]=d,t=t[u]}};const Z_={BLUR:"blur",FOCUS_OUT:"focusout"},vi={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},rs={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},uk=Me.createContext(null);uk.displayName="HookFormContext";var dk=(t,e,n,i=!0)=>{const a={defaultValues:e._defaultValues};for(const o in t)Object.defineProperty(a,o,{get:()=>{const l=o;return e._proxyFormState[l]!==vi.all&&(e._proxyFormState[l]=!i||vi.all),t[l]}});return a};const hk=typeof window<"u"?Me.useLayoutEffect:Me.useEffect;var Fi=t=>typeof t=="string",fk=(t,e,n,i,a)=>Fi(t)?(i&&e.watch.add(t),ye(n,t,a)):Array.isArray(t)?t.map(o=>(i&&e.watch.add(o),ye(n,o))):(i&&(e.watchAll=!0),n),Jg=t=>Sn(t)||!YS(t);function Qs(t,e,n=new WeakSet){if(Jg(t)||Jg(e))return t===e;if(Pa(t)&&Pa(e))return t.getTime()===e.getTime();const i=Object.keys(t),a=Object.keys(e);if(i.length!==a.length)return!1;if(n.has(t)||n.has(e))return!0;n.add(t),n.add(e);for(const o of i){const l=t[o];if(!a.includes(o))return!1;if(o!=="ref"){const u=e[o];if(Pa(l)&&Pa(u)||Nt(l)&&Nt(u)||Array.isArray(l)&&Array.isArray(u)?!Qs(l,u,n):l!==u)return!1}}return!0}var gk=(t,e,n,i,a)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[i]:a||!0}}:{},Dl=t=>Array.isArray(t)?t:[t],J_=()=>{let t=[];return{get observers(){return t},next:a=>{for(const o of t)o.next&&o.next(a)},subscribe:a=>(t.push(a),{unsubscribe:()=>{t=t.filter(o=>o!==a)}}),unsubscribe:()=>{t=[]}}},Mn=t=>Nt(t)&&!Object.keys(t).length,Pm=t=>t.type==="file",yi=t=>typeof t=="function",od=t=>{if(!Nm)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},WS=t=>t.type==="select-multiple",zm=t=>t.type==="radio",mk=t=>zm(t)||rc(t),bg=t=>od(t)&&t.isConnected;function pk(t,e){const n=e.slice(0,-1).length;let i=0;for(;i<n;)t=zt(t)?i++:t[e[i++]];return t}function vk(t){for(const e in t)if(t.hasOwnProperty(e)&&!zt(t[e]))return!1;return!0}function Pt(t,e){const n=Array.isArray(e)?e:Dd(e)?[e]:Lm(e),i=n.length===1?t:pk(t,n),a=n.length-1,o=n[a];return i&&delete i[o],a!==0&&(Nt(i)&&Mn(i)||Array.isArray(i)&&vk(i))&&Pt(t,n.slice(0,-1)),t}var KS=t=>{for(const e in t)if(yi(t[e]))return!0;return!1};function ld(t,e={}){const n=Array.isArray(t);if(Nt(t)||n)for(const i in t)Array.isArray(t[i])||Nt(t[i])&&!KS(t[i])?(e[i]=Array.isArray(t[i])?[]:{},ld(t[i],e[i])):Sn(t[i])||(e[i]=!0);return e}function XS(t,e,n){const i=Array.isArray(t);if(Nt(t)||i)for(const a in t)Array.isArray(t[a])||Nt(t[a])&&!KS(t[a])?zt(e)||Jg(n[a])?n[a]=Array.isArray(t[a])?ld(t[a],[]):{...ld(t[a])}:XS(t[a],Sn(e)?{}:e[a],n[a]):n[a]=!Qs(t[a],e[a]);return n}var fl=(t,e)=>XS(t,e,ld(e));const e0={value:!1,isValid:!1},t0={value:!0,isValid:!0};var QS=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!zt(t[0].attributes.value)?zt(t[0].value)||t[0].value===""?t0:{value:t[0].value,isValid:!0}:t0:e0}return e0},ZS=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:i})=>zt(t)?t:e?t===""?NaN:t&&+t:n&&Fi(t)?new Date(t):i?i(t):t;const n0={isValid:!1,value:null};var JS=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,n0):n0;function i0(t){const e=t.ref;return Pm(e)?e.files:zm(e)?JS(t.refs).value:WS(e)?[...e.selectedOptions].map(({value:n})=>n):rc(e)?QS(t.refs).value:ZS(zt(e.value)?t.ref.value:e.value,t)}var yk=(t,e,n,i)=>{const a={};for(const o of t){const l=ye(e,o);l&&bt(a,o,l._f)}return{criteriaMode:n,names:[...t],fields:a,shouldUseNativeValidation:i}},cd=t=>t instanceof RegExp,gl=t=>zt(t)?t:cd(t)?t.source:Nt(t)?cd(t.value)?t.value.source:t.value:t,s0=t=>({isOnSubmit:!t||t===vi.onSubmit,isOnBlur:t===vi.onBlur,isOnChange:t===vi.onChange,isOnAll:t===vi.all,isOnTouch:t===vi.onTouched});const a0="AsyncFunction";var bk=t=>!!t&&!!t.validate&&!!(yi(t.validate)&&t.validate.constructor.name===a0||Nt(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===a0)),_k=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),r0=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(i=>t.startsWith(i)&&/^\.\w+/.test(t.slice(i.length))));const Ml=(t,e,n,i)=>{for(const a of n||Object.keys(t)){const o=ye(t,a);if(o){const{_f:l,...u}=o;if(l){if(l.refs&&l.refs[0]&&e(l.refs[0],a)&&!i)return!0;if(l.ref&&e(l.ref,l.name)&&!i)return!0;if(Ml(u,e))break}else if(Nt(u)&&Ml(u,e))break}}};function o0(t,e,n){const i=ye(t,n);if(i||Dd(n))return{error:i,name:n};const a=n.split(".");for(;a.length;){const o=a.join("."),l=ye(e,o),u=ye(t,o);if(l&&!Array.isArray(l)&&n!==o)return{name:n};if(u&&u.type)return{name:o,error:u};if(u&&u.root&&u.root.type)return{name:`${o}.root`,error:u.root};a.pop()}return{name:n}}var wk=(t,e,n,i)=>{n(t);const{name:a,...o}=t;return Mn(o)||Object.keys(o).length>=Object.keys(e).length||Object.keys(o).find(l=>e[l]===(!i||vi.all))},Sk=(t,e,n)=>!t||!e||t===e||Dl(t).some(i=>i&&(n?i===e:i.startsWith(e)||e.startsWith(i))),xk=(t,e,n,i,a)=>a.isOnAll?!1:!n&&a.isOnTouch?!(e||t):(n?i.isOnBlur:a.isOnBlur)?!t:(n?i.isOnChange:a.isOnChange)?t:!0,Ek=(t,e)=>!jm(ye(t,e)).length&&Pt(t,e),Ck=(t,e,n)=>{const i=Dl(ye(t,n));return bt(i,"root",e[n]),bt(t,n,i),t},Zu=t=>Fi(t);function l0(t,e,n="validate"){if(Zu(t)||Array.isArray(t)&&t.every(Zu)||Ii(t)&&!t)return{type:n,message:Zu(t)?t:"",ref:e}}var Fr=t=>Nt(t)&&!cd(t)?t:{value:t,message:""},c0=async(t,e,n,i,a,o)=>{const{ref:l,refs:u,required:d,maxLength:f,minLength:g,min:p,max:b,pattern:_,validate:w,name:S,valueAsNumber:x,mount:C}=t._f,O=ye(n,S);if(!C||e.has(S))return{};const A=u?u[0]:l,M=H=>{a&&A.reportValidity&&(A.setCustomValidity(Ii(H)?"":H||""),A.reportValidity())},D={},V=zm(l),F=rc(l),I=V||F,W=(x||Pm(l))&&zt(l.value)&&zt(O)||od(l)&&l.value===""||O===""||Array.isArray(O)&&!O.length,X=gk.bind(null,S,i,D),Q=(H,ie,se,ue=rs.maxLength,P=rs.minLength)=>{const K=H?ie:se;D[S]={type:H?ue:P,message:K,ref:l,...X(H?ue:P,K)}};if(o?!Array.isArray(O)||!O.length:d&&(!I&&(W||Sn(O))||Ii(O)&&!O||F&&!QS(u).isValid||V&&!JS(u).isValid)){const{value:H,message:ie}=Zu(d)?{value:!!d,message:d}:Fr(d);if(H&&(D[S]={type:rs.required,message:ie,ref:A,...X(rs.required,ie)},!i))return M(ie),D}if(!W&&(!Sn(p)||!Sn(b))){let H,ie;const se=Fr(b),ue=Fr(p);if(!Sn(O)&&!isNaN(O)){const P=l.valueAsNumber||O&&+O;Sn(se.value)||(H=P>se.value),Sn(ue.value)||(ie=P<ue.value)}else{const P=l.valueAsDate||new Date(O),K=N=>new Date(new Date().toDateString()+" "+N),le=l.type=="time",de=l.type=="week";Fi(se.value)&&O&&(H=le?K(O)>K(se.value):de?O>se.value:P>new Date(se.value)),Fi(ue.value)&&O&&(ie=le?K(O)<K(ue.value):de?O<ue.value:P<new Date(ue.value))}if((H||ie)&&(Q(!!H,se.message,ue.message,rs.max,rs.min),!i))return M(D[S].message),D}if((f||g)&&!W&&(Fi(O)||o&&Array.isArray(O))){const H=Fr(f),ie=Fr(g),se=!Sn(H.value)&&O.length>+H.value,ue=!Sn(ie.value)&&O.length<+ie.value;if((se||ue)&&(Q(se,H.message,ie.message),!i))return M(D[S].message),D}if(_&&!W&&Fi(O)){const{value:H,message:ie}=Fr(_);if(cd(H)&&!O.match(H)&&(D[S]={type:rs.pattern,message:ie,ref:l,...X(rs.pattern,ie)},!i))return M(ie),D}if(w){if(yi(w)){const H=await w(O,n),ie=l0(H,A);if(ie&&(D[S]={...ie,...X(rs.validate,ie.message)},!i))return M(ie.message),D}else if(Nt(w)){let H={};for(const ie in w){if(!Mn(H)&&!i)break;const se=l0(await w[ie](O,n),A,ie);se&&(H={...se,...X(ie,se.message)},M(se.message),i&&(D[S]=H))}if(!Mn(H)&&(D[S]={ref:A,...H},!i))return D}}return M(!0),D};const Ok={mode:vi.onSubmit,reValidateMode:vi.onChange,shouldFocusError:!0};function Rk(t={}){let e={...Ok,...t},n={submitCount:0,isDirty:!1,isReady:!1,isLoading:yi(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},i={},a=Nt(e.defaultValues)||Nt(e.values)?en(e.defaultValues||e.values)||{}:{},o=e.shouldUnregister?{}:en(a),l={action:!1,mount:!1,watch:!1},u={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},d,f=0;const g={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let p={...g};const b={array:J_(),state:J_()},_=e.criteriaMode===vi.all,w=j=>B=>{clearTimeout(f),f=setTimeout(j,B)},S=async j=>{if(!e.disabled&&(g.isValid||p.isValid||j)){const B=e.resolver?Mn((await F()).errors):await W(i,!0);B!==n.isValid&&b.state.next({isValid:B})}},x=(j,B)=>{!e.disabled&&(g.isValidating||g.validatingFields||p.isValidating||p.validatingFields)&&((j||Array.from(u.mount)).forEach(J=>{J&&(B?bt(n.validatingFields,J,B):Pt(n.validatingFields,J))}),b.state.next({validatingFields:n.validatingFields,isValidating:!Mn(n.validatingFields)}))},C=(j,B=[],J,ge,he=!0,ce=!0)=>{if(ge&&J&&!e.disabled){if(l.action=!0,ce&&Array.isArray(ye(i,j))){const ve=J(ye(i,j),ge.argA,ge.argB);he&&bt(i,j,ve)}if(ce&&Array.isArray(ye(n.errors,j))){const ve=J(ye(n.errors,j),ge.argA,ge.argB);he&&bt(n.errors,j,ve),Ek(n.errors,j)}if((g.touchedFields||p.touchedFields)&&ce&&Array.isArray(ye(n.touchedFields,j))){const ve=J(ye(n.touchedFields,j),ge.argA,ge.argB);he&&bt(n.touchedFields,j,ve)}(g.dirtyFields||p.dirtyFields)&&(n.dirtyFields=fl(a,o)),b.state.next({name:j,isDirty:Q(j,B),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else bt(o,j,B)},O=(j,B)=>{bt(n.errors,j,B),b.state.next({errors:n.errors})},A=j=>{n.errors=j,b.state.next({errors:n.errors,isValid:!1})},M=(j,B,J,ge)=>{const he=ye(i,j);if(he){const ce=ye(o,j,zt(J)?ye(a,j):J);zt(ce)||ge&&ge.defaultChecked||B?bt(o,j,B?ce:i0(he._f)):se(j,ce),l.mount&&S()}},D=(j,B,J,ge,he)=>{let ce=!1,ve=!1;const Se={name:j};if(!e.disabled){if(!J||ge){(g.isDirty||p.isDirty)&&(ve=n.isDirty,n.isDirty=Se.isDirty=Q(),ce=ve!==Se.isDirty);const Te=Qs(ye(a,j),B);ve=!!ye(n.dirtyFields,j),Te?Pt(n.dirtyFields,j):bt(n.dirtyFields,j,!0),Se.dirtyFields=n.dirtyFields,ce=ce||(g.dirtyFields||p.dirtyFields)&&ve!==!Te}if(J){const Te=ye(n.touchedFields,j);Te||(bt(n.touchedFields,j,J),Se.touchedFields=n.touchedFields,ce=ce||(g.touchedFields||p.touchedFields)&&Te!==J)}ce&&he&&b.state.next(Se)}return ce?Se:{}},V=(j,B,J,ge)=>{const he=ye(n.errors,j),ce=(g.isValid||p.isValid)&&Ii(B)&&n.isValid!==B;if(e.delayError&&J?(d=w(()=>O(j,J)),d(e.delayError)):(clearTimeout(f),d=null,J?bt(n.errors,j,J):Pt(n.errors,j)),(J?!Qs(he,J):he)||!Mn(ge)||ce){const ve={...ge,...ce&&Ii(B)?{isValid:B}:{},errors:n.errors,name:j};n={...n,...ve},b.state.next(ve)}},F=async j=>{x(j,!0);const B=await e.resolver(o,e.context,yk(j||u.mount,i,e.criteriaMode,e.shouldUseNativeValidation));return x(j),B},I=async j=>{const{errors:B}=await F(j);if(j)for(const J of j){const ge=ye(B,J);ge?bt(n.errors,J,ge):Pt(n.errors,J)}else n.errors=B;return B},W=async(j,B,J={valid:!0})=>{for(const ge in j){const he=j[ge];if(he){const{_f:ce,...ve}=he;if(ce){const Se=u.array.has(ce.name),Te=he._f&&bk(he._f);Te&&g.validatingFields&&x([ge],!0);const $e=await c0(he,u.disabled,o,_,e.shouldUseNativeValidation&&!B,Se);if(Te&&g.validatingFields&&x([ge]),$e[ce.name]&&(J.valid=!1,B))break;!B&&(ye($e,ce.name)?Se?Ck(n.errors,$e,ce.name):bt(n.errors,ce.name,$e[ce.name]):Pt(n.errors,ce.name))}!Mn(ve)&&await W(ve,B,J)}}return J.valid},X=()=>{for(const j of u.unMount){const B=ye(i,j);B&&(B._f.refs?B._f.refs.every(J=>!bg(J)):!bg(B._f.ref))&&oe(j)}u.unMount=new Set},Q=(j,B)=>!e.disabled&&(j&&B&&bt(o,j,B),!Qs(N(),a)),H=(j,B,J)=>fk(j,u,{...l.mount?o:zt(B)?a:Fi(j)?{[j]:B}:B},J,B),ie=j=>jm(ye(l.mount?o:a,j,e.shouldUnregister?ye(a,j,[]):[])),se=(j,B,J={})=>{const ge=ye(i,j);let he=B;if(ge){const ce=ge._f;ce&&(!ce.disabled&&bt(o,j,ZS(B,ce)),he=od(ce.ref)&&Sn(B)?"":B,WS(ce.ref)?[...ce.ref.options].forEach(ve=>ve.selected=he.includes(ve.value)):ce.refs?rc(ce.ref)?ce.refs.forEach(ve=>{(!ve.defaultChecked||!ve.disabled)&&(Array.isArray(he)?ve.checked=!!he.find(Se=>Se===ve.value):ve.checked=he===ve.value||!!he)}):ce.refs.forEach(ve=>ve.checked=ve.value===he):Pm(ce.ref)?ce.ref.value="":(ce.ref.value=he,ce.ref.type||b.state.next({name:j,values:en(o)})))}(J.shouldDirty||J.shouldTouch)&&D(j,he,J.shouldTouch,J.shouldDirty,!0),J.shouldValidate&&de(j)},ue=(j,B,J)=>{for(const ge in B){if(!B.hasOwnProperty(ge))return;const he=B[ge],ce=j+"."+ge,ve=ye(i,ce);(u.array.has(j)||Nt(he)||ve&&!ve._f)&&!Pa(he)?ue(ce,he,J):se(ce,he,J)}},P=(j,B,J={})=>{const ge=ye(i,j),he=u.array.has(j),ce=en(B);bt(o,j,ce),he?(b.array.next({name:j,values:en(o)}),(g.isDirty||g.dirtyFields||p.isDirty||p.dirtyFields)&&J.shouldDirty&&b.state.next({name:j,dirtyFields:fl(a,o),isDirty:Q(j,ce)})):ge&&!ge._f&&!Sn(ce)?ue(j,ce,J):se(j,ce,J),r0(j,u)&&b.state.next({...n,name:j}),b.state.next({name:l.mount?j:void 0,values:en(o)})},K=async j=>{l.mount=!0;const B=j.target;let J=B.name,ge=!0;const he=ye(i,J),ce=Te=>{ge=Number.isNaN(Te)||Pa(Te)&&isNaN(Te.getTime())||Qs(Te,ye(o,J,Te))},ve=s0(e.mode),Se=s0(e.reValidateMode);if(he){let Te,$e;const Hi=B.type?i0(he._f):rk(j),Ut=j.type===Z_.BLUR||j.type===Z_.FOCUS_OUT,Va=!_k(he._f)&&!e.resolver&&!ye(n.errors,J)&&!he._f.deps||xk(Ut,ye(n.touchedFields,J),n.isSubmitted,Se,ve),Ei=r0(J,u,Ut);bt(o,J,Hi),Ut?(!B||!B.readOnly)&&(he._f.onBlur&&he._f.onBlur(j),d&&d(0)):he._f.onChange&&he._f.onChange(j);const Ci=D(J,Hi,Ut),jn=!Mn(Ci)||Ei;if(!Ut&&b.state.next({name:J,type:j.type,values:en(o)}),Va)return(g.isValid||p.isValid)&&(e.mode==="onBlur"?Ut&&S():Ut||S()),jn&&b.state.next({name:J,...Ei?{}:Ci});if(!Ut&&Ei&&b.state.next({...n}),e.resolver){const{errors:Oi}=await F([J]);if(ce(Hi),ge){const Bi=o0(n.errors,i,J),oa=o0(Oi,i,Bi.name||J);Te=oa.error,J=oa.name,$e=Mn(Oi)}}else x([J],!0),Te=(await c0(he,u.disabled,o,_,e.shouldUseNativeValidation))[J],x([J]),ce(Hi),ge&&(Te?$e=!1:(g.isValid||p.isValid)&&($e=await W(i,!0)));ge&&(he._f.deps&&de(he._f.deps),V(J,$e,Te,Ci))}},le=(j,B)=>{if(ye(n.errors,B)&&j.focus)return j.focus(),1},de=async(j,B={})=>{let J,ge;const he=Dl(j);if(e.resolver){const ce=await I(zt(j)?j:he);J=Mn(ce),ge=j?!he.some(ve=>ye(ce,ve)):J}else j?(ge=(await Promise.all(he.map(async ce=>{const ve=ye(i,ce);return await W(ve&&ve._f?{[ce]:ve}:ve)}))).every(Boolean),!(!ge&&!n.isValid)&&S()):ge=J=await W(i);return b.state.next({...!Fi(j)||(g.isValid||p.isValid)&&J!==n.isValid?{}:{name:j},...e.resolver||!j?{isValid:J}:{},errors:n.errors}),B.shouldFocus&&!ge&&Ml(i,le,j?he:u.mount),ge},N=j=>{const B={...l.mount?o:a};return zt(j)?B:Fi(j)?ye(B,j):j.map(J=>ye(B,J))},Z=(j,B)=>({invalid:!!ye((B||n).errors,j),isDirty:!!ye((B||n).dirtyFields,j),error:ye((B||n).errors,j),isValidating:!!ye(n.validatingFields,j),isTouched:!!ye((B||n).touchedFields,j)}),ae=j=>{j&&Dl(j).forEach(B=>Pt(n.errors,B)),b.state.next({errors:j?n.errors:{}})},re=(j,B,J)=>{const ge=(ye(i,j,{_f:{}})._f||{}).ref,he=ye(n.errors,j)||{},{ref:ce,message:ve,type:Se,...Te}=he;bt(n.errors,j,{...Te,...B,ref:ge}),b.state.next({name:j,errors:n.errors,isValid:!1}),J&&J.shouldFocus&&ge&&ge.focus&&ge.focus()},me=(j,B)=>yi(j)?b.state.subscribe({next:J=>"values"in J&&j(H(void 0,B),J)}):H(j,B,!0),be=j=>b.state.subscribe({next:B=>{Sk(j.name,B.name,j.exact)&&wk(B,j.formState||g,At,j.reRenderRoot)&&j.callback({values:{...o},...n,...B,defaultValues:a})}}).unsubscribe,q=j=>(l.mount=!0,p={...p,...j.formState},be({...j,formState:p})),oe=(j,B={})=>{for(const J of j?Dl(j):u.mount)u.mount.delete(J),u.array.delete(J),B.keepValue||(Pt(i,J),Pt(o,J)),!B.keepError&&Pt(n.errors,J),!B.keepDirty&&Pt(n.dirtyFields,J),!B.keepTouched&&Pt(n.touchedFields,J),!B.keepIsValidating&&Pt(n.validatingFields,J),!e.shouldUnregister&&!B.keepDefaultValue&&Pt(a,J);b.state.next({values:en(o)}),b.state.next({...n,...B.keepDirty?{isDirty:Q()}:{}}),!B.keepIsValid&&S()},fe=({disabled:j,name:B})=>{(Ii(j)&&l.mount||j||u.disabled.has(B))&&(j?u.disabled.add(B):u.disabled.delete(B))},Ne=(j,B={})=>{let J=ye(i,j);const ge=Ii(B.disabled)||Ii(e.disabled);return bt(i,j,{...J||{},_f:{...J&&J._f?J._f:{ref:{name:j}},name:j,mount:!0,...B}}),u.mount.add(j),J?fe({disabled:Ii(B.disabled)?B.disabled:e.disabled,name:j}):M(j,!0,B.value),{...ge?{disabled:B.disabled||e.disabled}:{},...e.progressive?{required:!!B.required,min:gl(B.min),max:gl(B.max),minLength:gl(B.minLength),maxLength:gl(B.maxLength),pattern:gl(B.pattern)}:{},name:j,onChange:K,onBlur:K,ref:he=>{if(he){Ne(j,B),J=ye(i,j);const ce=zt(he.value)&&he.querySelectorAll&&he.querySelectorAll("input,select,textarea")[0]||he,ve=mk(ce),Se=J._f.refs||[];if(ve?Se.find(Te=>Te===ce):ce===J._f.ref)return;bt(i,j,{_f:{...J._f,...ve?{refs:[...Se.filter(bg),ce,...Array.isArray(ye(a,j))?[{}]:[]],ref:{type:ce.type,name:j}}:{ref:ce}}}),M(j,!1,void 0,ce)}else J=ye(i,j,{}),J._f&&(J._f.mount=!1),(e.shouldUnregister||B.shouldUnregister)&&!(lk(u.array,j)&&l.action)&&u.unMount.add(j)}}},Le=()=>e.shouldFocusError&&Ml(i,le,u.mount),vt=j=>{Ii(j)&&(b.state.next({disabled:j}),Ml(i,(B,J)=>{const ge=ye(i,J);ge&&(B.disabled=ge._f.disabled||j,Array.isArray(ge._f.refs)&&ge._f.refs.forEach(he=>{he.disabled=ge._f.disabled||j}))},0,!1))},We=(j,B)=>async J=>{let ge;J&&(J.preventDefault&&J.preventDefault(),J.persist&&J.persist());let he=en(o);if(b.state.next({isSubmitting:!0}),e.resolver){const{errors:ce,values:ve}=await F();n.errors=ce,he=en(ve)}else await W(i);if(u.disabled.size)for(const ce of u.disabled)Pt(he,ce);if(Pt(n.errors,"root"),Mn(n.errors)){b.state.next({errors:{}});try{await j(he,J)}catch(ce){ge=ce}}else B&&await B({...n.errors},J),Le(),setTimeout(Le);if(b.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Mn(n.errors)&&!ge,submitCount:n.submitCount+1,errors:n.errors}),ge)throw ge},Ft=(j,B={})=>{ye(i,j)&&(zt(B.defaultValue)?P(j,en(ye(a,j))):(P(j,B.defaultValue),bt(a,j,en(B.defaultValue))),B.keepTouched||Pt(n.touchedFields,j),B.keepDirty||(Pt(n.dirtyFields,j),n.isDirty=B.defaultValue?Q(j,en(ye(a,j))):Q()),B.keepError||(Pt(n.errors,j),g.isValid&&S()),b.state.next({...n}))},tt=(j,B={})=>{const J=j?en(j):a,ge=en(J),he=Mn(j),ce=he?a:ge;if(B.keepDefaultValues||(a=J),!B.keepValues){if(B.keepDirtyValues){const ve=new Set([...u.mount,...Object.keys(fl(a,o))]);for(const Se of Array.from(ve))ye(n.dirtyFields,Se)?bt(ce,Se,ye(o,Se)):P(Se,ye(ce,Se))}else{if(Nm&&zt(j))for(const ve of u.mount){const Se=ye(i,ve);if(Se&&Se._f){const Te=Array.isArray(Se._f.refs)?Se._f.refs[0]:Se._f.ref;if(od(Te)){const $e=Te.closest("form");if($e){$e.reset();break}}}}if(B.keepFieldsRef)for(const ve of u.mount)P(ve,ye(ce,ve));else i={}}o=e.shouldUnregister?B.keepDefaultValues?en(a):{}:en(ce),b.array.next({values:{...ce}}),b.state.next({values:{...ce}})}u={mount:B.keepDirtyValues?u.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},l.mount=!g.isValid||!!B.keepIsValid||!!B.keepDirtyValues,l.watch=!!e.shouldUnregister,b.state.next({submitCount:B.keepSubmitCount?n.submitCount:0,isDirty:he?!1:B.keepDirty?n.isDirty:!!(B.keepDefaultValues&&!Qs(j,a)),isSubmitted:B.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:he?{}:B.keepDirtyValues?B.keepDefaultValues&&o?fl(a,o):n.dirtyFields:B.keepDefaultValues&&j?fl(a,j):B.keepDirty?n.dirtyFields:{},touchedFields:B.keepTouched?n.touchedFields:{},errors:B.keepErrors?n.errors:{},isSubmitSuccessful:B.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:a})},Rt=(j,B)=>tt(yi(j)?j(o):j,B),Ke=(j,B={})=>{const J=ye(i,j),ge=J&&J._f;if(ge){const he=ge.refs?ge.refs[0]:ge.ref;he.focus&&(he.focus(),B.shouldSelect&&yi(he.select)&&he.select())}},At=j=>{n={...n,...j}},Nn={control:{register:Ne,unregister:oe,getFieldState:Z,handleSubmit:We,setError:re,_subscribe:be,_runSchema:F,_focusError:Le,_getWatch:H,_getDirty:Q,_setValid:S,_setFieldArray:C,_setDisabledField:fe,_setErrors:A,_getFieldArray:ie,_reset:tt,_resetDefaultValues:()=>yi(e.defaultValues)&&e.defaultValues().then(j=>{Rt(j,e.resetOptions),b.state.next({isLoading:!1})}),_removeUnmounted:X,_disableForm:vt,_subjects:b,_proxyFormState:g,get _fields(){return i},get _formValues(){return o},get _state(){return l},set _state(j){l=j},get _defaultValues(){return a},get _names(){return u},set _names(j){u=j},get _formState(){return n},get _options(){return e},set _options(j){e={...e,...j}}},subscribe:q,trigger:de,register:Ne,handleSubmit:We,watch:me,setValue:P,getValues:N,reset:Rt,resetField:Ft,clearErrors:ae,unregister:oe,setError:re,setFocus:Ke,getFieldState:Z};return{...Nn,formControl:Nn}}function Md(t={}){const e=Me.useRef(void 0),n=Me.useRef(void 0),[i,a]=Me.useState({isDirty:!1,isValidating:!1,isLoading:yi(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:yi(t.defaultValues)?void 0:t.defaultValues});if(!e.current)if(t.formControl)e.current={...t.formControl,formState:i},t.defaultValues&&!yi(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:l,...u}=Rk(t);e.current={...u,formState:i}}const o=e.current.control;return o._options=t,hk(()=>{const l=o._subscribe({formState:o._proxyFormState,callback:()=>a({...o._formState}),reRenderRoot:!0});return a(u=>({...u,isReady:!0})),o._formState.isReady=!0,l},[o]),Me.useEffect(()=>o._disableForm(t.disabled),[o,t.disabled]),Me.useEffect(()=>{t.mode&&(o._options.mode=t.mode),t.reValidateMode&&(o._options.reValidateMode=t.reValidateMode)},[o,t.mode,t.reValidateMode]),Me.useEffect(()=>{t.errors&&(o._setErrors(t.errors),o._focusError())},[o,t.errors]),Me.useEffect(()=>{t.shouldUnregister&&o._subjects.state.next({values:o._getWatch()})},[o,t.shouldUnregister]),Me.useEffect(()=>{if(o._proxyFormState.isDirty){const l=o._getDirty();l!==i.isDirty&&o._subjects.state.next({isDirty:l})}},[o,i.isDirty]),Me.useEffect(()=>{t.values&&!Qs(t.values,n.current)?(o._reset(t.values,{keepFieldsRef:!0,...o._options.resetOptions}),n.current=t.values,a(l=>({...l}))):o._resetDefaultValues()},[o,t.values]),Me.useEffect(()=>{o._state.mount||(o._setValid(),o._state.mount=!0),o._state.watch&&(o._state.watch=!1,o._subjects.state.next({...o._formState})),o._removeUnmounted()}),e.current.formState=dk(i,o),e.current}function Ak({machineToEdit:t}){const{selectedWorkCenter:e}=Re(),{addMachine:n,updateMachine:i}=Yt(),a=!!t,o={department:t?.department||_t.MACHINE.DEPARTMENT,machine_type:t?.machine_type||"",machine_name:t?.machine_name||"",work_center:t?.work_center||(e===Ae.BOTH?_t.MACHINE.WORK_CENTER:e),min_web_width:t?.min_web_width||_t.MACHINE.MIN_WEB_WIDTH,max_web_width:t?.max_web_width||_t.MACHINE.MAX_WEB_WIDTH,min_bag_height:t?.min_bag_height||_t.MACHINE.MIN_BAG_HEIGHT,max_bag_height:t?.max_bag_height||_t.MACHINE.MAX_BAG_HEIGHT,standard_speed:t?.standard_speed||"",setup_time_standard:t?.setup_time_standard||_t.MACHINE.SETUP_TIME_STANDARD,changeover_color:t?.changeover_color||_t.MACHINE.CHANGEOVER_COLOR,changeover_material:t?.changeover_material||_t.MACHINE.CHANGEOVER_MATERIAL,active_shifts:t?.active_shifts||_t.MACHINE.ACTIVE_SHIFTS,status:t?.status||_t.MACHINE.STATUS},{getValidMachineTypes:l}=IS(),{register:u,handleSubmit:d,formState:{errors:f,isSubmitting:g},watch:p,setValue:b,getValues:_}=Md({defaultValues:o}),w=p("department");R.useEffect(()=>{l(w).includes(_("machine_type"))||b("machine_type","")},[w,l,_,b]);const S=C=>{const{value:O,checked:A}=C.target,M=_("active_shifts")||[];A?b("active_shifts",[...M,O]):b("active_shifts",M.filter(D=>D!==O))},x=async C=>{a?await i(t.id,C):await n(C)};return y.jsx("div",{className:"content-section",children:y.jsxs("form",{onSubmit:d(x),children:[y.jsxs("div",{className:"form-section",children:[y.jsx("h3",{className:"section-title",children:"Identificazione"}),y.jsxs("div",{className:"form-grid form-grid--4-cols",children:[y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"department",children:"Department *"}),y.jsxs("select",{id:"department",...u("department"),className:f.department?"error":"",children:[y.jsx("option",{value:It.PRINTING,children:It.PRINTING}),y.jsx("option",{value:It.PACKAGING,children:It.PACKAGING})]}),f.department&&y.jsx("span",{className:"error-message",children:f.department.message})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"machine_type",children:"Machine Type *"}),y.jsxs("select",{id:"machine_type",...u("machine_type"),className:f.machine_type?"error":"",children:[y.jsx("option",{value:"",children:"Seleziona tipo macchina"}),l(w).map(C=>y.jsx("option",{value:C,children:C},C))]}),f.machine_type&&y.jsx("span",{className:"error-message",children:f.machine_type.message})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"machine_name",children:"Machine Name *"}),y.jsx("input",{type:"text",id:"machine_name",...u("machine_name"),placeholder:"Nome descrittivo",className:f.machine_name?"error":""}),f.machine_name&&y.jsx("span",{className:"error-message",children:f.machine_name.message})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"work_center",children:"Work Center *"}),e===Ae.BOTH?y.jsxs("select",{...u("work_center",{required:"Work center is required"}),id:"work_center",className:f.work_center?"error":"",children:[y.jsx("option",{value:"",children:"Seleziona un centro di lavoro"}),y.jsx("option",{value:Ae.ZANICA,children:Ae.ZANICA}),y.jsx("option",{value:Ae.BUSTO_GAROLFO,children:Ae.BUSTO_GAROLFO})]}):y.jsx("input",{type:"text",id:"work_center",value:e||"Nessun centro di lavoro selezionato",disabled:!0,className:"disabled-input",style:{backgroundColor:"#f5f5f5",color:"#666"}}),e===Ae.BOTH?f.work_center&&y.jsx("span",{className:"error-message",children:f.work_center.message}):y.jsx("small",{style:{color:"#666",fontSize:"12px"},children:"Il centro di lavoro è impostato in base alla tua selezione di accesso"})]})]})]}),y.jsxs("div",{className:"form-section",children:[y.jsx("h3",{className:"section-title",children:"Capacità Tecniche"}),y.jsxs("div",{className:"form-grid form-grid--3-cols",children:[y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"min_web_width",children:"Min Web Width (mm)"}),y.jsx("input",{type:"number",id:"min_web_width",...u("min_web_width"),min:"0",step:"1",className:f.min_web_width?"error":""}),f.min_web_width&&y.jsx("span",{className:"error-message",children:f.min_web_width.message})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"max_web_width",children:"Max Web Width (mm) *"}),y.jsx("input",{type:"number",id:"max_web_width",...u("max_web_width"),min:"0",step:"1",className:f.max_web_width?"error":""}),f.max_web_width&&y.jsx("span",{className:"error-message",children:f.max_web_width.message})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"min_bag_height",children:"Min Bag Height (mm)"}),y.jsx("input",{type:"number",id:"min_bag_height",...u("min_bag_height"),min:"0",step:"1",className:f.min_bag_height?"error":""}),f.min_bag_height&&y.jsx("span",{className:"error-message",children:f.min_bag_height.message})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"max_bag_height",children:"Max Bag Height (mm) *"}),y.jsx("input",{type:"number",id:"max_bag_height",...u("max_bag_height"),min:"0",step:"1",className:f.max_bag_height?"error":""}),f.max_bag_height&&y.jsx("span",{className:"error-message",children:f.max_bag_height.message})]})]})]}),y.jsxs("div",{className:"form-section",children:[y.jsx("h3",{className:"section-title",children:"Performance"}),y.jsxs("div",{className:"form-grid form-grid--3-cols",children:[y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"standard_speed",children:"Standard Speed"}),y.jsx("input",{type:"number",id:"standard_speed",...u("standard_speed"),placeholder:"pz/h o mt/h",min:"0",step:"1",className:f.standard_speed?"error":""}),f.standard_speed&&y.jsx("span",{className:"error-message",children:f.standard_speed.message})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"setup_time_standard",children:"Setup Time Standard (h)"}),y.jsx("input",{type:"number",id:"setup_time_standard",...u("setup_time_standard"),min:"0",step:"0.1",className:f.setup_time_standard?"error":""}),f.setup_time_standard&&y.jsx("span",{className:"error-message",children:f.setup_time_standard.message})]}),w===It.PRINTING&&y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"changeover_color",children:"Changeover Color (h)"}),y.jsx("input",{type:"number",id:"changeover_color",...u("changeover_color"),min:"0",step:"0.1",className:f.changeover_color?"error":""}),f.changeover_color&&y.jsx("span",{className:"error-message",children:f.changeover_color.message})]}),w===It.PACKAGING&&y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"changeover_material",children:"Material Changeover (h)"}),y.jsx("input",{type:"number",id:"changeover_material",...u("changeover_material"),min:"0",step:"0.1",className:f.changeover_material?"error":""}),f.changeover_material&&y.jsx("span",{className:"error-message",children:f.changeover_material.message})]})]})]}),y.jsxs("div",{className:"form-section",children:[y.jsx("h3",{className:"section-title",children:"Disponibilità"}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{children:"Active Shifts"}),y.jsxs("div",{className:"checkbox-group",children:[y.jsxs("label",{children:[y.jsx("input",{type:"checkbox",value:ji.T1,checked:_("active_shifts")?.includes(ji.T1),onChange:S})," ",ji.T1]}),y.jsxs("label",{children:[y.jsx("input",{type:"checkbox",value:ji.T2,checked:_("active_shifts")?.includes(ji.T2),onChange:S})," ",ji.T2]}),y.jsxs("label",{children:[y.jsx("input",{type:"checkbox",value:ji.T3,checked:_("active_shifts")?.includes(ji.T3),onChange:S})," ",ji.T3]})]})]})]}),y.jsx("div",{className:"form-actions",style:{marginTop:"20px"},children:y.jsx("button",{type:"submit",className:"nav-btn today",disabled:g,children:g?a?"Aggiornamento Macchina...":"Aggiunta Macchina...":a?"Aggiorna Macchina":"Aggiungi Macchina"})})]})})}function u0(){const{id:t}=Cd(),e=sa(),{machines:n,getMachineById:i}=Yt(),{selectedWorkCenter:a}=Re(),{isLoading:o,isInitialized:l,init:u,cleanup:d}=Ui(),f=!!t,g=f?i(t):null;return R.useEffect(()=>(l||u(),()=>{d()}),[u,l,d]),R.useEffect(()=>{f&&!o&&!g&&e("/machinery",{replace:!0})},[f,o,g,e]),o?y.jsx("div",{children:"Caricamento..."}):f&&!g?y.jsx("div",{className:"error",children:"Macchina non trovata."}):a?y.jsxs("div",{className:"content-section",children:[y.jsx(_s,{title:f?`Modifica Macchina: ${g?.machine_name}`:"Aggiungi Nuova Macchina"}),f&&y.jsx("div",{style:{margin:"8px 24px",display:"flex",justifyContent:"flex-end"},children:y.jsx(xn,{to:`/machinery/${t}/calendar`,className:"nav-btn today",children:"Visualizza Calendario"})}),y.jsx(Ak,{machineToEdit:g})]}):y.jsx("div",{className:"error",children:"Seleziona un centro di lavoro per gestire le macchine."})}function Tk({currentDate:t,currentView:e,onDateChange:n,onViewChange:i}){const a=()=>{n(new Date)},o=()=>{let d;e==="Month"?(d=new Date(t),d.setMonth(d.getMonth()-1)):e==="Week"?d=$l(t,-7):e==="Year"&&(d=new Date(t),d.setFullYear(d.getFullYear()-1)),n(d)},l=()=>{let d;e==="Month"?(d=new Date(t),d.setMonth(d.getMonth()+1)):e==="Week"?d=$l(t,7):e==="Year"&&(d=new Date(t),d.setFullYear(d.getFullYear()+1)),n(d)},u=()=>{if(e==="Month")return t.toLocaleDateString("it-IT",{month:"long",year:"numeric"});if(e==="Week"){const d=AS(t),f=P1(t);return`${d.toLocaleDateString("it-IT",{month:"short",day:"numeric"})} - ${f.toLocaleDateString("it-IT",{month:"short",day:"numeric",year:"numeric"})}`}else if(e==="Year")return t.getFullYear().toString();return""};return y.jsxs("div",{className:"calendar-controls-container",children:[y.jsxs("div",{className:"calendar-navigation",children:[y.jsx("button",{className:"nav-btn today",onClick:o,"aria-label":"Previous",children:"← Precedente"}),y.jsx("button",{className:"nav-btn today",onClick:a,children:"Oggi"}),y.jsx("button",{className:"nav-btn today",onClick:l,"aria-label":"Next",children:"Successivo →"})]}),y.jsxs("div",{className:"calendar-view-selector",children:[y.jsx("h3",{children:u()}),y.jsxs("select",{value:e,onChange:d=>i(d.target.value),children:[y.jsx("option",{value:"Month",children:"Mese"}),y.jsx("option",{value:"Week",children:"Settimana"}),y.jsx("option",{value:"Year",children:"Anno"})]})]})]})}function Dk({machineId:t,currentDate:e,onSuccess:n}){const{setMachineUnavailability:i}=Gr(),{showAlert:a}=Re(),{handleAsync:o}=ws("OffTimeForm"),l=S=>{const x={};if(S.startDate&&S.endDate){const C=new Date(S.startDate);new Date(S.endDate)<C&&(x.endDate={type:"validation",message:j_.END_DATE_BEFORE_START}),S.startDate===S.endDate&&S.startTime&&S.endTime&&S.startTime>=S.endTime&&(x.endTime={type:"validation",message:j_.END_TIME_BEFORE_START})}return{values:S,errors:Object.keys(x).length>0?x:{}}},u=async S=>{await o(async()=>{await i(t,S.startDate,S.endDate,S.startTime,S.endTime),a("Indisponibilità macchina impostata con successo!","success"),n&&n(),_()},{context:"Set Machine Unavailability",fallbackMessage:"Impostazione indisponibilità macchina fallita"})},{register:d,handleSubmit:f,formState:{errors:g,isSubmitting:p},setValue:b,reset:_}=Md({defaultValues:{startDate:"",startTime:"",endDate:"",endTime:""},resolver:l});R.useEffect(()=>{const S=new Date,x=$l(S,1);b("startDate",vn(S)),b("endDate",vn(x)),b("startTime",_t.OFF_TIME.START_TIME),b("endTime",_t.OFF_TIME.END_TIME)},[e,b]);const w=S=>{const x=g[S];return x?y.jsx("span",{className:"error-message",style:{color:"red",fontSize:"12px",marginTop:"4px"},children:x.message}):null};return y.jsxs("div",{className:"off-time-section",children:[y.jsx("h3",{children:"Imposta Periodo di Non Disponibilità"}),y.jsxs("form",{onSubmit:f(u),className:"off-time-form",children:[y.jsxs("div",{className:"form-grid form-grid--4-cols",children:[y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"startDate",children:"Data Inizio"}),y.jsx("input",{type:"date",id:"startDate",...d("startDate"),className:`date-input ${g.startDate?"error":""}`}),w("startDate")]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"startTime",children:"Ora Inizio"}),y.jsx("input",{type:"time",id:"startTime",...d("startTime"),className:`time-input ${g.startTime?"error":""}`}),w("startTime")]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"endDate",children:"Data Fine"}),y.jsx("input",{type:"date",id:"endDate",...d("endDate"),className:`date-input ${g.endDate?"error":""}`}),w("endDate")]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"endTime",children:"Ora Fine"}),y.jsx("input",{type:"time",id:"endTime",...d("endTime"),className:`time-input ${g.endTime?"error":""}`}),w("endTime")]})]}),y.jsx("div",{className:"form-actions",children:y.jsx("button",{type:"submit",className:"nav-btn today",disabled:p,children:p?"Impostazione...":"Imposta Non Disponibilità"})})]})]})}function Mk({machineId:t,currentDate:e,currentView:n,refreshTrigger:i}){const[a,o]=R.useState(!1),[l,u]=R.useState({}),{machines:d}=Yt(),{odpOrders:f}=Mt(),{machineAvailability:g,getMachineAvailability:p,loadMachineAvailabilityForDateRange:b,toggleMachineHourAvailability:_}=Gr(),{showAlert:w}=Re();ws("CalendarGrid");const S=d.find(I=>I.id===t);if(!S)return y.jsx("div",{className:"loading",children:"Loading machine data..."});const x=R.useMemo(()=>{if(!e)return{dates:[],dateStrings:[]};let I=[],W=[];if(n==="Month"){const X=e.getFullYear(),Q=e.getMonth(),H=new Date(X,Q,1),ie=new Date(X,Q+1,0),se=new Date(H);for(;se<=ie;)I.push(new Date(se)),W.push(vn(se)),se.setDate(se.getDate()+1)}else if(n==="Week"){const X=AS(e);for(let Q=0;Q<7;Q++){const H=new Date(X);H.setDate(X.getDate()+Q),I.push(H),W.push(vn(H))}}else if(n==="Year"){const X=e.getFullYear();for(let Q=0;Q<12;Q++){const H=new Date(X,Q+1,0).getDate();for(let ie=1;ie<=H;ie++){const se=new Date(X,Q,ie);I.push(se),W.push(vn(se))}}}else I.push(e),W.push(vn(e));return{dates:I,dateStrings:W}},[e,n]);R.useEffect(()=>{(async()=>{if(!(!t||!x.dateStrings.length)){o(!0);try{const W=x.dateStrings[0],X=x.dateStrings[x.dateStrings.length-1];await b(t,W,X)}catch(W){console.error("Failed to load machine availability data:",W)}finally{o(!1)}}})()},[t,x.dateStrings,b,i]);const C=R.useMemo(()=>S?f.filter(I=>I.status==="SCHEDULED"&&I.scheduled_machine_id===S.id):[],[S,f]),O=R.useCallback((I,W)=>!S||C.length===0?!1:C.some(X=>L1(X,I,W)),[S,C]),A=R.useCallback(I=>{const W=g[I];if(Array.isArray(W)){const X=W.find(Q=>Q.machine_id===t);if(X&&X.unavailable_hours)return Array.isArray(X.unavailable_hours)?X.unavailable_hours.map(Q=>Q.toString()):[]}return[]},[g,t]),M=R.useCallback(async(I,W)=>{if(O(I,W)){w("Cannot mark time slot as unavailable - it has scheduled tasks","error");return}if(!S)return;const X=`${I}-${W}`;u(Q=>({...Q,[X]:!0}));try{await _(S.id,I,W)}catch(Q){console.error("Failed to toggle machine hour availability:",Q),w("An unexpected error occurred.","error")}finally{u(Q=>({...Q,[X]:!1}))}},[O,w,S,_]),D=R.useCallback(()=>{const{dates:I}=x;if(I.length===0)return null;const W=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];return y.jsxs("div",{className:"calendar-month-grid",children:[y.jsx("div",{className:"calendar-week-header",children:W.map(X=>y.jsx("div",{className:"week-day-header",children:X},X))}),y.jsx("div",{className:"calendar-days-grid",children:I.map((X,Q)=>{const H=vn(X),ie=A(H),se=X.getMonth()===e.getMonth(),ue=X.toDateString()===new Date().toDateString(),P=Array.from({length:24},(le,de)=>de).some(le=>O(H,le));let K="calendar-day";return se||(K+=" other-month"),ue&&(K+=" today"),ie.length>0&&(K+=ie.length===24?" unavailable":" partially-unavailable"),P&&(K+=" has-scheduled-tasks"),y.jsxs("div",{className:K,children:[y.jsx("span",{className:"day-number",children:X.getDate()}),ie.length>0&&y.jsx("div",{className:"availability-indicator",children:ie.length===24?"All Day":`${ie.length}h`}),P&&y.jsx("div",{className:"scheduled-tasks-indicator",children:"📋"})]},H)})})]})},[x,A,e,O]),V=R.useCallback(()=>{const{dates:I}=x;if(I.length===0)return null;const W=Array.from({length:24},(X,Q)=>Q);return y.jsxs("div",{className:"calendar-week-grid",children:[y.jsxs("div",{className:"time-column-header",children:[y.jsx("div",{className:"time-header-cell",children:"Time"}),I.map(X=>y.jsx("div",{className:"day-header-cell",children:X.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})},X.toISOString()))]}),W.map(X=>y.jsxs("div",{className:"time-row",children:[y.jsxs("div",{className:"time-label",children:[X.toString().padStart(2,"0"),":00"]}),I.map(Q=>{const H=vn(Q),ie=A(H),se=X.toString(),ue=ie.includes(se),P=O(H,X),K=`${H}-${X}`,le=l[K];let de="time-slot";return ue&&(de+=" unavailable"),P&&(de+=" has-scheduled-task"),le&&(de+=" updating"),y.jsx("div",{className:de,onClick:()=>!le&&M(H,X),children:y.jsx("div",{className:"time-slot-content",children:le?"...":ue?"❌":P?"📋":"✓"})},`${H}-${X}`)})]},X))]})},[x,A,O,M,l]),F=R.useCallback(()=>{const I=e.getFullYear(),W=Array.from({length:12},(X,Q)=>Q);return y.jsx("div",{className:"calendar-year-grid",children:W.map(X=>{const H=new Date(I,X,1).toLocaleDateString("en-US",{month:"short"}),ie=new Date(I,X+1,0).getDate(),se=new Date(I,X,1).getDay(),ue=[];for(let P=0;P<se;P++)ue.push(null);for(let P=1;P<=ie;P++)ue.push(P);return y.jsxs("div",{className:"month-mini-calendar",children:[y.jsx("h4",{children:H}),y.jsxs("div",{className:"mini-month-grid",children:[["S","M","T","W","T","F","S"].map((P,K)=>y.jsx("div",{className:"mini-day-header",children:P},`${X}-${K}-${P}`)),ue.map((P,K)=>{if(P===null)return y.jsx("div",{className:"mini-day empty"},`empty-${X}-${K}`);const le=vn(new Date(I,X,P)),de=A(le),N=de.length>0;return y.jsx("div",{className:`mini-day ${N?"unavailable":""}`,title:N?`${de.length} unavailable hours`:"Available",children:P},le)})]})]},X)})})},[e,A]);return a?y.jsx("div",{className:"loading",children:"Loading calendar data..."}):y.jsxs("div",{className:"calendar-grid-container",children:[n==="Month"&&D(),n==="Week"&&V(),n==="Year"&&F()]})}function kk(){const{machineId:t}=Cd(),[e,n]=R.useState(new Date),[i,a]=R.useState("Month"),[o,l]=R.useState(0),{getMachineById:u}=Yt(),{getLoadingState:d,getInitializationState:f}=Re(),{init:g,cleanup:p}=Ui(),b=u(t),_=d(),w=f();if(R.useEffect(()=>(w||g(),()=>{p()}),[g,w,p]),_||!w)return y.jsx("div",{className:"content-section",children:y.jsx("div",{className:"loading",children:"Caricamento calendario macchina..."})});if(!b)return y.jsx("div",{className:"content-section",children:y.jsx("div",{className:"error",children:"Macchina non trovata"})});const S=O=>{n(O)},x=O=>{a(O)},C=()=>{l(O=>O+1)};return y.jsxs("div",{className:"content-section",children:[y.jsx(_s,{title:"Calendario Disponibilità Macchina"}),y.jsx("div",{className:"machine-name-display",children:y.jsx("h3",{className:"machine-name-title",children:b.machine_name})}),y.jsx(Tk,{currentDate:e,currentView:i,onDateChange:S,onViewChange:x}),y.jsx(Dk,{machineId:b.id,currentDate:e,onSuccess:C}),y.jsx(Mk,{machineId:b.id,currentDate:e,currentView:i,refreshTrigger:o})]})}function Nk(){const{phases:t,updatePhase:e,removePhase:n}=ii(),{selectedWorkCenter:i,isLoading:a,isInitialized:o,showAlert:l,showConfirmDialog:u}=Re(),{init:d,cleanup:f}=Ui(),g=R.useMemo(()=>i?i===Ae.BOTH?t:t.filter(x=>x.work_center===i):[],[t,i]),{validatePhase:p}=ik(),{handleAsync:b}=ws("PhasesListPage");R.useEffect(()=>(o||d(),()=>{f()}),[d,o,f]);const _=R.useMemo(()=>[{header:"ID Fase",accessorKey:"id"},{header:"Nome Fase",accessorKey:"name",cell:Ve},{header:"Centro di Lavoro",accessorKey:"work_center"},{header:"Reparto",accessorKey:"department"},{header:"Numero Persone",accessorKey:"numero_persone",cell:Ve},{header:"V Stampa",accessorKey:"v_stampa",cell:Ve},{header:"T Setup Stampa (h)",accessorKey:"t_setup_stampa",cell:Ve},{header:"Costo H Stampa",accessorKey:"costo_h_stampa",cell:Ve},{header:"V Conf",accessorKey:"v_conf",cell:Ve},{header:"T Setup Conf (h)",accessorKey:"t_setup_conf",cell:Ve},{header:"Costo H Conf",accessorKey:"costo_h_conf",cell:Ve},{header:"Contenuto Fase",accessorKey:"contenuto_fase",cell:Ve},{header:"Creato il",accessorKey:"created_at",cell:x=>new Date(x.getValue()).toLocaleDateString()},{header:"Aggiornato il",accessorKey:"updated_at",cell:x=>new Date(x.getValue()).toLocaleDateString()}],[]),w=async x=>{const C=p(x);if(C.length>0){l(`Errori di validazione:
${C.join(`
`)}`,"error");return}await b(()=>e(x.id,x),{context:"Aggiorna Fase",fallbackMessage:"Aggiornamento fase fallito"})},S=async x=>{u("Elimina Fase",`Sei sicuro di voler eliminare "${x.name}"? Questa azione non può essere annullata.`,async()=>{await b(()=>n(x.id),{context:"Elimina Fase",fallbackMessage:"Eliminazione fase fallita"})},"danger")};return a?y.jsx("div",{children:"Caricamento dati fasi..."}):i?y.jsxs("div",{className:"content-section",children:[y.jsx(_s,{title:"Catalogo Fasi"}),y.jsx(Dm,{columns:_,data:g,onSaveRow:w,onDeleteRow:S})]}):y.jsx("div",{className:"error",children:"Seleziona un centro di lavoro per visualizzare i dati delle fasi."})}function jk({phaseToEdit:t}){const{selectedWorkCenter:e}=Re(),{addPhase:n,updatePhase:i}=ii(),a=!!t,o={name:t?.name||"",department:t?.department||_t.PHASE.DEPARTMENT,numero_persone:t?.numero_persone||_t.PHASE.NUMERO_PERSONE,work_center:t?.work_center||(e===Ae.BOTH?_t.PHASE.WORK_CENTER:e),v_stampa:t?.v_stampa||_t.PHASE.V_STAMPA,t_setup_stampa:t?.t_setup_stampa||_t.PHASE.T_SETUP_STAMPA,costo_h_stampa:t?.costo_h_stampa||_t.PHASE.COSTO_H_STAMPA,v_conf:t?.v_conf||_t.PHASE.V_CONF,t_setup_conf:t?.t_setup_conf||_t.PHASE.T_SETUP_CONF,costo_h_conf:t?.costo_h_conf||_t.PHASE.COSTO_H_CONF,contenuto_fase:t?.contenuto_fase||""},{register:l,handleSubmit:u,formState:{errors:d,isSubmitting:f},watch:g,setValue:p}=Md({defaultValues:o}),b=g("department");R.useEffect(()=>{b===It.PRINTING&&(p("v_conf",0),p("t_setup_conf",0),p("costo_h_conf",0))},[b,p]);const _=S=>d[S]?y.jsx("span",{className:"error-message",style:{color:"red",fontSize:"12px",marginTop:"4px"},children:d[S].message}):null,w=async S=>{a?await i(t.id,S):await n(S)};return y.jsx("div",{className:"content-section",children:y.jsxs("form",{onSubmit:u(w),children:[y.jsxs("div",{className:"form-section",children:[y.jsx("h3",{className:"section-title",children:"Informazioni Fase"}),y.jsxs("div",{className:"form-grid form-grid--4-cols",children:[y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"name",children:"Nome Fase *"}),y.jsx("input",{type:"text",id:"name",...l("name"),placeholder:"es. Stampa Alta Velocità",className:d.name?"error":"",required:!0}),_("name")]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"department",children:"Tipo Fase *"}),y.jsxs("select",{id:"department",...l("department"),className:d.department?"error":"",children:[y.jsx("option",{value:It.PRINTING,children:It.PRINTING}),y.jsx("option",{value:It.PACKAGING,children:It.PACKAGING})]}),_("department")]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"numero_persone",children:"Numero di Persone Richieste *"}),y.jsx("input",{type:"number",id:"numero_persone",...l("numero_persone"),min:"1",step:"1",className:d.numero_persone?"error":""}),_("numero_persone")]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"work_center",children:"Centro di Lavoro *"}),e===Ae.BOTH?y.jsxs("select",{...l("work_center",{required:"Work center is required"}),id:"work_center",className:d.work_center?"error":"",children:[y.jsx("option",{value:"",children:"Seleziona un centro di lavoro"}),y.jsx("option",{value:Ae.ZANICA,children:Ae.ZANICA}),y.jsx("option",{value:Ae.BUSTO_GAROLFO,children:Ae.BUSTO_GAROLFO})]}):y.jsx("input",{type:"text",id:"work_center",value:e||"Nessun centro di lavoro selezionato",disabled:!0,className:"disabled-input",style:{backgroundColor:"#f5f5f5",color:"#666"}}),e===Ae.BOTH?d.work_center&&y.jsx("span",{className:"error-message",children:d.work_center.message}):y.jsx("small",{style:{color:"#666",fontSize:"12px"},children:"Il centro di lavoro è impostato in base alla tua selezione di accesso"})]})]})]}),b===It.PRINTING&&y.jsxs("div",{className:"form-section",children:[y.jsx("h3",{className:"section-title",children:"Parametri Stampa"}),y.jsxs("div",{className:"form-grid form-grid--3-cols",children:[y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"v_stampa",children:"Velocità Stampa (mt/h) *"}),y.jsx("input",{type:"number",id:"v_stampa",...l("v_stampa"),min:"0",step:"1",className:d.v_stampa?"error":""}),_("v_stampa")]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"t_setup_stampa",children:"Tempo Setup (ore)"}),y.jsx("input",{type:"number",id:"t_setup_stampa",...l("t_setup_stampa"),min:"0",step:"0.1",className:d.t_setup_stampa?"error":""}),_("t_setup_stampa")]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"costo_h_stampa",children:"Costo Orario (€/h)"}),y.jsx("input",{type:"number",id:"costo_h_stampa",...l("costo_h_stampa"),min:"0",step:"0.01",className:d.costo_h_stampa?"error":""}),_("costo_h_stampa")]})]})]}),b===It.PACKAGING&&y.jsxs("div",{className:"form-section",children:[y.jsx("h3",{className:"section-title",children:"Parametri Confezionamento"}),y.jsxs("div",{className:"form-grid form-grid--3-cols",children:[y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"v_conf",children:"Velocità Confezionamento (pz/h) *"}),y.jsx("input",{type:"number",id:"v_conf",...l("v_conf"),min:"0",step:"1",className:d.v_conf?"error":""}),_("v_conf")]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"t_setup_conf",children:"Tempo Setup (ore)"}),y.jsx("input",{type:"number",id:"t_setup_conf",...l("t_setup_conf"),min:"0",step:"0.1",className:d.t_setup_conf?"error":""}),_("t_setup_conf")]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"costo_h_conf",children:"Costo Orario (€/h)"}),y.jsx("input",{type:"number",id:"costo_h_conf",...l("costo_h_conf"),min:"0",step:"0.01",className:d.costo_h_conf?"error":""}),_("costo_h_conf")]})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"contenuto_fase",children:"Descrizione Contenuto Fase"}),y.jsx("textarea",{id:"contenuto_fase",...l("contenuto_fase"),rows:"3",placeholder:"Descrivi il contenuto della fase e i requisiti..."})]})]}),y.jsx("div",{className:"form-actions",style:{marginTop:"20px"},children:y.jsx("button",{type:"submit",className:"nav-btn today",disabled:f,children:f?a?"Aggiornamento Fase...":"Aggiunta Fase...":a?"Aggiorna Fase":"Aggiungi Fase"})})]})})}function d0(){const{id:t}=Cd(),e=sa(),{phases:n,getPhaseById:i}=ii(),{selectedWorkCenter:a}=Re(),{isLoading:o,isInitialized:l,init:u,cleanup:d}=Ui(),f=!!t,g=f?i(t):null;return R.useEffect(()=>(l||u(),()=>{d()}),[u,l,d]),R.useEffect(()=>{f&&!o&&!g&&e("/phases",{replace:!0})},[f,o,g,e]),o?y.jsx("div",{children:"Caricamento..."}):f&&!g?y.jsx("div",{className:"error",children:"Fase non trovata."}):a?y.jsxs("div",{className:"content-section",children:[y.jsx(_s,{title:f?`Modifica Fase: ${g?.name}`:"Aggiungi Nuova Fase"}),y.jsx(jk,{phaseToEdit:g})]}):y.jsx("div",{className:"error",children:"Seleziona un centro di lavoro per gestire le fasi."})}function Lk(){const{odpOrders:t,updateOdpOrder:e,removeOdpOrder:n}=Mt(),{selectedWorkCenter:i,isLoading:a,isInitialized:o,showAlert:l,showConfirmDialog:u}=Re(),{init:d,cleanup:f}=Ui(),{machines:g}=Yt(),{phases:p}=ii(),b=R.useMemo(()=>{if(!i)return[];let O=t;return i!==Ae.BOTH&&(O=t.filter(A=>A.work_center===i)),O.map(A=>({...A,machine_name:A.scheduled_machine_id?g.find(M=>M.id===A.scheduled_machine_id)?.machine_name||"Macchina non trovata":"Non programmato",phase_name:A.fase?p.find(M=>M.id===A.fase)?.name||"Fase non trovata":"Fase non assegnata"}))},[t,i,g,p]),{validateOrder:_}=nk(),{handleAsync:w}=ws("BacklogListPage");R.useEffect(()=>(o||d(),()=>{f()}),[d,o,f]);const S=R.useMemo(()=>[{header:"Numero ODP",accessorKey:"odp_number",cell:Ve},{header:"Codice Articolo",accessorKey:"article_code",cell:Ve},{header:"Lotto Produzione",accessorKey:"production_lot",cell:Ve},{header:"Centro di Lavoro",accessorKey:"work_center"},{header:"Reparto",accessorKey:"department"},{header:"Nome Cliente",accessorKey:"nome_cliente",cell:Ve},{header:"Descrizione",accessorKey:"description",cell:Ve},{header:"Altezza Busta (mm)",accessorKey:"bag_height",cell:Ve},{header:"Larghezza Busta (mm)",accessorKey:"bag_width",cell:Ve},{header:"Passo Busta (mm)",accessorKey:"bag_step",cell:Ve},{header:"Lati Sigillati",accessorKey:"seal_sides"},{header:"Tipo Prodotto",accessorKey:"product_type"},{header:"Quantità",accessorKey:"quantity",cell:Ve},{header:"Quantità per Scatola",accessorKey:"quantity_per_box",cell:Ve},{header:"Quantità Completata",accessorKey:"quantity_completed",cell:Ve},{header:"Numero Scatole",accessorKey:"n_boxes"},{header:"Data Consegna",accessorKey:"delivery_date",cell:O=>O.getValue()?new Date(O.getValue()).toLocaleDateString():"Non impostata"},{header:"Inizio Programmato",accessorKey:"scheduled_start_time",cell:O=>O.getValue()?new Date(O.getValue()).toLocaleDateString():"Non programmato"},{header:"Fine Programmata",accessorKey:"scheduled_end_time",cell:O=>O.getValue()?new Date(O.getValue()).toLocaleDateString():"Non programmato"},{header:"Codice Cliente Interno",accessorKey:"internal_customer_code",cell:Ve},{header:"Codice Cliente Esterno",accessorKey:"external_customer_code",cell:Ve},{header:"Riferimento Ordine Cliente",accessorKey:"customer_order_ref",cell:Ve},{header:"ID Fase",accessorKey:"fase"},{header:"Nome Fase",accessorKey:"phase_name"},{header:"Durata (ore)",accessorKey:"duration",cell:O=>{const A=O.getValue();return typeof A=="number"?A.toFixed(1):A}},{header:"Costo (€)",accessorKey:"cost",cell:O=>{const A=O.getValue();return typeof A=="number"?A.toFixed(1):A}},{header:"Priorità",accessorKey:"priority"},{header:"Stato",accessorKey:"status"},{header:"ID Macchina Programmata",accessorKey:"scheduled_machine_id"},{header:"Nome Macchina",accessorKey:"machine_name"},{header:"Progresso (%)",accessorKey:"progress"},{header:"Tempo Rimanente (ore)",accessorKey:"time_remaining",cell:O=>{const A=O.getValue();return typeof A=="number"?A.toFixed(1):A}},{header:"Creato il",accessorKey:"created_at",cell:O=>new Date(O.getValue()).toLocaleDateString()},{header:"Aggiornato il",accessorKey:"updated_at",cell:O=>new Date(O.getValue()).toLocaleDateString()}],[]),x=async O=>{const A=_(O);if(A.length>0){l(`Errori di validazione:
${A.join(`
`)}`,"error");return}const{machine_name:M,phase_name:D,progress:V,time_remaining:F,...I}=O;await w(()=>e(O.id,I),{context:"Aggiorna Ordine",fallbackMessage:"Aggiornamento ordine fallito"})},C=async O=>{u("Elimina Ordine",`Sei sicuro di voler eliminare "${O.odp_number}"? Questa azione non può essere annullata.`,async()=>{await w(()=>n(O.id),{context:"Elimina Ordine",fallbackMessage:"Eliminazione ordine fallita"})},"danger")};return a?y.jsx("div",{children:"Caricamento dati backlog..."}):i?y.jsxs("div",{className:"content-section",children:[y.jsx(_s,{title:"Backlog Produzione"}),y.jsx(Dm,{columns:S,data:b,onSaveRow:x,onDeleteRow:C})]}):y.jsx("div",{className:"error",children:"Seleziona un centro di lavoro per visualizzare i dati del backlog."})}const Pk=({onSuccess:t,orderToEdit:e})=>{const{addOdpOrder:n,updateOdpOrder:i}=Mt(),{showAlert:a,selectedWorkCenter:o}=Re(),{calculateProductionMetrics:l,autoDetermineWorkCenter:u,autoDetermineDepartment:d}=IS(),{handleAsync:f}=ws("BacklogForm"),[g,p]=R.useState(null),b=!!e,_=R.useMemo(()=>({odp_number:e?.odp_number||"",article_code:e?.article_code||"",production_lot:e?.production_lot||"",work_center:e?.work_center||(o===Ae.BOTH?"":o||""),nome_cliente:e?.nome_cliente||"",description:e?.description||"",delivery_date:e?.delivery_date||"",bag_height:e?.bag_height||"",bag_width:e?.bag_width||"",bag_step:e?.bag_step||"",seal_sides:e?.seal_sides||_t.ORDER.SEAL_SIDES,product_type:e?.product_type||"",quantity:e?.quantity||"",quantity_per_box:e?.quantity_per_box||"",quantity_completed:e?.quantity_completed||_t.ORDER.QUANTITY_COMPLETED,internal_customer_code:e?.internal_customer_code||"",external_customer_code:e?.external_customer_code||"",customer_order_ref:e?.customer_order_ref||"",department:e?.department||"",fase:e?.fase||""}),[o,e]),{register:w,handleSubmit:S,formState:{errors:x,isSubmitting:C},watch:O,setValue:A,getValues:M,reset:D,clearErrors:V}=Md({defaultValues:_}),F=O("article_code"),I=O("department"),W=O("work_center"),{phaseSearch:X,setPhaseSearch:Q,isDropdownVisible:H,setIsDropdownVisible:ie,selectedPhase:se,setSelectedPhase:ue,filteredPhases:P,editablePhaseParams:K,setEditablePhaseParams:le,handlePhaseParamChange:de,handlePhaseSelect:N,handleBlur:Z}=sk(I,W);R.useEffect(()=>{if(F){const q=d(F),oe=u(F);A("department",q),o===Ae.BOTH&&A("work_center",oe),A("fase",""),Q(""),ue(null),le({}),p(null)}},[F,d,u,A,o]);const ae=async q=>{if(!g||!g.totals){a("Calcola le metriche di produzione prima di aggiungere al backlog.","warning");return}if(typeof g.totals.duration!="number"||typeof g.totals.cost!="number"){a("Risultati del calcolo non validi. Ricalcola le metriche di produzione.","error");return}await f(async()=>{const oe={...q,duration:g.totals.duration,cost:g.totals.cost,status:b?e.status:"NOT SCHEDULED"};b?await i(e.id,oe):await n(oe),t&&t(),D(_),Q(""),ue(null),le({}),p(null)},{context:b?"Update Order":"Add Order",fallbackMessage:b?"Aggiornamento ordine fallito":"Aggiunta ordine al backlog fallita"})},re=q=>{N(q,A,V),p(null)},me=()=>{if(!se||!M("quantity")||!M("bag_step")){a("Seleziona una fase e inserisci Quantità e Passo Busta per calcolare.","warning");return}const q={...se,...K},oe=l(q,M("quantity"),M("bag_step"));if(!oe){a("Errore nel calcolo. Verifica che tutti i parametri della fase siano impostati correttamente.","error"),p(null);return}if(typeof oe.totals?.duration!="number"||typeof oe.totals?.cost!="number"){a("Risultati del calcolo non validi. Verifica i parametri della fase.","error"),p(null);return}p(oe)},be=q=>x[q]?y.jsx("span",{className:"error-message",style:{color:"red",fontSize:"12px",marginTop:"4px"},children:x[q].message}):null;return y.jsx("div",{className:"content-section",children:y.jsxs("form",{onSubmit:S(ae),children:[y.jsxs("div",{className:"form-section",children:[y.jsx("h3",{className:"section-title",children:"Identificazione"}),y.jsxs("div",{className:"form-grid form-grid--3-cols",children:[y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"odp_number",children:"ODP Number *"}),y.jsx("input",{type:"text",id:"odp_number",...w("odp_number",{required:"ODP Number is required"}),placeholder:"Numero ODP",className:x.odp_number?"error":""}),be("odp_number")]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"article_code",children:"Article Code *"}),y.jsx("input",{type:"text",id:"article_code",...w("article_code",{required:"Article Code is required"}),placeholder:"Codice Articolo",className:x.article_code?"error":""}),be("article_code")]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"production_lot",children:"External Article Code *"}),y.jsx("input",{type:"text",id:"production_lot",...w("production_lot",{required:"External Article Code is required"}),placeholder:"Codice Articolo Esterno",className:x.production_lot?"error":""}),be("production_lot")]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"work_center",children:"Work Center"}),o===Ae.BOTH?y.jsxs("select",{...w("work_center",{required:"Work center is required"}),id:"work_center",className:x.work_center?"error":"",children:[y.jsx("option",{value:"",children:"Seleziona un centro di lavoro"}),y.jsx("option",{value:Ae.ZANICA,children:Ae.ZANICA}),y.jsx("option",{value:Ae.BUSTO_GAROLFO,children:Ae.BUSTO_GAROLFO})]}):y.jsx("input",{type:"text",id:"work_center",value:o||"Nessun centro di lavoro selezionato",disabled:!0,className:"disabled-input",style:{backgroundColor:"#f5f5f5",color:"#666"}}),o===Ae.BOTH?x.work_center&&y.jsx("span",{className:"error-message",children:x.work_center.message}):y.jsx("small",{style:{color:"#666",fontSize:"12px"},children:"Il centro di lavoro è impostato in base alla tua selezione di accesso"})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"nome_cliente",children:"Customer Name"}),y.jsx("input",{type:"text",id:"nome_cliente",...w("nome_cliente"),placeholder:"Nome Cliente"})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"description",children:"Description"}),y.jsx("textarea",{id:"description",...w("description"),placeholder:"Descrizione",rows:"2"})]})]})]}),y.jsxs("div",{className:"form-section",children:[y.jsx("h3",{className:"section-title",children:"Specifiche Tecniche"}),y.jsxs("div",{className:"form-grid form-grid--3-cols",children:[y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"bag_height",children:"Bag Height (mm) *"}),y.jsx("input",{type:"number",id:"bag_height",...w("bag_height",{required:"Bag Height is required",min:{value:0,message:"Bag Height must be at least 0"}}),placeholder:"Altezza Busta",min:"0",step:"1",className:x.bag_height?"error":""}),be("bag_height")]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"bag_width",children:"Bag Width (mm) *"}),y.jsx("input",{type:"number",id:"bag_width",...w("bag_width",{required:"Bag Width is required",min:{value:0,message:"Bag Width must be at least 0"}}),placeholder:"Larghezza Busta",min:"0",step:"1",className:x.bag_width?"error":""}),be("bag_width")]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"bag_step",children:"Bag Step (mm) *"}),y.jsx("input",{type:"number",id:"bag_step",...w("bag_step",{required:"Bag Step is required",min:{value:0,message:"Bag Step must be at least 0"}}),placeholder:"Passo Busta",min:"0",step:"1",className:x.bag_step?"error":""}),be("bag_step")]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"seal_sides",children:"Seal Sides"}),y.jsxs("select",{id:"seal_sides",...w("seal_sides"),children:[y.jsx("option",{value:Bl.THREE,children:"3 sides"}),y.jsx("option",{value:Bl.FOUR,children:"4 sides"})]})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"product_type",children:"Product Type *"}),y.jsxs("select",{id:"product_type",...w("product_type",{required:"Product Type is required"}),className:x.product_type?"error":"",children:[y.jsx("option",{value:"",children:"Seleziona tipo prodotto"}),y.jsx("option",{value:qr.CREMA,children:"Crema"}),y.jsx("option",{value:qr.LIQUIDO,children:"Liquido"}),y.jsx("option",{value:qr.POLVERI,children:"Polveri"})]}),be("product_type")]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"quantity",children:"Quantity *"}),y.jsx("input",{type:"number",id:"quantity",...w("quantity",{required:"Quantity is required",min:{value:0,message:"Quantity must be at least 0"}}),placeholder:"Quantità",min:"0",step:"1",className:x.quantity?"error":""}),be("quantity")]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"quantity_per_box",children:"Qty per Box"}),y.jsx("input",{type:"number",id:"quantity_per_box",...w("quantity_per_box",{min:{value:0,message:"Quantity per Box must be at least 0"}}),placeholder:"Q.tà per Scatola",min:"0",step:"1"})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"quantity_completed",children:"Qty Completed"}),y.jsx("input",{type:"number",id:"quantity_completed",...w("quantity_completed",{min:{value:0,message:"Quantity Completed must be at least 0"}}),placeholder:"Q.tà Completata",min:"0",step:"1",className:x.quantity_completed?"error":""}),be("quantity_completed")]})]})]}),y.jsxs("div",{className:"form-section",children:[y.jsx("h3",{className:"section-title",children:"Dati Commerciali"}),y.jsxs("div",{className:"form-grid form-grid--3-cols",children:[y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"internal_customer_code",children:"FLEXI Lot"}),y.jsx("input",{type:"text",id:"internal_customer_code",...w("internal_customer_code"),placeholder:"Lotto FLEXI"})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"external_customer_code",children:"Customer Lot"}),y.jsx("input",{type:"text",id:"external_customer_code",...w("external_customer_code"),placeholder:"Lotto Cliente"})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"customer_order_ref",children:"Customer Ref"}),y.jsx("input",{type:"text",id:"customer_order_ref",...w("customer_order_ref"),placeholder:"Riferimento Cliente"})]})]})]}),y.jsxs("div",{className:"form-section",children:[y.jsx("h3",{className:"section-title",children:"Dati Lavorazione & Pianificazione"}),y.jsxs("div",{className:"form-grid form-grid--3-cols",children:[y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"department",children:"Department"}),y.jsx("input",{type:"text",id:"department",...w("department"),placeholder:"Reparto",readOnly:!0})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"phase_search",children:"Search Production Phase *"}),y.jsxs("div",{className:"searchable-dropdown",children:[y.jsx("input",{type:"text",id:"phase_search",value:X,onChange:q=>Q(q.target.value),onFocus:()=>ie(!0),onBlur:Z,placeholder:"Cerca Fase Produzione",className:x.fase?"error":""}),y.jsx("input",{type:"hidden",...w("fase",{required:"Production Phase is required"})}),be("fase"),H&&P.length>0&&y.jsx("div",{className:"dropdown-options",children:P.map(q=>y.jsxs("div",{className:"dropdown-option",onMouseDown:()=>re(q),children:[y.jsx("span",{className:"phase-name",children:q.name}),y.jsx("span",{className:"phase-description",children:q.contenuto_fase||"Nessuna descrizione"})]},q.id))})]})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"delivery_date",children:"Delivery Date *"}),y.jsx("input",{type:"datetime-local",id:"delivery_date",...w("delivery_date",{required:"Delivery Date is required"}),className:x.delivery_date?"error":""}),be("delivery_date")]})]})]}),se&&y.jsxs("div",{className:"form-section",children:[y.jsx("h3",{className:"section-title",children:"Parametri Fase Selezionata"}),y.jsx("div",{className:"form-grid form-grid--3-cols",children:se.department===It.PRINTING?y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"v_stampa",children:"Print Speed:"}),y.jsx("input",{type:"number",id:"v_stampa",value:K.v_stampa||se.v_stampa||"",onChange:q=>de("v_stampa",q.target.value),placeholder:"Velocità Stampa",min:"0"}),y.jsx("span",{className:"unit-label",children:"mt/h"})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"t_setup_stampa",children:"Print Setup:"}),y.jsx("input",{type:"number",id:"t_setup_stampa",value:K.t_setup_stampa||se.t_setup_stampa||"",onChange:q=>de("t_setup_stampa",q.target.value),placeholder:"Tempo Setup",min:"0",step:"0.1"}),y.jsx("span",{className:"unit-label",children:"h"})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"costo_h_stampa",children:"Costo Stampa:"}),y.jsx("input",{type:"number",id:"costo_h_stampa",value:K.costo_h_stampa||se.costo_h_stampa||"",onChange:q=>de("costo_h_stampa",q.target.value),placeholder:"Costo Orario",min:"0",step:"0.01"}),y.jsx("span",{className:"unit-label",children:"€/h"})]})]}):y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"v_conf",children:"Velocità Confezionamento:"}),y.jsx("input",{type:"number",id:"v_conf",value:K.v_conf||se.v_conf||"",onChange:q=>de("v_conf",q.target.value),placeholder:"Velocità Confezionamento",min:"0"}),y.jsx("span",{className:"unit-label",children:"pz/h"})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"t_setup_conf",children:"Setup Confezionamento:"}),y.jsx("input",{type:"number",id:"t_setup_conf",value:K.t_setup_conf||se.t_setup_conf||"",onChange:q=>de("t_setup_conf",q.target.value),placeholder:"Tempo Setup",min:"0",step:"0.1"}),y.jsx("span",{className:"unit-label",children:"h"})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"costo_h_conf",children:"Costo Confezionamento:"}),y.jsx("input",{type:"number",id:"costo_h_conf",value:K.costo_h_conf||se.costo_h_conf||"",onChange:q=>de("costo_h_conf",q.target.value),placeholder:"Costo Orario",min:"0",step:"0.01"}),y.jsx("span",{className:"unit-label",children:"€/h"})]})]})})]}),g&&g.totals&&y.jsxs("div",{className:"form-section",children:[y.jsx("h3",{className:"section-title",children:"Risultati Calcolo Produzione"}),y.jsxs("div",{className:"form-grid form-grid--2-cols",children:[y.jsxs("div",{className:"form-group",children:[y.jsx("label",{children:"Durata Totale (ore):"}),y.jsx("div",{className:"result-value",children:typeof g.totals.duration=="number"?g.totals.duration.toFixed(2):"Errore calcolo"})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{children:"Costo Totale (€):"}),y.jsx("div",{className:"result-value",children:typeof g.totals.cost=="number"?g.totals.cost.toFixed(2):"Errore calcolo"})]})]})]}),y.jsxs("div",{className:"form-actions",style:{marginTop:"20px"},children:[y.jsx("button",{type:"button",className:"nav-btn today",onClick:me,disabled:!se,children:"Calcola"}),y.jsx("button",{type:"submit",className:"nav-btn today",disabled:!g||C,children:C?b?"Aggiornamento Ordine...":"Aggiunta al Backlog...":b?"Aggiorna Ordine":"Aggiungi al Backlog"})]})]})})};function h0(){const{id:t}=Cd(),e=sa(),{odpOrders:n,getOdpOrderById:i}=Mt(),{selectedWorkCenter:a}=Re(),{isLoading:o,isInitialized:l,init:u,cleanup:d}=Ui(),f=!!t,g=f?i(t):null;return R.useEffect(()=>(l||u(),()=>{d()}),[u,l,d]),R.useEffect(()=>{f&&!o&&!g&&e("/backlog",{replace:!0})},[f,o,g,e]),o?y.jsx("div",{children:"Caricamento..."}):f&&!g?y.jsx("div",{className:"error",children:"Ordine non trovato."}):a?y.jsxs("div",{className:"content-section",children:[y.jsx(_s,{title:f?`Modifica Ordine: ${g?.odp_number}`:"Aggiungi Nuovo Ordine"}),y.jsx(Pk,{onSuccess:void 0,orderToEdit:g})]}):y.jsx("div",{className:"error",children:"Seleziona un centro di lavoro per gestire gli ordini del backlog."})}const kd=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function ao(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function Im(t){return"nodeType"in t}function Cn(t){var e,n;return t?ao(t)?t:Im(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function Fm(t){const{Document:e}=Cn(t);return t instanceof e}function oc(t){return ao(t)?!1:t instanceof Cn(t).HTMLElement}function ex(t){return t instanceof Cn(t).SVGElement}function ro(t){return t?ao(t)?t.document:Im(t)?Fm(t)?t:oc(t)||ex(t)?t.ownerDocument:document:document:document}const ys=kd?R.useLayoutEffect:R.useEffect;function Nd(t){const e=R.useRef(t);return ys(()=>{e.current=t}),R.useCallback(function(){for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return e.current==null?void 0:e.current(...i)},[])}function zk(){const t=R.useRef(null),e=R.useCallback((i,a)=>{t.current=setInterval(i,a)},[]),n=R.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,n]}function ql(t,e){e===void 0&&(e=[t]);const n=R.useRef(t);return ys(()=>{n.current!==t&&(n.current=t)},e),n}function lc(t,e){const n=R.useRef();return R.useMemo(()=>{const i=t(n.current);return n.current=i,i},[...e])}function ud(t){const e=Nd(t),n=R.useRef(null),i=R.useCallback(a=>{a!==n.current&&e?.(a,n.current),n.current=a},[]);return[n,i]}function dd(t){const e=R.useRef();return R.useEffect(()=>{e.current=t},[t]),e.current}let _g={};function jd(t,e){return R.useMemo(()=>{if(e)return e;const n=_g[t]==null?0:_g[t]+1;return _g[t]=n,t+"-"+n},[t,e])}function tx(t){return function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];return i.reduce((o,l)=>{const u=Object.entries(l);for(const[d,f]of u){const g=o[d];g!=null&&(o[d]=g+t*f)}return o},{...e})}}const Yr=tx(1),hd=tx(-1);function Ik(t){return"clientX"in t&&"clientY"in t}function Um(t){if(!t)return!1;const{KeyboardEvent:e}=Cn(t.target);return e&&t instanceof e}function Fk(t){if(!t)return!1;const{TouchEvent:e}=Cn(t.target);return e&&t instanceof e}function fd(t){if(Fk(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return Ik(t)?{x:t.clientX,y:t.clientY}:null}const Gl=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[Gl.Translate.toString(t),Gl.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:i}=t;return e+" "+n+"ms "+i}}}),f0="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Uk(t){return t.matches(f0)?t:t.querySelector(f0)}const Hk={display:"none"};function Bk(t){let{id:e,value:n}=t;return Me.createElement("div",{id:e,style:Hk},n)}function Vk(t){let{id:e,announcement:n,ariaLiveType:i="assertive"}=t;const a={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Me.createElement("div",{id:e,style:a,role:"status","aria-live":i,"aria-atomic":!0},n)}function $k(){const[t,e]=R.useState("");return{announce:R.useCallback(i=>{i!=null&&e(i)},[]),announcement:t}}const nx=R.createContext(null);function qk(t){const e=R.useContext(nx);R.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function Gk(){const[t]=R.useState(()=>new Set),e=R.useCallback(i=>(t.add(i),()=>t.delete(i)),[t]);return[R.useCallback(i=>{let{type:a,event:o}=i;t.forEach(l=>{var u;return(u=l[a])==null?void 0:u.call(l,o)})},[t]),e]}const Yk={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},Wk={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function Kk(t){let{announcements:e=Wk,container:n,hiddenTextDescribedById:i,screenReaderInstructions:a=Yk}=t;const{announce:o,announcement:l}=$k(),u=jd("DndLiveRegion"),[d,f]=R.useState(!1);if(R.useEffect(()=>{f(!0)},[]),qk(R.useMemo(()=>({onDragStart(p){let{active:b}=p;o(e.onDragStart({active:b}))},onDragMove(p){let{active:b,over:_}=p;e.onDragMove&&o(e.onDragMove({active:b,over:_}))},onDragOver(p){let{active:b,over:_}=p;o(e.onDragOver({active:b,over:_}))},onDragEnd(p){let{active:b,over:_}=p;o(e.onDragEnd({active:b,over:_}))},onDragCancel(p){let{active:b,over:_}=p;o(e.onDragCancel({active:b,over:_}))}}),[o,e])),!d)return null;const g=Me.createElement(Me.Fragment,null,Me.createElement(Bk,{id:i,value:a.draggable}),Me.createElement(Vk,{id:u,announcement:l}));return n?_l.createPortal(g,n):g}var Gt;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(Gt||(Gt={}));function gd(){}const Si=Object.freeze({x:0,y:0});function Xk(t,e){const n=fd(t);if(!n)return"0 0";const i={x:(n.x-e.left)/e.width*100,y:(n.y-e.top)/e.height*100};return i.x+"% "+i.y+"%"}function Qk(t,e){let{data:{value:n}}=t,{data:{value:i}}=e;return i-n}function Zk(t,e){if(!t||t.length===0)return null;const[n]=t;return n[e]}function Jk(t,e){const n=Math.max(e.top,t.top),i=Math.max(e.left,t.left),a=Math.min(e.left+e.width,t.left+t.width),o=Math.min(e.top+e.height,t.top+t.height),l=a-i,u=o-n;if(i<a&&n<o){const d=e.width*e.height,f=t.width*t.height,g=l*u,p=g/(d+f-g);return Number(p.toFixed(4))}return 0}const eN=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:i}=t;const a=[];for(const o of i){const{id:l}=o,u=n.get(l);if(u){const d=Jk(u,e);d>0&&a.push({id:l,data:{droppableContainer:o,value:d}})}}return a.sort(Qk)};function tN(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function ix(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:Si}function nN(t){return function(n){for(var i=arguments.length,a=new Array(i>1?i-1:0),o=1;o<i;o++)a[o-1]=arguments[o];return a.reduce((l,u)=>({...l,top:l.top+t*u.y,bottom:l.bottom+t*u.y,left:l.left+t*u.x,right:l.right+t*u.x}),{...n})}}const iN=nN(1);function sx(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function sN(t,e,n){const i=sx(e);if(!i)return t;const{scaleX:a,scaleY:o,x:l,y:u}=i,d=t.left-l-(1-a)*parseFloat(n),f=t.top-u-(1-o)*parseFloat(n.slice(n.indexOf(" ")+1)),g=a?t.width/a:t.width,p=o?t.height/o:t.height;return{width:g,height:p,top:f,right:d+g,bottom:f+p,left:d}}const aN={ignoreTransform:!1};function cc(t,e){e===void 0&&(e=aN);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:f,transformOrigin:g}=Cn(t).getComputedStyle(t);f&&(n=sN(n,f,g))}const{top:i,left:a,width:o,height:l,bottom:u,right:d}=n;return{top:i,left:a,width:o,height:l,bottom:u,right:d}}function g0(t){return cc(t,{ignoreTransform:!0})}function rN(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function oN(t,e){return e===void 0&&(e=Cn(t).getComputedStyle(t)),e.position==="fixed"}function lN(t,e){e===void 0&&(e=Cn(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(a=>{const o=e[a];return typeof o=="string"?n.test(o):!1})}function Hm(t,e){const n=[];function i(a){if(e!=null&&n.length>=e||!a)return n;if(Fm(a)&&a.scrollingElement!=null&&!n.includes(a.scrollingElement))return n.push(a.scrollingElement),n;if(!oc(a)||ex(a)||n.includes(a))return n;const o=Cn(t).getComputedStyle(a);return a!==t&&lN(a,o)&&n.push(a),oN(a,o)?n:i(a.parentNode)}return t?i(t):n}function ax(t){const[e]=Hm(t,1);return e??null}function wg(t){return!kd||!t?null:ao(t)?t:Im(t)?Fm(t)||t===ro(t).scrollingElement?window:oc(t)?t:null:null}function rx(t){return ao(t)?t.scrollX:t.scrollLeft}function ox(t){return ao(t)?t.scrollY:t.scrollTop}function em(t){return{x:rx(t),y:ox(t)}}var tn;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(tn||(tn={}));function lx(t){return!kd||!t?!1:t===document.scrollingElement}function cx(t){const e={x:0,y:0},n=lx(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},i={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},a=t.scrollTop<=e.y,o=t.scrollLeft<=e.x,l=t.scrollTop>=i.y,u=t.scrollLeft>=i.x;return{isTop:a,isLeft:o,isBottom:l,isRight:u,maxScroll:i,minScroll:e}}const cN={x:.2,y:.2};function uN(t,e,n,i,a){let{top:o,left:l,right:u,bottom:d}=n;i===void 0&&(i=10),a===void 0&&(a=cN);const{isTop:f,isBottom:g,isLeft:p,isRight:b}=cx(t),_={x:0,y:0},w={x:0,y:0},S={height:e.height*a.y,width:e.width*a.x};return!f&&o<=e.top+S.height?(_.y=tn.Backward,w.y=i*Math.abs((e.top+S.height-o)/S.height)):!g&&d>=e.bottom-S.height&&(_.y=tn.Forward,w.y=i*Math.abs((e.bottom-S.height-d)/S.height)),!b&&u>=e.right-S.width?(_.x=tn.Forward,w.x=i*Math.abs((e.right-S.width-u)/S.width)):!p&&l<=e.left+S.width&&(_.x=tn.Backward,w.x=i*Math.abs((e.left+S.width-l)/S.width)),{direction:_,speed:w}}function dN(t){if(t===document.scrollingElement){const{innerWidth:o,innerHeight:l}=window;return{top:0,left:0,right:o,bottom:l,width:o,height:l}}const{top:e,left:n,right:i,bottom:a}=t.getBoundingClientRect();return{top:e,left:n,right:i,bottom:a,width:t.clientWidth,height:t.clientHeight}}function ux(t){return t.reduce((e,n)=>Yr(e,em(n)),Si)}function hN(t){return t.reduce((e,n)=>e+rx(n),0)}function fN(t){return t.reduce((e,n)=>e+ox(n),0)}function dx(t,e){if(e===void 0&&(e=cc),!t)return;const{top:n,left:i,bottom:a,right:o}=e(t);ax(t)&&(a<=0||o<=0||n>=window.innerHeight||i>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const gN=[["x",["left","right"],hN],["y",["top","bottom"],fN]];class Bm{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const i=Hm(n),a=ux(i);this.rect={...e},this.width=e.width,this.height=e.height;for(const[o,l,u]of gN)for(const d of l)Object.defineProperty(this,d,{get:()=>{const f=u(i),g=a[o]-f;return this.rect[d]+g},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class kl{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var i;return(i=this.target)==null?void 0:i.removeEventListener(...n)})},this.target=e}add(e,n,i){var a;(a=this.target)==null||a.addEventListener(e,n,i),this.listeners.push([e,n,i])}}function mN(t){const{EventTarget:e}=Cn(t);return t instanceof e?t:ro(t)}function Sg(t,e){const n=Math.abs(t.x),i=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+i**2)>e:"x"in e&&"y"in e?n>e.x&&i>e.y:"x"in e?n>e.x:"y"in e?i>e.y:!1}var ti;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(ti||(ti={}));function m0(t){t.preventDefault()}function pN(t){t.stopPropagation()}var lt;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(lt||(lt={}));const hx={start:[lt.Space,lt.Enter],cancel:[lt.Esc],end:[lt.Space,lt.Enter,lt.Tab]},vN=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case lt.Right:return{...n,x:n.x+25};case lt.Left:return{...n,x:n.x-25};case lt.Down:return{...n,y:n.y+25};case lt.Up:return{...n,y:n.y-25}}};class fx{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new kl(ro(n)),this.windowListeners=new kl(Cn(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(ti.Resize,this.handleCancel),this.windowListeners.add(ti.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(ti.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,i=e.node.current;i&&dx(i),n(Si)}handleKeyDown(e){if(Um(e)){const{active:n,context:i,options:a}=this.props,{keyboardCodes:o=hx,coordinateGetter:l=vN,scrollBehavior:u="smooth"}=a,{code:d}=e;if(o.end.includes(d)){this.handleEnd(e);return}if(o.cancel.includes(d)){this.handleCancel(e);return}const{collisionRect:f}=i.current,g=f?{x:f.left,y:f.top}:Si;this.referenceCoordinates||(this.referenceCoordinates=g);const p=l(e,{active:n,context:i.current,currentCoordinates:g});if(p){const b=hd(p,g),_={x:0,y:0},{scrollableAncestors:w}=i.current;for(const S of w){const x=e.code,{isTop:C,isRight:O,isLeft:A,isBottom:M,maxScroll:D,minScroll:V}=cx(S),F=dN(S),I={x:Math.min(x===lt.Right?F.right-F.width/2:F.right,Math.max(x===lt.Right?F.left:F.left+F.width/2,p.x)),y:Math.min(x===lt.Down?F.bottom-F.height/2:F.bottom,Math.max(x===lt.Down?F.top:F.top+F.height/2,p.y))},W=x===lt.Right&&!O||x===lt.Left&&!A,X=x===lt.Down&&!M||x===lt.Up&&!C;if(W&&I.x!==p.x){const Q=S.scrollLeft+b.x,H=x===lt.Right&&Q<=D.x||x===lt.Left&&Q>=V.x;if(H&&!b.y){S.scrollTo({left:Q,behavior:u});return}H?_.x=S.scrollLeft-Q:_.x=x===lt.Right?S.scrollLeft-D.x:S.scrollLeft-V.x,_.x&&S.scrollBy({left:-_.x,behavior:u});break}else if(X&&I.y!==p.y){const Q=S.scrollTop+b.y,H=x===lt.Down&&Q<=D.y||x===lt.Up&&Q>=V.y;if(H&&!b.x){S.scrollTo({top:Q,behavior:u});return}H?_.y=S.scrollTop-Q:_.y=x===lt.Down?S.scrollTop-D.y:S.scrollTop-V.y,_.y&&S.scrollBy({top:-_.y,behavior:u});break}}this.handleMove(e,Yr(hd(p,this.referenceCoordinates),_))}}}handleMove(e,n){const{onMove:i}=this.props;e.preventDefault(),i(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}fx.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:i=hx,onActivation:a}=e,{active:o}=n;const{code:l}=t.nativeEvent;if(i.start.includes(l)){const u=o.activatorNode.current;return u&&t.target!==u?!1:(t.preventDefault(),a?.({event:t.nativeEvent}),!0)}return!1}}];function p0(t){return!!(t&&"distance"in t)}function v0(t){return!!(t&&"delay"in t)}class Vm{constructor(e,n,i){var a;i===void 0&&(i=mN(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:o}=e,{target:l}=o;this.props=e,this.events=n,this.document=ro(l),this.documentListeners=new kl(this.document),this.listeners=new kl(i),this.windowListeners=new kl(Cn(l)),this.initialCoordinates=(a=fd(o))!=null?a:Si,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:i}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(ti.Resize,this.handleCancel),this.windowListeners.add(ti.DragStart,m0),this.windowListeners.add(ti.VisibilityChange,this.handleCancel),this.windowListeners.add(ti.ContextMenu,m0),this.documentListeners.add(ti.Keydown,this.handleKeydown),n){if(i!=null&&i({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(v0(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(p0(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,n){const{active:i,onPending:a}=this.props;a(i,e,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(ti.Click,pN,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(ti.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:i,initialCoordinates:a,props:o}=this,{onMove:l,options:{activationConstraint:u}}=o;if(!a)return;const d=(n=fd(e))!=null?n:Si,f=hd(a,d);if(!i&&u){if(p0(u)){if(u.tolerance!=null&&Sg(f,u.tolerance))return this.handleCancel();if(Sg(f,u.distance))return this.handleStart()}if(v0(u)&&Sg(f,u.tolerance))return this.handleCancel();this.handlePending(u,f);return}e.cancelable&&e.preventDefault(),l(d)}handleEnd(){const{onAbort:e,onEnd:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleCancel(){const{onAbort:e,onCancel:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleKeydown(e){e.code===lt.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const yN={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class gx extends Vm{constructor(e){const{event:n}=e,i=ro(n.target);super(e,yN,i)}}gx.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:i}=e;return!n.isPrimary||n.button!==0?!1:(i?.({event:n}),!0)}}];const bN={move:{name:"mousemove"},end:{name:"mouseup"}};var tm;(function(t){t[t.RightClick=2]="RightClick"})(tm||(tm={}));class _N extends Vm{constructor(e){super(e,bN,ro(e.event.target))}}_N.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:i}=e;return n.button===tm.RightClick?!1:(i?.({event:n}),!0)}}];const xg={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class wN extends Vm{constructor(e){super(e,xg)}static setup(){return window.addEventListener(xg.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(xg.move.name,e)};function e(){}}}wN.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:i}=e;const{touches:a}=n;return a.length>1?!1:(i?.({event:n}),!0)}}];var Nl;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(Nl||(Nl={}));var md;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(md||(md={}));function SN(t){let{acceleration:e,activator:n=Nl.Pointer,canScroll:i,draggingRect:a,enabled:o,interval:l=5,order:u=md.TreeOrder,pointerCoordinates:d,scrollableAncestors:f,scrollableAncestorRects:g,delta:p,threshold:b}=t;const _=EN({delta:p,disabled:!o}),[w,S]=zk(),x=R.useRef({x:0,y:0}),C=R.useRef({x:0,y:0}),O=R.useMemo(()=>{switch(n){case Nl.Pointer:return d?{top:d.y,bottom:d.y,left:d.x,right:d.x}:null;case Nl.DraggableRect:return a}},[n,a,d]),A=R.useRef(null),M=R.useCallback(()=>{const V=A.current;if(!V)return;const F=x.current.x*C.current.x,I=x.current.y*C.current.y;V.scrollBy(F,I)},[]),D=R.useMemo(()=>u===md.TreeOrder?[...f].reverse():f,[u,f]);R.useEffect(()=>{if(!o||!f.length||!O){S();return}for(const V of D){if(i?.(V)===!1)continue;const F=f.indexOf(V),I=g[F];if(!I)continue;const{direction:W,speed:X}=uN(V,I,O,e,b);for(const Q of["x","y"])_[Q][W[Q]]||(X[Q]=0,W[Q]=0);if(X.x>0||X.y>0){S(),A.current=V,w(M,l),x.current=X,C.current=W;return}}x.current={x:0,y:0},C.current={x:0,y:0},S()},[e,M,i,S,o,l,JSON.stringify(O),JSON.stringify(_),w,f,D,g,JSON.stringify(b)])}const xN={x:{[tn.Backward]:!1,[tn.Forward]:!1},y:{[tn.Backward]:!1,[tn.Forward]:!1}};function EN(t){let{delta:e,disabled:n}=t;const i=dd(e);return lc(a=>{if(n||!i||!a)return xN;const o={x:Math.sign(e.x-i.x),y:Math.sign(e.y-i.y)};return{x:{[tn.Backward]:a.x[tn.Backward]||o.x===-1,[tn.Forward]:a.x[tn.Forward]||o.x===1},y:{[tn.Backward]:a.y[tn.Backward]||o.y===-1,[tn.Forward]:a.y[tn.Forward]||o.y===1}}},[n,e,i])}function CN(t,e){const n=e!=null?t.get(e):void 0,i=n?n.node.current:null;return lc(a=>{var o;return e==null?null:(o=i??a)!=null?o:null},[i,e])}function ON(t,e){return R.useMemo(()=>t.reduce((n,i)=>{const{sensor:a}=i,o=a.activators.map(l=>({eventName:l.eventName,handler:e(l.handler,i)}));return[...n,...o]},[]),[t,e])}var Yl;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(Yl||(Yl={}));var nm;(function(t){t.Optimized="optimized"})(nm||(nm={}));const y0=new Map;function RN(t,e){let{dragging:n,dependencies:i,config:a}=e;const[o,l]=R.useState(null),{frequency:u,measure:d,strategy:f}=a,g=R.useRef(t),p=x(),b=ql(p),_=R.useCallback(function(C){C===void 0&&(C=[]),!b.current&&l(O=>O===null?C:O.concat(C.filter(A=>!O.includes(A))))},[b]),w=R.useRef(null),S=lc(C=>{if(p&&!n)return y0;if(!C||C===y0||g.current!==t||o!=null){const O=new Map;for(let A of t){if(!A)continue;if(o&&o.length>0&&!o.includes(A.id)&&A.rect.current){O.set(A.id,A.rect.current);continue}const M=A.node.current,D=M?new Bm(d(M),M):null;A.rect.current=D,D&&O.set(A.id,D)}return O}return C},[t,o,n,p,d]);return R.useEffect(()=>{g.current=t},[t]),R.useEffect(()=>{p||_()},[n,p]),R.useEffect(()=>{o&&o.length>0&&l(null)},[JSON.stringify(o)]),R.useEffect(()=>{p||typeof u!="number"||w.current!==null||(w.current=setTimeout(()=>{_(),w.current=null},u))},[u,p,_,...i]),{droppableRects:S,measureDroppableContainers:_,measuringScheduled:o!=null};function x(){switch(f){case Yl.Always:return!1;case Yl.BeforeDragging:return n;default:return!n}}}function $m(t,e){return lc(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function AN(t,e){return $m(t,e)}function TN(t){let{callback:e,disabled:n}=t;const i=Nd(e),a=R.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:o}=window;return new o(i)},[i,n]);return R.useEffect(()=>()=>a?.disconnect(),[a]),a}function Ld(t){let{callback:e,disabled:n}=t;const i=Nd(e),a=R.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:o}=window;return new o(i)},[n]);return R.useEffect(()=>()=>a?.disconnect(),[a]),a}function DN(t){return new Bm(cc(t),t)}function b0(t,e,n){e===void 0&&(e=DN);const[i,a]=R.useState(null);function o(){a(d=>{if(!t)return null;if(t.isConnected===!1){var f;return(f=d??n)!=null?f:null}const g=e(t);return JSON.stringify(d)===JSON.stringify(g)?d:g})}const l=TN({callback(d){if(t)for(const f of d){const{type:g,target:p}=f;if(g==="childList"&&p instanceof HTMLElement&&p.contains(t)){o();break}}}}),u=Ld({callback:o});return ys(()=>{o(),t?(u?.observe(t),l?.observe(document.body,{childList:!0,subtree:!0})):(u?.disconnect(),l?.disconnect())},[t]),i}function MN(t){const e=$m(t);return ix(t,e)}const _0=[];function kN(t){const e=R.useRef(t),n=lc(i=>t?i&&i!==_0&&t&&e.current&&t.parentNode===e.current.parentNode?i:Hm(t):_0,[t]);return R.useEffect(()=>{e.current=t},[t]),n}function NN(t){const[e,n]=R.useState(null),i=R.useRef(t),a=R.useCallback(o=>{const l=wg(o.target);l&&n(u=>u?(u.set(l,em(l)),new Map(u)):null)},[]);return R.useEffect(()=>{const o=i.current;if(t!==o){l(o);const u=t.map(d=>{const f=wg(d);return f?(f.addEventListener("scroll",a,{passive:!0}),[f,em(f)]):null}).filter(d=>d!=null);n(u.length?new Map(u):null),i.current=t}return()=>{l(t),l(o)};function l(u){u.forEach(d=>{const f=wg(d);f?.removeEventListener("scroll",a)})}},[a,t]),R.useMemo(()=>t.length?e?Array.from(e.values()).reduce((o,l)=>Yr(o,l),Si):ux(t):Si,[t,e])}function w0(t,e){e===void 0&&(e=[]);const n=R.useRef(null);return R.useEffect(()=>{n.current=null},e),R.useEffect(()=>{const i=t!==Si;i&&!n.current&&(n.current=t),!i&&n.current&&(n.current=null)},[t]),n.current?hd(t,n.current):Si}function jN(t){R.useEffect(()=>{if(!kd)return;const e=t.map(n=>{let{sensor:i}=n;return i.setup==null?void 0:i.setup()});return()=>{for(const n of e)n?.()}},t.map(e=>{let{sensor:n}=e;return n}))}function LN(t,e){return R.useMemo(()=>t.reduce((n,i)=>{let{eventName:a,handler:o}=i;return n[a]=l=>{o(l,e)},n},{}),[t,e])}function mx(t){return R.useMemo(()=>t?rN(t):null,[t])}const S0=[];function PN(t,e){e===void 0&&(e=cc);const[n]=t,i=mx(n?Cn(n):null),[a,o]=R.useState(S0);function l(){o(()=>t.length?t.map(d=>lx(d)?i:new Bm(e(d),d)):S0)}const u=Ld({callback:l});return ys(()=>{u?.disconnect(),l(),t.forEach(d=>u?.observe(d))},[t]),a}function px(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return oc(e)?e:t}function zN(t){let{measure:e}=t;const[n,i]=R.useState(null),a=R.useCallback(f=>{for(const{target:g}of f)if(oc(g)){i(p=>{const b=e(g);return p?{...p,width:b.width,height:b.height}:b});break}},[e]),o=Ld({callback:a}),l=R.useCallback(f=>{const g=px(f);o?.disconnect(),g&&o?.observe(g),i(g?e(g):null)},[e,o]),[u,d]=ud(l);return R.useMemo(()=>({nodeRef:u,rect:n,setRef:d}),[n,u,d])}const IN=[{sensor:gx,options:{}},{sensor:fx,options:{}}],FN={current:{}},Ju={draggable:{measure:g0},droppable:{measure:g0,strategy:Yl.WhileDragging,frequency:nm.Optimized},dragOverlay:{measure:cc}};class jl extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,i;return(n=(i=this.get(e))==null?void 0:i.node.current)!=null?n:void 0}}const UN={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new jl,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:gd},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Ju,measureDroppableContainers:gd,windowRect:null,measuringScheduled:!1},vx={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:gd,draggableNodes:new Map,over:null,measureDroppableContainers:gd},uc=R.createContext(vx),yx=R.createContext(UN);function HN(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new jl}}}function BN(t,e){switch(e.type){case Gt.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case Gt.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case Gt.DragEnd:case Gt.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Gt.RegisterDroppable:{const{element:n}=e,{id:i}=n,a=new jl(t.droppable.containers);return a.set(i,n),{...t,droppable:{...t.droppable,containers:a}}}case Gt.SetDroppableDisabled:{const{id:n,key:i,disabled:a}=e,o=t.droppable.containers.get(n);if(!o||i!==o.key)return t;const l=new jl(t.droppable.containers);return l.set(n,{...o,disabled:a}),{...t,droppable:{...t.droppable,containers:l}}}case Gt.UnregisterDroppable:{const{id:n,key:i}=e,a=t.droppable.containers.get(n);if(!a||i!==a.key)return t;const o=new jl(t.droppable.containers);return o.delete(n),{...t,droppable:{...t.droppable,containers:o}}}default:return t}}function VN(t){let{disabled:e}=t;const{active:n,activatorEvent:i,draggableNodes:a}=R.useContext(uc),o=dd(i),l=dd(n?.id);return R.useEffect(()=>{if(!e&&!i&&o&&l!=null){if(!Um(o)||document.activeElement===o.target)return;const u=a.get(l);if(!u)return;const{activatorNode:d,node:f}=u;if(!d.current&&!f.current)return;requestAnimationFrame(()=>{for(const g of[d.current,f.current]){if(!g)continue;const p=Uk(g);if(p){p.focus();break}}})}},[i,e,a,l,o]),null}function bx(t,e){let{transform:n,...i}=e;return t!=null&&t.length?t.reduce((a,o)=>o({transform:a,...i}),n):n}function $N(t){return R.useMemo(()=>({draggable:{...Ju.draggable,...t?.draggable},droppable:{...Ju.droppable,...t?.droppable},dragOverlay:{...Ju.dragOverlay,...t?.dragOverlay}}),[t?.draggable,t?.droppable,t?.dragOverlay])}function qN(t){let{activeNode:e,measure:n,initialRect:i,config:a=!0}=t;const o=R.useRef(!1),{x:l,y:u}=typeof a=="boolean"?{x:a,y:a}:a;ys(()=>{if(!l&&!u||!e){o.current=!1;return}if(o.current||!i)return;const f=e?.node.current;if(!f||f.isConnected===!1)return;const g=n(f),p=ix(g,i);if(l||(p.x=0),u||(p.y=0),o.current=!0,Math.abs(p.x)>0||Math.abs(p.y)>0){const b=ax(f);b&&b.scrollBy({top:p.y,left:p.x})}},[e,l,u,i,n])}const Pd=R.createContext({...Si,scaleX:1,scaleY:1});var Ks;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(Ks||(Ks={}));const GN=R.memo(function(e){var n,i,a,o;let{id:l,accessibility:u,autoScroll:d=!0,children:f,sensors:g=IN,collisionDetection:p=eN,measuring:b,modifiers:_,...w}=e;const S=R.useReducer(BN,void 0,HN),[x,C]=S,[O,A]=Gk(),[M,D]=R.useState(Ks.Uninitialized),V=M===Ks.Initialized,{draggable:{active:F,nodes:I,translate:W},droppable:{containers:X}}=x,Q=F!=null?I.get(F):null,H=R.useRef({initial:null,translated:null}),ie=R.useMemo(()=>{var xt;return F!=null?{id:F,data:(xt=Q?.data)!=null?xt:FN,rect:H}:null},[F,Q]),se=R.useRef(null),[ue,P]=R.useState(null),[K,le]=R.useState(null),de=ql(w,Object.values(w)),N=jd("DndDescribedBy",l),Z=R.useMemo(()=>X.getEnabled(),[X]),ae=$N(b),{droppableRects:re,measureDroppableContainers:me,measuringScheduled:be}=RN(Z,{dragging:V,dependencies:[W.x,W.y],config:ae.droppable}),q=CN(I,F),oe=R.useMemo(()=>K?fd(K):null,[K]),fe=lo(),Ne=AN(q,ae.draggable.measure);qN({activeNode:F!=null?I.get(F):null,config:fe.layoutShiftCompensation,initialRect:Ne,measure:ae.draggable.measure});const Le=b0(q,ae.draggable.measure,Ne),vt=b0(q?q.parentElement:null),We=R.useRef({activatorEvent:null,active:null,activeNode:q,collisionRect:null,collisions:null,droppableRects:re,draggableNodes:I,draggingNode:null,draggingNodeRect:null,droppableContainers:X,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Ft=X.getNodeFor((n=We.current.over)==null?void 0:n.id),tt=zN({measure:ae.dragOverlay.measure}),Rt=(i=tt.nodeRef.current)!=null?i:q,Ke=V?(a=tt.rect)!=null?a:Le:null,At=!!(tt.nodeRef.current&&tt.rect),li=MN(At?null:Le),Nn=mx(Rt?Cn(Rt):null),j=kN(V?Ft??q:null),B=PN(j),J=bx(_,{transform:{x:W.x-li.x,y:W.y-li.y,scaleX:1,scaleY:1},activatorEvent:K,active:ie,activeNodeRect:Le,containerNodeRect:vt,draggingNodeRect:Ke,over:We.current.over,overlayNodeRect:tt.rect,scrollableAncestors:j,scrollableAncestorRects:B,windowRect:Nn}),ge=oe?Yr(oe,W):null,he=NN(j),ce=w0(he),ve=w0(he,[Le]),Se=Yr(J,ce),Te=Ke?iN(Ke,J):null,$e=ie&&Te?p({active:ie,collisionRect:Te,droppableRects:re,droppableContainers:Z,pointerCoordinates:ge}):null,Hi=Zk($e,"id"),[Ut,Va]=R.useState(null),Ei=At?J:Yr(J,ve),Ci=tN(Ei,(o=Ut?.rect)!=null?o:null,Le),jn=R.useRef(null),Oi=R.useCallback((xt,bn)=>{let{sensor:cn,options:ci}=bn;if(se.current==null)return;const un=I.get(se.current);if(!un)return;const sn=xt.nativeEvent,Ln=new cn({active:se.current,activeNode:un,event:sn,options:ci,context:We,onAbort(ct){if(!I.get(ct))return;const{onDragAbort:gt}=de.current,dn={id:ct};gt?.(dn),O({type:"onDragAbort",event:dn})},onPending(ct,ft,gt,dn){if(!I.get(ct))return;const{onDragPending:la}=de.current,Ri={id:ct,constraint:ft,initialCoordinates:gt,offset:dn};la?.(Ri),O({type:"onDragPending",event:Ri})},onStart(ct){const ft=se.current;if(ft==null)return;const gt=I.get(ft);if(!gt)return;const{onDragStart:dn}=de.current,Vi={activatorEvent:sn,active:{id:ft,data:gt.data,rect:H}};_l.unstable_batchedUpdates(()=>{dn?.(Vi),D(Ks.Initializing),C({type:Gt.DragStart,initialCoordinates:ct,active:ft}),O({type:"onDragStart",event:Vi}),P(jn.current),le(sn)})},onMove(ct){C({type:Gt.DragMove,coordinates:ct})},onEnd:Ss(Gt.DragEnd),onCancel:Ss(Gt.DragCancel)});jn.current=Ln;function Ss(ct){return async function(){const{active:gt,collisions:dn,over:Vi,scrollAdjustedTranslate:la}=We.current;let Ri=null;if(gt&&la){const{cancelDrop:xs}=de.current;Ri={activatorEvent:sn,active:gt,collisions:dn,delta:la,over:Vi},ct===Gt.DragEnd&&typeof xs=="function"&&await Promise.resolve(xs(Ri))&&(ct=Gt.DragCancel)}se.current=null,_l.unstable_batchedUpdates(()=>{C({type:ct}),D(Ks.Uninitialized),Va(null),P(null),le(null),jn.current=null;const xs=ct===Gt.DragEnd?"onDragEnd":"onDragCancel";if(Ri){const $i=de.current[xs];$i?.(Ri),O({type:xs,event:Ri})}})}}},[I]),Bi=R.useCallback((xt,bn)=>(cn,ci)=>{const un=cn.nativeEvent,sn=I.get(ci);if(se.current!==null||!sn||un.dndKit||un.defaultPrevented)return;const Ln={active:sn};xt(cn,bn.options,Ln)===!0&&(un.dndKit={capturedBy:bn.sensor},se.current=ci,Oi(cn,bn))},[I,Oi]),oa=ON(g,Bi);jN(g),ys(()=>{Le&&M===Ks.Initializing&&D(Ks.Initialized)},[Le,M]),R.useEffect(()=>{const{onDragMove:xt}=de.current,{active:bn,activatorEvent:cn,collisions:ci,over:un}=We.current;if(!bn||!cn)return;const sn={active:bn,activatorEvent:cn,collisions:ci,delta:{x:Se.x,y:Se.y},over:un};_l.unstable_batchedUpdates(()=>{xt?.(sn),O({type:"onDragMove",event:sn})})},[Se.x,Se.y]),R.useEffect(()=>{const{active:xt,activatorEvent:bn,collisions:cn,droppableContainers:ci,scrollAdjustedTranslate:un}=We.current;if(!xt||se.current==null||!bn||!un)return;const{onDragOver:sn}=de.current,Ln=ci.get(Hi),Ss=Ln&&Ln.rect.current?{id:Ln.id,rect:Ln.rect.current,data:Ln.data,disabled:Ln.disabled}:null,ct={active:xt,activatorEvent:bn,collisions:cn,delta:{x:un.x,y:un.y},over:Ss};_l.unstable_batchedUpdates(()=>{Va(Ss),sn?.(ct),O({type:"onDragOver",event:ct})})},[Hi]),ys(()=>{We.current={activatorEvent:K,active:ie,activeNode:q,collisionRect:Te,collisions:$e,droppableRects:re,draggableNodes:I,draggingNode:Rt,draggingNodeRect:Ke,droppableContainers:X,over:Ut,scrollableAncestors:j,scrollAdjustedTranslate:Se},H.current={initial:Ke,translated:Te}},[ie,q,$e,Te,I,Rt,Ke,re,X,Ut,j,Se]),SN({...fe,delta:W,draggingRect:Te,pointerCoordinates:ge,scrollableAncestors:j,scrollableAncestorRects:B});const hc=R.useMemo(()=>({active:ie,activeNode:q,activeNodeRect:Le,activatorEvent:K,collisions:$e,containerNodeRect:vt,dragOverlay:tt,draggableNodes:I,droppableContainers:X,droppableRects:re,over:Ut,measureDroppableContainers:me,scrollableAncestors:j,scrollableAncestorRects:B,measuringConfiguration:ae,measuringScheduled:be,windowRect:Nn}),[ie,q,Le,K,$e,vt,tt,I,X,re,Ut,me,j,B,ae,be,Nn]),fc=R.useMemo(()=>({activatorEvent:K,activators:oa,active:ie,activeNodeRect:Le,ariaDescribedById:{draggable:N},dispatch:C,draggableNodes:I,over:Ut,measureDroppableContainers:me}),[K,oa,ie,Le,C,N,I,Ut,me]);return Me.createElement(nx.Provider,{value:A},Me.createElement(uc.Provider,{value:fc},Me.createElement(yx.Provider,{value:hc},Me.createElement(Pd.Provider,{value:Ci},f)),Me.createElement(VN,{disabled:u?.restoreFocus===!1})),Me.createElement(Kk,{...u,hiddenTextDescribedById:N}));function lo(){const xt=ue?.autoScrollEnabled===!1,bn=typeof d=="object"?d.enabled===!1:d===!1,cn=V&&!xt&&!bn;return typeof d=="object"?{...d,enabled:cn}:{enabled:cn}}}),YN=R.createContext(null),x0="button",WN="Draggable";function Qz(t){let{id:e,data:n,disabled:i=!1,attributes:a}=t;const o=jd(WN),{activators:l,activatorEvent:u,active:d,activeNodeRect:f,ariaDescribedById:g,draggableNodes:p,over:b}=R.useContext(uc),{role:_=x0,roleDescription:w="draggable",tabIndex:S=0}=a??{},x=d?.id===e,C=R.useContext(x?Pd:YN),[O,A]=ud(),[M,D]=ud(),V=LN(l,e),F=ql(n);ys(()=>(p.set(e,{id:e,key:o,node:O,activatorNode:M,data:F}),()=>{const W=p.get(e);W&&W.key===o&&p.delete(e)}),[p,e]);const I=R.useMemo(()=>({role:_,tabIndex:S,"aria-disabled":i,"aria-pressed":x&&_===x0?!0:void 0,"aria-roledescription":w,"aria-describedby":g.draggable}),[i,_,S,x,w,g.draggable]);return{active:d,activatorEvent:u,activeNodeRect:f,attributes:I,isDragging:x,listeners:i?void 0:V,node:O,over:b,setNodeRef:A,setActivatorNodeRef:D,transform:C}}function KN(){return R.useContext(yx)}const XN="Droppable",QN={timeout:25};function Zz(t){let{data:e,disabled:n=!1,id:i,resizeObserverConfig:a}=t;const o=jd(XN),{active:l,dispatch:u,over:d,measureDroppableContainers:f}=R.useContext(uc),g=R.useRef({disabled:n}),p=R.useRef(!1),b=R.useRef(null),_=R.useRef(null),{disabled:w,updateMeasurementsFor:S,timeout:x}={...QN,...a},C=ql(S??i),O=R.useCallback(()=>{if(!p.current){p.current=!0;return}_.current!=null&&clearTimeout(_.current),_.current=setTimeout(()=>{f(Array.isArray(C.current)?C.current:[C.current]),_.current=null},x)},[x]),A=Ld({callback:O,disabled:w||!l}),M=R.useCallback((I,W)=>{A&&(W&&(A.unobserve(W),p.current=!1),I&&A.observe(I))},[A]),[D,V]=ud(M),F=ql(e);return R.useEffect(()=>{!A||!D.current||(A.disconnect(),p.current=!1,A.observe(D.current))},[D,A]),R.useEffect(()=>(u({type:Gt.RegisterDroppable,element:{id:i,key:o,disabled:n,node:D,rect:b,data:F}}),()=>u({type:Gt.UnregisterDroppable,key:o,id:i})),[i]),R.useEffect(()=>{n!==g.current.disabled&&(u({type:Gt.SetDroppableDisabled,id:i,key:o,disabled:n}),g.current.disabled=n)},[i,o,n,u]),{active:l,rect:b,isOver:d?.id===i,node:D,over:d,setNodeRef:V}}function ZN(t){let{animation:e,children:n}=t;const[i,a]=R.useState(null),[o,l]=R.useState(null),u=dd(n);return!n&&!i&&u&&a(u),ys(()=>{if(!o)return;const d=i?.key,f=i?.props.id;if(d==null||f==null){a(null);return}Promise.resolve(e(f,o)).then(()=>{a(null)})},[e,i,o]),Me.createElement(Me.Fragment,null,n,i?R.cloneElement(i,{ref:l}):null)}const JN={x:0,y:0,scaleX:1,scaleY:1};function ej(t){let{children:e}=t;return Me.createElement(uc.Provider,{value:vx},Me.createElement(Pd.Provider,{value:JN},e))}const tj={position:"fixed",touchAction:"none"},nj=t=>Um(t)?"transform 250ms ease":void 0,ij=R.forwardRef((t,e)=>{let{as:n,activatorEvent:i,adjustScale:a,children:o,className:l,rect:u,style:d,transform:f,transition:g=nj}=t;if(!u)return null;const p=a?f:{...f,scaleX:1,scaleY:1},b={...tj,width:u.width,height:u.height,top:u.top,left:u.left,transform:Gl.Transform.toString(p),transformOrigin:a&&i?Xk(i,u):void 0,transition:typeof g=="function"?g(i):g,...d};return Me.createElement(n,{className:l,style:b,ref:e},o)}),sj=t=>e=>{let{active:n,dragOverlay:i}=e;const a={},{styles:o,className:l}=t;if(o!=null&&o.active)for(const[u,d]of Object.entries(o.active))d!==void 0&&(a[u]=n.node.style.getPropertyValue(u),n.node.style.setProperty(u,d));if(o!=null&&o.dragOverlay)for(const[u,d]of Object.entries(o.dragOverlay))d!==void 0&&i.node.style.setProperty(u,d);return l!=null&&l.active&&n.node.classList.add(l.active),l!=null&&l.dragOverlay&&i.node.classList.add(l.dragOverlay),function(){for(const[d,f]of Object.entries(a))n.node.style.setProperty(d,f);l!=null&&l.active&&n.node.classList.remove(l.active)}},aj=t=>{let{transform:{initial:e,final:n}}=t;return[{transform:Gl.Transform.toString(e)},{transform:Gl.Transform.toString(n)}]},rj={duration:250,easing:"ease",keyframes:aj,sideEffects:sj({styles:{active:{opacity:"0"}}})};function oj(t){let{config:e,draggableNodes:n,droppableContainers:i,measuringConfiguration:a}=t;return Nd((o,l)=>{if(e===null)return;const u=n.get(o);if(!u)return;const d=u.node.current;if(!d)return;const f=px(l);if(!f)return;const{transform:g}=Cn(l).getComputedStyle(l),p=sx(g);if(!p)return;const b=typeof e=="function"?e:lj(e);return dx(d,a.draggable.measure),b({active:{id:o,data:u.data,node:d,rect:a.draggable.measure(d)},draggableNodes:n,dragOverlay:{node:l,rect:a.dragOverlay.measure(f)},droppableContainers:i,measuringConfiguration:a,transform:p})})}function lj(t){const{duration:e,easing:n,sideEffects:i,keyframes:a}={...rj,...t};return o=>{let{active:l,dragOverlay:u,transform:d,...f}=o;if(!e)return;const g={x:u.rect.left-l.rect.left,y:u.rect.top-l.rect.top},p={scaleX:d.scaleX!==1?l.rect.width*d.scaleX/u.rect.width:1,scaleY:d.scaleY!==1?l.rect.height*d.scaleY/u.rect.height:1},b={x:d.x-g.x,y:d.y-g.y,...p},_=a({...f,active:l,dragOverlay:u,transform:{initial:d,final:b}}),[w]=_,S=_[_.length-1];if(JSON.stringify(w)===JSON.stringify(S))return;const x=i?.({active:l,dragOverlay:u,...f}),C=u.node.animate(_,{duration:e,easing:n,fill:"forwards"});return new Promise(O=>{C.onfinish=()=>{x?.(),O()}})}}let E0=0;function cj(t){return R.useMemo(()=>{if(t!=null)return E0++,E0},[t])}const uj=Me.memo(t=>{let{adjustScale:e=!1,children:n,dropAnimation:i,style:a,transition:o,modifiers:l,wrapperElement:u="div",className:d,zIndex:f=999}=t;const{activatorEvent:g,active:p,activeNodeRect:b,containerNodeRect:_,draggableNodes:w,droppableContainers:S,dragOverlay:x,over:C,measuringConfiguration:O,scrollableAncestors:A,scrollableAncestorRects:M,windowRect:D}=KN(),V=R.useContext(Pd),F=cj(p?.id),I=bx(l,{activatorEvent:g,active:p,activeNodeRect:b,containerNodeRect:_,draggingNodeRect:x.rect,over:C,overlayNodeRect:x.rect,scrollableAncestors:A,scrollableAncestorRects:M,transform:V,windowRect:D}),W=$m(b),X=oj({config:i,draggableNodes:w,droppableContainers:S,measuringConfiguration:O}),Q=W?x.setRef:void 0;return Me.createElement(ej,null,Me.createElement(ZN,{animation:X},p&&F?Me.createElement(ij,{key:F,id:p.id,ref:Q,as:u,activatorEvent:g,adjustScale:e,className:d,transition:o,rect:W,style:{zIndex:f,...a},transform:I},n):null))});function Lu({label:t,options:e,selectedOptions:n,onSelectionChange:i,searchPlaceholder:a,id:o,width:l="200px"}){const[u,d]=R.useState(!1),[f,g]=R.useState(""),p=R.useRef(null);R.useEffect(()=>{const O=A=>{p.current&&!p.current.contains(A.target)&&d(!1)};return document.addEventListener("mousedown",O),()=>document.removeEventListener("mousedown",O)},[]);const b=e.filter(O=>O.toLowerCase().includes(f.toLowerCase())),_=b.length>0&&b.every(O=>n.includes(O)),w=O=>{if(O.preventDefault(),O.stopPropagation(),_){const A=n.filter(M=>!b.includes(M));i(A)}else{const A=[...new Set([...n,...b])];i(A)}},S=(O,A)=>{if(O.preventDefault(),O.stopPropagation(),n.includes(A)){const M=n.filter(D=>D!==A);i(M)}else{const M=[...n.filter(D=>D!==""),A];i(M)}},x=()=>{d(!0)},C=O=>{g(O.target.value)};return y.jsxs("div",{className:"searchable-dropdown",ref:p,style:{width:l},children:[y.jsxs("label",{htmlFor:o,children:[t,":"]}),y.jsx("input",{type:"text",id:o,value:f,onChange:C,onFocus:x,placeholder:a}),u&&e.length>0&&y.jsxs("div",{className:"dropdown-options",children:[y.jsxs("div",{className:`dropdown-option ${_?"selected":""}`,onMouseDown:w,children:[y.jsxs("span",{className:"phase-name",children:["Tutti i ",t]}),y.jsxs("span",{className:"phase-description",children:["Mostra tutti i ",t.toLowerCase()]})]}),b.map(O=>y.jsxs("div",{className:`dropdown-option ${n.includes(O)?"selected":""}`,onMouseDown:A=>S(A,O),children:[y.jsx("span",{className:"phase-name",children:O}),y.jsx("span",{className:"phase-description",children:t})]},O))]})]})}const dj=R.lazy(()=>Ua(()=>import("./TaskPool-3XU_8ye5.js"),[])),hj=R.lazy(()=>Ua(()=>import("./GanttChart-Dle9jpFm.js"),[])),C0=()=>y.jsx("div",{className:"loading",children:"Caricamento componenti scheduler..."});function fj(){const{machines:t}=Yt(),{odpOrders:e,getOdpOrdersByWorkCenter:n,getScheduledOrders:i}=Mt(),{selectedWorkCenter:a,isLoading:o,isInitialized:l,showAlert:u}=Re(),{scheduleTask:d,unscheduleTask:f,scheduleTaskFromSlot:g,rescheduleTaskToSlot:p,validateSlotAvailability:b}=Gr(),{init:_,cleanup:w}=Ui(),[S,x]=R.useState(new Date),[C,O]=R.useState(null),[A,M]=R.useState([]),[D,V]=R.useState([]),[F,I]=R.useState([]),[W,X]=R.useState([]),[Q,H]=R.useState("");R.useEffect(()=>(l||_(),()=>{w()}),[_,l,w]);const ie=R.useMemo(()=>{if(!a)return[];const q=n(a);return console.log(`Filtered ODP orders for work center ${a}:`,q.map(oe=>({id:oe.id,odp_number:oe.odp_number,work_center:oe.work_center,status:oe.status}))),q},[a,n]),se=R.useMemo(()=>{const q=ie.filter(oe=>oe.status==="SCHEDULED");return console.log(`Scheduled orders for work center ${a}:`,q.map(oe=>({id:oe.id,odp_number:oe.odp_number,work_center:oe.work_center}))),q},[ie,a]),ue=R.useMemo(()=>{if(performance.now(),!t||t.length===0)return{activeMachines:[],workCenters:[],departments:[],machineTypes:[],machineNames:[]};let q=t;a&&a!==Ae.BOTH&&(q=t.filter(Ke=>Ke.work_center===a));const oe=q.filter(Ke=>Ke.status===ni.ACTIVE);if(oe.length===0)return{activeMachines:[],workCenters:[],departments:[],machineTypes:[],machineNames:[]};const fe=new Set,Ne=new Set,Le=new Set,vt=new Set;for(const Ke of oe)Ke.work_center&&fe.add(Ke.work_center),Ke.department&&Ne.add(Ke.department),Ke.machine_type&&Le.add(Ke.machine_type),Ke.machine_name&&vt.add(Ke.machine_name);const We=Array.from(fe).sort(),Ft=Array.from(Ne).sort(),tt=Array.from(Le).sort(),Rt=Array.from(vt).sort();return performance.now(),{activeMachines:oe,workCenters:We,departments:Ft,machineTypes:tt,machineNames:Rt}},[t,a]),P=R.useMemo(()=>{const{activeMachines:q}=ue;let oe=q;return A.length>0&&(oe=oe.filter(fe=>A.includes(fe.work_center))),D.length>0&&(oe=oe.filter(fe=>D.includes(fe.department))),F.length>0&&(oe=oe.filter(fe=>F.includes(fe.machine_type))),W.length>0&&(oe=oe.filter(fe=>W.includes(fe.machine_name))),oe},[ue,A,D,F,W]),K=R.useCallback(q=>{x(oe=>{const fe=new Date(oe);return q==="today"?new Date:q==="prev"?(fe.setDate(fe.getDate()-1),fe):q==="next"?(fe.setDate(fe.getDate()+1),fe):oe})},[]),le=R.useCallback(()=>{const q=new Date;return S.toDateString()===q.toDateString()?"Oggi":S.toLocaleDateString("it-IT",{month:"long",day:"numeric"})},[S]),de=R.useCallback(()=>{M([]),V([]),I([]),X([])},[]),N=R.useCallback(()=>{if(!Q.trim())return;console.log("=== TASK LOOKUP DEBUG ==="),console.log(`Searching for ODP: "${Q.trim()}"`),console.log(`Current taskLookup state: "${Q}"`),console.log("Available scheduled orders:",se.map(fe=>({id:fe.id,odp_number:fe.odp_number,work_center:fe.work_center})));let q=se.find(fe=>fe.odp_number===Q.trim());if(console.log("Exact match result:",q?{id:q.id,odp_number:q.odp_number}:"No exact match"),q||(q=se.find(fe=>fe.odp_number.toLowerCase().includes(Q.trim().toLowerCase())),console.log("Partial match result:",q?{id:q.id,odp_number:q.odp_number}:"No partial match")),!q){console.log(`No task found for ODP: "${Q.trim()}"`),u("Lavoro non trovato o non programmato","warning");return}console.log("Final selected task:",{id:q.id,odp_number:q.odp_number,work_center:q.work_center,machine_id:q.scheduled_machine_id});const oe=t.find(fe=>fe.id===q.scheduled_machine_id);if(!oe){console.log(`No machine found for task machine ID: ${q.scheduled_machine_id}`),u("Macchina non trovata per questo lavoro","error");return}console.log("Found machine:",{id:oe.id,name:oe.machine_name,work_center:oe.work_center}),X([oe.machine_name]),M([oe.work_center]),V([oe.department]),I([oe.machine_type]),q.scheduled_start_time&&x(new Date(q.scheduled_start_time)),H(""),u(`Lavoro "${q.odp_number}" trovato su ${oe.machine_name}`,"success"),console.log("=== END TASK LOOKUP DEBUG ===")},[Q,se,t,u]),Z=R.useRef(null),ae=R.useRef(!1),re=R.useCallback(q=>{performance.now();const oe=q.active.data.current;oe.type==="task"?O(oe.task):oe.type==="event"&&O(oe.event)},[]),me=R.useCallback(q=>{const{over:oe}=q;if(document.querySelectorAll(".drop-indicator").forEach(Ne=>Ne.remove()),oe&&oe.data.current?.type==="slot"){const{machine:Ne,hour:Le,minute:vt,isUnavailable:We,hasScheduledTask:Ft}=oe.data.current;if(We||Ft)return;const tt=document.querySelector(`[data-hour="${Le}"][data-minute="${vt}"][data-machine-id="${Ne.id}"]`);if(tt){const Rt=document.createElement("div");Rt.className="drop-indicator",Rt.style.cssText=`
          position: absolute;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          border: 3px dashed #007bff;
          background: rgba(0, 123, 255, 0.1);
          pointer-events: none;
          z-index: 1000;
          border-radius: 4px;
        `,tt.style.position="relative",tt.appendChild(Rt)}}},[]),be=R.useCallback(async q=>{if(performance.now(),Z.current&&clearTimeout(Z.current),ae.current)return;O(null),document.querySelectorAll(".drop-indicator").forEach(We=>We.remove());const{over:fe,active:Ne}=q;if(!fe)return;const Le=Ne.data.current,vt=fe.data.current;if(!(!Le||!vt)){ae.current=!0;try{await new Promise(We=>{requestAnimationFrame(async()=>{const Ft=performance.now();if(Le.type==="task"&&vt.type==="slot"){const tt=Le.task,{machine:Rt,hour:Ke,minute:At,isUnavailable:li,hasScheduledTask:Nn}=vt;if(li)return u("Impossibile pianificare il lavoro su uno slot temporale non disponibile","error"),We();if(Nn)return u("Impossibile pianificare il lavoro su uno slot temporale occupato","error"),We();const j=await g(tt.id,Rt,S,Ke,At);j?.error&&u(j.error,"error")}else if(Le.type==="event"&&vt.type==="slot"){const tt=Le.event,{machine:Rt,hour:Ke,minute:At,isUnavailable:li,hasScheduledTask:Nn}=vt;if(li)return u("Impossibile riprogrammare il lavoro su uno slot temporale non disponibile","error"),We();if(Nn)return u("Impossibile riprogrammare il lavoro su uno slot temporale occupato","error"),We();const j=await p(tt.id,Rt,S,Ke,At);j?.error&&u(j.error,"error")}else if(Le.type==="event"&&vt.type==="pool"){const tt=Le.event;f(tt.id)}We()})})}catch{u("Si è verificato un errore durante l'operazione di trascinamento","error")}finally{ae.current=!1}}},[S,g,p,f,u]);return o?y.jsx("div",{className:"content-section",children:y.jsx("div",{className:"loading",children:"Caricamento Scheduler Produzione..."})}):a?y.jsxs(GN,{onDragStart:re,onDragOver:me,onDragEnd:be,children:[y.jsxs("div",{className:"content-section",children:[y.jsx(_s,{title:"Scheduler Produzione"}),y.jsx(R.Suspense,{fallback:y.jsx(C0,{}),children:y.jsx(dj,{})}),y.jsxs("div",{className:"section-controls",children:[y.jsx("h2",{className:"section-title",children:"Ricerca Lavoro"}),y.jsxs("div",{className:"task-lookup",children:[y.jsxs("div",{className:"task-lookup-input-container",children:[y.jsx("input",{type:"text",placeholder:"Inserisci numero ODP per cercare...",value:Q,onChange:q=>{const oe=q.target.value;console.log(`Search input changed to: "${oe}"`),H(oe)},onKeyPress:q=>{q.key==="Enter"&&(console.log(`Enter pressed, current taskLookup: "${Q}"`),N())},className:"task-lookup-input"}),Q&&y.jsx("div",{className:"task-lookup-dropdown",children:se.filter(q=>q.odp_number.toLowerCase().includes(Q.toLowerCase())).sort((q,oe)=>{const fe=q.odp_number.toLowerCase()===Q.toLowerCase(),Ne=oe.odp_number.toLowerCase()===Q.toLowerCase();return fe&&!Ne?-1:!fe&&Ne?1:q.odp_number.localeCompare(oe.odp_number)}).slice(0,5).map(q=>y.jsxs("div",{className:"task-lookup-option",onClick:()=>{console.log(`Clicked on ODP option: ${q.odp_number} (ID: ${q.id})`);const oe=q.odp_number;console.log(`Performing lookup for ODP: ${oe}`);const fe=se.find(Le=>Le.odp_number===oe);if(!fe){console.log(`Task not found for ODP: ${oe}`);return}console.log("Found task:",{id:fe.id,odp_number:fe.odp_number,work_center:fe.work_center});const Ne=t.find(Le=>Le.id===fe.scheduled_machine_id);if(!Ne){console.log(`No machine found for task machine ID: ${fe.scheduled_machine_id}`),u("Macchina non trovata per questo lavoro","error");return}console.log("Found machine:",{id:Ne.id,name:Ne.machine_name,work_center:Ne.work_center}),X([Ne.machine_name]),M([Ne.work_center]),V([Ne.department]),I([Ne.machine_type]),fe.scheduled_start_time&&x(new Date(fe.scheduled_start_time)),H(""),u(`Lavoro "${fe.odp_number}" trovato su ${Ne.machine_name}`,"success")},children:[y.jsx("span",{className:"task-lookup-odp",children:q.odp_number}),y.jsx("span",{className:"task-lookup-product",children:q.product_name||"Prodotto non specificato"}),y.jsxs("span",{className:"task-lookup-workcenter",children:["(",q.work_center,")"]})]},q.id))})]}),y.jsx("button",{onClick:()=>{console.log(`Search button clicked, current taskLookup: "${Q}"`),N()},className:"nav-btn today",children:"Cerca"})]})]}),y.jsxs("div",{className:"section-controls",children:[y.jsx("h2",{className:"section-title",children:"Programma Produzione"}),y.jsxs("div",{className:"controls-grid",children:[y.jsxs("div",{className:"filters-section",children:[y.jsx(Lu,{label:"Centro di Lavoro",options:ue.workCenters,selectedOptions:A,onSelectionChange:M,searchPlaceholder:"Cerca Centri di Lavoro",id:"work_center_filter"}),y.jsx(Lu,{label:"Reparto",options:ue.departments,selectedOptions:D,onSelectionChange:V,searchPlaceholder:"Cerca Reparti",id:"department_filter"}),y.jsx(Lu,{label:"Tipo Macchina",options:ue.machineTypes,selectedOptions:F,onSelectionChange:I,searchPlaceholder:"Cerca Tipi di Macchina",id:"machine_type_filter"}),y.jsx(Lu,{label:"Nome Macchina",options:ue.machineNames,selectedOptions:W,onSelectionChange:X,searchPlaceholder:"Cerca Nomi Macchine",id:"machine_name_filter"})]}),y.jsxs("div",{className:"actions-section",children:[y.jsx("button",{className:"nav-btn today",onClick:de,title:"Clear all filters",children:"Cancella Filtri"}),y.jsxs("div",{className:"calendar-navigation",children:[y.jsx("button",{className:"nav-btn today",onClick:()=>K("today"),children:"Oggi"}),y.jsx("button",{className:"nav-btn",onClick:()=>K("prev"),children:"<"}),y.jsx("span",{className:"current-date",children:le()}),y.jsx("button",{className:"nav-btn",onClick:()=>K("next"),children:">"})]}),y.jsx("button",{className:"nav-btn today",onClick:()=>{const q=document.querySelector(".calendar-section .calendar-grid");if(!q){alert("Grafico Gantt non trovato. Assicurati che il grafico sia visibile sullo schermo.");return}const oe=Array.from(document.styleSheets);let fe="";oe.forEach(Ke=>{try{Array.from(Ke.cssRules||Ke.rules||[]).forEach(li=>{fe+=li.cssText+`
`})}catch{}});const Ne=q.cloneNode(!0),Le=`
                    <!DOCTYPE html>
                    <html>
                      <head>
                        <title>Grafico Gantt - ${le()}</title>
                        <style>
                          ${fe}
                          body { 
                            margin: 0; 
                            padding: 20px; 
                            font-family: Arial, sans-serif;
                          }
                          .calendar-section {
                            width: 100%;
                            overflow-x: auto;
                          }
                        </style>
                      </head>
                      <body>
                        <div style="text-align: center; margin-bottom: 20px; font-size: 16px; font-weight: bold;">
                          Grafico Gantt - ${le()}
                        </div>
                        <div class="calendar-section">
                          ${Ne.outerHTML}
                        </div>
                      </body>
                    </html>
                  `,vt=new Blob([Le],{type:"text/html"}),We=window.URL.createObjectURL(vt),Ft=document.createElement("a");Ft.href=We;const tt=S.toISOString().split("T")[0],Rt=new Date().toTimeString().split(" ")[0].replace(/:/g,"-");Ft.download=`grafico-gantt-${tt}-${Rt}.html`,document.body.appendChild(Ft),Ft.click(),document.body.removeChild(Ft),window.URL.revokeObjectURL(We)},title:"Download exact Gantt chart as HTML file",children:"Scarica HTML"})]})]})]}),y.jsx(R.Suspense,{fallback:y.jsx(C0,{}),children:y.jsx(hj,{machines:P,currentDate:S})})]}),y.jsx(uj,{children:C?y.jsxs("div",{className:"task-item drag-overlay",style:{boxShadow:"0 8px 25px rgba(0,0,0,0.3)",transform:"rotate(3deg) scale(1.05)",opacity:.9,zIndex:1002,pointerEvents:"none"},children:[y.jsx("span",{children:C.odp_number}),y.jsxs("span",{className:"task-time",children:[C.time_remaining?Number(C.time_remaining).toFixed(1):(C.duration||1).toFixed(1),"h"]})]}):null})]}):y.jsx("div",{className:"content-section",children:y.jsx("div",{className:"error",children:"Seleziona un centro di lavoro per visualizzare i dati dello scheduler."})})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function dc(t){return t+.5|0}const ea=(t,e,n)=>Math.max(Math.min(t,n),e);function Sl(t){return ea(dc(t*2.55),0,255)}function ta(t){return ea(dc(t*255),0,255)}function fs(t){return ea(dc(t/2.55)/100,0,1)}function O0(t){return ea(dc(t*100),0,100)}const ei={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},im=[..."0123456789ABCDEF"],gj=t=>im[t&15],mj=t=>im[(t&240)>>4]+im[t&15],Pu=t=>(t&240)>>4===(t&15),pj=t=>Pu(t.r)&&Pu(t.g)&&Pu(t.b)&&Pu(t.a);function vj(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&ei[t[1]]*17,g:255&ei[t[2]]*17,b:255&ei[t[3]]*17,a:e===5?ei[t[4]]*17:255}:(e===7||e===9)&&(n={r:ei[t[1]]<<4|ei[t[2]],g:ei[t[3]]<<4|ei[t[4]],b:ei[t[5]]<<4|ei[t[6]],a:e===9?ei[t[7]]<<4|ei[t[8]]:255})),n}const yj=(t,e)=>t<255?e(t):"";function bj(t){var e=pj(t)?gj:mj;return t?"#"+e(t.r)+e(t.g)+e(t.b)+yj(t.a,e):void 0}const _j=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function _x(t,e,n){const i=e*Math.min(n,1-n),a=(o,l=(o+t/30)%12)=>n-i*Math.max(Math.min(l-3,9-l,1),-1);return[a(0),a(8),a(4)]}function wj(t,e,n){const i=(a,o=(a+t/60)%6)=>n-n*e*Math.max(Math.min(o,4-o,1),0);return[i(5),i(3),i(1)]}function Sj(t,e,n){const i=_x(t,1,.5);let a;for(e+n>1&&(a=1/(e+n),e*=a,n*=a),a=0;a<3;a++)i[a]*=1-e-n,i[a]+=e;return i}function xj(t,e,n,i,a){return t===a?(e-n)/i+(e<n?6:0):e===a?(n-t)/i+2:(t-e)/i+4}function qm(t){const n=t.r/255,i=t.g/255,a=t.b/255,o=Math.max(n,i,a),l=Math.min(n,i,a),u=(o+l)/2;let d,f,g;return o!==l&&(g=o-l,f=u>.5?g/(2-o-l):g/(o+l),d=xj(n,i,a,g,o),d=d*60+.5),[d|0,f||0,u]}function Gm(t,e,n,i){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,i)).map(ta)}function Ym(t,e,n){return Gm(_x,t,e,n)}function Ej(t,e,n){return Gm(Sj,t,e,n)}function Cj(t,e,n){return Gm(wj,t,e,n)}function wx(t){return(t%360+360)%360}function Oj(t){const e=_j.exec(t);let n=255,i;if(!e)return;e[5]!==i&&(n=e[6]?Sl(+e[5]):ta(+e[5]));const a=wx(+e[2]),o=+e[3]/100,l=+e[4]/100;return e[1]==="hwb"?i=Ej(a,o,l):e[1]==="hsv"?i=Cj(a,o,l):i=Ym(a,o,l),{r:i[0],g:i[1],b:i[2],a:n}}function Rj(t,e){var n=qm(t);n[0]=wx(n[0]+e),n=Ym(n),t.r=n[0],t.g=n[1],t.b=n[2]}function Aj(t){if(!t)return;const e=qm(t),n=e[0],i=O0(e[1]),a=O0(e[2]);return t.a<255?`hsla(${n}, ${i}%, ${a}%, ${fs(t.a)})`:`hsl(${n}, ${i}%, ${a}%)`}const R0={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},A0={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Tj(){const t={},e=Object.keys(A0),n=Object.keys(R0);let i,a,o,l,u;for(i=0;i<e.length;i++){for(l=u=e[i],a=0;a<n.length;a++)o=n[a],u=u.replace(o,R0[o]);o=parseInt(A0[l],16),t[u]=[o>>16&255,o>>8&255,o&255]}return t}let zu;function Dj(t){zu||(zu=Tj(),zu.transparent=[0,0,0,0]);const e=zu[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const Mj=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function kj(t){const e=Mj.exec(t);let n=255,i,a,o;if(e){if(e[7]!==i){const l=+e[7];n=e[8]?Sl(l):ea(l*255,0,255)}return i=+e[1],a=+e[3],o=+e[5],i=255&(e[2]?Sl(i):ea(i,0,255)),a=255&(e[4]?Sl(a):ea(a,0,255)),o=255&(e[6]?Sl(o):ea(o,0,255)),{r:i,g:a,b:o,a:n}}}function Nj(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${fs(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const Eg=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,Ur=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function jj(t,e,n){const i=Ur(fs(t.r)),a=Ur(fs(t.g)),o=Ur(fs(t.b));return{r:ta(Eg(i+n*(Ur(fs(e.r))-i))),g:ta(Eg(a+n*(Ur(fs(e.g))-a))),b:ta(Eg(o+n*(Ur(fs(e.b))-o))),a:t.a+n*(e.a-t.a)}}function Iu(t,e,n){if(t){let i=qm(t);i[e]=Math.max(0,Math.min(i[e]+i[e]*n,e===0?360:1)),i=Ym(i),t.r=i[0],t.g=i[1],t.b=i[2]}}function Sx(t,e){return t&&Object.assign(e||{},t)}function T0(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=ta(t[3]))):(e=Sx(t,{r:0,g:0,b:0,a:1}),e.a=ta(e.a)),e}function Lj(t){return t.charAt(0)==="r"?kj(t):Oj(t)}class Wl{constructor(e){if(e instanceof Wl)return e;const n=typeof e;let i;n==="object"?i=T0(e):n==="string"&&(i=vj(e)||Dj(e)||Lj(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=Sx(this._rgb);return e&&(e.a=fs(e.a)),e}set rgb(e){this._rgb=T0(e)}rgbString(){return this._valid?Nj(this._rgb):void 0}hexString(){return this._valid?bj(this._rgb):void 0}hslString(){return this._valid?Aj(this._rgb):void 0}mix(e,n){if(e){const i=this.rgb,a=e.rgb;let o;const l=n===o?.5:n,u=2*l-1,d=i.a-a.a,f=((u*d===-1?u:(u+d)/(1+u*d))+1)/2;o=1-f,i.r=255&f*i.r+o*a.r+.5,i.g=255&f*i.g+o*a.g+.5,i.b=255&f*i.b+o*a.b+.5,i.a=l*i.a+(1-l)*a.a,this.rgb=i}return this}interpolate(e,n){return e&&(this._rgb=jj(this._rgb,e._rgb,n)),this}clone(){return new Wl(this.rgb)}alpha(e){return this._rgb.a=ta(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=dc(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Iu(this._rgb,2,e),this}darken(e){return Iu(this._rgb,2,-e),this}saturate(e){return Iu(this._rgb,1,e),this}desaturate(e){return Iu(this._rgb,1,-e),this}rotate(e){return Rj(this._rgb,e),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function os(){}const Pj=(()=>{let t=0;return()=>t++})();function ht(t){return t==null}function nn(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Ge(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function ai(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function Ni(t,e){return ai(t)?t:e}function He(t,e){return typeof t>"u"?e:t}const zj=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,xx=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function mt(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function Je(t,e,n,i){let a,o,l;if(nn(t))for(o=t.length,a=0;a<o;a++)e.call(n,t[a],a);else if(Ge(t))for(l=Object.keys(t),o=l.length,a=0;a<o;a++)e.call(n,t[l[a]],l[a])}function pd(t,e){let n,i,a,o;if(!t||!e||t.length!==e.length)return!1;for(n=0,i=t.length;n<i;++n)if(a=t[n],o=e[n],a.datasetIndex!==o.datasetIndex||a.index!==o.index)return!1;return!0}function vd(t){if(nn(t))return t.map(vd);if(Ge(t)){const e=Object.create(null),n=Object.keys(t),i=n.length;let a=0;for(;a<i;++a)e[n[a]]=vd(t[n[a]]);return e}return t}function Ex(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function Ij(t,e,n,i){if(!Ex(t))return;const a=e[t],o=n[t];Ge(a)&&Ge(o)?Kl(a,o,i):e[t]=vd(o)}function Kl(t,e,n){const i=nn(e)?e:[e],a=i.length;if(!Ge(t))return t;n=n||{};const o=n.merger||Ij;let l;for(let u=0;u<a;++u){if(l=i[u],!Ge(l))continue;const d=Object.keys(l);for(let f=0,g=d.length;f<g;++f)o(d[f],t,l,n)}return t}function Ll(t,e){return Kl(t,e,{merger:Fj})}function Fj(t,e,n){if(!Ex(t))return;const i=e[t],a=n[t];Ge(i)&&Ge(a)?Ll(i,a):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=vd(a))}const D0={"":t=>t,x:t=>t.x,y:t=>t.y};function Uj(t){const e=t.split("."),n=[];let i="";for(const a of e)i+=a,i.endsWith("\\")?i=i.slice(0,-1)+".":(n.push(i),i="");return n}function Hj(t){const e=Uj(t);return n=>{for(const i of e){if(i==="")break;n=n&&n[i]}return n}}function Xl(t,e){return(D0[e]||(D0[e]=Hj(e)))(t)}function Wm(t){return t.charAt(0).toUpperCase()+t.slice(1)}const yd=t=>typeof t<"u",ia=t=>typeof t=="function",M0=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function Bj(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const et=Math.PI,Ot=2*et,Vj=Ot+et,bd=Number.POSITIVE_INFINITY,$j=et/180,Wt=et/2,Aa=et/4,k0=et*2/3,Cx=Math.log10,Qr=Math.sign;function Pl(t,e,n){return Math.abs(t-e)<n}function N0(t){const e=Math.round(t);t=Pl(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(Cx(t))),i=t/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function qj(t){const e=[],n=Math.sqrt(t);let i;for(i=1;i<n;i++)t%i===0&&(e.push(i),e.push(t/i));return n===(n|0)&&e.push(n),e.sort((a,o)=>a-o).pop(),e}function Gj(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function Ql(t){return!Gj(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function Yj(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function Wj(t,e,n){let i,a,o;for(i=0,a=t.length;i<a;i++)o=t[i][n],isNaN(o)||(e.min=Math.min(e.min,o),e.max=Math.max(e.max,o))}function ms(t){return t*(et/180)}function Kj(t){return t*(180/et)}function j0(t){if(!ai(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function Ox(t,e){const n=e.x-t.x,i=e.y-t.y,a=Math.sqrt(n*n+i*i);let o=Math.atan2(i,n);return o<-.5*et&&(o+=Ot),{angle:o,distance:a}}function sm(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Xj(t,e){return(t-e+Vj)%Ot-et}function pi(t){return(t%Ot+Ot)%Ot}function Zl(t,e,n,i){const a=pi(t),o=pi(e),l=pi(n),u=pi(o-a),d=pi(l-a),f=pi(a-o),g=pi(a-l);return a===o||a===l||i&&o===l||u>d&&f<g}function En(t,e,n){return Math.max(e,Math.min(n,t))}function Qj(t){return En(t,-32768,32767)}function $r(t,e,n,i=1e-6){return t>=Math.min(e,n)-i&&t<=Math.max(e,n)+i}function Km(t,e,n){n=n||(l=>t[l]<e);let i=t.length-1,a=0,o;for(;i-a>1;)o=a+i>>1,n(o)?a=o:i=o;return{lo:a,hi:i}}const za=(t,e,n,i)=>Km(t,n,i?a=>{const o=t[a][e];return o<n||o===n&&t[a+1][e]===n}:a=>t[a][e]<n),Zj=(t,e,n)=>Km(t,n,i=>t[i][e]>=n);function Jj(t,e,n){let i=0,a=t.length;for(;i<a&&t[i]<e;)i++;for(;a>i&&t[a-1]>n;)a--;return i>0||a<t.length?t.slice(i,a):t}const Rx=["push","pop","shift","splice","unshift"];function e2(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),Rx.forEach(n=>{const i="_onData"+Wm(n),a=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...o){const l=a.apply(this,o);return t._chartjs.listeners.forEach(u=>{typeof u[i]=="function"&&u[i](...o)}),l}})})}function L0(t,e){const n=t._chartjs;if(!n)return;const i=n.listeners,a=i.indexOf(e);a!==-1&&i.splice(a,1),!(i.length>0)&&(Rx.forEach(o=>{delete t[o]}),delete t._chartjs)}function t2(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const Ax=(function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame})();function Tx(t,e){let n=[],i=!1;return function(...a){n=a,i||(i=!0,Ax.call(window,()=>{i=!1,t.apply(e,n)}))}}function n2(t,e){let n;return function(...i){return e?(clearTimeout(n),n=setTimeout(t,e,i)):t.apply(this,i),e}}const Xm=t=>t==="start"?"left":t==="end"?"right":"center",pn=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,i2=(t,e,n,i)=>t===(i?"left":"right")?n:t==="center"?(e+n)/2:e;function s2(t,e,n){const i=e.length;let a=0,o=i;if(t._sorted){const{iScale:l,vScale:u,_parsed:d}=t,f=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,g=l.axis,{min:p,max:b,minDefined:_,maxDefined:w}=l.getUserBounds();if(_){if(a=Math.min(za(d,g,p).lo,n?i:za(e,g,l.getPixelForValue(p)).lo),f){const S=d.slice(0,a+1).reverse().findIndex(x=>!ht(x[u.axis]));a-=Math.max(0,S)}a=En(a,0,i-1)}if(w){let S=Math.max(za(d,l.axis,b,!0).hi+1,n?0:za(e,g,l.getPixelForValue(b),!0).hi+1);if(f){const x=d.slice(S-1).findIndex(C=>!ht(C[u.axis]));S+=Math.max(0,x)}o=En(S,a,i)-a}else o=i-a}return{start:a,count:o}}function a2(t){const{xScale:e,yScale:n,_scaleRanges:i}=t,a={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!i)return t._scaleRanges=a,!0;const o=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==n.min||i.ymax!==n.max;return Object.assign(i,a),o}const Fu=t=>t===0||t===1,P0=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*Ot/n)),z0=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*Ot/n)+1,zl={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*Wt)+1,easeOutSine:t=>Math.sin(t*Wt),easeInOutSine:t=>-.5*(Math.cos(et*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>Fu(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Fu(t)?t:P0(t,.075,.3),easeOutElastic:t=>Fu(t)?t:z0(t,.075,.3),easeInOutElastic(t){return Fu(t)?t:t<.5?.5*P0(t*2,.1125,.45):.5+.5*z0(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-zl.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?zl.easeInBounce(t*2)*.5:zl.easeOutBounce(t*2-1)*.5+.5};function Qm(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function I0(t){return Qm(t)?t:new Wl(t)}function Cg(t){return Qm(t)?t:new Wl(t).saturate(.5).darken(.1).hexString()}const r2=["x","y","borderWidth","radius","tension"],o2=["color","borderColor","backgroundColor"];function l2(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:o2},numbers:{type:"number",properties:r2}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function c2(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const F0=new Map;function u2(t,e){e=e||{};const n=t+JSON.stringify(e);let i=F0.get(n);return i||(i=new Intl.NumberFormat(t,e),F0.set(n,i)),i}function Zm(t,e,n){return u2(e,n).format(t)}const d2={values(t){return nn(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const i=this.chart.options.locale;let a,o=t;if(n.length>1){const f=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(f<1e-4||f>1e15)&&(a="scientific"),o=h2(t,n)}const l=Cx(Math.abs(o)),u=isNaN(l)?1:Math.max(Math.min(-1*Math.floor(l),20),0),d={notation:a,minimumFractionDigits:u,maximumFractionDigits:u};return Object.assign(d,this.options.ticks.format),Zm(t,i,d)}};function h2(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var Dx={formatters:d2};function f2(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Dx.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Fa=Object.create(null),am=Object.create(null);function Il(t,e){if(!e)return t;const n=e.split(".");for(let i=0,a=n.length;i<a;++i){const o=n[i];t=t[o]||(t[o]=Object.create(null))}return t}function Og(t,e,n){return typeof e=="string"?Kl(Il(t,e),n):Kl(Il(t,""),e)}class g2{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,a)=>Cg(a.backgroundColor),this.hoverBorderColor=(i,a)=>Cg(a.borderColor),this.hoverColor=(i,a)=>Cg(a.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return Og(this,e,n)}get(e){return Il(this,e)}describe(e,n){return Og(am,e,n)}override(e,n){return Og(Fa,e,n)}route(e,n,i,a){const o=Il(this,e),l=Il(this,i),u="_"+n;Object.defineProperties(o,{[u]:{value:o[n],writable:!0},[n]:{enumerable:!0,get(){const d=this[u],f=l[a];return Ge(d)?Object.assign({},f,d):He(d,f)},set(d){this[u]=d}}})}apply(e){e.forEach(n=>n(this))}}var kt=new g2({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[l2,c2,f2]);function m2(t){return!t||ht(t.size)||ht(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function U0(t,e,n,i,a){let o=e[a];return o||(o=e[a]=t.measureText(a).width,n.push(a)),o>i&&(i=o),i}function Ta(t,e,n){const i=t.currentDevicePixelRatio,a=n!==0?Math.max(n/2,.5):0;return Math.round((e-a)*i)/i+a}function H0(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function rm(t,e,n,i){Mx(t,e,n,i,null)}function Mx(t,e,n,i,a){let o,l,u,d,f,g,p,b;const _=e.pointStyle,w=e.rotation,S=e.radius;let x=(w||0)*$j;if(_&&typeof _=="object"&&(o=_.toString(),o==="[object HTMLImageElement]"||o==="[object HTMLCanvasElement]")){t.save(),t.translate(n,i),t.rotate(x),t.drawImage(_,-_.width/2,-_.height/2,_.width,_.height),t.restore();return}if(!(isNaN(S)||S<=0)){switch(t.beginPath(),_){default:a?t.ellipse(n,i,a/2,S,0,0,Ot):t.arc(n,i,S,0,Ot),t.closePath();break;case"triangle":g=a?a/2:S,t.moveTo(n+Math.sin(x)*g,i-Math.cos(x)*S),x+=k0,t.lineTo(n+Math.sin(x)*g,i-Math.cos(x)*S),x+=k0,t.lineTo(n+Math.sin(x)*g,i-Math.cos(x)*S),t.closePath();break;case"rectRounded":f=S*.516,d=S-f,l=Math.cos(x+Aa)*d,p=Math.cos(x+Aa)*(a?a/2-f:d),u=Math.sin(x+Aa)*d,b=Math.sin(x+Aa)*(a?a/2-f:d),t.arc(n-p,i-u,f,x-et,x-Wt),t.arc(n+b,i-l,f,x-Wt,x),t.arc(n+p,i+u,f,x,x+Wt),t.arc(n-b,i+l,f,x+Wt,x+et),t.closePath();break;case"rect":if(!w){d=Math.SQRT1_2*S,g=a?a/2:d,t.rect(n-g,i-d,2*g,2*d);break}x+=Aa;case"rectRot":p=Math.cos(x)*(a?a/2:S),l=Math.cos(x)*S,u=Math.sin(x)*S,b=Math.sin(x)*(a?a/2:S),t.moveTo(n-p,i-u),t.lineTo(n+b,i-l),t.lineTo(n+p,i+u),t.lineTo(n-b,i+l),t.closePath();break;case"crossRot":x+=Aa;case"cross":p=Math.cos(x)*(a?a/2:S),l=Math.cos(x)*S,u=Math.sin(x)*S,b=Math.sin(x)*(a?a/2:S),t.moveTo(n-p,i-u),t.lineTo(n+p,i+u),t.moveTo(n+b,i-l),t.lineTo(n-b,i+l);break;case"star":p=Math.cos(x)*(a?a/2:S),l=Math.cos(x)*S,u=Math.sin(x)*S,b=Math.sin(x)*(a?a/2:S),t.moveTo(n-p,i-u),t.lineTo(n+p,i+u),t.moveTo(n+b,i-l),t.lineTo(n-b,i+l),x+=Aa,p=Math.cos(x)*(a?a/2:S),l=Math.cos(x)*S,u=Math.sin(x)*S,b=Math.sin(x)*(a?a/2:S),t.moveTo(n-p,i-u),t.lineTo(n+p,i+u),t.moveTo(n+b,i-l),t.lineTo(n-b,i+l);break;case"line":l=a?a/2:Math.cos(x)*S,u=Math.sin(x)*S,t.moveTo(n-l,i-u),t.lineTo(n+l,i+u);break;case"dash":t.moveTo(n,i),t.lineTo(n+Math.cos(x)*(a?a/2:S),i+Math.sin(x)*S);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function Jl(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function Jm(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function ep(t){t.restore()}function p2(t,e,n,i,a){if(!e)return t.lineTo(n.x,n.y);if(a==="middle"){const o=(e.x+n.x)/2;t.lineTo(o,e.y),t.lineTo(o,n.y)}else a==="after"!=!!i?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function v2(t,e,n,i){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?n.cp2x:n.cp1x,i?n.cp2y:n.cp1y,n.x,n.y)}function y2(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),ht(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function b2(t,e,n,i,a){if(a.strikethrough||a.underline){const o=t.measureText(i),l=e-o.actualBoundingBoxLeft,u=e+o.actualBoundingBoxRight,d=n-o.actualBoundingBoxAscent,f=n+o.actualBoundingBoxDescent,g=a.strikethrough?(d+f)/2:f;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=a.decorationWidth||2,t.moveTo(l,g),t.lineTo(u,g),t.stroke()}}function _2(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function ec(t,e,n,i,a,o={}){const l=nn(e)?e:[e],u=o.strokeWidth>0&&o.strokeColor!=="";let d,f;for(t.save(),t.font=a.string,y2(t,o),d=0;d<l.length;++d)f=l[d],o.backdrop&&_2(t,o.backdrop),u&&(o.strokeColor&&(t.strokeStyle=o.strokeColor),ht(o.strokeWidth)||(t.lineWidth=o.strokeWidth),t.strokeText(f,n,i,o.maxWidth)),t.fillText(f,n,i,o.maxWidth),b2(t,n,i,f,o),i+=Number(a.lineHeight);t.restore()}function om(t,e){const{x:n,y:i,w:a,h:o,radius:l}=e;t.arc(n+l.topLeft,i+l.topLeft,l.topLeft,1.5*et,et,!0),t.lineTo(n,i+o-l.bottomLeft),t.arc(n+l.bottomLeft,i+o-l.bottomLeft,l.bottomLeft,et,Wt,!0),t.lineTo(n+a-l.bottomRight,i+o),t.arc(n+a-l.bottomRight,i+o-l.bottomRight,l.bottomRight,Wt,0,!0),t.lineTo(n+a,i+l.topRight),t.arc(n+a-l.topRight,i+l.topRight,l.topRight,0,-Wt,!0),t.lineTo(n+l.topLeft,i)}const w2=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,S2=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function x2(t,e){const n=(""+t).match(w2);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const E2=t=>+t||0;function tp(t,e){const n={},i=Ge(e),a=i?Object.keys(e):e,o=Ge(t)?i?l=>He(t[l],t[e[l]]):l=>t[l]:()=>t;for(const l of a)n[l]=E2(o(l));return n}function C2(t){return tp(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Fl(t){return tp(t,["topLeft","topRight","bottomLeft","bottomRight"])}function ri(t){const e=C2(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function yn(t,e){t=t||{},e=e||kt.font;let n=He(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let i=He(t.style,e.style);i&&!(""+i).match(S2)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const a={family:He(t.family,e.family),lineHeight:x2(He(t.lineHeight,e.lineHeight),n),size:n,style:i,weight:He(t.weight,e.weight),string:""};return a.string=m2(a),a}function Uu(t,e,n,i){let a,o,l;for(a=0,o=t.length;a<o;++a)if(l=t[a],l!==void 0&&l!==void 0)return l}function O2(t,e,n){const{min:i,max:a}=t,o=xx(e,(a-i)/2),l=(u,d)=>n&&u===0?0:u+d;return{min:l(i,-Math.abs(o)),max:l(a,o)}}function Ba(t,e){return Object.assign(Object.create(t),e)}function np(t,e=[""],n,i,a=()=>t[0]){const o=n||t;typeof i>"u"&&(i=Lx("_fallback",t));const l={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:o,_fallback:i,_getTarget:a,override:u=>np([u,...t],e,o,i)};return new Proxy(l,{deleteProperty(u,d){return delete u[d],delete u._keys,delete t[0][d],!0},get(u,d){return Nx(u,d,()=>j2(d,e,t,u))},getOwnPropertyDescriptor(u,d){return Reflect.getOwnPropertyDescriptor(u._scopes[0],d)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(u,d){return V0(u).includes(d)},ownKeys(u){return V0(u)},set(u,d,f){const g=u._storage||(u._storage=a());return u[d]=g[d]=f,delete u._keys,!0}})}function Zr(t,e,n,i){const a={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:kx(t,i),setContext:o=>Zr(t,o,n,i),override:o=>Zr(t.override(o),e,n,i)};return new Proxy(a,{deleteProperty(o,l){return delete o[l],delete t[l],!0},get(o,l,u){return Nx(o,l,()=>A2(o,l,u))},getOwnPropertyDescriptor(o,l){return o._descriptors.allKeys?Reflect.has(t,l)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,l)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(o,l){return Reflect.has(t,l)},ownKeys(){return Reflect.ownKeys(t)},set(o,l,u){return t[l]=u,delete o[l],!0}})}function kx(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:i=e.indexable,_allKeys:a=e.allKeys}=t;return{allKeys:a,scriptable:n,indexable:i,isScriptable:ia(n)?n:()=>n,isIndexable:ia(i)?i:()=>i}}const R2=(t,e)=>t?t+Wm(e):e,ip=(t,e)=>Ge(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function Nx(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const i=n();return t[e]=i,i}function A2(t,e,n){const{_proxy:i,_context:a,_subProxy:o,_descriptors:l}=t;let u=i[e];return ia(u)&&l.isScriptable(e)&&(u=T2(e,u,t,n)),nn(u)&&u.length&&(u=D2(e,u,t,l.isIndexable)),ip(e,u)&&(u=Zr(u,a,o&&o[e],l)),u}function T2(t,e,n,i){const{_proxy:a,_context:o,_subProxy:l,_stack:u}=n;if(u.has(t))throw new Error("Recursion detected: "+Array.from(u).join("->")+"->"+t);u.add(t);let d=e(o,l||i);return u.delete(t),ip(t,d)&&(d=sp(a._scopes,a,t,d)),d}function D2(t,e,n,i){const{_proxy:a,_context:o,_subProxy:l,_descriptors:u}=n;if(typeof o.index<"u"&&i(t))return e[o.index%e.length];if(Ge(e[0])){const d=e,f=a._scopes.filter(g=>g!==d);e=[];for(const g of d){const p=sp(f,a,t,g);e.push(Zr(p,o,l&&l[t],u))}}return e}function jx(t,e,n){return ia(t)?t(e,n):t}const M2=(t,e)=>t===!0?e:typeof t=="string"?Xl(e,t):void 0;function k2(t,e,n,i,a){for(const o of e){const l=M2(n,o);if(l){t.add(l);const u=jx(l._fallback,n,a);if(typeof u<"u"&&u!==n&&u!==i)return u}else if(l===!1&&typeof i<"u"&&n!==i)return null}return!1}function sp(t,e,n,i){const a=e._rootScopes,o=jx(e._fallback,n,i),l=[...t,...a],u=new Set;u.add(i);let d=B0(u,l,n,o||n,i);return d===null||typeof o<"u"&&o!==n&&(d=B0(u,l,o,d,i),d===null)?!1:np(Array.from(u),[""],a,o,()=>N2(e,n,i))}function B0(t,e,n,i,a){for(;n;)n=k2(t,e,n,i,a);return n}function N2(t,e,n){const i=t._getTarget();e in i||(i[e]={});const a=i[e];return nn(a)&&Ge(n)?n:a||{}}function j2(t,e,n,i){let a;for(const o of e)if(a=Lx(R2(o,t),n),typeof a<"u")return ip(t,a)?sp(n,i,t,a):a}function Lx(t,e){for(const n of e){if(!n)continue;const i=n[t];if(typeof i<"u")return i}}function V0(t){let e=t._keys;return e||(e=t._keys=L2(t._scopes)),e}function L2(t){const e=new Set;for(const n of t)for(const i of Object.keys(n).filter(a=>!a.startsWith("_")))e.add(i);return Array.from(e)}const P2=Number.EPSILON||1e-14,Jr=(t,e)=>e<t.length&&!t[e].skip&&t[e],Px=t=>t==="x"?"y":"x";function z2(t,e,n,i){const a=t.skip?e:t,o=e,l=n.skip?e:n,u=sm(o,a),d=sm(l,o);let f=u/(u+d),g=d/(u+d);f=isNaN(f)?0:f,g=isNaN(g)?0:g;const p=i*f,b=i*g;return{previous:{x:o.x-p*(l.x-a.x),y:o.y-p*(l.y-a.y)},next:{x:o.x+b*(l.x-a.x),y:o.y+b*(l.y-a.y)}}}function I2(t,e,n){const i=t.length;let a,o,l,u,d,f=Jr(t,0);for(let g=0;g<i-1;++g)if(d=f,f=Jr(t,g+1),!(!d||!f)){if(Pl(e[g],0,P2)){n[g]=n[g+1]=0;continue}a=n[g]/e[g],o=n[g+1]/e[g],u=Math.pow(a,2)+Math.pow(o,2),!(u<=9)&&(l=3/Math.sqrt(u),n[g]=a*l*e[g],n[g+1]=o*l*e[g])}}function F2(t,e,n="x"){const i=Px(n),a=t.length;let o,l,u,d=Jr(t,0);for(let f=0;f<a;++f){if(l=u,u=d,d=Jr(t,f+1),!u)continue;const g=u[n],p=u[i];l&&(o=(g-l[n])/3,u[`cp1${n}`]=g-o,u[`cp1${i}`]=p-o*e[f]),d&&(o=(d[n]-g)/3,u[`cp2${n}`]=g+o,u[`cp2${i}`]=p+o*e[f])}}function U2(t,e="x"){const n=Px(e),i=t.length,a=Array(i).fill(0),o=Array(i);let l,u,d,f=Jr(t,0);for(l=0;l<i;++l)if(u=d,d=f,f=Jr(t,l+1),!!d){if(f){const g=f[e]-d[e];a[l]=g!==0?(f[n]-d[n])/g:0}o[l]=u?f?Qr(a[l-1])!==Qr(a[l])?0:(a[l-1]+a[l])/2:a[l-1]:a[l]}I2(t,a,o),F2(t,o,e)}function Hu(t,e,n){return Math.max(Math.min(t,n),e)}function H2(t,e){let n,i,a,o,l,u=Jl(t[0],e);for(n=0,i=t.length;n<i;++n)l=o,o=u,u=n<i-1&&Jl(t[n+1],e),o&&(a=t[n],l&&(a.cp1x=Hu(a.cp1x,e.left,e.right),a.cp1y=Hu(a.cp1y,e.top,e.bottom)),u&&(a.cp2x=Hu(a.cp2x,e.left,e.right),a.cp2y=Hu(a.cp2y,e.top,e.bottom)))}function B2(t,e,n,i,a){let o,l,u,d;if(e.spanGaps&&(t=t.filter(f=>!f.skip)),e.cubicInterpolationMode==="monotone")U2(t,a);else{let f=i?t[t.length-1]:t[0];for(o=0,l=t.length;o<l;++o)u=t[o],d=z2(f,u,t[Math.min(o+1,l-(i?0:1))%l],e.tension),u.cp1x=d.previous.x,u.cp1y=d.previous.y,u.cp2x=d.next.x,u.cp2y=d.next.y,f=u}e.capBezierPoints&&H2(t,n)}function ap(){return typeof window<"u"&&typeof document<"u"}function rp(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function _d(t,e,n){let i;return typeof t=="string"?(i=parseInt(t,10),t.indexOf("%")!==-1&&(i=i/100*e.parentNode[n])):i=t,i}const zd=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function V2(t,e){return zd(t).getPropertyValue(e)}const $2=["top","right","bottom","left"];function Ia(t,e,n){const i={};n=n?"-"+n:"";for(let a=0;a<4;a++){const o=$2[a];i[o]=parseFloat(t[e+"-"+o+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const q2=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function G2(t,e){const n=t.touches,i=n&&n.length?n[0]:t,{offsetX:a,offsetY:o}=i;let l=!1,u,d;if(q2(a,o,t.target))u=a,d=o;else{const f=e.getBoundingClientRect();u=i.clientX-f.left,d=i.clientY-f.top,l=!0}return{x:u,y:d,box:l}}function Na(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:i}=e,a=zd(n),o=a.boxSizing==="border-box",l=Ia(a,"padding"),u=Ia(a,"border","width"),{x:d,y:f,box:g}=G2(t,n),p=l.left+(g&&u.left),b=l.top+(g&&u.top);let{width:_,height:w}=e;return o&&(_-=l.width+u.width,w-=l.height+u.height),{x:Math.round((d-p)/_*n.width/i),y:Math.round((f-b)/w*n.height/i)}}function Y2(t,e,n){let i,a;if(e===void 0||n===void 0){const o=t&&rp(t);if(!o)e=t.clientWidth,n=t.clientHeight;else{const l=o.getBoundingClientRect(),u=zd(o),d=Ia(u,"border","width"),f=Ia(u,"padding");e=l.width-f.width-d.width,n=l.height-f.height-d.height,i=_d(u.maxWidth,o,"clientWidth"),a=_d(u.maxHeight,o,"clientHeight")}}return{width:e,height:n,maxWidth:i||bd,maxHeight:a||bd}}const Bu=t=>Math.round(t*10)/10;function W2(t,e,n,i){const a=zd(t),o=Ia(a,"margin"),l=_d(a.maxWidth,t,"clientWidth")||bd,u=_d(a.maxHeight,t,"clientHeight")||bd,d=Y2(t,e,n);let{width:f,height:g}=d;if(a.boxSizing==="content-box"){const b=Ia(a,"border","width"),_=Ia(a,"padding");f-=_.width+b.width,g-=_.height+b.height}return f=Math.max(0,f-o.width),g=Math.max(0,i?f/i:g-o.height),f=Bu(Math.min(f,l,d.maxWidth)),g=Bu(Math.min(g,u,d.maxHeight)),f&&!g&&(g=Bu(f/2)),(e!==void 0||n!==void 0)&&i&&d.height&&g>d.height&&(g=d.height,f=Bu(Math.floor(g*i))),{width:f,height:g}}function $0(t,e,n){const i=e||1,a=Math.floor(t.height*i),o=Math.floor(t.width*i);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const l=t.canvas;return l.style&&(n||!l.style.height&&!l.style.width)&&(l.style.height=`${t.height}px`,l.style.width=`${t.width}px`),t.currentDevicePixelRatio!==i||l.height!==a||l.width!==o?(t.currentDevicePixelRatio=i,l.height=a,l.width=o,t.ctx.setTransform(i,0,0,i,0,0),!0):!1}const K2=(function(){let t=!1;try{const e={get passive(){return t=!0,!1}};ap()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t})();function q0(t,e){const n=V2(t,e),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function ja(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function X2(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:i==="middle"?n<.5?t.y:e.y:i==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function Q2(t,e,n,i){const a={x:t.cp2x,y:t.cp2y},o={x:e.cp1x,y:e.cp1y},l=ja(t,a,n),u=ja(a,o,n),d=ja(o,e,n),f=ja(l,u,n),g=ja(u,d,n);return ja(f,g,n)}const Z2=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,i){return n-i},leftForLtr(n,i){return n-i}}},J2=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function Wr(t,e,n){return t?Z2(e,n):J2()}function zx(t,e){let n,i;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=i)}function Ix(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function Fx(t){return t==="angle"?{between:Zl,compare:Xj,normalize:pi}:{between:$r,compare:(e,n)=>e-n,normalize:e=>e}}function G0({start:t,end:e,count:n,loop:i,style:a}){return{start:t%n,end:e%n,loop:i&&(e-t+1)%n===0,style:a}}function eL(t,e,n){const{property:i,start:a,end:o}=n,{between:l,normalize:u}=Fx(i),d=e.length;let{start:f,end:g,loop:p}=t,b,_;if(p){for(f+=d,g+=d,b=0,_=d;b<_&&l(u(e[f%d][i]),a,o);++b)f--,g--;f%=d,g%=d}return g<f&&(g+=d),{start:f,end:g,loop:p,style:t.style}}function tL(t,e,n){if(!n)return[t];const{property:i,start:a,end:o}=n,l=e.length,{compare:u,between:d,normalize:f}=Fx(i),{start:g,end:p,loop:b,style:_}=eL(t,e,n),w=[];let S=!1,x=null,C,O,A;const M=()=>d(a,A,C)&&u(a,A)!==0,D=()=>u(o,C)===0||d(o,A,C),V=()=>S||M(),F=()=>!S||D();for(let I=g,W=g;I<=p;++I)O=e[I%l],!O.skip&&(C=f(O[i]),C!==A&&(S=d(C,a,o),x===null&&V()&&(x=u(C,a)===0?I:W),x!==null&&F()&&(w.push(G0({start:x,end:I,loop:b,count:l,style:_})),x=null),W=I,A=C));return x!==null&&w.push(G0({start:x,end:p,loop:b,count:l,style:_})),w}function nL(t,e){const n=[],i=t.segments;for(let a=0;a<i.length;a++){const o=tL(i[a],t.points,e);o.length&&n.push(...o)}return n}function iL(t,e,n,i){let a=0,o=e-1;if(n&&!i)for(;a<e&&!t[a].skip;)a++;for(;a<e&&t[a].skip;)a++;for(a%=e,n&&(o+=a);o>a&&t[o%e].skip;)o--;return o%=e,{start:a,end:o}}function sL(t,e,n,i){const a=t.length,o=[];let l=e,u=t[e],d;for(d=e+1;d<=n;++d){const f=t[d%a];f.skip||f.stop?u.skip||(i=!1,o.push({start:e%a,end:(d-1)%a,loop:i}),e=l=f.stop?d:null):(l=d,u.skip&&(e=d)),u=f}return l!==null&&o.push({start:e%a,end:l%a,loop:i}),o}function aL(t,e){const n=t.points,i=t.options.spanGaps,a=n.length;if(!a)return[];const o=!!t._loop,{start:l,end:u}=iL(n,a,o,i);if(i===!0)return Y0(t,[{start:l,end:u,loop:o}],n,e);const d=u<l?u+a:u,f=!!t._fullLoop&&l===0&&u===a-1;return Y0(t,sL(n,l,d,f),n,e)}function Y0(t,e,n,i){return!i||!i.setContext||!n?e:rL(t,e,n,i)}function rL(t,e,n,i){const a=t._chart.getContext(),o=W0(t.options),{_datasetIndex:l,options:{spanGaps:u}}=t,d=n.length,f=[];let g=o,p=e[0].start,b=p;function _(w,S,x,C){const O=u?-1:1;if(w!==S){for(w+=d;n[w%d].skip;)w-=O;for(;n[S%d].skip;)S+=O;w%d!==S%d&&(f.push({start:w%d,end:S%d,loop:x,style:C}),g=C,p=S%d)}}for(const w of e){p=u?p:w.start;let S=n[p%d],x;for(b=p+1;b<=w.end;b++){const C=n[b%d];x=W0(i.setContext(Ba(a,{type:"segment",p0:S,p1:C,p0DataIndex:(b-1)%d,p1DataIndex:b%d,datasetIndex:l}))),oL(x,g)&&_(p,b-1,w.loop,g),S=C,g=x}p<b-1&&_(p,b-1,w.loop,g)}return f}function W0(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function oL(t,e){if(!e)return!1;const n=[],i=function(a,o){return Qm(o)?(n.includes(o)||n.push(o),n.indexOf(o)):o};return JSON.stringify(t,i)!==JSON.stringify(e,i)}function Vu(t,e,n){return t.options.clip?t[n]:e[n]}function lL(t,e){const{xScale:n,yScale:i}=t;return n&&i?{left:Vu(n,e,"left"),right:Vu(n,e,"right"),top:Vu(i,e,"top"),bottom:Vu(i,e,"bottom")}:e}function cL(t,e){const n=e._clip;if(n.disabled)return!1;const i=lL(e,t.chartArea);return{left:n.left===!1?0:i.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:i.right+(n.right===!0?0:n.right),top:n.top===!1?0:i.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:i.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class uL{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,i,a){const o=n.listeners[a],l=n.duration;o.forEach(u=>u({chart:e,initial:n.initial,numSteps:l,currentStep:Math.min(i-n.start,l)}))}_refresh(){this._request||(this._running=!0,this._request=Ax.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((i,a)=>{if(!i.running||!i.items.length)return;const o=i.items;let l=o.length-1,u=!1,d;for(;l>=0;--l)d=o[l],d._active?(d._total>i.duration&&(i.duration=d._total),d.tick(e),u=!0):(o[l]=o[o.length-1],o.pop());u&&(a.draw(),this._notify(a,i,e,"progress")),o.length||(i.running=!1,this._notify(a,i,e,"complete"),i.initial=!1),n+=o.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let i=n.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,i)),i}listen(e,n,i){this._getAnims(e).listeners[n].push(i)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((i,a)=>Math.max(i,a._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const i=n.items;let a=i.length-1;for(;a>=0;--a)i[a].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var cs=new uL;const K0="transparent",dL={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const i=I0(t||K0),a=i.valid&&I0(e||K0);return a&&a.valid?a.mix(i,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class hL{constructor(e,n,i,a){const o=n[i];a=Uu([e.to,a,o,e.from]);const l=Uu([e.from,o,a]);this._active=!0,this._fn=e.fn||dL[e.type||typeof l],this._easing=zl[e.easing]||zl.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=i,this._from=l,this._to=a,this._promises=void 0}active(){return this._active}update(e,n,i){if(this._active){this._notify(!1);const a=this._target[this._prop],o=i-this._start,l=this._duration-o;this._start=i,this._duration=Math.floor(Math.max(l,e.duration)),this._total+=o,this._loop=!!e.loop,this._to=Uu([e.to,n,a,e.from]),this._from=Uu([e.from,a,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,i=this._duration,a=this._prop,o=this._from,l=this._loop,u=this._to;let d;if(this._active=o!==u&&(l||n<i),!this._active){this._target[a]=u,this._notify(!0);return}if(n<0){this._target[a]=o;return}d=n/i%2,d=l&&d>1?2-d:d,d=this._easing(Math.min(1,Math.max(0,d))),this._target[a]=this._fn(o,u,d)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,i)=>{e.push({res:n,rej:i})})}_notify(e){const n=e?"res":"rej",i=this._promises||[];for(let a=0;a<i.length;a++)i[a][n]()}}class Ux{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!Ge(e))return;const n=Object.keys(kt.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(a=>{const o=e[a];if(!Ge(o))return;const l={};for(const u of n)l[u]=o[u];(nn(o.properties)&&o.properties||[a]).forEach(u=>{(u===a||!i.has(u))&&i.set(u,l)})})}_animateOptions(e,n){const i=n.options,a=gL(e,i);if(!a)return[];const o=this._createAnimations(a,i);return i.$shared&&fL(e.options.$animations,i).then(()=>{e.options=i},()=>{}),o}_createAnimations(e,n){const i=this._properties,a=[],o=e.$animations||(e.$animations={}),l=Object.keys(n),u=Date.now();let d;for(d=l.length-1;d>=0;--d){const f=l[d];if(f.charAt(0)==="$")continue;if(f==="options"){a.push(...this._animateOptions(e,n));continue}const g=n[f];let p=o[f];const b=i.get(f);if(p)if(b&&p.active()){p.update(b,g,u);continue}else p.cancel();if(!b||!b.duration){e[f]=g;continue}o[f]=p=new hL(b,e,f,g),a.push(p)}return a}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const i=this._createAnimations(e,n);if(i.length)return cs.add(this._chart,i),!0}}function fL(t,e){const n=[],i=Object.keys(e);for(let a=0;a<i.length;a++){const o=t[i[a]];o&&o.active()&&n.push(o.wait())}return Promise.all(n)}function gL(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function X0(t,e){const n=t&&t.options||{},i=n.reverse,a=n.min===void 0?e:0,o=n.max===void 0?e:0;return{start:i?o:a,end:i?a:o}}function mL(t,e,n){if(n===!1)return!1;const i=X0(t,n),a=X0(e,n);return{top:a.end,right:i.end,bottom:a.start,left:i.start}}function pL(t){let e,n,i,a;return Ge(t)?(e=t.top,n=t.right,i=t.bottom,a=t.left):e=n=i=a=t,{top:e,right:n,bottom:i,left:a,disabled:t===!1}}function Hx(t,e){const n=[],i=t._getSortedDatasetMetas(e);let a,o;for(a=0,o=i.length;a<o;++a)n.push(i[a].index);return n}function Q0(t,e,n,i={}){const a=t.keys,o=i.mode==="single";let l,u,d,f;if(e===null)return;let g=!1;for(l=0,u=a.length;l<u;++l){if(d=+a[l],d===n){if(g=!0,i.all)continue;break}f=t.values[d],ai(f)&&(o||e===0||Qr(e)===Qr(f))&&(e+=f)}return!g&&!i.all?0:e}function vL(t,e){const{iScale:n,vScale:i}=e,a=n.axis==="x"?"x":"y",o=i.axis==="x"?"x":"y",l=Object.keys(t),u=new Array(l.length);let d,f,g;for(d=0,f=l.length;d<f;++d)g=l[d],u[d]={[a]:g,[o]:t[g]};return u}function Rg(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function yL(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function bL(t){const{min:e,max:n,minDefined:i,maxDefined:a}=t.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:a?n:Number.POSITIVE_INFINITY}}function _L(t,e,n){const i=t[e]||(t[e]={});return i[n]||(i[n]={})}function Z0(t,e,n,i){for(const a of e.getMatchingVisibleMetas(i).reverse()){const o=t[a.index];if(n&&o>0||!n&&o<0)return a.index}return null}function J0(t,e){const{chart:n,_cachedMeta:i}=t,a=n._stacks||(n._stacks={}),{iScale:o,vScale:l,index:u}=i,d=o.axis,f=l.axis,g=yL(o,l,i),p=e.length;let b;for(let _=0;_<p;++_){const w=e[_],{[d]:S,[f]:x}=w,C=w._stacks||(w._stacks={});b=C[f]=_L(a,g,S),b[u]=x,b._top=Z0(b,l,!0,i.type),b._bottom=Z0(b,l,!1,i.type);const O=b._visualValues||(b._visualValues={});O[u]=x}}function Ag(t,e){const n=t.scales;return Object.keys(n).filter(i=>n[i].axis===e).shift()}function wL(t,e){return Ba(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function SL(t,e,n){return Ba(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function ml(t,e){const n=t.controller.index,i=t.vScale&&t.vScale.axis;if(i){e=e||t._parsed;for(const a of e){const o=a._stacks;if(!o||o[i]===void 0||o[i][n]===void 0)return;delete o[i][n],o[i]._visualValues!==void 0&&o[i]._visualValues[n]!==void 0&&delete o[i]._visualValues[n]}}}const Tg=t=>t==="reset"||t==="none",ew=(t,e)=>e?t:Object.assign({},t),xL=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:Hx(n,!0),values:null};class op{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Rg(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&ml(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,i=this.getDataset(),a=(p,b,_,w)=>p==="x"?b:p==="r"?w:_,o=n.xAxisID=He(i.xAxisID,Ag(e,"x")),l=n.yAxisID=He(i.yAxisID,Ag(e,"y")),u=n.rAxisID=He(i.rAxisID,Ag(e,"r")),d=n.indexAxis,f=n.iAxisID=a(d,o,l,u),g=n.vAxisID=a(d,l,o,u);n.xScale=this.getScaleForId(o),n.yScale=this.getScaleForId(l),n.rScale=this.getScaleForId(u),n.iScale=this.getScaleForId(f),n.vScale=this.getScaleForId(g)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&L0(this._data,this),e._stacked&&ml(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),i=this._data;if(Ge(n)){const a=this._cachedMeta;this._data=vL(n,a)}else if(i!==n){if(i){L0(i,this);const a=this._cachedMeta;ml(a),a._parsed=[]}n&&Object.isExtensible(n)&&e2(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,i=this.getDataset();let a=!1;this._dataCheck();const o=n._stacked;n._stacked=Rg(n.vScale,n),n.stack!==i.stack&&(a=!0,ml(n),n.stack=i.stack),this._resyncElements(e),(a||o!==n._stacked)&&(J0(this,n._parsed),n._stacked=Rg(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),i=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:i,_data:a}=this,{iScale:o,_stacked:l}=i,u=o.axis;let d=e===0&&n===a.length?!0:i._sorted,f=e>0&&i._parsed[e-1],g,p,b;if(this._parsing===!1)i._parsed=a,i._sorted=!0,b=a;else{nn(a[e])?b=this.parseArrayData(i,a,e,n):Ge(a[e])?b=this.parseObjectData(i,a,e,n):b=this.parsePrimitiveData(i,a,e,n);const _=()=>p[u]===null||f&&p[u]<f[u];for(g=0;g<n;++g)i._parsed[g+e]=p=b[g],d&&(_()&&(d=!1),f=p);i._sorted=d}l&&J0(this,b)}parsePrimitiveData(e,n,i,a){const{iScale:o,vScale:l}=e,u=o.axis,d=l.axis,f=o.getLabels(),g=o===l,p=new Array(a);let b,_,w;for(b=0,_=a;b<_;++b)w=b+i,p[b]={[u]:g||o.parse(f[w],w),[d]:l.parse(n[w],w)};return p}parseArrayData(e,n,i,a){const{xScale:o,yScale:l}=e,u=new Array(a);let d,f,g,p;for(d=0,f=a;d<f;++d)g=d+i,p=n[g],u[d]={x:o.parse(p[0],g),y:l.parse(p[1],g)};return u}parseObjectData(e,n,i,a){const{xScale:o,yScale:l}=e,{xAxisKey:u="x",yAxisKey:d="y"}=this._parsing,f=new Array(a);let g,p,b,_;for(g=0,p=a;g<p;++g)b=g+i,_=n[b],f[g]={x:o.parse(Xl(_,u),b),y:l.parse(Xl(_,d),b)};return f}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,i){const a=this.chart,o=this._cachedMeta,l=n[e.axis],u={keys:Hx(a,!0),values:n._stacks[e.axis]._visualValues};return Q0(u,l,o.index,{mode:i})}updateRangeFromParsed(e,n,i,a){const o=i[n.axis];let l=o===null?NaN:o;const u=a&&i._stacks[n.axis];a&&u&&(a.values=u,l=Q0(a,o,this._cachedMeta.index)),e.min=Math.min(e.min,l),e.max=Math.max(e.max,l)}getMinMax(e,n){const i=this._cachedMeta,a=i._parsed,o=i._sorted&&e===i.iScale,l=a.length,u=this._getOtherScale(e),d=xL(n,i,this.chart),f={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:g,max:p}=bL(u);let b,_;function w(){_=a[b];const S=_[u.axis];return!ai(_[e.axis])||g>S||p<S}for(b=0;b<l&&!(!w()&&(this.updateRangeFromParsed(f,e,_,d),o));++b);if(o){for(b=l-1;b>=0;--b)if(!w()){this.updateRangeFromParsed(f,e,_,d);break}}return f}getAllParsedValues(e){const n=this._cachedMeta._parsed,i=[];let a,o,l;for(a=0,o=n.length;a<o;++a)l=n[a][e.axis],ai(l)&&i.push(l);return i}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,i=n.iScale,a=n.vScale,o=this.getParsed(e);return{label:i?""+i.getLabelForValue(o[i.axis]):"",value:a?""+a.getLabelForValue(o[a.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=pL(He(this.options.clip,mL(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,i=this._cachedMeta,a=i.data||[],o=n.chartArea,l=[],u=this._drawStart||0,d=this._drawCount||a.length-u,f=this.options.drawActiveElementsOnTop;let g;for(i.dataset&&i.dataset.draw(e,o,u,d),g=u;g<u+d;++g){const p=a[g];p.hidden||(p.active&&f?l.push(p):p.draw(e,o))}for(g=0;g<l.length;++g)l[g].draw(e,o)}getStyle(e,n){const i=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(e||0,i)}getContext(e,n,i){const a=this.getDataset();let o;if(e>=0&&e<this._cachedMeta.data.length){const l=this._cachedMeta.data[e];o=l.$context||(l.$context=SL(this.getContext(),e,l)),o.parsed=this.getParsed(e),o.raw=a.data[e],o.index=o.dataIndex=e}else o=this.$context||(this.$context=wL(this.chart.getContext(),this.index)),o.dataset=a,o.index=o.datasetIndex=this.index;return o.active=!!n,o.mode=i,o}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",i){const a=n==="active",o=this._cachedDataOpts,l=e+"-"+n,u=o[l],d=this.enableOptionSharing&&yd(i);if(u)return ew(u,d);const f=this.chart.config,g=f.datasetElementScopeKeys(this._type,e),p=a?[`${e}Hover`,"hover",e,""]:[e,""],b=f.getOptionScopes(this.getDataset(),g),_=Object.keys(kt.elements[e]),w=()=>this.getContext(i,a,n),S=f.resolveNamedOptions(b,_,w,p);return S.$shared&&(S.$shared=d,o[l]=Object.freeze(ew(S,d))),S}_resolveAnimations(e,n,i){const a=this.chart,o=this._cachedDataOpts,l=`animation-${n}`,u=o[l];if(u)return u;let d;if(a.options.animation!==!1){const g=this.chart.config,p=g.datasetAnimationScopeKeys(this._type,n),b=g.getOptionScopes(this.getDataset(),p);d=g.createResolver(b,this.getContext(e,i,n))}const f=new Ux(a,d&&d.animations);return d&&d._cacheable&&(o[l]=Object.freeze(f)),f}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||Tg(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const i=this.resolveDataElementOptions(e,n),a=this._sharedOptions,o=this.getSharedOptions(i),l=this.includeOptions(n,o)||o!==a;return this.updateSharedOptions(o,n,i),{sharedOptions:o,includeOptions:l}}updateElement(e,n,i,a){Tg(a)?Object.assign(e,i):this._resolveAnimations(n,a).update(e,i)}updateSharedOptions(e,n,i){e&&!Tg(n)&&this._resolveAnimations(void 0,n).update(e,i)}_setStyle(e,n,i,a){e.active=a;const o=this.getStyle(n,a);this._resolveAnimations(n,i,a).update(e,{options:!a&&this.getSharedOptions(o)||o})}removeHoverStyle(e,n,i){this._setStyle(e,i,"active",!1)}setHoverStyle(e,n,i){this._setStyle(e,i,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,i=this._cachedMeta.data;for(const[u,d,f]of this._syncList)this[u](d,f);this._syncList=[];const a=i.length,o=n.length,l=Math.min(o,a);l&&this.parse(0,l),o>a?this._insertElements(a,o-a,e):o<a&&this._removeElements(o,a-o)}_insertElements(e,n,i=!0){const a=this._cachedMeta,o=a.data,l=e+n;let u;const d=f=>{for(f.length+=n,u=f.length-1;u>=l;u--)f[u]=f[u-n]};for(d(o),u=e;u<l;++u)o[u]=new this.dataElementType;this._parsing&&d(a._parsed),this.parse(e,n),i&&this.updateElements(o,e,n,"reset")}updateElements(e,n,i,a){}_removeElements(e,n){const i=this._cachedMeta;if(this._parsing){const a=i._parsed.splice(e,n);i._stacked&&ml(i,a)}i.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,i,a]=e;this[n](i,a)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const i=arguments.length-2;i&&this._sync(["_insertElements",e,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function EL(t,e,n){let i=1,a=1,o=0,l=0;if(e<Ot){const u=t,d=u+e,f=Math.cos(u),g=Math.sin(u),p=Math.cos(d),b=Math.sin(d),_=(A,M,D)=>Zl(A,u,d,!0)?1:Math.max(M,M*n,D,D*n),w=(A,M,D)=>Zl(A,u,d,!0)?-1:Math.min(M,M*n,D,D*n),S=_(0,f,p),x=_(Wt,g,b),C=w(et,f,p),O=w(et+Wt,g,b);i=(S-C)/2,a=(x-O)/2,o=-(S+C)/2,l=-(x+O)/2}return{ratioX:i,ratioY:a,offsetX:o,offsetY:l}}class CL extends op{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:i,color:a}}=e.legend.options;return n.labels.map((o,l)=>{const d=e.getDatasetMeta(0).controller.getStyle(l);return{text:o,fillStyle:d.backgroundColor,strokeStyle:d.borderColor,fontColor:a,lineWidth:d.borderWidth,pointStyle:i,hidden:!e.getDataVisibility(l),index:l}})}return[]}},onClick(e,n,i){i.chart.toggleDataVisibility(n.index),i.chart.update()}}}};constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const i=this.getDataset().data,a=this._cachedMeta;if(this._parsing===!1)a._parsed=i;else{let o=d=>+i[d];if(Ge(i[e])){const{key:d="value"}=this._parsing;o=f=>+Xl(i[f],d)}let l,u;for(l=e,u=e+n;l<u;++l)a._parsed[l]=o(l)}}_getRotation(){return ms(this.options.rotation-90)}_getCircumference(){return ms(this.options.circumference)}_getRotationExtents(){let e=Ot,n=-Ot;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const a=this.chart.getDatasetMeta(i).controller,o=a._getRotation(),l=a._getCircumference();e=Math.min(e,o),n=Math.max(n,o+l)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:i}=n,a=this._cachedMeta,o=a.data,l=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,u=Math.max((Math.min(i.width,i.height)-l)/2,0),d=Math.min(zj(this.options.cutout,u),1),f=this._getRingWeight(this.index),{circumference:g,rotation:p}=this._getRotationExtents(),{ratioX:b,ratioY:_,offsetX:w,offsetY:S}=EL(p,g,d),x=(i.width-l)/b,C=(i.height-l)/_,O=Math.max(Math.min(x,C)/2,0),A=xx(this.options.radius,O),M=Math.max(A*d,0),D=(A-M)/this._getVisibleDatasetWeightTotal();this.offsetX=w*A,this.offsetY=S*A,a.total=this.calculateTotal(),this.outerRadius=A-D*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-D*f,0),this.updateElements(o,0,o.length,e)}_circumference(e,n){const i=this.options,a=this._cachedMeta,o=this._getCircumference();return n&&i.animation.animateRotate||!this.chart.getDataVisibility(e)||a._parsed[e]===null||a.data[e].hidden?0:this.calculateCircumference(a._parsed[e]*o/Ot)}updateElements(e,n,i,a){const o=a==="reset",l=this.chart,u=l.chartArea,f=l.options.animation,g=(u.left+u.right)/2,p=(u.top+u.bottom)/2,b=o&&f.animateScale,_=b?0:this.innerRadius,w=b?0:this.outerRadius,{sharedOptions:S,includeOptions:x}=this._getSharedOptions(n,a);let C=this._getRotation(),O;for(O=0;O<n;++O)C+=this._circumference(O,o);for(O=n;O<n+i;++O){const A=this._circumference(O,o),M=e[O],D={x:g+this.offsetX,y:p+this.offsetY,startAngle:C,endAngle:C+A,circumference:A,outerRadius:w,innerRadius:_};x&&(D.options=S||this.resolveDataElementOptions(O,M.active?"active":a)),C+=A,this.updateElement(M,O,D,a)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let i=0,a;for(a=0;a<n.length;a++){const o=e._parsed[a];o!==null&&!isNaN(o)&&this.chart.getDataVisibility(a)&&!n[a].hidden&&(i+=Math.abs(o))}return i}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?Ot*(Math.abs(e)/n):0}getLabelAndValue(e){const n=this._cachedMeta,i=this.chart,a=i.data.labels||[],o=Zm(n._parsed[e],i.options.locale);return{label:a[e]||"",value:o}}getMaxBorderWidth(e){let n=0;const i=this.chart;let a,o,l,u,d;if(!e){for(a=0,o=i.data.datasets.length;a<o;++a)if(i.isDatasetVisible(a)){l=i.getDatasetMeta(a),e=l.data,u=l.controller;break}}if(!e)return 0;for(a=0,o=e.length;a<o;++a)d=u.resolveDataElementOptions(a),d.borderAlign!=="inner"&&(n=Math.max(n,d.borderWidth||0,d.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let i=0,a=e.length;i<a;++i){const o=this.resolveDataElementOptions(i);n=Math.max(n,o.offset||0,o.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let i=0;i<e;++i)this.chart.isDatasetVisible(i)&&(n+=this._getRingWeight(i));return n}_getRingWeight(e){return Math.max(He(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class OL extends op{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:i,data:a=[],_dataset:o}=n,l=this.chart._animationsDisabled;let{start:u,count:d}=s2(n,a,l);this._drawStart=u,this._drawCount=d,a2(n)&&(u=0,d=a.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!o._decimated,i.points=a;const f=this.resolveDatasetElementOptions(e);this.options.showLine||(f.borderWidth=0),f.segment=this.options.segment,this.updateElement(i,void 0,{animated:!l,options:f},e),this.updateElements(a,u,d,e)}updateElements(e,n,i,a){const o=a==="reset",{iScale:l,vScale:u,_stacked:d,_dataset:f}=this._cachedMeta,{sharedOptions:g,includeOptions:p}=this._getSharedOptions(n,a),b=l.axis,_=u.axis,{spanGaps:w,segment:S}=this.options,x=Ql(w)?w:Number.POSITIVE_INFINITY,C=this.chart._animationsDisabled||o||a==="none",O=n+i,A=e.length;let M=n>0&&this.getParsed(n-1);for(let D=0;D<A;++D){const V=e[D],F=C?V:{};if(D<n||D>=O){F.skip=!0;continue}const I=this.getParsed(D),W=ht(I[_]),X=F[b]=l.getPixelForValue(I[b],D),Q=F[_]=o||W?u.getBasePixel():u.getPixelForValue(d?this.applyStack(u,I,d):I[_],D);F.skip=isNaN(X)||isNaN(Q)||W,F.stop=D>0&&Math.abs(I[b]-M[b])>x,S&&(F.parsed=I,F.raw=f.data[D]),p&&(F.options=g||this.resolveDataElementOptions(D,V.active?"active":a)),C||this.updateElement(V,D,F,a),M=I}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,i=n.options&&n.options.borderWidth||0,a=e.data||[];if(!a.length)return i;const o=a[0].size(this.resolveDataElementOptions(0)),l=a[a.length-1].size(this.resolveDataElementOptions(a.length-1));return Math.max(i,o,l)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}class RL extends CL{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}function Da(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class lp{static override(e){Object.assign(lp.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return Da()}parse(){return Da()}format(){return Da()}add(){return Da()}diff(){return Da()}startOf(){return Da()}endOf(){return Da()}}var AL={_date:lp};function TL(t,e,n,i){const{controller:a,data:o,_sorted:l}=t,u=a._cachedMeta.iScale,d=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(u&&e===u.axis&&e!=="r"&&l&&o.length){const f=u._reversePixels?Zj:za;if(i){if(a._sharedOptions){const g=o[0],p=typeof g.getRange=="function"&&g.getRange(e);if(p){const b=f(o,e,n-p),_=f(o,e,n+p);return{lo:b.lo,hi:_.hi}}}}else{const g=f(o,e,n);if(d){const{vScale:p}=a._cachedMeta,{_parsed:b}=t,_=b.slice(0,g.lo+1).reverse().findIndex(S=>!ht(S[p.axis]));g.lo-=Math.max(0,_);const w=b.slice(g.hi).findIndex(S=>!ht(S[p.axis]));g.hi+=Math.max(0,w)}return g}}return{lo:0,hi:o.length-1}}function Id(t,e,n,i,a){const o=t.getSortedVisibleDatasetMetas(),l=n[e];for(let u=0,d=o.length;u<d;++u){const{index:f,data:g}=o[u],{lo:p,hi:b}=TL(o[u],e,l,a);for(let _=p;_<=b;++_){const w=g[_];w.skip||i(w,f,_)}}}function DL(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(i,a){const o=e?Math.abs(i.x-a.x):0,l=n?Math.abs(i.y-a.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(l,2))}}function Dg(t,e,n,i,a){const o=[];return!a&&!t.isPointInArea(e)||Id(t,n,e,function(u,d,f){!a&&!Jl(u,t.chartArea,0)||u.inRange(e.x,e.y,i)&&o.push({element:u,datasetIndex:d,index:f})},!0),o}function ML(t,e,n,i){let a=[];function o(l,u,d){const{startAngle:f,endAngle:g}=l.getProps(["startAngle","endAngle"],i),{angle:p}=Ox(l,{x:e.x,y:e.y});Zl(p,f,g)&&a.push({element:l,datasetIndex:u,index:d})}return Id(t,n,e,o),a}function kL(t,e,n,i,a,o){let l=[];const u=DL(n);let d=Number.POSITIVE_INFINITY;function f(g,p,b){const _=g.inRange(e.x,e.y,a);if(i&&!_)return;const w=g.getCenterPoint(a);if(!(!!o||t.isPointInArea(w))&&!_)return;const x=u(e,w);x<d?(l=[{element:g,datasetIndex:p,index:b}],d=x):x===d&&l.push({element:g,datasetIndex:p,index:b})}return Id(t,n,e,f),l}function Mg(t,e,n,i,a,o){return!o&&!t.isPointInArea(e)?[]:n==="r"&&!i?ML(t,e,n,a):kL(t,e,n,i,a,o)}function tw(t,e,n,i,a){const o=[],l=n==="x"?"inXRange":"inYRange";let u=!1;return Id(t,n,e,(d,f,g)=>{d[l]&&d[l](e[n],a)&&(o.push({element:d,datasetIndex:f,index:g}),u=u||d.inRange(e.x,e.y,a))}),i&&!u?[]:o}var NL={modes:{index(t,e,n,i){const a=Na(e,t),o=n.axis||"x",l=n.includeInvisible||!1,u=n.intersect?Dg(t,a,o,i,l):Mg(t,a,o,!1,i,l),d=[];return u.length?(t.getSortedVisibleDatasetMetas().forEach(f=>{const g=u[0].index,p=f.data[g];p&&!p.skip&&d.push({element:p,datasetIndex:f.index,index:g})}),d):[]},dataset(t,e,n,i){const a=Na(e,t),o=n.axis||"xy",l=n.includeInvisible||!1;let u=n.intersect?Dg(t,a,o,i,l):Mg(t,a,o,!1,i,l);if(u.length>0){const d=u[0].datasetIndex,f=t.getDatasetMeta(d).data;u=[];for(let g=0;g<f.length;++g)u.push({element:f[g],datasetIndex:d,index:g})}return u},point(t,e,n,i){const a=Na(e,t),o=n.axis||"xy",l=n.includeInvisible||!1;return Dg(t,a,o,i,l)},nearest(t,e,n,i){const a=Na(e,t),o=n.axis||"xy",l=n.includeInvisible||!1;return Mg(t,a,o,n.intersect,i,l)},x(t,e,n,i){const a=Na(e,t);return tw(t,a,"x",n.intersect,i)},y(t,e,n,i){const a=Na(e,t);return tw(t,a,"y",n.intersect,i)}}};const Bx=["left","top","right","bottom"];function pl(t,e){return t.filter(n=>n.pos===e)}function nw(t,e){return t.filter(n=>Bx.indexOf(n.pos)===-1&&n.box.axis===e)}function vl(t,e){return t.sort((n,i)=>{const a=e?i:n,o=e?n:i;return a.weight===o.weight?a.index-o.index:a.weight-o.weight})}function jL(t){const e=[];let n,i,a,o,l,u;for(n=0,i=(t||[]).length;n<i;++n)a=t[n],{position:o,options:{stack:l,stackWeight:u=1}}=a,e.push({index:n,box:a,pos:o,horizontal:a.isHorizontal(),weight:a.weight,stack:l&&o+l,stackWeight:u});return e}function LL(t){const e={};for(const n of t){const{stack:i,pos:a,stackWeight:o}=n;if(!i||!Bx.includes(a))continue;const l=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});l.count++,l.weight+=o}return e}function PL(t,e){const n=LL(t),{vBoxMaxWidth:i,hBoxMaxHeight:a}=e;let o,l,u;for(o=0,l=t.length;o<l;++o){u=t[o];const{fullSize:d}=u.box,f=n[u.stack],g=f&&u.stackWeight/f.weight;u.horizontal?(u.width=g?g*i:d&&e.availableWidth,u.height=a):(u.width=i,u.height=g?g*a:d&&e.availableHeight)}return n}function zL(t){const e=jL(t),n=vl(e.filter(f=>f.box.fullSize),!0),i=vl(pl(e,"left"),!0),a=vl(pl(e,"right")),o=vl(pl(e,"top"),!0),l=vl(pl(e,"bottom")),u=nw(e,"x"),d=nw(e,"y");return{fullSize:n,leftAndTop:i.concat(o),rightAndBottom:a.concat(d).concat(l).concat(u),chartArea:pl(e,"chartArea"),vertical:i.concat(a).concat(d),horizontal:o.concat(l).concat(u)}}function iw(t,e,n,i){return Math.max(t[n],e[n])+Math.max(t[i],e[i])}function Vx(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function IL(t,e,n,i){const{pos:a,box:o}=n,l=t.maxPadding;if(!Ge(a)){n.size&&(t[a]-=n.size);const p=i[n.stack]||{size:0,count:1};p.size=Math.max(p.size,n.horizontal?o.height:o.width),n.size=p.size/p.count,t[a]+=n.size}o.getPadding&&Vx(l,o.getPadding());const u=Math.max(0,e.outerWidth-iw(l,t,"left","right")),d=Math.max(0,e.outerHeight-iw(l,t,"top","bottom")),f=u!==t.w,g=d!==t.h;return t.w=u,t.h=d,n.horizontal?{same:f,other:g}:{same:g,other:f}}function FL(t){const e=t.maxPadding;function n(i){const a=Math.max(e[i]-t[i],0);return t[i]+=a,a}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function UL(t,e){const n=e.maxPadding;function i(a){const o={left:0,top:0,right:0,bottom:0};return a.forEach(l=>{o[l]=Math.max(e[l],n[l])}),o}return i(t?["left","right"]:["top","bottom"])}function xl(t,e,n,i){const a=[];let o,l,u,d,f,g;for(o=0,l=t.length,f=0;o<l;++o){u=t[o],d=u.box,d.update(u.width||e.w,u.height||e.h,UL(u.horizontal,e));const{same:p,other:b}=IL(e,n,u,i);f|=p&&a.length,g=g||b,d.fullSize||a.push(u)}return f&&xl(a,e,n,i)||g}function $u(t,e,n,i,a){t.top=n,t.left=e,t.right=e+i,t.bottom=n+a,t.width=i,t.height=a}function sw(t,e,n,i){const a=n.padding;let{x:o,y:l}=e;for(const u of t){const d=u.box,f=i[u.stack]||{placed:0,weight:1},g=u.stackWeight/f.weight||1;if(u.horizontal){const p=e.w*g,b=f.size||d.height;yd(f.start)&&(l=f.start),d.fullSize?$u(d,a.left,l,n.outerWidth-a.right-a.left,b):$u(d,e.left+f.placed,l,p,b),f.start=l,f.placed+=p,l=d.bottom}else{const p=e.h*g,b=f.size||d.width;yd(f.start)&&(o=f.start),d.fullSize?$u(d,o,a.top,b,n.outerHeight-a.bottom-a.top):$u(d,o,e.top+f.placed,b,p),f.start=o,f.placed+=p,o=d.right}}e.x=o,e.y=l}var si={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,i){if(!t)return;const a=ri(t.options.layout.padding),o=Math.max(e-a.width,0),l=Math.max(n-a.height,0),u=zL(t.boxes),d=u.vertical,f=u.horizontal;Je(t.boxes,S=>{typeof S.beforeLayout=="function"&&S.beforeLayout()});const g=d.reduce((S,x)=>x.box.options&&x.box.options.display===!1?S:S+1,0)||1,p=Object.freeze({outerWidth:e,outerHeight:n,padding:a,availableWidth:o,availableHeight:l,vBoxMaxWidth:o/2/g,hBoxMaxHeight:l/2}),b=Object.assign({},a);Vx(b,ri(i));const _=Object.assign({maxPadding:b,w:o,h:l,x:a.left,y:a.top},a),w=PL(d.concat(f),p);xl(u.fullSize,_,p,w),xl(d,_,p,w),xl(f,_,p,w)&&xl(d,_,p,w),FL(_),sw(u.leftAndTop,_,p,w),_.x+=_.w,_.y+=_.h,sw(u.rightAndBottom,_,p,w),t.chartArea={left:_.left,top:_.top,right:_.left+_.w,bottom:_.top+_.h,height:_.h,width:_.w},Je(u.chartArea,S=>{const x=S.box;Object.assign(x,t.chartArea),x.update(_.w,_.h,{left:0,top:0,right:0,bottom:0})})}};class $x{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,i){}removeEventListener(e,n,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,i,a){return n=Math.max(0,n||e.width),i=i||e.height,{width:n,height:Math.max(0,a?Math.floor(n/a):i)}}isAttached(e){return!0}updateConfig(e){}}class HL extends $x{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const ed="$chartjs",BL={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},aw=t=>t===null||t==="";function VL(t,e){const n=t.style,i=t.getAttribute("height"),a=t.getAttribute("width");if(t[ed]={initial:{height:i,width:a,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",aw(a)){const o=q0(t,"width");o!==void 0&&(t.width=o)}if(aw(i))if(t.style.height==="")t.height=t.width/(e||2);else{const o=q0(t,"height");o!==void 0&&(t.height=o)}return t}const qx=K2?{passive:!0}:!1;function $L(t,e,n){t&&t.addEventListener(e,n,qx)}function qL(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,qx)}function GL(t,e){const n=BL[t.type]||t.type,{x:i,y:a}=Na(t,e);return{type:n,chart:e,native:t,x:i!==void 0?i:null,y:a!==void 0?a:null}}function wd(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function YL(t,e,n){const i=t.canvas,a=new MutationObserver(o=>{let l=!1;for(const u of o)l=l||wd(u.addedNodes,i),l=l&&!wd(u.removedNodes,i);l&&n()});return a.observe(document,{childList:!0,subtree:!0}),a}function WL(t,e,n){const i=t.canvas,a=new MutationObserver(o=>{let l=!1;for(const u of o)l=l||wd(u.removedNodes,i),l=l&&!wd(u.addedNodes,i);l&&n()});return a.observe(document,{childList:!0,subtree:!0}),a}const tc=new Map;let rw=0;function Gx(){const t=window.devicePixelRatio;t!==rw&&(rw=t,tc.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function KL(t,e){tc.size||window.addEventListener("resize",Gx),tc.set(t,e)}function XL(t){tc.delete(t),tc.size||window.removeEventListener("resize",Gx)}function QL(t,e,n){const i=t.canvas,a=i&&rp(i);if(!a)return;const o=Tx((u,d)=>{const f=a.clientWidth;n(u,d),f<a.clientWidth&&n()},window),l=new ResizeObserver(u=>{const d=u[0],f=d.contentRect.width,g=d.contentRect.height;f===0&&g===0||o(f,g)});return l.observe(a),KL(t,o),l}function kg(t,e,n){n&&n.disconnect(),e==="resize"&&XL(t)}function ZL(t,e,n){const i=t.canvas,a=Tx(o=>{t.ctx!==null&&n(GL(o,t))},t);return $L(i,e,a),a}class JL extends $x{acquireContext(e,n){const i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(VL(e,n),i):null}releaseContext(e){const n=e.canvas;if(!n[ed])return!1;const i=n[ed].initial;["height","width"].forEach(o=>{const l=i[o];ht(l)?n.removeAttribute(o):n.setAttribute(o,l)});const a=i.style||{};return Object.keys(a).forEach(o=>{n.style[o]=a[o]}),n.width=n.width,delete n[ed],!0}addEventListener(e,n,i){this.removeEventListener(e,n);const a=e.$proxies||(e.$proxies={}),l={attach:YL,detach:WL,resize:QL}[n]||ZL;a[n]=l(e,n,i)}removeEventListener(e,n){const i=e.$proxies||(e.$proxies={}),a=i[n];if(!a)return;({attach:kg,detach:kg,resize:kg}[n]||qL)(e,n,a),i[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,i,a){return W2(e,n,i,a)}isAttached(e){const n=e&&rp(e);return!!(n&&n.isConnected)}}function eP(t){return!ap()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?HL:JL}class ra{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){const{x:n,y:i}=this.getProps(["x","y"],e);return{x:n,y:i}}hasValue(){return Ql(this.x)&&Ql(this.y)}getProps(e,n){const i=this.$animations;if(!n||!i)return this;const a={};return e.forEach(o=>{a[o]=i[o]&&i[o].active()?i[o]._to:this[o]}),a}}function tP(t,e){const n=t.options.ticks,i=nP(t),a=Math.min(n.maxTicksLimit||i,i),o=n.major.enabled?sP(e):[],l=o.length,u=o[0],d=o[l-1],f=[];if(l>a)return aP(e,f,o,l/a),f;const g=iP(o,e,a);if(l>0){let p,b;const _=l>1?Math.round((d-u)/(l-1)):null;for(qu(e,f,g,ht(_)?0:u-_,u),p=0,b=l-1;p<b;p++)qu(e,f,g,o[p],o[p+1]);return qu(e,f,g,d,ht(_)?e.length:d+_),f}return qu(e,f,g),f}function nP(t){const e=t.options.offset,n=t._tickSize(),i=t._length/n+(e?0:1),a=t._maxLength/n;return Math.floor(Math.min(i,a))}function iP(t,e,n){const i=rP(t),a=e.length/n;if(!i)return Math.max(a,1);const o=qj(i);for(let l=0,u=o.length-1;l<u;l++){const d=o[l];if(d>a)return d}return Math.max(a,1)}function sP(t){const e=[];let n,i;for(n=0,i=t.length;n<i;n++)t[n].major&&e.push(n);return e}function aP(t,e,n,i){let a=0,o=n[0],l;for(i=Math.ceil(i),l=0;l<t.length;l++)l===o&&(e.push(t[l]),a++,o=n[a*i])}function qu(t,e,n,i,a){const o=He(i,0),l=Math.min(He(a,t.length),t.length);let u=0,d,f,g;for(n=Math.ceil(n),a&&(d=a-i,n=d/Math.floor(d/n)),g=o;g<0;)u++,g=Math.round(o+u*n);for(f=Math.max(o,0);f<l;f++)f===g&&(e.push(t[f]),u++,g=Math.round(o+u*n))}function rP(t){const e=t.length;let n,i;if(e<2)return!1;for(i=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==i)return!1;return i}const oP=t=>t==="left"?"right":t==="right"?"left":t,ow=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,lw=(t,e)=>Math.min(e||t,t);function cw(t,e){const n=[],i=t.length/e,a=t.length;let o=0;for(;o<a;o+=i)n.push(t[Math.floor(o)]);return n}function lP(t,e,n){const i=t.ticks.length,a=Math.min(e,i-1),o=t._startPixel,l=t._endPixel,u=1e-6;let d=t.getPixelForTick(a),f;if(!(n&&(i===1?f=Math.max(d-o,l-d):e===0?f=(t.getPixelForTick(1)-d)/2:f=(d-t.getPixelForTick(a-1))/2,d+=a<e?f:-f,d<o-u||d>l+u)))return d}function cP(t,e){Je(t,n=>{const i=n.gc,a=i.length/2;let o;if(a>e){for(o=0;o<a;++o)delete n.data[i[o]];i.splice(0,a)}})}function yl(t){return t.drawTicks?t.tickLength:0}function uw(t,e){if(!t.display)return 0;const n=yn(t.font,e),i=ri(t.padding);return(nn(t.text)?t.text.length:1)*n.lineHeight+i.height}function uP(t,e){return Ba(t,{scale:e,type:"scale"})}function dP(t,e,n){return Ba(t,{tick:n,index:e,type:"tick"})}function hP(t,e,n){let i=Xm(t);return(n&&e!=="right"||!n&&e==="right")&&(i=oP(i)),i}function fP(t,e,n,i){const{top:a,left:o,bottom:l,right:u,chart:d}=t,{chartArea:f,scales:g}=d;let p=0,b,_,w;const S=l-a,x=u-o;if(t.isHorizontal()){if(_=pn(i,o,u),Ge(n)){const C=Object.keys(n)[0],O=n[C];w=g[C].getPixelForValue(O)+S-e}else n==="center"?w=(f.bottom+f.top)/2+S-e:w=ow(t,n,e);b=u-o}else{if(Ge(n)){const C=Object.keys(n)[0],O=n[C];_=g[C].getPixelForValue(O)-x+e}else n==="center"?_=(f.left+f.right)/2-x+e:_=ow(t,n,e);w=pn(i,l,a),p=n==="left"?-Wt:Wt}return{titleX:_,titleY:w,maxWidth:b,rotation:p}}class oo extends ra{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:i,_suggestedMax:a}=this;return e=Ni(e,Number.POSITIVE_INFINITY),n=Ni(n,Number.NEGATIVE_INFINITY),i=Ni(i,Number.POSITIVE_INFINITY),a=Ni(a,Number.NEGATIVE_INFINITY),{min:Ni(e,i),max:Ni(n,a),minDefined:ai(e),maxDefined:ai(n)}}getMinMax(e){let{min:n,max:i,minDefined:a,maxDefined:o}=this.getUserBounds(),l;if(a&&o)return{min:n,max:i};const u=this.getMatchingVisibleMetas();for(let d=0,f=u.length;d<f;++d)l=u[d].controller.getMinMax(this,e),a||(n=Math.min(n,l.min)),o||(i=Math.max(i,l.max));return n=o&&n>i?i:n,i=a&&n>i?n:i,{min:Ni(n,Ni(i,n)),max:Ni(i,Ni(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){mt(this.options.beforeUpdate,[this])}update(e,n,i){const{beginAtZero:a,grace:o,ticks:l}=this.options,u=l.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=O2(this,o,a),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const d=u<this.ticks.length;this._convertTicksToLabels(d?cw(this.ticks,u):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),l.display&&(l.autoSkip||l.source==="auto")&&(this.ticks=tP(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),d&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,i;this.isHorizontal()?(n=this.left,i=this.right):(n=this.top,i=this.bottom,e=!e),this._startPixel=n,this._endPixel=i,this._reversePixels=e,this._length=i-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){mt(this.options.afterUpdate,[this])}beforeSetDimensions(){mt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){mt(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),mt(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){mt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let i,a,o;for(i=0,a=e.length;i<a;i++)o=e[i],o.label=mt(n.callback,[o.value,i,e],this)}afterTickToLabelConversion(){mt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){mt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,i=lw(this.ticks.length,e.ticks.maxTicksLimit),a=n.minRotation||0,o=n.maxRotation;let l=a,u,d,f;if(!this._isVisible()||!n.display||a>=o||i<=1||!this.isHorizontal()){this.labelRotation=a;return}const g=this._getLabelSizes(),p=g.widest.width,b=g.highest.height,_=En(this.chart.width-p,0,this.maxWidth);u=e.offset?this.maxWidth/i:_/(i-1),p+6>u&&(u=_/(i-(e.offset?.5:1)),d=this.maxHeight-yl(e.grid)-n.padding-uw(e.title,this.chart.options.font),f=Math.sqrt(p*p+b*b),l=Kj(Math.min(Math.asin(En((g.highest.height+6)/u,-1,1)),Math.asin(En(d/f,-1,1))-Math.asin(En(b/f,-1,1)))),l=Math.max(a,Math.min(o,l))),this.labelRotation=l}afterCalculateLabelRotation(){mt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){mt(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:i,title:a,grid:o}}=this,l=this._isVisible(),u=this.isHorizontal();if(l){const d=uw(a,n.options.font);if(u?(e.width=this.maxWidth,e.height=yl(o)+d):(e.height=this.maxHeight,e.width=yl(o)+d),i.display&&this.ticks.length){const{first:f,last:g,widest:p,highest:b}=this._getLabelSizes(),_=i.padding*2,w=ms(this.labelRotation),S=Math.cos(w),x=Math.sin(w);if(u){const C=i.mirror?0:x*p.width+S*b.height;e.height=Math.min(this.maxHeight,e.height+C+_)}else{const C=i.mirror?0:S*p.width+x*b.height;e.width=Math.min(this.maxWidth,e.width+C+_)}this._calculatePadding(f,g,x,S)}}this._handleMargins(),u?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,i,a){const{ticks:{align:o,padding:l},position:u}=this.options,d=this.labelRotation!==0,f=u!=="top"&&this.axis==="x";if(this.isHorizontal()){const g=this.getPixelForTick(0)-this.left,p=this.right-this.getPixelForTick(this.ticks.length-1);let b=0,_=0;d?f?(b=a*e.width,_=i*n.height):(b=i*e.height,_=a*n.width):o==="start"?_=n.width:o==="end"?b=e.width:o!=="inner"&&(b=e.width/2,_=n.width/2),this.paddingLeft=Math.max((b-g+l)*this.width/(this.width-g),0),this.paddingRight=Math.max((_-p+l)*this.width/(this.width-p),0)}else{let g=n.height/2,p=e.height/2;o==="start"?(g=0,p=e.height):o==="end"&&(g=n.height,p=0),this.paddingTop=g+l,this.paddingBottom=p+l}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){mt(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,i;for(n=0,i=e.length;n<i;n++)ht(e[n].label)&&(e.splice(n,1),i--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let i=this.ticks;n<i.length&&(i=cw(i,n)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,i){const{ctx:a,_longestTextCache:o}=this,l=[],u=[],d=Math.floor(n/lw(n,i));let f=0,g=0,p,b,_,w,S,x,C,O,A,M,D;for(p=0;p<n;p+=d){if(w=e[p].label,S=this._resolveTickFontOptions(p),a.font=x=S.string,C=o[x]=o[x]||{data:{},gc:[]},O=S.lineHeight,A=M=0,!ht(w)&&!nn(w))A=U0(a,C.data,C.gc,A,w),M=O;else if(nn(w))for(b=0,_=w.length;b<_;++b)D=w[b],!ht(D)&&!nn(D)&&(A=U0(a,C.data,C.gc,A,D),M+=O);l.push(A),u.push(M),f=Math.max(A,f),g=Math.max(M,g)}cP(o,n);const V=l.indexOf(f),F=u.indexOf(g),I=W=>({width:l[W]||0,height:u[W]||0});return{first:I(0),last:I(n-1),widest:I(V),highest:I(F),widths:l,heights:u}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return Qj(this._alignToPixels?Ta(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const i=n[e];return i.$context||(i.$context=dP(this.getContext(),e,i))}return this.$context||(this.$context=uP(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=ms(this.labelRotation),i=Math.abs(Math.cos(n)),a=Math.abs(Math.sin(n)),o=this._getLabelSizes(),l=e.autoSkipPadding||0,u=o?o.widest.width+l:0,d=o?o.highest.height+l:0;return this.isHorizontal()?d*i>u*a?u/i:d/a:d*a<u*i?d/i:u/a}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,i=this.chart,a=this.options,{grid:o,position:l,border:u}=a,d=o.offset,f=this.isHorizontal(),p=this.ticks.length+(d?1:0),b=yl(o),_=[],w=u.setContext(this.getContext()),S=w.display?w.width:0,x=S/2,C=function(P){return Ta(i,P,S)};let O,A,M,D,V,F,I,W,X,Q,H,ie;if(l==="top")O=C(this.bottom),F=this.bottom-b,W=O-x,Q=C(e.top)+x,ie=e.bottom;else if(l==="bottom")O=C(this.top),Q=e.top,ie=C(e.bottom)-x,F=O+x,W=this.top+b;else if(l==="left")O=C(this.right),V=this.right-b,I=O-x,X=C(e.left)+x,H=e.right;else if(l==="right")O=C(this.left),X=e.left,H=C(e.right)-x,V=O+x,I=this.left+b;else if(n==="x"){if(l==="center")O=C((e.top+e.bottom)/2+.5);else if(Ge(l)){const P=Object.keys(l)[0],K=l[P];O=C(this.chart.scales[P].getPixelForValue(K))}Q=e.top,ie=e.bottom,F=O+x,W=F+b}else if(n==="y"){if(l==="center")O=C((e.left+e.right)/2);else if(Ge(l)){const P=Object.keys(l)[0],K=l[P];O=C(this.chart.scales[P].getPixelForValue(K))}V=O-x,I=V-b,X=e.left,H=e.right}const se=He(a.ticks.maxTicksLimit,p),ue=Math.max(1,Math.ceil(p/se));for(A=0;A<p;A+=ue){const P=this.getContext(A),K=o.setContext(P),le=u.setContext(P),de=K.lineWidth,N=K.color,Z=le.dash||[],ae=le.dashOffset,re=K.tickWidth,me=K.tickColor,be=K.tickBorderDash||[],q=K.tickBorderDashOffset;M=lP(this,A,d),M!==void 0&&(D=Ta(i,M,de),f?V=I=X=H=D:F=W=Q=ie=D,_.push({tx1:V,ty1:F,tx2:I,ty2:W,x1:X,y1:Q,x2:H,y2:ie,width:de,color:N,borderDash:Z,borderDashOffset:ae,tickWidth:re,tickColor:me,tickBorderDash:be,tickBorderDashOffset:q}))}return this._ticksLength=p,this._borderValue=O,_}_computeLabelItems(e){const n=this.axis,i=this.options,{position:a,ticks:o}=i,l=this.isHorizontal(),u=this.ticks,{align:d,crossAlign:f,padding:g,mirror:p}=o,b=yl(i.grid),_=b+g,w=p?-g:_,S=-ms(this.labelRotation),x=[];let C,O,A,M,D,V,F,I,W,X,Q,H,ie="middle";if(a==="top")V=this.bottom-w,F=this._getXAxisLabelAlignment();else if(a==="bottom")V=this.top+w,F=this._getXAxisLabelAlignment();else if(a==="left"){const ue=this._getYAxisLabelAlignment(b);F=ue.textAlign,D=ue.x}else if(a==="right"){const ue=this._getYAxisLabelAlignment(b);F=ue.textAlign,D=ue.x}else if(n==="x"){if(a==="center")V=(e.top+e.bottom)/2+_;else if(Ge(a)){const ue=Object.keys(a)[0],P=a[ue];V=this.chart.scales[ue].getPixelForValue(P)+_}F=this._getXAxisLabelAlignment()}else if(n==="y"){if(a==="center")D=(e.left+e.right)/2-_;else if(Ge(a)){const ue=Object.keys(a)[0],P=a[ue];D=this.chart.scales[ue].getPixelForValue(P)}F=this._getYAxisLabelAlignment(b).textAlign}n==="y"&&(d==="start"?ie="top":d==="end"&&(ie="bottom"));const se=this._getLabelSizes();for(C=0,O=u.length;C<O;++C){A=u[C],M=A.label;const ue=o.setContext(this.getContext(C));I=this.getPixelForTick(C)+o.labelOffset,W=this._resolveTickFontOptions(C),X=W.lineHeight,Q=nn(M)?M.length:1;const P=Q/2,K=ue.color,le=ue.textStrokeColor,de=ue.textStrokeWidth;let N=F;l?(D=I,F==="inner"&&(C===O-1?N=this.options.reverse?"left":"right":C===0?N=this.options.reverse?"right":"left":N="center"),a==="top"?f==="near"||S!==0?H=-Q*X+X/2:f==="center"?H=-se.highest.height/2-P*X+X:H=-se.highest.height+X/2:f==="near"||S!==0?H=X/2:f==="center"?H=se.highest.height/2-P*X:H=se.highest.height-Q*X,p&&(H*=-1),S!==0&&!ue.showLabelBackdrop&&(D+=X/2*Math.sin(S))):(V=I,H=(1-Q)*X/2);let Z;if(ue.showLabelBackdrop){const ae=ri(ue.backdropPadding),re=se.heights[C],me=se.widths[C];let be=H-ae.top,q=0-ae.left;switch(ie){case"middle":be-=re/2;break;case"bottom":be-=re;break}switch(F){case"center":q-=me/2;break;case"right":q-=me;break;case"inner":C===O-1?q-=me:C>0&&(q-=me/2);break}Z={left:q,top:be,width:me+ae.width,height:re+ae.height,color:ue.backdropColor}}x.push({label:M,font:W,textOffset:H,options:{rotation:S,color:K,strokeColor:le,strokeWidth:de,textAlign:N,textBaseline:ie,translation:[D,V],backdrop:Z}})}return x}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-ms(this.labelRotation))return e==="top"?"left":"right";let a="center";return n.align==="start"?a="left":n.align==="end"?a="right":n.align==="inner"&&(a="inner"),a}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:i,mirror:a,padding:o}}=this.options,l=this._getLabelSizes(),u=e+o,d=l.widest.width;let f,g;return n==="left"?a?(g=this.right+o,i==="near"?f="left":i==="center"?(f="center",g+=d/2):(f="right",g+=d)):(g=this.right-u,i==="near"?f="right":i==="center"?(f="center",g-=d/2):(f="left",g=this.left)):n==="right"?a?(g=this.left+o,i==="near"?f="right":i==="center"?(f="center",g-=d/2):(f="left",g-=d)):(g=this.left+u,i==="near"?f="left":i==="center"?(f="center",g+=d/2):(f="right",g=this.right)):f="right",{textAlign:f,x:g}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:i,top:a,width:o,height:l}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(i,a,o,l),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const a=this.ticks.findIndex(o=>o.value===e);return a>=0?n.setContext(this.getContext(a)).lineWidth:0}drawGrid(e){const n=this.options.grid,i=this.ctx,a=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let o,l;const u=(d,f,g)=>{!g.width||!g.color||(i.save(),i.lineWidth=g.width,i.strokeStyle=g.color,i.setLineDash(g.borderDash||[]),i.lineDashOffset=g.borderDashOffset,i.beginPath(),i.moveTo(d.x,d.y),i.lineTo(f.x,f.y),i.stroke(),i.restore())};if(n.display)for(o=0,l=a.length;o<l;++o){const d=a[o];n.drawOnChartArea&&u({x:d.x1,y:d.y1},{x:d.x2,y:d.y2},d),n.drawTicks&&u({x:d.tx1,y:d.ty1},{x:d.tx2,y:d.ty2},{color:d.tickColor,width:d.tickWidth,borderDash:d.tickBorderDash,borderDashOffset:d.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:i,grid:a}}=this,o=i.setContext(this.getContext()),l=i.display?o.width:0;if(!l)return;const u=a.setContext(this.getContext(0)).lineWidth,d=this._borderValue;let f,g,p,b;this.isHorizontal()?(f=Ta(e,this.left,l)-l/2,g=Ta(e,this.right,u)+u/2,p=b=d):(p=Ta(e,this.top,l)-l/2,b=Ta(e,this.bottom,u)+u/2,f=g=d),n.save(),n.lineWidth=o.width,n.strokeStyle=o.color,n.beginPath(),n.moveTo(f,p),n.lineTo(g,b),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const i=this.ctx,a=this._computeLabelArea();a&&Jm(i,a);const o=this.getLabelItems(e);for(const l of o){const u=l.options,d=l.font,f=l.label,g=l.textOffset;ec(i,f,0,g,d,u)}a&&ep(i)}drawTitle(){const{ctx:e,options:{position:n,title:i,reverse:a}}=this;if(!i.display)return;const o=yn(i.font),l=ri(i.padding),u=i.align;let d=o.lineHeight/2;n==="bottom"||n==="center"||Ge(n)?(d+=l.bottom,nn(i.text)&&(d+=o.lineHeight*(i.text.length-1))):d+=l.top;const{titleX:f,titleY:g,maxWidth:p,rotation:b}=fP(this,d,n,u);ec(e,i.text,0,0,o,{color:i.color,maxWidth:p,rotation:b,textAlign:hP(u,n,a),textBaseline:"middle",translation:[f,g]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,i=He(e.grid&&e.grid.z,-1),a=He(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==oo.prototype.draw?[{z:n,draw:o=>{this.draw(o)}}]:[{z:i,draw:o=>{this.drawBackground(),this.drawGrid(o),this.drawTitle()}},{z:a,draw:()=>{this.drawBorder()}},{z:n,draw:o=>{this.drawLabels(o)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",a=[];let o,l;for(o=0,l=n.length;o<l;++o){const u=n[o];u[i]===this.id&&(!e||u.type===e)&&a.push(u)}return a}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return yn(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Gu{constructor(e,n,i){this.type=e,this.scope=n,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let i;pP(n)&&(i=this.register(n));const a=this.items,o=e.id,l=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+e);return o in a||(a[o]=e,gP(e,l,i),this.override&&kt.override(e.id,e.overrides)),l}get(e){return this.items[e]}unregister(e){const n=this.items,i=e.id,a=this.scope;i in n&&delete n[i],a&&i in kt[a]&&(delete kt[a][i],this.override&&delete Fa[i])}}function gP(t,e,n){const i=Kl(Object.create(null),[n?kt.get(n):{},kt.get(e),t.defaults]);kt.set(e,i),t.defaultRoutes&&mP(e,t.defaultRoutes),t.descriptors&&kt.describe(e,t.descriptors)}function mP(t,e){Object.keys(e).forEach(n=>{const i=n.split("."),a=i.pop(),o=[t].concat(i).join("."),l=e[n].split("."),u=l.pop(),d=l.join(".");kt.route(o,a,d,u)})}function pP(t){return"id"in t&&"defaults"in t}class vP{constructor(){this.controllers=new Gu(op,"datasets",!0),this.elements=new Gu(ra,"elements"),this.plugins=new Gu(Object,"plugins"),this.scales=new Gu(oo,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,i){[...n].forEach(a=>{const o=i||this._getRegistryForType(a);i||o.isForType(a)||o===this.plugins&&a.id?this._exec(e,o,a):Je(a,l=>{const u=i||this._getRegistryForType(l);this._exec(e,u,l)})})}_exec(e,n,i){const a=Wm(e);mt(i["before"+a],[],i),n[e](i),mt(i["after"+a],[],i)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const i=this._typedRegistries[n];if(i.isForType(e))return i}return this.plugins}_get(e,n,i){const a=n.get(e);if(a===void 0)throw new Error('"'+e+'" is not a registered '+i+".");return a}}var zi=new vP;class yP{constructor(){this._init=[]}notify(e,n,i,a){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const o=a?this._descriptors(e).filter(a):this._descriptors(e),l=this._notify(o,e,n,i);return n==="afterDestroy"&&(this._notify(o,e,"stop"),this._notify(this._init,e,"uninstall")),l}_notify(e,n,i,a){a=a||{};for(const o of e){const l=o.plugin,u=l[i],d=[n,a,o.options];if(mt(u,d,l)===!1&&a.cancelable)return!1}return!0}invalidate(){ht(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const i=e&&e.config,a=He(i.options&&i.options.plugins,{}),o=bP(i);return a===!1&&!n?[]:wP(e,o,a,n)}_notifyStateChanges(e){const n=this._oldCache||[],i=this._cache,a=(o,l)=>o.filter(u=>!l.some(d=>u.plugin.id===d.plugin.id));this._notify(a(n,i),e,"stop"),this._notify(a(i,n),e,"start")}}function bP(t){const e={},n=[],i=Object.keys(zi.plugins.items);for(let o=0;o<i.length;o++)n.push(zi.getPlugin(i[o]));const a=t.plugins||[];for(let o=0;o<a.length;o++){const l=a[o];n.indexOf(l)===-1&&(n.push(l),e[l.id]=!0)}return{plugins:n,localIds:e}}function _P(t,e){return!e&&t===!1?null:t===!0?{}:t}function wP(t,{plugins:e,localIds:n},i,a){const o=[],l=t.getContext();for(const u of e){const d=u.id,f=_P(i[d],a);f!==null&&o.push({plugin:u,options:SP(t.config,{plugin:u,local:n[d]},f,l)})}return o}function SP(t,{plugin:e,local:n},i,a){const o=t.pluginScopeKeys(e),l=t.getOptionScopes(i,o);return n&&e.defaults&&l.push(e.defaults),t.createResolver(l,a,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function lm(t,e){const n=kt.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function xP(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function EP(t,e){return t===e?"_index_":"_value_"}function dw(t){if(t==="x"||t==="y"||t==="r")return t}function CP(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function cm(t,...e){if(dw(t))return t;for(const n of e){const i=n.axis||CP(n.position)||t.length>1&&dw(t[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function hw(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function OP(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(i=>i.xAxisID===t||i.yAxisID===t);if(n.length)return hw(t,"x",n[0])||hw(t,"y",n[0])}return{}}function RP(t,e){const n=Fa[t.type]||{scales:{}},i=e.scales||{},a=lm(t.type,e),o=Object.create(null);return Object.keys(i).forEach(l=>{const u=i[l];if(!Ge(u))return console.error(`Invalid scale configuration for scale: ${l}`);if(u._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${l}`);const d=cm(l,u,OP(l,t),kt.scales[u.type]),f=EP(d,a),g=n.scales||{};o[l]=Ll(Object.create(null),[{axis:d},u,g[d],g[f]])}),t.data.datasets.forEach(l=>{const u=l.type||t.type,d=l.indexAxis||lm(u,e),g=(Fa[u]||{}).scales||{};Object.keys(g).forEach(p=>{const b=xP(p,d),_=l[b+"AxisID"]||b;o[_]=o[_]||Object.create(null),Ll(o[_],[{axis:b},i[_],g[p]])})}),Object.keys(o).forEach(l=>{const u=o[l];Ll(u,[kt.scales[u.type],kt.scale])}),o}function Yx(t){const e=t.options||(t.options={});e.plugins=He(e.plugins,{}),e.scales=RP(t,e)}function Wx(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function AP(t){return t=t||{},t.data=Wx(t.data),Yx(t),t}const fw=new Map,Kx=new Set;function Yu(t,e){let n=fw.get(t);return n||(n=e(),fw.set(t,n),Kx.add(n)),n}const bl=(t,e,n)=>{const i=Xl(e,n);i!==void 0&&t.add(i)};class TP{constructor(e){this._config=AP(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=Wx(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),Yx(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Yu(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return Yu(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return Yu(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,i=this.type;return Yu(`${i}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const i=this._scopeCache;let a=i.get(e);return(!a||n)&&(a=new Map,i.set(e,a)),a}getOptionScopes(e,n,i){const{options:a,type:o}=this,l=this._cachedScopes(e,i),u=l.get(n);if(u)return u;const d=new Set;n.forEach(g=>{e&&(d.add(e),g.forEach(p=>bl(d,e,p))),g.forEach(p=>bl(d,a,p)),g.forEach(p=>bl(d,Fa[o]||{},p)),g.forEach(p=>bl(d,kt,p)),g.forEach(p=>bl(d,am,p))});const f=Array.from(d);return f.length===0&&f.push(Object.create(null)),Kx.has(n)&&l.set(n,f),f}chartOptionScopes(){const{options:e,type:n}=this;return[e,Fa[n]||{},kt.datasets[n]||{},{type:n},kt,am]}resolveNamedOptions(e,n,i,a=[""]){const o={$shared:!0},{resolver:l,subPrefixes:u}=gw(this._resolverCache,e,a);let d=l;if(MP(l,n)){o.$shared=!1,i=ia(i)?i():i;const f=this.createResolver(e,i,u);d=Zr(l,i,f)}for(const f of n)o[f]=d[f];return o}createResolver(e,n,i=[""],a){const{resolver:o}=gw(this._resolverCache,e,i);return Ge(n)?Zr(o,n,void 0,a):o}}function gw(t,e,n){let i=t.get(e);i||(i=new Map,t.set(e,i));const a=n.join();let o=i.get(a);return o||(o={resolver:np(e,n),subPrefixes:n.filter(u=>!u.toLowerCase().includes("hover"))},i.set(a,o)),o}const DP=t=>Ge(t)&&Object.getOwnPropertyNames(t).some(e=>ia(t[e]));function MP(t,e){const{isScriptable:n,isIndexable:i}=kx(t);for(const a of e){const o=n(a),l=i(a),u=(l||o)&&t[a];if(o&&(ia(u)||DP(u))||l&&nn(u))return!0}return!1}var kP="4.5.0";const NP=["top","bottom","left","right","chartArea"];function mw(t,e){return t==="top"||t==="bottom"||NP.indexOf(t)===-1&&e==="x"}function pw(t,e){return function(n,i){return n[t]===i[t]?n[e]-i[e]:n[t]-i[t]}}function vw(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),mt(n&&n.onComplete,[t],e)}function jP(t){const e=t.chart,n=e.options.animation;mt(n&&n.onProgress,[t],e)}function Xx(t){return ap()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const td={},yw=t=>{const e=Xx(t);return Object.values(td).filter(n=>n.canvas===e).pop()};function LP(t,e,n){const i=Object.keys(t);for(const a of i){const o=+a;if(o>=e){const l=t[a];delete t[a],(n>0||o>e)&&(t[o+n]=l)}}}function PP(t,e,n,i){return!n||t.type==="mouseout"?null:i?e:t}let Fd=class{static defaults=kt;static instances=td;static overrides=Fa;static registry=zi;static version=kP;static getChart=yw;static register(...e){zi.add(...e),bw()}static unregister(...e){zi.remove(...e),bw()}constructor(e,n){const i=this.config=new TP(n),a=Xx(e),o=yw(a);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");const l=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||eP(a)),this.platform.updateConfig(i);const u=this.platform.acquireContext(a,l.aspectRatio),d=u&&u.canvas,f=d&&d.height,g=d&&d.width;if(this.id=Pj(),this.ctx=u,this.canvas=d,this.width=g,this.height=f,this._options=l,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new yP,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=n2(p=>this.update(p),l.resizeDelay||0),this._dataChanges=[],td[this.id]=this,!u||!d){console.error("Failed to create chart: can't acquire context from the given item");return}cs.listen(this,"complete",vw),cs.listen(this,"progress",jP),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:i,height:a,_aspectRatio:o}=this;return ht(e)?n&&o?o:a?i/a:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return zi}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():$0(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return H0(this.canvas,this.ctx),this}stop(){return cs.stop(this),this}resize(e,n){cs.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const i=this.options,a=this.canvas,o=i.maintainAspectRatio&&this.aspectRatio,l=this.platform.getMaximumSize(a,e,n,o),u=i.devicePixelRatio||this.platform.getDevicePixelRatio(),d=this.width?"resize":"attach";this.width=l.width,this.height=l.height,this._aspectRatio=this.aspectRatio,$0(this,u,!0)&&(this.notifyPlugins("resize",{size:l}),mt(i.onResize,[this,l],this),this.attached&&this._doResize(d)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};Je(n,(i,a)=>{i.id=a})}buildOrUpdateScales(){const e=this.options,n=e.scales,i=this.scales,a=Object.keys(i).reduce((l,u)=>(l[u]=!1,l),{});let o=[];n&&(o=o.concat(Object.keys(n).map(l=>{const u=n[l],d=cm(l,u),f=d==="r",g=d==="x";return{options:u,dposition:f?"chartArea":g?"bottom":"left",dtype:f?"radialLinear":g?"category":"linear"}}))),Je(o,l=>{const u=l.options,d=u.id,f=cm(d,u),g=He(u.type,l.dtype);(u.position===void 0||mw(u.position,f)!==mw(l.dposition))&&(u.position=l.dposition),a[d]=!0;let p=null;if(d in i&&i[d].type===g)p=i[d];else{const b=zi.getScale(g);p=new b({id:d,type:g,ctx:this.ctx,chart:this}),i[p.id]=p}p.init(u,e)}),Je(a,(l,u)=>{l||delete i[u]}),Je(i,l=>{si.configure(this,l,l.options),si.addBox(this,l)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,i=e.length;if(e.sort((a,o)=>a.index-o.index),i>n){for(let a=n;a<i;++a)this._destroyDatasetMeta(a);e.splice(n,i-n)}this._sortedMetasets=e.slice(0).sort(pw("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((i,a)=>{n.filter(o=>o===i._dataset).length===0&&this._destroyDatasetMeta(a)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let i,a;for(this._removeUnreferencedMetasets(),i=0,a=n.length;i<a;i++){const o=n[i];let l=this.getDatasetMeta(i);const u=o.type||this.config.type;if(l.type&&l.type!==u&&(this._destroyDatasetMeta(i),l=this.getDatasetMeta(i)),l.type=u,l.indexAxis=o.indexAxis||lm(u,this.options),l.order=o.order||0,l.index=i,l.label=""+o.label,l.visible=this.isDatasetVisible(i),l.controller)l.controller.updateIndex(i),l.controller.linkScales();else{const d=zi.getController(u),{datasetElementType:f,dataElementType:g}=kt.datasets[u];Object.assign(d,{dataElementType:zi.getElement(g),datasetElementType:f&&zi.getElement(f)}),l.controller=new d(this,i),e.push(l.controller)}}return this._updateMetasets(),e}_resetElements(){Je(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const i=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),a=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let l=0;for(let f=0,g=this.data.datasets.length;f<g;f++){const{controller:p}=this.getDatasetMeta(f),b=!a&&o.indexOf(p)===-1;p.buildOrUpdateElements(b),l=Math.max(+p.getMaxOverflow(),l)}l=this._minPadding=i.layout.autoPadding?l:0,this._updateLayout(l),a||Je(o,f=>{f.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(pw("z","_idx"));const{_active:u,_lastEvent:d}=this;d?this._eventHandler(d,!0):u.length&&this._updateHoverStyles(u,u,!0),this.render()}_updateScales(){Je(this.scales,e=>{si.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),i=new Set(e.events);(!M0(n,i)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:i,start:a,count:o}of n){const l=i==="_removeElements"?-o:o;LP(e,a,l)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,i=o=>new Set(e.filter(l=>l[0]===o).map((l,u)=>u+","+l.splice(1).join(","))),a=i(0);for(let o=1;o<n;o++)if(!M0(a,i(o)))return;return Array.from(a).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;si.update(this,this.width,this.height,e);const n=this.chartArea,i=n.width<=0||n.height<=0;this._layers=[],Je(this.boxes,a=>{i&&a.position==="chartArea"||(a.configure&&a.configure(),this._layers.push(...a._layers()))},this),this._layers.forEach((a,o)=>{a._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,i=this.data.datasets.length;n<i;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,i=this.data.datasets.length;n<i;++n)this._updateDataset(n,ia(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const i=this.getDatasetMeta(e),a={meta:i,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",a)!==!1&&(i.controller._update(n),a.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",a))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(cs.has(this)?this.attached&&!cs.running(this)&&cs.start(this):(this.draw(),vw({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:i,height:a}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,a)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,i=[];let a,o;for(a=0,o=n.length;a<o;++a){const l=n[a];(!e||l.visible)&&i.push(l)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,i={meta:e,index:e.index,cancelable:!0},a=cL(this,e);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(a&&Jm(n,a),e.controller.draw(),a&&ep(n),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(e){return Jl(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,i,a){const o=NL.modes[n];return typeof o=="function"?o(this,e,i,a):[]}getDatasetMeta(e){const n=this.data.datasets[e],i=this._metasets;let a=i.filter(o=>o&&o._dataset===n).pop();return a||(a={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},i.push(a)),a}getContext(){return this.$context||(this.$context=Ba(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const i=this.getDatasetMeta(e);return typeof i.hidden=="boolean"?!i.hidden:!n.hidden}setDatasetVisibility(e,n){const i=this.getDatasetMeta(e);i.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,i){const a=i?"show":"hide",o=this.getDatasetMeta(e),l=o.controller._resolveAnimations(void 0,a);yd(n)?(o.data[n].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),l.update(o,{visible:i}),this.update(u=>u.datasetIndex===e?a:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),cs.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),H0(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete td[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,i=(o,l)=>{n.addEventListener(this,o,l),e[o]=l},a=(o,l,u)=>{o.offsetX=l,o.offsetY=u,this._eventHandler(o)};Je(this.options.events,o=>i(o,a))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,i=(d,f)=>{n.addEventListener(this,d,f),e[d]=f},a=(d,f)=>{e[d]&&(n.removeEventListener(this,d,f),delete e[d])},o=(d,f)=>{this.canvas&&this.resize(d,f)};let l;const u=()=>{a("attach",u),this.attached=!0,this.resize(),i("resize",o),i("detach",l)};l=()=>{this.attached=!1,a("resize",o),this._stop(),this._resize(0,0),i("attach",u)},n.isAttached(this.canvas)?u():l()}unbindEvents(){Je(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},Je(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,i){const a=i?"set":"remove";let o,l,u,d;for(n==="dataset"&&(o=this.getDatasetMeta(e[0].datasetIndex),o.controller["_"+a+"DatasetHoverStyle"]()),u=0,d=e.length;u<d;++u){l=e[u];const f=l&&this.getDatasetMeta(l.datasetIndex).controller;f&&f[a+"HoverStyle"](l.element,l.datasetIndex,l.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],i=e.map(({datasetIndex:o,index:l})=>{const u=this.getDatasetMeta(o);if(!u)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:u.data[l],index:l}});!pd(i,n)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,n))}notifyPlugins(e,n,i){return this._plugins.notify(this,e,n,i)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,i){const a=this.options.hover,o=(d,f)=>d.filter(g=>!f.some(p=>g.datasetIndex===p.datasetIndex&&g.index===p.index)),l=o(n,e),u=i?e:o(e,n);l.length&&this.updateHoverStyle(l,a.mode,!1),u.length&&a.mode&&this.updateHoverStyle(u,a.mode,!0)}_eventHandler(e,n){const i={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},a=l=>(l.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",i,a)===!1)return;const o=this._handleEvent(e,n,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,a),(o||i.changed)&&this.render(),this}_handleEvent(e,n,i){const{_active:a=[],options:o}=this,l=n,u=this._getActiveElements(e,a,i,l),d=Bj(e),f=PP(e,this._lastEvent,i,d);i&&(this._lastEvent=null,mt(o.onHover,[e,u,this],this),d&&mt(o.onClick,[e,u,this],this));const g=!pd(u,a);return(g||n)&&(this._active=u,this._updateHoverStyles(u,a,n)),this._lastEvent=f,g}_getActiveElements(e,n,i,a){if(e.type==="mouseout")return[];if(!i)return n;const o=this.options.hover;return this.getElementsAtEventForMode(e,o.mode,o,a)}};function bw(){return Je(Fd.instances,t=>t._plugins.invalidate())}function zP(t,e,n){const{startAngle:i,x:a,y:o,outerRadius:l,innerRadius:u,options:d}=e,{borderWidth:f,borderJoinStyle:g}=d,p=Math.min(f/l,pi(i-n));if(t.beginPath(),t.arc(a,o,l-f/2,i+p/2,n-p/2),u>0){const b=Math.min(f/u,pi(i-n));t.arc(a,o,u+f/2,n-b/2,i+b/2,!0)}else{const b=Math.min(f/2,l*pi(i-n));if(g==="round")t.arc(a,o,b,n-et/2,i+et/2,!0);else if(g==="bevel"){const _=2*b*b,w=-_*Math.cos(n+et/2)+a,S=-_*Math.sin(n+et/2)+o,x=_*Math.cos(i+et/2)+a,C=_*Math.sin(i+et/2)+o;t.lineTo(w,S),t.lineTo(x,C)}}t.closePath(),t.moveTo(0,0),t.rect(0,0,t.canvas.width,t.canvas.height),t.clip("evenodd")}function IP(t,e,n){const{startAngle:i,pixelMargin:a,x:o,y:l,outerRadius:u,innerRadius:d}=e;let f=a/u;t.beginPath(),t.arc(o,l,u,i-f,n+f),d>a?(f=a/d,t.arc(o,l,d,n+f,i-f,!0)):t.arc(o,l,a,n+Wt,i-Wt),t.closePath(),t.clip()}function FP(t){return tp(t,["outerStart","outerEnd","innerStart","innerEnd"])}function UP(t,e,n,i){const a=FP(t.options.borderRadius),o=(n-e)/2,l=Math.min(o,i*e/2),u=d=>{const f=(n-Math.min(o,d))*i/2;return En(d,0,Math.min(o,f))};return{outerStart:u(a.outerStart),outerEnd:u(a.outerEnd),innerStart:En(a.innerStart,0,l),innerEnd:En(a.innerEnd,0,l)}}function Hr(t,e,n,i){return{x:n+t*Math.cos(e),y:i+t*Math.sin(e)}}function Sd(t,e,n,i,a,o){const{x:l,y:u,startAngle:d,pixelMargin:f,innerRadius:g}=e,p=Math.max(e.outerRadius+i+n-f,0),b=g>0?g+i+n+f:0;let _=0;const w=a-d;if(i){const ue=g>0?g-i:0,P=p>0?p-i:0,K=(ue+P)/2,le=K!==0?w*K/(K+i):w;_=(w-le)/2}const S=Math.max(.001,w*p-n/et)/p,x=(w-S)/2,C=d+x+_,O=a-x-_,{outerStart:A,outerEnd:M,innerStart:D,innerEnd:V}=UP(e,b,p,O-C),F=p-A,I=p-M,W=C+A/F,X=O-M/I,Q=b+D,H=b+V,ie=C+D/Q,se=O-V/H;if(t.beginPath(),o){const ue=(W+X)/2;if(t.arc(l,u,p,W,ue),t.arc(l,u,p,ue,X),M>0){const de=Hr(I,X,l,u);t.arc(de.x,de.y,M,X,O+Wt)}const P=Hr(H,O,l,u);if(t.lineTo(P.x,P.y),V>0){const de=Hr(H,se,l,u);t.arc(de.x,de.y,V,O+Wt,se+Math.PI)}const K=(O-V/b+(C+D/b))/2;if(t.arc(l,u,b,O-V/b,K,!0),t.arc(l,u,b,K,C+D/b,!0),D>0){const de=Hr(Q,ie,l,u);t.arc(de.x,de.y,D,ie+Math.PI,C-Wt)}const le=Hr(F,C,l,u);if(t.lineTo(le.x,le.y),A>0){const de=Hr(F,W,l,u);t.arc(de.x,de.y,A,C-Wt,W)}}else{t.moveTo(l,u);const ue=Math.cos(W)*p+l,P=Math.sin(W)*p+u;t.lineTo(ue,P);const K=Math.cos(X)*p+l,le=Math.sin(X)*p+u;t.lineTo(K,le)}t.closePath()}function HP(t,e,n,i,a){const{fullCircles:o,startAngle:l,circumference:u}=e;let d=e.endAngle;if(o){Sd(t,e,n,i,d,a);for(let f=0;f<o;++f)t.fill();isNaN(u)||(d=l+(u%Ot||Ot))}return Sd(t,e,n,i,d,a),t.fill(),d}function BP(t,e,n,i,a){const{fullCircles:o,startAngle:l,circumference:u,options:d}=e,{borderWidth:f,borderJoinStyle:g,borderDash:p,borderDashOffset:b,borderRadius:_}=d,w=d.borderAlign==="inner";if(!f)return;t.setLineDash(p||[]),t.lineDashOffset=b,w?(t.lineWidth=f*2,t.lineJoin=g||"round"):(t.lineWidth=f,t.lineJoin=g||"bevel");let S=e.endAngle;if(o){Sd(t,e,n,i,S,a);for(let x=0;x<o;++x)t.stroke();isNaN(u)||(S=l+(u%Ot||Ot))}w&&IP(t,e,S),d.selfJoin&&S-l>=et&&_===0&&g!=="miter"&&zP(t,e,S),o||(Sd(t,e,n,i,S,a),t.stroke())}class VP extends ra{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,n,i){const a=this.getProps(["x","y"],i),{angle:o,distance:l}=Ox(a,{x:e,y:n}),{startAngle:u,endAngle:d,innerRadius:f,outerRadius:g,circumference:p}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),b=(this.options.spacing+this.options.borderWidth)/2,_=He(p,d-u),w=Zl(o,u,d)&&u!==d,S=_>=Ot||w,x=$r(l,f+b,g+b);return S&&x}getCenterPoint(e){const{x:n,y:i,startAngle:a,endAngle:o,innerRadius:l,outerRadius:u}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:d,spacing:f}=this.options,g=(a+o)/2,p=(l+u+f+d)/2;return{x:n+Math.cos(g)*p,y:i+Math.sin(g)*p}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:n,circumference:i}=this,a=(n.offset||0)/4,o=(n.spacing||0)/2,l=n.circular;if(this.pixelMargin=n.borderAlign==="inner"?.33:0,this.fullCircles=i>Ot?Math.floor(i/Ot):0,i===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const u=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(u)*a,Math.sin(u)*a);const d=1-Math.sin(Math.min(et,i||0)),f=a*d;e.fillStyle=n.backgroundColor,e.strokeStyle=n.borderColor,HP(e,this,f,o,l),BP(e,this,f,o,l),e.restore()}}function Qx(t,e,n=e){t.lineCap=He(n.borderCapStyle,e.borderCapStyle),t.setLineDash(He(n.borderDash,e.borderDash)),t.lineDashOffset=He(n.borderDashOffset,e.borderDashOffset),t.lineJoin=He(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=He(n.borderWidth,e.borderWidth),t.strokeStyle=He(n.borderColor,e.borderColor)}function $P(t,e,n){t.lineTo(n.x,n.y)}function qP(t){return t.stepped?p2:t.tension||t.cubicInterpolationMode==="monotone"?v2:$P}function Zx(t,e,n={}){const i=t.length,{start:a=0,end:o=i-1}=n,{start:l,end:u}=e,d=Math.max(a,l),f=Math.min(o,u),g=a<l&&o<l||a>u&&o>u;return{count:i,start:d,loop:e.loop,ilen:f<d&&!g?i+f-d:f-d}}function GP(t,e,n,i){const{points:a,options:o}=e,{count:l,start:u,loop:d,ilen:f}=Zx(a,n,i),g=qP(o);let{move:p=!0,reverse:b}=i||{},_,w,S;for(_=0;_<=f;++_)w=a[(u+(b?f-_:_))%l],!w.skip&&(p?(t.moveTo(w.x,w.y),p=!1):g(t,S,w,b,o.stepped),S=w);return d&&(w=a[(u+(b?f:0))%l],g(t,S,w,b,o.stepped)),!!d}function YP(t,e,n,i){const a=e.points,{count:o,start:l,ilen:u}=Zx(a,n,i),{move:d=!0,reverse:f}=i||{};let g=0,p=0,b,_,w,S,x,C;const O=M=>(l+(f?u-M:M))%o,A=()=>{S!==x&&(t.lineTo(g,x),t.lineTo(g,S),t.lineTo(g,C))};for(d&&(_=a[O(0)],t.moveTo(_.x,_.y)),b=0;b<=u;++b){if(_=a[O(b)],_.skip)continue;const M=_.x,D=_.y,V=M|0;V===w?(D<S?S=D:D>x&&(x=D),g=(p*g+M)/++p):(A(),t.lineTo(M,D),w=V,p=0,S=x=D),C=D}A()}function um(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?YP:GP}function WP(t){return t.stepped?X2:t.tension||t.cubicInterpolationMode==="monotone"?Q2:ja}function KP(t,e,n,i){let a=e._path;a||(a=e._path=new Path2D,e.path(a,n,i)&&a.closePath()),Qx(t,e.options),t.stroke(a)}function XP(t,e,n,i){const{segments:a,options:o}=e,l=um(e);for(const u of a)Qx(t,o,u.style),t.beginPath(),l(t,e,u,{start:n,end:n+i-1})&&t.closePath(),t.stroke()}const QP=typeof Path2D=="function";function ZP(t,e,n,i){QP&&!e.options.segment?KP(t,e,n,i):XP(t,e,n,i)}class JP extends ra{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const a=i.spanGaps?this._loop:this._fullLoop;B2(this._points,i,e,a,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=aL(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,i=e.length;return i&&n[e[i-1].end]}interpolate(e,n){const i=this.options,a=e[n],o=this.points,l=nL(this,{property:n,start:a,end:a});if(!l.length)return;const u=[],d=WP(i);let f,g;for(f=0,g=l.length;f<g;++f){const{start:p,end:b}=l[f],_=o[p],w=o[b];if(_===w){u.push(_);continue}const S=Math.abs((a-_[n])/(w[n]-_[n])),x=d(_,w,S,i.stepped);x[n]=e[n],u.push(x)}return u.length===1?u[0]:u}pathSegment(e,n,i){return um(this)(e,this,n,i)}path(e,n,i){const a=this.segments,o=um(this);let l=this._loop;n=n||0,i=i||this.points.length-n;for(const u of a)l&=o(e,this,u,{start:n,end:n+i-1});return!!l}draw(e,n,i,a){const o=this.options||{};(this.points||[]).length&&o.borderWidth&&(e.save(),ZP(e,this,i,a),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function _w(t,e,n,i){const a=t.options,{[n]:o}=t.getProps([n],i);return Math.abs(e-o)<a.radius+a.hitRadius}class ez extends ra{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,n,i){const a=this.options,{x:o,y:l}=this.getProps(["x","y"],i);return Math.pow(e-o,2)+Math.pow(n-l,2)<Math.pow(a.hitRadius+a.radius,2)}inXRange(e,n){return _w(this,e,"x",n)}inYRange(e,n){return _w(this,e,"y",n)}getCenterPoint(e){const{x:n,y:i}=this.getProps(["x","y"],e);return{x:n,y:i}}size(e){e=e||this.options||{};let n=e.radius||0;n=Math.max(n,n&&e.hoverRadius||0);const i=n&&e.borderWidth||0;return(n+i)*2}draw(e,n){const i=this.options;this.skip||i.radius<.1||!Jl(this,n,this.size(i)/2)||(e.strokeStyle=i.borderColor,e.lineWidth=i.borderWidth,e.fillStyle=i.backgroundColor,rm(e,i,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}const ww=(t,e)=>{let{boxHeight:n=e,boxWidth:i=e}=t;return t.usePointStyle&&(n=Math.min(n,e),i=t.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(e,n)}},tz=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class Sw extends ra{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,i){this.maxWidth=e,this.maxHeight=n,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=mt(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(i=>e.filter(i,this.chart.data))),e.sort&&(n=n.sort((i,a)=>e.sort(i,a,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const i=e.labels,a=yn(i.font),o=a.size,l=this._computeTitleHeight(),{boxWidth:u,itemHeight:d}=ww(i,o);let f,g;n.font=a.string,this.isHorizontal()?(f=this.maxWidth,g=this._fitRows(l,o,u,d)+10):(g=this.maxHeight,f=this._fitCols(l,a,u,d)+10),this.width=Math.min(f,e.maxWidth||this.maxWidth),this.height=Math.min(g,e.maxHeight||this.maxHeight)}_fitRows(e,n,i,a){const{ctx:o,maxWidth:l,options:{labels:{padding:u}}}=this,d=this.legendHitBoxes=[],f=this.lineWidths=[0],g=a+u;let p=e;o.textAlign="left",o.textBaseline="middle";let b=-1,_=-g;return this.legendItems.forEach((w,S)=>{const x=i+n/2+o.measureText(w.text).width;(S===0||f[f.length-1]+x+2*u>l)&&(p+=g,f[f.length-(S>0?0:1)]=0,_+=g,b++),d[S]={left:0,top:_,row:b,width:x,height:a},f[f.length-1]+=x+u}),p}_fitCols(e,n,i,a){const{ctx:o,maxHeight:l,options:{labels:{padding:u}}}=this,d=this.legendHitBoxes=[],f=this.columnSizes=[],g=l-e;let p=u,b=0,_=0,w=0,S=0;return this.legendItems.forEach((x,C)=>{const{itemWidth:O,itemHeight:A}=nz(i,n,o,x,a);C>0&&_+A+2*u>g&&(p+=b+u,f.push({width:b,height:_}),w+=b+u,S++,b=_=0),d[C]={left:w,top:_,col:S,width:O,height:A},b=Math.max(b,O),_+=A+u}),p+=b,f.push({width:b,height:_}),p}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:i,labels:{padding:a},rtl:o}}=this,l=Wr(o,this.left,this.width);if(this.isHorizontal()){let u=0,d=pn(i,this.left+a,this.right-this.lineWidths[u]);for(const f of n)u!==f.row&&(u=f.row,d=pn(i,this.left+a,this.right-this.lineWidths[u])),f.top+=this.top+e+a,f.left=l.leftForLtr(l.x(d),f.width),d+=f.width+a}else{let u=0,d=pn(i,this.top+e+a,this.bottom-this.columnSizes[u].height);for(const f of n)f.col!==u&&(u=f.col,d=pn(i,this.top+e+a,this.bottom-this.columnSizes[u].height)),f.top=d,f.left+=this.left+a,f.left=l.leftForLtr(l.x(f.left),f.width),d+=f.height+a}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Jm(e,this),this._draw(),ep(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:i,ctx:a}=this,{align:o,labels:l}=e,u=kt.color,d=Wr(e.rtl,this.left,this.width),f=yn(l.font),{padding:g}=l,p=f.size,b=p/2;let _;this.drawTitle(),a.textAlign=d.textAlign("left"),a.textBaseline="middle",a.lineWidth=.5,a.font=f.string;const{boxWidth:w,boxHeight:S,itemHeight:x}=ww(l,p),C=function(V,F,I){if(isNaN(w)||w<=0||isNaN(S)||S<0)return;a.save();const W=He(I.lineWidth,1);if(a.fillStyle=He(I.fillStyle,u),a.lineCap=He(I.lineCap,"butt"),a.lineDashOffset=He(I.lineDashOffset,0),a.lineJoin=He(I.lineJoin,"miter"),a.lineWidth=W,a.strokeStyle=He(I.strokeStyle,u),a.setLineDash(He(I.lineDash,[])),l.usePointStyle){const X={radius:S*Math.SQRT2/2,pointStyle:I.pointStyle,rotation:I.rotation,borderWidth:W},Q=d.xPlus(V,w/2),H=F+b;Mx(a,X,Q,H,l.pointStyleWidth&&w)}else{const X=F+Math.max((p-S)/2,0),Q=d.leftForLtr(V,w),H=Fl(I.borderRadius);a.beginPath(),Object.values(H).some(ie=>ie!==0)?om(a,{x:Q,y:X,w,h:S,radius:H}):a.rect(Q,X,w,S),a.fill(),W!==0&&a.stroke()}a.restore()},O=function(V,F,I){ec(a,I.text,V,F+x/2,f,{strikethrough:I.hidden,textAlign:d.textAlign(I.textAlign)})},A=this.isHorizontal(),M=this._computeTitleHeight();A?_={x:pn(o,this.left+g,this.right-i[0]),y:this.top+g+M,line:0}:_={x:this.left+g,y:pn(o,this.top+M+g,this.bottom-n[0].height),line:0},zx(this.ctx,e.textDirection);const D=x+g;this.legendItems.forEach((V,F)=>{a.strokeStyle=V.fontColor,a.fillStyle=V.fontColor;const I=a.measureText(V.text).width,W=d.textAlign(V.textAlign||(V.textAlign=l.textAlign)),X=w+b+I;let Q=_.x,H=_.y;d.setWidth(this.width),A?F>0&&Q+X+g>this.right&&(H=_.y+=D,_.line++,Q=_.x=pn(o,this.left+g,this.right-i[_.line])):F>0&&H+D>this.bottom&&(Q=_.x=Q+n[_.line].width+g,_.line++,H=_.y=pn(o,this.top+M+g,this.bottom-n[_.line].height));const ie=d.x(Q);if(C(ie,H,V),Q=i2(W,Q+w+b,A?Q+X:this.right,e.rtl),O(d.x(Q),H,V),A)_.x+=X+g;else if(typeof V.text!="string"){const se=f.lineHeight;_.y+=Jx(V,se)+g}else _.y+=D}),Ix(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,i=yn(n.font),a=ri(n.padding);if(!n.display)return;const o=Wr(e.rtl,this.left,this.width),l=this.ctx,u=n.position,d=i.size/2,f=a.top+d;let g,p=this.left,b=this.width;if(this.isHorizontal())b=Math.max(...this.lineWidths),g=this.top+f,p=pn(e.align,p,this.right-b);else{const w=this.columnSizes.reduce((S,x)=>Math.max(S,x.height),0);g=f+pn(e.align,this.top,this.bottom-w-e.labels.padding-this._computeTitleHeight())}const _=pn(u,p,p+b);l.textAlign=o.textAlign(Xm(u)),l.textBaseline="middle",l.strokeStyle=n.color,l.fillStyle=n.color,l.font=i.string,ec(l,n.text,_,g,i)}_computeTitleHeight(){const e=this.options.title,n=yn(e.font),i=ri(e.padding);return e.display?n.lineHeight+i.height:0}_getLegendItemAt(e,n){let i,a,o;if($r(e,this.left,this.right)&&$r(n,this.top,this.bottom)){for(o=this.legendHitBoxes,i=0;i<o.length;++i)if(a=o[i],$r(e,a.left,a.left+a.width)&&$r(n,a.top,a.top+a.height))return this.legendItems[i]}return null}handleEvent(e){const n=this.options;if(!az(e.type,n))return;const i=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const a=this._hoveredItem,o=tz(a,i);a&&!o&&mt(n.onLeave,[e,a,this],this),this._hoveredItem=i,i&&!o&&mt(n.onHover,[e,i,this],this)}else i&&mt(n.onClick,[e,i,this],this)}}function nz(t,e,n,i,a){const o=iz(i,t,e,n),l=sz(a,i,e.lineHeight);return{itemWidth:o,itemHeight:l}}function iz(t,e,n,i){let a=t.text;return a&&typeof a!="string"&&(a=a.reduce((o,l)=>o.length>l.length?o:l)),e+n.size/2+i.measureText(a).width}function sz(t,e,n){let i=t;return typeof e.text!="string"&&(i=Jx(e,n)),i}function Jx(t,e){const n=t.text?t.text.length:0;return e*n}function az(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var rz={id:"legend",_element:Sw,start(t,e,n){const i=t.legend=new Sw({ctx:t.ctx,options:n,chart:t});si.configure(t,i,n),si.addBox(t,i)},stop(t){si.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const i=t.legend;si.configure(t,i,n),i.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const i=e.datasetIndex,a=n.chart;a.isDatasetVisible(i)?(a.hide(i),e.hidden=!0):(a.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:a,color:o,useBorderRadius:l,borderRadius:u}}=t.legend.options;return t._getSortedDatasetMetas().map(d=>{const f=d.controller.getStyle(n?0:void 0),g=ri(f.borderWidth);return{text:e[d.index].label,fillStyle:f.backgroundColor,fontColor:o,hidden:!d.visible,lineCap:f.borderCapStyle,lineDash:f.borderDash,lineDashOffset:f.borderDashOffset,lineJoin:f.borderJoinStyle,lineWidth:(g.width+g.height)/4,strokeStyle:f.borderColor,pointStyle:i||f.pointStyle,rotation:f.rotation,textAlign:a||f.textAlign,borderRadius:l&&(u||f.borderRadius),datasetIndex:d.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class eE extends ra{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const a=nn(i.text)?i.text.length:1;this._padding=ri(i.padding);const o=a*yn(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=o:this.width=o}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:i,bottom:a,right:o,options:l}=this,u=l.align;let d=0,f,g,p;return this.isHorizontal()?(g=pn(u,i,o),p=n+e,f=o-i):(l.position==="left"?(g=i+e,p=pn(u,a,n),d=et*-.5):(g=o-e,p=pn(u,n,a),d=et*.5),f=a-n),{titleX:g,titleY:p,maxWidth:f,rotation:d}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const i=yn(n.font),o=i.lineHeight/2+this._padding.top,{titleX:l,titleY:u,maxWidth:d,rotation:f}=this._drawArgs(o);ec(e,n.text,0,0,i,{color:n.color,maxWidth:d,rotation:f,textAlign:Xm(n.align),textBaseline:"middle",translation:[l,u]})}}function oz(t,e){const n=new eE({ctx:t.ctx,options:e,chart:t});si.configure(t,n,e),si.addBox(t,n),t.titleBlock=n}var lz={id:"title",_element:eE,start(t,e,n){oz(t,n)},stop(t){const e=t.titleBlock;si.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const i=t.titleBlock;si.configure(t,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const El={average(t){if(!t.length)return!1;let e,n,i=new Set,a=0,o=0;for(e=0,n=t.length;e<n;++e){const u=t[e].element;if(u&&u.hasValue()){const d=u.tooltipPosition();i.add(d.x),a+=d.y,++o}}return o===0||i.size===0?!1:{x:[...i].reduce((u,d)=>u+d)/i.size,y:a/o}},nearest(t,e){if(!t.length)return!1;let n=e.x,i=e.y,a=Number.POSITIVE_INFINITY,o,l,u;for(o=0,l=t.length;o<l;++o){const d=t[o].element;if(d&&d.hasValue()){const f=d.getCenterPoint(),g=sm(e,f);g<a&&(a=g,u=d)}}if(u){const d=u.tooltipPosition();n=d.x,i=d.y}return{x:n,y:i}}};function Li(t,e){return e&&(nn(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function us(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function cz(t,e){const{element:n,datasetIndex:i,index:a}=e,o=t.getDatasetMeta(i).controller,{label:l,value:u}=o.getLabelAndValue(a);return{chart:t,label:l,parsed:o.getParsed(a),raw:t.data.datasets[i].data[a],formattedValue:u,dataset:o.getDataset(),dataIndex:a,datasetIndex:i,element:n}}function xw(t,e){const n=t.chart.ctx,{body:i,footer:a,title:o}=t,{boxWidth:l,boxHeight:u}=e,d=yn(e.bodyFont),f=yn(e.titleFont),g=yn(e.footerFont),p=o.length,b=a.length,_=i.length,w=ri(e.padding);let S=w.height,x=0,C=i.reduce((M,D)=>M+D.before.length+D.lines.length+D.after.length,0);if(C+=t.beforeBody.length+t.afterBody.length,p&&(S+=p*f.lineHeight+(p-1)*e.titleSpacing+e.titleMarginBottom),C){const M=e.displayColors?Math.max(u,d.lineHeight):d.lineHeight;S+=_*M+(C-_)*d.lineHeight+(C-1)*e.bodySpacing}b&&(S+=e.footerMarginTop+b*g.lineHeight+(b-1)*e.footerSpacing);let O=0;const A=function(M){x=Math.max(x,n.measureText(M).width+O)};return n.save(),n.font=f.string,Je(t.title,A),n.font=d.string,Je(t.beforeBody.concat(t.afterBody),A),O=e.displayColors?l+2+e.boxPadding:0,Je(i,M=>{Je(M.before,A),Je(M.lines,A),Je(M.after,A)}),O=0,n.font=g.string,Je(t.footer,A),n.restore(),x+=w.width,{width:x,height:S}}function uz(t,e){const{y:n,height:i}=e;return n<i/2?"top":n>t.height-i/2?"bottom":"center"}function dz(t,e,n,i){const{x:a,width:o}=i,l=n.caretSize+n.caretPadding;if(t==="left"&&a+o+l>e.width||t==="right"&&a-o-l<0)return!0}function hz(t,e,n,i){const{x:a,width:o}=n,{width:l,chartArea:{left:u,right:d}}=t;let f="center";return i==="center"?f=a<=(u+d)/2?"left":"right":a<=o/2?f="left":a>=l-o/2&&(f="right"),dz(f,t,e,n)&&(f="center"),f}function Ew(t,e,n){const i=n.yAlign||e.yAlign||uz(t,n);return{xAlign:n.xAlign||e.xAlign||hz(t,e,n,i),yAlign:i}}function fz(t,e){let{x:n,width:i}=t;return e==="right"?n-=i:e==="center"&&(n-=i/2),n}function gz(t,e,n){let{y:i,height:a}=t;return e==="top"?i+=n:e==="bottom"?i-=a+n:i-=a/2,i}function Cw(t,e,n,i){const{caretSize:a,caretPadding:o,cornerRadius:l}=t,{xAlign:u,yAlign:d}=n,f=a+o,{topLeft:g,topRight:p,bottomLeft:b,bottomRight:_}=Fl(l);let w=fz(e,u);const S=gz(e,d,f);return d==="center"?u==="left"?w+=f:u==="right"&&(w-=f):u==="left"?w-=Math.max(g,b)+a:u==="right"&&(w+=Math.max(p,_)+a),{x:En(w,0,i.width-e.width),y:En(S,0,i.height-e.height)}}function Wu(t,e,n){const i=ri(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-i.right:t.x+i.left}function Ow(t){return Li([],us(t))}function mz(t,e,n){return Ba(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function Rw(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const tE={beforeTitle:os,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,i=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return n[e.dataIndex]}return""},afterTitle:os,beforeBody:os,beforeLabel:os,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return ht(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:os,afterBody:os,beforeFooter:os,footer:os,afterFooter:os};function Dn(t,e,n,i){const a=t[e].call(n,i);return typeof a>"u"?tE[e].call(n,i):a}class Aw extends ra{static positioners=El;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,i=this.options.setContext(this.getContext()),a=i.enabled&&n.options.animation&&i.animations,o=new Ux(this.chart,a);return a._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=mz(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:i}=n,a=Dn(i,"beforeTitle",this,e),o=Dn(i,"title",this,e),l=Dn(i,"afterTitle",this,e);let u=[];return u=Li(u,us(a)),u=Li(u,us(o)),u=Li(u,us(l)),u}getBeforeBody(e,n){return Ow(Dn(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:i}=n,a=[];return Je(e,o=>{const l={before:[],lines:[],after:[]},u=Rw(i,o);Li(l.before,us(Dn(u,"beforeLabel",this,o))),Li(l.lines,Dn(u,"label",this,o)),Li(l.after,us(Dn(u,"afterLabel",this,o))),a.push(l)}),a}getAfterBody(e,n){return Ow(Dn(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:i}=n,a=Dn(i,"beforeFooter",this,e),o=Dn(i,"footer",this,e),l=Dn(i,"afterFooter",this,e);let u=[];return u=Li(u,us(a)),u=Li(u,us(o)),u=Li(u,us(l)),u}_createItems(e){const n=this._active,i=this.chart.data,a=[],o=[],l=[];let u=[],d,f;for(d=0,f=n.length;d<f;++d)u.push(cz(this.chart,n[d]));return e.filter&&(u=u.filter((g,p,b)=>e.filter(g,p,b,i))),e.itemSort&&(u=u.sort((g,p)=>e.itemSort(g,p,i))),Je(u,g=>{const p=Rw(e.callbacks,g);a.push(Dn(p,"labelColor",this,g)),o.push(Dn(p,"labelPointStyle",this,g)),l.push(Dn(p,"labelTextColor",this,g))}),this.labelColors=a,this.labelPointStyles=o,this.labelTextColors=l,this.dataPoints=u,u}update(e,n){const i=this.options.setContext(this.getContext()),a=this._active;let o,l=[];if(!a.length)this.opacity!==0&&(o={opacity:0});else{const u=El[i.position].call(this,a,this._eventPosition);l=this._createItems(i),this.title=this.getTitle(l,i),this.beforeBody=this.getBeforeBody(l,i),this.body=this.getBody(l,i),this.afterBody=this.getAfterBody(l,i),this.footer=this.getFooter(l,i);const d=this._size=xw(this,i),f=Object.assign({},u,d),g=Ew(this.chart,i,f),p=Cw(i,f,g,this.chart);this.xAlign=g.xAlign,this.yAlign=g.yAlign,o={opacity:1,x:p.x,y:p.y,width:d.width,height:d.height,caretX:u.x,caretY:u.y}}this._tooltipItems=l,this.$context=void 0,o&&this._resolveAnimations().update(this,o),e&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,i,a){const o=this.getCaretPosition(e,i,a);n.lineTo(o.x1,o.y1),n.lineTo(o.x2,o.y2),n.lineTo(o.x3,o.y3)}getCaretPosition(e,n,i){const{xAlign:a,yAlign:o}=this,{caretSize:l,cornerRadius:u}=i,{topLeft:d,topRight:f,bottomLeft:g,bottomRight:p}=Fl(u),{x:b,y:_}=e,{width:w,height:S}=n;let x,C,O,A,M,D;return o==="center"?(M=_+S/2,a==="left"?(x=b,C=x-l,A=M+l,D=M-l):(x=b+w,C=x+l,A=M-l,D=M+l),O=x):(a==="left"?C=b+Math.max(d,g)+l:a==="right"?C=b+w-Math.max(f,p)-l:C=this.caretX,o==="top"?(A=_,M=A-l,x=C-l,O=C+l):(A=_+S,M=A+l,x=C+l,O=C-l),D=A),{x1:x,x2:C,x3:O,y1:A,y2:M,y3:D}}drawTitle(e,n,i){const a=this.title,o=a.length;let l,u,d;if(o){const f=Wr(i.rtl,this.x,this.width);for(e.x=Wu(this,i.titleAlign,i),n.textAlign=f.textAlign(i.titleAlign),n.textBaseline="middle",l=yn(i.titleFont),u=i.titleSpacing,n.fillStyle=i.titleColor,n.font=l.string,d=0;d<o;++d)n.fillText(a[d],f.x(e.x),e.y+l.lineHeight/2),e.y+=l.lineHeight+u,d+1===o&&(e.y+=i.titleMarginBottom-u)}}_drawColorBox(e,n,i,a,o){const l=this.labelColors[i],u=this.labelPointStyles[i],{boxHeight:d,boxWidth:f}=o,g=yn(o.bodyFont),p=Wu(this,"left",o),b=a.x(p),_=d<g.lineHeight?(g.lineHeight-d)/2:0,w=n.y+_;if(o.usePointStyle){const S={radius:Math.min(f,d)/2,pointStyle:u.pointStyle,rotation:u.rotation,borderWidth:1},x=a.leftForLtr(b,f)+f/2,C=w+d/2;e.strokeStyle=o.multiKeyBackground,e.fillStyle=o.multiKeyBackground,rm(e,S,x,C),e.strokeStyle=l.borderColor,e.fillStyle=l.backgroundColor,rm(e,S,x,C)}else{e.lineWidth=Ge(l.borderWidth)?Math.max(...Object.values(l.borderWidth)):l.borderWidth||1,e.strokeStyle=l.borderColor,e.setLineDash(l.borderDash||[]),e.lineDashOffset=l.borderDashOffset||0;const S=a.leftForLtr(b,f),x=a.leftForLtr(a.xPlus(b,1),f-2),C=Fl(l.borderRadius);Object.values(C).some(O=>O!==0)?(e.beginPath(),e.fillStyle=o.multiKeyBackground,om(e,{x:S,y:w,w:f,h:d,radius:C}),e.fill(),e.stroke(),e.fillStyle=l.backgroundColor,e.beginPath(),om(e,{x,y:w+1,w:f-2,h:d-2,radius:C}),e.fill()):(e.fillStyle=o.multiKeyBackground,e.fillRect(S,w,f,d),e.strokeRect(S,w,f,d),e.fillStyle=l.backgroundColor,e.fillRect(x,w+1,f-2,d-2))}e.fillStyle=this.labelTextColors[i]}drawBody(e,n,i){const{body:a}=this,{bodySpacing:o,bodyAlign:l,displayColors:u,boxHeight:d,boxWidth:f,boxPadding:g}=i,p=yn(i.bodyFont);let b=p.lineHeight,_=0;const w=Wr(i.rtl,this.x,this.width),S=function(I){n.fillText(I,w.x(e.x+_),e.y+b/2),e.y+=b+o},x=w.textAlign(l);let C,O,A,M,D,V,F;for(n.textAlign=l,n.textBaseline="middle",n.font=p.string,e.x=Wu(this,x,i),n.fillStyle=i.bodyColor,Je(this.beforeBody,S),_=u&&x!=="right"?l==="center"?f/2+g:f+2+g:0,M=0,V=a.length;M<V;++M){for(C=a[M],O=this.labelTextColors[M],n.fillStyle=O,Je(C.before,S),A=C.lines,u&&A.length&&(this._drawColorBox(n,e,M,w,i),b=Math.max(p.lineHeight,d)),D=0,F=A.length;D<F;++D)S(A[D]),b=p.lineHeight;Je(C.after,S)}_=0,b=p.lineHeight,Je(this.afterBody,S),e.y-=o}drawFooter(e,n,i){const a=this.footer,o=a.length;let l,u;if(o){const d=Wr(i.rtl,this.x,this.width);for(e.x=Wu(this,i.footerAlign,i),e.y+=i.footerMarginTop,n.textAlign=d.textAlign(i.footerAlign),n.textBaseline="middle",l=yn(i.footerFont),n.fillStyle=i.footerColor,n.font=l.string,u=0;u<o;++u)n.fillText(a[u],d.x(e.x),e.y+l.lineHeight/2),e.y+=l.lineHeight+i.footerSpacing}}drawBackground(e,n,i,a){const{xAlign:o,yAlign:l}=this,{x:u,y:d}=e,{width:f,height:g}=i,{topLeft:p,topRight:b,bottomLeft:_,bottomRight:w}=Fl(a.cornerRadius);n.fillStyle=a.backgroundColor,n.strokeStyle=a.borderColor,n.lineWidth=a.borderWidth,n.beginPath(),n.moveTo(u+p,d),l==="top"&&this.drawCaret(e,n,i,a),n.lineTo(u+f-b,d),n.quadraticCurveTo(u+f,d,u+f,d+b),l==="center"&&o==="right"&&this.drawCaret(e,n,i,a),n.lineTo(u+f,d+g-w),n.quadraticCurveTo(u+f,d+g,u+f-w,d+g),l==="bottom"&&this.drawCaret(e,n,i,a),n.lineTo(u+_,d+g),n.quadraticCurveTo(u,d+g,u,d+g-_),l==="center"&&o==="left"&&this.drawCaret(e,n,i,a),n.lineTo(u,d+p),n.quadraticCurveTo(u,d,u+p,d),n.closePath(),n.fill(),a.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,i=this.$animations,a=i&&i.x,o=i&&i.y;if(a||o){const l=El[e.position].call(this,this._active,this._eventPosition);if(!l)return;const u=this._size=xw(this,e),d=Object.assign({},l,this._size),f=Ew(n,e,d),g=Cw(e,d,f,n);(a._to!==g.x||o._to!==g.y)&&(this.xAlign=f.xAlign,this.yAlign=f.yAlign,this.width=u.width,this.height=u.height,this.caretX=l.x,this.caretY=l.y,this._resolveAnimations().update(this,g))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(n);const a={width:this.width,height:this.height},o={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const l=ri(n.padding),u=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&u&&(e.save(),e.globalAlpha=i,this.drawBackground(o,e,a,n),zx(e,n.textDirection),o.y+=l.top,this.drawTitle(o,e,n),this.drawBody(o,e,n),this.drawFooter(o,e,n),Ix(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const i=this._active,a=e.map(({datasetIndex:u,index:d})=>{const f=this.chart.getDatasetMeta(u);if(!f)throw new Error("Cannot find a dataset at index "+u);return{datasetIndex:u,element:f.data[d],index:d}}),o=!pd(i,a),l=this._positionChanged(a,n);(o||l)&&(this._active=a,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,i=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const a=this.options,o=this._active||[],l=this._getActiveElements(e,o,n,i),u=this._positionChanged(l,e),d=n||!pd(l,o)||u;return d&&(this._active=l,(a.enabled||a.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),d}_getActiveElements(e,n,i,a){const o=this.options;if(e.type==="mouseout")return[];if(!a)return n.filter(u=>this.chart.data.datasets[u.datasetIndex]&&this.chart.getDatasetMeta(u.datasetIndex).controller.getParsed(u.index)!==void 0);const l=this.chart.getElementsAtEventForMode(e,o.mode,o,i);return o.reverse&&l.reverse(),l}_positionChanged(e,n){const{caretX:i,caretY:a,options:o}=this,l=El[o.position].call(this,e,n);return l!==!1&&(i!==l.x||a!==l.y)}}var pz={id:"tooltip",_element:Aw,positioners:El,afterInit(t,e,n){n&&(t.tooltip=new Aw({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:tE},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const vz=(t,e,n,i)=>(typeof e=="string"?(n=t.push(e)-1,i.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function yz(t,e,n,i){const a=t.indexOf(e);if(a===-1)return vz(t,e,n,i);const o=t.lastIndexOf(e);return a!==o?n:a}const bz=(t,e)=>t===null?null:En(Math.round(t),0,e);function Tw(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class _z extends oo{static id="category";static defaults={ticks:{callback:Tw}};constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const i=this.getLabels();for(const{index:a,label:o}of n)i[a]===o&&i.splice(a,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(ht(e))return null;const i=this.getLabels();return n=isFinite(n)&&i[n]===e?n:yz(i,e,He(n,e),this._addedLabels),bz(n,i.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:i,max:a}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(i=0),n||(a=this.getLabels().length-1)),this.min=i,this.max=a}buildTicks(){const e=this.min,n=this.max,i=this.options.offset,a=[];let o=this.getLabels();o=e===0&&n===o.length-1?o:o.slice(e,n+1),this._valueRange=Math.max(o.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let l=e;l<=n;l++)a.push({value:l});return a}getLabelForValue(e){return Tw.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function wz(t,e){const n=[],{bounds:a,step:o,min:l,max:u,precision:d,count:f,maxTicks:g,maxDigits:p,includeBounds:b}=t,_=o||1,w=g-1,{min:S,max:x}=e,C=!ht(l),O=!ht(u),A=!ht(f),M=(x-S)/(p+1);let D=N0((x-S)/w/_)*_,V,F,I,W;if(D<1e-14&&!C&&!O)return[{value:S},{value:x}];W=Math.ceil(x/D)-Math.floor(S/D),W>w&&(D=N0(W*D/w/_)*_),ht(d)||(V=Math.pow(10,d),D=Math.ceil(D*V)/V),a==="ticks"?(F=Math.floor(S/D)*D,I=Math.ceil(x/D)*D):(F=S,I=x),C&&O&&o&&Yj((u-l)/o,D/1e3)?(W=Math.round(Math.min((u-l)/D,g)),D=(u-l)/W,F=l,I=u):A?(F=C?l:F,I=O?u:I,W=f-1,D=(I-F)/W):(W=(I-F)/D,Pl(W,Math.round(W),D/1e3)?W=Math.round(W):W=Math.ceil(W));const X=Math.max(j0(D),j0(F));V=Math.pow(10,ht(d)?X:d),F=Math.round(F*V)/V,I=Math.round(I*V)/V;let Q=0;for(C&&(b&&F!==l?(n.push({value:l}),F<l&&Q++,Pl(Math.round((F+Q*D)*V)/V,l,Dw(l,M,t))&&Q++):F<l&&Q++);Q<W;++Q){const H=Math.round((F+Q*D)*V)/V;if(O&&H>u)break;n.push({value:H})}return O&&b&&I!==u?n.length&&Pl(n[n.length-1].value,u,Dw(u,M,t))?n[n.length-1].value=u:n.push({value:u}):(!O||I===u)&&n.push({value:I}),n}function Dw(t,e,{horizontal:n,minRotation:i}){const a=ms(i),o=(n?Math.sin(a):Math.cos(a))||.001,l=.75*e*(""+t).length;return Math.min(e/o,l)}class Sz extends oo{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return ht(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:i}=this.getUserBounds();let{min:a,max:o}=this;const l=d=>a=n?a:d,u=d=>o=i?o:d;if(e){const d=Qr(a),f=Qr(o);d<0&&f<0?u(0):d>0&&f>0&&l(0)}if(a===o){let d=o===0?1:Math.abs(o*.05);u(o+d),e||l(a-d)}this.min=a,this.max=o}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:i}=e,a;return i?(a=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,a>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${a} ticks. Limiting to 1000.`),a=1e3)):(a=this.computeTickLimit(),n=n||11),n&&(a=Math.min(n,a)),a}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let i=this.getTickLimit();i=Math.max(2,i);const a={maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},o=this._range||this,l=wz(a,o);return e.bounds==="ticks"&&Wj(l,this,"value"),e.reverse?(l.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),l}configure(){const e=this.ticks;let n=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){const a=(i-n)/Math.max(e.length-1,1)/2;n-=a,i+=a}this._startValue=n,this._endValue=i,this._valueRange=i-n}getLabelForValue(e){return Zm(e,this.chart.options.locale,this.options.ticks.format)}}class xz extends Sz{static id="linear";static defaults={ticks:{callback:Dx.formatters.numeric}};determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=ai(e)?e:0,this.max=ai(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,i=ms(this.options.ticks.minRotation),a=(e?Math.sin(i):Math.cos(i))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,o.lineHeight/a))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}const Ud={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},kn=Object.keys(Ud);function Mw(t,e){return t-e}function kw(t,e){if(ht(e))return null;const n=t._adapter,{parser:i,round:a,isoWeekday:o}=t._parseOpts;let l=e;return typeof i=="function"&&(l=i(l)),ai(l)||(l=typeof i=="string"?n.parse(l,i):n.parse(l)),l===null?null:(a&&(l=a==="week"&&(Ql(o)||o===!0)?n.startOf(l,"isoWeek",o):n.startOf(l,a)),+l)}function Nw(t,e,n,i){const a=kn.length;for(let o=kn.indexOf(t);o<a-1;++o){const l=Ud[kn[o]],u=l.steps?l.steps:Number.MAX_SAFE_INTEGER;if(l.common&&Math.ceil((n-e)/(u*l.size))<=i)return kn[o]}return kn[a-1]}function Ez(t,e,n,i,a){for(let o=kn.length-1;o>=kn.indexOf(n);o--){const l=kn[o];if(Ud[l].common&&t._adapter.diff(a,i,l)>=e-1)return l}return kn[n?kn.indexOf(n):0]}function Cz(t){for(let e=kn.indexOf(t)+1,n=kn.length;e<n;++e)if(Ud[kn[e]].common)return kn[e]}function jw(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:i,hi:a}=Km(n,e),o=n[i]>=e?n[i]:n[a];t[o]=!0}}function Oz(t,e,n,i){const a=t._adapter,o=+a.startOf(e[0].value,i),l=e[e.length-1].value;let u,d;for(u=o;u<=l;u=+a.add(u,1,i))d=n[u],d>=0&&(e[d].major=!0);return e}function Lw(t,e,n){const i=[],a={},o=e.length;let l,u;for(l=0;l<o;++l)u=e[l],a[u]=l,i.push({value:u,major:!1});return o===0||!n?i:Oz(t,i,a,n)}class Pw extends oo{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const i=e.time||(e.time={}),a=this._adapter=new AL._date(e.adapters.date);a.init(n),Ll(i.displayFormats,a.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:kw(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,i=e.time.unit||"day";let{min:a,max:o,minDefined:l,maxDefined:u}=this.getUserBounds();function d(f){!l&&!isNaN(f.min)&&(a=Math.min(a,f.min)),!u&&!isNaN(f.max)&&(o=Math.max(o,f.max))}(!l||!u)&&(d(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&d(this.getMinMax(!1))),a=ai(a)&&!isNaN(a)?a:+n.startOf(Date.now(),i),o=ai(o)&&!isNaN(o)?o:+n.endOf(Date.now(),i)+1,this.min=Math.min(a,o-1),this.max=Math.max(a+1,o)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],i=e[e.length-1]),{min:n,max:i}}buildTicks(){const e=this.options,n=e.time,i=e.ticks,a=i.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&a.length&&(this.min=this._userMin||a[0],this.max=this._userMax||a[a.length-1]);const o=this.min,l=this.max,u=Jj(a,o,l);return this._unit=n.unit||(i.autoSkip?Nw(n.minUnit,this.min,this.max,this._getLabelCapacity(o)):Ez(this,u.length,n.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:Cz(this._unit),this.initOffsets(a),e.reverse&&u.reverse(),Lw(this,u,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,i=0,a,o;this.options.offset&&e.length&&(a=this.getDecimalForValue(e[0]),e.length===1?n=1-a:n=(this.getDecimalForValue(e[1])-a)/2,o=this.getDecimalForValue(e[e.length-1]),e.length===1?i=o:i=(o-this.getDecimalForValue(e[e.length-2]))/2);const l=e.length<3?.5:.25;n=En(n,0,l),i=En(i,0,l),this._offsets={start:n,end:i,factor:1/(n+1+i)}}_generate(){const e=this._adapter,n=this.min,i=this.max,a=this.options,o=a.time,l=o.unit||Nw(o.minUnit,n,i,this._getLabelCapacity(n)),u=He(a.ticks.stepSize,1),d=l==="week"?o.isoWeekday:!1,f=Ql(d)||d===!0,g={};let p=n,b,_;if(f&&(p=+e.startOf(p,"isoWeek",d)),p=+e.startOf(p,f?"day":l),e.diff(i,n,l)>1e5*u)throw new Error(n+" and "+i+" are too far apart with stepSize of "+u+" "+l);const w=a.ticks.source==="data"&&this.getDataTimestamps();for(b=p,_=0;b<i;b=+e.add(b,u,l),_++)jw(g,b,w);return(b===i||a.bounds==="ticks"||_===1)&&jw(g,b,w),Object.keys(g).sort(Mw).map(S=>+S)}getLabelForValue(e){const n=this._adapter,i=this.options.time;return i.tooltipFormat?n.format(e,i.tooltipFormat):n.format(e,i.displayFormats.datetime)}format(e,n){const a=this.options.time.displayFormats,o=this._unit,l=n||a[o];return this._adapter.format(e,l)}_tickFormatFunction(e,n,i,a){const o=this.options,l=o.ticks.callback;if(l)return mt(l,[e,n,i],this);const u=o.time.displayFormats,d=this._unit,f=this._majorUnit,g=d&&u[d],p=f&&u[f],b=i[n],_=f&&p&&b&&b.major;return this._adapter.format(e,a||(_?p:g))}generateTickLabels(e){let n,i,a;for(n=0,i=e.length;n<i;++n)a=e[n],a.label=this._tickFormatFunction(a.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,i=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+i)*n.factor)}getValueForPixel(e){const n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+i*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,i=this.ctx.measureText(e).width,a=ms(this.isHorizontal()?n.maxRotation:n.minRotation),o=Math.cos(a),l=Math.sin(a),u=this._resolveTickFontOptions(0).size;return{w:i*o+u*l,h:i*l+u*o}}_getLabelCapacity(e){const n=this.options.time,i=n.displayFormats,a=i[n.unit]||i.millisecond,o=this._tickFormatFunction(e,0,Lw(this,[e],this._majorUnit),a),l=this._getLabelSize(o),u=Math.floor(this.isHorizontal()?this.width/l.w:this.height/l.h)-1;return u>0?u:1}getDataTimestamps(){let e=this._cache.data||[],n,i;if(e.length)return e;const a=this.getMatchingVisibleMetas();if(this._normalized&&a.length)return this._cache.data=a[0].controller.getAllParsedValues(this);for(n=0,i=a.length;n<i;++n)e=e.concat(a[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,i;if(e.length)return e;const a=this.getLabels();for(n=0,i=a.length;n<i;++n)e.push(kw(this,a[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return t2(e.sort(Mw))}}function Ku(t,e,n){let i=0,a=t.length-1,o,l,u,d;n?(e>=t[i].pos&&e<=t[a].pos&&({lo:i,hi:a}=za(t,"pos",e)),{pos:o,time:u}=t[i],{pos:l,time:d}=t[a]):(e>=t[i].time&&e<=t[a].time&&({lo:i,hi:a}=za(t,"time",e)),{time:o,pos:u}=t[i],{time:l,pos:d}=t[a]);const f=l-o;return f?u+(d-u)*(e-o)/f:u}class eI extends Pw{static id="timeseries";static defaults=Pw.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=Ku(n,this.min),this._tableRange=Ku(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:i}=this,a=[],o=[];let l,u,d,f,g;for(l=0,u=e.length;l<u;++l)f=e[l],f>=n&&f<=i&&a.push(f);if(a.length<2)return[{time:n,pos:0},{time:i,pos:1}];for(l=0,u=a.length;l<u;++l)g=a[l+1],d=a[l-1],f=a[l],Math.round((g+d)/2)!==f&&o.push({time:f,pos:l/(u-1)});return o}_generate(){const e=this.min,n=this.max;let i=super.getDataTimestamps();return(!i.includes(e)||!i.length)&&i.splice(0,0,e),(!i.includes(n)||i.length===1)&&i.push(n),i.sort((a,o)=>a-o)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),i=this.getLabelTimestamps();return n.length&&i.length?e=this.normalize(n.concat(i)):e=n.length?n:i,e=this._cache.all=e,e}getDecimalForValue(e){return(Ku(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return Ku(this._table,i*this._tableRange+this._minPos,!0)}}const nE="label";function zw(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function Rz(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function iE(t,e){t.labels=e}function sE(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:nE;const i=[];t.datasets=e.map(a=>{const o=t.datasets.find(l=>l[n]===a[n]);return!o||!a.data||i.includes(o)?{...a}:(i.push(o),Object.assign(o,a),o)})}function Az(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:nE;const n={labels:[],datasets:[]};return iE(n,t.labels),sE(n,t.datasets,e),n}function Tz(t,e){const{height:n=150,width:i=300,redraw:a=!1,datasetIdKey:o,type:l,data:u,options:d,plugins:f=[],fallbackContent:g,updateMode:p,...b}=t,_=R.useRef(null),w=R.useRef(null),S=()=>{_.current&&(w.current=new Fd(_.current,{type:l,data:Az(u,o),options:d&&{...d},plugins:f}),zw(e,w.current))},x=()=>{zw(e,null),w.current&&(w.current.destroy(),w.current=null)};return R.useEffect(()=>{!a&&w.current&&d&&Rz(w.current,d)},[a,d]),R.useEffect(()=>{!a&&w.current&&iE(w.current.config.data,u.labels)},[a,u.labels]),R.useEffect(()=>{!a&&w.current&&u.datasets&&sE(w.current.config.data,u.datasets,o)},[a,u.datasets]),R.useEffect(()=>{w.current&&(a?(x(),setTimeout(S)):w.current.update(p))},[a,d,u.labels,u.datasets,p]),R.useEffect(()=>{w.current&&(x(),setTimeout(S))},[l]),R.useEffect(()=>(S(),()=>x()),[]),Me.createElement("canvas",{ref:_,role:"img",height:n,width:i,...b},g)}const Dz=R.forwardRef(Tz);function aE(t,e){return Fd.register(e),R.forwardRef((n,i)=>Me.createElement(Dz,{...n,ref:i,type:t}))}const Mz=aE("line",OL),kz=aE("pie",RL);Fd.register(_z,xz,ez,JP,lz,pz,rz,VP);function Nz(){const{machines:t}=Yt(),{odpOrders:e}=Mt(),{isLoading:n,isInitialized:i}=Re(),{init:a,cleanup:o}=Ui();R.useEffect(()=>(i||a(),()=>{o()}),[a,i,o]);const l=R.useMemo(()=>{if(n)return{};const g=t.reduce((H,ie)=>{const se=ie.work_center||"Unknown";return H[se]||(H[se]={[ni.ACTIVE]:0,[ni.INACTIVE]:0,[ni.MAINTENANCE]:0}),H[se][ie.status]=(H[se][ie.status]||0)+1,H},{}),p=new Date,b=new Date(p);b.setDate(p.getDate()-p.getDay()),b.setHours(0,0,0,0);const _=e.filter(H=>H.completion_date?new Date(H.completion_date)>=b:!1).length,w=e.filter(H=>H.status==="IN PROGRESS"||H.status==="SCHEDULED").length,S=e.filter(H=>H.due_date?new Date(H.due_date)<p&&H.quantity_completed<H.quantity:!1).length,x=t.filter(H=>H.status===ni.ACTIVE).length,C={},O=new Date(p);O.setDate(p.getDate()-30),e.forEach(H=>{if(H.scheduled_start_time){const ie=new Date(H.scheduled_start_time);if(ie>=O){const se=ie.toISOString().split("T")[0];C[se]=(C[se]||0)+1}}});const A=e.filter(H=>H.scheduled_start_time?new Date(H.scheduled_start_time)>=b:!1),M=A.filter(H=>H.cost&&H.cost>0).map(H=>H.cost),D=A.filter(H=>H.duration&&H.duration>0).map(H=>H.duration),V=M.length>0?M.reduce((H,ie)=>H+ie,0)/M.length:0,F=D.length>0?D.reduce((H,ie)=>H+ie,0)/D.length:0,I={},W={},X=["STAMPA","CONFEZIONAMENTO"],Q=["ZANICA","BUSTO_GAROLFO"];return X.forEach(H=>{const ie=H.toLowerCase();I[ie]={},W[ie]={},Q.forEach(se=>{const ue=se==="BUSTO_GAROLFO"?"busto_garolfo":se.toLowerCase(),P=e.filter(Z=>!Z.work_center||!Z.department?!1:Z.work_center===se&&Z.department===H),K=P.filter(Z=>Z.cost&&Z.cost>0).map(Z=>Z.cost),le=K.length>0?K.reduce((Z,ae)=>Z+ae,0)/K.length:0,de=P.filter(Z=>Z.duration&&Z.duration>0).map(Z=>Z.duration),N=de.length>0?de.reduce((Z,ae)=>Z+ae,0)/de.length:0;I[ie][ue]=le,W[ie][ue]=N})}),{machinesByWorkCenter:g,completedThisWeek:_,tasksInWip:w,delayedTasks:S,activeMachines:x,totalMachines:t.length,totalOrders:e.length,tasksPerDay:C,avgWeeklyCost:V,avgWeeklyDuration:F,weeklyOrdersCount:A.length,costMatrix:I,durationMatrix:W}},[t,e,n]),u=R.useMemo(()=>{if(!l.tasksPerDay)return null;const p=Object.keys(l.tasksPerDay).sort().slice(-7);return{labels:p.map(b=>new Date(b).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit"})),datasets:[{label:"Lavori Iniziati",data:p.map(b=>l.tasksPerDay[b]||0),borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.4}]}},[l.tasksPerDay]),d={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},title:{display:!1}},scales:{y:{beginAtZero:!0,ticks:{stepSize:1}}}},f={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{padding:20,usePointStyle:!0}}}};return n?y.jsx("div",{className:"content-section",children:y.jsx("div",{className:"loading",children:"Caricamento dashboard..."})}):y.jsxs("div",{className:"content-section",children:[y.jsx(_s,{title:"Dashboard Produzione"}),y.jsxs("div",{className:"metrics-grid",children:[y.jsxs("div",{className:"metric-card",children:[y.jsx("h3",{children:"Macchine Totali"}),y.jsx("div",{className:"metric-value",children:l.totalMachines}),y.jsxs("div",{className:"metric-subtitle",children:["Attive: ",l.activeMachines]})]}),y.jsxs("div",{className:"metric-card",children:[y.jsx("h3",{children:"Ordini Totali"}),y.jsx("div",{className:"metric-value",children:l.totalOrders})]}),y.jsxs("div",{className:"metric-card",children:[y.jsx("h3",{children:"Completati Questa Settimana"}),y.jsx("div",{className:"metric-value",children:l.completedThisWeek})]}),y.jsxs("div",{className:"metric-card",children:[y.jsx("h3",{children:"Lavori in Corso"}),y.jsx("div",{className:"metric-value",children:l.tasksInWip})]}),y.jsxs("div",{className:"metric-card",children:[y.jsx("h3",{children:"Lavori Ritardati"}),y.jsx("div",{className:"metric-value delayed",children:l.delayedTasks})]})]}),y.jsxs("div",{className:"weekly-metrics-row",children:[y.jsxs("div",{className:"weekly-metric-card",children:[y.jsx("h3",{children:"Ordini Settimanali"}),y.jsx("div",{className:"metric-value",children:l.weeklyOrdersCount}),y.jsx("div",{className:"metric-subtitle",children:"Questa Settimana"})]}),y.jsxs("div",{className:"weekly-metric-card",children:[y.jsx("h3",{children:"Costo Medio"}),y.jsxs("div",{className:"metric-value",children:["€",l.avgWeeklyCost.toFixed(2)]}),y.jsx("div",{className:"metric-subtitle",children:"Per Lavoro Questa Settimana"})]}),y.jsxs("div",{className:"metric-card",children:[y.jsx("h3",{children:"Durata Media"}),y.jsxs("div",{className:"metric-value",children:[l.avgWeeklyDuration.toFixed(1),"h"]}),y.jsx("div",{className:"metric-subtitle",children:"Per Lavoro Questa Settimana"})]})]}),y.jsxs("div",{className:"matrix-tables-container",children:[y.jsxs("div",{className:"matrix-table-section",children:[y.jsx("h3",{children:"Costo Medio per Centro di Lavoro e Reparto"}),y.jsx("div",{className:"matrix-table",children:y.jsxs("table",{children:[y.jsx("thead",{children:y.jsxs("tr",{children:[y.jsx("th",{}),y.jsx("th",{children:"ZANICA"}),y.jsx("th",{children:"BUSTO GAROLFO"})]})}),y.jsxs("tbody",{children:[y.jsxs("tr",{children:[y.jsx("td",{className:"department-label",children:"STAMPA"}),y.jsxs("td",{className:"metric-cell",children:["€",l.costMatrix?.stampa?.zanica?.toFixed(2)||"0.00"]}),y.jsxs("td",{className:"metric-cell",children:["€",l.costMatrix?.stampa?.busto_garolfo?.toFixed(2)||"0.00"]})]}),y.jsxs("tr",{children:[y.jsx("td",{className:"department-label",children:"CONFEZIONAMENTO"}),y.jsxs("td",{className:"metric-cell",children:["€",l.costMatrix?.confezionamento?.zanica?.toFixed(2)||"0.00"]}),y.jsxs("td",{className:"metric-cell",children:["€",l.costMatrix?.confezionamento?.busto_garolfo?.toFixed(2)||"0.00"]})]})]})]})})]}),y.jsxs("div",{className:"matrix-table-section",children:[y.jsx("h3",{children:"Durata Media per Centro di Lavoro e Reparto"}),y.jsx("div",{className:"matrix-table",children:y.jsxs("table",{children:[y.jsx("thead",{children:y.jsxs("tr",{children:[y.jsx("th",{}),y.jsx("th",{children:"ZANICA"}),y.jsx("th",{children:"BUSTO GAROLFO"})]})}),y.jsxs("tbody",{children:[y.jsxs("tr",{children:[y.jsx("td",{className:"department-label",children:"STAMPA"}),y.jsxs("td",{className:"metric-cell",children:[l.durationMatrix?.stampa?.zanica?.toFixed(1)||"0.0","h"]}),y.jsxs("td",{className:"metric-cell",children:[l.durationMatrix?.stampa?.busto_garolfo?.toFixed(1)||"0.0","h"]})]}),y.jsxs("tr",{children:[y.jsx("td",{className:"department-label",children:"CONFEZIONAMENTO"}),y.jsxs("td",{className:"metric-cell",children:[l.durationMatrix?.confezionamento?.zanica?.toFixed(1)||"0.0","h"]}),y.jsxs("td",{className:"metric-cell",children:[l.durationMatrix?.confezionamento?.busto_garolfo?.toFixed(1)||"0.0","h"]})]})]})]})})]})]}),y.jsxs("div",{className:"charts-container",children:[y.jsxs("div",{className:"chart-section line-chart-section",children:[y.jsx("h3",{children:"Lavori Iniziati per Giorno (Ultimi 7 Giorni)"}),y.jsx("div",{className:"chart-container",children:u&&y.jsx(Mz,{data:u,options:d,height:300})})]}),y.jsxs("div",{className:"chart-section pie-charts-section",children:[y.jsx("h3",{children:"Macchine per Centro di Lavoro e Stato"}),y.jsx("div",{className:"pie-charts-grid",children:Object.entries(l.machinesByWorkCenter||{}).map(([g,p])=>{const b={labels:Object.keys(p).map(_=>_.charAt(0).toUpperCase()+_.slice(1).toLowerCase()),datasets:[{data:Object.values(p),backgroundColor:["rgba(34, 197, 94, 0.8)","rgba(239, 68, 68, 0.8)","rgba(245, 158, 11, 0.8)"],borderColor:["rgba(34, 197, 94, 1)","rgba(239, 68, 68, 1)","rgba(245, 158, 11, 1)"],borderWidth:2}]};return y.jsxs("div",{className:"pie-chart-item",children:[y.jsx("h4",{children:g}),y.jsx("div",{className:"pie-chart-container",children:y.jsx(kz,{data:b,options:f,height:200})}),y.jsx("div",{className:"pie-chart-legend",children:Object.entries(p).map(([_,w])=>y.jsxs("div",{className:"legend-item",children:[y.jsx("span",{className:"legend-color",style:{backgroundColor:_==="ACTIVE"?"rgba(34, 197, 94, 0.8)":_==="INACTIVE"?"rgba(239, 68, 68, 0.8)":"rgba(245, 158, 11, 0.8)"}}),y.jsxs("span",{className:"legend-label",children:[_,": ",w]})]},_))})]},g)})})]})]})]})}function jz(){const[t,e]=R.useState({email:"",password:"",workCenter:""}),[n,i]=R.useState(!1),[a,o]=R.useState({}),{signIn:l,error:u}=ac(),{setSelectedWorkCenter:d}=Re(),f=sa(),{handleAsync:g}=ws("LoginPage"),p=S=>{const{name:x,value:C}=S.target;e(O=>({...O,[x]:C})),a[x]&&o(O=>({...O,[x]:""}))},b=()=>{const S={};return t.email.trim()?/\S+@\S+\.\S+/.test(t.email)||(S.email="Inserisci un indirizzo email valido"):S.email="Email richiesta",t.password?t.password.length<6&&(S.password="La password deve essere di almeno 6 caratteri"):S.password="Password richiesta",t.workCenter||(S.workCenter="Centro di lavoro richiesto"),o(S),Object.keys(S).length===0},_=async S=>{S.preventDefault(),b()&&(i(!0),await g(async()=>{(await l(t.email,t.password)).success&&(d(t.workCenter),f("/",{replace:!0}))},{context:"Login",fallbackMessage:"Accesso fallito. Riprova.",onFinally:()=>i(!1)}))},w=S=>a[S]?y.jsx("span",{className:"error-message",style:{color:"red",fontSize:"12px",marginTop:"4px"},children:a[S]}):null;return y.jsx("div",{className:"auth-page",children:y.jsxs("div",{className:"auth-container",children:[y.jsxs("div",{className:"auth-header",children:[y.jsx("h1",{children:"Bentornato"}),y.jsx("p",{children:"Accedi al tuo account per continuare"})]}),y.jsxs("form",{onSubmit:_,className:"auth-form",children:[y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"email",children:"Indirizzo Email"}),y.jsx("input",{type:"email",id:"email",name:"email",value:t.email,onChange:p,placeholder:"Inserisci la tua email",className:a.email?"error":"",disabled:n,autoComplete:"email"}),w("email")]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"password",children:"Password"}),y.jsx("input",{type:"password",id:"password",name:"password",value:t.password,onChange:p,placeholder:"Inserisci la tua password",className:a.password?"error":"",disabled:n,autoComplete:"current-password"}),w("password")]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"workCenter",children:"Centro di Lavoro *"}),y.jsxs("select",{id:"workCenter",name:"workCenter",value:t.workCenter,onChange:p,className:a.workCenter?"error":"",disabled:n,children:[y.jsx("option",{value:"",children:"Seleziona un centro di lavoro"}),y.jsx("option",{value:Ae.ZANICA,children:Ae.ZANICA}),y.jsx("option",{value:Ae.BUSTO_GAROLFO,children:Ae.BUSTO_GAROLFO}),y.jsx("option",{value:Ae.BOTH,children:Ae.BOTH})]}),w("workCenter")]}),u&&y.jsxs("div",{className:"auth-error",children:[y.jsx("span",{className:"error-icon",children:"●"}),u]}),y.jsx("button",{type:"submit",className:"btn btn-primary auth-submit",disabled:n,children:n?"Accesso in corso...":"Accedi"})]}),y.jsxs("div",{className:"auth-links",children:[y.jsx(xn,{to:"/forgot-password",className:"auth-link",children:"Password dimenticata?"}),y.jsx("div",{className:"auth-divider",children:y.jsx("span",{children:"Non hai un account?"})}),y.jsx(xn,{to:"/signup",className:"btn btn-secondary",children:"Crea Account"})]}),!1]})})}function Lz(){const[t,e]=R.useState({email:"",password:"",confirmPassword:"",firstName:"",lastName:""}),[n,i]=R.useState(!1),[a,o]=R.useState({}),{signUp:l,error:u}=ac(),d=sa(),{handleAsync:f}=ws("SignupPage"),g=w=>{const{name:S,value:x}=w.target;e(C=>({...C,[S]:x})),a[S]&&o(C=>({...C,[S]:""}))},p=()=>{const w={};return t.email.trim()?/\S+@\S+\.\S+/.test(t.email)||(w.email="Inserisci un indirizzo email valido"):w.email="Email richiesta",t.password?t.password.length<6&&(w.password="La password deve essere di almeno 6 caratteri"):w.password="Password richiesta",t.confirmPassword?t.password!==t.confirmPassword&&(w.confirmPassword="Le password non coincidono"):w.confirmPassword="Conferma la tua password",t.firstName.trim()||(w.firstName="Nome richiesto"),t.lastName.trim()||(w.lastName="Cognome richiesto"),o(w),Object.keys(w).length===0},b=async w=>{w.preventDefault(),p()&&(i(!0),await f(async()=>{const S={first_name:t.firstName,last_name:t.lastName,full_name:`${t.firstName} ${t.lastName}`};(await l(t.email,t.password,S)).success&&d("/",{replace:!0})},{context:"Signup",fallbackMessage:"Creazione account fallita. Riprova.",onFinally:()=>i(!1)}))},_=w=>a[w]?y.jsx("span",{className:"error-message",style:{color:"red",fontSize:"12px",marginTop:"4px"},children:a[w]}):null;return y.jsx("div",{className:"auth-page",children:y.jsxs("div",{className:"auth-container",children:[y.jsxs("div",{className:"auth-header",children:[y.jsx("h1",{children:"Crea Account"}),y.jsx("p",{children:"Registrati per iniziare con il tuo account"})]}),y.jsxs("form",{onSubmit:b,className:"auth-form",children:[y.jsxs("div",{className:"form-row",children:[y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"firstName",children:"Nome"}),y.jsx("input",{type:"text",id:"firstName",name:"firstName",value:t.firstName,onChange:g,placeholder:"Inserisci il tuo nome",className:a.firstName?"error":"",disabled:n,autoComplete:"given-name"}),_("firstName")]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"lastName",children:"Cognome"}),y.jsx("input",{type:"text",id:"lastName",name:"lastName",value:t.lastName,onChange:g,placeholder:"Inserisci il tuo cognome",className:a.lastName?"error":"",disabled:n,autoComplete:"family-name"}),_("lastName")]})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"email",children:"Indirizzo Email"}),y.jsx("input",{type:"email",id:"email",name:"email",value:t.email,onChange:g,placeholder:"Inserisci la tua email",className:a.email?"error":"",disabled:n,autoComplete:"email"}),_("email")]}),y.jsxs("div",{className:"form-row",children:[y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"password",children:"Password"}),y.jsx("input",{type:"password",id:"password",name:"password",value:t.password,onChange:g,placeholder:"Crea una password",className:a.password?"error":"",disabled:n,autoComplete:"new-password"}),_("password")]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"confirmPassword",children:"Conferma Password"}),y.jsx("input",{type:"password",id:"confirmPassword",name:"confirmPassword",value:t.confirmPassword,onChange:g,placeholder:"Conferma la tua password",className:a.confirmPassword?"error":"",disabled:n,autoComplete:"new-password"}),_("confirmPassword")]})]}),u&&y.jsxs("div",{className:"auth-error",children:[y.jsx("span",{className:"error-icon",children:"●"}),u]}),y.jsx("button",{type:"submit",className:"btn btn-primary auth-submit",disabled:n,children:n?"Creazione Account...":"Crea Account"})]}),y.jsxs("div",{className:"auth-links",children:[y.jsx("div",{className:"auth-divider",children:y.jsx("span",{children:"Hai già un account?"})}),y.jsx(xn,{to:"/login",className:"btn btn-secondary",children:"Accedi"})]})]})})}function Pz(){const[t,e]=R.useState(""),[n,i]=R.useState(!1),[a,o]=R.useState(!1),[l,u]=R.useState(""),{resetPassword:d}=ac(),{handleAsync:f}=ws("ForgotPasswordPage"),g=async p=>{if(p.preventDefault(),!t.trim()){u("Inserisci il tuo indirizzo email");return}if(!/\S+@\S+\.\S+/.test(t)){u("Inserisci un indirizzo email valido");return}i(!0),u(""),await f(async()=>{const b=await d(t);b.success?o(!0):u(b.error||"Invio email di reset fallito")},{context:"Password Reset",fallbackMessage:"Invio email di reset fallito. Riprova.",onFinally:()=>i(!1)})};return a?y.jsx("div",{className:"auth-page",children:y.jsxs("div",{className:"auth-container",children:[y.jsxs("div",{className:"auth-header",children:[y.jsx("h1",{children:"Controlla la Tua Email"}),y.jsxs("p",{children:["Abbiamo inviato un link per il reset della password a ",t]})]}),y.jsxs("div",{className:"auth-success",children:[y.jsx("div",{className:"success-icon",children:"✅"}),y.jsx("p",{children:"Se non vedi l'email, controlla la cartella spam."})]}),y.jsx("div",{className:"auth-links",children:y.jsx(xn,{to:"/login",className:"btn btn-primary",children:"Torna all'Accesso"})})]})}):y.jsx("div",{className:"auth-page",children:y.jsxs("div",{className:"auth-container",children:[y.jsxs("div",{className:"auth-header",children:[y.jsx("h1",{children:"Reset Password"}),y.jsx("p",{children:"Inserisci la tua email per ricevere un link per il reset della password"})]}),y.jsxs("form",{onSubmit:g,className:"auth-form",children:[y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"email",children:"Indirizzo Email"}),y.jsx("input",{type:"email",id:"email",name:"email",value:t,onChange:p=>e(p.target.value),placeholder:"Inserisci la tua email",disabled:n,autoComplete:"email"})]}),l&&y.jsxs("div",{className:"auth-error",children:[y.jsx("span",{className:"error-icon",children:"●"}),l]}),y.jsx("button",{type:"submit",className:"btn btn-primary auth-submit",disabled:n,children:n?"Invio...":"Invia Link di Reset"})]}),y.jsx("div",{className:"auth-links",children:y.jsx(xn,{to:"/login",className:"auth-link",children:"Torna all'Accesso"})})]})})}class xd extends Me.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null,errorId:null}}static generateErrorId(){return`ERR_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}static getDerivedStateFromError(e){return{hasError:!0,error:e,errorId:xd.generateErrorId()}}componentDidCatch(e,n){this.setState({errorInfo:n,errorId:this.state.errorId||xd.generateErrorId()}),mi(e,"ErrorBoundary"),this.logErrorToService(e,n)}logErrorToService(e,n){}handleRetry=()=>{this.setState({hasError:!1,error:null,errorInfo:null,errorId:null}),window.location.reload()};handleGoHome=()=>{window.location.href="/"};handleReportIssue=()=>{const e=encodeURIComponent(`App Error Report - ${this.state.errorId}`),n=encodeURIComponent(`
Error Report Details:
- Error ID: ${this.state.errorId}
- Error: ${this.state.error?.message||"Unknown error"}
- URL: ${window.location.href}
- User Agent: ${navigator.userAgent}
- Timestamp: ${new Date().toISOString()}

Please describe what you were doing when this error occurred:
    `);window.open(`mailto:support@company.com?subject=${e}&body=${n}`)};getErrorRecommendations=e=>{switch(_S(e)){case Zs.CRITICAL:return y.jsxs("div",{className:"error-boundary__recommendation critical",children:[y.jsx("strong",{children:"Critical Error:"})," This is a serious issue. Please contact support immediately."]});case Zs.HIGH:return y.jsxs("div",{className:"error-boundary__recommendation high",children:[y.jsx("strong",{children:"High Priority:"})," Please try refreshing the page or contact support if the problem persists."]});case Zs.MEDIUM:return y.jsxs("div",{className:"error-boundary__recommendation medium",children:[y.jsx("strong",{children:"Medium Priority:"})," Try refreshing the page or navigating to a different section."]});case Zs.LOW:return y.jsxs("div",{className:"error-boundary__recommendation low",children:[y.jsx("strong",{children:"Low Priority:"})," This error should resolve itself. Try continuing with your task."]});default:return null}};render(){return this.state.hasError?y.jsx("div",{className:"error-boundary",children:y.jsxs("div",{className:"error-boundary__container",children:[y.jsx("div",{className:"error-boundary__icon",children:"🚨"}),y.jsx("h1",{className:"error-boundary__title",children:"Oops! Something went wrong"}),y.jsx("p",{className:"error-boundary__message",children:"We're sorry, but something unexpected happened. Our team has been notified and is working to fix this issue."}),!1,y.jsxs("div",{className:"error-boundary__actions",children:[y.jsx("button",{onClick:this.handleRetry,className:"btn-primary",children:"Try Again"}),y.jsx("button",{onClick:this.handleGoHome,className:"btn-secondary",children:"Go to Home"}),y.jsx("button",{onClick:this.handleReportIssue,className:"error-boundary__button error-boundary__button--secondary",children:"📧 Report Issue"})]}),this.state.error&&y.jsx("div",{className:"error-boundary__recommendations",children:this.getErrorRecommendations(this.state.error)}),y.jsxs("div",{className:"error-boundary__footer",children:[y.jsxs("p",{className:"error-boundary__error-id",children:["Error ID: ",y.jsx("code",{children:this.state.errorId})]}),y.jsx("p",{className:"error-boundary__help",children:"If this problem persists, please contact support with the Error ID above."})]})]})}):this.props.children}}const zz=()=>{const{user:t,loading:e}=ac();return e?y.jsx("div",{className:"auth-loading",children:y.jsxs("div",{className:"auth-loading__container",children:[y.jsx("div",{className:"auth-loading__spinner"}),y.jsx("p",{children:"Checking authentication..."})]})}):t?y.jsx(Kw,{}):y.jsx(Ww,{to:"/login",replace:!0})},Iz=({message:t,type:e="info",isVisible:n,onClose:i,autoClose:a=!0,duration:o=5e3})=>{if(R.useEffect(()=>{if(a&&n){const d=setTimeout(()=>{i()},o);return()=>clearTimeout(d)}},[n,a,o,i]),!n)return null;const l="alert",u={success:"alert--success",error:"alert--error",warning:"alert--warning",info:"alert--info"};return y.jsx("div",{className:`${l} ${u[e]||u.info}`,children:y.jsxs("div",{className:"alert__content",children:[y.jsx("span",{className:"alert__message",children:t}),y.jsx("button",{onClick:i,className:"alert__close","aria-label":"Close",children:"×"})]})})},Fz=({isOpen:t,title:e,message:n,onConfirm:i,onCancel:a,confirmText:o="Elimina",cancelText:l="Annulla",type:u="danger"})=>{if(!t)return null;const d="confirm-dialog",f={danger:"confirm-dialog--danger",warning:"confirm-dialog--warning",info:"confirm-dialog--info"};return y.jsxs("div",{className:`${d} ${f[u]||f.danger}`,children:[y.jsx("div",{className:"confirm-dialog__overlay",onClick:a}),y.jsxs("div",{className:"confirm-dialog__content",children:[y.jsx("div",{className:"confirm-dialog__header",children:y.jsx("h3",{className:"confirm-dialog__title",children:e})}),y.jsx("div",{className:"confirm-dialog__body",children:y.jsx("p",{className:"confirm-dialog__message",children:n})}),y.jsxs("div",{className:"confirm-dialog__footer",children:[y.jsx("button",{onClick:a,className:"confirm-dialog__button confirm-dialog__button--secondary",children:l}),y.jsx("button",{onClick:i,className:"confirm-dialog__button confirm-dialog__button--primary",children:o})]})]})]})},Uz=()=>{const{alert:t,hideAlert:e,confirmDialog:n,hideConfirmDialog:i}=Re(),{cleanup:a}=Ui();return R.useEffect(()=>()=>{a()},[a]),y.jsxs("div",{className:"main-content",children:[y.jsx(G1,{}),y.jsx("div",{className:"page-container",children:y.jsx("main",{children:y.jsx(Kw,{})})}),y.jsx(Iz,{message:t.message,type:t.type,isVisible:t.isVisible,onClose:e}),y.jsx(Fz,{isOpen:n.isOpen,title:n.title,message:n.message,onConfirm:()=>{n.onConfirm?.(),i()},onCancel:i,type:n.type})]})};function Hz(){return y.jsx(xd,{children:y.jsxs(pR,{children:[y.jsx(Vt,{path:"/login",element:y.jsx(jz,{})}),y.jsx(Vt,{path:"/signup",element:y.jsx(Lz,{})}),y.jsx(Vt,{path:"/forgot-password",element:y.jsx(Pz,{})}),y.jsx(Vt,{path:"/",element:y.jsx(zz,{}),children:y.jsxs(Vt,{element:y.jsx(Uz,{}),children:[y.jsx(Vt,{index:!0,element:y.jsx(Nz,{})}),y.jsx(Vt,{path:"machinery",element:y.jsx(ak,{})}),y.jsx(Vt,{path:"machinery/add",element:y.jsx(u0,{})}),y.jsx(Vt,{path:"machinery/:id/edit",element:y.jsx(u0,{})}),y.jsx(Vt,{path:"machinery/:machineId/calendar",element:y.jsx(kk,{})}),y.jsx(Vt,{path:"phases",element:y.jsx(Nk,{})}),y.jsx(Vt,{path:"phases/add",element:y.jsx(d0,{})}),y.jsx(Vt,{path:"phases/:id/edit",element:y.jsx(d0,{})}),y.jsx(Vt,{path:"backlog",element:y.jsx(Lk,{})}),y.jsx(Vt,{path:"backlog/add",element:y.jsx(h0,{})}),y.jsx(Vt,{path:"backlog/:id/edit",element:y.jsx(h0,{})}),y.jsx(Vt,{path:"scheduler",element:y.jsx(fj,{})})]})}),y.jsx(Vt,{path:"*",element:y.jsx(Ww,{to:"/",replace:!0})})]})})}const Bz="/flexi/";EO.createRoot(document.getElementById("root")).render(y.jsx(Me.StrictMode,{children:y.jsx(FR,{basename:Bz,children:y.jsx(tD,{children:y.jsx(Hz,{})})})}));export{Me as R,Mt as a,Zz as b,ws as c,Qz as d,Gr as e,Kz as f,Wz as g,Xz as i,y as j,R as r,vn as t,Re as u};
