(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(a){if(a.ep)return;a.ep=!0;const o=n(a);fetch(a.href,o)}})();function um(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function gT(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function i(){var a=!1;try{a=this instanceof i}catch{}return a?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var a=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(n,i,a.get?a:{enumerable:!0,get:function(){return t[i]}})}),n}var Wf={exports:{}},il={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var q_;function mT(){if(q_)return il;q_=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,a,o){var l=null;if(o!==void 0&&(l=""+o),a.key!==void 0&&(l=""+a.key),"key"in a){o={};for(var u in a)u!=="key"&&(o[u]=a[u])}else o=a;return a=o.ref,{$$typeof:t,type:i,key:l,ref:a!==void 0?a:null,props:o}}return il.Fragment=e,il.jsx=n,il.jsxs=n,il}var G_;function pT(){return G_||(G_=1,Wf.exports=mT()),Wf.exports}var y=pT(),Kf={exports:{}},Ie={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Y_;function vT(){if(Y_)return Ie;Y_=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),p=Symbol.iterator;function _(j){return j===null||typeof j!="object"?null:(j=p&&j[p]||j["@@iterator"],typeof j=="function"?j:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,w={};function x(j,G,re){this.props=j,this.context=G,this.refs=w,this.updater=re||b}x.prototype.isReactComponent={},x.prototype.setState=function(j,G){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,G,"setState")},x.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function C(){}C.prototype=x.prototype;function T(j,G,re){this.props=j,this.context=G,this.refs=w,this.updater=re||b}var O=T.prototype=new C;O.constructor=T,S(O,x.prototype),O.isPureReactComponent=!0;var M=Array.isArray,D={H:null,A:null,T:null,S:null,V:null},U=Object.prototype.hasOwnProperty;function L(j,G,re,de,me,Te){return re=Te.ref,{$$typeof:t,type:j,key:G,ref:re!==void 0?re:null,props:Te}}function B(j,G){return L(j.type,G,void 0,void 0,void 0,j.props)}function H(j){return typeof j=="object"&&j!==null&&j.$$typeof===t}function Q(j){var G={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(re){return G[re]})}var Z=/\/+/g;function q(j,G){return typeof j=="object"&&j!==null&&j.key!=null?Q(""+j.key):G.toString(36)}function ne(){}function he(j){switch(j.status){case"fulfilled":return j.value;case"rejected":throw j.reason;default:switch(typeof j.status=="string"?j.then(ne,ne):(j.status="pending",j.then(function(G){j.status==="pending"&&(j.status="fulfilled",j.value=G)},function(G){j.status==="pending"&&(j.status="rejected",j.reason=G)})),j.status){case"fulfilled":return j.value;case"rejected":throw j.reason}}throw j}function oe(j,G,re,de,me){var Te=typeof j;(Te==="undefined"||Te==="boolean")&&(j=null);var pe=!1;if(j===null)pe=!0;else switch(Te){case"bigint":case"string":case"number":pe=!0;break;case"object":switch(j.$$typeof){case t:case e:pe=!0;break;case g:return pe=j._init,oe(pe(j._payload),G,re,de,me)}}if(pe)return me=me(j),pe=de===""?"."+q(j,0):de,M(me)?(re="",pe!=null&&(re=pe.replace(Z,"$&/")+"/"),oe(me,G,re,"",function(vt){return vt})):me!=null&&(H(me)&&(me=B(me,re+(me.key==null||j&&j.key===me.key?"":(""+me.key).replace(Z,"$&/")+"/")+pe)),G.push(me)),1;pe=0;var pt=de===""?".":de+":";if(M(j))for(var Ne=0;Ne<j.length;Ne++)de=j[Ne],Te=pt+q(de,Ne),pe+=oe(de,G,re,Te,me);else if(Ne=_(j),typeof Ne=="function")for(j=Ne.call(j),Ne=0;!(de=j.next()).done;)de=de.value,Te=pt+q(de,Ne++),pe+=oe(de,G,re,Te,me);else if(Te==="object"){if(typeof j.then=="function")return oe(he(j),G,re,de,me);throw G=String(j),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.")}return pe}function I(j,G,re){if(j==null)return j;var de=[],me=0;return oe(j,de,"","",function(Te){return G.call(re,Te,me++)}),de}function K(j){if(j._status===-1){var G=j._result;G=G(),G.then(function(re){(j._status===0||j._status===-1)&&(j._status=1,j._result=re)},function(re){(j._status===0||j._status===-1)&&(j._status=2,j._result=re)}),j._status===-1&&(j._status=0,j._result=G)}if(j._status===1)return j._result.default;throw j._result}var le=typeof reportError=="function"?reportError:function(j){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var G=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof j=="object"&&j!==null&&typeof j.message=="string"?String(j.message):String(j),error:j});if(!window.dispatchEvent(G))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",j);return}console.error(j)};function ge(){}return Ie.Children={map:I,forEach:function(j,G,re){I(j,function(){G.apply(this,arguments)},re)},count:function(j){var G=0;return I(j,function(){G++}),G},toArray:function(j){return I(j,function(G){return G})||[]},only:function(j){if(!H(j))throw Error("React.Children.only expected to receive a single React element child.");return j}},Ie.Component=x,Ie.Fragment=n,Ie.Profiler=a,Ie.PureComponent=T,Ie.StrictMode=i,Ie.Suspense=d,Ie.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,Ie.__COMPILER_RUNTIME={__proto__:null,c:function(j){return D.H.useMemoCache(j)}},Ie.cache=function(j){return function(){return j.apply(null,arguments)}},Ie.cloneElement=function(j,G,re){if(j==null)throw Error("The argument must be a React element, but you passed "+j+".");var de=S({},j.props),me=j.key,Te=void 0;if(G!=null)for(pe in G.ref!==void 0&&(Te=void 0),G.key!==void 0&&(me=""+G.key),G)!U.call(G,pe)||pe==="key"||pe==="__self"||pe==="__source"||pe==="ref"&&G.ref===void 0||(de[pe]=G[pe]);var pe=arguments.length-2;if(pe===1)de.children=re;else if(1<pe){for(var pt=Array(pe),Ne=0;Ne<pe;Ne++)pt[Ne]=arguments[Ne+2];de.children=pt}return L(j.type,me,void 0,void 0,Te,de)},Ie.createContext=function(j){return j={$$typeof:l,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null},j.Provider=j,j.Consumer={$$typeof:o,_context:j},j},Ie.createElement=function(j,G,re){var de,me={},Te=null;if(G!=null)for(de in G.key!==void 0&&(Te=""+G.key),G)U.call(G,de)&&de!=="key"&&de!=="__self"&&de!=="__source"&&(me[de]=G[de]);var pe=arguments.length-2;if(pe===1)me.children=re;else if(1<pe){for(var pt=Array(pe),Ne=0;Ne<pe;Ne++)pt[Ne]=arguments[Ne+2];me.children=pt}if(j&&j.defaultProps)for(de in pe=j.defaultProps,pe)me[de]===void 0&&(me[de]=pe[de]);return L(j,Te,void 0,void 0,null,me)},Ie.createRef=function(){return{current:null}},Ie.forwardRef=function(j){return{$$typeof:u,render:j}},Ie.isValidElement=H,Ie.lazy=function(j){return{$$typeof:g,_payload:{_status:-1,_result:j},_init:K}},Ie.memo=function(j,G){return{$$typeof:f,type:j,compare:G===void 0?null:G}},Ie.startTransition=function(j){var G=D.T,re={};D.T=re;try{var de=j(),me=D.S;me!==null&&me(re,de),typeof de=="object"&&de!==null&&typeof de.then=="function"&&de.then(ge,le)}catch(Te){le(Te)}finally{D.T=G}},Ie.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},Ie.use=function(j){return D.H.use(j)},Ie.useActionState=function(j,G,re){return D.H.useActionState(j,G,re)},Ie.useCallback=function(j,G){return D.H.useCallback(j,G)},Ie.useContext=function(j){return D.H.useContext(j)},Ie.useDebugValue=function(){},Ie.useDeferredValue=function(j,G){return D.H.useDeferredValue(j,G)},Ie.useEffect=function(j,G,re){var de=D.H;if(typeof re=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return de.useEffect(j,G)},Ie.useId=function(){return D.H.useId()},Ie.useImperativeHandle=function(j,G,re){return D.H.useImperativeHandle(j,G,re)},Ie.useInsertionEffect=function(j,G){return D.H.useInsertionEffect(j,G)},Ie.useLayoutEffect=function(j,G){return D.H.useLayoutEffect(j,G)},Ie.useMemo=function(j,G){return D.H.useMemo(j,G)},Ie.useOptimistic=function(j,G){return D.H.useOptimistic(j,G)},Ie.useReducer=function(j,G,re){return D.H.useReducer(j,G,re)},Ie.useRef=function(j){return D.H.useRef(j)},Ie.useState=function(j){return D.H.useState(j)},Ie.useSyncExternalStore=function(j,G,re){return D.H.useSyncExternalStore(j,G,re)},Ie.useTransition=function(){return D.H.useTransition()},Ie.version="19.1.1",Ie}var W_;function dm(){return W_||(W_=1,Kf.exports=vT()),Kf.exports}var A=dm();const Pe=um(A);var Xf={exports:{}},sl={},Qf={exports:{}},Zf={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K_;function yT(){return K_||(K_=1,(function(t){function e(I,K){var le=I.length;I.push(K);e:for(;0<le;){var ge=le-1>>>1,j=I[ge];if(0<a(j,K))I[ge]=K,I[le]=j,le=ge;else break e}}function n(I){return I.length===0?null:I[0]}function i(I){if(I.length===0)return null;var K=I[0],le=I.pop();if(le!==K){I[0]=le;e:for(var ge=0,j=I.length,G=j>>>1;ge<G;){var re=2*(ge+1)-1,de=I[re],me=re+1,Te=I[me];if(0>a(de,le))me<j&&0>a(Te,de)?(I[ge]=Te,I[me]=le,ge=me):(I[ge]=de,I[re]=le,ge=re);else if(me<j&&0>a(Te,le))I[ge]=Te,I[me]=le,ge=me;else break e}}return K}function a(I,K){var le=I.sortIndex-K.sortIndex;return le!==0?le:I.id-K.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();t.unstable_now=function(){return l.now()-u}}var d=[],f=[],g=1,p=null,_=3,b=!1,S=!1,w=!1,x=!1,C=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;function M(I){for(var K=n(f);K!==null;){if(K.callback===null)i(f);else if(K.startTime<=I)i(f),K.sortIndex=K.expirationTime,e(d,K);else break;K=n(f)}}function D(I){if(w=!1,M(I),!S)if(n(d)!==null)S=!0,U||(U=!0,q());else{var K=n(f);K!==null&&oe(D,K.startTime-I)}}var U=!1,L=-1,B=5,H=-1;function Q(){return x?!0:!(t.unstable_now()-H<B)}function Z(){if(x=!1,U){var I=t.unstable_now();H=I;var K=!0;try{e:{S=!1,w&&(w=!1,T(L),L=-1),b=!0;var le=_;try{t:{for(M(I),p=n(d);p!==null&&!(p.expirationTime>I&&Q());){var ge=p.callback;if(typeof ge=="function"){p.callback=null,_=p.priorityLevel;var j=ge(p.expirationTime<=I);if(I=t.unstable_now(),typeof j=="function"){p.callback=j,M(I),K=!0;break t}p===n(d)&&i(d),M(I)}else i(d);p=n(d)}if(p!==null)K=!0;else{var G=n(f);G!==null&&oe(D,G.startTime-I),K=!1}}break e}finally{p=null,_=le,b=!1}K=void 0}}finally{K?q():U=!1}}}var q;if(typeof O=="function")q=function(){O(Z)};else if(typeof MessageChannel<"u"){var ne=new MessageChannel,he=ne.port2;ne.port1.onmessage=Z,q=function(){he.postMessage(null)}}else q=function(){C(Z,0)};function oe(I,K){L=C(function(){I(t.unstable_now())},K)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(I){I.callback=null},t.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<I?Math.floor(1e3/I):5},t.unstable_getCurrentPriorityLevel=function(){return _},t.unstable_next=function(I){switch(_){case 1:case 2:case 3:var K=3;break;default:K=_}var le=_;_=K;try{return I()}finally{_=le}},t.unstable_requestPaint=function(){x=!0},t.unstable_runWithPriority=function(I,K){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var le=_;_=I;try{return K()}finally{_=le}},t.unstable_scheduleCallback=function(I,K,le){var ge=t.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?ge+le:ge):le=ge,I){case 1:var j=-1;break;case 2:j=250;break;case 5:j=1073741823;break;case 4:j=1e4;break;default:j=5e3}return j=le+j,I={id:g++,callback:K,priorityLevel:I,startTime:le,expirationTime:j,sortIndex:-1},le>ge?(I.sortIndex=le,e(f,I),n(d)===null&&I===n(f)&&(w?(T(L),L=-1):w=!0,oe(D,le-ge))):(I.sortIndex=j,e(d,I),S||b||(S=!0,U||(U=!0,q()))),I},t.unstable_shouldYield=Q,t.unstable_wrapCallback=function(I){var K=_;return function(){var le=_;_=K;try{return I.apply(this,arguments)}finally{_=le}}}})(Zf)),Zf}var X_;function _T(){return X_||(X_=1,Qf.exports=yT()),Qf.exports}var Jf={exports:{}},mn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Q_;function bT(){if(Q_)return mn;Q_=1;var t=dm();function e(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)f+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");function o(d,f,g){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:p==null?null:""+p,children:d,containerInfo:f,implementation:g}}var l=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(d,f){if(d==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return mn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,mn.createPortal=function(d,f){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return o(d,f,null,g)},mn.flushSync=function(d){var f=l.T,g=i.p;try{if(l.T=null,i.p=2,d)return d()}finally{l.T=f,i.p=g,i.d.f()}},mn.preconnect=function(d,f){typeof d=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,i.d.C(d,f))},mn.prefetchDNS=function(d){typeof d=="string"&&i.d.D(d)},mn.preinit=function(d,f){if(typeof d=="string"&&f&&typeof f.as=="string"){var g=f.as,p=u(g,f.crossOrigin),_=typeof f.integrity=="string"?f.integrity:void 0,b=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;g==="style"?i.d.S(d,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:p,integrity:_,fetchPriority:b}):g==="script"&&i.d.X(d,{crossOrigin:p,integrity:_,fetchPriority:b,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},mn.preinitModule=function(d,f){if(typeof d=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var g=u(f.as,f.crossOrigin);i.d.M(d,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&i.d.M(d)},mn.preload=function(d,f){if(typeof d=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var g=f.as,p=u(g,f.crossOrigin);i.d.L(d,g,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},mn.preloadModule=function(d,f){if(typeof d=="string")if(f){var g=u(f.as,f.crossOrigin);i.d.m(d,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else i.d.m(d)},mn.requestFormReset=function(d){i.d.r(d)},mn.unstable_batchedUpdates=function(d,f){return d(f)},mn.useFormState=function(d,f,g){return l.H.useFormState(d,f,g)},mn.useFormStatus=function(){return l.H.useHostTransitionStatus()},mn.version="19.1.1",mn}var Z_;function FS(){if(Z_)return Jf.exports;Z_=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Jf.exports=bT(),Jf.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J_;function ST(){if(J_)return sl;J_=1;var t=_T(),e=dm(),n=FS();function i(s){var r="https://react.dev/errors/"+s;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)r+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+s+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function o(s){var r=s,c=s;if(s.alternate)for(;r.return;)r=r.return;else{s=r;do r=s,(r.flags&4098)!==0&&(c=r.return),s=r.return;while(s)}return r.tag===3?c:null}function l(s){if(s.tag===13){var r=s.memoizedState;if(r===null&&(s=s.alternate,s!==null&&(r=s.memoizedState)),r!==null)return r.dehydrated}return null}function u(s){if(o(s)!==s)throw Error(i(188))}function d(s){var r=s.alternate;if(!r){if(r=o(s),r===null)throw Error(i(188));return r!==s?null:s}for(var c=s,h=r;;){var m=c.return;if(m===null)break;var v=m.alternate;if(v===null){if(h=m.return,h!==null){c=h;continue}break}if(m.child===v.child){for(v=m.child;v;){if(v===c)return u(m),s;if(v===h)return u(m),r;v=v.sibling}throw Error(i(188))}if(c.return!==h.return)c=m,h=v;else{for(var E=!1,R=m.child;R;){if(R===c){E=!0,c=m,h=v;break}if(R===h){E=!0,h=m,c=v;break}R=R.sibling}if(!E){for(R=v.child;R;){if(R===c){E=!0,c=v,h=m;break}if(R===h){E=!0,h=v,c=m;break}R=R.sibling}if(!E)throw Error(i(189))}}if(c.alternate!==h)throw Error(i(190))}if(c.tag!==3)throw Error(i(188));return c.stateNode.current===c?s:r}function f(s){var r=s.tag;if(r===5||r===26||r===27||r===6)return s;for(s=s.child;s!==null;){if(r=f(s),r!==null)return r;s=s.sibling}return null}var g=Object.assign,p=Symbol.for("react.element"),_=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),T=Symbol.for("react.consumer"),O=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),U=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),B=Symbol.for("react.lazy"),H=Symbol.for("react.activity"),Q=Symbol.for("react.memo_cache_sentinel"),Z=Symbol.iterator;function q(s){return s===null||typeof s!="object"?null:(s=Z&&s[Z]||s["@@iterator"],typeof s=="function"?s:null)}var ne=Symbol.for("react.client.reference");function he(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===ne?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case S:return"Fragment";case x:return"Profiler";case w:return"StrictMode";case D:return"Suspense";case U:return"SuspenseList";case H:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case b:return"Portal";case O:return(s.displayName||"Context")+".Provider";case T:return(s._context.displayName||"Context")+".Consumer";case M:var r=s.render;return s=s.displayName,s||(s=r.displayName||r.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case L:return r=s.displayName||null,r!==null?r:he(s.type)||"Memo";case B:r=s._payload,s=s._init;try{return he(s(r))}catch{}}return null}var oe=Array.isArray,I=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le={pending:!1,data:null,method:null,action:null},ge=[],j=-1;function G(s){return{current:s}}function re(s){0>j||(s.current=ge[j],ge[j]=null,j--)}function de(s,r){j++,ge[j]=s.current,s.current=r}var me=G(null),Te=G(null),pe=G(null),pt=G(null);function Ne(s,r){switch(de(pe,r),de(Te,s),de(me,null),r.nodeType){case 9:case 11:s=(s=r.documentElement)&&(s=s.namespaceURI)?__(s):0;break;default:if(s=r.tagName,r=r.namespaceURI)r=__(r),s=b_(r,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}re(me),de(me,s)}function vt(){re(me),re(Te),re(pe)}function Se(s){s.memoizedState!==null&&de(pt,s);var r=me.current,c=b_(r,s.type);r!==c&&(de(Te,s),de(me,c))}function dt(s){Te.current===s&&(re(me),re(Te)),pt.current===s&&(re(pt),Zo._currentValue=le)}var Ye=Object.prototype.hasOwnProperty,jn=t.unstable_scheduleCallback,Kt=t.unstable_cancelCallback,ie=t.unstable_shouldYield,ce=t.unstable_requestPaint,ae=t.unstable_now,we=t.unstable_getCurrentPriorityLevel,Ve=t.unstable_ImmediatePriority,k=t.unstable_UserBlockingPriority,F=t.unstable_NormalPriority,X=t.unstable_LowPriority,fe=t.unstable_IdlePriority,ue=t.log,se=t.unstable_setDisableYieldValue,ve=null,xe=null;function ke(s){if(typeof ue=="function"&&se(s),xe&&typeof xe.setStrictMode=="function")try{xe.setStrictMode(ve,s)}catch{}}var je=Math.clz32?Math.clz32:Va,Bi=Math.log,Ut=Math.LN2;function Va(s){return s>>>=0,s===0?32:31-(Bi(s)/Ut|0)|0}var Ci=256,Ei=4194304;function Ln(s){var r=s&42;if(r!==0)return r;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Ti(s,r,c){var h=s.pendingLanes;if(h===0)return 0;var m=0,v=s.suspendedLanes,E=s.pingedLanes;s=s.warmLanes;var R=h&134217727;return R!==0?(h=R&~v,h!==0?m=Ln(h):(E&=R,E!==0?m=Ln(E):c||(c=R&~s,c!==0&&(m=Ln(c))))):(R=h&~v,R!==0?m=Ln(R):E!==0?m=Ln(E):c||(c=h&~s,c!==0&&(m=Ln(c)))),m===0?0:r!==0&&r!==m&&(r&v)===0&&(v=m&-m,c=r&-r,v>=c||v===32&&(c&4194048)!==0)?r:m}function $i(s,r){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&r)===0}function la(s,r){switch(s){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function dc(){var s=Ci;return Ci<<=1,(Ci&4194048)===0&&(Ci=256),s}function hc(){var s=Ei;return Ei<<=1,(Ei&62914560)===0&&(Ei=4194304),s}function lo(s){for(var r=[],c=0;31>c;c++)r.push(s);return r}function Ot(s,r){s.pendingLanes|=r,r!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function bn(s,r,c,h,m,v){var E=s.pendingLanes;s.pendingLanes=c,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=c,s.entangledLanes&=c,s.errorRecoveryDisabledLanes&=c,s.shellSuspendCounter=0;var R=s.entanglements,N=s.expirationTimes,V=s.hiddenUpdates;for(c=E&~c;0<c;){var J=31-je(c),te=1<<J;R[J]=0,N[J]=-1;var Y=V[J];if(Y!==null)for(V[J]=null,J=0;J<Y.length;J++){var W=Y[J];W!==null&&(W.lane&=-536870913)}c&=~te}h!==0&&dn(s,h,0),v!==0&&m===0&&s.tag!==0&&(s.suspendedLanes|=v&~(E&~r))}function dn(s,r,c){s.pendingLanes|=r,s.suspendedLanes&=~r;var h=31-je(r);s.entangledLanes|=r,s.entanglements[h]=s.entanglements[h]|1073741824|c&4194090}function ci(s,r){var c=s.entangledLanes|=r;for(s=s.entanglements;c;){var h=31-je(c),m=1<<h;m&r|s[h]&r&&(s[h]|=r),c&=~m}}function hn(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function on(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Pn(){var s=K.p;return s!==0?s:(s=window.event,s===void 0?32:F_(s.type))}function xs(s,r){var c=K.p;try{return K.p=s,r()}finally{K.p=c}}var ht=Math.random().toString(36).slice(2),yt="__reactFiber$"+ht,_t="__reactProps$"+ht,fn="__reactContainer$"+ht,Vi="__reactEvents$"+ht,ca="__reactListeners$"+ht,Oi="__reactHandles$"+ht,Cs="__reactResources$"+ht,qi="__reactMarker$"+ht;function Ud(s){delete s[yt],delete s[_t],delete s[Vi],delete s[ca],delete s[Oi]}function qa(s){var r=s[yt];if(r)return r;for(var c=s.parentNode;c;){if(r=c[fn]||c[yt]){if(c=r.alternate,r.child!==null||c!==null&&c.child!==null)for(s=C_(s);s!==null;){if(c=s[yt])return c;s=C_(s)}return r}s=c,c=s.parentNode}return null}function Ga(s){if(s=s[yt]||s[fn]){var r=s.tag;if(r===5||r===6||r===13||r===26||r===27||r===3)return s}return null}function co(s){var r=s.tag;if(r===5||r===26||r===27||r===6)return s.stateNode;throw Error(i(33))}function Ya(s){var r=s[Cs];return r||(r=s[Cs]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Xt(s){s[qi]=!0}var lp=new Set,cp={};function ua(s,r){Wa(s,r),Wa(s+"Capture",r)}function Wa(s,r){for(cp[s]=r,s=0;s<r.length;s++)lp.add(r[s])}var rC=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),up={},dp={};function oC(s){return Ye.call(dp,s)?!0:Ye.call(up,s)?!1:rC.test(s)?dp[s]=!0:(up[s]=!0,!1)}function fc(s,r,c){if(oC(r))if(c===null)s.removeAttribute(r);else{switch(typeof c){case"undefined":case"function":case"symbol":s.removeAttribute(r);return;case"boolean":var h=r.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){s.removeAttribute(r);return}}s.setAttribute(r,""+c)}}function gc(s,r,c){if(c===null)s.removeAttribute(r);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(r);return}s.setAttribute(r,""+c)}}function Gi(s,r,c,h){if(h===null)s.removeAttribute(c);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(c);return}s.setAttributeNS(r,c,""+h)}}var Hd,hp;function Ka(s){if(Hd===void 0)try{throw Error()}catch(c){var r=c.stack.trim().match(/\n( *(at )?)/);Hd=r&&r[1]||"",hp=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Hd+s+hp}var Bd=!1;function $d(s,r){if(!s||Bd)return"";Bd=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(r){var te=function(){throw Error()};if(Object.defineProperty(te.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(te,[])}catch(W){var Y=W}Reflect.construct(s,[],te)}else{try{te.call()}catch(W){Y=W}s.call(te.prototype)}}else{try{throw Error()}catch(W){Y=W}(te=s())&&typeof te.catch=="function"&&te.catch(function(){})}}catch(W){if(W&&Y&&typeof W.stack=="string")return[W.stack,Y.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=h.DetermineComponentFrameRoot(),E=v[0],R=v[1];if(E&&R){var N=E.split(`
`),V=R.split(`
`);for(m=h=0;h<N.length&&!N[h].includes("DetermineComponentFrameRoot");)h++;for(;m<V.length&&!V[m].includes("DetermineComponentFrameRoot");)m++;if(h===N.length||m===V.length)for(h=N.length-1,m=V.length-1;1<=h&&0<=m&&N[h]!==V[m];)m--;for(;1<=h&&0<=m;h--,m--)if(N[h]!==V[m]){if(h!==1||m!==1)do if(h--,m--,0>m||N[h]!==V[m]){var J=`
`+N[h].replace(" at new "," at ");return s.displayName&&J.includes("<anonymous>")&&(J=J.replace("<anonymous>",s.displayName)),J}while(1<=h&&0<=m);break}}}finally{Bd=!1,Error.prepareStackTrace=c}return(c=s?s.displayName||s.name:"")?Ka(c):""}function lC(s){switch(s.tag){case 26:case 27:case 5:return Ka(s.type);case 16:return Ka("Lazy");case 13:return Ka("Suspense");case 19:return Ka("SuspenseList");case 0:case 15:return $d(s.type,!1);case 11:return $d(s.type.render,!1);case 1:return $d(s.type,!0);case 31:return Ka("Activity");default:return""}}function fp(s){try{var r="";do r+=lC(s),s=s.return;while(s);return r}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}function Gn(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function gp(s){var r=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function cC(s){var r=gp(s)?"checked":"value",c=Object.getOwnPropertyDescriptor(s.constructor.prototype,r),h=""+s[r];if(!s.hasOwnProperty(r)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var m=c.get,v=c.set;return Object.defineProperty(s,r,{configurable:!0,get:function(){return m.call(this)},set:function(E){h=""+E,v.call(this,E)}}),Object.defineProperty(s,r,{enumerable:c.enumerable}),{getValue:function(){return h},setValue:function(E){h=""+E},stopTracking:function(){s._valueTracker=null,delete s[r]}}}}function mc(s){s._valueTracker||(s._valueTracker=cC(s))}function mp(s){if(!s)return!1;var r=s._valueTracker;if(!r)return!0;var c=r.getValue(),h="";return s&&(h=gp(s)?s.checked?"true":"false":s.value),s=h,s!==c?(r.setValue(s),!0):!1}function pc(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var uC=/[\n"\\]/g;function Yn(s){return s.replace(uC,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Vd(s,r,c,h,m,v,E,R){s.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?s.type=E:s.removeAttribute("type"),r!=null?E==="number"?(r===0&&s.value===""||s.value!=r)&&(s.value=""+Gn(r)):s.value!==""+Gn(r)&&(s.value=""+Gn(r)):E!=="submit"&&E!=="reset"||s.removeAttribute("value"),r!=null?qd(s,E,Gn(r)):c!=null?qd(s,E,Gn(c)):h!=null&&s.removeAttribute("value"),m==null&&v!=null&&(s.defaultChecked=!!v),m!=null&&(s.checked=m&&typeof m!="function"&&typeof m!="symbol"),R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?s.name=""+Gn(R):s.removeAttribute("name")}function pp(s,r,c,h,m,v,E,R){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(s.type=v),r!=null||c!=null){if(!(v!=="submit"&&v!=="reset"||r!=null))return;c=c!=null?""+Gn(c):"",r=r!=null?""+Gn(r):c,R||r===s.value||(s.value=r),s.defaultValue=r}h=h??m,h=typeof h!="function"&&typeof h!="symbol"&&!!h,s.checked=R?s.checked:!!h,s.defaultChecked=!!h,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(s.name=E)}function qd(s,r,c){r==="number"&&pc(s.ownerDocument)===s||s.defaultValue===""+c||(s.defaultValue=""+c)}function Xa(s,r,c,h){if(s=s.options,r){r={};for(var m=0;m<c.length;m++)r["$"+c[m]]=!0;for(c=0;c<s.length;c++)m=r.hasOwnProperty("$"+s[c].value),s[c].selected!==m&&(s[c].selected=m),m&&h&&(s[c].defaultSelected=!0)}else{for(c=""+Gn(c),r=null,m=0;m<s.length;m++){if(s[m].value===c){s[m].selected=!0,h&&(s[m].defaultSelected=!0);return}r!==null||s[m].disabled||(r=s[m])}r!==null&&(r.selected=!0)}}function vp(s,r,c){if(r!=null&&(r=""+Gn(r),r!==s.value&&(s.value=r),c==null)){s.defaultValue!==r&&(s.defaultValue=r);return}s.defaultValue=c!=null?""+Gn(c):""}function yp(s,r,c,h){if(r==null){if(h!=null){if(c!=null)throw Error(i(92));if(oe(h)){if(1<h.length)throw Error(i(93));h=h[0]}c=h}c==null&&(c=""),r=c}c=Gn(r),s.defaultValue=c,h=s.textContent,h===c&&h!==""&&h!==null&&(s.value=h)}function Qa(s,r){if(r){var c=s.firstChild;if(c&&c===s.lastChild&&c.nodeType===3){c.nodeValue=r;return}}s.textContent=r}var dC=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function _p(s,r,c){var h=r.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?h?s.setProperty(r,""):r==="float"?s.cssFloat="":s[r]="":h?s.setProperty(r,c):typeof c!="number"||c===0||dC.has(r)?r==="float"?s.cssFloat=c:s[r]=(""+c).trim():s[r]=c+"px"}function bp(s,r,c){if(r!=null&&typeof r!="object")throw Error(i(62));if(s=s.style,c!=null){for(var h in c)!c.hasOwnProperty(h)||r!=null&&r.hasOwnProperty(h)||(h.indexOf("--")===0?s.setProperty(h,""):h==="float"?s.cssFloat="":s[h]="");for(var m in r)h=r[m],r.hasOwnProperty(m)&&c[m]!==h&&_p(s,m,h)}else for(var v in r)r.hasOwnProperty(v)&&_p(s,v,r[v])}function Gd(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var hC=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),fC=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function vc(s){return fC.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var Yd=null;function Wd(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Za=null,Ja=null;function Sp(s){var r=Ga(s);if(r&&(s=r.stateNode)){var c=s[_t]||null;e:switch(s=r.stateNode,r.type){case"input":if(Vd(s,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),r=c.name,c.type==="radio"&&r!=null){for(c=s;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+Yn(""+r)+'"][type="radio"]'),r=0;r<c.length;r++){var h=c[r];if(h!==s&&h.form===s.form){var m=h[_t]||null;if(!m)throw Error(i(90));Vd(h,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(r=0;r<c.length;r++)h=c[r],h.form===s.form&&mp(h)}break e;case"textarea":vp(s,c.value,c.defaultValue);break e;case"select":r=c.value,r!=null&&Xa(s,!!c.multiple,r,!1)}}}var Kd=!1;function wp(s,r,c){if(Kd)return s(r,c);Kd=!0;try{var h=s(r);return h}finally{if(Kd=!1,(Za!==null||Ja!==null)&&(nu(),Za&&(r=Za,s=Ja,Ja=Za=null,Sp(r),s)))for(r=0;r<s.length;r++)Sp(s[r])}}function uo(s,r){var c=s.stateNode;if(c===null)return null;var h=c[_t]||null;if(h===null)return null;c=h[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(s=s.type,h=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!h;break e;default:s=!1}if(s)return null;if(c&&typeof c!="function")throw Error(i(231,r,typeof c));return c}var Yi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Xd=!1;if(Yi)try{var ho={};Object.defineProperty(ho,"passive",{get:function(){Xd=!0}}),window.addEventListener("test",ho,ho),window.removeEventListener("test",ho,ho)}catch{Xd=!1}var Es=null,Qd=null,yc=null;function xp(){if(yc)return yc;var s,r=Qd,c=r.length,h,m="value"in Es?Es.value:Es.textContent,v=m.length;for(s=0;s<c&&r[s]===m[s];s++);var E=c-s;for(h=1;h<=E&&r[c-h]===m[v-h];h++);return yc=m.slice(s,1<h?1-h:void 0)}function _c(s){var r=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&r===13&&(s=13)):s=r,s===10&&(s=13),32<=s||s===13?s:0}function bc(){return!0}function Cp(){return!1}function On(s){function r(c,h,m,v,E){this._reactName=c,this._targetInst=m,this.type=h,this.nativeEvent=v,this.target=E,this.currentTarget=null;for(var R in s)s.hasOwnProperty(R)&&(c=s[R],this[R]=c?c(v):v[R]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?bc:Cp,this.isPropagationStopped=Cp,this}return g(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=bc)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=bc)},persist:function(){},isPersistent:bc}),r}var da={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Sc=On(da),fo=g({},da,{view:0,detail:0}),gC=On(fo),Zd,Jd,go,wc=g({},fo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:th,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==go&&(go&&s.type==="mousemove"?(Zd=s.screenX-go.screenX,Jd=s.screenY-go.screenY):Jd=Zd=0,go=s),Zd)},movementY:function(s){return"movementY"in s?s.movementY:Jd}}),Ep=On(wc),mC=g({},wc,{dataTransfer:0}),pC=On(mC),vC=g({},fo,{relatedTarget:0}),eh=On(vC),yC=g({},da,{animationName:0,elapsedTime:0,pseudoElement:0}),_C=On(yC),bC=g({},da,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),SC=On(bC),wC=g({},da,{data:0}),Tp=On(wC),xC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},CC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},EC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function TC(s){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(s):(s=EC[s])?!!r[s]:!1}function th(){return TC}var OC=g({},fo,{key:function(s){if(s.key){var r=xC[s.key]||s.key;if(r!=="Unidentified")return r}return s.type==="keypress"?(s=_c(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?CC[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:th,charCode:function(s){return s.type==="keypress"?_c(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?_c(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),AC=On(OC),RC=g({},wc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Op=On(RC),DC=g({},fo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:th}),MC=On(DC),kC=g({},da,{propertyName:0,elapsedTime:0,pseudoElement:0}),NC=On(kC),jC=g({},wc,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),LC=On(jC),PC=g({},da,{newState:0,oldState:0}),IC=On(PC),zC=[9,13,27,32],nh=Yi&&"CompositionEvent"in window,mo=null;Yi&&"documentMode"in document&&(mo=document.documentMode);var FC=Yi&&"TextEvent"in window&&!mo,Ap=Yi&&(!nh||mo&&8<mo&&11>=mo),Rp=" ",Dp=!1;function Mp(s,r){switch(s){case"keyup":return zC.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function kp(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var er=!1;function UC(s,r){switch(s){case"compositionend":return kp(r);case"keypress":return r.which!==32?null:(Dp=!0,Rp);case"textInput":return s=r.data,s===Rp&&Dp?null:s;default:return null}}function HC(s,r){if(er)return s==="compositionend"||!nh&&Mp(s,r)?(s=xp(),yc=Qd=Es=null,er=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Ap&&r.locale!=="ko"?null:r.data;default:return null}}var BC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Np(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r==="input"?!!BC[s.type]:r==="textarea"}function jp(s,r,c,h){Za?Ja?Ja.push(h):Ja=[h]:Za=h,r=lu(r,"onChange"),0<r.length&&(c=new Sc("onChange","change",null,c,h),s.push({event:c,listeners:r}))}var po=null,vo=null;function $C(s){g_(s,0)}function xc(s){var r=co(s);if(mp(r))return s}function Lp(s,r){if(s==="change")return r}var Pp=!1;if(Yi){var ih;if(Yi){var sh="oninput"in document;if(!sh){var Ip=document.createElement("div");Ip.setAttribute("oninput","return;"),sh=typeof Ip.oninput=="function"}ih=sh}else ih=!1;Pp=ih&&(!document.documentMode||9<document.documentMode)}function zp(){po&&(po.detachEvent("onpropertychange",Fp),vo=po=null)}function Fp(s){if(s.propertyName==="value"&&xc(vo)){var r=[];jp(r,vo,s,Wd(s)),wp($C,r)}}function VC(s,r,c){s==="focusin"?(zp(),po=r,vo=c,po.attachEvent("onpropertychange",Fp)):s==="focusout"&&zp()}function qC(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return xc(vo)}function GC(s,r){if(s==="click")return xc(r)}function YC(s,r){if(s==="input"||s==="change")return xc(r)}function WC(s,r){return s===r&&(s!==0||1/s===1/r)||s!==s&&r!==r}var In=typeof Object.is=="function"?Object.is:WC;function yo(s,r){if(In(s,r))return!0;if(typeof s!="object"||s===null||typeof r!="object"||r===null)return!1;var c=Object.keys(s),h=Object.keys(r);if(c.length!==h.length)return!1;for(h=0;h<c.length;h++){var m=c[h];if(!Ye.call(r,m)||!In(s[m],r[m]))return!1}return!0}function Up(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Hp(s,r){var c=Up(s);s=0;for(var h;c;){if(c.nodeType===3){if(h=s+c.textContent.length,s<=r&&h>=r)return{node:c,offset:r-s};s=h}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=Up(c)}}function Bp(s,r){return s&&r?s===r?!0:s&&s.nodeType===3?!1:r&&r.nodeType===3?Bp(s,r.parentNode):"contains"in s?s.contains(r):s.compareDocumentPosition?!!(s.compareDocumentPosition(r)&16):!1:!1}function $p(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var r=pc(s.document);r instanceof s.HTMLIFrameElement;){try{var c=typeof r.contentWindow.location.href=="string"}catch{c=!1}if(c)s=r.contentWindow;else break;r=pc(s.document)}return r}function ah(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r&&(r==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||r==="textarea"||s.contentEditable==="true")}var KC=Yi&&"documentMode"in document&&11>=document.documentMode,tr=null,rh=null,_o=null,oh=!1;function Vp(s,r,c){var h=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;oh||tr==null||tr!==pc(h)||(h=tr,"selectionStart"in h&&ah(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),_o&&yo(_o,h)||(_o=h,h=lu(rh,"onSelect"),0<h.length&&(r=new Sc("onSelect","select",null,r,c),s.push({event:r,listeners:h}),r.target=tr)))}function ha(s,r){var c={};return c[s.toLowerCase()]=r.toLowerCase(),c["Webkit"+s]="webkit"+r,c["Moz"+s]="moz"+r,c}var nr={animationend:ha("Animation","AnimationEnd"),animationiteration:ha("Animation","AnimationIteration"),animationstart:ha("Animation","AnimationStart"),transitionrun:ha("Transition","TransitionRun"),transitionstart:ha("Transition","TransitionStart"),transitioncancel:ha("Transition","TransitionCancel"),transitionend:ha("Transition","TransitionEnd")},lh={},qp={};Yi&&(qp=document.createElement("div").style,"AnimationEvent"in window||(delete nr.animationend.animation,delete nr.animationiteration.animation,delete nr.animationstart.animation),"TransitionEvent"in window||delete nr.transitionend.transition);function fa(s){if(lh[s])return lh[s];if(!nr[s])return s;var r=nr[s],c;for(c in r)if(r.hasOwnProperty(c)&&c in qp)return lh[s]=r[c];return s}var Gp=fa("animationend"),Yp=fa("animationiteration"),Wp=fa("animationstart"),XC=fa("transitionrun"),QC=fa("transitionstart"),ZC=fa("transitioncancel"),Kp=fa("transitionend"),Xp=new Map,ch="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ch.push("scrollEnd");function ui(s,r){Xp.set(s,r),ua(r,[s])}var Qp=new WeakMap;function Wn(s,r){if(typeof s=="object"&&s!==null){var c=Qp.get(s);return c!==void 0?c:(r={value:s,source:r,stack:fp(r)},Qp.set(s,r),r)}return{value:s,source:r,stack:fp(r)}}var Kn=[],ir=0,uh=0;function Cc(){for(var s=ir,r=uh=ir=0;r<s;){var c=Kn[r];Kn[r++]=null;var h=Kn[r];Kn[r++]=null;var m=Kn[r];Kn[r++]=null;var v=Kn[r];if(Kn[r++]=null,h!==null&&m!==null){var E=h.pending;E===null?m.next=m:(m.next=E.next,E.next=m),h.pending=m}v!==0&&Zp(c,m,v)}}function Ec(s,r,c,h){Kn[ir++]=s,Kn[ir++]=r,Kn[ir++]=c,Kn[ir++]=h,uh|=h,s.lanes|=h,s=s.alternate,s!==null&&(s.lanes|=h)}function dh(s,r,c,h){return Ec(s,r,c,h),Tc(s)}function sr(s,r){return Ec(s,null,null,r),Tc(s)}function Zp(s,r,c){s.lanes|=c;var h=s.alternate;h!==null&&(h.lanes|=c);for(var m=!1,v=s.return;v!==null;)v.childLanes|=c,h=v.alternate,h!==null&&(h.childLanes|=c),v.tag===22&&(s=v.stateNode,s===null||s._visibility&1||(m=!0)),s=v,v=v.return;return s.tag===3?(v=s.stateNode,m&&r!==null&&(m=31-je(c),s=v.hiddenUpdates,h=s[m],h===null?s[m]=[r]:h.push(r),r.lane=c|536870912),v):null}function Tc(s){if(50<Vo)throw Vo=0,yf=null,Error(i(185));for(var r=s.return;r!==null;)s=r,r=s.return;return s.tag===3?s.stateNode:null}var ar={};function JC(s,r,c,h){this.tag=s,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zn(s,r,c,h){return new JC(s,r,c,h)}function hh(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Wi(s,r){var c=s.alternate;return c===null?(c=zn(s.tag,r,s.key,s.mode),c.elementType=s.elementType,c.type=s.type,c.stateNode=s.stateNode,c.alternate=s,s.alternate=c):(c.pendingProps=r,c.type=s.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=s.flags&65011712,c.childLanes=s.childLanes,c.lanes=s.lanes,c.child=s.child,c.memoizedProps=s.memoizedProps,c.memoizedState=s.memoizedState,c.updateQueue=s.updateQueue,r=s.dependencies,c.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},c.sibling=s.sibling,c.index=s.index,c.ref=s.ref,c.refCleanup=s.refCleanup,c}function Jp(s,r){s.flags&=65011714;var c=s.alternate;return c===null?(s.childLanes=0,s.lanes=r,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=c.childLanes,s.lanes=c.lanes,s.child=c.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=c.memoizedProps,s.memoizedState=c.memoizedState,s.updateQueue=c.updateQueue,s.type=c.type,r=c.dependencies,s.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),s}function Oc(s,r,c,h,m,v){var E=0;if(h=s,typeof s=="function")hh(s)&&(E=1);else if(typeof s=="string")E=tT(s,c,me.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case H:return s=zn(31,c,r,m),s.elementType=H,s.lanes=v,s;case S:return ga(c.children,m,v,r);case w:E=8,m|=24;break;case x:return s=zn(12,c,r,m|2),s.elementType=x,s.lanes=v,s;case D:return s=zn(13,c,r,m),s.elementType=D,s.lanes=v,s;case U:return s=zn(19,c,r,m),s.elementType=U,s.lanes=v,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case C:case O:E=10;break e;case T:E=9;break e;case M:E=11;break e;case L:E=14;break e;case B:E=16,h=null;break e}E=29,c=Error(i(130,s===null?"null":typeof s,"")),h=null}return r=zn(E,c,r,m),r.elementType=s,r.type=h,r.lanes=v,r}function ga(s,r,c,h){return s=zn(7,s,h,r),s.lanes=c,s}function fh(s,r,c){return s=zn(6,s,null,r),s.lanes=c,s}function gh(s,r,c){return r=zn(4,s.children!==null?s.children:[],s.key,r),r.lanes=c,r.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},r}var rr=[],or=0,Ac=null,Rc=0,Xn=[],Qn=0,ma=null,Ki=1,Xi="";function pa(s,r){rr[or++]=Rc,rr[or++]=Ac,Ac=s,Rc=r}function ev(s,r,c){Xn[Qn++]=Ki,Xn[Qn++]=Xi,Xn[Qn++]=ma,ma=s;var h=Ki;s=Xi;var m=32-je(h)-1;h&=~(1<<m),c+=1;var v=32-je(r)+m;if(30<v){var E=m-m%5;v=(h&(1<<E)-1).toString(32),h>>=E,m-=E,Ki=1<<32-je(r)+m|c<<m|h,Xi=v+s}else Ki=1<<v|c<<m|h,Xi=s}function mh(s){s.return!==null&&(pa(s,1),ev(s,1,0))}function ph(s){for(;s===Ac;)Ac=rr[--or],rr[or]=null,Rc=rr[--or],rr[or]=null;for(;s===ma;)ma=Xn[--Qn],Xn[Qn]=null,Xi=Xn[--Qn],Xn[Qn]=null,Ki=Xn[--Qn],Xn[Qn]=null}var Sn=null,At=null,Qe=!1,va=null,Ai=!1,vh=Error(i(519));function ya(s){var r=Error(i(418,""));throw wo(Wn(r,s)),vh}function tv(s){var r=s.stateNode,c=s.type,h=s.memoizedProps;switch(r[yt]=s,r[_t]=h,c){case"dialog":He("cancel",r),He("close",r);break;case"iframe":case"object":case"embed":He("load",r);break;case"video":case"audio":for(c=0;c<Go.length;c++)He(Go[c],r);break;case"source":He("error",r);break;case"img":case"image":case"link":He("error",r),He("load",r);break;case"details":He("toggle",r);break;case"input":He("invalid",r),pp(r,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0),mc(r);break;case"select":He("invalid",r);break;case"textarea":He("invalid",r),yp(r,h.value,h.defaultValue,h.children),mc(r)}c=h.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||r.textContent===""+c||h.suppressHydrationWarning===!0||y_(r.textContent,c)?(h.popover!=null&&(He("beforetoggle",r),He("toggle",r)),h.onScroll!=null&&He("scroll",r),h.onScrollEnd!=null&&He("scrollend",r),h.onClick!=null&&(r.onclick=cu),r=!0):r=!1,r||ya(s)}function nv(s){for(Sn=s.return;Sn;)switch(Sn.tag){case 5:case 13:Ai=!1;return;case 27:case 3:Ai=!0;return;default:Sn=Sn.return}}function bo(s){if(s!==Sn)return!1;if(!Qe)return nv(s),Qe=!0,!1;var r=s.tag,c;if((c=r!==3&&r!==27)&&((c=r===5)&&(c=s.type,c=!(c!=="form"&&c!=="button")||jf(s.type,s.memoizedProps)),c=!c),c&&At&&ya(s),nv(s),r===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));e:{for(s=s.nextSibling,r=0;s;){if(s.nodeType===8)if(c=s.data,c==="/$"){if(r===0){At=hi(s.nextSibling);break e}r--}else c!=="$"&&c!=="$!"&&c!=="$?"||r++;s=s.nextSibling}At=null}}else r===27?(r=At,Hs(s.type)?(s=zf,zf=null,At=s):At=r):At=Sn?hi(s.stateNode.nextSibling):null;return!0}function So(){At=Sn=null,Qe=!1}function iv(){var s=va;return s!==null&&(Dn===null?Dn=s:Dn.push.apply(Dn,s),va=null),s}function wo(s){va===null?va=[s]:va.push(s)}var yh=G(null),_a=null,Qi=null;function Ts(s,r,c){de(yh,r._currentValue),r._currentValue=c}function Zi(s){s._currentValue=yh.current,re(yh)}function _h(s,r,c){for(;s!==null;){var h=s.alternate;if((s.childLanes&r)!==r?(s.childLanes|=r,h!==null&&(h.childLanes|=r)):h!==null&&(h.childLanes&r)!==r&&(h.childLanes|=r),s===c)break;s=s.return}}function bh(s,r,c,h){var m=s.child;for(m!==null&&(m.return=s);m!==null;){var v=m.dependencies;if(v!==null){var E=m.child;v=v.firstContext;e:for(;v!==null;){var R=v;v=m;for(var N=0;N<r.length;N++)if(R.context===r[N]){v.lanes|=c,R=v.alternate,R!==null&&(R.lanes|=c),_h(v.return,c,s),h||(E=null);break e}v=R.next}}else if(m.tag===18){if(E=m.return,E===null)throw Error(i(341));E.lanes|=c,v=E.alternate,v!==null&&(v.lanes|=c),_h(E,c,s),E=null}else E=m.child;if(E!==null)E.return=m;else for(E=m;E!==null;){if(E===s){E=null;break}if(m=E.sibling,m!==null){m.return=E.return,E=m;break}E=E.return}m=E}}function xo(s,r,c,h){s=null;for(var m=r,v=!1;m!==null;){if(!v){if((m.flags&524288)!==0)v=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var E=m.alternate;if(E===null)throw Error(i(387));if(E=E.memoizedProps,E!==null){var R=m.type;In(m.pendingProps.value,E.value)||(s!==null?s.push(R):s=[R])}}else if(m===pt.current){if(E=m.alternate,E===null)throw Error(i(387));E.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(s!==null?s.push(Zo):s=[Zo])}m=m.return}s!==null&&bh(r,s,c,h),r.flags|=262144}function Dc(s){for(s=s.firstContext;s!==null;){if(!In(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function ba(s){_a=s,Qi=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function gn(s){return sv(_a,s)}function Mc(s,r){return _a===null&&ba(s),sv(s,r)}function sv(s,r){var c=r._currentValue;if(r={context:r,memoizedValue:c,next:null},Qi===null){if(s===null)throw Error(i(308));Qi=r,s.dependencies={lanes:0,firstContext:r},s.flags|=524288}else Qi=Qi.next=r;return c}var eE=typeof AbortController<"u"?AbortController:function(){var s=[],r=this.signal={aborted:!1,addEventListener:function(c,h){s.push(h)}};this.abort=function(){r.aborted=!0,s.forEach(function(c){return c()})}},tE=t.unstable_scheduleCallback,nE=t.unstable_NormalPriority,Ht={$$typeof:O,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Sh(){return{controller:new eE,data:new Map,refCount:0}}function Co(s){s.refCount--,s.refCount===0&&tE(nE,function(){s.controller.abort()})}var Eo=null,wh=0,lr=0,cr=null;function iE(s,r){if(Eo===null){var c=Eo=[];wh=0,lr=Ef(),cr={status:"pending",value:void 0,then:function(h){c.push(h)}}}return wh++,r.then(av,av),r}function av(){if(--wh===0&&Eo!==null){cr!==null&&(cr.status="fulfilled");var s=Eo;Eo=null,lr=0,cr=null;for(var r=0;r<s.length;r++)(0,s[r])()}}function sE(s,r){var c=[],h={status:"pending",value:null,reason:null,then:function(m){c.push(m)}};return s.then(function(){h.status="fulfilled",h.value=r;for(var m=0;m<c.length;m++)(0,c[m])(r)},function(m){for(h.status="rejected",h.reason=m,m=0;m<c.length;m++)(0,c[m])(void 0)}),h}var rv=I.S;I.S=function(s,r){typeof r=="object"&&r!==null&&typeof r.then=="function"&&iE(s,r),rv!==null&&rv(s,r)};var Sa=G(null);function xh(){var s=Sa.current;return s!==null?s:ft.pooledCache}function kc(s,r){r===null?de(Sa,Sa.current):de(Sa,r.pool)}function ov(){var s=xh();return s===null?null:{parent:Ht._currentValue,pool:s}}var To=Error(i(460)),lv=Error(i(474)),Nc=Error(i(542)),Ch={then:function(){}};function cv(s){return s=s.status,s==="fulfilled"||s==="rejected"}function jc(){}function uv(s,r,c){switch(c=s[c],c===void 0?s.push(r):c!==r&&(r.then(jc,jc),r=c),r.status){case"fulfilled":return r.value;case"rejected":throw s=r.reason,hv(s),s;default:if(typeof r.status=="string")r.then(jc,jc);else{if(s=ft,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=r,s.status="pending",s.then(function(h){if(r.status==="pending"){var m=r;m.status="fulfilled",m.value=h}},function(h){if(r.status==="pending"){var m=r;m.status="rejected",m.reason=h}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw s=r.reason,hv(s),s}throw Oo=r,To}}var Oo=null;function dv(){if(Oo===null)throw Error(i(459));var s=Oo;return Oo=null,s}function hv(s){if(s===To||s===Nc)throw Error(i(483))}var Os=!1;function Eh(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Th(s,r){s=s.updateQueue,r.updateQueue===s&&(r.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function As(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Rs(s,r,c){var h=s.updateQueue;if(h===null)return null;if(h=h.shared,(Ze&2)!==0){var m=h.pending;return m===null?r.next=r:(r.next=m.next,m.next=r),h.pending=r,r=Tc(s),Zp(s,null,c),r}return Ec(s,h,r,c),Tc(s)}function Ao(s,r,c){if(r=r.updateQueue,r!==null&&(r=r.shared,(c&4194048)!==0)){var h=r.lanes;h&=s.pendingLanes,c|=h,r.lanes=c,ci(s,c)}}function Oh(s,r){var c=s.updateQueue,h=s.alternate;if(h!==null&&(h=h.updateQueue,c===h)){var m=null,v=null;if(c=c.firstBaseUpdate,c!==null){do{var E={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};v===null?m=v=E:v=v.next=E,c=c.next}while(c!==null);v===null?m=v=r:v=v.next=r}else m=v=r;c={baseState:h.baseState,firstBaseUpdate:m,lastBaseUpdate:v,shared:h.shared,callbacks:h.callbacks},s.updateQueue=c;return}s=c.lastBaseUpdate,s===null?c.firstBaseUpdate=r:s.next=r,c.lastBaseUpdate=r}var Ah=!1;function Ro(){if(Ah){var s=cr;if(s!==null)throw s}}function Do(s,r,c,h){Ah=!1;var m=s.updateQueue;Os=!1;var v=m.firstBaseUpdate,E=m.lastBaseUpdate,R=m.shared.pending;if(R!==null){m.shared.pending=null;var N=R,V=N.next;N.next=null,E===null?v=V:E.next=V,E=N;var J=s.alternate;J!==null&&(J=J.updateQueue,R=J.lastBaseUpdate,R!==E&&(R===null?J.firstBaseUpdate=V:R.next=V,J.lastBaseUpdate=N))}if(v!==null){var te=m.baseState;E=0,J=V=N=null,R=v;do{var Y=R.lane&-536870913,W=Y!==R.lane;if(W?(Ge&Y)===Y:(h&Y)===Y){Y!==0&&Y===lr&&(Ah=!0),J!==null&&(J=J.next={lane:0,tag:R.tag,payload:R.payload,callback:null,next:null});e:{var Ae=s,Ee=R;Y=r;var at=c;switch(Ee.tag){case 1:if(Ae=Ee.payload,typeof Ae=="function"){te=Ae.call(at,te,Y);break e}te=Ae;break e;case 3:Ae.flags=Ae.flags&-65537|128;case 0:if(Ae=Ee.payload,Y=typeof Ae=="function"?Ae.call(at,te,Y):Ae,Y==null)break e;te=g({},te,Y);break e;case 2:Os=!0}}Y=R.callback,Y!==null&&(s.flags|=64,W&&(s.flags|=8192),W=m.callbacks,W===null?m.callbacks=[Y]:W.push(Y))}else W={lane:Y,tag:R.tag,payload:R.payload,callback:R.callback,next:null},J===null?(V=J=W,N=te):J=J.next=W,E|=Y;if(R=R.next,R===null){if(R=m.shared.pending,R===null)break;W=R,R=W.next,W.next=null,m.lastBaseUpdate=W,m.shared.pending=null}}while(!0);J===null&&(N=te),m.baseState=N,m.firstBaseUpdate=V,m.lastBaseUpdate=J,v===null&&(m.shared.lanes=0),Is|=E,s.lanes=E,s.memoizedState=te}}function fv(s,r){if(typeof s!="function")throw Error(i(191,s));s.call(r)}function gv(s,r){var c=s.callbacks;if(c!==null)for(s.callbacks=null,s=0;s<c.length;s++)fv(c[s],r)}var ur=G(null),Lc=G(0);function mv(s,r){s=as,de(Lc,s),de(ur,r),as=s|r.baseLanes}function Rh(){de(Lc,as),de(ur,ur.current)}function Dh(){as=Lc.current,re(ur),re(Lc)}var Ds=0,ze=null,it=null,Pt=null,Pc=!1,dr=!1,wa=!1,Ic=0,Mo=0,hr=null,aE=0;function Mt(){throw Error(i(321))}function Mh(s,r){if(r===null)return!1;for(var c=0;c<r.length&&c<s.length;c++)if(!In(s[c],r[c]))return!1;return!0}function kh(s,r,c,h,m,v){return Ds=v,ze=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,I.H=s===null||s.memoizedState===null?Zv:Jv,wa=!1,v=c(h,m),wa=!1,dr&&(v=vv(r,c,h,m)),pv(s),v}function pv(s){I.H=$c;var r=it!==null&&it.next!==null;if(Ds=0,Pt=it=ze=null,Pc=!1,Mo=0,hr=null,r)throw Error(i(300));s===null||Qt||(s=s.dependencies,s!==null&&Dc(s)&&(Qt=!0))}function vv(s,r,c,h){ze=s;var m=0;do{if(dr&&(hr=null),Mo=0,dr=!1,25<=m)throw Error(i(301));if(m+=1,Pt=it=null,s.updateQueue!=null){var v=s.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}I.H=hE,v=r(c,h)}while(dr);return v}function rE(){var s=I.H,r=s.useState()[0];return r=typeof r.then=="function"?ko(r):r,s=s.useState()[0],(it!==null?it.memoizedState:null)!==s&&(ze.flags|=1024),r}function Nh(){var s=Ic!==0;return Ic=0,s}function jh(s,r,c){r.updateQueue=s.updateQueue,r.flags&=-2053,s.lanes&=~c}function Lh(s){if(Pc){for(s=s.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}Pc=!1}Ds=0,Pt=it=ze=null,dr=!1,Mo=Ic=0,hr=null}function An(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pt===null?ze.memoizedState=Pt=s:Pt=Pt.next=s,Pt}function It(){if(it===null){var s=ze.alternate;s=s!==null?s.memoizedState:null}else s=it.next;var r=Pt===null?ze.memoizedState:Pt.next;if(r!==null)Pt=r,it=s;else{if(s===null)throw ze.alternate===null?Error(i(467)):Error(i(310));it=s,s={memoizedState:it.memoizedState,baseState:it.baseState,baseQueue:it.baseQueue,queue:it.queue,next:null},Pt===null?ze.memoizedState=Pt=s:Pt=Pt.next=s}return Pt}function Ph(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ko(s){var r=Mo;return Mo+=1,hr===null&&(hr=[]),s=uv(hr,s,r),r=ze,(Pt===null?r.memoizedState:Pt.next)===null&&(r=r.alternate,I.H=r===null||r.memoizedState===null?Zv:Jv),s}function zc(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return ko(s);if(s.$$typeof===O)return gn(s)}throw Error(i(438,String(s)))}function Ih(s){var r=null,c=ze.updateQueue;if(c!==null&&(r=c.memoCache),r==null){var h=ze.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(r={data:h.data.map(function(m){return m.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),c===null&&(c=Ph(),ze.updateQueue=c),c.memoCache=r,c=r.data[r.index],c===void 0)for(c=r.data[r.index]=Array(s),h=0;h<s;h++)c[h]=Q;return r.index++,c}function Ji(s,r){return typeof r=="function"?r(s):r}function Fc(s){var r=It();return zh(r,it,s)}function zh(s,r,c){var h=s.queue;if(h===null)throw Error(i(311));h.lastRenderedReducer=c;var m=s.baseQueue,v=h.pending;if(v!==null){if(m!==null){var E=m.next;m.next=v.next,v.next=E}r.baseQueue=m=v,h.pending=null}if(v=s.baseState,m===null)s.memoizedState=v;else{r=m.next;var R=E=null,N=null,V=r,J=!1;do{var te=V.lane&-536870913;if(te!==V.lane?(Ge&te)===te:(Ds&te)===te){var Y=V.revertLane;if(Y===0)N!==null&&(N=N.next={lane:0,revertLane:0,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null}),te===lr&&(J=!0);else if((Ds&Y)===Y){V=V.next,Y===lr&&(J=!0);continue}else te={lane:0,revertLane:V.revertLane,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null},N===null?(R=N=te,E=v):N=N.next=te,ze.lanes|=Y,Is|=Y;te=V.action,wa&&c(v,te),v=V.hasEagerState?V.eagerState:c(v,te)}else Y={lane:te,revertLane:V.revertLane,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null},N===null?(R=N=Y,E=v):N=N.next=Y,ze.lanes|=te,Is|=te;V=V.next}while(V!==null&&V!==r);if(N===null?E=v:N.next=R,!In(v,s.memoizedState)&&(Qt=!0,J&&(c=cr,c!==null)))throw c;s.memoizedState=v,s.baseState=E,s.baseQueue=N,h.lastRenderedState=v}return m===null&&(h.lanes=0),[s.memoizedState,h.dispatch]}function Fh(s){var r=It(),c=r.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=s;var h=c.dispatch,m=c.pending,v=r.memoizedState;if(m!==null){c.pending=null;var E=m=m.next;do v=s(v,E.action),E=E.next;while(E!==m);In(v,r.memoizedState)||(Qt=!0),r.memoizedState=v,r.baseQueue===null&&(r.baseState=v),c.lastRenderedState=v}return[v,h]}function yv(s,r,c){var h=ze,m=It(),v=Qe;if(v){if(c===void 0)throw Error(i(407));c=c()}else c=r();var E=!In((it||m).memoizedState,c);E&&(m.memoizedState=c,Qt=!0),m=m.queue;var R=Sv.bind(null,h,m,s);if(No(2048,8,R,[s]),m.getSnapshot!==r||E||Pt!==null&&Pt.memoizedState.tag&1){if(h.flags|=2048,fr(9,Uc(),bv.bind(null,h,m,c,r),null),ft===null)throw Error(i(349));v||(Ds&124)!==0||_v(h,r,c)}return c}function _v(s,r,c){s.flags|=16384,s={getSnapshot:r,value:c},r=ze.updateQueue,r===null?(r=Ph(),ze.updateQueue=r,r.stores=[s]):(c=r.stores,c===null?r.stores=[s]:c.push(s))}function bv(s,r,c,h){r.value=c,r.getSnapshot=h,wv(r)&&xv(s)}function Sv(s,r,c){return c(function(){wv(r)&&xv(s)})}function wv(s){var r=s.getSnapshot;s=s.value;try{var c=r();return!In(s,c)}catch{return!0}}function xv(s){var r=sr(s,2);r!==null&&$n(r,s,2)}function Uh(s){var r=An();if(typeof s=="function"){var c=s;if(s=c(),wa){ke(!0);try{c()}finally{ke(!1)}}}return r.memoizedState=r.baseState=s,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ji,lastRenderedState:s},r}function Cv(s,r,c,h){return s.baseState=c,zh(s,it,typeof h=="function"?h:Ji)}function oE(s,r,c,h,m){if(Bc(s))throw Error(i(485));if(s=r.action,s!==null){var v={payload:m,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){v.listeners.push(E)}};I.T!==null?c(!0):v.isTransition=!1,h(v),c=r.pending,c===null?(v.next=r.pending=v,Ev(r,v)):(v.next=c.next,r.pending=c.next=v)}}function Ev(s,r){var c=r.action,h=r.payload,m=s.state;if(r.isTransition){var v=I.T,E={};I.T=E;try{var R=c(m,h),N=I.S;N!==null&&N(E,R),Tv(s,r,R)}catch(V){Hh(s,r,V)}finally{I.T=v}}else try{v=c(m,h),Tv(s,r,v)}catch(V){Hh(s,r,V)}}function Tv(s,r,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(h){Ov(s,r,h)},function(h){return Hh(s,r,h)}):Ov(s,r,c)}function Ov(s,r,c){r.status="fulfilled",r.value=c,Av(r),s.state=c,r=s.pending,r!==null&&(c=r.next,c===r?s.pending=null:(c=c.next,r.next=c,Ev(s,c)))}function Hh(s,r,c){var h=s.pending;if(s.pending=null,h!==null){h=h.next;do r.status="rejected",r.reason=c,Av(r),r=r.next;while(r!==h)}s.action=null}function Av(s){s=s.listeners;for(var r=0;r<s.length;r++)(0,s[r])()}function Rv(s,r){return r}function Dv(s,r){if(Qe){var c=ft.formState;if(c!==null){e:{var h=ze;if(Qe){if(At){t:{for(var m=At,v=Ai;m.nodeType!==8;){if(!v){m=null;break t}if(m=hi(m.nextSibling),m===null){m=null;break t}}v=m.data,m=v==="F!"||v==="F"?m:null}if(m){At=hi(m.nextSibling),h=m.data==="F!";break e}}ya(h)}h=!1}h&&(r=c[0])}}return c=An(),c.memoizedState=c.baseState=r,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rv,lastRenderedState:r},c.queue=h,c=Kv.bind(null,ze,h),h.dispatch=c,h=Uh(!1),v=Gh.bind(null,ze,!1,h.queue),h=An(),m={state:r,dispatch:null,action:s,pending:null},h.queue=m,c=oE.bind(null,ze,m,v,c),m.dispatch=c,h.memoizedState=s,[r,c,!1]}function Mv(s){var r=It();return kv(r,it,s)}function kv(s,r,c){if(r=zh(s,r,Rv)[0],s=Fc(Ji)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var h=ko(r)}catch(E){throw E===To?Nc:E}else h=r;r=It();var m=r.queue,v=m.dispatch;return c!==r.memoizedState&&(ze.flags|=2048,fr(9,Uc(),lE.bind(null,m,c),null)),[h,v,s]}function lE(s,r){s.action=r}function Nv(s){var r=It(),c=it;if(c!==null)return kv(r,c,s);It(),r=r.memoizedState,c=It();var h=c.queue.dispatch;return c.memoizedState=s,[r,h,!1]}function fr(s,r,c,h){return s={tag:s,create:c,deps:h,inst:r,next:null},r=ze.updateQueue,r===null&&(r=Ph(),ze.updateQueue=r),c=r.lastEffect,c===null?r.lastEffect=s.next=s:(h=c.next,c.next=s,s.next=h,r.lastEffect=s),s}function Uc(){return{destroy:void 0,resource:void 0}}function jv(){return It().memoizedState}function Hc(s,r,c,h){var m=An();h=h===void 0?null:h,ze.flags|=s,m.memoizedState=fr(1|r,Uc(),c,h)}function No(s,r,c,h){var m=It();h=h===void 0?null:h;var v=m.memoizedState.inst;it!==null&&h!==null&&Mh(h,it.memoizedState.deps)?m.memoizedState=fr(r,v,c,h):(ze.flags|=s,m.memoizedState=fr(1|r,v,c,h))}function Lv(s,r){Hc(8390656,8,s,r)}function Pv(s,r){No(2048,8,s,r)}function Iv(s,r){return No(4,2,s,r)}function zv(s,r){return No(4,4,s,r)}function Fv(s,r){if(typeof r=="function"){s=s();var c=r(s);return function(){typeof c=="function"?c():r(null)}}if(r!=null)return s=s(),r.current=s,function(){r.current=null}}function Uv(s,r,c){c=c!=null?c.concat([s]):null,No(4,4,Fv.bind(null,r,s),c)}function Bh(){}function Hv(s,r){var c=It();r=r===void 0?null:r;var h=c.memoizedState;return r!==null&&Mh(r,h[1])?h[0]:(c.memoizedState=[s,r],s)}function Bv(s,r){var c=It();r=r===void 0?null:r;var h=c.memoizedState;if(r!==null&&Mh(r,h[1]))return h[0];if(h=s(),wa){ke(!0);try{s()}finally{ke(!1)}}return c.memoizedState=[h,r],h}function $h(s,r,c){return c===void 0||(Ds&1073741824)!==0?s.memoizedState=r:(s.memoizedState=c,s=qy(),ze.lanes|=s,Is|=s,c)}function $v(s,r,c,h){return In(c,r)?c:ur.current!==null?(s=$h(s,c,h),In(s,r)||(Qt=!0),s):(Ds&42)===0?(Qt=!0,s.memoizedState=c):(s=qy(),ze.lanes|=s,Is|=s,r)}function Vv(s,r,c,h,m){var v=K.p;K.p=v!==0&&8>v?v:8;var E=I.T,R={};I.T=R,Gh(s,!1,r,c);try{var N=m(),V=I.S;if(V!==null&&V(R,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var J=sE(N,h);jo(s,r,J,Bn(s))}else jo(s,r,h,Bn(s))}catch(te){jo(s,r,{then:function(){},status:"rejected",reason:te},Bn())}finally{K.p=v,I.T=E}}function cE(){}function Vh(s,r,c,h){if(s.tag!==5)throw Error(i(476));var m=qv(s).queue;Vv(s,m,r,le,c===null?cE:function(){return Gv(s),c(h)})}function qv(s){var r=s.memoizedState;if(r!==null)return r;r={memoizedState:le,baseState:le,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ji,lastRenderedState:le},next:null};var c={};return r.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ji,lastRenderedState:c},next:null},s.memoizedState=r,s=s.alternate,s!==null&&(s.memoizedState=r),r}function Gv(s){var r=qv(s).next.queue;jo(s,r,{},Bn())}function qh(){return gn(Zo)}function Yv(){return It().memoizedState}function Wv(){return It().memoizedState}function uE(s){for(var r=s.return;r!==null;){switch(r.tag){case 24:case 3:var c=Bn();s=As(c);var h=Rs(r,s,c);h!==null&&($n(h,r,c),Ao(h,r,c)),r={cache:Sh()},s.payload=r;return}r=r.return}}function dE(s,r,c){var h=Bn();c={lane:h,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null},Bc(s)?Xv(r,c):(c=dh(s,r,c,h),c!==null&&($n(c,s,h),Qv(c,r,h)))}function Kv(s,r,c){var h=Bn();jo(s,r,c,h)}function jo(s,r,c,h){var m={lane:h,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null};if(Bc(s))Xv(r,m);else{var v=s.alternate;if(s.lanes===0&&(v===null||v.lanes===0)&&(v=r.lastRenderedReducer,v!==null))try{var E=r.lastRenderedState,R=v(E,c);if(m.hasEagerState=!0,m.eagerState=R,In(R,E))return Ec(s,r,m,0),ft===null&&Cc(),!1}catch{}finally{}if(c=dh(s,r,m,h),c!==null)return $n(c,s,h),Qv(c,r,h),!0}return!1}function Gh(s,r,c,h){if(h={lane:2,revertLane:Ef(),action:h,hasEagerState:!1,eagerState:null,next:null},Bc(s)){if(r)throw Error(i(479))}else r=dh(s,c,h,2),r!==null&&$n(r,s,2)}function Bc(s){var r=s.alternate;return s===ze||r!==null&&r===ze}function Xv(s,r){dr=Pc=!0;var c=s.pending;c===null?r.next=r:(r.next=c.next,c.next=r),s.pending=r}function Qv(s,r,c){if((c&4194048)!==0){var h=r.lanes;h&=s.pendingLanes,c|=h,r.lanes=c,ci(s,c)}}var $c={readContext:gn,use:zc,useCallback:Mt,useContext:Mt,useEffect:Mt,useImperativeHandle:Mt,useLayoutEffect:Mt,useInsertionEffect:Mt,useMemo:Mt,useReducer:Mt,useRef:Mt,useState:Mt,useDebugValue:Mt,useDeferredValue:Mt,useTransition:Mt,useSyncExternalStore:Mt,useId:Mt,useHostTransitionStatus:Mt,useFormState:Mt,useActionState:Mt,useOptimistic:Mt,useMemoCache:Mt,useCacheRefresh:Mt},Zv={readContext:gn,use:zc,useCallback:function(s,r){return An().memoizedState=[s,r===void 0?null:r],s},useContext:gn,useEffect:Lv,useImperativeHandle:function(s,r,c){c=c!=null?c.concat([s]):null,Hc(4194308,4,Fv.bind(null,r,s),c)},useLayoutEffect:function(s,r){return Hc(4194308,4,s,r)},useInsertionEffect:function(s,r){Hc(4,2,s,r)},useMemo:function(s,r){var c=An();r=r===void 0?null:r;var h=s();if(wa){ke(!0);try{s()}finally{ke(!1)}}return c.memoizedState=[h,r],h},useReducer:function(s,r,c){var h=An();if(c!==void 0){var m=c(r);if(wa){ke(!0);try{c(r)}finally{ke(!1)}}}else m=r;return h.memoizedState=h.baseState=m,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:m},h.queue=s,s=s.dispatch=dE.bind(null,ze,s),[h.memoizedState,s]},useRef:function(s){var r=An();return s={current:s},r.memoizedState=s},useState:function(s){s=Uh(s);var r=s.queue,c=Kv.bind(null,ze,r);return r.dispatch=c,[s.memoizedState,c]},useDebugValue:Bh,useDeferredValue:function(s,r){var c=An();return $h(c,s,r)},useTransition:function(){var s=Uh(!1);return s=Vv.bind(null,ze,s.queue,!0,!1),An().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,r,c){var h=ze,m=An();if(Qe){if(c===void 0)throw Error(i(407));c=c()}else{if(c=r(),ft===null)throw Error(i(349));(Ge&124)!==0||_v(h,r,c)}m.memoizedState=c;var v={value:c,getSnapshot:r};return m.queue=v,Lv(Sv.bind(null,h,v,s),[s]),h.flags|=2048,fr(9,Uc(),bv.bind(null,h,v,c,r),null),c},useId:function(){var s=An(),r=ft.identifierPrefix;if(Qe){var c=Xi,h=Ki;c=(h&~(1<<32-je(h)-1)).toString(32)+c,r="«"+r+"R"+c,c=Ic++,0<c&&(r+="H"+c.toString(32)),r+="»"}else c=aE++,r="«"+r+"r"+c.toString(32)+"»";return s.memoizedState=r},useHostTransitionStatus:qh,useFormState:Dv,useActionState:Dv,useOptimistic:function(s){var r=An();r.memoizedState=r.baseState=s;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=c,r=Gh.bind(null,ze,!0,c),c.dispatch=r,[s,r]},useMemoCache:Ih,useCacheRefresh:function(){return An().memoizedState=uE.bind(null,ze)}},Jv={readContext:gn,use:zc,useCallback:Hv,useContext:gn,useEffect:Pv,useImperativeHandle:Uv,useInsertionEffect:Iv,useLayoutEffect:zv,useMemo:Bv,useReducer:Fc,useRef:jv,useState:function(){return Fc(Ji)},useDebugValue:Bh,useDeferredValue:function(s,r){var c=It();return $v(c,it.memoizedState,s,r)},useTransition:function(){var s=Fc(Ji)[0],r=It().memoizedState;return[typeof s=="boolean"?s:ko(s),r]},useSyncExternalStore:yv,useId:Yv,useHostTransitionStatus:qh,useFormState:Mv,useActionState:Mv,useOptimistic:function(s,r){var c=It();return Cv(c,it,s,r)},useMemoCache:Ih,useCacheRefresh:Wv},hE={readContext:gn,use:zc,useCallback:Hv,useContext:gn,useEffect:Pv,useImperativeHandle:Uv,useInsertionEffect:Iv,useLayoutEffect:zv,useMemo:Bv,useReducer:Fh,useRef:jv,useState:function(){return Fh(Ji)},useDebugValue:Bh,useDeferredValue:function(s,r){var c=It();return it===null?$h(c,s,r):$v(c,it.memoizedState,s,r)},useTransition:function(){var s=Fh(Ji)[0],r=It().memoizedState;return[typeof s=="boolean"?s:ko(s),r]},useSyncExternalStore:yv,useId:Yv,useHostTransitionStatus:qh,useFormState:Nv,useActionState:Nv,useOptimistic:function(s,r){var c=It();return it!==null?Cv(c,it,s,r):(c.baseState=s,[s,c.queue.dispatch])},useMemoCache:Ih,useCacheRefresh:Wv},gr=null,Lo=0;function Vc(s){var r=Lo;return Lo+=1,gr===null&&(gr=[]),uv(gr,s,r)}function Po(s,r){r=r.props.ref,s.ref=r!==void 0?r:null}function qc(s,r){throw r.$$typeof===p?Error(i(525)):(s=Object.prototype.toString.call(r),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":s)))}function ey(s){var r=s._init;return r(s._payload)}function ty(s){function r(z,P){if(s){var $=z.deletions;$===null?(z.deletions=[P],z.flags|=16):$.push(P)}}function c(z,P){if(!s)return null;for(;P!==null;)r(z,P),P=P.sibling;return null}function h(z){for(var P=new Map;z!==null;)z.key!==null?P.set(z.key,z):P.set(z.index,z),z=z.sibling;return P}function m(z,P){return z=Wi(z,P),z.index=0,z.sibling=null,z}function v(z,P,$){return z.index=$,s?($=z.alternate,$!==null?($=$.index,$<P?(z.flags|=67108866,P):$):(z.flags|=67108866,P)):(z.flags|=1048576,P)}function E(z){return s&&z.alternate===null&&(z.flags|=67108866),z}function R(z,P,$,ee){return P===null||P.tag!==6?(P=fh($,z.mode,ee),P.return=z,P):(P=m(P,$),P.return=z,P)}function N(z,P,$,ee){var ye=$.type;return ye===S?J(z,P,$.props.children,ee,$.key):P!==null&&(P.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===B&&ey(ye)===P.type)?(P=m(P,$.props),Po(P,$),P.return=z,P):(P=Oc($.type,$.key,$.props,null,z.mode,ee),Po(P,$),P.return=z,P)}function V(z,P,$,ee){return P===null||P.tag!==4||P.stateNode.containerInfo!==$.containerInfo||P.stateNode.implementation!==$.implementation?(P=gh($,z.mode,ee),P.return=z,P):(P=m(P,$.children||[]),P.return=z,P)}function J(z,P,$,ee,ye){return P===null||P.tag!==7?(P=ga($,z.mode,ee,ye),P.return=z,P):(P=m(P,$),P.return=z,P)}function te(z,P,$){if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return P=fh(""+P,z.mode,$),P.return=z,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case _:return $=Oc(P.type,P.key,P.props,null,z.mode,$),Po($,P),$.return=z,$;case b:return P=gh(P,z.mode,$),P.return=z,P;case B:var ee=P._init;return P=ee(P._payload),te(z,P,$)}if(oe(P)||q(P))return P=ga(P,z.mode,$,null),P.return=z,P;if(typeof P.then=="function")return te(z,Vc(P),$);if(P.$$typeof===O)return te(z,Mc(z,P),$);qc(z,P)}return null}function Y(z,P,$,ee){var ye=P!==null?P.key:null;if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return ye!==null?null:R(z,P,""+$,ee);if(typeof $=="object"&&$!==null){switch($.$$typeof){case _:return $.key===ye?N(z,P,$,ee):null;case b:return $.key===ye?V(z,P,$,ee):null;case B:return ye=$._init,$=ye($._payload),Y(z,P,$,ee)}if(oe($)||q($))return ye!==null?null:J(z,P,$,ee,null);if(typeof $.then=="function")return Y(z,P,Vc($),ee);if($.$$typeof===O)return Y(z,P,Mc(z,$),ee);qc(z,$)}return null}function W(z,P,$,ee,ye){if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return z=z.get($)||null,R(P,z,""+ee,ye);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case _:return z=z.get(ee.key===null?$:ee.key)||null,N(P,z,ee,ye);case b:return z=z.get(ee.key===null?$:ee.key)||null,V(P,z,ee,ye);case B:var Fe=ee._init;return ee=Fe(ee._payload),W(z,P,$,ee,ye)}if(oe(ee)||q(ee))return z=z.get($)||null,J(P,z,ee,ye,null);if(typeof ee.then=="function")return W(z,P,$,Vc(ee),ye);if(ee.$$typeof===O)return W(z,P,$,Mc(P,ee),ye);qc(P,ee)}return null}function Ae(z,P,$,ee){for(var ye=null,Fe=null,be=P,Oe=P=0,Jt=null;be!==null&&Oe<$.length;Oe++){be.index>Oe?(Jt=be,be=null):Jt=be.sibling;var Ke=Y(z,be,$[Oe],ee);if(Ke===null){be===null&&(be=Jt);break}s&&be&&Ke.alternate===null&&r(z,be),P=v(Ke,P,Oe),Fe===null?ye=Ke:Fe.sibling=Ke,Fe=Ke,be=Jt}if(Oe===$.length)return c(z,be),Qe&&pa(z,Oe),ye;if(be===null){for(;Oe<$.length;Oe++)be=te(z,$[Oe],ee),be!==null&&(P=v(be,P,Oe),Fe===null?ye=be:Fe.sibling=be,Fe=be);return Qe&&pa(z,Oe),ye}for(be=h(be);Oe<$.length;Oe++)Jt=W(be,z,Oe,$[Oe],ee),Jt!==null&&(s&&Jt.alternate!==null&&be.delete(Jt.key===null?Oe:Jt.key),P=v(Jt,P,Oe),Fe===null?ye=Jt:Fe.sibling=Jt,Fe=Jt);return s&&be.forEach(function(Gs){return r(z,Gs)}),Qe&&pa(z,Oe),ye}function Ee(z,P,$,ee){if($==null)throw Error(i(151));for(var ye=null,Fe=null,be=P,Oe=P=0,Jt=null,Ke=$.next();be!==null&&!Ke.done;Oe++,Ke=$.next()){be.index>Oe?(Jt=be,be=null):Jt=be.sibling;var Gs=Y(z,be,Ke.value,ee);if(Gs===null){be===null&&(be=Jt);break}s&&be&&Gs.alternate===null&&r(z,be),P=v(Gs,P,Oe),Fe===null?ye=Gs:Fe.sibling=Gs,Fe=Gs,be=Jt}if(Ke.done)return c(z,be),Qe&&pa(z,Oe),ye;if(be===null){for(;!Ke.done;Oe++,Ke=$.next())Ke=te(z,Ke.value,ee),Ke!==null&&(P=v(Ke,P,Oe),Fe===null?ye=Ke:Fe.sibling=Ke,Fe=Ke);return Qe&&pa(z,Oe),ye}for(be=h(be);!Ke.done;Oe++,Ke=$.next())Ke=W(be,z,Oe,Ke.value,ee),Ke!==null&&(s&&Ke.alternate!==null&&be.delete(Ke.key===null?Oe:Ke.key),P=v(Ke,P,Oe),Fe===null?ye=Ke:Fe.sibling=Ke,Fe=Ke);return s&&be.forEach(function(fT){return r(z,fT)}),Qe&&pa(z,Oe),ye}function at(z,P,$,ee){if(typeof $=="object"&&$!==null&&$.type===S&&$.key===null&&($=$.props.children),typeof $=="object"&&$!==null){switch($.$$typeof){case _:e:{for(var ye=$.key;P!==null;){if(P.key===ye){if(ye=$.type,ye===S){if(P.tag===7){c(z,P.sibling),ee=m(P,$.props.children),ee.return=z,z=ee;break e}}else if(P.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===B&&ey(ye)===P.type){c(z,P.sibling),ee=m(P,$.props),Po(ee,$),ee.return=z,z=ee;break e}c(z,P);break}else r(z,P);P=P.sibling}$.type===S?(ee=ga($.props.children,z.mode,ee,$.key),ee.return=z,z=ee):(ee=Oc($.type,$.key,$.props,null,z.mode,ee),Po(ee,$),ee.return=z,z=ee)}return E(z);case b:e:{for(ye=$.key;P!==null;){if(P.key===ye)if(P.tag===4&&P.stateNode.containerInfo===$.containerInfo&&P.stateNode.implementation===$.implementation){c(z,P.sibling),ee=m(P,$.children||[]),ee.return=z,z=ee;break e}else{c(z,P);break}else r(z,P);P=P.sibling}ee=gh($,z.mode,ee),ee.return=z,z=ee}return E(z);case B:return ye=$._init,$=ye($._payload),at(z,P,$,ee)}if(oe($))return Ae(z,P,$,ee);if(q($)){if(ye=q($),typeof ye!="function")throw Error(i(150));return $=ye.call($),Ee(z,P,$,ee)}if(typeof $.then=="function")return at(z,P,Vc($),ee);if($.$$typeof===O)return at(z,P,Mc(z,$),ee);qc(z,$)}return typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint"?($=""+$,P!==null&&P.tag===6?(c(z,P.sibling),ee=m(P,$),ee.return=z,z=ee):(c(z,P),ee=fh($,z.mode,ee),ee.return=z,z=ee),E(z)):c(z,P)}return function(z,P,$,ee){try{Lo=0;var ye=at(z,P,$,ee);return gr=null,ye}catch(be){if(be===To||be===Nc)throw be;var Fe=zn(29,be,null,z.mode);return Fe.lanes=ee,Fe.return=z,Fe}finally{}}}var mr=ty(!0),ny=ty(!1),Zn=G(null),Ri=null;function Ms(s){var r=s.alternate;de(Bt,Bt.current&1),de(Zn,s),Ri===null&&(r===null||ur.current!==null||r.memoizedState!==null)&&(Ri=s)}function iy(s){if(s.tag===22){if(de(Bt,Bt.current),de(Zn,s),Ri===null){var r=s.alternate;r!==null&&r.memoizedState!==null&&(Ri=s)}}else ks()}function ks(){de(Bt,Bt.current),de(Zn,Zn.current)}function es(s){re(Zn),Ri===s&&(Ri=null),re(Bt)}var Bt=G(0);function Gc(s){for(var r=s;r!==null;){if(r.tag===13){var c=r.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||If(c)))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}function Yh(s,r,c,h){r=s.memoizedState,c=c(h,r),c=c==null?r:g({},r,c),s.memoizedState=c,s.lanes===0&&(s.updateQueue.baseState=c)}var Wh={enqueueSetState:function(s,r,c){s=s._reactInternals;var h=Bn(),m=As(h);m.payload=r,c!=null&&(m.callback=c),r=Rs(s,m,h),r!==null&&($n(r,s,h),Ao(r,s,h))},enqueueReplaceState:function(s,r,c){s=s._reactInternals;var h=Bn(),m=As(h);m.tag=1,m.payload=r,c!=null&&(m.callback=c),r=Rs(s,m,h),r!==null&&($n(r,s,h),Ao(r,s,h))},enqueueForceUpdate:function(s,r){s=s._reactInternals;var c=Bn(),h=As(c);h.tag=2,r!=null&&(h.callback=r),r=Rs(s,h,c),r!==null&&($n(r,s,c),Ao(r,s,c))}};function sy(s,r,c,h,m,v,E){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(h,v,E):r.prototype&&r.prototype.isPureReactComponent?!yo(c,h)||!yo(m,v):!0}function ay(s,r,c,h){s=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(c,h),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(c,h),r.state!==s&&Wh.enqueueReplaceState(r,r.state,null)}function xa(s,r){var c=r;if("ref"in r){c={};for(var h in r)h!=="ref"&&(c[h]=r[h])}if(s=s.defaultProps){c===r&&(c=g({},c));for(var m in s)c[m]===void 0&&(c[m]=s[m])}return c}var Yc=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function ry(s){Yc(s)}function oy(s){console.error(s)}function ly(s){Yc(s)}function Wc(s,r){try{var c=s.onUncaughtError;c(r.value,{componentStack:r.stack})}catch(h){setTimeout(function(){throw h})}}function cy(s,r,c){try{var h=s.onCaughtError;h(c.value,{componentStack:c.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function Kh(s,r,c){return c=As(c),c.tag=3,c.payload={element:null},c.callback=function(){Wc(s,r)},c}function uy(s){return s=As(s),s.tag=3,s}function dy(s,r,c,h){var m=c.type.getDerivedStateFromError;if(typeof m=="function"){var v=h.value;s.payload=function(){return m(v)},s.callback=function(){cy(r,c,h)}}var E=c.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(s.callback=function(){cy(r,c,h),typeof m!="function"&&(zs===null?zs=new Set([this]):zs.add(this));var R=h.stack;this.componentDidCatch(h.value,{componentStack:R!==null?R:""})})}function fE(s,r,c,h,m){if(c.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(r=c.alternate,r!==null&&xo(r,c,m,!0),c=Zn.current,c!==null){switch(c.tag){case 13:return Ri===null?bf():c.alternate===null&&Rt===0&&(Rt=3),c.flags&=-257,c.flags|=65536,c.lanes=m,h===Ch?c.flags|=16384:(r=c.updateQueue,r===null?c.updateQueue=new Set([h]):r.add(h),wf(s,h,m)),!1;case 22:return c.flags|=65536,h===Ch?c.flags|=16384:(r=c.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([h])},c.updateQueue=r):(c=r.retryQueue,c===null?r.retryQueue=new Set([h]):c.add(h)),wf(s,h,m)),!1}throw Error(i(435,c.tag))}return wf(s,h,m),bf(),!1}if(Qe)return r=Zn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=m,h!==vh&&(s=Error(i(422),{cause:h}),wo(Wn(s,c)))):(h!==vh&&(r=Error(i(423),{cause:h}),wo(Wn(r,c))),s=s.current.alternate,s.flags|=65536,m&=-m,s.lanes|=m,h=Wn(h,c),m=Kh(s.stateNode,h,m),Oh(s,m),Rt!==4&&(Rt=2)),!1;var v=Error(i(520),{cause:h});if(v=Wn(v,c),$o===null?$o=[v]:$o.push(v),Rt!==4&&(Rt=2),r===null)return!0;h=Wn(h,c),c=r;do{switch(c.tag){case 3:return c.flags|=65536,s=m&-m,c.lanes|=s,s=Kh(c.stateNode,h,s),Oh(c,s),!1;case 1:if(r=c.type,v=c.stateNode,(c.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(zs===null||!zs.has(v))))return c.flags|=65536,m&=-m,c.lanes|=m,m=uy(m),dy(m,s,c,h),Oh(c,m),!1}c=c.return}while(c!==null);return!1}var hy=Error(i(461)),Qt=!1;function ln(s,r,c,h){r.child=s===null?ny(r,null,c,h):mr(r,s.child,c,h)}function fy(s,r,c,h,m){c=c.render;var v=r.ref;if("ref"in h){var E={};for(var R in h)R!=="ref"&&(E[R]=h[R])}else E=h;return ba(r),h=kh(s,r,c,E,v,m),R=Nh(),s!==null&&!Qt?(jh(s,r,m),ts(s,r,m)):(Qe&&R&&mh(r),r.flags|=1,ln(s,r,h,m),r.child)}function gy(s,r,c,h,m){if(s===null){var v=c.type;return typeof v=="function"&&!hh(v)&&v.defaultProps===void 0&&c.compare===null?(r.tag=15,r.type=v,my(s,r,v,h,m)):(s=Oc(c.type,null,h,r,r.mode,m),s.ref=r.ref,s.return=r,r.child=s)}if(v=s.child,!sf(s,m)){var E=v.memoizedProps;if(c=c.compare,c=c!==null?c:yo,c(E,h)&&s.ref===r.ref)return ts(s,r,m)}return r.flags|=1,s=Wi(v,h),s.ref=r.ref,s.return=r,r.child=s}function my(s,r,c,h,m){if(s!==null){var v=s.memoizedProps;if(yo(v,h)&&s.ref===r.ref)if(Qt=!1,r.pendingProps=h=v,sf(s,m))(s.flags&131072)!==0&&(Qt=!0);else return r.lanes=s.lanes,ts(s,r,m)}return Xh(s,r,c,h,m)}function py(s,r,c){var h=r.pendingProps,m=h.children,v=s!==null?s.memoizedState:null;if(h.mode==="hidden"){if((r.flags&128)!==0){if(h=v!==null?v.baseLanes|c:c,s!==null){for(m=r.child=s.child,v=0;m!==null;)v=v|m.lanes|m.childLanes,m=m.sibling;r.childLanes=v&~h}else r.childLanes=0,r.child=null;return vy(s,r,h,c)}if((c&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},s!==null&&kc(r,v!==null?v.cachePool:null),v!==null?mv(r,v):Rh(),iy(r);else return r.lanes=r.childLanes=536870912,vy(s,r,v!==null?v.baseLanes|c:c,c)}else v!==null?(kc(r,v.cachePool),mv(r,v),ks(),r.memoizedState=null):(s!==null&&kc(r,null),Rh(),ks());return ln(s,r,m,c),r.child}function vy(s,r,c,h){var m=xh();return m=m===null?null:{parent:Ht._currentValue,pool:m},r.memoizedState={baseLanes:c,cachePool:m},s!==null&&kc(r,null),Rh(),iy(r),s!==null&&xo(s,r,h,!0),null}function Kc(s,r){var c=r.ref;if(c===null)s!==null&&s.ref!==null&&(r.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(i(284));(s===null||s.ref!==c)&&(r.flags|=4194816)}}function Xh(s,r,c,h,m){return ba(r),c=kh(s,r,c,h,void 0,m),h=Nh(),s!==null&&!Qt?(jh(s,r,m),ts(s,r,m)):(Qe&&h&&mh(r),r.flags|=1,ln(s,r,c,m),r.child)}function yy(s,r,c,h,m,v){return ba(r),r.updateQueue=null,c=vv(r,h,c,m),pv(s),h=Nh(),s!==null&&!Qt?(jh(s,r,v),ts(s,r,v)):(Qe&&h&&mh(r),r.flags|=1,ln(s,r,c,v),r.child)}function _y(s,r,c,h,m){if(ba(r),r.stateNode===null){var v=ar,E=c.contextType;typeof E=="object"&&E!==null&&(v=gn(E)),v=new c(h,v),r.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=Wh,r.stateNode=v,v._reactInternals=r,v=r.stateNode,v.props=h,v.state=r.memoizedState,v.refs={},Eh(r),E=c.contextType,v.context=typeof E=="object"&&E!==null?gn(E):ar,v.state=r.memoizedState,E=c.getDerivedStateFromProps,typeof E=="function"&&(Yh(r,c,E,h),v.state=r.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(E=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),E!==v.state&&Wh.enqueueReplaceState(v,v.state,null),Do(r,h,v,m),Ro(),v.state=r.memoizedState),typeof v.componentDidMount=="function"&&(r.flags|=4194308),h=!0}else if(s===null){v=r.stateNode;var R=r.memoizedProps,N=xa(c,R);v.props=N;var V=v.context,J=c.contextType;E=ar,typeof J=="object"&&J!==null&&(E=gn(J));var te=c.getDerivedStateFromProps;J=typeof te=="function"||typeof v.getSnapshotBeforeUpdate=="function",R=r.pendingProps!==R,J||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(R||V!==E)&&ay(r,v,h,E),Os=!1;var Y=r.memoizedState;v.state=Y,Do(r,h,v,m),Ro(),V=r.memoizedState,R||Y!==V||Os?(typeof te=="function"&&(Yh(r,c,te,h),V=r.memoizedState),(N=Os||sy(r,c,N,h,Y,V,E))?(J||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(r.flags|=4194308)):(typeof v.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=h,r.memoizedState=V),v.props=h,v.state=V,v.context=E,h=N):(typeof v.componentDidMount=="function"&&(r.flags|=4194308),h=!1)}else{v=r.stateNode,Th(s,r),E=r.memoizedProps,J=xa(c,E),v.props=J,te=r.pendingProps,Y=v.context,V=c.contextType,N=ar,typeof V=="object"&&V!==null&&(N=gn(V)),R=c.getDerivedStateFromProps,(V=typeof R=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(E!==te||Y!==N)&&ay(r,v,h,N),Os=!1,Y=r.memoizedState,v.state=Y,Do(r,h,v,m),Ro();var W=r.memoizedState;E!==te||Y!==W||Os||s!==null&&s.dependencies!==null&&Dc(s.dependencies)?(typeof R=="function"&&(Yh(r,c,R,h),W=r.memoizedState),(J=Os||sy(r,c,J,h,Y,W,N)||s!==null&&s.dependencies!==null&&Dc(s.dependencies))?(V||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(h,W,N),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(h,W,N)),typeof v.componentDidUpdate=="function"&&(r.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof v.componentDidUpdate!="function"||E===s.memoizedProps&&Y===s.memoizedState||(r.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||E===s.memoizedProps&&Y===s.memoizedState||(r.flags|=1024),r.memoizedProps=h,r.memoizedState=W),v.props=h,v.state=W,v.context=N,h=J):(typeof v.componentDidUpdate!="function"||E===s.memoizedProps&&Y===s.memoizedState||(r.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||E===s.memoizedProps&&Y===s.memoizedState||(r.flags|=1024),h=!1)}return v=h,Kc(s,r),h=(r.flags&128)!==0,v||h?(v=r.stateNode,c=h&&typeof c.getDerivedStateFromError!="function"?null:v.render(),r.flags|=1,s!==null&&h?(r.child=mr(r,s.child,null,m),r.child=mr(r,null,c,m)):ln(s,r,c,m),r.memoizedState=v.state,s=r.child):s=ts(s,r,m),s}function by(s,r,c,h){return So(),r.flags|=256,ln(s,r,c,h),r.child}var Qh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Zh(s){return{baseLanes:s,cachePool:ov()}}function Jh(s,r,c){return s=s!==null?s.childLanes&~c:0,r&&(s|=Jn),s}function Sy(s,r,c){var h=r.pendingProps,m=!1,v=(r.flags&128)!==0,E;if((E=v)||(E=s!==null&&s.memoizedState===null?!1:(Bt.current&2)!==0),E&&(m=!0,r.flags&=-129),E=(r.flags&32)!==0,r.flags&=-33,s===null){if(Qe){if(m?Ms(r):ks(),Qe){var R=At,N;if(N=R){e:{for(N=R,R=Ai;N.nodeType!==8;){if(!R){R=null;break e}if(N=hi(N.nextSibling),N===null){R=null;break e}}R=N}R!==null?(r.memoizedState={dehydrated:R,treeContext:ma!==null?{id:Ki,overflow:Xi}:null,retryLane:536870912,hydrationErrors:null},N=zn(18,null,null,0),N.stateNode=R,N.return=r,r.child=N,Sn=r,At=null,N=!0):N=!1}N||ya(r)}if(R=r.memoizedState,R!==null&&(R=R.dehydrated,R!==null))return If(R)?r.lanes=32:r.lanes=536870912,null;es(r)}return R=h.children,h=h.fallback,m?(ks(),m=r.mode,R=Xc({mode:"hidden",children:R},m),h=ga(h,m,c,null),R.return=r,h.return=r,R.sibling=h,r.child=R,m=r.child,m.memoizedState=Zh(c),m.childLanes=Jh(s,E,c),r.memoizedState=Qh,h):(Ms(r),ef(r,R))}if(N=s.memoizedState,N!==null&&(R=N.dehydrated,R!==null)){if(v)r.flags&256?(Ms(r),r.flags&=-257,r=tf(s,r,c)):r.memoizedState!==null?(ks(),r.child=s.child,r.flags|=128,r=null):(ks(),m=h.fallback,R=r.mode,h=Xc({mode:"visible",children:h.children},R),m=ga(m,R,c,null),m.flags|=2,h.return=r,m.return=r,h.sibling=m,r.child=h,mr(r,s.child,null,c),h=r.child,h.memoizedState=Zh(c),h.childLanes=Jh(s,E,c),r.memoizedState=Qh,r=m);else if(Ms(r),If(R)){if(E=R.nextSibling&&R.nextSibling.dataset,E)var V=E.dgst;E=V,h=Error(i(419)),h.stack="",h.digest=E,wo({value:h,source:null,stack:null}),r=tf(s,r,c)}else if(Qt||xo(s,r,c,!1),E=(c&s.childLanes)!==0,Qt||E){if(E=ft,E!==null&&(h=c&-c,h=(h&42)!==0?1:hn(h),h=(h&(E.suspendedLanes|c))!==0?0:h,h!==0&&h!==N.retryLane))throw N.retryLane=h,sr(s,h),$n(E,s,h),hy;R.data==="$?"||bf(),r=tf(s,r,c)}else R.data==="$?"?(r.flags|=192,r.child=s.child,r=null):(s=N.treeContext,At=hi(R.nextSibling),Sn=r,Qe=!0,va=null,Ai=!1,s!==null&&(Xn[Qn++]=Ki,Xn[Qn++]=Xi,Xn[Qn++]=ma,Ki=s.id,Xi=s.overflow,ma=r),r=ef(r,h.children),r.flags|=4096);return r}return m?(ks(),m=h.fallback,R=r.mode,N=s.child,V=N.sibling,h=Wi(N,{mode:"hidden",children:h.children}),h.subtreeFlags=N.subtreeFlags&65011712,V!==null?m=Wi(V,m):(m=ga(m,R,c,null),m.flags|=2),m.return=r,h.return=r,h.sibling=m,r.child=h,h=m,m=r.child,R=s.child.memoizedState,R===null?R=Zh(c):(N=R.cachePool,N!==null?(V=Ht._currentValue,N=N.parent!==V?{parent:V,pool:V}:N):N=ov(),R={baseLanes:R.baseLanes|c,cachePool:N}),m.memoizedState=R,m.childLanes=Jh(s,E,c),r.memoizedState=Qh,h):(Ms(r),c=s.child,s=c.sibling,c=Wi(c,{mode:"visible",children:h.children}),c.return=r,c.sibling=null,s!==null&&(E=r.deletions,E===null?(r.deletions=[s],r.flags|=16):E.push(s)),r.child=c,r.memoizedState=null,c)}function ef(s,r){return r=Xc({mode:"visible",children:r},s.mode),r.return=s,s.child=r}function Xc(s,r){return s=zn(22,s,null,r),s.lanes=0,s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},s}function tf(s,r,c){return mr(r,s.child,null,c),s=ef(r,r.pendingProps.children),s.flags|=2,r.memoizedState=null,s}function wy(s,r,c){s.lanes|=r;var h=s.alternate;h!==null&&(h.lanes|=r),_h(s.return,r,c)}function nf(s,r,c,h,m){var v=s.memoizedState;v===null?s.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:h,tail:c,tailMode:m}:(v.isBackwards=r,v.rendering=null,v.renderingStartTime=0,v.last=h,v.tail=c,v.tailMode=m)}function xy(s,r,c){var h=r.pendingProps,m=h.revealOrder,v=h.tail;if(ln(s,r,h.children,c),h=Bt.current,(h&2)!==0)h=h&1|2,r.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=r.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&wy(s,c,r);else if(s.tag===19)wy(s,c,r);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}h&=1}switch(de(Bt,h),m){case"forwards":for(c=r.child,m=null;c!==null;)s=c.alternate,s!==null&&Gc(s)===null&&(m=c),c=c.sibling;c=m,c===null?(m=r.child,r.child=null):(m=c.sibling,c.sibling=null),nf(r,!1,m,c,v);break;case"backwards":for(c=null,m=r.child,r.child=null;m!==null;){if(s=m.alternate,s!==null&&Gc(s)===null){r.child=m;break}s=m.sibling,m.sibling=c,c=m,m=s}nf(r,!0,c,null,v);break;case"together":nf(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function ts(s,r,c){if(s!==null&&(r.dependencies=s.dependencies),Is|=r.lanes,(c&r.childLanes)===0)if(s!==null){if(xo(s,r,c,!1),(c&r.childLanes)===0)return null}else return null;if(s!==null&&r.child!==s.child)throw Error(i(153));if(r.child!==null){for(s=r.child,c=Wi(s,s.pendingProps),r.child=c,c.return=r;s.sibling!==null;)s=s.sibling,c=c.sibling=Wi(s,s.pendingProps),c.return=r;c.sibling=null}return r.child}function sf(s,r){return(s.lanes&r)!==0?!0:(s=s.dependencies,!!(s!==null&&Dc(s)))}function gE(s,r,c){switch(r.tag){case 3:Ne(r,r.stateNode.containerInfo),Ts(r,Ht,s.memoizedState.cache),So();break;case 27:case 5:Se(r);break;case 4:Ne(r,r.stateNode.containerInfo);break;case 10:Ts(r,r.type,r.memoizedProps.value);break;case 13:var h=r.memoizedState;if(h!==null)return h.dehydrated!==null?(Ms(r),r.flags|=128,null):(c&r.child.childLanes)!==0?Sy(s,r,c):(Ms(r),s=ts(s,r,c),s!==null?s.sibling:null);Ms(r);break;case 19:var m=(s.flags&128)!==0;if(h=(c&r.childLanes)!==0,h||(xo(s,r,c,!1),h=(c&r.childLanes)!==0),m){if(h)return xy(s,r,c);r.flags|=128}if(m=r.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),de(Bt,Bt.current),h)break;return null;case 22:case 23:return r.lanes=0,py(s,r,c);case 24:Ts(r,Ht,s.memoizedState.cache)}return ts(s,r,c)}function Cy(s,r,c){if(s!==null)if(s.memoizedProps!==r.pendingProps)Qt=!0;else{if(!sf(s,c)&&(r.flags&128)===0)return Qt=!1,gE(s,r,c);Qt=(s.flags&131072)!==0}else Qt=!1,Qe&&(r.flags&1048576)!==0&&ev(r,Rc,r.index);switch(r.lanes=0,r.tag){case 16:e:{s=r.pendingProps;var h=r.elementType,m=h._init;if(h=m(h._payload),r.type=h,typeof h=="function")hh(h)?(s=xa(h,s),r.tag=1,r=_y(null,r,h,s,c)):(r.tag=0,r=Xh(null,r,h,s,c));else{if(h!=null){if(m=h.$$typeof,m===M){r.tag=11,r=fy(null,r,h,s,c);break e}else if(m===L){r.tag=14,r=gy(null,r,h,s,c);break e}}throw r=he(h)||h,Error(i(306,r,""))}}return r;case 0:return Xh(s,r,r.type,r.pendingProps,c);case 1:return h=r.type,m=xa(h,r.pendingProps),_y(s,r,h,m,c);case 3:e:{if(Ne(r,r.stateNode.containerInfo),s===null)throw Error(i(387));h=r.pendingProps;var v=r.memoizedState;m=v.element,Th(s,r),Do(r,h,null,c);var E=r.memoizedState;if(h=E.cache,Ts(r,Ht,h),h!==v.cache&&bh(r,[Ht],c,!0),Ro(),h=E.element,v.isDehydrated)if(v={element:h,isDehydrated:!1,cache:E.cache},r.updateQueue.baseState=v,r.memoizedState=v,r.flags&256){r=by(s,r,h,c);break e}else if(h!==m){m=Wn(Error(i(424)),r),wo(m),r=by(s,r,h,c);break e}else{switch(s=r.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(At=hi(s.firstChild),Sn=r,Qe=!0,va=null,Ai=!0,c=ny(r,null,h,c),r.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(So(),h===m){r=ts(s,r,c);break e}ln(s,r,h,c)}r=r.child}return r;case 26:return Kc(s,r),s===null?(c=A_(r.type,null,r.pendingProps,null))?r.memoizedState=c:Qe||(c=r.type,s=r.pendingProps,h=uu(pe.current).createElement(c),h[yt]=r,h[_t]=s,un(h,c,s),Xt(h),r.stateNode=h):r.memoizedState=A_(r.type,s.memoizedProps,r.pendingProps,s.memoizedState),null;case 27:return Se(r),s===null&&Qe&&(h=r.stateNode=E_(r.type,r.pendingProps,pe.current),Sn=r,Ai=!0,m=At,Hs(r.type)?(zf=m,At=hi(h.firstChild)):At=m),ln(s,r,r.pendingProps.children,c),Kc(s,r),s===null&&(r.flags|=4194304),r.child;case 5:return s===null&&Qe&&((m=h=At)&&(h=BE(h,r.type,r.pendingProps,Ai),h!==null?(r.stateNode=h,Sn=r,At=hi(h.firstChild),Ai=!1,m=!0):m=!1),m||ya(r)),Se(r),m=r.type,v=r.pendingProps,E=s!==null?s.memoizedProps:null,h=v.children,jf(m,v)?h=null:E!==null&&jf(m,E)&&(r.flags|=32),r.memoizedState!==null&&(m=kh(s,r,rE,null,null,c),Zo._currentValue=m),Kc(s,r),ln(s,r,h,c),r.child;case 6:return s===null&&Qe&&((s=c=At)&&(c=$E(c,r.pendingProps,Ai),c!==null?(r.stateNode=c,Sn=r,At=null,s=!0):s=!1),s||ya(r)),null;case 13:return Sy(s,r,c);case 4:return Ne(r,r.stateNode.containerInfo),h=r.pendingProps,s===null?r.child=mr(r,null,h,c):ln(s,r,h,c),r.child;case 11:return fy(s,r,r.type,r.pendingProps,c);case 7:return ln(s,r,r.pendingProps,c),r.child;case 8:return ln(s,r,r.pendingProps.children,c),r.child;case 12:return ln(s,r,r.pendingProps.children,c),r.child;case 10:return h=r.pendingProps,Ts(r,r.type,h.value),ln(s,r,h.children,c),r.child;case 9:return m=r.type._context,h=r.pendingProps.children,ba(r),m=gn(m),h=h(m),r.flags|=1,ln(s,r,h,c),r.child;case 14:return gy(s,r,r.type,r.pendingProps,c);case 15:return my(s,r,r.type,r.pendingProps,c);case 19:return xy(s,r,c);case 31:return h=r.pendingProps,c=r.mode,h={mode:h.mode,children:h.children},s===null?(c=Xc(h,c),c.ref=r.ref,r.child=c,c.return=r,r=c):(c=Wi(s.child,h),c.ref=r.ref,r.child=c,c.return=r,r=c),r;case 22:return py(s,r,c);case 24:return ba(r),h=gn(Ht),s===null?(m=xh(),m===null&&(m=ft,v=Sh(),m.pooledCache=v,v.refCount++,v!==null&&(m.pooledCacheLanes|=c),m=v),r.memoizedState={parent:h,cache:m},Eh(r),Ts(r,Ht,m)):((s.lanes&c)!==0&&(Th(s,r),Do(r,null,null,c),Ro()),m=s.memoizedState,v=r.memoizedState,m.parent!==h?(m={parent:h,cache:h},r.memoizedState=m,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=m),Ts(r,Ht,h)):(h=v.cache,Ts(r,Ht,h),h!==m.cache&&bh(r,[Ht],c,!0))),ln(s,r,r.pendingProps.children,c),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function ns(s){s.flags|=4}function Ey(s,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!N_(r)){if(r=Zn.current,r!==null&&((Ge&4194048)===Ge?Ri!==null:(Ge&62914560)!==Ge&&(Ge&536870912)===0||r!==Ri))throw Oo=Ch,lv;s.flags|=8192}}function Qc(s,r){r!==null&&(s.flags|=4),s.flags&16384&&(r=s.tag!==22?hc():536870912,s.lanes|=r,_r|=r)}function Io(s,r){if(!Qe)switch(s.tailMode){case"hidden":r=s.tail;for(var c=null;r!==null;)r.alternate!==null&&(c=r),r=r.sibling;c===null?s.tail=null:c.sibling=null;break;case"collapsed":c=s.tail;for(var h=null;c!==null;)c.alternate!==null&&(h=c),c=c.sibling;h===null?r||s.tail===null?s.tail=null:s.tail.sibling=null:h.sibling=null}}function Tt(s){var r=s.alternate!==null&&s.alternate.child===s.child,c=0,h=0;if(r)for(var m=s.child;m!==null;)c|=m.lanes|m.childLanes,h|=m.subtreeFlags&65011712,h|=m.flags&65011712,m.return=s,m=m.sibling;else for(m=s.child;m!==null;)c|=m.lanes|m.childLanes,h|=m.subtreeFlags,h|=m.flags,m.return=s,m=m.sibling;return s.subtreeFlags|=h,s.childLanes=c,r}function mE(s,r,c){var h=r.pendingProps;switch(ph(r),r.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Tt(r),null;case 1:return Tt(r),null;case 3:return c=r.stateNode,h=null,s!==null&&(h=s.memoizedState.cache),r.memoizedState.cache!==h&&(r.flags|=2048),Zi(Ht),vt(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(s===null||s.child===null)&&(bo(r)?ns(r):s===null||s.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,iv())),Tt(r),null;case 26:return c=r.memoizedState,s===null?(ns(r),c!==null?(Tt(r),Ey(r,c)):(Tt(r),r.flags&=-16777217)):c?c!==s.memoizedState?(ns(r),Tt(r),Ey(r,c)):(Tt(r),r.flags&=-16777217):(s.memoizedProps!==h&&ns(r),Tt(r),r.flags&=-16777217),null;case 27:dt(r),c=pe.current;var m=r.type;if(s!==null&&r.stateNode!=null)s.memoizedProps!==h&&ns(r);else{if(!h){if(r.stateNode===null)throw Error(i(166));return Tt(r),null}s=me.current,bo(r)?tv(r):(s=E_(m,h,c),r.stateNode=s,ns(r))}return Tt(r),null;case 5:if(dt(r),c=r.type,s!==null&&r.stateNode!=null)s.memoizedProps!==h&&ns(r);else{if(!h){if(r.stateNode===null)throw Error(i(166));return Tt(r),null}if(s=me.current,bo(r))tv(r);else{switch(m=uu(pe.current),s){case 1:s=m.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:s=m.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":s=m.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":s=m.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":s=m.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof h.is=="string"?m.createElement("select",{is:h.is}):m.createElement("select"),h.multiple?s.multiple=!0:h.size&&(s.size=h.size);break;default:s=typeof h.is=="string"?m.createElement(c,{is:h.is}):m.createElement(c)}}s[yt]=r,s[_t]=h;e:for(m=r.child;m!==null;){if(m.tag===5||m.tag===6)s.appendChild(m.stateNode);else if(m.tag!==4&&m.tag!==27&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===r)break e;for(;m.sibling===null;){if(m.return===null||m.return===r)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}r.stateNode=s;e:switch(un(s,c,h),c){case"button":case"input":case"select":case"textarea":s=!!h.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&ns(r)}}return Tt(r),r.flags&=-16777217,null;case 6:if(s&&r.stateNode!=null)s.memoizedProps!==h&&ns(r);else{if(typeof h!="string"&&r.stateNode===null)throw Error(i(166));if(s=pe.current,bo(r)){if(s=r.stateNode,c=r.memoizedProps,h=null,m=Sn,m!==null)switch(m.tag){case 27:case 5:h=m.memoizedProps}s[yt]=r,s=!!(s.nodeValue===c||h!==null&&h.suppressHydrationWarning===!0||y_(s.nodeValue,c)),s||ya(r)}else s=uu(s).createTextNode(h),s[yt]=r,r.stateNode=s}return Tt(r),null;case 13:if(h=r.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(m=bo(r),h!==null&&h.dehydrated!==null){if(s===null){if(!m)throw Error(i(318));if(m=r.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(i(317));m[yt]=r}else So(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Tt(r),m=!1}else m=iv(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=m),m=!0;if(!m)return r.flags&256?(es(r),r):(es(r),null)}if(es(r),(r.flags&128)!==0)return r.lanes=c,r;if(c=h!==null,s=s!==null&&s.memoizedState!==null,c){h=r.child,m=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(m=h.alternate.memoizedState.cachePool.pool);var v=null;h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(v=h.memoizedState.cachePool.pool),v!==m&&(h.flags|=2048)}return c!==s&&c&&(r.child.flags|=8192),Qc(r,r.updateQueue),Tt(r),null;case 4:return vt(),s===null&&Rf(r.stateNode.containerInfo),Tt(r),null;case 10:return Zi(r.type),Tt(r),null;case 19:if(re(Bt),m=r.memoizedState,m===null)return Tt(r),null;if(h=(r.flags&128)!==0,v=m.rendering,v===null)if(h)Io(m,!1);else{if(Rt!==0||s!==null&&(s.flags&128)!==0)for(s=r.child;s!==null;){if(v=Gc(s),v!==null){for(r.flags|=128,Io(m,!1),s=v.updateQueue,r.updateQueue=s,Qc(r,s),r.subtreeFlags=0,s=c,c=r.child;c!==null;)Jp(c,s),c=c.sibling;return de(Bt,Bt.current&1|2),r.child}s=s.sibling}m.tail!==null&&ae()>eu&&(r.flags|=128,h=!0,Io(m,!1),r.lanes=4194304)}else{if(!h)if(s=Gc(v),s!==null){if(r.flags|=128,h=!0,s=s.updateQueue,r.updateQueue=s,Qc(r,s),Io(m,!0),m.tail===null&&m.tailMode==="hidden"&&!v.alternate&&!Qe)return Tt(r),null}else 2*ae()-m.renderingStartTime>eu&&c!==536870912&&(r.flags|=128,h=!0,Io(m,!1),r.lanes=4194304);m.isBackwards?(v.sibling=r.child,r.child=v):(s=m.last,s!==null?s.sibling=v:r.child=v,m.last=v)}return m.tail!==null?(r=m.tail,m.rendering=r,m.tail=r.sibling,m.renderingStartTime=ae(),r.sibling=null,s=Bt.current,de(Bt,h?s&1|2:s&1),r):(Tt(r),null);case 22:case 23:return es(r),Dh(),h=r.memoizedState!==null,s!==null?s.memoizedState!==null!==h&&(r.flags|=8192):h&&(r.flags|=8192),h?(c&536870912)!==0&&(r.flags&128)===0&&(Tt(r),r.subtreeFlags&6&&(r.flags|=8192)):Tt(r),c=r.updateQueue,c!==null&&Qc(r,c.retryQueue),c=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),h=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(h=r.memoizedState.cachePool.pool),h!==c&&(r.flags|=2048),s!==null&&re(Sa),null;case 24:return c=null,s!==null&&(c=s.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),Zi(Ht),Tt(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function pE(s,r){switch(ph(r),r.tag){case 1:return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 3:return Zi(Ht),vt(),s=r.flags,(s&65536)!==0&&(s&128)===0?(r.flags=s&-65537|128,r):null;case 26:case 27:case 5:return dt(r),null;case 13:if(es(r),s=r.memoizedState,s!==null&&s.dehydrated!==null){if(r.alternate===null)throw Error(i(340));So()}return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 19:return re(Bt),null;case 4:return vt(),null;case 10:return Zi(r.type),null;case 22:case 23:return es(r),Dh(),s!==null&&re(Sa),s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 24:return Zi(Ht),null;case 25:return null;default:return null}}function Ty(s,r){switch(ph(r),r.tag){case 3:Zi(Ht),vt();break;case 26:case 27:case 5:dt(r);break;case 4:vt();break;case 13:es(r);break;case 19:re(Bt);break;case 10:Zi(r.type);break;case 22:case 23:es(r),Dh(),s!==null&&re(Sa);break;case 24:Zi(Ht)}}function zo(s,r){try{var c=r.updateQueue,h=c!==null?c.lastEffect:null;if(h!==null){var m=h.next;c=m;do{if((c.tag&s)===s){h=void 0;var v=c.create,E=c.inst;h=v(),E.destroy=h}c=c.next}while(c!==m)}}catch(R){lt(r,r.return,R)}}function Ns(s,r,c){try{var h=r.updateQueue,m=h!==null?h.lastEffect:null;if(m!==null){var v=m.next;h=v;do{if((h.tag&s)===s){var E=h.inst,R=E.destroy;if(R!==void 0){E.destroy=void 0,m=r;var N=c,V=R;try{V()}catch(J){lt(m,N,J)}}}h=h.next}while(h!==v)}}catch(J){lt(r,r.return,J)}}function Oy(s){var r=s.updateQueue;if(r!==null){var c=s.stateNode;try{gv(r,c)}catch(h){lt(s,s.return,h)}}}function Ay(s,r,c){c.props=xa(s.type,s.memoizedProps),c.state=s.memoizedState;try{c.componentWillUnmount()}catch(h){lt(s,r,h)}}function Fo(s,r){try{var c=s.ref;if(c!==null){switch(s.tag){case 26:case 27:case 5:var h=s.stateNode;break;case 30:h=s.stateNode;break;default:h=s.stateNode}typeof c=="function"?s.refCleanup=c(h):c.current=h}}catch(m){lt(s,r,m)}}function Di(s,r){var c=s.ref,h=s.refCleanup;if(c!==null)if(typeof h=="function")try{h()}catch(m){lt(s,r,m)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(m){lt(s,r,m)}else c.current=null}function Ry(s){var r=s.type,c=s.memoizedProps,h=s.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":c.autoFocus&&h.focus();break e;case"img":c.src?h.src=c.src:c.srcSet&&(h.srcset=c.srcSet)}}catch(m){lt(s,s.return,m)}}function af(s,r,c){try{var h=s.stateNode;IE(h,s.type,c,r),h[_t]=r}catch(m){lt(s,s.return,m)}}function Dy(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Hs(s.type)||s.tag===4}function rf(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||Dy(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Hs(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function of(s,r,c){var h=s.tag;if(h===5||h===6)s=s.stateNode,r?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(s,r):(r=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,r.appendChild(s),c=c._reactRootContainer,c!=null||r.onclick!==null||(r.onclick=cu));else if(h!==4&&(h===27&&Hs(s.type)&&(c=s.stateNode,r=null),s=s.child,s!==null))for(of(s,r,c),s=s.sibling;s!==null;)of(s,r,c),s=s.sibling}function Zc(s,r,c){var h=s.tag;if(h===5||h===6)s=s.stateNode,r?c.insertBefore(s,r):c.appendChild(s);else if(h!==4&&(h===27&&Hs(s.type)&&(c=s.stateNode),s=s.child,s!==null))for(Zc(s,r,c),s=s.sibling;s!==null;)Zc(s,r,c),s=s.sibling}function My(s){var r=s.stateNode,c=s.memoizedProps;try{for(var h=s.type,m=r.attributes;m.length;)r.removeAttributeNode(m[0]);un(r,h,c),r[yt]=s,r[_t]=c}catch(v){lt(s,s.return,v)}}var is=!1,kt=!1,lf=!1,ky=typeof WeakSet=="function"?WeakSet:Set,Zt=null;function vE(s,r){if(s=s.containerInfo,kf=pu,s=$p(s),ah(s)){if("selectionStart"in s)var c={start:s.selectionStart,end:s.selectionEnd};else e:{c=(c=s.ownerDocument)&&c.defaultView||window;var h=c.getSelection&&c.getSelection();if(h&&h.rangeCount!==0){c=h.anchorNode;var m=h.anchorOffset,v=h.focusNode;h=h.focusOffset;try{c.nodeType,v.nodeType}catch{c=null;break e}var E=0,R=-1,N=-1,V=0,J=0,te=s,Y=null;t:for(;;){for(var W;te!==c||m!==0&&te.nodeType!==3||(R=E+m),te!==v||h!==0&&te.nodeType!==3||(N=E+h),te.nodeType===3&&(E+=te.nodeValue.length),(W=te.firstChild)!==null;)Y=te,te=W;for(;;){if(te===s)break t;if(Y===c&&++V===m&&(R=E),Y===v&&++J===h&&(N=E),(W=te.nextSibling)!==null)break;te=Y,Y=te.parentNode}te=W}c=R===-1||N===-1?null:{start:R,end:N}}else c=null}c=c||{start:0,end:0}}else c=null;for(Nf={focusedElem:s,selectionRange:c},pu=!1,Zt=r;Zt!==null;)if(r=Zt,s=r.child,(r.subtreeFlags&1024)!==0&&s!==null)s.return=r,Zt=s;else for(;Zt!==null;){switch(r=Zt,v=r.alternate,s=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&v!==null){s=void 0,c=r,m=v.memoizedProps,v=v.memoizedState,h=c.stateNode;try{var Ae=xa(c.type,m,c.elementType===c.type);s=h.getSnapshotBeforeUpdate(Ae,v),h.__reactInternalSnapshotBeforeUpdate=s}catch(Ee){lt(c,c.return,Ee)}}break;case 3:if((s&1024)!==0){if(s=r.stateNode.containerInfo,c=s.nodeType,c===9)Pf(s);else if(c===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Pf(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=r.sibling,s!==null){s.return=r.return,Zt=s;break}Zt=r.return}}function Ny(s,r,c){var h=c.flags;switch(c.tag){case 0:case 11:case 15:js(s,c),h&4&&zo(5,c);break;case 1:if(js(s,c),h&4)if(s=c.stateNode,r===null)try{s.componentDidMount()}catch(E){lt(c,c.return,E)}else{var m=xa(c.type,r.memoizedProps);r=r.memoizedState;try{s.componentDidUpdate(m,r,s.__reactInternalSnapshotBeforeUpdate)}catch(E){lt(c,c.return,E)}}h&64&&Oy(c),h&512&&Fo(c,c.return);break;case 3:if(js(s,c),h&64&&(s=c.updateQueue,s!==null)){if(r=null,c.child!==null)switch(c.child.tag){case 27:case 5:r=c.child.stateNode;break;case 1:r=c.child.stateNode}try{gv(s,r)}catch(E){lt(c,c.return,E)}}break;case 27:r===null&&h&4&&My(c);case 26:case 5:js(s,c),r===null&&h&4&&Ry(c),h&512&&Fo(c,c.return);break;case 12:js(s,c);break;case 13:js(s,c),h&4&&Py(s,c),h&64&&(s=c.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(c=TE.bind(null,c),VE(s,c))));break;case 22:if(h=c.memoizedState!==null||is,!h){r=r!==null&&r.memoizedState!==null||kt,m=is;var v=kt;is=h,(kt=r)&&!v?Ls(s,c,(c.subtreeFlags&8772)!==0):js(s,c),is=m,kt=v}break;case 30:break;default:js(s,c)}}function jy(s){var r=s.alternate;r!==null&&(s.alternate=null,jy(r)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(r=s.stateNode,r!==null&&Ud(r)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var St=null,Rn=!1;function ss(s,r,c){for(c=c.child;c!==null;)Ly(s,r,c),c=c.sibling}function Ly(s,r,c){if(xe&&typeof xe.onCommitFiberUnmount=="function")try{xe.onCommitFiberUnmount(ve,c)}catch{}switch(c.tag){case 26:kt||Di(c,r),ss(s,r,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:kt||Di(c,r);var h=St,m=Rn;Hs(c.type)&&(St=c.stateNode,Rn=!1),ss(s,r,c),Wo(c.stateNode),St=h,Rn=m;break;case 5:kt||Di(c,r);case 6:if(h=St,m=Rn,St=null,ss(s,r,c),St=h,Rn=m,St!==null)if(Rn)try{(St.nodeType===9?St.body:St.nodeName==="HTML"?St.ownerDocument.body:St).removeChild(c.stateNode)}catch(v){lt(c,r,v)}else try{St.removeChild(c.stateNode)}catch(v){lt(c,r,v)}break;case 18:St!==null&&(Rn?(s=St,x_(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,c.stateNode),nl(s)):x_(St,c.stateNode));break;case 4:h=St,m=Rn,St=c.stateNode.containerInfo,Rn=!0,ss(s,r,c),St=h,Rn=m;break;case 0:case 11:case 14:case 15:kt||Ns(2,c,r),kt||Ns(4,c,r),ss(s,r,c);break;case 1:kt||(Di(c,r),h=c.stateNode,typeof h.componentWillUnmount=="function"&&Ay(c,r,h)),ss(s,r,c);break;case 21:ss(s,r,c);break;case 22:kt=(h=kt)||c.memoizedState!==null,ss(s,r,c),kt=h;break;default:ss(s,r,c)}}function Py(s,r){if(r.memoizedState===null&&(s=r.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{nl(s)}catch(c){lt(r,r.return,c)}}function yE(s){switch(s.tag){case 13:case 19:var r=s.stateNode;return r===null&&(r=s.stateNode=new ky),r;case 22:return s=s.stateNode,r=s._retryCache,r===null&&(r=s._retryCache=new ky),r;default:throw Error(i(435,s.tag))}}function cf(s,r){var c=yE(s);r.forEach(function(h){var m=OE.bind(null,s,h);c.has(h)||(c.add(h),h.then(m,m))})}function Fn(s,r){var c=r.deletions;if(c!==null)for(var h=0;h<c.length;h++){var m=c[h],v=s,E=r,R=E;e:for(;R!==null;){switch(R.tag){case 27:if(Hs(R.type)){St=R.stateNode,Rn=!1;break e}break;case 5:St=R.stateNode,Rn=!1;break e;case 3:case 4:St=R.stateNode.containerInfo,Rn=!0;break e}R=R.return}if(St===null)throw Error(i(160));Ly(v,E,m),St=null,Rn=!1,v=m.alternate,v!==null&&(v.return=null),m.return=null}if(r.subtreeFlags&13878)for(r=r.child;r!==null;)Iy(r,s),r=r.sibling}var di=null;function Iy(s,r){var c=s.alternate,h=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Fn(r,s),Un(s),h&4&&(Ns(3,s,s.return),zo(3,s),Ns(5,s,s.return));break;case 1:Fn(r,s),Un(s),h&512&&(kt||c===null||Di(c,c.return)),h&64&&is&&(s=s.updateQueue,s!==null&&(h=s.callbacks,h!==null&&(c=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=c===null?h:c.concat(h))));break;case 26:var m=di;if(Fn(r,s),Un(s),h&512&&(kt||c===null||Di(c,c.return)),h&4){var v=c!==null?c.memoizedState:null;if(h=s.memoizedState,c===null)if(h===null)if(s.stateNode===null){e:{h=s.type,c=s.memoizedProps,m=m.ownerDocument||m;t:switch(h){case"title":v=m.getElementsByTagName("title")[0],(!v||v[qi]||v[yt]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=m.createElement(h),m.head.insertBefore(v,m.querySelector("head > title"))),un(v,h,c),v[yt]=s,Xt(v),h=v;break e;case"link":var E=M_("link","href",m).get(h+(c.href||""));if(E){for(var R=0;R<E.length;R++)if(v=E[R],v.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&v.getAttribute("rel")===(c.rel==null?null:c.rel)&&v.getAttribute("title")===(c.title==null?null:c.title)&&v.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){E.splice(R,1);break t}}v=m.createElement(h),un(v,h,c),m.head.appendChild(v);break;case"meta":if(E=M_("meta","content",m).get(h+(c.content||""))){for(R=0;R<E.length;R++)if(v=E[R],v.getAttribute("content")===(c.content==null?null:""+c.content)&&v.getAttribute("name")===(c.name==null?null:c.name)&&v.getAttribute("property")===(c.property==null?null:c.property)&&v.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&v.getAttribute("charset")===(c.charSet==null?null:c.charSet)){E.splice(R,1);break t}}v=m.createElement(h),un(v,h,c),m.head.appendChild(v);break;default:throw Error(i(468,h))}v[yt]=s,Xt(v),h=v}s.stateNode=h}else k_(m,s.type,s.stateNode);else s.stateNode=D_(m,h,s.memoizedProps);else v!==h?(v===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):v.count--,h===null?k_(m,s.type,s.stateNode):D_(m,h,s.memoizedProps)):h===null&&s.stateNode!==null&&af(s,s.memoizedProps,c.memoizedProps)}break;case 27:Fn(r,s),Un(s),h&512&&(kt||c===null||Di(c,c.return)),c!==null&&h&4&&af(s,s.memoizedProps,c.memoizedProps);break;case 5:if(Fn(r,s),Un(s),h&512&&(kt||c===null||Di(c,c.return)),s.flags&32){m=s.stateNode;try{Qa(m,"")}catch(W){lt(s,s.return,W)}}h&4&&s.stateNode!=null&&(m=s.memoizedProps,af(s,m,c!==null?c.memoizedProps:m)),h&1024&&(lf=!0);break;case 6:if(Fn(r,s),Un(s),h&4){if(s.stateNode===null)throw Error(i(162));h=s.memoizedProps,c=s.stateNode;try{c.nodeValue=h}catch(W){lt(s,s.return,W)}}break;case 3:if(fu=null,m=di,di=du(r.containerInfo),Fn(r,s),di=m,Un(s),h&4&&c!==null&&c.memoizedState.isDehydrated)try{nl(r.containerInfo)}catch(W){lt(s,s.return,W)}lf&&(lf=!1,zy(s));break;case 4:h=di,di=du(s.stateNode.containerInfo),Fn(r,s),Un(s),di=h;break;case 12:Fn(r,s),Un(s);break;case 13:Fn(r,s),Un(s),s.child.flags&8192&&s.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(mf=ae()),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,cf(s,h)));break;case 22:m=s.memoizedState!==null;var N=c!==null&&c.memoizedState!==null,V=is,J=kt;if(is=V||m,kt=J||N,Fn(r,s),kt=J,is=V,Un(s),h&8192)e:for(r=s.stateNode,r._visibility=m?r._visibility&-2:r._visibility|1,m&&(c===null||N||is||kt||Ca(s)),c=null,r=s;;){if(r.tag===5||r.tag===26){if(c===null){N=c=r;try{if(v=N.stateNode,m)E=v.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{R=N.stateNode;var te=N.memoizedProps.style,Y=te!=null&&te.hasOwnProperty("display")?te.display:null;R.style.display=Y==null||typeof Y=="boolean"?"":(""+Y).trim()}}catch(W){lt(N,N.return,W)}}}else if(r.tag===6){if(c===null){N=r;try{N.stateNode.nodeValue=m?"":N.memoizedProps}catch(W){lt(N,N.return,W)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===s)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;c===r&&(c=null),r=r.return}c===r&&(c=null),r.sibling.return=r.return,r=r.sibling}h&4&&(h=s.updateQueue,h!==null&&(c=h.retryQueue,c!==null&&(h.retryQueue=null,cf(s,c))));break;case 19:Fn(r,s),Un(s),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,cf(s,h)));break;case 30:break;case 21:break;default:Fn(r,s),Un(s)}}function Un(s){var r=s.flags;if(r&2){try{for(var c,h=s.return;h!==null;){if(Dy(h)){c=h;break}h=h.return}if(c==null)throw Error(i(160));switch(c.tag){case 27:var m=c.stateNode,v=rf(s);Zc(s,v,m);break;case 5:var E=c.stateNode;c.flags&32&&(Qa(E,""),c.flags&=-33);var R=rf(s);Zc(s,R,E);break;case 3:case 4:var N=c.stateNode.containerInfo,V=rf(s);of(s,V,N);break;default:throw Error(i(161))}}catch(J){lt(s,s.return,J)}s.flags&=-3}r&4096&&(s.flags&=-4097)}function zy(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var r=s;zy(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),s=s.sibling}}function js(s,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)Ny(s,r.alternate,r),r=r.sibling}function Ca(s){for(s=s.child;s!==null;){var r=s;switch(r.tag){case 0:case 11:case 14:case 15:Ns(4,r,r.return),Ca(r);break;case 1:Di(r,r.return);var c=r.stateNode;typeof c.componentWillUnmount=="function"&&Ay(r,r.return,c),Ca(r);break;case 27:Wo(r.stateNode);case 26:case 5:Di(r,r.return),Ca(r);break;case 22:r.memoizedState===null&&Ca(r);break;case 30:Ca(r);break;default:Ca(r)}s=s.sibling}}function Ls(s,r,c){for(c=c&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var h=r.alternate,m=s,v=r,E=v.flags;switch(v.tag){case 0:case 11:case 15:Ls(m,v,c),zo(4,v);break;case 1:if(Ls(m,v,c),h=v,m=h.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(V){lt(h,h.return,V)}if(h=v,m=h.updateQueue,m!==null){var R=h.stateNode;try{var N=m.shared.hiddenCallbacks;if(N!==null)for(m.shared.hiddenCallbacks=null,m=0;m<N.length;m++)fv(N[m],R)}catch(V){lt(h,h.return,V)}}c&&E&64&&Oy(v),Fo(v,v.return);break;case 27:My(v);case 26:case 5:Ls(m,v,c),c&&h===null&&E&4&&Ry(v),Fo(v,v.return);break;case 12:Ls(m,v,c);break;case 13:Ls(m,v,c),c&&E&4&&Py(m,v);break;case 22:v.memoizedState===null&&Ls(m,v,c),Fo(v,v.return);break;case 30:break;default:Ls(m,v,c)}r=r.sibling}}function uf(s,r){var c=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),s=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(s=r.memoizedState.cachePool.pool),s!==c&&(s!=null&&s.refCount++,c!=null&&Co(c))}function df(s,r){s=null,r.alternate!==null&&(s=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==s&&(r.refCount++,s!=null&&Co(s))}function Mi(s,r,c,h){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Fy(s,r,c,h),r=r.sibling}function Fy(s,r,c,h){var m=r.flags;switch(r.tag){case 0:case 11:case 15:Mi(s,r,c,h),m&2048&&zo(9,r);break;case 1:Mi(s,r,c,h);break;case 3:Mi(s,r,c,h),m&2048&&(s=null,r.alternate!==null&&(s=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==s&&(r.refCount++,s!=null&&Co(s)));break;case 12:if(m&2048){Mi(s,r,c,h),s=r.stateNode;try{var v=r.memoizedProps,E=v.id,R=v.onPostCommit;typeof R=="function"&&R(E,r.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(N){lt(r,r.return,N)}}else Mi(s,r,c,h);break;case 13:Mi(s,r,c,h);break;case 23:break;case 22:v=r.stateNode,E=r.alternate,r.memoizedState!==null?v._visibility&2?Mi(s,r,c,h):Uo(s,r):v._visibility&2?Mi(s,r,c,h):(v._visibility|=2,pr(s,r,c,h,(r.subtreeFlags&10256)!==0)),m&2048&&uf(E,r);break;case 24:Mi(s,r,c,h),m&2048&&df(r.alternate,r);break;default:Mi(s,r,c,h)}}function pr(s,r,c,h,m){for(m=m&&(r.subtreeFlags&10256)!==0,r=r.child;r!==null;){var v=s,E=r,R=c,N=h,V=E.flags;switch(E.tag){case 0:case 11:case 15:pr(v,E,R,N,m),zo(8,E);break;case 23:break;case 22:var J=E.stateNode;E.memoizedState!==null?J._visibility&2?pr(v,E,R,N,m):Uo(v,E):(J._visibility|=2,pr(v,E,R,N,m)),m&&V&2048&&uf(E.alternate,E);break;case 24:pr(v,E,R,N,m),m&&V&2048&&df(E.alternate,E);break;default:pr(v,E,R,N,m)}r=r.sibling}}function Uo(s,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var c=s,h=r,m=h.flags;switch(h.tag){case 22:Uo(c,h),m&2048&&uf(h.alternate,h);break;case 24:Uo(c,h),m&2048&&df(h.alternate,h);break;default:Uo(c,h)}r=r.sibling}}var Ho=8192;function vr(s){if(s.subtreeFlags&Ho)for(s=s.child;s!==null;)Uy(s),s=s.sibling}function Uy(s){switch(s.tag){case 26:vr(s),s.flags&Ho&&s.memoizedState!==null&&iT(di,s.memoizedState,s.memoizedProps);break;case 5:vr(s);break;case 3:case 4:var r=di;di=du(s.stateNode.containerInfo),vr(s),di=r;break;case 22:s.memoizedState===null&&(r=s.alternate,r!==null&&r.memoizedState!==null?(r=Ho,Ho=16777216,vr(s),Ho=r):vr(s));break;default:vr(s)}}function Hy(s){var r=s.alternate;if(r!==null&&(s=r.child,s!==null)){r.child=null;do r=s.sibling,s.sibling=null,s=r;while(s!==null)}}function Bo(s){var r=s.deletions;if((s.flags&16)!==0){if(r!==null)for(var c=0;c<r.length;c++){var h=r[c];Zt=h,$y(h,s)}Hy(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)By(s),s=s.sibling}function By(s){switch(s.tag){case 0:case 11:case 15:Bo(s),s.flags&2048&&Ns(9,s,s.return);break;case 3:Bo(s);break;case 12:Bo(s);break;case 22:var r=s.stateNode;s.memoizedState!==null&&r._visibility&2&&(s.return===null||s.return.tag!==13)?(r._visibility&=-3,Jc(s)):Bo(s);break;default:Bo(s)}}function Jc(s){var r=s.deletions;if((s.flags&16)!==0){if(r!==null)for(var c=0;c<r.length;c++){var h=r[c];Zt=h,$y(h,s)}Hy(s)}for(s=s.child;s!==null;){switch(r=s,r.tag){case 0:case 11:case 15:Ns(8,r,r.return),Jc(r);break;case 22:c=r.stateNode,c._visibility&2&&(c._visibility&=-3,Jc(r));break;default:Jc(r)}s=s.sibling}}function $y(s,r){for(;Zt!==null;){var c=Zt;switch(c.tag){case 0:case 11:case 15:Ns(8,c,r);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var h=c.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:Co(c.memoizedState.cache)}if(h=c.child,h!==null)h.return=c,Zt=h;else e:for(c=s;Zt!==null;){h=Zt;var m=h.sibling,v=h.return;if(jy(h),h===c){Zt=null;break e}if(m!==null){m.return=v,Zt=m;break e}Zt=v}}}var _E={getCacheForType:function(s){var r=gn(Ht),c=r.data.get(s);return c===void 0&&(c=s(),r.data.set(s,c)),c}},bE=typeof WeakMap=="function"?WeakMap:Map,Ze=0,ft=null,Ue=null,Ge=0,Je=0,Hn=null,Ps=!1,yr=!1,hf=!1,as=0,Rt=0,Is=0,Ea=0,ff=0,Jn=0,_r=0,$o=null,Dn=null,gf=!1,mf=0,eu=1/0,tu=null,zs=null,cn=0,Fs=null,br=null,Sr=0,pf=0,vf=null,Vy=null,Vo=0,yf=null;function Bn(){if((Ze&2)!==0&&Ge!==0)return Ge&-Ge;if(I.T!==null){var s=lr;return s!==0?s:Ef()}return Pn()}function qy(){Jn===0&&(Jn=(Ge&536870912)===0||Qe?dc():536870912);var s=Zn.current;return s!==null&&(s.flags|=32),Jn}function $n(s,r,c){(s===ft&&(Je===2||Je===9)||s.cancelPendingCommit!==null)&&(wr(s,0),Us(s,Ge,Jn,!1)),Ot(s,c),((Ze&2)===0||s!==ft)&&(s===ft&&((Ze&2)===0&&(Ea|=c),Rt===4&&Us(s,Ge,Jn,!1)),ki(s))}function Gy(s,r,c){if((Ze&6)!==0)throw Error(i(327));var h=!c&&(r&124)===0&&(r&s.expiredLanes)===0||$i(s,r),m=h?xE(s,r):Sf(s,r,!0),v=h;do{if(m===0){yr&&!h&&Us(s,r,0,!1);break}else{if(c=s.current.alternate,v&&!SE(c)){m=Sf(s,r,!1),v=!1;continue}if(m===2){if(v=r,s.errorRecoveryDisabledLanes&v)var E=0;else E=s.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){r=E;e:{var R=s;m=$o;var N=R.current.memoizedState.isDehydrated;if(N&&(wr(R,E).flags|=256),E=Sf(R,E,!1),E!==2){if(hf&&!N){R.errorRecoveryDisabledLanes|=v,Ea|=v,m=4;break e}v=Dn,Dn=m,v!==null&&(Dn===null?Dn=v:Dn.push.apply(Dn,v))}m=E}if(v=!1,m!==2)continue}}if(m===1){wr(s,0),Us(s,r,0,!0);break}e:{switch(h=s,v=m,v){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:Us(h,r,Jn,!Ps);break e;case 2:Dn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(m=mf+300-ae(),10<m)){if(Us(h,r,Jn,!Ps),Ti(h,0,!0)!==0)break e;h.timeoutHandle=S_(Yy.bind(null,h,c,Dn,tu,gf,r,Jn,Ea,_r,Ps,v,2,-0,0),m);break e}Yy(h,c,Dn,tu,gf,r,Jn,Ea,_r,Ps,v,0,-0,0)}}break}while(!0);ki(s)}function Yy(s,r,c,h,m,v,E,R,N,V,J,te,Y,W){if(s.timeoutHandle=-1,te=r.subtreeFlags,(te&8192||(te&16785408)===16785408)&&(Qo={stylesheets:null,count:0,unsuspend:nT},Uy(r),te=sT(),te!==null)){s.cancelPendingCommit=te(e_.bind(null,s,r,v,c,h,m,E,R,N,J,1,Y,W)),Us(s,v,E,!V);return}e_(s,r,v,c,h,m,E,R,N)}function SE(s){for(var r=s;;){var c=r.tag;if((c===0||c===11||c===15)&&r.flags&16384&&(c=r.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var h=0;h<c.length;h++){var m=c[h],v=m.getSnapshot;m=m.value;try{if(!In(v(),m))return!1}catch{return!1}}if(c=r.child,r.subtreeFlags&16384&&c!==null)c.return=r,r=c;else{if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Us(s,r,c,h){r&=~ff,r&=~Ea,s.suspendedLanes|=r,s.pingedLanes&=~r,h&&(s.warmLanes|=r),h=s.expirationTimes;for(var m=r;0<m;){var v=31-je(m),E=1<<v;h[v]=-1,m&=~E}c!==0&&dn(s,c,r)}function nu(){return(Ze&6)===0?(qo(0),!1):!0}function _f(){if(Ue!==null){if(Je===0)var s=Ue.return;else s=Ue,Qi=_a=null,Lh(s),gr=null,Lo=0,s=Ue;for(;s!==null;)Ty(s.alternate,s),s=s.return;Ue=null}}function wr(s,r){var c=s.timeoutHandle;c!==-1&&(s.timeoutHandle=-1,FE(c)),c=s.cancelPendingCommit,c!==null&&(s.cancelPendingCommit=null,c()),_f(),ft=s,Ue=c=Wi(s.current,null),Ge=r,Je=0,Hn=null,Ps=!1,yr=$i(s,r),hf=!1,_r=Jn=ff=Ea=Is=Rt=0,Dn=$o=null,gf=!1,(r&8)!==0&&(r|=r&32);var h=s.entangledLanes;if(h!==0)for(s=s.entanglements,h&=r;0<h;){var m=31-je(h),v=1<<m;r|=s[m],h&=~v}return as=r,Cc(),c}function Wy(s,r){ze=null,I.H=$c,r===To||r===Nc?(r=dv(),Je=3):r===lv?(r=dv(),Je=4):Je=r===hy?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Hn=r,Ue===null&&(Rt=1,Wc(s,Wn(r,s.current)))}function Ky(){var s=I.H;return I.H=$c,s===null?$c:s}function Xy(){var s=I.A;return I.A=_E,s}function bf(){Rt=4,Ps||(Ge&4194048)!==Ge&&Zn.current!==null||(yr=!0),(Is&134217727)===0&&(Ea&134217727)===0||ft===null||Us(ft,Ge,Jn,!1)}function Sf(s,r,c){var h=Ze;Ze|=2;var m=Ky(),v=Xy();(ft!==s||Ge!==r)&&(tu=null,wr(s,r)),r=!1;var E=Rt;e:do try{if(Je!==0&&Ue!==null){var R=Ue,N=Hn;switch(Je){case 8:_f(),E=6;break e;case 3:case 2:case 9:case 6:Zn.current===null&&(r=!0);var V=Je;if(Je=0,Hn=null,xr(s,R,N,V),c&&yr){E=0;break e}break;default:V=Je,Je=0,Hn=null,xr(s,R,N,V)}}wE(),E=Rt;break}catch(J){Wy(s,J)}while(!0);return r&&s.shellSuspendCounter++,Qi=_a=null,Ze=h,I.H=m,I.A=v,Ue===null&&(ft=null,Ge=0,Cc()),E}function wE(){for(;Ue!==null;)Qy(Ue)}function xE(s,r){var c=Ze;Ze|=2;var h=Ky(),m=Xy();ft!==s||Ge!==r?(tu=null,eu=ae()+500,wr(s,r)):yr=$i(s,r);e:do try{if(Je!==0&&Ue!==null){r=Ue;var v=Hn;t:switch(Je){case 1:Je=0,Hn=null,xr(s,r,v,1);break;case 2:case 9:if(cv(v)){Je=0,Hn=null,Zy(r);break}r=function(){Je!==2&&Je!==9||ft!==s||(Je=7),ki(s)},v.then(r,r);break e;case 3:Je=7;break e;case 4:Je=5;break e;case 7:cv(v)?(Je=0,Hn=null,Zy(r)):(Je=0,Hn=null,xr(s,r,v,7));break;case 5:var E=null;switch(Ue.tag){case 26:E=Ue.memoizedState;case 5:case 27:var R=Ue;if(!E||N_(E)){Je=0,Hn=null;var N=R.sibling;if(N!==null)Ue=N;else{var V=R.return;V!==null?(Ue=V,iu(V)):Ue=null}break t}}Je=0,Hn=null,xr(s,r,v,5);break;case 6:Je=0,Hn=null,xr(s,r,v,6);break;case 8:_f(),Rt=6;break e;default:throw Error(i(462))}}CE();break}catch(J){Wy(s,J)}while(!0);return Qi=_a=null,I.H=h,I.A=m,Ze=c,Ue!==null?0:(ft=null,Ge=0,Cc(),Rt)}function CE(){for(;Ue!==null&&!ie();)Qy(Ue)}function Qy(s){var r=Cy(s.alternate,s,as);s.memoizedProps=s.pendingProps,r===null?iu(s):Ue=r}function Zy(s){var r=s,c=r.alternate;switch(r.tag){case 15:case 0:r=yy(c,r,r.pendingProps,r.type,void 0,Ge);break;case 11:r=yy(c,r,r.pendingProps,r.type.render,r.ref,Ge);break;case 5:Lh(r);default:Ty(c,r),r=Ue=Jp(r,as),r=Cy(c,r,as)}s.memoizedProps=s.pendingProps,r===null?iu(s):Ue=r}function xr(s,r,c,h){Qi=_a=null,Lh(r),gr=null,Lo=0;var m=r.return;try{if(fE(s,m,r,c,Ge)){Rt=1,Wc(s,Wn(c,s.current)),Ue=null;return}}catch(v){if(m!==null)throw Ue=m,v;Rt=1,Wc(s,Wn(c,s.current)),Ue=null;return}r.flags&32768?(Qe||h===1?s=!0:yr||(Ge&536870912)!==0?s=!1:(Ps=s=!0,(h===2||h===9||h===3||h===6)&&(h=Zn.current,h!==null&&h.tag===13&&(h.flags|=16384))),Jy(r,s)):iu(r)}function iu(s){var r=s;do{if((r.flags&32768)!==0){Jy(r,Ps);return}s=r.return;var c=mE(r.alternate,r,as);if(c!==null){Ue=c;return}if(r=r.sibling,r!==null){Ue=r;return}Ue=r=s}while(r!==null);Rt===0&&(Rt=5)}function Jy(s,r){do{var c=pE(s.alternate,s);if(c!==null){c.flags&=32767,Ue=c;return}if(c=s.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!r&&(s=s.sibling,s!==null)){Ue=s;return}Ue=s=c}while(s!==null);Rt=6,Ue=null}function e_(s,r,c,h,m,v,E,R,N){s.cancelPendingCommit=null;do su();while(cn!==0);if((Ze&6)!==0)throw Error(i(327));if(r!==null){if(r===s.current)throw Error(i(177));if(v=r.lanes|r.childLanes,v|=uh,bn(s,c,v,E,R,N),s===ft&&(Ue=ft=null,Ge=0),br=r,Fs=s,Sr=c,pf=v,vf=m,Vy=h,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,AE(F,function(){return a_(),null})):(s.callbackNode=null,s.callbackPriority=0),h=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||h){h=I.T,I.T=null,m=K.p,K.p=2,E=Ze,Ze|=4;try{vE(s,r,c)}finally{Ze=E,K.p=m,I.T=h}}cn=1,t_(),n_(),i_()}}function t_(){if(cn===1){cn=0;var s=Fs,r=br,c=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||c){c=I.T,I.T=null;var h=K.p;K.p=2;var m=Ze;Ze|=4;try{Iy(r,s);var v=Nf,E=$p(s.containerInfo),R=v.focusedElem,N=v.selectionRange;if(E!==R&&R&&R.ownerDocument&&Bp(R.ownerDocument.documentElement,R)){if(N!==null&&ah(R)){var V=N.start,J=N.end;if(J===void 0&&(J=V),"selectionStart"in R)R.selectionStart=V,R.selectionEnd=Math.min(J,R.value.length);else{var te=R.ownerDocument||document,Y=te&&te.defaultView||window;if(Y.getSelection){var W=Y.getSelection(),Ae=R.textContent.length,Ee=Math.min(N.start,Ae),at=N.end===void 0?Ee:Math.min(N.end,Ae);!W.extend&&Ee>at&&(E=at,at=Ee,Ee=E);var z=Hp(R,Ee),P=Hp(R,at);if(z&&P&&(W.rangeCount!==1||W.anchorNode!==z.node||W.anchorOffset!==z.offset||W.focusNode!==P.node||W.focusOffset!==P.offset)){var $=te.createRange();$.setStart(z.node,z.offset),W.removeAllRanges(),Ee>at?(W.addRange($),W.extend(P.node,P.offset)):($.setEnd(P.node,P.offset),W.addRange($))}}}}for(te=[],W=R;W=W.parentNode;)W.nodeType===1&&te.push({element:W,left:W.scrollLeft,top:W.scrollTop});for(typeof R.focus=="function"&&R.focus(),R=0;R<te.length;R++){var ee=te[R];ee.element.scrollLeft=ee.left,ee.element.scrollTop=ee.top}}pu=!!kf,Nf=kf=null}finally{Ze=m,K.p=h,I.T=c}}s.current=r,cn=2}}function n_(){if(cn===2){cn=0;var s=Fs,r=br,c=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||c){c=I.T,I.T=null;var h=K.p;K.p=2;var m=Ze;Ze|=4;try{Ny(s,r.alternate,r)}finally{Ze=m,K.p=h,I.T=c}}cn=3}}function i_(){if(cn===4||cn===3){cn=0,ce();var s=Fs,r=br,c=Sr,h=Vy;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?cn=5:(cn=0,br=Fs=null,s_(s,s.pendingLanes));var m=s.pendingLanes;if(m===0&&(zs=null),on(c),r=r.stateNode,xe&&typeof xe.onCommitFiberRoot=="function")try{xe.onCommitFiberRoot(ve,r,void 0,(r.current.flags&128)===128)}catch{}if(h!==null){r=I.T,m=K.p,K.p=2,I.T=null;try{for(var v=s.onRecoverableError,E=0;E<h.length;E++){var R=h[E];v(R.value,{componentStack:R.stack})}}finally{I.T=r,K.p=m}}(Sr&3)!==0&&su(),ki(s),m=s.pendingLanes,(c&4194090)!==0&&(m&42)!==0?s===yf?Vo++:(Vo=0,yf=s):Vo=0,qo(0)}}function s_(s,r){(s.pooledCacheLanes&=r)===0&&(r=s.pooledCache,r!=null&&(s.pooledCache=null,Co(r)))}function su(s){return t_(),n_(),i_(),a_()}function a_(){if(cn!==5)return!1;var s=Fs,r=pf;pf=0;var c=on(Sr),h=I.T,m=K.p;try{K.p=32>c?32:c,I.T=null,c=vf,vf=null;var v=Fs,E=Sr;if(cn=0,br=Fs=null,Sr=0,(Ze&6)!==0)throw Error(i(331));var R=Ze;if(Ze|=4,By(v.current),Fy(v,v.current,E,c),Ze=R,qo(0,!1),xe&&typeof xe.onPostCommitFiberRoot=="function")try{xe.onPostCommitFiberRoot(ve,v)}catch{}return!0}finally{K.p=m,I.T=h,s_(s,r)}}function r_(s,r,c){r=Wn(c,r),r=Kh(s.stateNode,r,2),s=Rs(s,r,2),s!==null&&(Ot(s,2),ki(s))}function lt(s,r,c){if(s.tag===3)r_(s,s,c);else for(;r!==null;){if(r.tag===3){r_(r,s,c);break}else if(r.tag===1){var h=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(zs===null||!zs.has(h))){s=Wn(c,s),c=uy(2),h=Rs(r,c,2),h!==null&&(dy(c,h,r,s),Ot(h,2),ki(h));break}}r=r.return}}function wf(s,r,c){var h=s.pingCache;if(h===null){h=s.pingCache=new bE;var m=new Set;h.set(r,m)}else m=h.get(r),m===void 0&&(m=new Set,h.set(r,m));m.has(c)||(hf=!0,m.add(c),s=EE.bind(null,s,r,c),r.then(s,s))}function EE(s,r,c){var h=s.pingCache;h!==null&&h.delete(r),s.pingedLanes|=s.suspendedLanes&c,s.warmLanes&=~c,ft===s&&(Ge&c)===c&&(Rt===4||Rt===3&&(Ge&62914560)===Ge&&300>ae()-mf?(Ze&2)===0&&wr(s,0):ff|=c,_r===Ge&&(_r=0)),ki(s)}function o_(s,r){r===0&&(r=hc()),s=sr(s,r),s!==null&&(Ot(s,r),ki(s))}function TE(s){var r=s.memoizedState,c=0;r!==null&&(c=r.retryLane),o_(s,c)}function OE(s,r){var c=0;switch(s.tag){case 13:var h=s.stateNode,m=s.memoizedState;m!==null&&(c=m.retryLane);break;case 19:h=s.stateNode;break;case 22:h=s.stateNode._retryCache;break;default:throw Error(i(314))}h!==null&&h.delete(r),o_(s,c)}function AE(s,r){return jn(s,r)}var au=null,Cr=null,xf=!1,ru=!1,Cf=!1,Ta=0;function ki(s){s!==Cr&&s.next===null&&(Cr===null?au=Cr=s:Cr=Cr.next=s),ru=!0,xf||(xf=!0,DE())}function qo(s,r){if(!Cf&&ru){Cf=!0;do for(var c=!1,h=au;h!==null;){if(s!==0){var m=h.pendingLanes;if(m===0)var v=0;else{var E=h.suspendedLanes,R=h.pingedLanes;v=(1<<31-je(42|s)+1)-1,v&=m&~(E&~R),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(c=!0,d_(h,v))}else v=Ge,v=Ti(h,h===ft?v:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(v&3)===0||$i(h,v)||(c=!0,d_(h,v));h=h.next}while(c);Cf=!1}}function RE(){l_()}function l_(){ru=xf=!1;var s=0;Ta!==0&&(zE()&&(s=Ta),Ta=0);for(var r=ae(),c=null,h=au;h!==null;){var m=h.next,v=c_(h,r);v===0?(h.next=null,c===null?au=m:c.next=m,m===null&&(Cr=c)):(c=h,(s!==0||(v&3)!==0)&&(ru=!0)),h=m}qo(s)}function c_(s,r){for(var c=s.suspendedLanes,h=s.pingedLanes,m=s.expirationTimes,v=s.pendingLanes&-62914561;0<v;){var E=31-je(v),R=1<<E,N=m[E];N===-1?((R&c)===0||(R&h)!==0)&&(m[E]=la(R,r)):N<=r&&(s.expiredLanes|=R),v&=~R}if(r=ft,c=Ge,c=Ti(s,s===r?c:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),h=s.callbackNode,c===0||s===r&&(Je===2||Je===9)||s.cancelPendingCommit!==null)return h!==null&&h!==null&&Kt(h),s.callbackNode=null,s.callbackPriority=0;if((c&3)===0||$i(s,c)){if(r=c&-c,r===s.callbackPriority)return r;switch(h!==null&&Kt(h),on(c)){case 2:case 8:c=k;break;case 32:c=F;break;case 268435456:c=fe;break;default:c=F}return h=u_.bind(null,s),c=jn(c,h),s.callbackPriority=r,s.callbackNode=c,r}return h!==null&&h!==null&&Kt(h),s.callbackPriority=2,s.callbackNode=null,2}function u_(s,r){if(cn!==0&&cn!==5)return s.callbackNode=null,s.callbackPriority=0,null;var c=s.callbackNode;if(su()&&s.callbackNode!==c)return null;var h=Ge;return h=Ti(s,s===ft?h:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),h===0?null:(Gy(s,h,r),c_(s,ae()),s.callbackNode!=null&&s.callbackNode===c?u_.bind(null,s):null)}function d_(s,r){if(su())return null;Gy(s,r,!0)}function DE(){UE(function(){(Ze&6)!==0?jn(Ve,RE):l_()})}function Ef(){return Ta===0&&(Ta=dc()),Ta}function h_(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:vc(""+s)}function f_(s,r){var c=r.ownerDocument.createElement("input");return c.name=r.name,c.value=r.value,s.id&&c.setAttribute("form",s.id),r.parentNode.insertBefore(c,r),s=new FormData(s),c.parentNode.removeChild(c),s}function ME(s,r,c,h,m){if(r==="submit"&&c&&c.stateNode===m){var v=h_((m[_t]||null).action),E=h.submitter;E&&(r=(r=E[_t]||null)?h_(r.formAction):E.getAttribute("formAction"),r!==null&&(v=r,E=null));var R=new Sc("action","action",null,h,m);s.push({event:R,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(Ta!==0){var N=E?f_(m,E):new FormData(m);Vh(c,{pending:!0,data:N,method:m.method,action:v},null,N)}}else typeof v=="function"&&(R.preventDefault(),N=E?f_(m,E):new FormData(m),Vh(c,{pending:!0,data:N,method:m.method,action:v},v,N))},currentTarget:m}]})}}for(var Tf=0;Tf<ch.length;Tf++){var Of=ch[Tf],kE=Of.toLowerCase(),NE=Of[0].toUpperCase()+Of.slice(1);ui(kE,"on"+NE)}ui(Gp,"onAnimationEnd"),ui(Yp,"onAnimationIteration"),ui(Wp,"onAnimationStart"),ui("dblclick","onDoubleClick"),ui("focusin","onFocus"),ui("focusout","onBlur"),ui(XC,"onTransitionRun"),ui(QC,"onTransitionStart"),ui(ZC,"onTransitionCancel"),ui(Kp,"onTransitionEnd"),Wa("onMouseEnter",["mouseout","mouseover"]),Wa("onMouseLeave",["mouseout","mouseover"]),Wa("onPointerEnter",["pointerout","pointerover"]),Wa("onPointerLeave",["pointerout","pointerover"]),ua("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ua("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ua("onBeforeInput",["compositionend","keypress","textInput","paste"]),ua("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ua("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ua("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Go="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jE=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Go));function g_(s,r){r=(r&4)!==0;for(var c=0;c<s.length;c++){var h=s[c],m=h.event;h=h.listeners;e:{var v=void 0;if(r)for(var E=h.length-1;0<=E;E--){var R=h[E],N=R.instance,V=R.currentTarget;if(R=R.listener,N!==v&&m.isPropagationStopped())break e;v=R,m.currentTarget=V;try{v(m)}catch(J){Yc(J)}m.currentTarget=null,v=N}else for(E=0;E<h.length;E++){if(R=h[E],N=R.instance,V=R.currentTarget,R=R.listener,N!==v&&m.isPropagationStopped())break e;v=R,m.currentTarget=V;try{v(m)}catch(J){Yc(J)}m.currentTarget=null,v=N}}}}function He(s,r){var c=r[Vi];c===void 0&&(c=r[Vi]=new Set);var h=s+"__bubble";c.has(h)||(m_(r,s,2,!1),c.add(h))}function Af(s,r,c){var h=0;r&&(h|=4),m_(c,s,h,r)}var ou="_reactListening"+Math.random().toString(36).slice(2);function Rf(s){if(!s[ou]){s[ou]=!0,lp.forEach(function(c){c!=="selectionchange"&&(jE.has(c)||Af(c,!1,s),Af(c,!0,s))});var r=s.nodeType===9?s:s.ownerDocument;r===null||r[ou]||(r[ou]=!0,Af("selectionchange",!1,r))}}function m_(s,r,c,h){switch(F_(r)){case 2:var m=oT;break;case 8:m=lT;break;default:m=$f}c=m.bind(null,r,c,s),m=void 0,!Xd||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(m=!0),h?m!==void 0?s.addEventListener(r,c,{capture:!0,passive:m}):s.addEventListener(r,c,!0):m!==void 0?s.addEventListener(r,c,{passive:m}):s.addEventListener(r,c,!1)}function Df(s,r,c,h,m){var v=h;if((r&1)===0&&(r&2)===0&&h!==null)e:for(;;){if(h===null)return;var E=h.tag;if(E===3||E===4){var R=h.stateNode.containerInfo;if(R===m)break;if(E===4)for(E=h.return;E!==null;){var N=E.tag;if((N===3||N===4)&&E.stateNode.containerInfo===m)return;E=E.return}for(;R!==null;){if(E=qa(R),E===null)return;if(N=E.tag,N===5||N===6||N===26||N===27){h=v=E;continue e}R=R.parentNode}}h=h.return}wp(function(){var V=v,J=Wd(c),te=[];e:{var Y=Xp.get(s);if(Y!==void 0){var W=Sc,Ae=s;switch(s){case"keypress":if(_c(c)===0)break e;case"keydown":case"keyup":W=AC;break;case"focusin":Ae="focus",W=eh;break;case"focusout":Ae="blur",W=eh;break;case"beforeblur":case"afterblur":W=eh;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":W=Ep;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":W=pC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":W=MC;break;case Gp:case Yp:case Wp:W=_C;break;case Kp:W=NC;break;case"scroll":case"scrollend":W=gC;break;case"wheel":W=LC;break;case"copy":case"cut":case"paste":W=SC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":W=Op;break;case"toggle":case"beforetoggle":W=IC}var Ee=(r&4)!==0,at=!Ee&&(s==="scroll"||s==="scrollend"),z=Ee?Y!==null?Y+"Capture":null:Y;Ee=[];for(var P=V,$;P!==null;){var ee=P;if($=ee.stateNode,ee=ee.tag,ee!==5&&ee!==26&&ee!==27||$===null||z===null||(ee=uo(P,z),ee!=null&&Ee.push(Yo(P,ee,$))),at)break;P=P.return}0<Ee.length&&(Y=new W(Y,Ae,null,c,J),te.push({event:Y,listeners:Ee}))}}if((r&7)===0){e:{if(Y=s==="mouseover"||s==="pointerover",W=s==="mouseout"||s==="pointerout",Y&&c!==Yd&&(Ae=c.relatedTarget||c.fromElement)&&(qa(Ae)||Ae[fn]))break e;if((W||Y)&&(Y=J.window===J?J:(Y=J.ownerDocument)?Y.defaultView||Y.parentWindow:window,W?(Ae=c.relatedTarget||c.toElement,W=V,Ae=Ae?qa(Ae):null,Ae!==null&&(at=o(Ae),Ee=Ae.tag,Ae!==at||Ee!==5&&Ee!==27&&Ee!==6)&&(Ae=null)):(W=null,Ae=V),W!==Ae)){if(Ee=Ep,ee="onMouseLeave",z="onMouseEnter",P="mouse",(s==="pointerout"||s==="pointerover")&&(Ee=Op,ee="onPointerLeave",z="onPointerEnter",P="pointer"),at=W==null?Y:co(W),$=Ae==null?Y:co(Ae),Y=new Ee(ee,P+"leave",W,c,J),Y.target=at,Y.relatedTarget=$,ee=null,qa(J)===V&&(Ee=new Ee(z,P+"enter",Ae,c,J),Ee.target=$,Ee.relatedTarget=at,ee=Ee),at=ee,W&&Ae)t:{for(Ee=W,z=Ae,P=0,$=Ee;$;$=Er($))P++;for($=0,ee=z;ee;ee=Er(ee))$++;for(;0<P-$;)Ee=Er(Ee),P--;for(;0<$-P;)z=Er(z),$--;for(;P--;){if(Ee===z||z!==null&&Ee===z.alternate)break t;Ee=Er(Ee),z=Er(z)}Ee=null}else Ee=null;W!==null&&p_(te,Y,W,Ee,!1),Ae!==null&&at!==null&&p_(te,at,Ae,Ee,!0)}}e:{if(Y=V?co(V):window,W=Y.nodeName&&Y.nodeName.toLowerCase(),W==="select"||W==="input"&&Y.type==="file")var ye=Lp;else if(Np(Y))if(Pp)ye=YC;else{ye=qC;var Fe=VC}else W=Y.nodeName,!W||W.toLowerCase()!=="input"||Y.type!=="checkbox"&&Y.type!=="radio"?V&&Gd(V.elementType)&&(ye=Lp):ye=GC;if(ye&&(ye=ye(s,V))){jp(te,ye,c,J);break e}Fe&&Fe(s,Y,V),s==="focusout"&&V&&Y.type==="number"&&V.memoizedProps.value!=null&&qd(Y,"number",Y.value)}switch(Fe=V?co(V):window,s){case"focusin":(Np(Fe)||Fe.contentEditable==="true")&&(tr=Fe,rh=V,_o=null);break;case"focusout":_o=rh=tr=null;break;case"mousedown":oh=!0;break;case"contextmenu":case"mouseup":case"dragend":oh=!1,Vp(te,c,J);break;case"selectionchange":if(KC)break;case"keydown":case"keyup":Vp(te,c,J)}var be;if(nh)e:{switch(s){case"compositionstart":var Oe="onCompositionStart";break e;case"compositionend":Oe="onCompositionEnd";break e;case"compositionupdate":Oe="onCompositionUpdate";break e}Oe=void 0}else er?Mp(s,c)&&(Oe="onCompositionEnd"):s==="keydown"&&c.keyCode===229&&(Oe="onCompositionStart");Oe&&(Ap&&c.locale!=="ko"&&(er||Oe!=="onCompositionStart"?Oe==="onCompositionEnd"&&er&&(be=xp()):(Es=J,Qd="value"in Es?Es.value:Es.textContent,er=!0)),Fe=lu(V,Oe),0<Fe.length&&(Oe=new Tp(Oe,s,null,c,J),te.push({event:Oe,listeners:Fe}),be?Oe.data=be:(be=kp(c),be!==null&&(Oe.data=be)))),(be=FC?UC(s,c):HC(s,c))&&(Oe=lu(V,"onBeforeInput"),0<Oe.length&&(Fe=new Tp("onBeforeInput","beforeinput",null,c,J),te.push({event:Fe,listeners:Oe}),Fe.data=be)),ME(te,s,V,c,J)}g_(te,r)})}function Yo(s,r,c){return{instance:s,listener:r,currentTarget:c}}function lu(s,r){for(var c=r+"Capture",h=[];s!==null;){var m=s,v=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||v===null||(m=uo(s,c),m!=null&&h.unshift(Yo(s,m,v)),m=uo(s,r),m!=null&&h.push(Yo(s,m,v))),s.tag===3)return h;s=s.return}return[]}function Er(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function p_(s,r,c,h,m){for(var v=r._reactName,E=[];c!==null&&c!==h;){var R=c,N=R.alternate,V=R.stateNode;if(R=R.tag,N!==null&&N===h)break;R!==5&&R!==26&&R!==27||V===null||(N=V,m?(V=uo(c,v),V!=null&&E.unshift(Yo(c,V,N))):m||(V=uo(c,v),V!=null&&E.push(Yo(c,V,N)))),c=c.return}E.length!==0&&s.push({event:r,listeners:E})}var LE=/\r\n?/g,PE=/\u0000|\uFFFD/g;function v_(s){return(typeof s=="string"?s:""+s).replace(LE,`
`).replace(PE,"")}function y_(s,r){return r=v_(r),v_(s)===r}function cu(){}function st(s,r,c,h,m,v){switch(c){case"children":typeof h=="string"?r==="body"||r==="textarea"&&h===""||Qa(s,h):(typeof h=="number"||typeof h=="bigint")&&r!=="body"&&Qa(s,""+h);break;case"className":gc(s,"class",h);break;case"tabIndex":gc(s,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":gc(s,c,h);break;case"style":bp(s,h,v);break;case"data":if(r!=="object"){gc(s,"data",h);break}case"src":case"href":if(h===""&&(r!=="a"||c!=="href")){s.removeAttribute(c);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){s.removeAttribute(c);break}h=vc(""+h),s.setAttribute(c,h);break;case"action":case"formAction":if(typeof h=="function"){s.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(c==="formAction"?(r!=="input"&&st(s,r,"name",m.name,m,null),st(s,r,"formEncType",m.formEncType,m,null),st(s,r,"formMethod",m.formMethod,m,null),st(s,r,"formTarget",m.formTarget,m,null)):(st(s,r,"encType",m.encType,m,null),st(s,r,"method",m.method,m,null),st(s,r,"target",m.target,m,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){s.removeAttribute(c);break}h=vc(""+h),s.setAttribute(c,h);break;case"onClick":h!=null&&(s.onclick=cu);break;case"onScroll":h!=null&&He("scroll",s);break;case"onScrollEnd":h!=null&&He("scrollend",s);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(i(61));if(c=h.__html,c!=null){if(m.children!=null)throw Error(i(60));s.innerHTML=c}}break;case"multiple":s.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":s.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){s.removeAttribute("xlink:href");break}c=vc(""+h),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(c,""+h):s.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(c,""):s.removeAttribute(c);break;case"capture":case"download":h===!0?s.setAttribute(c,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(c,h):s.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?s.setAttribute(c,h):s.removeAttribute(c);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?s.removeAttribute(c):s.setAttribute(c,h);break;case"popover":He("beforetoggle",s),He("toggle",s),fc(s,"popover",h);break;case"xlinkActuate":Gi(s,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":Gi(s,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":Gi(s,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":Gi(s,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":Gi(s,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":Gi(s,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":Gi(s,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":Gi(s,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":Gi(s,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":fc(s,"is",h);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=hC.get(c)||c,fc(s,c,h))}}function Mf(s,r,c,h,m,v){switch(c){case"style":bp(s,h,v);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(i(61));if(c=h.__html,c!=null){if(m.children!=null)throw Error(i(60));s.innerHTML=c}}break;case"children":typeof h=="string"?Qa(s,h):(typeof h=="number"||typeof h=="bigint")&&Qa(s,""+h);break;case"onScroll":h!=null&&He("scroll",s);break;case"onScrollEnd":h!=null&&He("scrollend",s);break;case"onClick":h!=null&&(s.onclick=cu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!cp.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(m=c.endsWith("Capture"),r=c.slice(2,m?c.length-7:void 0),v=s[_t]||null,v=v!=null?v[c]:null,typeof v=="function"&&s.removeEventListener(r,v,m),typeof h=="function")){typeof v!="function"&&v!==null&&(c in s?s[c]=null:s.hasAttribute(c)&&s.removeAttribute(c)),s.addEventListener(r,h,m);break e}c in s?s[c]=h:h===!0?s.setAttribute(c,""):fc(s,c,h)}}}function un(s,r,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":He("error",s),He("load",s);var h=!1,m=!1,v;for(v in c)if(c.hasOwnProperty(v)){var E=c[v];if(E!=null)switch(v){case"src":h=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:st(s,r,v,E,c,null)}}m&&st(s,r,"srcSet",c.srcSet,c,null),h&&st(s,r,"src",c.src,c,null);return;case"input":He("invalid",s);var R=v=E=m=null,N=null,V=null;for(h in c)if(c.hasOwnProperty(h)){var J=c[h];if(J!=null)switch(h){case"name":m=J;break;case"type":E=J;break;case"checked":N=J;break;case"defaultChecked":V=J;break;case"value":v=J;break;case"defaultValue":R=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(i(137,r));break;default:st(s,r,h,J,c,null)}}pp(s,v,R,N,V,E,m,!1),mc(s);return;case"select":He("invalid",s),h=E=v=null;for(m in c)if(c.hasOwnProperty(m)&&(R=c[m],R!=null))switch(m){case"value":v=R;break;case"defaultValue":E=R;break;case"multiple":h=R;default:st(s,r,m,R,c,null)}r=v,c=E,s.multiple=!!h,r!=null?Xa(s,!!h,r,!1):c!=null&&Xa(s,!!h,c,!0);return;case"textarea":He("invalid",s),v=m=h=null;for(E in c)if(c.hasOwnProperty(E)&&(R=c[E],R!=null))switch(E){case"value":h=R;break;case"defaultValue":m=R;break;case"children":v=R;break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(i(91));break;default:st(s,r,E,R,c,null)}yp(s,h,m,v),mc(s);return;case"option":for(N in c)if(c.hasOwnProperty(N)&&(h=c[N],h!=null))switch(N){case"selected":s.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:st(s,r,N,h,c,null)}return;case"dialog":He("beforetoggle",s),He("toggle",s),He("cancel",s),He("close",s);break;case"iframe":case"object":He("load",s);break;case"video":case"audio":for(h=0;h<Go.length;h++)He(Go[h],s);break;case"image":He("error",s),He("load",s);break;case"details":He("toggle",s);break;case"embed":case"source":case"link":He("error",s),He("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(V in c)if(c.hasOwnProperty(V)&&(h=c[V],h!=null))switch(V){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:st(s,r,V,h,c,null)}return;default:if(Gd(r)){for(J in c)c.hasOwnProperty(J)&&(h=c[J],h!==void 0&&Mf(s,r,J,h,c,void 0));return}}for(R in c)c.hasOwnProperty(R)&&(h=c[R],h!=null&&st(s,r,R,h,c,null))}function IE(s,r,c,h){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,v=null,E=null,R=null,N=null,V=null,J=null;for(W in c){var te=c[W];if(c.hasOwnProperty(W)&&te!=null)switch(W){case"checked":break;case"value":break;case"defaultValue":N=te;default:h.hasOwnProperty(W)||st(s,r,W,null,h,te)}}for(var Y in h){var W=h[Y];if(te=c[Y],h.hasOwnProperty(Y)&&(W!=null||te!=null))switch(Y){case"type":v=W;break;case"name":m=W;break;case"checked":V=W;break;case"defaultChecked":J=W;break;case"value":E=W;break;case"defaultValue":R=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(i(137,r));break;default:W!==te&&st(s,r,Y,W,h,te)}}Vd(s,E,R,N,V,J,v,m);return;case"select":W=E=R=Y=null;for(v in c)if(N=c[v],c.hasOwnProperty(v)&&N!=null)switch(v){case"value":break;case"multiple":W=N;default:h.hasOwnProperty(v)||st(s,r,v,null,h,N)}for(m in h)if(v=h[m],N=c[m],h.hasOwnProperty(m)&&(v!=null||N!=null))switch(m){case"value":Y=v;break;case"defaultValue":R=v;break;case"multiple":E=v;default:v!==N&&st(s,r,m,v,h,N)}r=R,c=E,h=W,Y!=null?Xa(s,!!c,Y,!1):!!h!=!!c&&(r!=null?Xa(s,!!c,r,!0):Xa(s,!!c,c?[]:"",!1));return;case"textarea":W=Y=null;for(R in c)if(m=c[R],c.hasOwnProperty(R)&&m!=null&&!h.hasOwnProperty(R))switch(R){case"value":break;case"children":break;default:st(s,r,R,null,h,m)}for(E in h)if(m=h[E],v=c[E],h.hasOwnProperty(E)&&(m!=null||v!=null))switch(E){case"value":Y=m;break;case"defaultValue":W=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(i(91));break;default:m!==v&&st(s,r,E,m,h,v)}vp(s,Y,W);return;case"option":for(var Ae in c)if(Y=c[Ae],c.hasOwnProperty(Ae)&&Y!=null&&!h.hasOwnProperty(Ae))switch(Ae){case"selected":s.selected=!1;break;default:st(s,r,Ae,null,h,Y)}for(N in h)if(Y=h[N],W=c[N],h.hasOwnProperty(N)&&Y!==W&&(Y!=null||W!=null))switch(N){case"selected":s.selected=Y&&typeof Y!="function"&&typeof Y!="symbol";break;default:st(s,r,N,Y,h,W)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ee in c)Y=c[Ee],c.hasOwnProperty(Ee)&&Y!=null&&!h.hasOwnProperty(Ee)&&st(s,r,Ee,null,h,Y);for(V in h)if(Y=h[V],W=c[V],h.hasOwnProperty(V)&&Y!==W&&(Y!=null||W!=null))switch(V){case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(i(137,r));break;default:st(s,r,V,Y,h,W)}return;default:if(Gd(r)){for(var at in c)Y=c[at],c.hasOwnProperty(at)&&Y!==void 0&&!h.hasOwnProperty(at)&&Mf(s,r,at,void 0,h,Y);for(J in h)Y=h[J],W=c[J],!h.hasOwnProperty(J)||Y===W||Y===void 0&&W===void 0||Mf(s,r,J,Y,h,W);return}}for(var z in c)Y=c[z],c.hasOwnProperty(z)&&Y!=null&&!h.hasOwnProperty(z)&&st(s,r,z,null,h,Y);for(te in h)Y=h[te],W=c[te],!h.hasOwnProperty(te)||Y===W||Y==null&&W==null||st(s,r,te,Y,h,W)}var kf=null,Nf=null;function uu(s){return s.nodeType===9?s:s.ownerDocument}function __(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function b_(s,r){if(s===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&r==="foreignObject"?0:s}function jf(s,r){return s==="textarea"||s==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Lf=null;function zE(){var s=window.event;return s&&s.type==="popstate"?s===Lf?!1:(Lf=s,!0):(Lf=null,!1)}var S_=typeof setTimeout=="function"?setTimeout:void 0,FE=typeof clearTimeout=="function"?clearTimeout:void 0,w_=typeof Promise=="function"?Promise:void 0,UE=typeof queueMicrotask=="function"?queueMicrotask:typeof w_<"u"?function(s){return w_.resolve(null).then(s).catch(HE)}:S_;function HE(s){setTimeout(function(){throw s})}function Hs(s){return s==="head"}function x_(s,r){var c=r,h=0,m=0;do{var v=c.nextSibling;if(s.removeChild(c),v&&v.nodeType===8)if(c=v.data,c==="/$"){if(0<h&&8>h){c=h;var E=s.ownerDocument;if(c&1&&Wo(E.documentElement),c&2&&Wo(E.body),c&4)for(c=E.head,Wo(c),E=c.firstChild;E;){var R=E.nextSibling,N=E.nodeName;E[qi]||N==="SCRIPT"||N==="STYLE"||N==="LINK"&&E.rel.toLowerCase()==="stylesheet"||c.removeChild(E),E=R}}if(m===0){s.removeChild(v),nl(r);return}m--}else c==="$"||c==="$?"||c==="$!"?m++:h=c.charCodeAt(0)-48;else h=0;c=v}while(c);nl(r)}function Pf(s){var r=s.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var c=r;switch(r=r.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":Pf(c),Ud(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}s.removeChild(c)}}function BE(s,r,c,h){for(;s.nodeType===1;){var m=c;if(s.nodeName.toLowerCase()!==r.toLowerCase()){if(!h&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(h){if(!s[qi])switch(r){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(v=s.getAttribute("rel"),v==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(v!==m.rel||s.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||s.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||s.getAttribute("title")!==(m.title==null?null:m.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(v=s.getAttribute("src"),(v!==(m.src==null?null:m.src)||s.getAttribute("type")!==(m.type==null?null:m.type)||s.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&v&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(r==="input"&&s.type==="hidden"){var v=m.name==null?null:""+m.name;if(m.type==="hidden"&&s.getAttribute("name")===v)return s}else return s;if(s=hi(s.nextSibling),s===null)break}return null}function $E(s,r,c){if(r==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!c||(s=hi(s.nextSibling),s===null))return null;return s}function If(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState==="complete"}function VE(s,r){var c=s.ownerDocument;if(s.data!=="$?"||c.readyState==="complete")r();else{var h=function(){r(),c.removeEventListener("DOMContentLoaded",h)};c.addEventListener("DOMContentLoaded",h),s._reactRetry=h}}function hi(s){for(;s!=null;s=s.nextSibling){var r=s.nodeType;if(r===1||r===3)break;if(r===8){if(r=s.data,r==="$"||r==="$!"||r==="$?"||r==="F!"||r==="F")break;if(r==="/$")return null}}return s}var zf=null;function C_(s){s=s.previousSibling;for(var r=0;s;){if(s.nodeType===8){var c=s.data;if(c==="$"||c==="$!"||c==="$?"){if(r===0)return s;r--}else c==="/$"&&r++}s=s.previousSibling}return null}function E_(s,r,c){switch(r=uu(c),s){case"html":if(s=r.documentElement,!s)throw Error(i(452));return s;case"head":if(s=r.head,!s)throw Error(i(453));return s;case"body":if(s=r.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function Wo(s){for(var r=s.attributes;r.length;)s.removeAttributeNode(r[0]);Ud(s)}var ei=new Map,T_=new Set;function du(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var rs=K.d;K.d={f:qE,r:GE,D:YE,C:WE,L:KE,m:XE,X:ZE,S:QE,M:JE};function qE(){var s=rs.f(),r=nu();return s||r}function GE(s){var r=Ga(s);r!==null&&r.tag===5&&r.type==="form"?Gv(r):rs.r(s)}var Tr=typeof document>"u"?null:document;function O_(s,r,c){var h=Tr;if(h&&typeof r=="string"&&r){var m=Yn(r);m='link[rel="'+s+'"][href="'+m+'"]',typeof c=="string"&&(m+='[crossorigin="'+c+'"]'),T_.has(m)||(T_.add(m),s={rel:s,crossOrigin:c,href:r},h.querySelector(m)===null&&(r=h.createElement("link"),un(r,"link",s),Xt(r),h.head.appendChild(r)))}}function YE(s){rs.D(s),O_("dns-prefetch",s,null)}function WE(s,r){rs.C(s,r),O_("preconnect",s,r)}function KE(s,r,c){rs.L(s,r,c);var h=Tr;if(h&&s&&r){var m='link[rel="preload"][as="'+Yn(r)+'"]';r==="image"&&c&&c.imageSrcSet?(m+='[imagesrcset="'+Yn(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(m+='[imagesizes="'+Yn(c.imageSizes)+'"]')):m+='[href="'+Yn(s)+'"]';var v=m;switch(r){case"style":v=Or(s);break;case"script":v=Ar(s)}ei.has(v)||(s=g({rel:"preload",href:r==="image"&&c&&c.imageSrcSet?void 0:s,as:r},c),ei.set(v,s),h.querySelector(m)!==null||r==="style"&&h.querySelector(Ko(v))||r==="script"&&h.querySelector(Xo(v))||(r=h.createElement("link"),un(r,"link",s),Xt(r),h.head.appendChild(r)))}}function XE(s,r){rs.m(s,r);var c=Tr;if(c&&s){var h=r&&typeof r.as=="string"?r.as:"script",m='link[rel="modulepreload"][as="'+Yn(h)+'"][href="'+Yn(s)+'"]',v=m;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=Ar(s)}if(!ei.has(v)&&(s=g({rel:"modulepreload",href:s},r),ei.set(v,s),c.querySelector(m)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Xo(v)))return}h=c.createElement("link"),un(h,"link",s),Xt(h),c.head.appendChild(h)}}}function QE(s,r,c){rs.S(s,r,c);var h=Tr;if(h&&s){var m=Ya(h).hoistableStyles,v=Or(s);r=r||"default";var E=m.get(v);if(!E){var R={loading:0,preload:null};if(E=h.querySelector(Ko(v)))R.loading=5;else{s=g({rel:"stylesheet",href:s,"data-precedence":r},c),(c=ei.get(v))&&Ff(s,c);var N=E=h.createElement("link");Xt(N),un(N,"link",s),N._p=new Promise(function(V,J){N.onload=V,N.onerror=J}),N.addEventListener("load",function(){R.loading|=1}),N.addEventListener("error",function(){R.loading|=2}),R.loading|=4,hu(E,r,h)}E={type:"stylesheet",instance:E,count:1,state:R},m.set(v,E)}}}function ZE(s,r){rs.X(s,r);var c=Tr;if(c&&s){var h=Ya(c).hoistableScripts,m=Ar(s),v=h.get(m);v||(v=c.querySelector(Xo(m)),v||(s=g({src:s,async:!0},r),(r=ei.get(m))&&Uf(s,r),v=c.createElement("script"),Xt(v),un(v,"link",s),c.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},h.set(m,v))}}function JE(s,r){rs.M(s,r);var c=Tr;if(c&&s){var h=Ya(c).hoistableScripts,m=Ar(s),v=h.get(m);v||(v=c.querySelector(Xo(m)),v||(s=g({src:s,async:!0,type:"module"},r),(r=ei.get(m))&&Uf(s,r),v=c.createElement("script"),Xt(v),un(v,"link",s),c.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},h.set(m,v))}}function A_(s,r,c,h){var m=(m=pe.current)?du(m):null;if(!m)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(r=Or(c.href),c=Ya(m).hoistableStyles,h=c.get(r),h||(h={type:"style",instance:null,count:0,state:null},c.set(r,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){s=Or(c.href);var v=Ya(m).hoistableStyles,E=v.get(s);if(E||(m=m.ownerDocument||m,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(s,E),(v=m.querySelector(Ko(s)))&&!v._p&&(E.instance=v,E.state.loading=5),ei.has(s)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},ei.set(s,c),v||eT(m,s,c,E.state))),r&&h===null)throw Error(i(528,""));return E}if(r&&h!==null)throw Error(i(529,""));return null;case"script":return r=c.async,c=c.src,typeof c=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Ar(c),c=Ya(m).hoistableScripts,h=c.get(r),h||(h={type:"script",instance:null,count:0,state:null},c.set(r,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function Or(s){return'href="'+Yn(s)+'"'}function Ko(s){return'link[rel="stylesheet"]['+s+"]"}function R_(s){return g({},s,{"data-precedence":s.precedence,precedence:null})}function eT(s,r,c,h){s.querySelector('link[rel="preload"][as="style"]['+r+"]")?h.loading=1:(r=s.createElement("link"),h.preload=r,r.addEventListener("load",function(){return h.loading|=1}),r.addEventListener("error",function(){return h.loading|=2}),un(r,"link",c),Xt(r),s.head.appendChild(r))}function Ar(s){return'[src="'+Yn(s)+'"]'}function Xo(s){return"script[async]"+s}function D_(s,r,c){if(r.count++,r.instance===null)switch(r.type){case"style":var h=s.querySelector('style[data-href~="'+Yn(c.href)+'"]');if(h)return r.instance=h,Xt(h),h;var m=g({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return h=(s.ownerDocument||s).createElement("style"),Xt(h),un(h,"style",m),hu(h,c.precedence,s),r.instance=h;case"stylesheet":m=Or(c.href);var v=s.querySelector(Ko(m));if(v)return r.state.loading|=4,r.instance=v,Xt(v),v;h=R_(c),(m=ei.get(m))&&Ff(h,m),v=(s.ownerDocument||s).createElement("link"),Xt(v);var E=v;return E._p=new Promise(function(R,N){E.onload=R,E.onerror=N}),un(v,"link",h),r.state.loading|=4,hu(v,c.precedence,s),r.instance=v;case"script":return v=Ar(c.src),(m=s.querySelector(Xo(v)))?(r.instance=m,Xt(m),m):(h=c,(m=ei.get(v))&&(h=g({},c),Uf(h,m)),s=s.ownerDocument||s,m=s.createElement("script"),Xt(m),un(m,"link",h),s.head.appendChild(m),r.instance=m);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(h=r.instance,r.state.loading|=4,hu(h,c.precedence,s));return r.instance}function hu(s,r,c){for(var h=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=h.length?h[h.length-1]:null,v=m,E=0;E<h.length;E++){var R=h[E];if(R.dataset.precedence===r)v=R;else if(v!==m)break}v?v.parentNode.insertBefore(s,v.nextSibling):(r=c.nodeType===9?c.head:c,r.insertBefore(s,r.firstChild))}function Ff(s,r){s.crossOrigin==null&&(s.crossOrigin=r.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=r.referrerPolicy),s.title==null&&(s.title=r.title)}function Uf(s,r){s.crossOrigin==null&&(s.crossOrigin=r.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=r.referrerPolicy),s.integrity==null&&(s.integrity=r.integrity)}var fu=null;function M_(s,r,c){if(fu===null){var h=new Map,m=fu=new Map;m.set(c,h)}else m=fu,h=m.get(c),h||(h=new Map,m.set(c,h));if(h.has(s))return h;for(h.set(s,null),c=c.getElementsByTagName(s),m=0;m<c.length;m++){var v=c[m];if(!(v[qi]||v[yt]||s==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var E=v.getAttribute(r)||"";E=s+E;var R=h.get(E);R?R.push(v):h.set(E,[v])}}return h}function k_(s,r,c){s=s.ownerDocument||s,s.head.insertBefore(c,r==="title"?s.querySelector("head > title"):null)}function tT(s,r,c){if(c===1||r.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return s=r.disabled,typeof r.precedence=="string"&&s==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function N_(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var Qo=null;function nT(){}function iT(s,r,c){if(Qo===null)throw Error(i(475));var h=Qo;if(r.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var m=Or(c.href),v=s.querySelector(Ko(m));if(v){s=v._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(h.count++,h=gu.bind(h),s.then(h,h)),r.state.loading|=4,r.instance=v,Xt(v);return}v=s.ownerDocument||s,c=R_(c),(m=ei.get(m))&&Ff(c,m),v=v.createElement("link"),Xt(v);var E=v;E._p=new Promise(function(R,N){E.onload=R,E.onerror=N}),un(v,"link",c),r.instance=v}h.stylesheets===null&&(h.stylesheets=new Map),h.stylesheets.set(r,s),(s=r.state.preload)&&(r.state.loading&3)===0&&(h.count++,r=gu.bind(h),s.addEventListener("load",r),s.addEventListener("error",r))}}function sT(){if(Qo===null)throw Error(i(475));var s=Qo;return s.stylesheets&&s.count===0&&Hf(s,s.stylesheets),0<s.count?function(r){var c=setTimeout(function(){if(s.stylesheets&&Hf(s,s.stylesheets),s.unsuspend){var h=s.unsuspend;s.unsuspend=null,h()}},6e4);return s.unsuspend=r,function(){s.unsuspend=null,clearTimeout(c)}}:null}function gu(){if(this.count--,this.count===0){if(this.stylesheets)Hf(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var mu=null;function Hf(s,r){s.stylesheets=null,s.unsuspend!==null&&(s.count++,mu=new Map,r.forEach(aT,s),mu=null,gu.call(s))}function aT(s,r){if(!(r.state.loading&4)){var c=mu.get(s);if(c)var h=c.get(null);else{c=new Map,mu.set(s,c);for(var m=s.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<m.length;v++){var E=m[v];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(c.set(E.dataset.precedence,E),h=E)}h&&c.set(null,h)}m=r.instance,E=m.getAttribute("data-precedence"),v=c.get(E)||h,v===h&&c.set(null,m),c.set(E,m),this.count++,h=gu.bind(this),m.addEventListener("load",h),m.addEventListener("error",h),v?v.parentNode.insertBefore(m,v.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(m,s.firstChild)),r.state.loading|=4}}var Zo={$$typeof:O,Provider:null,Consumer:null,_currentValue:le,_currentValue2:le,_threadCount:0};function rT(s,r,c,h,m,v,E,R){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=lo(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=lo(0),this.hiddenUpdates=lo(null),this.identifierPrefix=h,this.onUncaughtError=m,this.onCaughtError=v,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=R,this.incompleteTransitions=new Map}function j_(s,r,c,h,m,v,E,R,N,V,J,te){return s=new rT(s,r,c,E,R,N,V,te),r=1,v===!0&&(r|=24),v=zn(3,null,null,r),s.current=v,v.stateNode=s,r=Sh(),r.refCount++,s.pooledCache=r,r.refCount++,v.memoizedState={element:h,isDehydrated:c,cache:r},Eh(v),s}function L_(s){return s?(s=ar,s):ar}function P_(s,r,c,h,m,v){m=L_(m),h.context===null?h.context=m:h.pendingContext=m,h=As(r),h.payload={element:c},v=v===void 0?null:v,v!==null&&(h.callback=v),c=Rs(s,h,r),c!==null&&($n(c,s,r),Ao(c,s,r))}function I_(s,r){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var c=s.retryLane;s.retryLane=c!==0&&c<r?c:r}}function Bf(s,r){I_(s,r),(s=s.alternate)&&I_(s,r)}function z_(s){if(s.tag===13){var r=sr(s,67108864);r!==null&&$n(r,s,67108864),Bf(s,67108864)}}var pu=!0;function oT(s,r,c,h){var m=I.T;I.T=null;var v=K.p;try{K.p=2,$f(s,r,c,h)}finally{K.p=v,I.T=m}}function lT(s,r,c,h){var m=I.T;I.T=null;var v=K.p;try{K.p=8,$f(s,r,c,h)}finally{K.p=v,I.T=m}}function $f(s,r,c,h){if(pu){var m=Vf(h);if(m===null)Df(s,r,h,vu,c),U_(s,h);else if(uT(m,s,r,c,h))h.stopPropagation();else if(U_(s,h),r&4&&-1<cT.indexOf(s)){for(;m!==null;){var v=Ga(m);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var E=Ln(v.pendingLanes);if(E!==0){var R=v;for(R.pendingLanes|=2,R.entangledLanes|=2;E;){var N=1<<31-je(E);R.entanglements[1]|=N,E&=~N}ki(v),(Ze&6)===0&&(eu=ae()+500,qo(0))}}break;case 13:R=sr(v,2),R!==null&&$n(R,v,2),nu(),Bf(v,2)}if(v=Vf(h),v===null&&Df(s,r,h,vu,c),v===m)break;m=v}m!==null&&h.stopPropagation()}else Df(s,r,h,null,c)}}function Vf(s){return s=Wd(s),qf(s)}var vu=null;function qf(s){if(vu=null,s=qa(s),s!==null){var r=o(s);if(r===null)s=null;else{var c=r.tag;if(c===13){if(s=l(r),s!==null)return s;s=null}else if(c===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;s=null}else r!==s&&(s=null)}}return vu=s,null}function F_(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(we()){case Ve:return 2;case k:return 8;case F:case X:return 32;case fe:return 268435456;default:return 32}default:return 32}}var Gf=!1,Bs=null,$s=null,Vs=null,Jo=new Map,el=new Map,qs=[],cT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function U_(s,r){switch(s){case"focusin":case"focusout":Bs=null;break;case"dragenter":case"dragleave":$s=null;break;case"mouseover":case"mouseout":Vs=null;break;case"pointerover":case"pointerout":Jo.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":el.delete(r.pointerId)}}function tl(s,r,c,h,m,v){return s===null||s.nativeEvent!==v?(s={blockedOn:r,domEventName:c,eventSystemFlags:h,nativeEvent:v,targetContainers:[m]},r!==null&&(r=Ga(r),r!==null&&z_(r)),s):(s.eventSystemFlags|=h,r=s.targetContainers,m!==null&&r.indexOf(m)===-1&&r.push(m),s)}function uT(s,r,c,h,m){switch(r){case"focusin":return Bs=tl(Bs,s,r,c,h,m),!0;case"dragenter":return $s=tl($s,s,r,c,h,m),!0;case"mouseover":return Vs=tl(Vs,s,r,c,h,m),!0;case"pointerover":var v=m.pointerId;return Jo.set(v,tl(Jo.get(v)||null,s,r,c,h,m)),!0;case"gotpointercapture":return v=m.pointerId,el.set(v,tl(el.get(v)||null,s,r,c,h,m)),!0}return!1}function H_(s){var r=qa(s.target);if(r!==null){var c=o(r);if(c!==null){if(r=c.tag,r===13){if(r=l(c),r!==null){s.blockedOn=r,xs(s.priority,function(){if(c.tag===13){var h=Bn();h=hn(h);var m=sr(c,h);m!==null&&$n(m,c,h),Bf(c,h)}});return}}else if(r===3&&c.stateNode.current.memoizedState.isDehydrated){s.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}s.blockedOn=null}function yu(s){if(s.blockedOn!==null)return!1;for(var r=s.targetContainers;0<r.length;){var c=Vf(s.nativeEvent);if(c===null){c=s.nativeEvent;var h=new c.constructor(c.type,c);Yd=h,c.target.dispatchEvent(h),Yd=null}else return r=Ga(c),r!==null&&z_(r),s.blockedOn=c,!1;r.shift()}return!0}function B_(s,r,c){yu(s)&&c.delete(r)}function dT(){Gf=!1,Bs!==null&&yu(Bs)&&(Bs=null),$s!==null&&yu($s)&&($s=null),Vs!==null&&yu(Vs)&&(Vs=null),Jo.forEach(B_),el.forEach(B_)}function _u(s,r){s.blockedOn===r&&(s.blockedOn=null,Gf||(Gf=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,dT)))}var bu=null;function $_(s){bu!==s&&(bu=s,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){bu===s&&(bu=null);for(var r=0;r<s.length;r+=3){var c=s[r],h=s[r+1],m=s[r+2];if(typeof h!="function"){if(qf(h||c)===null)continue;break}var v=Ga(c);v!==null&&(s.splice(r,3),r-=3,Vh(v,{pending:!0,data:m,method:c.method,action:h},h,m))}}))}function nl(s){function r(N){return _u(N,s)}Bs!==null&&_u(Bs,s),$s!==null&&_u($s,s),Vs!==null&&_u(Vs,s),Jo.forEach(r),el.forEach(r);for(var c=0;c<qs.length;c++){var h=qs[c];h.blockedOn===s&&(h.blockedOn=null)}for(;0<qs.length&&(c=qs[0],c.blockedOn===null);)H_(c),c.blockedOn===null&&qs.shift();if(c=(s.ownerDocument||s).$$reactFormReplay,c!=null)for(h=0;h<c.length;h+=3){var m=c[h],v=c[h+1],E=m[_t]||null;if(typeof v=="function")E||$_(c);else if(E){var R=null;if(v&&v.hasAttribute("formAction")){if(m=v,E=v[_t]||null)R=E.formAction;else if(qf(m)!==null)continue}else R=E.action;typeof R=="function"?c[h+1]=R:(c.splice(h,3),h-=3),$_(c)}}}function Yf(s){this._internalRoot=s}Su.prototype.render=Yf.prototype.render=function(s){var r=this._internalRoot;if(r===null)throw Error(i(409));var c=r.current,h=Bn();P_(c,h,s,r,null,null)},Su.prototype.unmount=Yf.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var r=s.containerInfo;P_(s.current,2,null,s,null,null),nu(),r[fn]=null}};function Su(s){this._internalRoot=s}Su.prototype.unstable_scheduleHydration=function(s){if(s){var r=Pn();s={blockedOn:null,target:s,priority:r};for(var c=0;c<qs.length&&r!==0&&r<qs[c].priority;c++);qs.splice(c,0,s),c===0&&H_(s)}};var V_=e.version;if(V_!=="19.1.1")throw Error(i(527,V_,"19.1.1"));K.findDOMNode=function(s){var r=s._reactInternals;if(r===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=d(r),s=s!==null?f(s):null,s=s===null?null:s.stateNode,s};var hT={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:I,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wu.isDisabled&&wu.supportsFiber)try{ve=wu.inject(hT),xe=wu}catch{}}return sl.createRoot=function(s,r){if(!a(s))throw Error(i(299));var c=!1,h="",m=ry,v=oy,E=ly,R=null;return r!=null&&(r.unstable_strictMode===!0&&(c=!0),r.identifierPrefix!==void 0&&(h=r.identifierPrefix),r.onUncaughtError!==void 0&&(m=r.onUncaughtError),r.onCaughtError!==void 0&&(v=r.onCaughtError),r.onRecoverableError!==void 0&&(E=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(R=r.unstable_transitionCallbacks)),r=j_(s,1,!1,null,null,c,h,m,v,E,R,null),s[fn]=r.current,Rf(s),new Yf(r)},sl.hydrateRoot=function(s,r,c){if(!a(s))throw Error(i(299));var h=!1,m="",v=ry,E=oy,R=ly,N=null,V=null;return c!=null&&(c.unstable_strictMode===!0&&(h=!0),c.identifierPrefix!==void 0&&(m=c.identifierPrefix),c.onUncaughtError!==void 0&&(v=c.onUncaughtError),c.onCaughtError!==void 0&&(E=c.onCaughtError),c.onRecoverableError!==void 0&&(R=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(N=c.unstable_transitionCallbacks),c.formState!==void 0&&(V=c.formState)),r=j_(s,1,!0,r,c??null,h,m,v,E,R,N,V),r.context=L_(null),c=r.current,h=Bn(),h=hn(h),m=As(h),m.callback=null,Rs(c,m,h),c=h,r.current.lanes=c,Ot(r,c),ki(r),s[fn]=r.current,Rf(s),new Su(r)},sl.version="19.1.1",sl}var eb;function wT(){if(eb)return Xf.exports;eb=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Xf.exports=ST(),Xf.exports}var xT=wT();const CT=um(xT);/**
 * react-router v7.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var tb="popstate";function ET(t={}){function e(i,a){let{pathname:o,search:l,hash:u}=i.location;return kg("",{pathname:o,search:l,hash:u},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(i,a){return typeof a=="string"?a:Ul(a)}return OT(e,n,null,t)}function Ct(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function bi(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function TT(){return Math.random().toString(36).substring(2,10)}function nb(t,e){return{usr:t.state,key:t.key,idx:e}}function kg(t,e,n=null,i){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?eo(e):e,state:n,key:e&&e.key||i||TT()}}function Ul({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function eo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substring(i),t=t.substring(0,i)),t&&(e.pathname=t)}return e}function OT(t,e,n,i={}){let{window:a=document.defaultView,v5Compat:o=!1}=i,l=a.history,u="POP",d=null,f=g();f==null&&(f=0,l.replaceState({...l.state,idx:f},""));function g(){return(l.state||{idx:null}).idx}function p(){u="POP";let x=g(),C=x==null?null:x-f;f=x,d&&d({action:u,location:w.location,delta:C})}function _(x,C){u="PUSH";let T=kg(w.location,x,C);f=g()+1;let O=nb(T,f),M=w.createHref(T);try{l.pushState(O,"",M)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;a.location.assign(M)}o&&d&&d({action:u,location:w.location,delta:1})}function b(x,C){u="REPLACE";let T=kg(w.location,x,C);f=g();let O=nb(T,f),M=w.createHref(T);l.replaceState(O,"",M),o&&d&&d({action:u,location:w.location,delta:0})}function S(x){return AT(x)}let w={get action(){return u},get location(){return t(a,l)},listen(x){if(d)throw new Error("A history only accepts one active listener");return a.addEventListener(tb,p),d=x,()=>{a.removeEventListener(tb,p),d=null}},createHref(x){return e(a,x)},createURL:S,encodeLocation(x){let C=S(x);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:_,replace:b,go(x){return l.go(x)}};return w}function AT(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Ct(n,"No window.location.(origin|href) available to create URL");let i=typeof t=="string"?t:Ul(t);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=n+i),new URL(i,n)}function US(t,e,n="/"){return RT(t,e,n,!1)}function RT(t,e,n,i){let a=typeof e=="string"?eo(e):e,o=ys(a.pathname||"/",n);if(o==null)return null;let l=HS(t);DT(l);let u=null;for(let d=0;u==null&&d<l.length;++d){let f=HT(o);u=FT(l[d],f,i)}return u}function HS(t,e=[],n=[],i="",a=!1){let o=(l,u,d=a,f)=>{let g={relativePath:f===void 0?l.path||"":f,caseSensitive:l.caseSensitive===!0,childrenIndex:u,route:l};if(g.relativePath.startsWith("/")){if(!g.relativePath.startsWith(i)&&d)return;Ct(g.relativePath.startsWith(i),`Absolute route path "${g.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(i.length)}let p=vs([i,g.relativePath]),_=n.concat(g);l.children&&l.children.length>0&&(Ct(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),HS(l.children,e,_,p,d)),!(l.path==null&&!l.index)&&e.push({path:p,score:IT(p,l.index),routesMeta:_})};return t.forEach((l,u)=>{if(l.path===""||!l.path?.includes("?"))o(l,u);else for(let d of BS(l.path))o(l,u,!0,d)}),e}function BS(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,a=n.endsWith("?"),o=n.replace(/\?$/,"");if(i.length===0)return a?[o,""]:[o];let l=BS(i.join("/")),u=[];return u.push(...l.map(d=>d===""?o:[o,d].join("/"))),a&&u.push(...l),u.map(d=>t.startsWith("/")&&d===""?"/":d)}function DT(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:zT(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var MT=/^:[\w-]+$/,kT=3,NT=2,jT=1,LT=10,PT=-2,ib=t=>t==="*";function IT(t,e){let n=t.split("/"),i=n.length;return n.some(ib)&&(i+=PT),e&&(i+=NT),n.filter(a=>!ib(a)).reduce((a,o)=>a+(MT.test(o)?kT:o===""?jT:LT),i)}function zT(t,e){return t.length===e.length&&t.slice(0,-1).every((i,a)=>i===e[a])?t[t.length-1]-e[e.length-1]:0}function FT(t,e,n=!1){let{routesMeta:i}=t,a={},o="/",l=[];for(let u=0;u<i.length;++u){let d=i[u],f=u===i.length-1,g=o==="/"?e:e.slice(o.length)||"/",p=td({path:d.relativePath,caseSensitive:d.caseSensitive,end:f},g),_=d.route;if(!p&&f&&n&&!i[i.length-1].route.index&&(p=td({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},g)),!p)return null;Object.assign(a,p.params),l.push({params:a,pathname:vs([o,p.pathname]),pathnameBase:qT(vs([o,p.pathnameBase])),route:_}),p.pathnameBase!=="/"&&(o=vs([o,p.pathnameBase]))}return l}function td(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=UT(t.path,t.caseSensitive,t.end),a=e.match(n);if(!a)return null;let o=a[0],l=o.replace(/(.)\/+$/,"$1"),u=a.slice(1);return{params:i.reduce((f,{paramName:g,isOptional:p},_)=>{if(g==="*"){let S=u[_]||"";l=o.slice(0,o.length-S.length).replace(/(.)\/+$/,"$1")}const b=u[_];return p&&!b?f[g]=void 0:f[g]=(b||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:l,pattern:t}}function UT(t,e=!1,n=!0){bi(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let i=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,d)=>(i.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(i.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),i]}function HT(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return bi(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function ys(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}function BT(t,e="/"){let{pathname:n,search:i="",hash:a=""}=typeof t=="string"?eo(t):t;return{pathname:n?n.startsWith("/")?n:$T(n,e):e,search:GT(i),hash:YT(a)}}function $T(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function eg(t,e,n,i){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function VT(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function hm(t){let e=VT(t);return e.map((n,i)=>i===e.length-1?n.pathname:n.pathnameBase)}function fm(t,e,n,i=!1){let a;typeof t=="string"?a=eo(t):(a={...t},Ct(!a.pathname||!a.pathname.includes("?"),eg("?","pathname","search",a)),Ct(!a.pathname||!a.pathname.includes("#"),eg("#","pathname","hash",a)),Ct(!a.search||!a.search.includes("#"),eg("#","search","hash",a)));let o=t===""||a.pathname==="",l=o?"/":a.pathname,u;if(l==null)u=n;else{let p=e.length-1;if(!i&&l.startsWith("..")){let _=l.split("/");for(;_[0]==="..";)_.shift(),p-=1;a.pathname=_.join("/")}u=p>=0?e[p]:"/"}let d=BT(a,u),f=l&&l!=="/"&&l.endsWith("/"),g=(o||l===".")&&n.endsWith("/");return!d.pathname.endsWith("/")&&(f||g)&&(d.pathname+="/"),d}var vs=t=>t.join("/").replace(/\/\/+/g,"/"),qT=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),GT=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,YT=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function WT(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var $S=["POST","PUT","PATCH","DELETE"];new Set($S);var KT=["GET",...$S];new Set(KT);var to=A.createContext(null);to.displayName="DataRouter";var xd=A.createContext(null);xd.displayName="DataRouterState";A.createContext(!1);var VS=A.createContext({isTransitioning:!1});VS.displayName="ViewTransition";var XT=A.createContext(new Map);XT.displayName="Fetchers";var QT=A.createContext(null);QT.displayName="Await";var xi=A.createContext(null);xi.displayName="Navigation";var tc=A.createContext(null);tc.displayName="Location";var li=A.createContext({outlet:null,matches:[],isDataRoute:!1});li.displayName="Route";var gm=A.createContext(null);gm.displayName="RouteError";function ZT(t,{relative:e}={}){Ct(no(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=A.useContext(xi),{hash:a,pathname:o,search:l}=nc(t,{relative:e}),u=o;return n!=="/"&&(u=o==="/"?n:vs([n,o])),i.createHref({pathname:u,search:l,hash:a})}function no(){return A.useContext(tc)!=null}function bs(){return Ct(no(),"useLocation() may be used only in the context of a <Router> component."),A.useContext(tc).location}var qS="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function GS(t){A.useContext(xi).static||A.useLayoutEffect(t)}function aa(){let{isDataRoute:t}=A.useContext(li);return t?fO():JT()}function JT(){Ct(no(),"useNavigate() may be used only in the context of a <Router> component.");let t=A.useContext(to),{basename:e,navigator:n}=A.useContext(xi),{matches:i}=A.useContext(li),{pathname:a}=bs(),o=JSON.stringify(hm(i)),l=A.useRef(!1);return GS(()=>{l.current=!0}),A.useCallback((d,f={})=>{if(bi(l.current,qS),!l.current)return;if(typeof d=="number"){n.go(d);return}let g=fm(d,JSON.parse(o),a,f.relative==="path");t==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:vs([e,g.pathname])),(f.replace?n.replace:n.push)(g,f.state,f)},[e,n,o,a,t])}var eO=A.createContext(null);function tO(t){let e=A.useContext(li).outlet;return e&&A.createElement(eO.Provider,{value:t},e)}function Cd(){let{matches:t}=A.useContext(li),e=t[t.length-1];return e?e.params:{}}function nc(t,{relative:e}={}){let{matches:n}=A.useContext(li),{pathname:i}=bs(),a=JSON.stringify(hm(n));return A.useMemo(()=>fm(t,JSON.parse(a),i,e==="path"),[t,a,i,e])}function nO(t,e){return YS(t,e)}function YS(t,e,n,i){Ct(no(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=A.useContext(xi),{matches:o}=A.useContext(li),l=o[o.length-1],u=l?l.params:{},d=l?l.pathname:"/",f=l?l.pathnameBase:"/",g=l&&l.route;{let C=g&&g.path||"";WS(d,!g||C.endsWith("*")||C.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${C}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${C}"> to <Route path="${C==="/"?"*":`${C}/*`}">.`)}let p=bs(),_;if(e){let C=typeof e=="string"?eo(e):e;Ct(f==="/"||C.pathname?.startsWith(f),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${C.pathname}" was given in the \`location\` prop.`),_=C}else _=p;let b=_.pathname||"/",S=b;if(f!=="/"){let C=f.replace(/^\//,"").split("/");S="/"+b.replace(/^\//,"").split("/").slice(C.length).join("/")}let w=US(t,{pathname:S});bi(g||w!=null,`No routes matched location "${_.pathname}${_.search}${_.hash}" `),bi(w==null||w[w.length-1].route.element!==void 0||w[w.length-1].route.Component!==void 0||w[w.length-1].route.lazy!==void 0,`Matched leaf route at location "${_.pathname}${_.search}${_.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let x=oO(w&&w.map(C=>Object.assign({},C,{params:Object.assign({},u,C.params),pathname:vs([f,a.encodeLocation?a.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?f:vs([f,a.encodeLocation?a.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),o,n,i);return e&&x?A.createElement(tc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",..._},navigationType:"POP"}},x):x}function iO(){let t=hO(),e=WT(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i},o={padding:"2px 4px",backgroundColor:i},l=null;return console.error("Error handled by React Router default ErrorBoundary:",t),l=A.createElement(A.Fragment,null,A.createElement("p",null,"💿 Hey developer 👋"),A.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",A.createElement("code",{style:o},"ErrorBoundary")," or"," ",A.createElement("code",{style:o},"errorElement")," prop on your route.")),A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},e),n?A.createElement("pre",{style:a},n):null,l)}var sO=A.createElement(iO,null),aO=class extends A.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?A.createElement(li.Provider,{value:this.props.routeContext},A.createElement(gm.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function rO({routeContext:t,match:e,children:n}){let i=A.useContext(to);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),A.createElement(li.Provider,{value:t},n)}function oO(t,e=[],n=null,i=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,o=n?.errors;if(o!=null){let d=a.findIndex(f=>f.route.id&&o?.[f.route.id]!==void 0);Ct(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),a=a.slice(0,Math.min(a.length,d+1))}let l=!1,u=-1;if(n)for(let d=0;d<a.length;d++){let f=a[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=d),f.route.id){let{loaderData:g,errors:p}=n,_=f.route.loader&&!g.hasOwnProperty(f.route.id)&&(!p||p[f.route.id]===void 0);if(f.route.lazy||_){l=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((d,f,g)=>{let p,_=!1,b=null,S=null;n&&(p=o&&f.route.id?o[f.route.id]:void 0,b=f.route.errorElement||sO,l&&(u<0&&g===0?(WS("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),_=!0,S=null):u===g&&(_=!0,S=f.route.hydrateFallbackElement||null)));let w=e.concat(a.slice(0,g+1)),x=()=>{let C;return p?C=b:_?C=S:f.route.Component?C=A.createElement(f.route.Component,null):f.route.element?C=f.route.element:C=d,A.createElement(rO,{match:f,routeContext:{outlet:d,matches:w,isDataRoute:n!=null},children:C})};return n&&(f.route.ErrorBoundary||f.route.errorElement||g===0)?A.createElement(aO,{location:n.location,revalidation:n.revalidation,component:b,error:p,children:x(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):x()},null)}function mm(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function lO(t){let e=A.useContext(to);return Ct(e,mm(t)),e}function cO(t){let e=A.useContext(xd);return Ct(e,mm(t)),e}function uO(t){let e=A.useContext(li);return Ct(e,mm(t)),e}function pm(t){let e=uO(t),n=e.matches[e.matches.length-1];return Ct(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function dO(){return pm("useRouteId")}function hO(){let t=A.useContext(gm),e=cO("useRouteError"),n=pm("useRouteError");return t!==void 0?t:e.errors?.[n]}function fO(){let{router:t}=lO("useNavigate"),e=pm("useNavigate"),n=A.useRef(!1);return GS(()=>{n.current=!0}),A.useCallback(async(a,o={})=>{bi(n.current,qS),n.current&&(typeof a=="number"?t.navigate(a):await t.navigate(a,{fromRouteId:e,...o}))},[t,e])}var sb={};function WS(t,e,n){!e&&!sb[t]&&(sb[t]=!0,bi(!1,n))}A.memo(gO);function gO({routes:t,future:e,state:n}){return YS(t,void 0,n,e)}function KS({to:t,replace:e,state:n,relative:i}){Ct(no(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=A.useContext(xi);bi(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=A.useContext(li),{pathname:l}=bs(),u=aa(),d=fm(t,hm(o),l,i==="path"),f=JSON.stringify(d);return A.useEffect(()=>{u(JSON.parse(f),{replace:e,state:n,relative:i})},[u,f,i,e,n]),null}function XS(t){return tO(t.context)}function $t(t){Ct(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function mO({basename:t="/",children:e=null,location:n,navigationType:i="POP",navigator:a,static:o=!1}){Ct(!no(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=t.replace(/^\/*/,"/"),u=A.useMemo(()=>({basename:l,navigator:a,static:o,future:{}}),[l,a,o]);typeof n=="string"&&(n=eo(n));let{pathname:d="/",search:f="",hash:g="",state:p=null,key:_="default"}=n,b=A.useMemo(()=>{let S=ys(d,l);return S==null?null:{location:{pathname:S,search:f,hash:g,state:p,key:_},navigationType:i}},[l,d,f,g,p,_,i]);return bi(b!=null,`<Router basename="${l}"> is not able to match the URL "${d}${f}${g}" because it does not start with the basename, so the <Router> won't render anything.`),b==null?null:A.createElement(xi.Provider,{value:u},A.createElement(tc.Provider,{children:e,value:b}))}function pO({children:t,location:e}){return nO(Ng(t),e)}function Ng(t,e=[]){let n=[];return A.Children.forEach(t,(i,a)=>{if(!A.isValidElement(i))return;let o=[...e,a];if(i.type===A.Fragment){n.push.apply(n,Ng(i.props.children,o));return}Ct(i.type===$t,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ct(!i.props.index||!i.props.children,"An index route cannot have child routes.");let l={id:i.props.id||o.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(l.children=Ng(i.props.children,o)),n.push(l)}),n}var Ku="get",Xu="application/x-www-form-urlencoded";function Ed(t){return t!=null&&typeof t.tagName=="string"}function vO(t){return Ed(t)&&t.tagName.toLowerCase()==="button"}function yO(t){return Ed(t)&&t.tagName.toLowerCase()==="form"}function _O(t){return Ed(t)&&t.tagName.toLowerCase()==="input"}function bO(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function SO(t,e){return t.button===0&&(!e||e==="_self")&&!bO(t)}var xu=null;function wO(){if(xu===null)try{new FormData(document.createElement("form"),0),xu=!1}catch{xu=!0}return xu}var xO=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function tg(t){return t!=null&&!xO.has(t)?(bi(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Xu}"`),null):t}function CO(t,e){let n,i,a,o,l;if(yO(t)){let u=t.getAttribute("action");i=u?ys(u,e):null,n=t.getAttribute("method")||Ku,a=tg(t.getAttribute("enctype"))||Xu,o=new FormData(t)}else if(vO(t)||_O(t)&&(t.type==="submit"||t.type==="image")){let u=t.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=t.getAttribute("formaction")||u.getAttribute("action");if(i=d?ys(d,e):null,n=t.getAttribute("formmethod")||u.getAttribute("method")||Ku,a=tg(t.getAttribute("formenctype"))||tg(u.getAttribute("enctype"))||Xu,o=new FormData(u,t),!wO()){let{name:f,type:g,value:p}=t;if(g==="image"){let _=f?`${f}.`:"";o.append(`${_}x`,"0"),o.append(`${_}y`,"0")}else f&&o.append(f,p)}}else{if(Ed(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Ku,i=null,a=Xu,l=t}return o&&a==="text/plain"&&(l=o,o=void 0),{action:i,method:n.toLowerCase(),encType:a,formData:o,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function vm(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function EO(t,e,n){let i=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return i.pathname==="/"?i.pathname=`_root.${n}`:e&&ys(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${n}`,i}async function TO(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function OO(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function AO(t,e,n){let i=await Promise.all(t.map(async a=>{let o=e.routes[a.route.id];if(o){let l=await TO(o,n);return l.links?l.links():[]}return[]}));return kO(i.flat(1).filter(OO).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function ab(t,e,n,i,a,o){let l=(d,f)=>n[f]?d.route.id!==n[f].route.id:!0,u=(d,f)=>n[f].pathname!==d.pathname||n[f].route.path?.endsWith("*")&&n[f].params["*"]!==d.params["*"];return o==="assets"?e.filter((d,f)=>l(d,f)||u(d,f)):o==="data"?e.filter((d,f)=>{let g=i.routes[d.route.id];if(!g||!g.hasLoader)return!1;if(l(d,f)||u(d,f))return!0;if(d.route.shouldRevalidate){let p=d.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function RO(t,e,{includeHydrateFallback:n}={}){return DO(t.map(i=>{let a=e.routes[i.route.id];if(!a)return[];let o=[a.module];return a.clientActionModule&&(o=o.concat(a.clientActionModule)),a.clientLoaderModule&&(o=o.concat(a.clientLoaderModule)),n&&a.hydrateFallbackModule&&(o=o.concat(a.hydrateFallbackModule)),a.imports&&(o=o.concat(a.imports)),o}).flat(1))}function DO(t){return[...new Set(t)]}function MO(t){let e={},n=Object.keys(t).sort();for(let i of n)e[i]=t[i];return e}function kO(t,e){let n=new Set;return new Set(e),t.reduce((i,a)=>{let o=JSON.stringify(MO(a));return n.has(o)||(n.add(o),i.push({key:o,link:a})),i},[])}function QS(){let t=A.useContext(to);return vm(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function NO(){let t=A.useContext(xd);return vm(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var ym=A.createContext(void 0);ym.displayName="FrameworkContext";function ZS(){let t=A.useContext(ym);return vm(t,"You must render this element inside a <HydratedRouter> element"),t}function jO(t,e){let n=A.useContext(ym),[i,a]=A.useState(!1),[o,l]=A.useState(!1),{onFocus:u,onBlur:d,onMouseEnter:f,onMouseLeave:g,onTouchStart:p}=e,_=A.useRef(null);A.useEffect(()=>{if(t==="render"&&l(!0),t==="viewport"){let w=C=>{C.forEach(T=>{l(T.isIntersecting)})},x=new IntersectionObserver(w,{threshold:.5});return _.current&&x.observe(_.current),()=>{x.disconnect()}}},[t]),A.useEffect(()=>{if(i){let w=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(w)}}},[i]);let b=()=>{a(!0)},S=()=>{a(!1),l(!1)};return n?t!=="intent"?[o,_,{}]:[o,_,{onFocus:al(u,b),onBlur:al(d,S),onMouseEnter:al(f,b),onMouseLeave:al(g,S),onTouchStart:al(p,b)}]:[!1,_,{}]}function al(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function LO({page:t,...e}){let{router:n}=QS(),i=A.useMemo(()=>US(n.routes,t,n.basename),[n.routes,t,n.basename]);return i?A.createElement(IO,{page:t,matches:i,...e}):null}function PO(t){let{manifest:e,routeModules:n}=ZS(),[i,a]=A.useState([]);return A.useEffect(()=>{let o=!1;return AO(t,e,n).then(l=>{o||a(l)}),()=>{o=!0}},[t,e,n]),i}function IO({page:t,matches:e,...n}){let i=bs(),{manifest:a,routeModules:o}=ZS(),{basename:l}=QS(),{loaderData:u,matches:d}=NO(),f=A.useMemo(()=>ab(t,e,d,a,i,"data"),[t,e,d,a,i]),g=A.useMemo(()=>ab(t,e,d,a,i,"assets"),[t,e,d,a,i]),p=A.useMemo(()=>{if(t===i.pathname+i.search+i.hash)return[];let S=new Set,w=!1;if(e.forEach(C=>{let T=a.routes[C.route.id];!T||!T.hasLoader||(!f.some(O=>O.route.id===C.route.id)&&C.route.id in u&&o[C.route.id]?.shouldRevalidate||T.hasClientLoader?w=!0:S.add(C.route.id))}),S.size===0)return[];let x=EO(t,l,"data");return w&&S.size>0&&x.searchParams.set("_routes",e.filter(C=>S.has(C.route.id)).map(C=>C.route.id).join(",")),[x.pathname+x.search]},[l,u,i,a,f,e,t,o]),_=A.useMemo(()=>RO(g,a),[g,a]),b=PO(g);return A.createElement(A.Fragment,null,p.map(S=>A.createElement("link",{key:S,rel:"prefetch",as:"fetch",href:S,...n})),_.map(S=>A.createElement("link",{key:S,rel:"modulepreload",href:S,...n})),b.map(({key:S,link:w})=>A.createElement("link",{key:S,nonce:n.nonce,...w})))}function zO(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var JS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{JS&&(window.__reactRouterVersion="7.8.1")}catch{}function FO({basename:t,children:e,window:n}){let i=A.useRef();i.current==null&&(i.current=ET({window:n,v5Compat:!0}));let a=i.current,[o,l]=A.useState({action:a.action,location:a.location}),u=A.useCallback(d=>{A.startTransition(()=>l(d))},[l]);return A.useLayoutEffect(()=>a.listen(u),[a,u]),A.createElement(mO,{basename:t,children:e,location:o.location,navigationType:o.action,navigator:a})}var ew=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Cn=A.forwardRef(function({onClick:e,discover:n="render",prefetch:i="none",relative:a,reloadDocument:o,replace:l,state:u,target:d,to:f,preventScrollReset:g,viewTransition:p,..._},b){let{basename:S}=A.useContext(xi),w=typeof f=="string"&&ew.test(f),x,C=!1;if(typeof f=="string"&&w&&(x=f,JS))try{let H=new URL(window.location.href),Q=f.startsWith("//")?new URL(H.protocol+f):new URL(f),Z=ys(Q.pathname,S);Q.origin===H.origin&&Z!=null?f=Z+Q.search+Q.hash:C=!0}catch{bi(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let T=ZT(f,{relative:a}),[O,M,D]=jO(i,_),U=$O(f,{replace:l,state:u,target:d,preventScrollReset:g,relative:a,viewTransition:p});function L(H){e&&e(H),H.defaultPrevented||U(H)}let B=A.createElement("a",{..._,...D,href:x||T,onClick:C||o?e:L,ref:zO(b,M),target:d,"data-discover":!w&&n==="render"?"true":void 0});return O&&!w?A.createElement(A.Fragment,null,B,A.createElement(LO,{page:T})):B});Cn.displayName="Link";var UO=A.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:i="",end:a=!1,style:o,to:l,viewTransition:u,children:d,...f},g){let p=nc(l,{relative:f.relative}),_=bs(),b=A.useContext(xd),{navigator:S,basename:w}=A.useContext(xi),x=b!=null&&WO(p)&&u===!0,C=S.encodeLocation?S.encodeLocation(p).pathname:p.pathname,T=_.pathname,O=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;n||(T=T.toLowerCase(),O=O?O.toLowerCase():null,C=C.toLowerCase()),O&&w&&(O=ys(O,w)||O);const M=C!=="/"&&C.endsWith("/")?C.length-1:C.length;let D=T===C||!a&&T.startsWith(C)&&T.charAt(M)==="/",U=O!=null&&(O===C||!a&&O.startsWith(C)&&O.charAt(C.length)==="/"),L={isActive:D,isPending:U,isTransitioning:x},B=D?e:void 0,H;typeof i=="function"?H=i(L):H=[i,D?"active":null,U?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let Q=typeof o=="function"?o(L):o;return A.createElement(Cn,{...f,"aria-current":B,className:H,ref:g,style:Q,to:l,viewTransition:u},typeof d=="function"?d(L):d)});UO.displayName="NavLink";var HO=A.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:i,replace:a,state:o,method:l=Ku,action:u,onSubmit:d,relative:f,preventScrollReset:g,viewTransition:p,..._},b)=>{let S=GO(),w=YO(u,{relative:f}),x=l.toLowerCase()==="get"?"get":"post",C=typeof u=="string"&&ew.test(u),T=O=>{if(d&&d(O),O.defaultPrevented)return;O.preventDefault();let M=O.nativeEvent.submitter,D=M?.getAttribute("formmethod")||l;S(M||O.currentTarget,{fetcherKey:e,method:D,navigate:n,replace:a,state:o,relative:f,preventScrollReset:g,viewTransition:p})};return A.createElement("form",{ref:b,method:x,action:w,onSubmit:i?d:T,..._,"data-discover":!C&&t==="render"?"true":void 0})});HO.displayName="Form";function BO(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function tw(t){let e=A.useContext(to);return Ct(e,BO(t)),e}function $O(t,{target:e,replace:n,state:i,preventScrollReset:a,relative:o,viewTransition:l}={}){let u=aa(),d=bs(),f=nc(t,{relative:o});return A.useCallback(g=>{if(SO(g,e)){g.preventDefault();let p=n!==void 0?n:Ul(d)===Ul(f);u(t,{replace:p,state:i,preventScrollReset:a,relative:o,viewTransition:l})}},[d,u,f,n,i,e,t,a,o,l])}var VO=0,qO=()=>`__${String(++VO)}__`;function GO(){let{router:t}=tw("useSubmit"),{basename:e}=A.useContext(xi),n=dO();return A.useCallback(async(i,a={})=>{let{action:o,method:l,encType:u,formData:d,body:f}=CO(i,e);if(a.navigate===!1){let g=a.fetcherKey||qO();await t.fetch(g,n,a.action||o,{preventScrollReset:a.preventScrollReset,formData:d,body:f,formMethod:a.method||l,formEncType:a.encType||u,flushSync:a.flushSync})}else await t.navigate(a.action||o,{preventScrollReset:a.preventScrollReset,formData:d,body:f,formMethod:a.method||l,formEncType:a.encType||u,replace:a.replace,state:a.state,fromRouteId:n,flushSync:a.flushSync,viewTransition:a.viewTransition})},[t,e,n])}function YO(t,{relative:e}={}){let{basename:n}=A.useContext(xi),i=A.useContext(li);Ct(i,"useFormAction must be used inside a RouteContext");let[a]=i.matches.slice(-1),o={...nc(t||".",{relative:e})},l=bs();if(t==null){o.search=l.search;let u=new URLSearchParams(o.search),d=u.getAll("index");if(d.some(g=>g==="")){u.delete("index"),d.filter(p=>p).forEach(p=>u.append("index",p));let g=u.toString();o.search=g?`?${g}`:""}}return(!t||t===".")&&a.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(o.pathname=o.pathname==="/"?n:vs([n,o.pathname])),Ul(o)}function WO(t,{relative:e}={}){let n=A.useContext(VS);Ct(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=tw("useViewTransitionState"),a=nc(t,{relative:e});if(!n.isTransitioning)return!1;let o=ys(n.currentLocation.pathname,i)||n.currentLocation.pathname,l=ys(n.nextLocation.pathname,i)||n.nextLocation.pathname;return td(a.pathname,l)!=null||td(a.pathname,o)!=null}var bl=FS();const KO="modulepreload",XO=function(t){return"/"+t},rb={},Ha=function(e,n,i){let a=Promise.resolve();if(n&&n.length>0){let d=function(f){return Promise.all(f.map(g=>Promise.resolve(g).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),u=l?.nonce||l?.getAttribute("nonce");a=d(n.map(f=>{if(f=XO(f),f in rb)return;rb[f]=!0;const g=f.endsWith(".css"),p=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${p}`))return;const _=document.createElement("link");if(_.rel=g?"stylesheet":KO,g||(_.as="script"),_.crossOrigin="",_.href=f,u&&_.setAttribute("nonce",u),document.head.appendChild(_),g)return new Promise((b,S)=>{_.addEventListener("load",b),_.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${f}`)))})}))}function o(l){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=l,window.dispatchEvent(u),!u.defaultPrevented)throw l}return a.then(l=>{for(const u of l||[])u.status==="rejected"&&o(u.reason);return e().catch(o)})},QO=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Ha(async()=>{const{default:i}=await Promise.resolve().then(()=>io);return{default:i}},[]).then(({default:i})=>i(...n)):e=fetch,(...n)=>e(...n)};class _m extends Error{constructor(e,n="FunctionsError",i){super(e),this.name=n,this.context=i}}class ZO extends _m{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class ob extends _m{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class lb extends _m{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var jg;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(jg||(jg={}));var JO=function(t,e,n,i){function a(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(g){try{f(i.next(g))}catch(p){l(p)}}function d(g){try{f(i.throw(g))}catch(p){l(p)}}function f(g){g.done?o(g.value):a(g.value).then(u,d)}f((i=i.apply(t,e||[])).next())})};class eA{constructor(e,{headers:n={},customFetch:i,region:a=jg.Any}={}){this.url=e,this.headers=n,this.region=a,this.fetch=QO(i)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var i;return JO(this,void 0,void 0,function*(){try{const{headers:a,method:o,body:l}=n;let u={},{region:d}=n;d||(d=this.region);const f=new URL(`${this.url}/${e}`);d&&d!=="any"&&(u["x-region"]=d,f.searchParams.set("forceFunctionRegion",d));let g;l&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(u["Content-Type"]="application/octet-stream",g=l):typeof l=="string"?(u["Content-Type"]="text/plain",g=l):typeof FormData<"u"&&l instanceof FormData?g=l:(u["Content-Type"]="application/json",g=JSON.stringify(l)));const p=yield this.fetch(f.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},u),this.headers),a),body:g}).catch(w=>{throw new ZO(w)}),_=p.headers.get("x-relay-error");if(_&&_==="true")throw new ob(p);if(!p.ok)throw new lb(p);let b=((i=p.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),S;return b==="application/json"?S=yield p.json():b==="application/octet-stream"?S=yield p.blob():b==="text/event-stream"?S=p:b==="multipart/form-data"?S=yield p.formData():S=yield p.text(),{data:S,error:null,response:p}}catch(a){return{data:null,error:a,response:a instanceof lb||a instanceof ob?a.context:void 0}}})}}var en={},Rr={},Dr={},Mr={},kr={},Nr={},tA=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Kr=tA();const nA=Kr.fetch,nw=Kr.fetch.bind(Kr),iw=Kr.Headers,iA=Kr.Request,sA=Kr.Response,io=Object.freeze(Object.defineProperty({__proto__:null,Headers:iw,Request:iA,Response:sA,default:nw,fetch:nA},Symbol.toStringTag,{value:"Module"})),aA=gT(io);var Cu={},cb;function sw(){if(cb)return Cu;cb=1,Object.defineProperty(Cu,"__esModule",{value:!0});class t extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return Cu.default=t,Cu}var ub;function aw(){if(ub)return Nr;ub=1;var t=Nr&&Nr.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(Nr,"__esModule",{value:!0});const e=t(aA),n=t(sw());class i{constructor(o){this.shouldThrowOnError=!1,this.method=o.method,this.url=o.url,this.headers=o.headers,this.schema=o.schema,this.body=o.body,this.shouldThrowOnError=o.shouldThrowOnError,this.signal=o.signal,this.isMaybeSingle=o.isMaybeSingle,o.fetch?this.fetch=o.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(o,l){return this.headers=Object.assign({},this.headers),this.headers[o]=l,this}then(o,l){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const u=this.fetch;let d=u(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async f=>{var g,p,_;let b=null,S=null,w=null,x=f.status,C=f.statusText;if(f.ok){if(this.method!=="HEAD"){const D=await f.text();D===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?S=D:S=JSON.parse(D))}const O=(g=this.headers.Prefer)===null||g===void 0?void 0:g.match(/count=(exact|planned|estimated)/),M=(p=f.headers.get("content-range"))===null||p===void 0?void 0:p.split("/");O&&M&&M.length>1&&(w=parseInt(M[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(S)&&(S.length>1?(b={code:"PGRST116",details:`Results contain ${S.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},S=null,w=null,x=406,C="Not Acceptable"):S.length===1?S=S[0]:S=null)}else{const O=await f.text();try{b=JSON.parse(O),Array.isArray(b)&&f.status===404&&(S=[],b=null,x=200,C="OK")}catch{f.status===404&&O===""?(x=204,C="No Content"):b={message:O}}if(b&&this.isMaybeSingle&&(!((_=b?.details)===null||_===void 0)&&_.includes("0 rows"))&&(b=null,x=200,C="OK"),b&&this.shouldThrowOnError)throw new n.default(b)}return{error:b,data:S,count:w,status:x,statusText:C}});return this.shouldThrowOnError||(d=d.catch(f=>{var g,p,_;return{error:{message:`${(g=f?.name)!==null&&g!==void 0?g:"FetchError"}: ${f?.message}`,details:`${(p=f?.stack)!==null&&p!==void 0?p:""}`,hint:"",code:`${(_=f?.code)!==null&&_!==void 0?_:""}`},data:null,count:null,status:0,statusText:""}})),d.then(o,l)}returns(){return this}overrideTypes(){return this}}return Nr.default=i,Nr}var db;function rw(){if(db)return kr;db=1;var t=kr&&kr.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(kr,"__esModule",{value:!0});const e=t(aw());class n extends e.default{select(a){let o=!1;const l=(a??"*").split("").map(u=>/\s/.test(u)&&!o?"":(u==='"'&&(o=!o),u)).join("");return this.url.searchParams.set("select",l),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(a,{ascending:o=!0,nullsFirst:l,foreignTable:u,referencedTable:d=u}={}){const f=d?`${d}.order`:"order",g=this.url.searchParams.get(f);return this.url.searchParams.set(f,`${g?`${g},`:""}${a}.${o?"asc":"desc"}${l===void 0?"":l?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:o,referencedTable:l=o}={}){const u=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(u,`${a}`),this}range(a,o,{foreignTable:l,referencedTable:u=l}={}){const d=typeof u>"u"?"offset":`${u}.offset`,f=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(d,`${a}`),this.url.searchParams.set(f,`${o-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:a=!1,verbose:o=!1,settings:l=!1,buffers:u=!1,wal:d=!1,format:f="text"}={}){var g;const p=[a?"analyze":null,o?"verbose":null,l?"settings":null,u?"buffers":null,d?"wal":null].filter(Boolean).join("|"),_=(g=this.headers.Accept)!==null&&g!==void 0?g:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${f}; for="${_}"; options=${p};`,f==="json"?this:this}rollback(){var a;return((a=this.headers.Prefer)!==null&&a!==void 0?a:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return kr.default=n,kr}var hb;function bm(){if(hb)return Mr;hb=1;var t=Mr&&Mr.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Mr,"__esModule",{value:!0});const e=t(rw());class n extends e.default{eq(a,o){return this.url.searchParams.append(a,`eq.${o}`),this}neq(a,o){return this.url.searchParams.append(a,`neq.${o}`),this}gt(a,o){return this.url.searchParams.append(a,`gt.${o}`),this}gte(a,o){return this.url.searchParams.append(a,`gte.${o}`),this}lt(a,o){return this.url.searchParams.append(a,`lt.${o}`),this}lte(a,o){return this.url.searchParams.append(a,`lte.${o}`),this}like(a,o){return this.url.searchParams.append(a,`like.${o}`),this}likeAllOf(a,o){return this.url.searchParams.append(a,`like(all).{${o.join(",")}}`),this}likeAnyOf(a,o){return this.url.searchParams.append(a,`like(any).{${o.join(",")}}`),this}ilike(a,o){return this.url.searchParams.append(a,`ilike.${o}`),this}ilikeAllOf(a,o){return this.url.searchParams.append(a,`ilike(all).{${o.join(",")}}`),this}ilikeAnyOf(a,o){return this.url.searchParams.append(a,`ilike(any).{${o.join(",")}}`),this}is(a,o){return this.url.searchParams.append(a,`is.${o}`),this}in(a,o){const l=Array.from(new Set(o)).map(u=>typeof u=="string"&&new RegExp("[,()]").test(u)?`"${u}"`:`${u}`).join(",");return this.url.searchParams.append(a,`in.(${l})`),this}contains(a,o){return typeof o=="string"?this.url.searchParams.append(a,`cs.${o}`):Array.isArray(o)?this.url.searchParams.append(a,`cs.{${o.join(",")}}`):this.url.searchParams.append(a,`cs.${JSON.stringify(o)}`),this}containedBy(a,o){return typeof o=="string"?this.url.searchParams.append(a,`cd.${o}`):Array.isArray(o)?this.url.searchParams.append(a,`cd.{${o.join(",")}}`):this.url.searchParams.append(a,`cd.${JSON.stringify(o)}`),this}rangeGt(a,o){return this.url.searchParams.append(a,`sr.${o}`),this}rangeGte(a,o){return this.url.searchParams.append(a,`nxl.${o}`),this}rangeLt(a,o){return this.url.searchParams.append(a,`sl.${o}`),this}rangeLte(a,o){return this.url.searchParams.append(a,`nxr.${o}`),this}rangeAdjacent(a,o){return this.url.searchParams.append(a,`adj.${o}`),this}overlaps(a,o){return typeof o=="string"?this.url.searchParams.append(a,`ov.${o}`):this.url.searchParams.append(a,`ov.{${o.join(",")}}`),this}textSearch(a,o,{config:l,type:u}={}){let d="";u==="plain"?d="pl":u==="phrase"?d="ph":u==="websearch"&&(d="w");const f=l===void 0?"":`(${l})`;return this.url.searchParams.append(a,`${d}fts${f}.${o}`),this}match(a){return Object.entries(a).forEach(([o,l])=>{this.url.searchParams.append(o,`eq.${l}`)}),this}not(a,o,l){return this.url.searchParams.append(a,`not.${o}.${l}`),this}or(a,{foreignTable:o,referencedTable:l=o}={}){const u=l?`${l}.or`:"or";return this.url.searchParams.append(u,`(${a})`),this}filter(a,o,l){return this.url.searchParams.append(a,`${o}.${l}`),this}}return Mr.default=n,Mr}var fb;function ow(){if(fb)return Dr;fb=1;var t=Dr&&Dr.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Dr,"__esModule",{value:!0});const e=t(bm());class n{constructor(a,{headers:o={},schema:l,fetch:u}){this.url=a,this.headers=o,this.schema=l,this.fetch=u}select(a,{head:o=!1,count:l}={}){const u=o?"HEAD":"GET";let d=!1;const f=(a??"*").split("").map(g=>/\s/.test(g)&&!d?"":(g==='"'&&(d=!d),g)).join("");return this.url.searchParams.set("select",f),l&&(this.headers.Prefer=`count=${l}`),new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(a,{count:o,defaultToNull:l=!0}={}){const u="POST",d=[];if(this.headers.Prefer&&d.push(this.headers.Prefer),o&&d.push(`count=${o}`),l||d.push("missing=default"),this.headers.Prefer=d.join(","),Array.isArray(a)){const f=a.reduce((g,p)=>g.concat(Object.keys(p)),[]);if(f.length>0){const g=[...new Set(f)].map(p=>`"${p}"`);this.url.searchParams.set("columns",g.join(","))}}return new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:this.fetch,allowEmpty:!1})}upsert(a,{onConflict:o,ignoreDuplicates:l=!1,count:u,defaultToNull:d=!0}={}){const f="POST",g=[`resolution=${l?"ignore":"merge"}-duplicates`];if(o!==void 0&&this.url.searchParams.set("on_conflict",o),this.headers.Prefer&&g.push(this.headers.Prefer),u&&g.push(`count=${u}`),d||g.push("missing=default"),this.headers.Prefer=g.join(","),Array.isArray(a)){const p=a.reduce((_,b)=>_.concat(Object.keys(b)),[]);if(p.length>0){const _=[...new Set(p)].map(b=>`"${b}"`);this.url.searchParams.set("columns",_.join(","))}}return new e.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:this.fetch,allowEmpty:!1})}update(a,{count:o}={}){const l="PATCH",u=[];return this.headers.Prefer&&u.push(this.headers.Prefer),o&&u.push(`count=${o}`),this.headers.Prefer=u.join(","),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:this.fetch,allowEmpty:!1})}delete({count:a}={}){const o="DELETE",l=[];return a&&l.push(`count=${a}`),this.headers.Prefer&&l.unshift(this.headers.Prefer),this.headers.Prefer=l.join(","),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return Dr.default=n,Dr}var rl={},ol={},gb;function rA(){return gb||(gb=1,Object.defineProperty(ol,"__esModule",{value:!0}),ol.version=void 0,ol.version="0.0.0-automated"),ol}var mb;function oA(){if(mb)return rl;mb=1,Object.defineProperty(rl,"__esModule",{value:!0}),rl.DEFAULT_HEADERS=void 0;const t=rA();return rl.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${t.version}`},rl}var pb;function lA(){if(pb)return Rr;pb=1;var t=Rr&&Rr.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Rr,"__esModule",{value:!0});const e=t(ow()),n=t(bm()),i=oA();class a{constructor(l,{headers:u={},schema:d,fetch:f}={}){this.url=l,this.headers=Object.assign(Object.assign({},i.DEFAULT_HEADERS),u),this.schemaName=d,this.fetch=f}from(l){const u=new URL(`${this.url}/${l}`);return new e.default(u,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(l){return new a(this.url,{headers:this.headers,schema:l,fetch:this.fetch})}rpc(l,u={},{head:d=!1,get:f=!1,count:g}={}){let p;const _=new URL(`${this.url}/rpc/${l}`);let b;d||f?(p=d?"HEAD":"GET",Object.entries(u).filter(([w,x])=>x!==void 0).map(([w,x])=>[w,Array.isArray(x)?`{${x.join(",")}}`:`${x}`]).forEach(([w,x])=>{_.searchParams.append(w,x)})):(p="POST",b=u);const S=Object.assign({},this.headers);return g&&(S.Prefer=`count=${g}`),new n.default({method:p,url:_,headers:S,schema:this.schemaName,body:b,fetch:this.fetch,allowEmpty:!1})}}return Rr.default=a,Rr}var vb;function cA(){if(vb)return en;vb=1;var t=en&&en.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(en,"__esModule",{value:!0}),en.PostgrestError=en.PostgrestBuilder=en.PostgrestTransformBuilder=en.PostgrestFilterBuilder=en.PostgrestQueryBuilder=en.PostgrestClient=void 0;const e=t(lA());en.PostgrestClient=e.default;const n=t(ow());en.PostgrestQueryBuilder=n.default;const i=t(bm());en.PostgrestFilterBuilder=i.default;const a=t(rw());en.PostgrestTransformBuilder=a.default;const o=t(aw());en.PostgrestBuilder=o.default;const l=t(sw());return en.PostgrestError=l.default,en.default={PostgrestClient:e.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:i.default,PostgrestTransformBuilder:a.default,PostgrestBuilder:o.default,PostgrestError:l.default},en}var uA=cA();const dA=um(uA),{PostgrestClient:hA,PostgrestQueryBuilder:YI,PostgrestFilterBuilder:WI,PostgrestTransformBuilder:KI,PostgrestBuilder:XI,PostgrestError:QI}=dA;class fA{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const n=parseInt(process.versions.node.split(".")[0]);return n>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${n} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${n} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const i=this.getWebSocketConstructor();return new i(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const gA="2.15.1",mA=`realtime-js/${gA}`,pA="1.0.0",Lg=1e4,vA=1e3,yA=100;var El;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(El||(El={}));var Vt;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Vt||(Vt={}));var gi;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(gi||(gi={}));var Pg;(function(t){t.websocket="websocket"})(Pg||(Pg={}));var Pa;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Pa||(Pa={}));class _A{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),i=new TextDecoder;return this._decodeBroadcast(e,n,i)}_decodeBroadcast(e,n,i){const a=n.getUint8(1),o=n.getUint8(2);let l=this.HEADER_LENGTH+2;const u=i.decode(e.slice(l,l+a));l=l+a;const d=i.decode(e.slice(l,l+o));l=l+o;const f=JSON.parse(i.decode(e.slice(l,e.byteLength)));return{ref:null,topic:u,event:d,payload:f}}}class lw{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var gt;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(gt||(gt={}));const yb=(t,e,n={})=>{var i;const a=(i=n.skipTypes)!==null&&i!==void 0?i:[];return Object.keys(e).reduce((o,l)=>(o[l]=bA(l,t,e,a),o),{})},bA=(t,e,n,i)=>{const a=e.find(u=>u.name===t),o=a?.type,l=n[t];return o&&!i.includes(o)?cw(o,l):Ig(l)},cw=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return CA(e,n)}switch(t){case gt.bool:return SA(e);case gt.float4:case gt.float8:case gt.int2:case gt.int4:case gt.int8:case gt.numeric:case gt.oid:return wA(e);case gt.json:case gt.jsonb:return xA(e);case gt.timestamp:return EA(e);case gt.abstime:case gt.date:case gt.daterange:case gt.int4range:case gt.int8range:case gt.money:case gt.reltime:case gt.text:case gt.time:case gt.timestamptz:case gt.timetz:case gt.tsrange:case gt.tstzrange:return Ig(e);default:return Ig(e)}},Ig=t=>t,SA=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},wA=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},xA=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},CA=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,i=t[n];if(t[0]==="{"&&i==="}"){let o;const l=t.slice(1,n);try{o=JSON.parse("["+l+"]")}catch{o=l?l.split(","):[]}return o.map(u=>cw(e,u))}return t},EA=t=>typeof t=="string"?t.replace(" ","T"):t,uw=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class ng{constructor(e,n,i={},a=Lg){this.channel=e,this.event=n,this.payload=i,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var i;return this._hasReceived(e)&&n((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(i=>i.status===e).forEach(i=>i.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var _b;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(_b||(_b={}));class Tl{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=n?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},a=>{const{onJoin:o,onLeave:l,onSync:u}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Tl.syncState(this.state,a,o,l),this.pendingDiffs.forEach(d=>{this.state=Tl.syncDiff(this.state,d,o,l)}),this.pendingDiffs=[],u()}),this.channel._on(i.diff,{},a=>{const{onJoin:o,onLeave:l,onSync:u}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=Tl.syncDiff(this.state,a,o,l),u())}),this.onJoin((a,o,l)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:o,newPresences:l})}),this.onLeave((a,o,l)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:o,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,i,a){const o=this.cloneDeep(e),l=this.transformState(n),u={},d={};return this.map(o,(f,g)=>{l[f]||(d[f]=g)}),this.map(l,(f,g)=>{const p=o[f];if(p){const _=g.map(x=>x.presence_ref),b=p.map(x=>x.presence_ref),S=g.filter(x=>b.indexOf(x.presence_ref)<0),w=p.filter(x=>_.indexOf(x.presence_ref)<0);S.length>0&&(u[f]=S),w.length>0&&(d[f]=w)}else u[f]=g}),this.syncDiff(o,{joins:u,leaves:d},i,a)}static syncDiff(e,n,i,a){const{joins:o,leaves:l}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return i||(i=()=>{}),a||(a=()=>{}),this.map(o,(u,d)=>{var f;const g=(f=e[u])!==null&&f!==void 0?f:[];if(e[u]=this.cloneDeep(d),g.length>0){const p=e[u].map(b=>b.presence_ref),_=g.filter(b=>p.indexOf(b.presence_ref)<0);e[u].unshift(..._)}i(u,g,d)}),this.map(l,(u,d)=>{let f=e[u];if(!f)return;const g=d.map(p=>p.presence_ref);f=f.filter(p=>g.indexOf(p.presence_ref)<0),e[u]=f,a(u,f,d),f.length===0&&delete e[u]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(i=>n(i,e[i]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,i)=>{const a=e[i];return"metas"in a?n[i]=a.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):n[i]=a,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var bb;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(bb||(bb={}));var Ol;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Ol||(Ol={}));var hs;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(hs||(hs={}));class Sm{constructor(e,n={config:{}},i){this.topic=e,this.params=n,this.socket=i,this.bindings={},this.state=Vt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new ng(this,gi.join,this.params,this.timeout),this.rejoinTimer=new lw(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Vt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Vt.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Vt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Vt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Vt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(gi.reply,{},(a,o)=>{this._trigger(this._replyEventName(o),a)}),this.presence=new Tl(this),this.broadcastEndpointURL=uw(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var i,a;if(this.socket.isConnected()||this.socket.connect(),this.state==Vt.closed){const{config:{broadcast:o,presence:l,private:u}}=this.params,d=(a=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(_=>_.filter))!==null&&a!==void 0?a:[],f=!!this.bindings[Ol.PRESENCE]&&this.bindings[Ol.PRESENCE].length>0,g={},p={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:f}),postgres_changes:d,private:u};this.socket.accessTokenValue&&(g.access_token=this.socket.accessTokenValue),this._onError(_=>e?.(hs.CHANNEL_ERROR,_)),this._onClose(()=>e?.(hs.CLOSED)),this.updateJoinPayload(Object.assign({config:p},g)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:_})=>{var b;if(this.socket.setAuth(),_===void 0){e?.(hs.SUBSCRIBED);return}else{const S=this.bindings.postgres_changes,w=(b=S?.length)!==null&&b!==void 0?b:0,x=[];for(let C=0;C<w;C++){const T=S[C],{filter:{event:O,schema:M,table:D,filter:U}}=T,L=_&&_[C];if(L&&L.event===O&&L.schema===M&&L.table===D&&L.filter===U)x.push(Object.assign(Object.assign({},T),{id:L.id}));else{this.unsubscribe(),this.state=Vt.errored,e?.(hs.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=x,e&&e(hs.SUBSCRIBED);return}}).receive("error",_=>{this.state=Vt.errored,e?.(hs.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(_).join(", ")||"error")))}).receive("timeout",()=>{e?.(hs.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,i){return this.state===Vt.joined&&e===Ol.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,n,i)}async send(e,n={}){var i,a;if(!this._canPush()&&e.type==="broadcast"){const{event:o,payload:l}=e,d={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:l,private:this.private}]})};try{const f=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(i=n.timeout)!==null&&i!==void 0?i:this.timeout);return await((a=f.body)===null||a===void 0?void 0:a.cancel()),f.ok?"ok":"error"}catch(f){return f.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var l,u,d;const f=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((d=(u=(l=this.params)===null||l===void 0?void 0:l.config)===null||u===void 0?void 0:u.broadcast)===null||d===void 0)&&d.ack)&&o("ok"),f.receive("ok",()=>o("ok")),f.receive("error",()=>o("error")),f.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Vt.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(gi.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(a=>{i=new ng(this,gi.leave,{},e),i.receive("ok",()=>{n(),a("ok")}).receive("timeout",()=>{n(),a("timed out")}).receive("error",()=>{a("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Vt.closed,this.bindings={}}async _fetchWithTimeout(e,n,i){const a=new AbortController,o=setTimeout(()=>a.abort(),i),l=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:a.signal}));return clearTimeout(o),l}_push(e,n,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new ng(this,e,n,i);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>yA){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,i){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,i){var a,o;const l=e.toLocaleLowerCase(),{close:u,error:d,leave:f,join:g}=gi;if(i&&[u,d,f,g].indexOf(l)>=0&&i!==this._joinRef())return;let _=this._onMessage(l,n,i);if(n&&!_)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(b=>{var S,w,x;return((S=b.filter)===null||S===void 0?void 0:S.event)==="*"||((x=(w=b.filter)===null||w===void 0?void 0:w.event)===null||x===void 0?void 0:x.toLocaleLowerCase())===l}).map(b=>b.callback(_,i)):(o=this.bindings[l])===null||o===void 0||o.filter(b=>{var S,w,x,C,T,O;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in b){const M=b.id,D=(S=b.filter)===null||S===void 0?void 0:S.event;return M&&((w=n.ids)===null||w===void 0?void 0:w.includes(M))&&(D==="*"||D?.toLocaleLowerCase()===((x=n.data)===null||x===void 0?void 0:x.type.toLocaleLowerCase()))}else{const M=(T=(C=b?.filter)===null||C===void 0?void 0:C.event)===null||T===void 0?void 0:T.toLocaleLowerCase();return M==="*"||M===((O=n?.event)===null||O===void 0?void 0:O.toLocaleLowerCase())}else return b.type.toLocaleLowerCase()===l}).map(b=>{if(typeof _=="object"&&"ids"in _){const S=_.data,{schema:w,table:x,commit_timestamp:C,type:T,errors:O}=S;_=Object.assign(Object.assign({},{schema:w,table:x,commit_timestamp:C,eventType:T,new:{},old:{},errors:O}),this._getPayloadRecords(S))}b.callback(_,i)})}_isClosed(){return this.state===Vt.closed}_isJoined(){return this.state===Vt.joined}_isJoining(){return this.state===Vt.joining}_isLeaving(){return this.state===Vt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,i){const a=e.toLocaleLowerCase(),o={type:a,filter:n,callback:i};return this.bindings[a]?this.bindings[a].push(o):this.bindings[a]=[o],this}_off(e,n){const i=e.toLocaleLowerCase();return this.bindings[i]&&(this.bindings[i]=this.bindings[i].filter(a=>{var o;return!(((o=a.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===i&&Sm.isEqual(a.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const i in e)if(e[i]!==n[i])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(gi.close,{},e)}_onError(e){this._on(gi.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Vt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=yb(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=yb(e.columns,e.old_record)),n}}const Sb=()=>{},Eu={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},TA=[1e3,2e3,5e3,1e4],OA=1e4,AA=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class RA{constructor(e,n){var i;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Lg,this.transport=null,this.heartbeatIntervalMs=Eu.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Sb,this.ref=0,this.reconnectTimer=null,this.logger=Sb,this.conn=null,this.sendBuffer=[],this.serializer=new _A,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>{let o;return a?o=a:typeof fetch>"u"?o=(...l)=>Ha(async()=>{const{default:u}=await Promise.resolve().then(()=>io);return{default:u}},void 0).then(({default:u})=>u(...l)).catch(u=>{throw new Error(`Failed to load @supabase/node-fetch: ${u.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):o=fetch,(...l)=>o(...l)},!(!((i=n?.params)===null||i===void 0)&&i.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${Pg.websocket}`,this.httpEndpoint=uw(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=fA.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:pA}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const i=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(i),this._setConnectionState("disconnected")},e?this.conn.close(e,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,i){this.logger(e,n,i)}connectionState(){switch(this.conn&&this.conn.readyState){case El.connecting:return Pa.Connecting;case El.open:return Pa.Open;case El.closing:return Pa.Closing;default:return Pa.Closed}}isConnected(){return this.connectionState()===Pa.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const i=`realtime:${e}`,a=this.getChannels().find(o=>o.topic===i);if(a)return a;{const o=new Sm(`realtime:${e}`,n,this);return this.channels.push(o),o}}push(e){const{topic:n,event:i,payload:a,ref:o}=e,l=()=>{this.encode(e,u=>{var d;(d=this.conn)===null||d===void 0||d.send(u)})};this.log("push",`${n} ${i} (${o})`,a),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(vA,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Eu.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(i=>i.topic===e&&(i._isJoined()||i._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{n.topic==="phoenix"&&n.event==="phx_reply"&&this.heartbeatCallback(n.payload.status==="ok"?"ok":"error"),n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:i,event:a,payload:o,ref:l}=n,u=l?`(${l})`:"",d=o.status||"";this.log("receive",`${d} ${i} ${a} ${u}`.trim(),o),this.channels.filter(f=>f._isMember(i)).forEach(f=>f._trigger(a,o,l)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(gi.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const i=e.match(/\?/)?"&":"?",a=new URLSearchParams(n);return`${e}${i}${a}`}_workerObjectUrl(e){let n;if(e)n=e;else{const i=new Blob([AA],{type:"application/javascript"});n=URL.createObjectURL(i)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n;e?n=e:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(i=>{const a={access_token:n,version:mA};n&&i.updateJoinPayload(a),i.joinedOnce&&i._isJoined()&&i._push(gi.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(i=>{try{i(n)}catch(a){this.log("error",`error in ${e} callback`,a)}})}catch(i){this.log("error",`error triggering ${e} callbacks`,i)}}_setupReconnectionTimer(){this.reconnectTimer=new lw(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Eu.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,i,a,o,l,u,d,f;if(this.transport=(n=e?.transport)!==null&&n!==void 0?n:null,this.timeout=(i=e?.timeout)!==null&&i!==void 0?i:Lg,this.heartbeatIntervalMs=(a=e?.heartbeatIntervalMs)!==null&&a!==void 0?a:Eu.HEARTBEAT_INTERVAL,this.worker=(o=e?.worker)!==null&&o!==void 0?o:!1,this.accessToken=(l=e?.accessToken)!==null&&l!==void 0?l:null,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=e?.reconnectAfterMs)!==null&&u!==void 0?u:(g=>TA[g-1]||OA),this.encode=(d=e?.encode)!==null&&d!==void 0?d:((g,p)=>p(JSON.stringify(g))),this.decode=(f=e?.decode)!==null&&f!==void 0?f:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}}class wm extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function qt(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class DA extends wm{constructor(e,n,i){super(e),this.name="StorageApiError",this.status=n,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class zg extends wm{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var MA=function(t,e,n,i){function a(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(g){try{f(i.next(g))}catch(p){l(p)}}function d(g){try{f(i.throw(g))}catch(p){l(p)}}function f(g){g.done?o(g.value):a(g.value).then(u,d)}f((i=i.apply(t,e||[])).next())})};const dw=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Ha(async()=>{const{default:i}=await Promise.resolve().then(()=>io);return{default:i}},void 0).then(({default:i})=>i(...n)):e=fetch,(...n)=>e(...n)},kA=()=>MA(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Ha(()=>Promise.resolve().then(()=>io),void 0)).Response:Response}),Fg=t=>{if(Array.isArray(t))return t.map(n=>Fg(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,i])=>{const a=n.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[a]=Fg(i)}),e},NA=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var Ba=function(t,e,n,i){function a(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(g){try{f(i.next(g))}catch(p){l(p)}}function d(g){try{f(i.throw(g))}catch(p){l(p)}}function f(g){g.done?o(g.value):a(g.value).then(u,d)}f((i=i.apply(t,e||[])).next())})};const ig=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),jA=(t,e,n)=>Ba(void 0,void 0,void 0,function*(){const i=yield kA();t instanceof i&&!n?.noResolveJson?t.json().then(a=>{const o=t.status||500,l=a?.statusCode||o+"";e(new DA(ig(a),o,l))}).catch(a=>{e(new zg(ig(a),a))}):e(new zg(ig(t),t))}),LA=(t,e,n,i)=>{const a={method:t,headers:e?.headers||{}};return t==="GET"||!i?a:(NA(i)?(a.headers=Object.assign({"Content-Type":"application/json"},e?.headers),a.body=JSON.stringify(i)):a.body=i,e?.duplex&&(a.duplex=e.duplex),Object.assign(Object.assign({},a),n))};function ic(t,e,n,i,a,o){return Ba(this,void 0,void 0,function*(){return new Promise((l,u)=>{t(n,LA(e,i,a,o)).then(d=>{if(!d.ok)throw d;return i?.noResolveJson?d:d.json()}).then(d=>l(d)).catch(d=>jA(d,u,i))})})}function nd(t,e,n,i){return Ba(this,void 0,void 0,function*(){return ic(t,"GET",e,n,i)})}function Pi(t,e,n,i,a){return Ba(this,void 0,void 0,function*(){return ic(t,"POST",e,i,a,n)})}function Ug(t,e,n,i,a){return Ba(this,void 0,void 0,function*(){return ic(t,"PUT",e,i,a,n)})}function PA(t,e,n,i){return Ba(this,void 0,void 0,function*(){return ic(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),i)})}function hw(t,e,n,i,a){return Ba(this,void 0,void 0,function*(){return ic(t,"DELETE",e,i,a,n)})}var wn=function(t,e,n,i){function a(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(g){try{f(i.next(g))}catch(p){l(p)}}function d(g){try{f(i.throw(g))}catch(p){l(p)}}function f(g){g.done?o(g.value):a(g.value).then(u,d)}f((i=i.apply(t,e||[])).next())})};const IA={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},wb={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class zA{constructor(e,n={},i,a){this.url=e,this.headers=n,this.bucketId=i,this.fetch=dw(a)}uploadOrUpdate(e,n,i,a){return wn(this,void 0,void 0,function*(){try{let o;const l=Object.assign(Object.assign({},wb),a);let u=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(l.upsert)});const d=l.metadata;typeof Blob<"u"&&i instanceof Blob?(o=new FormData,o.append("cacheControl",l.cacheControl),d&&o.append("metadata",this.encodeMetadata(d)),o.append("",i)):typeof FormData<"u"&&i instanceof FormData?(o=i,o.append("cacheControl",l.cacheControl),d&&o.append("metadata",this.encodeMetadata(d))):(o=i,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType,d&&(u["x-metadata"]=this.toBase64(this.encodeMetadata(d)))),a?.headers&&(u=Object.assign(Object.assign({},u),a.headers));const f=this._removeEmptyFolders(n),g=this._getFinalPath(f),p=yield(e=="PUT"?Ug:Pi)(this.fetch,`${this.url}/object/${g}`,o,Object.assign({headers:u},l?.duplex?{duplex:l.duplex}:{}));return{data:{path:f,id:p.Id,fullPath:p.Key},error:null}}catch(o){if(qt(o))return{data:null,error:o};throw o}})}upload(e,n,i){return wn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,i)})}uploadToSignedUrl(e,n,i,a){return wn(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(e),l=this._getFinalPath(o),u=new URL(this.url+`/object/upload/sign/${l}`);u.searchParams.set("token",n);try{let d;const f=Object.assign({upsert:wb.upsert},a),g=Object.assign(Object.assign({},this.headers),{"x-upsert":String(f.upsert)});typeof Blob<"u"&&i instanceof Blob?(d=new FormData,d.append("cacheControl",f.cacheControl),d.append("",i)):typeof FormData<"u"&&i instanceof FormData?(d=i,d.append("cacheControl",f.cacheControl)):(d=i,g["cache-control"]=`max-age=${f.cacheControl}`,g["content-type"]=f.contentType);const p=yield Ug(this.fetch,u.toString(),d,{headers:g});return{data:{path:o,fullPath:p.Key},error:null}}catch(d){if(qt(d))return{data:null,error:d};throw d}})}createSignedUploadUrl(e,n){return wn(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e);const a=Object.assign({},this.headers);n?.upsert&&(a["x-upsert"]="true");const o=yield Pi(this.fetch,`${this.url}/object/upload/sign/${i}`,{},{headers:a}),l=new URL(this.url+o.url),u=l.searchParams.get("token");if(!u)throw new wm("No token returned by API");return{data:{signedUrl:l.toString(),path:e,token:u},error:null}}catch(i){if(qt(i))return{data:null,error:i};throw i}})}update(e,n,i){return wn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,i)})}move(e,n,i){return wn(this,void 0,void 0,function*(){try{return{data:yield Pi(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:i?.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(qt(a))return{data:null,error:a};throw a}})}copy(e,n,i){return wn(this,void 0,void 0,function*(){try{return{data:{path:(yield Pi(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:i?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(qt(a))return{data:null,error:a};throw a}})}createSignedUrl(e,n,i){return wn(this,void 0,void 0,function*(){try{let a=this._getFinalPath(e),o=yield Pi(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:n},i?.transform?{transform:i.transform}:{}),{headers:this.headers});const l=i?.download?`&download=${i.download===!0?"":i.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${l}`)},{data:o,error:null}}catch(a){if(qt(a))return{data:null,error:a};throw a}})}createSignedUrls(e,n,i){return wn(this,void 0,void 0,function*(){try{const a=yield Pi(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),o=i?.download?`&download=${i.download===!0?"":i.download}`:"";return{data:a.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${o}`):null})),error:null}}catch(a){if(qt(a))return{data:null,error:a};throw a}})}download(e,n){return wn(this,void 0,void 0,function*(){const a=typeof n?.transform<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString(n?.transform||{}),l=o?`?${o}`:"";try{const u=this._getFinalPath(e);return{data:yield(yield nd(this.fetch,`${this.url}/${a}/${u}${l}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(u){if(qt(u))return{data:null,error:u};throw u}})}info(e){return wn(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const i=yield nd(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Fg(i),error:null}}catch(i){if(qt(i))return{data:null,error:i};throw i}})}exists(e){return wn(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield PA(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(i){if(qt(i)&&i instanceof zg){const a=i.originalError;if([400,404].includes(a?.status))return{data:!1,error:i}}throw i}})}getPublicUrl(e,n){const i=this._getFinalPath(e),a=[],o=n?.download?`download=${n.download===!0?"":n.download}`:"";o!==""&&a.push(o);const u=typeof n?.transform<"u"?"render/image":"object",d=this.transformOptsToQueryString(n?.transform||{});d!==""&&a.push(d);let f=a.join("&");return f!==""&&(f=`?${f}`),{data:{publicUrl:encodeURI(`${this.url}/${u}/public/${i}${f}`)}}}remove(e){return wn(this,void 0,void 0,function*(){try{return{data:yield hw(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(qt(n))return{data:null,error:n};throw n}})}list(e,n,i){return wn(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},IA),n),{prefix:e||""});return{data:yield Pi(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},i),error:null}}catch(a){if(qt(a))return{data:null,error:a};throw a}})}listV2(e,n){return wn(this,void 0,void 0,function*(){try{const i=Object.assign({},e);return{data:yield Pi(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,i,{headers:this.headers},n),error:null}}catch(i){if(qt(i))return{data:null,error:i};throw i}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const FA="2.11.0",UA={"X-Client-Info":`storage-js/${FA}`};var jr=function(t,e,n,i){function a(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(g){try{f(i.next(g))}catch(p){l(p)}}function d(g){try{f(i.throw(g))}catch(p){l(p)}}function f(g){g.done?o(g.value):a(g.value).then(u,d)}f((i=i.apply(t,e||[])).next())})};class HA{constructor(e,n={},i,a){const o=new URL(e);a?.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href,this.headers=Object.assign(Object.assign({},UA),n),this.fetch=dw(i)}listBuckets(){return jr(this,void 0,void 0,function*(){try{return{data:yield nd(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(qt(e))return{data:null,error:e};throw e}})}getBucket(e){return jr(this,void 0,void 0,function*(){try{return{data:yield nd(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(qt(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return jr(this,void 0,void 0,function*(){try{return{data:yield Pi(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(qt(i))return{data:null,error:i};throw i}})}updateBucket(e,n){return jr(this,void 0,void 0,function*(){try{return{data:yield Ug(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(qt(i))return{data:null,error:i};throw i}})}emptyBucket(e){return jr(this,void 0,void 0,function*(){try{return{data:yield Pi(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(qt(n))return{data:null,error:n};throw n}})}deleteBucket(e){return jr(this,void 0,void 0,function*(){try{return{data:yield hw(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(qt(n))return{data:null,error:n};throw n}})}}class BA extends HA{constructor(e,n={},i,a){super(e,n,i,a)}from(e){return new zA(this.url,this.headers,e,this.fetch)}}const $A="2.55.0";let Sl="";typeof Deno<"u"?Sl="deno":typeof document<"u"?Sl="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Sl="react-native":Sl="node";const VA={"X-Client-Info":`supabase-js-${Sl}/${$A}`},qA={headers:VA},GA={schema:"public"},YA={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},WA={};var KA=function(t,e,n,i){function a(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(g){try{f(i.next(g))}catch(p){l(p)}}function d(g){try{f(i.throw(g))}catch(p){l(p)}}function f(g){g.done?o(g.value):a(g.value).then(u,d)}f((i=i.apply(t,e||[])).next())})};const XA=t=>{let e;return t?e=t:typeof fetch>"u"?e=nw:e=fetch,(...n)=>e(...n)},QA=()=>typeof Headers>"u"?iw:Headers,ZA=(t,e,n)=>{const i=XA(n),a=QA();return(o,l)=>KA(void 0,void 0,void 0,function*(){var u;const d=(u=yield e())!==null&&u!==void 0?u:t;let f=new a(l?.headers);return f.has("apikey")||f.set("apikey",t),f.has("Authorization")||f.set("Authorization",`Bearer ${d}`),i(o,Object.assign(Object.assign({},l),{headers:f}))})};var JA=function(t,e,n,i){function a(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(g){try{f(i.next(g))}catch(p){l(p)}}function d(g){try{f(i.throw(g))}catch(p){l(p)}}function f(g){g.done?o(g.value):a(g.value).then(u,d)}f((i=i.apply(t,e||[])).next())})};function eR(t){return t.endsWith("/")?t:t+"/"}function tR(t,e){var n,i;const{db:a,auth:o,realtime:l,global:u}=t,{db:d,auth:f,realtime:g,global:p}=e,_={db:Object.assign(Object.assign({},d),a),auth:Object.assign(Object.assign({},f),o),realtime:Object.assign(Object.assign({},g),l),storage:{},global:Object.assign(Object.assign(Object.assign({},p),u),{headers:Object.assign(Object.assign({},(n=p?.headers)!==null&&n!==void 0?n:{}),(i=u?.headers)!==null&&i!==void 0?i:{})}),accessToken:()=>JA(this,void 0,void 0,function*(){return""})};return t.accessToken?_.accessToken=t.accessToken:delete _.accessToken,_}const fw="2.71.1",$r=30*1e3,Hg=3,sg=Hg*$r,nR="http://localhost:9999",iR="supabase.auth.token",sR={"X-Client-Info":`gotrue-js/${fw}`},Bg="X-Supabase-Api-Version",gw={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},aR=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,rR=600*1e3;class xm extends Error{constructor(e,n,i){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=i}}function Le(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class oR extends xm{constructor(e,n,i){super(e,n,i),this.name="AuthApiError",this.status=n,this.code=i}}function lR(t){return Le(t)&&t.name==="AuthApiError"}class mw extends xm{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class ra extends xm{constructor(e,n,i,a){super(e,i,a),this.name=n,this.status=i}}class Ks extends ra{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function cR(t){return Le(t)&&t.name==="AuthSessionMissingError"}class Tu extends ra{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ou extends ra{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Au extends ra{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function uR(t){return Le(t)&&t.name==="AuthImplicitGrantRedirectError"}class xb extends ra{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class $g extends ra{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function ag(t){return Le(t)&&t.name==="AuthRetryableFetchError"}class Cb extends ra{constructor(e,n,i){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=i}}class Vg extends ra{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const id="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Eb=` 	
\r=`.split(""),dR=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Eb.length;e+=1)t[Eb[e].charCodeAt(0)]=-2;for(let e=0;e<id.length;e+=1)t[id[e].charCodeAt(0)]=e;return t})();function Tb(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const i=e.queue>>e.queuedBits-6&63;n(id[i]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const i=e.queue>>e.queuedBits-6&63;n(id[i]),e.queuedBits-=6}}function pw(t,e,n){const i=dR[t];if(i>-1)for(e.queue=e.queue<<6|i,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Ob(t){const e=[],n=l=>{e.push(String.fromCodePoint(l))},i={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},o=l=>{gR(l,i,n)};for(let l=0;l<t.length;l+=1)pw(t.charCodeAt(l),a,o);return e.join("")}function hR(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function fR(t,e){for(let n=0;n<t.length;n+=1){let i=t.charCodeAt(n);if(i>55295&&i<=56319){const a=(i-55296)*1024&65535;i=(t.charCodeAt(n+1)-56320&65535|a)+65536,n+=1}hR(i,e)}}function gR(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let i=1;i<6;i+=1)if((t>>7-i&1)===0){e.utf8seq=i;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function mR(t){const e=[],n={queue:0,queuedBits:0},i=a=>{e.push(a)};for(let a=0;a<t.length;a+=1)pw(t.charCodeAt(a),n,i);return new Uint8Array(e)}function pR(t){const e=[];return fR(t,n=>e.push(n)),new Uint8Array(e)}function vR(t){const e=[],n={queue:0,queuedBits:0},i=a=>{e.push(a)};return t.forEach(a=>Tb(a,n,i)),Tb(null,n,i),e.join("")}function yR(t){return Math.round(Date.now()/1e3)+t}function _R(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const fi=()=>typeof window<"u"&&typeof document<"u",Oa={tested:!1,writable:!1},vw=()=>{if(!fi())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Oa.tested)return Oa.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Oa.tested=!0,Oa.writable=!0}catch{Oa.tested=!0,Oa.writable=!1}return Oa.writable};function bR(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((a,o)=>{e[o]=a})}catch{}return n.searchParams.forEach((i,a)=>{e[a]=i}),e}const yw=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Ha(async()=>{const{default:i}=await Promise.resolve().then(()=>io);return{default:i}},void 0).then(({default:i})=>i(...n)):e=fetch,(...n)=>e(...n)},SR=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Vr=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},Aa=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Ys=async(t,e)=>{await t.removeItem(e)};class Td{constructor(){this.promise=new Td.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}Td.promiseConstructor=Promise;function rg(t){const e=t.split(".");if(e.length!==3)throw new Vg("Invalid JWT structure");for(let i=0;i<e.length;i++)if(!aR.test(e[i]))throw new Vg("JWT not in base64url format");return{header:JSON.parse(Ob(e[0])),payload:JSON.parse(Ob(e[1])),signature:mR(e[2]),raw:{header:e[0],payload:e[1]}}}async function wR(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function xR(t,e){return new Promise((i,a)=>{(async()=>{for(let o=0;o<1/0;o++)try{const l=await t(o);if(!e(o,null,l)){i(l);return}}catch(l){if(!e(o,l)){a(l);return}}})()})}function CR(t){return("0"+t.toString(16)).substr(-2)}function ER(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=n.length;let a="";for(let o=0;o<56;o++)a+=n.charAt(Math.floor(Math.random()*i));return a}return crypto.getRandomValues(e),Array.from(e,CR).join("")}async function TR(t){const n=new TextEncoder().encode(t),i=await crypto.subtle.digest("SHA-256",n),a=new Uint8Array(i);return Array.from(a).map(o=>String.fromCharCode(o)).join("")}async function OR(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await TR(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Lr(t,e,n=!1){const i=ER();let a=i;n&&(a+="/PASSWORD_RECOVERY"),await Vr(t,`${e}-code-verifier`,a);const o=await OR(i);return[o,i===o?"plain":"s256"]}const AR=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function RR(t){const e=t.headers.get(Bg);if(!e||!e.match(AR))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function DR(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function MR(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const kR=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Pr(t){if(!kR.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function og(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Ab(t){return JSON.parse(JSON.stringify(t))}var NR=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(t);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(t,i[a])&&(n[i[a]]=t[i[a]]);return n};const ka=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),jR=[502,503,504];async function Rb(t){var e;if(!SR(t))throw new $g(ka(t),0);if(jR.includes(t.status))throw new $g(ka(t),t.status);let n;try{n=await t.json()}catch(o){throw new mw(ka(o),o)}let i;const a=RR(t);if(a&&a.getTime()>=gw["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?i=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(i=n.error_code),i){if(i==="weak_password")throw new Cb(ka(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(i==="session_not_found")throw new Ks}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((o,l)=>o&&typeof l=="string",!0))throw new Cb(ka(n),t.status,n.weak_password.reasons);throw new oR(ka(n),t.status||500,i)}const LR=(t,e,n,i)=>{const a={method:t,headers:e?.headers||{}};return t==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),a.body=JSON.stringify(i),Object.assign(Object.assign({},a),n))};async function Be(t,e,n,i){var a;const o=Object.assign({},i?.headers);o[Bg]||(o[Bg]=gw["2024-01-01"].name),i?.jwt&&(o.Authorization=`Bearer ${i.jwt}`);const l=(a=i?.query)!==null&&a!==void 0?a:{};i?.redirectTo&&(l.redirect_to=i.redirectTo);const u=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",d=await PR(t,e,n+u,{headers:o,noResolveJson:i?.noResolveJson},{},i?.body);return i?.xform?i?.xform(d):{data:Object.assign({},d),error:null}}async function PR(t,e,n,i,a,o){const l=LR(e,i,a,o);let u;try{u=await t(n,Object.assign({},l))}catch(d){throw console.error(d),new $g(ka(d),0)}if(u.ok||await Rb(u),i?.noResolveJson)return u;try{return await u.json()}catch(d){await Rb(d)}}function cs(t){var e;let n=null;UR(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=yR(t.expires_in)));const i=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:i},error:null}}function Db(t){const e=cs(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,i)=>n&&typeof i=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Qs(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function IR(t){return{data:t,error:null}}function zR(t){const{action_link:e,email_otp:n,hashed_token:i,redirect_to:a,verification_type:o}=t,l=NR(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),u={action_link:e,email_otp:n,hashed_token:i,redirect_to:a,verification_type:o},d=Object.assign({},l);return{data:{properties:u,user:d},error:null}}function FR(t){return t}function UR(t){return t.access_token&&t.refresh_token&&t.expires_in}const lg=["global","local","others"];var HR=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(t);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(t,i[a])&&(n[i[a]]=t[i[a]]);return n};class BR{constructor({url:e="",headers:n={},fetch:i}){this.url=e,this.headers=n,this.fetch=yw(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n=lg[0]){if(lg.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${lg.join(", ")}`);try{return await Be(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(i){if(Le(i))return{data:null,error:i};throw i}}async inviteUserByEmail(e,n={}){try{return await Be(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Qs})}catch(i){if(Le(i))return{data:{user:null},error:i};throw i}}async generateLink(e){try{const{options:n}=e,i=HR(e,["options"]),a=Object.assign(Object.assign({},i),n);return"newEmail"in i&&(a.new_email=i?.newEmail,delete a.newEmail),await Be(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:zR,redirectTo:n?.redirectTo})}catch(n){if(Le(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await Be(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Qs})}catch(n){if(Le(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,i,a,o,l,u,d;try{const f={nextPage:null,lastPage:0,total:0},g=await Be(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(n=e?.page)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:"",per_page:(o=(a=e?.perPage)===null||a===void 0?void 0:a.toString())!==null&&o!==void 0?o:""},xform:FR});if(g.error)throw g.error;const p=await g.json(),_=(l=g.headers.get("x-total-count"))!==null&&l!==void 0?l:0,b=(d=(u=g.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&d!==void 0?d:[];return b.length>0&&(b.forEach(S=>{const w=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(S.split(";")[1].split("=")[1]);f[`${x}Page`]=w}),f.total=parseInt(_)),{data:Object.assign(Object.assign({},p),f),error:null}}catch(f){if(Le(f))return{data:{users:[]},error:f};throw f}}async getUserById(e){Pr(e);try{return await Be(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Qs})}catch(n){if(Le(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Pr(e);try{return await Be(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Qs})}catch(i){if(Le(i))return{data:{user:null},error:i};throw i}}async deleteUser(e,n=!1){Pr(e);try{return await Be(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Qs})}catch(i){if(Le(i))return{data:{user:null},error:i};throw i}}async _listFactors(e){Pr(e.userId);try{const{data:n,error:i}=await Be(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:n,error:i}}catch(n){if(Le(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Pr(e.userId),Pr(e.id);try{return{data:await Be(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(Le(n))return{data:null,error:n};throw n}}}function Mb(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function $R(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Ir={debug:!!(globalThis&&vw()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class _w extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class VR extends _w{}async function qR(t,e,n){Ir.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const i=new globalThis.AbortController;return e>0&&setTimeout(()=>{i.abort(),Ir.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async a=>{if(a){Ir.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,a.name);try{return await n()}finally{Ir.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,a.name)}}else{if(e===0)throw Ir.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new VR(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Ir.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}$R();const GR={url:nR,storageKey:iR,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:sR,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function kb(t,e,n){return await n()}const zr={};class Hl{constructor(e){var n,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Hl.nextInstanceID,Hl.nextInstanceID+=1,this.instanceID>0&&fi()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},GR),e);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new BR({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=yw(a.fetch),this.lock=a.lock||kb,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:fi()&&(!((n=globalThis?.navigator)===null||n===void 0)&&n.locks)?this.lock=qR:this.lock=kb,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:vw()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Mb(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=Mb(this.memoryStorage)),fi()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}get jwks(){var e,n;return(n=(e=zr[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){zr[this.storageKey]=Object.assign(Object.assign({},zr[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=zr[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){zr[this.storageKey]=Object.assign(Object.assign({},zr[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${fw}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=bR(window.location.href);let i="none";if(this._isImplicitGrantCallback(n)?i="implicit":await this._isPKCECallback(n)&&(i="pkce"),fi()&&this.detectSessionInUrl&&i!=="none"){const{data:a,error:o}=await this._getSessionFromURL(n,i);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),uR(o)){const d=(e=o.details)===null||e===void 0?void 0:e.code;if(d==="identity_already_exists"||d==="identity_not_found"||d==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:l,redirectType:u}=a;return this._debug("#_initialize()","detected session in URL",l,"redirect type",u),await this._saveSession(l),setTimeout(async()=>{u==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Le(n)?{error:n}:{error:new mw("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,i,a;try{const o=await Be(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(n=e?.options)===null||n===void 0?void 0:n.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(a=e?.options)===null||a===void 0?void 0:a.captchaToken}},xform:cs}),{data:l,error:u}=o;if(u||!l)return{data:{user:null,session:null},error:u};const d=l.session,f=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:f,session:d},error:null}}catch(o){if(Le(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(e){var n,i,a;try{let o;if("email"in e){const{email:g,password:p,options:_}=e;let b=null,S=null;this.flowType==="pkce"&&([b,S]=await Lr(this.storage,this.storageKey)),o=await Be(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:_?.emailRedirectTo,body:{email:g,password:p,data:(n=_?.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:_?.captchaToken},code_challenge:b,code_challenge_method:S},xform:cs})}else if("phone"in e){const{phone:g,password:p,options:_}=e;o=await Be(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:g,password:p,data:(i=_?.data)!==null&&i!==void 0?i:{},channel:(a=_?.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:_?.captchaToken}},xform:cs})}else throw new Ou("You must provide either an email or phone number and a password");const{data:l,error:u}=o;if(u||!l)return{data:{user:null,session:null},error:u};const d=l.session,f=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:f,session:d},error:null}}catch(o){if(Le(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(e){try{let n;if("email"in e){const{email:o,password:l,options:u}=e;n=await Be(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:l,gotrue_meta_security:{captcha_token:u?.captchaToken}},xform:Db})}else if("phone"in e){const{phone:o,password:l,options:u}=e;n=await Be(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:l,gotrue_meta_security:{captcha_token:u?.captchaToken}},xform:Db})}else throw new Ou("You must provide either an email or phone number and a password");const{data:i,error:a}=n;return a?{data:{user:null,session:null},error:a}:!i||!i.session||!i.user?{data:{user:null,session:null},error:new Tu}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:a})}catch(n){if(Le(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,i,a,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(i=e.options)===null||i===void 0?void 0:i.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;if(n==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(e){var n,i,a,o,l,u,d,f,g,p,_,b;let S,w;if("message"in e)S=e.message,w=e.signature;else{const{chain:x,wallet:C,statement:T,options:O}=e;let M;if(fi())if(typeof C=="object")M=C;else{const U=window;if("solana"in U&&typeof U.solana=="object"&&("signIn"in U.solana&&typeof U.solana.signIn=="function"||"signMessage"in U.solana&&typeof U.solana.signMessage=="function"))M=U.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof C!="object"||!O?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");M=C}const D=new URL((n=O?.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in M&&M.signIn){const U=await M.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},O?.signInWithSolana),{version:"1",domain:D.host,uri:D.href}),T?{statement:T}:null));let L;if(Array.isArray(U)&&U[0]&&typeof U[0]=="object")L=U[0];else if(U&&typeof U=="object"&&"signedMessage"in U&&"signature"in U)L=U;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in L&&"signature"in L&&(typeof L.signedMessage=="string"||L.signedMessage instanceof Uint8Array)&&L.signature instanceof Uint8Array)S=typeof L.signedMessage=="string"?L.signedMessage:new TextDecoder().decode(L.signedMessage),w=L.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in M)||typeof M.signMessage!="function"||!("publicKey"in M)||typeof M!="object"||!M.publicKey||!("toBase58"in M.publicKey)||typeof M.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");S=[`${D.host} wants you to sign in with your Solana account:`,M.publicKey.toBase58(),...T?["",T,""]:[""],"Version: 1",`URI: ${D.href}`,`Issued At: ${(a=(i=O?.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((o=O?.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${O.signInWithSolana.notBefore}`]:[],...!((l=O?.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${O.signInWithSolana.expirationTime}`]:[],...!((u=O?.signInWithSolana)===null||u===void 0)&&u.chainId?[`Chain ID: ${O.signInWithSolana.chainId}`]:[],...!((d=O?.signInWithSolana)===null||d===void 0)&&d.nonce?[`Nonce: ${O.signInWithSolana.nonce}`]:[],...!((f=O?.signInWithSolana)===null||f===void 0)&&f.requestId?[`Request ID: ${O.signInWithSolana.requestId}`]:[],...!((p=(g=O?.signInWithSolana)===null||g===void 0?void 0:g.resources)===null||p===void 0)&&p.length?["Resources",...O.signInWithSolana.resources.map(L=>`- ${L}`)]:[]].join(`
`);const U=await M.signMessage(new TextEncoder().encode(S),"utf8");if(!U||!(U instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");w=U}}try{const{data:x,error:C}=await Be(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:S,signature:vR(w)},!((_=e.options)===null||_===void 0)&&_.captchaToken?{gotrue_meta_security:{captcha_token:(b=e.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:cs});if(C)throw C;return!x||!x.session||!x.user?{data:{user:null,session:null},error:new Tu}:(x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),{data:Object.assign({},x),error:C})}catch(x){if(Le(x))return{data:{user:null,session:null},error:x};throw x}}async _exchangeCodeForSession(e){const n=await Aa(this.storage,`${this.storageKey}-code-verifier`),[i,a]=(n??"").split("/");try{const{data:o,error:l}=await Be(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:i},xform:cs});if(await Ys(this.storage,`${this.storageKey}-code-verifier`),l)throw l;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new Tu}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:a??null}),error:l})}catch(o){if(Le(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(e){try{const{options:n,provider:i,token:a,access_token:o,nonce:l}=e,u=await Be(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:a,access_token:o,nonce:l,gotrue_meta_security:{captcha_token:n?.captchaToken}},xform:cs}),{data:d,error:f}=u;return f?{data:{user:null,session:null},error:f}:!d||!d.session||!d.user?{data:{user:null,session:null},error:new Tu}:(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),{data:d,error:f})}catch(n){if(Le(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,i,a,o,l;try{if("email"in e){const{email:u,options:d}=e;let f=null,g=null;this.flowType==="pkce"&&([f,g]=await Lr(this.storage,this.storageKey));const{error:p}=await Be(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:u,data:(n=d?.data)!==null&&n!==void 0?n:{},create_user:(i=d?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:d?.captchaToken},code_challenge:f,code_challenge_method:g},redirectTo:d?.emailRedirectTo});return{data:{user:null,session:null},error:p}}if("phone"in e){const{phone:u,options:d}=e,{data:f,error:g}=await Be(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:u,data:(a=d?.data)!==null&&a!==void 0?a:{},create_user:(o=d?.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:d?.captchaToken},channel:(l=d?.channel)!==null&&l!==void 0?l:"sms"}});return{data:{user:null,session:null,messageId:f?.message_id},error:g}}throw new Ou("You must provide either an email or phone number.")}catch(u){if(Le(u))return{data:{user:null,session:null},error:u};throw u}}async verifyOtp(e){var n,i;try{let a,o;"options"in e&&(a=(n=e.options)===null||n===void 0?void 0:n.redirectTo,o=(i=e.options)===null||i===void 0?void 0:i.captchaToken);const{data:l,error:u}=await Be(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:a,xform:cs});if(u)throw u;if(!l)throw new Error("An error occurred on token verification.");const d=l.session,f=l.user;return d?.access_token&&(await this._saveSession(d),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",d)),{data:{user:f,session:d},error:null}}catch(a){if(Le(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(e){var n,i,a;try{let o=null,l=null;return this.flowType==="pkce"&&([o,l]=await Lr(this.storage,this.storageKey)),await Be(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(i=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&i!==void 0?i:void 0}),!((a=e?.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:l}),headers:this.headers,xform:IR})}catch(o){if(Le(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:i}=e;if(i)throw i;if(!n)throw new Ks;const{error:a}=await Be(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:a}})}catch(e){if(Le(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:i,type:a,options:o}=e,{error:l}=await Be(this.fetch,"POST",n,{headers:this.headers,body:{email:i,type:a,gotrue_meta_security:{captcha_token:o?.captchaToken}},redirectTo:o?.emailRedirectTo});return{data:{user:null,session:null},error:l}}else if("phone"in e){const{phone:i,type:a,options:o}=e,{data:l,error:u}=await Be(this.fetch,"POST",n,{headers:this.headers,body:{phone:i,type:a,gotrue_meta_security:{captcha_token:o?.captchaToken}}});return{data:{user:null,session:null,messageId:l?.message_id},error:u}}throw new Ou("You must provide either an email or phone number and a type")}catch(n){if(Le(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await i,await n()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=n();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Aa(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const i=e.expires_at?e.expires_at*1e3-Date.now()<sg:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",e.expires_at),!i){if(this.userStorage){const l=await Aa(this.userStorage,this.storageKey+"-user");l?.user?e.user=l.user:e.user=og()}if(this.storage.isServer&&e.user){let l=this.suppressGetSessionWarning;e=new Proxy(e,{get:(d,f,g)=>(!l&&f==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),l=!0,this.suppressGetSessionWarning=!0),Reflect.get(d,f,g))})}return{data:{session:e},error:null}}const{session:a,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{session:null},error:o}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Be(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Qs}):await this._useSession(async n=>{var i,a,o;const{data:l,error:u}=n;if(u)throw u;return!(!((i=l.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ks}:await Be(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(a=l.session)===null||a===void 0?void 0:a.access_token)!==null&&o!==void 0?o:void 0,xform:Qs})})}catch(n){if(Le(n))return cR(n)&&(await this._removeSession(),await Ys(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async i=>{const{data:a,error:o}=i;if(o)throw o;if(!a.session)throw new Ks;const l=a.session;let u=null,d=null;this.flowType==="pkce"&&e.email!=null&&([u,d]=await Lr(this.storage,this.storageKey));const{data:f,error:g}=await Be(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:u,code_challenge_method:d}),jwt:l.access_token,xform:Qs});if(g)throw g;return l.user=f.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}})}catch(i){if(Le(i))return{data:{user:null},error:i};throw i}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Ks;const n=Date.now()/1e3;let i=n,a=!0,o=null;const{payload:l}=rg(e.access_token);if(l.exp&&(i=l.exp,a=i<=n),a){const{session:u,error:d}=await this._callRefreshToken(e.refresh_token);if(d)return{data:{user:null,session:null},error:d};if(!u)return{data:{user:null,session:null},error:null};o=u}else{const{data:u,error:d}=await this._getUser(e.access_token);if(d)throw d;o={access_token:e.access_token,refresh_token:e.refresh_token,user:u.user,token_type:"bearer",expires_in:i-n,expires_at:i},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(n){if(Le(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var i;if(!e){const{data:l,error:u}=n;if(u)throw u;e=(i=l.session)!==null&&i!==void 0?i:void 0}if(!e?.refresh_token)throw new Ks;const{session:a,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{user:null,session:null},error:o}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(Le(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!fi())throw new Au("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Au(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new xb("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Au("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new xb("No code detected.");const{data:T,error:O}=await this._exchangeCodeForSession(e.code);if(O)throw O;const M=new URL(window.location.href);return M.searchParams.delete("code"),window.history.replaceState(window.history.state,"",M.toString()),{data:{session:T.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:a,access_token:o,refresh_token:l,expires_in:u,expires_at:d,token_type:f}=e;if(!o||!u||!l||!f)throw new Au("No session defined in URL");const g=Math.round(Date.now()/1e3),p=parseInt(u);let _=g+p;d&&(_=parseInt(d));const b=_-g;b*1e3<=$r&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${b}s, should have been closer to ${p}s`);const S=_-p;g-S>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",S,_,g):g-S<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",S,_,g);const{data:w,error:x}=await this._getUser(o);if(x)throw x;const C={provider_token:i,provider_refresh_token:a,access_token:o,expires_in:p,expires_at:_,refresh_token:l,token_type:f,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:C,redirectType:e.type},error:null}}catch(i){if(Le(i))return{data:{session:null,redirectType:null},error:i};throw i}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Aa(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var i;const{data:a,error:o}=n;if(o)return{error:o};const l=(i=a.session)===null||i===void 0?void 0:i.access_token;if(l){const{error:u}=await this.admin.signOut(l,e);if(u&&!(lR(u)&&(u.status===404||u.status===401||u.status===403)))return{error:u}}return e!=="others"&&(await this._removeSession(),await Ys(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=_R(),i={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,i),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:i}}}async _emitInitialSession(e){return await this._useSession(async n=>{var i,a;try{const{data:{session:o},error:l}=n;if(l)throw l;await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,n={}){let i=null,a=null;this.flowType==="pkce"&&([i,a]=await Lr(this.storage,this.storageKey,!0));try{return await Be(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:i,code_challenge_method:a,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(o){if(Le(o))return{data:null,error:o};throw o}}async getUserIdentities(){var e;try{const{data:n,error:i}=await this.getUser();if(i)throw i;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(Le(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:i,error:a}=await this._useSession(async o=>{var l,u,d,f,g;const{data:p,error:_}=o;if(_)throw _;const b=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(l=e.options)===null||l===void 0?void 0:l.redirectTo,scopes:(u=e.options)===null||u===void 0?void 0:u.scopes,queryParams:(d=e.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:!0});return await Be(this.fetch,"GET",b,{headers:this.headers,jwt:(g=(f=p.session)===null||f===void 0?void 0:f.access_token)!==null&&g!==void 0?g:void 0})});if(a)throw a;return fi()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(i?.url),{data:{provider:e.provider,url:i?.url},error:null}}catch(i){if(Le(i))return{data:{provider:e.provider,url:null},error:i};throw i}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var i,a;const{data:o,error:l}=n;if(l)throw l;return await Be(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(a=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&a!==void 0?a:void 0})})}catch(n){if(Le(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const i=Date.now();return await xR(async a=>(a>0&&await wR(200*Math.pow(2,a-1)),this._debug(n,"refreshing attempt",a),await Be(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:cs})),(a,o)=>{const l=200*Math.pow(2,a);return o&&ag(o)&&Date.now()+l-i<$r})}catch(i){if(this._debug(n,"error",i),Le(i))return{data:{session:null,user:null},error:i};throw i}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const i=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",i),fi()&&!n.skipBrowserRedirect&&window.location.assign(i),{data:{provider:e,url:i},error:null}}async _recoverAndRefresh(){var e,n;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const a=await Aa(this.storage,this.storageKey);if(a&&this.userStorage){let l=await Aa(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:a.user},await Vr(this.userStorage,this.storageKey+"-user",l)),a.user=(e=l?.user)!==null&&e!==void 0?e:og()}else if(a&&!a.user&&!a.user){const l=await Aa(this.storage,this.storageKey+"-user");l&&l?.user?(a.user=l.user,await Ys(this.storage,this.storageKey+"-user"),await Vr(this.storage,this.storageKey,a)):a.user=og()}if(this._debug(i,"session from storage",a),!this._isValidSession(a)){this._debug(i,"session is not valid"),a!==null&&await this._removeSession();return}const o=((n=a.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<sg;if(this._debug(i,`session has${o?"":" not"} expired with margin of ${sg}s`),o){if(this.autoRefreshToken&&a.refresh_token){const{error:l}=await this._callRefreshToken(a.refresh_token);l&&(console.error(l),ag(l)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:u}=await this._getUser(a.access_token);!u&&l?.user?(a.user=l.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(i,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(i,"error",a),console.error(a);return}finally{this._debug(i,"end")}}async _callRefreshToken(e){var n,i;if(!e)throw new Ks;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Td;const{data:o,error:l}=await this._refreshAccessToken(e);if(l)throw l;if(!o.session)throw new Ks;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const u={session:o.session,error:null};return this.refreshingDeferred.resolve(u),u}catch(o){if(this._debug(a,"error",o),Le(o)){const l={session:null,error:o};return ag(o)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(l),l}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(o),o}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(e,n,i=!0){const a=`#_notifyAllSubscribers(${e})`;this._debug(a,"begin",n,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:e,session:n});const o=[],l=Array.from(this.stateChangeEmitters.values()).map(async u=>{try{await u.callback(e,n)}catch(d){o.push(d)}});if(await Promise.all(l),o.length>0){for(let u=0;u<o.length;u+=1)console.error(o[u]);throw o[0]}}finally{this._debug(a,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const n=Object.assign({},e),i=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&n.user&&await Vr(this.userStorage,this.storageKey+"-user",{user:n.user});const a=Object.assign({},n);delete a.user;const o=Ab(a);await Vr(this.storage,this.storageKey,o)}else{const a=Ab(n);await Vr(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await Ys(this.storage,this.storageKey),await Ys(this.storage,this.storageKey+"-code-verifier"),await Ys(this.storage,this.storageKey+"-user"),this.userStorage&&await Ys(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&fi()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),$r);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:i}}=n;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((i.expires_at*1e3-e)/$r);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${$r}ms, refresh threshold is ${Hg} ticks`),a<=Hg&&await this._callRefreshToken(i.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof _w)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!fi()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,i){const a=[`provider=${encodeURIComponent(n)}`];if(i?.redirectTo&&a.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i?.scopes&&a.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[o,l]=await Lr(this.storage,this.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(l)}`});a.push(u.toString())}if(i?.queryParams){const o=new URLSearchParams(i.queryParams);a.push(o.toString())}return i?.skipBrowserRedirect&&a.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${e}?${a.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var i;const{data:a,error:o}=n;return o?{data:null,error:o}:await Be(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(i=a?.session)===null||i===void 0?void 0:i.access_token})})}catch(n){if(Le(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var i,a;const{data:o,error:l}=n;if(l)return{data:null,error:l};const u=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:d,error:f}=await Be(this.fetch,"POST",`${this.url}/factors`,{body:u,headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token});return f?{data:null,error:f}:(e.factorType==="totp"&&(!((a=d?.totp)===null||a===void 0)&&a.qr_code)&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),{data:d,error:null})})}catch(n){if(Le(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var i;const{data:a,error:o}=n;if(o)return{data:null,error:o};const{data:l,error:u}=await Be(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(i=a?.session)===null||i===void 0?void 0:i.access_token});return u?{data:null,error:u}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:u})})}catch(n){if(Le(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var i;const{data:a,error:o}=n;return o?{data:null,error:o}:await Be(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(i=a?.session)===null||i===void 0?void 0:i.access_token})})}catch(n){if(Le(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:i}=await this._challenge({factorId:e.factorId});return i?{data:null,error:i}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const i=e?.factors||[],a=i.filter(l=>l.factor_type==="totp"&&l.status==="verified"),o=i.filter(l=>l.factor_type==="phone"&&l.status==="verified");return{data:{all:i,totp:a,phone:o},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,i;const{data:{session:a},error:o}=e;if(o)return{data:null,error:o};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=rg(a.access_token);let u=null;l.aal&&(u=l.aal);let d=u;((i=(n=a.user.factors)===null||n===void 0?void 0:n.filter(p=>p.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(d="aal2");const g=l.amr||[];return{data:{currentLevel:u,nextLevel:d,currentAuthenticationMethods:g},error:null}}))}async fetchJwk(e,n={keys:[]}){let i=n.keys.find(u=>u.kid===e);if(i)return i;const a=Date.now();if(i=this.jwks.keys.find(u=>u.kid===e),i&&this.jwks_cached_at+rR>a)return i;const{data:o,error:l}=await Be(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=a,i=o.keys.find(u=>u.kid===e),!i)?null:i}async getClaims(e,n={}){try{let i=e;if(!i){const{data:b,error:S}=await this.getSession();if(S||!b.session)return{data:null,error:S};i=b.session.access_token}const{header:a,payload:o,signature:l,raw:{header:u,payload:d}}=rg(i);n?.allowExpired||DR(o.exp);const f=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,n?.keys?{keys:n.keys}:n?.jwks);if(!f){const{error:b}=await this.getUser(i);if(b)throw b;return{data:{claims:o,header:a,signature:l},error:null}}const g=MR(a.alg),p=await crypto.subtle.importKey("jwk",f,g,!0,["verify"]);if(!await crypto.subtle.verify(g,p,l,pR(`${u}.${d}`)))throw new Vg("Invalid JWT signature");return{data:{claims:o,header:a,signature:l},error:null}}catch(i){if(Le(i))return{data:null,error:i};throw i}}}Hl.nextInstanceID=0;const YR=Hl;class WR extends YR{constructor(e){super(e)}}var KR=function(t,e,n,i){function a(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(g){try{f(i.next(g))}catch(p){l(p)}}function d(g){try{f(i.throw(g))}catch(p){l(p)}}function f(g){g.done?o(g.value):a(g.value).then(u,d)}f((i=i.apply(t,e||[])).next())})};class XR{constructor(e,n,i){var a,o,l;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const u=eR(e),d=new URL(u);this.realtimeUrl=new URL("realtime/v1",d),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",d),this.storageUrl=new URL("storage/v1",d),this.functionsUrl=new URL("functions/v1",d);const f=`sb-${d.hostname.split(".")[0]}-auth-token`,g={db:GA,realtime:WA,auth:Object.assign(Object.assign({},YA),{storageKey:f}),global:qA},p=tR(i??{},g);this.storageKey=(a=p.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(o=p.global.headers)!==null&&o!==void 0?o:{},p.accessToken?(this.accessToken=p.accessToken,this.auth=new Proxy({},{get:(_,b)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(b)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((l=p.auth)!==null&&l!==void 0?l:{},this.headers,p.global.fetch),this.fetch=ZA(n,this._getAccessToken.bind(this),p.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},p.realtime)),this.rest=new hA(new URL("rest/v1",d).href,{headers:this.headers,schema:p.db.schema,fetch:this.fetch}),this.storage=new BA(this.storageUrl.href,this.headers,this.fetch,i?.storage),p.accessToken||this._listenForAuthEvents()}get functions(){return new eA(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},i={}){return this.rest.rpc(e,n,i)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return KR(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:i}=yield this.auth.getSession();return(n=(e=i.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:i,storage:a,storageKey:o,flowType:l,lock:u,debug:d},f,g){const p={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new WR({url:this.authUrl.href,headers:Object.assign(Object.assign({},p),f),storageKey:o,autoRefreshToken:e,persistSession:n,detectSessionInUrl:i,storage:a,flowType:l,lock:u,debug:d,fetch:g,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new RA(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,i)=>{this._handleTokenChanged(n,"CLIENT",i?.access_token)})}_handleTokenChanged(e,n,i){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==i?this.changedAccessToken=i:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const QR=(t,e,n)=>new XR(t,e,n);function ZR(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}ZR()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const JR="https://jyrfznujcyqskpfthrsf.supabase.co",eD="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imp5cmZ6bnVqY3lxc2twZnRocnNmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUwODM1OTMsImV4cCI6MjA3MDY1OTU5M30.JOZLGHslSQO7wDeFSq7FHAV6_VNtD9DS-gMNUu4rEnM",rt=QR(JR,eD,{auth:{persistSession:!0,autoRefreshToken:!0},realtime:{params:{eventsPerSecond:10}}}),tn=(t,e="")=>t.code==="23505"?"This record already exists":t.code==="23503"?"Cannot perform this operation due to related records":t.code==="PGRST116"?"No records found":t.message?.includes("JWT")?"Authentication error. Please refresh the page":t.message||"An unexpected error occurred",Nt={PRINTING:"STAMPA",PACKAGING:"CONFEZIONAMENTO"},Me={ZANICA:"ZANICA",BUSTO_GAROLFO:"BUSTO_GAROLFO",BOTH:"BOTH"},ii={ACTIVE:"ACTIVE",INACTIVE:"INACTIVE",MAINTENANCE:"MAINTENANCE"},Gr={CREMA:"crema",LIQUIDO:"liquido",POLVERI:"polveri"},ji={T1:"T1",T2:"T2",T3:"T3"},Bl={THREE:"3",FOUR:"4"},Nb={END_DATE_BEFORE_START:"End date cannot be before start date",END_TIME_BEFORE_START:"End time must be after start time when dates are the same"},xt={MACHINE:{DEPARTMENT:Nt.PRINTING,WORK_CENTER:Me.ZANICA,MIN_WEB_WIDTH:"100",MAX_WEB_WIDTH:"1000",MIN_BAG_HEIGHT:"50",MAX_BAG_HEIGHT:"500",SETUP_TIME_STANDARD:"0.5",CHANGEOVER_COLOR:"0.25",CHANGEOVER_MATERIAL:"0.75",ACTIVE_SHIFTS:[ji.T1],STATUS:ii.ACTIVE},PHASE:{DEPARTMENT:Nt.PRINTING,NUMERO_PERSONE:1,WORK_CENTER:Me.ZANICA,V_STAMPA:6e3,T_SETUP_STAMPA:.5,COSTO_H_STAMPA:50,V_CONF:1e3,T_SETUP_CONF:.25,COSTO_H_CONF:40},ORDER:{SEAL_SIDES:Bl.THREE,QUANTITY_COMPLETED:0},OFF_TIME:{START_TIME:"09:00",END_TIME:"17:00"}},ll={DECIMAL_PRECISION:{ONE_DECIMAL:["setup_time_standard","changeover_color","changeover_material","t_setup_stampa","t_setup_conf"],TWO_DECIMAL:["costo_h_stampa","costo_h_conf"]},FIELD_STEPS:{TIME:.1,COST:.01}},bw=A.createContext(),tD=({children:t})=>{const[e,n]=A.useState(null),[i,a]=A.useState(null),[o,l]=A.useState(!0),[u,d]=A.useState(null);A.useEffect(()=>{(async()=>{try{const{data:{session:T},error:O}=await rt.auth.getSession();O?d("Failed to initialize authentication"):(a(T),n(T?.user??null))}catch{d("Failed to initialize authentication")}finally{l(!1)}})();const{data:{subscription:C}}=rt.auth.onAuthStateChange(async(T,O)=>{a(O),n(O?.user??null),l(!1),d(null)});return()=>C.unsubscribe()},[]);const w={user:e,session:i,loading:o,error:u,signIn:async(x,C)=>{try{d(null),l(!0);const{data:T,error:O}=await rt.auth.signInWithPassword({email:x,password:C});if(O)throw O;return{success:!0,user:T.user}}catch(T){return d(T.message),{success:!1,error:T.message}}finally{l(!1)}},signUp:async(x,C,T={})=>{try{d(null),l(!0);const{data:O,error:M}=await rt.auth.signUp({email:x,password:C,options:{data:T}});if(M)throw M;return{success:!0,user:O.user}}catch(O){return d(O.message),{success:!1,error:O.message}}finally{l(!1)}},signOut:async()=>{try{d(null),l(!0);const{error:x}=await rt.auth.signOut();if(x)throw x;return{success:!0}}catch(x){return d(x.message),{success:!1,error:x.message}}finally{l(!1)}},resetPassword:async x=>{try{d(null),l(!0);const{error:C}=await rt.auth.resetPasswordForEmail(x,{redirectTo:`${window.location.origin}/reset-password`});if(C)throw C;return{success:!0}}catch(C){return d(C.message),{success:!1,error:C.message}}finally{l(!1)}},updateProfile:async x=>{try{d(null),l(!0);const{data:C,error:T}=await rt.auth.updateUser({data:x});if(T)throw T;return{success:!0,user:C.user}}catch(C){return d(C.message),{success:!1,error:C.message}}finally{l(!1)}},getUserProfile:async()=>{if(!e)return null;try{const{data:x,error:C}=await rt.from("profiles").select("*").eq("id",e.id).single();return C?null:x}catch{return null}},isAuthenticated:!!e};return y.jsx(bw.Provider,{value:w,children:t})},sc=()=>{const t=A.useContext(bw);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},jb=t=>{let e;const n=new Set,i=(f,g)=>{const p=typeof f=="function"?f(e):f;if(!Object.is(p,e)){const _=e;e=g??(typeof p!="object"||p===null)?p:Object.assign({},e,p),n.forEach(b=>b(e,_))}},a=()=>e,u={setState:i,getState:a,getInitialState:()=>d,subscribe:f=>(n.add(f),()=>n.delete(f))},d=e=t(i,a,u);return u},nD=(t=>t?jb(t):jb),iD=t=>t;function sD(t,e=iD){const n=Pe.useSyncExternalStore(t.subscribe,Pe.useCallback(()=>e(t.getState()),[t,e]),Pe.useCallback(()=>e(t.getInitialState()),[t,e]));return Pe.useDebugValue(n),n}const Lb=t=>{const e=nD(t),n=i=>sD(e,i);return Object.assign(n,e),n},so=(t=>t?Lb(t):Lb);class vn extends Error{constructor(e,n="GENERIC_ERROR",i=500,a=null,o=""){super(e),this.name="AppError",this.code=n,this.statusCode=i,this.originalError=a,this.context=o,this.timestamp=new Date().toISOString(),this.id=this.generateErrorId(),this.userMessage=this.getUserFriendlyMessage()}generateErrorId(){return`ERR_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}getUserFriendlyMessage(){return aD(this)}toJSON(){return{id:this.id,message:this.message,code:this.code,statusCode:this.statusCode,context:this.context,timestamp:this.timestamp,userMessage:this.userMessage,stack:this.stack}}}const $e={VALIDATION_ERROR:"VALIDATION_ERROR",NETWORK_ERROR:"NETWORK_ERROR",AUTHENTICATION_ERROR:"AUTHENTICATION_ERROR",AUTHORIZATION_ERROR:"AUTHORIZATION_ERROR",NOT_FOUND_ERROR:"NOT_FOUND_ERROR",SERVER_ERROR:"SERVER_ERROR",CLIENT_ERROR:"CLIENT_ERROR",BUSINESS_LOGIC_ERROR:"BUSINESS_LOGIC_ERROR",TIMEOUT_ERROR:"TIMEOUT_ERROR",RATE_LIMIT_ERROR:"RATE_LIMIT_ERROR"},Js={LOW:"low",MEDIUM:"medium",HIGH:"high",CRITICAL:"critical"},Vn=(t,e="")=>{if(t instanceof vn)return t;if(t?.code)switch(t.code){case"23505":return new vn("This record already exists",$e.VALIDATION_ERROR,409,t,e);case"23503":return new vn("Cannot delete this record as it is referenced by other data",$e.VALIDATION_ERROR,400,t,e);case"PGRST116":return new vn("Record not found",$e.NOT_FOUND_ERROR,404,t,e);case"PGRST301":return new vn("Session expired. Please log in again.",$e.AUTHENTICATION_ERROR,401,t,e);case"PGRST302":return new vn("Invalid session. Please log in again.",$e.AUTHENTICATION_ERROR,401,t,e);case"PGRST303":return new vn("Authentication required. Please log in.",$e.AUTHENTICATION_ERROR,401,t,e);default:return new vn(t.message||"An unexpected error occurred",$e.SERVER_ERROR,500,t,e)}return t.name==="NetworkError"||t.message?.includes("fetch")||t.message?.includes("network")?new vn("Network error. Please check your connection and try again.",$e.NETWORK_ERROR,0,t,e):t.name==="TimeoutError"||t.message?.includes("timeout")?new vn("Request timed out. Please try again.",$e.TIMEOUT_ERROR,408,t,e):t.status===429||t.message?.includes("rate limit")?new vn("Too many requests. Please wait a moment and try again.",$e.RATE_LIMIT_ERROR,429,t,e):t.name==="ValidationError"||t.message?.includes("validation")?new vn(t.message,$e.VALIDATION_ERROR,400,t,e):t.message?.includes("Cannot add")||t.message?.includes("work center")?new vn(t.message,$e.BUSINESS_LOGIC_ERROR,400,t,e):new vn(t.message||"An unexpected error occurred",$e.CLIENT_ERROR,t.status||500,t,e)},mi=(t,e="")=>({id:t.id||`ERR_${Date.now()}`,message:t.message,code:t.code||"UNKNOWN_ERROR",context:e,timestamp:new Date().toISOString(),url:typeof window<"u"?window.location.href:"server",userAgent:typeof navigator<"u"?navigator.userAgent:"server",stack:t.stack,severity:Sw(t)}),Sw=t=>t.code===$e.AUTHENTICATION_ERROR||t.code===$e.AUTHORIZATION_ERROR?Js.HIGH:t.code===$e.NETWORK_ERROR||t.code===$e.SERVER_ERROR?Js.MEDIUM:t.code===$e.VALIDATION_ERROR||t.code===$e.BUSINESS_LOGIC_ERROR?Js.LOW:Js.MEDIUM,Cm=t=>e=>{const n=Vn(e,t);return mi(n,t),n},aD=t=>{switch(t.code){case $e.NETWORK_ERROR:return"Please check your internet connection and try again.";case $e.AUTHENTICATION_ERROR:return"Please log in to continue.";case $e.AUTHORIZATION_ERROR:return"You don't have permission to perform this action.";case $e.NOT_FOUND_ERROR:return"The requested item was not found.";case $e.VALIDATION_ERROR:return"Please check your input and try again.";case $e.BUSINESS_LOGIC_ERROR:return t.message||"This operation cannot be completed.";case $e.TIMEOUT_ERROR:return"The request took too long. Please try again.";case $e.RATE_LIMIT_ERROR:return"Too many requests. Please wait a moment and try again.";default:return"Something went wrong. Please try again or contact support if the problem persists."}},Pb=async(t,e=3,n=1e3)=>{let i;for(let a=1;a<=e;a++)try{return await t()}catch(o){if(i=o,o.code===$e.VALIDATION_ERROR||o.code===$e.AUTHORIZATION_ERROR||o.code===$e.BUSINESS_LOGIC_ERROR)throw o;a<e&&(await new Promise(l=>setTimeout(l,n)),n*=2)}throw i},qg=(t,e="")=>async(...n)=>{try{return await t(...n)}catch(i){const a=Vn(i,e);throw mi(a,e),a}},ww=6048e5,rD=864e5,xw=6e4,Em=36e5,Ib=Symbol.for("constructDateFrom");function Si(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&Ib in t?t[Ib](e):t instanceof Date?new t.constructor(e):new Date(e)}function Et(t,e){return Si(e||t,t)}function oD(t,e,n){const i=Et(t,n?.in);return isNaN(e)?Si(t,NaN):(e&&i.setDate(i.getDate()+e),i)}function lD(t,e,n){return Si(t,+Et(t)+e)}function cD(t,e,n){return lD(t,e*Em)}let uD={};function Od(){return uD}function Xr(t,e){const n=Od(),i=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,a=Et(t,e?.in),o=a.getDay(),l=(o<i?7:0)+o-i;return a.setDate(a.getDate()-l),a.setHours(0,0,0,0),a}function sd(t,e){return Xr(t,{...e,weekStartsOn:1})}function Cw(t,e){const n=Et(t,e?.in),i=n.getFullYear(),a=Si(n,0);a.setFullYear(i+1,0,4),a.setHours(0,0,0,0);const o=sd(a),l=Si(n,0);l.setFullYear(i,0,4),l.setHours(0,0,0,0);const u=sd(l);return n.getTime()>=o.getTime()?i+1:n.getTime()>=u.getTime()?i:i-1}function zb(t){const e=Et(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function dD(t,...e){const n=Si.bind(null,e.find(i=>typeof i=="object"));return e.map(n)}function Fb(t,e){const n=Et(t,e?.in);return n.setHours(0,0,0,0),n}function hD(t,e,n){const[i,a]=dD(n?.in,t,e),o=Fb(i),l=Fb(a),u=+o-zb(o),d=+l-zb(l);return Math.round((u-d)/rD)}function fD(t,e){const n=Cw(t,e),i=Si(t,0);return i.setFullYear(n,0,4),i.setHours(0,0,0,0),sd(i)}function gD(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function mD(t){return!(!gD(t)&&typeof t!="number"||isNaN(+Et(t)))}function pD(t,e){const n=Et(t,e?.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}function vD(t,e){const n=e?.weekStartsOn,i=Et(t,e?.in),a=i.getDay(),o=(a<n?-7:0)+6-(a-n);return i.setDate(i.getDate()+o),i.setHours(23,59,59,999),i}const yD={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},_D=(t,e,n)=>{let i;const a=yD[t];return typeof a=="string"?i=a:e===1?i=a.one:i=a.other.replace("{{count}}",e.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+i:i+" ago":i};function cg(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const bD={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},SD={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},wD={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},xD={date:cg({formats:bD,defaultWidth:"full"}),time:cg({formats:SD,defaultWidth:"full"}),dateTime:cg({formats:wD,defaultWidth:"full"})},CD={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},ED=(t,e,n,i)=>CD[t];function cl(t){return(e,n)=>{const i=n?.context?String(n.context):"standalone";let a;if(i==="formatting"&&t.formattingValues){const l=t.defaultFormattingWidth||t.defaultWidth,u=n?.width?String(n.width):l;a=t.formattingValues[u]||t.formattingValues[l]}else{const l=t.defaultWidth,u=n?.width?String(n.width):t.defaultWidth;a=t.values[u]||t.values[l]}const o=t.argumentCallback?t.argumentCallback(e):e;return a[o]}}const TD={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},OD={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},AD={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},RD={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},DD={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},MD={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},kD=(t,e)=>{const n=Number(t),i=n%100;if(i>20||i<10)switch(i%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},ND={ordinalNumber:kD,era:cl({values:TD,defaultWidth:"wide"}),quarter:cl({values:OD,defaultWidth:"wide",argumentCallback:t=>t-1}),month:cl({values:AD,defaultWidth:"wide"}),day:cl({values:RD,defaultWidth:"wide"}),dayPeriod:cl({values:DD,defaultWidth:"wide",formattingValues:MD,defaultFormattingWidth:"wide"})};function ul(t){return(e,n={})=>{const i=n.width,a=i&&t.matchPatterns[i]||t.matchPatterns[t.defaultMatchWidth],o=e.match(a);if(!o)return null;const l=o[0],u=i&&t.parsePatterns[i]||t.parsePatterns[t.defaultParseWidth],d=Array.isArray(u)?LD(u,p=>p.test(l)):jD(u,p=>p.test(l));let f;f=t.valueCallback?t.valueCallback(d):d,f=n.valueCallback?n.valueCallback(f):f;const g=e.slice(l.length);return{value:f,rest:g}}}function jD(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function LD(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function PD(t){return(e,n={})=>{const i=e.match(t.matchPattern);if(!i)return null;const a=i[0],o=e.match(t.parsePattern);if(!o)return null;let l=t.valueCallback?t.valueCallback(o[0]):o[0];l=n.valueCallback?n.valueCallback(l):l;const u=e.slice(a.length);return{value:l,rest:u}}}const ID=/^(\d+)(th|st|nd|rd)?/i,zD=/\d+/i,FD={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},UD={any:[/^b/i,/^(a|c)/i]},HD={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},BD={any:[/1/i,/2/i,/3/i,/4/i]},$D={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},VD={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},qD={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},GD={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},YD={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},WD={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},KD={ordinalNumber:PD({matchPattern:ID,parsePattern:zD,valueCallback:t=>parseInt(t,10)}),era:ul({matchPatterns:FD,defaultMatchWidth:"wide",parsePatterns:UD,defaultParseWidth:"any"}),quarter:ul({matchPatterns:HD,defaultMatchWidth:"wide",parsePatterns:BD,defaultParseWidth:"any",valueCallback:t=>t+1}),month:ul({matchPatterns:$D,defaultMatchWidth:"wide",parsePatterns:VD,defaultParseWidth:"any"}),day:ul({matchPatterns:qD,defaultMatchWidth:"wide",parsePatterns:GD,defaultParseWidth:"any"}),dayPeriod:ul({matchPatterns:YD,defaultMatchWidth:"any",parsePatterns:WD,defaultParseWidth:"any"})},XD={code:"en-US",formatDistance:_D,formatLong:xD,formatRelative:ED,localize:ND,match:KD,options:{weekStartsOn:0,firstWeekContainsDate:1}};function QD(t,e){const n=Et(t,e?.in);return hD(n,pD(n))+1}function ZD(t,e){const n=Et(t,e?.in),i=+sd(n)-+fD(n);return Math.round(i/ww)+1}function Ew(t,e){const n=Et(t,e?.in),i=n.getFullYear(),a=Od(),o=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??a.firstWeekContainsDate??a.locale?.options?.firstWeekContainsDate??1,l=Si(e?.in||t,0);l.setFullYear(i+1,0,o),l.setHours(0,0,0,0);const u=Xr(l,e),d=Si(e?.in||t,0);d.setFullYear(i,0,o),d.setHours(0,0,0,0);const f=Xr(d,e);return+n>=+u?i+1:+n>=+f?i:i-1}function JD(t,e){const n=Od(),i=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,a=Ew(t,e),o=Si(e?.in||t,0);return o.setFullYear(a,0,i),o.setHours(0,0,0,0),Xr(o,e)}function e1(t,e){const n=Et(t,e?.in),i=+Xr(n,e)-+JD(n,e);return Math.round(i/ww)+1}function et(t,e){const n=t<0?"-":"",i=Math.abs(t).toString().padStart(e,"0");return n+i}const Ws={y(t,e){const n=t.getFullYear(),i=n>0?n:1-n;return et(e==="yy"?i%100:i,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):et(n+1,2)},d(t,e){return et(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return et(t.getHours()%12||12,e.length)},H(t,e){return et(t.getHours(),e.length)},m(t,e){return et(t.getMinutes(),e.length)},s(t,e){return et(t.getSeconds(),e.length)},S(t,e){const n=e.length,i=t.getMilliseconds(),a=Math.trunc(i*Math.pow(10,n-3));return et(a,e.length)}},Fr={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Ub={G:function(t,e,n){const i=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(i,{width:"abbreviated"});case"GGGGG":return n.era(i,{width:"narrow"});case"GGGG":default:return n.era(i,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const i=t.getFullYear(),a=i>0?i:1-i;return n.ordinalNumber(a,{unit:"year"})}return Ws.y(t,e)},Y:function(t,e,n,i){const a=Ew(t,i),o=a>0?a:1-a;if(e==="YY"){const l=o%100;return et(l,2)}return e==="Yo"?n.ordinalNumber(o,{unit:"year"}):et(o,e.length)},R:function(t,e){const n=Cw(t);return et(n,e.length)},u:function(t,e){const n=t.getFullYear();return et(n,e.length)},Q:function(t,e,n){const i=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(i);case"QQ":return et(i,2);case"Qo":return n.ordinalNumber(i,{unit:"quarter"});case"QQQ":return n.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(i,{width:"wide",context:"formatting"})}},q:function(t,e,n){const i=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(i);case"qq":return et(i,2);case"qo":return n.ordinalNumber(i,{unit:"quarter"});case"qqq":return n.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(i,{width:"wide",context:"standalone"})}},M:function(t,e,n){const i=t.getMonth();switch(e){case"M":case"MM":return Ws.M(t,e);case"Mo":return n.ordinalNumber(i+1,{unit:"month"});case"MMM":return n.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(i,{width:"wide",context:"formatting"})}},L:function(t,e,n){const i=t.getMonth();switch(e){case"L":return String(i+1);case"LL":return et(i+1,2);case"Lo":return n.ordinalNumber(i+1,{unit:"month"});case"LLL":return n.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(i,{width:"wide",context:"standalone"})}},w:function(t,e,n,i){const a=e1(t,i);return e==="wo"?n.ordinalNumber(a,{unit:"week"}):et(a,e.length)},I:function(t,e,n){const i=ZD(t);return e==="Io"?n.ordinalNumber(i,{unit:"week"}):et(i,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):Ws.d(t,e)},D:function(t,e,n){const i=QD(t);return e==="Do"?n.ordinalNumber(i,{unit:"dayOfYear"}):et(i,e.length)},E:function(t,e,n){const i=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(i,{width:"short",context:"formatting"});case"EEEE":default:return n.day(i,{width:"wide",context:"formatting"})}},e:function(t,e,n,i){const a=t.getDay(),o=(a-i.weekStartsOn+8)%7||7;switch(e){case"e":return String(o);case"ee":return et(o,2);case"eo":return n.ordinalNumber(o,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});case"eeee":default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(t,e,n,i){const a=t.getDay(),o=(a-i.weekStartsOn+8)%7||7;switch(e){case"c":return String(o);case"cc":return et(o,e.length);case"co":return n.ordinalNumber(o,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});case"cccc":default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(t,e,n){const i=t.getDay(),a=i===0?7:i;switch(e){case"i":return String(a);case"ii":return et(a,e.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(i,{width:"short",context:"formatting"});case"iiii":default:return n.day(i,{width:"wide",context:"formatting"})}},a:function(t,e,n){const a=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(t,e,n){const i=t.getHours();let a;switch(i===12?a=Fr.noon:i===0?a=Fr.midnight:a=i/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(t,e,n){const i=t.getHours();let a;switch(i>=17?a=Fr.evening:i>=12?a=Fr.afternoon:i>=4?a=Fr.morning:a=Fr.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let i=t.getHours()%12;return i===0&&(i=12),n.ordinalNumber(i,{unit:"hour"})}return Ws.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):Ws.H(t,e)},K:function(t,e,n){const i=t.getHours()%12;return e==="Ko"?n.ordinalNumber(i,{unit:"hour"}):et(i,e.length)},k:function(t,e,n){let i=t.getHours();return i===0&&(i=24),e==="ko"?n.ordinalNumber(i,{unit:"hour"}):et(i,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):Ws.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):Ws.s(t,e)},S:function(t,e){return Ws.S(t,e)},X:function(t,e,n){const i=t.getTimezoneOffset();if(i===0)return"Z";switch(e){case"X":return Bb(i);case"XXXX":case"XX":return Na(i);case"XXXXX":case"XXX":default:return Na(i,":")}},x:function(t,e,n){const i=t.getTimezoneOffset();switch(e){case"x":return Bb(i);case"xxxx":case"xx":return Na(i);case"xxxxx":case"xxx":default:return Na(i,":")}},O:function(t,e,n){const i=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Hb(i,":");case"OOOO":default:return"GMT"+Na(i,":")}},z:function(t,e,n){const i=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Hb(i,":");case"zzzz":default:return"GMT"+Na(i,":")}},t:function(t,e,n){const i=Math.trunc(+t/1e3);return et(i,e.length)},T:function(t,e,n){return et(+t,e.length)}};function Hb(t,e=""){const n=t>0?"-":"+",i=Math.abs(t),a=Math.trunc(i/60),o=i%60;return o===0?n+String(a):n+String(a)+e+et(o,2)}function Bb(t,e){return t%60===0?(t>0?"-":"+")+et(Math.abs(t)/60,2):Na(t,e)}function Na(t,e=""){const n=t>0?"-":"+",i=Math.abs(t),a=et(Math.trunc(i/60),2),o=et(i%60,2);return n+a+e+o}const $b=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},Tw=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},t1=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],i=n[1],a=n[2];if(!a)return $b(t,e);let o;switch(i){case"P":o=e.dateTime({width:"short"});break;case"PP":o=e.dateTime({width:"medium"});break;case"PPP":o=e.dateTime({width:"long"});break;case"PPPP":default:o=e.dateTime({width:"full"});break}return o.replace("{{date}}",$b(i,e)).replace("{{time}}",Tw(a,e))},n1={p:Tw,P:t1},i1=/^D+$/,s1=/^Y+$/,a1=["D","DD","YY","YYYY"];function r1(t){return i1.test(t)}function o1(t){return s1.test(t)}function l1(t,e,n){const i=c1(t,e,n);if(console.warn(i),a1.includes(t))throw new RangeError(i)}function c1(t,e,n){const i=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${i} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const u1=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,d1=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,h1=/^'([^]*?)'?$/,f1=/''/g,g1=/[a-zA-Z]/;function m1(t,e,n){const i=Od(),a=i.locale??XD,o=i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,l=i.weekStartsOn??i.locale?.options?.weekStartsOn??0,u=Et(t,n?.in);if(!mD(u))throw new RangeError("Invalid time value");let d=e.match(d1).map(g=>{const p=g[0];if(p==="p"||p==="P"){const _=n1[p];return _(g,a.formatLong)}return g}).join("").match(u1).map(g=>{if(g==="''")return{isToken:!1,value:"'"};const p=g[0];if(p==="'")return{isToken:!1,value:p1(g)};if(Ub[p])return{isToken:!0,value:g};if(p.match(g1))throw new RangeError("Format string contains an unescaped latin alphabet character `"+p+"`");return{isToken:!1,value:g}});a.localize.preprocessor&&(d=a.localize.preprocessor(u,d));const f={firstWeekContainsDate:o,weekStartsOn:l,locale:a};return d.map(g=>{if(!g.isToken)return g.value;const p=g.value;(o1(p)||r1(p))&&l1(p,e,String(t));const _=Ub[p[0]];return _(u,p,a.localize,f)}).join("")}function p1(t){const e=t.match(h1);return e?e[1].replace(f1,"'"):t}function v1(t,e){return+Et(t)>+Et(e)}function y1(t,e){return+Et(t)<+Et(e)}function Ru(t,e){const n=()=>Si(e?.in,NaN),a=w1(t);let o;if(a.date){const f=x1(a.date,2);o=C1(f.restDateString,f.year)}if(!o||isNaN(+o))return n();const l=+o;let u=0,d;if(a.time&&(u=E1(a.time),isNaN(u)))return n();if(a.timezone){if(d=T1(a.timezone),isNaN(d))return n()}else{const f=new Date(l+u),g=Et(0,e?.in);return g.setFullYear(f.getUTCFullYear(),f.getUTCMonth(),f.getUTCDate()),g.setHours(f.getUTCHours(),f.getUTCMinutes(),f.getUTCSeconds(),f.getUTCMilliseconds()),g}return Et(l+u+d,e?.in)}const Du={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},_1=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,b1=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,S1=/^([+-])(\d{2})(?::?(\d{2}))?$/;function w1(t){const e={},n=t.split(Du.dateTimeDelimiter);let i;if(n.length>2)return e;if(/:/.test(n[0])?i=n[0]:(e.date=n[0],i=n[1],Du.timeZoneDelimiter.test(e.date)&&(e.date=t.split(Du.timeZoneDelimiter)[0],i=t.substr(e.date.length,t.length))),i){const a=Du.timezone.exec(i);a?(e.time=i.replace(a[1],""),e.timezone=a[1]):e.time=i}return e}function x1(t,e){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),i=t.match(n);if(!i)return{year:NaN,restDateString:""};const a=i[1]?parseInt(i[1]):null,o=i[2]?parseInt(i[2]):null;return{year:o===null?a:o*100,restDateString:t.slice((i[1]||i[2]).length)}}function C1(t,e){if(e===null)return new Date(NaN);const n=t.match(_1);if(!n)return new Date(NaN);const i=!!n[4],a=dl(n[1]),o=dl(n[2])-1,l=dl(n[3]),u=dl(n[4]),d=dl(n[5])-1;if(i)return M1(e,u,d)?O1(e,u,d):new Date(NaN);{const f=new Date(0);return!R1(e,o,l)||!D1(e,a)?new Date(NaN):(f.setUTCFullYear(e,o,Math.max(a,l)),f)}}function dl(t){return t?parseInt(t):1}function E1(t){const e=t.match(b1);if(!e)return NaN;const n=ug(e[1]),i=ug(e[2]),a=ug(e[3]);return k1(n,i,a)?n*Em+i*xw+a*1e3:NaN}function ug(t){return t&&parseFloat(t.replace(",","."))||0}function T1(t){if(t==="Z")return 0;const e=t.match(S1);if(!e)return 0;const n=e[1]==="+"?-1:1,i=parseInt(e[2]),a=e[3]&&parseInt(e[3])||0;return N1(i,a)?n*(i*Em+a*xw):NaN}function O1(t,e,n){const i=new Date(0);i.setUTCFullYear(t,0,4);const a=i.getUTCDay()||7,o=(e-1)*7+n+1-a;return i.setUTCDate(i.getUTCDate()+o),i}const A1=[31,null,31,30,31,30,31,31,30,31,30,31];function Ow(t){return t%400===0||t%4===0&&t%100!==0}function R1(t,e,n){return e>=0&&e<=11&&n>=1&&n<=(A1[e]||(Ow(t)?29:28))}function D1(t,e){return e>=1&&e<=(Ow(t)?366:365)}function M1(t,e,n){return e>=1&&e<=53&&n>=0&&n<=6}function k1(t,e,n){return t===24?e===0&&n===0:n>=0&&n<60&&e>=0&&e<60&&t>=0&&t<25}function N1(t,e){return e>=0&&e<=59}function Vb(t,e,n){const i=Et(t,n?.in);return i.setHours(e),i}function qb(t,e,n){const i=Et(t,n?.in);return i.setMilliseconds(e),i}function Gb(t,e,n){const i=Et(t,n?.in);return i.setMinutes(e),i}function Yb(t,e,n){const i=Et(t,n?.in);return i.setSeconds(e),i}function Gt(t){return m1(t,"yyyy-MM-dd")}function j1(t,e,n){if(!t.scheduled_start_time||!t.scheduled_end_time)return!1;const i=Ru(t.scheduled_start_time),a=Ru(t.scheduled_end_time),o=qb(Yb(Gb(Vb(Ru(e),n),0),0),0),l=qb(Yb(Gb(Vb(Ru(e),n+1),0),0),0);return y1(i,l)&&v1(a,o)}function Aw(t){return Xr(t,{weekStartsOn:0})}function L1(t){return vD(t,{weekStartsOn:0})}function ZI(t){return new Date(Date.UTC(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),0,0,0,0))}function JI(t){return new Date(Date.UTC(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),23,59,59,999))}function ez(t,e){return t.getUTCFullYear()===e.getUTCFullYear()&&t.getUTCMonth()===e.getUTCMonth()&&t.getUTCDate()===e.getUTCDate()}function Wb(t,e){return cD(t,e)}function $l(t,e){return oD(t,e)}class P1{async init(){try{const{error:e}=await rt.from("machines").select("count").limit(1);if(e)throw new Error(`API initialization failed: ${e.message}`);return!0}catch(e){throw e}}async getMachines(){return qg(async()=>{const{data:e,error:n}=await rt.from("machines").select("*").order("machine_name");if(n)throw n;return e||[]},"getMachines")()}async addMachine(e){try{const{data:n,error:i}=await rt.from("machines").insert([e]).select().single();if(i)throw i;return n}catch(n){throw new Error(`Failed to add machine: ${tn(n)}`)}}async updateMachine(e,n){try{const{data:i,error:a}=await rt.from("machines").update(n).eq("id",e).select().single();if(a)throw a;return i}catch(i){throw new Error(`Failed to update machine: ${tn(i)}`)}}async removeMachine(e){try{const{error:n}=await rt.from("machines").delete().eq("id",e);if(n)throw n;return!0}catch(n){throw new Error(`Failed to remove machine: ${tn(n)}`)}}async getOdpOrders(){try{const{data:e,error:n}=await rt.from("odp_orders").select("*").order("created_at",{ascending:!1});if(n)throw n;return e||[]}catch(e){throw new Error(`Failed to fetch ODP orders: ${tn(e)}`)}}async addOdpOrder(e){try{const{data:n,error:i}=await rt.from("odp_orders").insert([e]).select().single();if(i)throw i;return n}catch(n){throw new Error(`Failed to add ODP order: ${tn(n)}`)}}async updateOdpOrder(e,n){try{const{data:i,error:a}=await rt.from("odp_orders").update(n).eq("id",e).select().single();if(a)throw a;return i}catch(i){throw new Error(`Failed to update ODP order: ${tn(i)}`)}}async removeOdpOrder(e){try{const{error:n}=await rt.from("odp_orders").delete().eq("id",e);if(n)throw n;return!0}catch(n){throw new Error(`Failed to remove ODP order: ${tn(n)}`)}}async getPhases(){try{const{data:e,error:n}=await rt.from("phases").select("*").order("name");if(n)throw n;return e||[]}catch(e){throw new Error(`Failed to fetch phases: ${tn(e)}`)}}async addPhase(e){try{const{data:n,error:i}=await rt.from("phases").insert([e]).select().single();if(i)throw i;return n}catch(n){throw new Error(`Failed to add phase: ${tn(n)}`)}}async updatePhase(e,n){try{const{data:i,error:a}=await rt.from("phases").update(n).eq("id",e).select().single();if(a)throw a;return i}catch(i){throw new Error(`Failed to update phase: ${tn(i)}`)}}async removePhase(e){try{const{error:n}=await rt.from("phases").delete().eq("id",e);if(n)throw n;return!0}catch(n){throw new Error(`Failed to remove phase: ${tn(n)}`)}}async getMachineAvailabilityForDateRange(e,n,i){try{const{data:a,error:o}=await rt.from("machine_availability").select("*").eq("machine_id",e).gte("date",n).lte("date",i).order("date");if(o)throw o;return a||[]}catch(a){throw new Error(`Failed to fetch machine availability for date range: ${tn(a)}`)}}async getMachineAvailabilityForDate(e,n){try{const{data:i,error:a}=await rt.from("machine_availability").select("*").eq("machine_id",e).eq("date",n).maybeSingle();if(a)throw a;return i||null}catch(i){throw new Error(`Failed to fetch machine availability: ${tn(i)}`)}}async getMachineAvailability(e,n){try{return(await this.getMachineAvailabilityForDate(e,n))?.unavailable_hours||[]}catch{return[]}}async setMachineAvailability(e,n,i){try{const{data:a,error:o}=await rt.from("machine_availability").upsert([{machine_id:e,date:n,unavailable_hours:i}],{onConflict:"machine_id,date"}).select().single();if(o)throw o;return a}catch(a){throw new Error(`Failed to set machine availability: ${tn(a)}`)}}async getMachineAvailabilityForDateAllMachines(e){try{const{data:n,error:i}=await rt.from("machine_availability").select("*").eq("date",e);if(i)throw i;return n||[]}catch(n){throw new Error(`Failed to fetch machine availability for all machines: ${tn(n)}`)}}async getEventsByDate(e){try{const{data:n,error:i}=await rt.from("machine_availability").select("*").eq("date",e);if(i)throw i;return n||[]}catch(n){throw new Error(`Failed to fetch events by date: ${tn(n)}`)}}async setUnavailableHoursForRange(e,n,i,a,o){try{const l=parseInt(a.split(":")[0]),u=parseInt(o.split(":")[0]),d=[];for(let b=l;b<u;b++)d.push(b.toString());const f=new Date(n),g=new Date(i);let p=new Date(f);const _=[];for(;p<=g;){const b=Gt(p),w=(await this.getMachineAvailabilityForDate(e,b))?.unavailable_hours||[],x=[...new Set([...w,...d])].sort((T,O)=>parseInt(T)-parseInt(O)),C=await this.setMachineAvailability(e,b,x);_.push(C),p=$l(p,1)}return _}catch(l){throw new Error(`Failed to set unavailable hours for range: ${tn(l)}`)}}async bulkUpsertMachineAvailability(e){try{const{error:n}=await rt.from("machine_availability").upsert(e,{onConflict:"machine_id,date"});if(n)throw n;return{success:!0}}catch(n){throw new Error(`Failed to bulk set machine availability: ${tn(n)}`)}}setupRealtimeSubscriptions(e,n,i){return rt.channel("table-db-changes").on("postgres_changes",{event:"*",schema:"public",table:"odp_orders"},e).on("postgres_changes",{event:"*",schema:"public",table:"machines"},n).on("postgres_changes",{event:"*",schema:"public",table:"phases"},i).subscribe(o=>{})}cleanupRealtimeSubscriptions(e){if(e)try{e.unsubscribe()}catch{}}}const ot=new P1,Ce=so((t,e)=>({isLoading:!1,isInitialized:!1,selectedWorkCenter:Me.BOTH,isEditMode:!1,alert:{message:"",type:"info",isVisible:!1},confirmDialog:{isOpen:!1,title:"",message:"",onConfirm:null,type:"danger"},conflictDialog:{isOpen:!1,details:null},getLoadingState:()=>e().isLoading,getInitializationState:()=>e().isInitialized,getSelectedWorkCenter:()=>e().selectedWorkCenter,getEditMode:()=>e().isEditMode,getAlert:()=>e().alert,getConfirmDialog:()=>e().confirmDialog,getConflictDialog:()=>e().conflictDialog,setLoading:n=>t({isLoading:n}),setInitialized:n=>t({isInitialized:n}),setSelectedWorkCenter:n=>t({selectedWorkCenter:n}),toggleEditMode:()=>t(n=>({isEditMode:!n.isEditMode})),setEditMode:n=>t({isEditMode:n}),showAlert:(n,i="info")=>t({alert:{message:n,type:i,isVisible:!0}}),hideAlert:()=>t({alert:{message:"",type:"info",isVisible:!1}}),showConfirmDialog:(n,i,a,o="danger")=>t({confirmDialog:{isOpen:!0,title:n,message:i,onConfirm:a,type:o}}),hideConfirmDialog:()=>t({confirmDialog:{isOpen:!1,title:"",message:"",onConfirm:null,type:"danger"}}),showConflictDialog:n=>t({conflictDialog:{isOpen:!0,details:n}}),hideConflictDialog:()=>t({conflictDialog:{isOpen:!1,details:null}}),reset:()=>t({isLoading:!1,isInitialized:!1,selectedWorkCenter:Me.BOTH,isEditMode:!1,alert:{message:"",type:"info",isVisible:!1},confirmDialog:{isOpen:!1,title:"",message:"",onConfirm:null,type:"danger"},conflictDialog:{isOpen:!1,details:null}})}));function I1(t,e){const n=e.getDay(),i=new Set;if(n===0||n===6){for(let u=0;u<24;u++)i.add(u.toString());return Array.from(i)}for(let u=0;u<24;u++)i.add(u.toString());const{work_center:a,department:o,active_shifts:l=[]}=t;return l.forEach(u=>{if(u==="T3"){i.clear();return}if(u==="T2")for(let d=6;d<22;d++)i.delete(d.toString());if(u==="T1"){if(a===Me.BUSTO_GAROLFO){for(let d=8;d<12;d++)i.delete(d.toString());for(let d=14;d<18;d++)i.delete(d.toString())}else if(a===Me.ZANICA)if(o===Nt.PACKAGING){for(let d=8;d<12;d++)i.delete(d.toString());for(let d=13;d<17;d++)i.delete(d.toString())}else{for(let d=8;d<12;d++)i.delete(d.toString());for(let d=13;d<17;d++)i.delete(d.toString())}}}),Array.from(i).sort((u,d)=>parseInt(u)-parseInt(d))}function z1(t,e){const n=[],i=new Date(e,0,1),a=new Date(e,11,31);for(const o of t){let l=new Date(i);for(;l<=a;){const u=I1(o,l);u.length>0&&n.push({machine_id:o.id,date:Gt(l),unavailable_hours:u}),l.setDate(l.getDate()+1)}}return n}const F1=(t,e)=>{const n=Cm("Machine");return{addMachine:async i=>{try{const{selectedWorkCenter:a}=Ce.getState();if(a&&a!==Me.BOTH&&i.work_center&&i.work_center!==a)throw new Error(`Cannot add Machine with different work center. Selected: ${a}, Item: ${i.work_center}`);const o=await ot.addMachine(i);t(l=>({machines:[...l.machines,o]}));try{const l=new Date().getFullYear(),u=z1([o],l);u.length>0&&await ot.bulkUpsertMachineAvailability(u),Ce.getState().showAlert(`Machine "${o?.machine_name||"Unknown"}" added and calendar set successfully`,"success")}catch(l){Ce.getState().showAlert(`Machine added, but failed to set calendar: ${l.message}`,"warning")}return o}catch(a){const o=n(a);throw Ce.getState().showAlert(o.message,"error"),o}},updateMachine:async(i,a)=>{try{const o=e().machines.find(u=>u.id===i),l=await ot.updateMachine(i,a);return t(u=>({machines:u.machines.map(d=>d.id===i?{...d,...l}:d)})),Ce.getState().showAlert(`Machine "${o?.machine_name||"Unknown"}" updated successfully`,"success"),l}catch(o){const l=n(o);throw Ce.getState().showAlert(l.message,"error"),l}},removeMachine:async i=>{try{const a=e().machines.find(o=>o.id===i);return await ot.removeMachine(i),t(o=>({machines:o.machines.filter(l=>l.id!==i)})),Ce.getState().showAlert(`Machine "${a?.machine_name||"Unknown"}" deleted successfully`,"success"),!0}catch(a){const o=n(a);throw Ce.getState().showAlert(o.message,"error"),o}}}},an=so((t,e)=>({machines:[],getMachines:()=>e().machines,getMachineById:n=>e().machines.find(i=>i.id===n),getMachinesByWorkCenter:n=>n===Me.BOTH?e().machines:e().machines.filter(i=>i.work_center===n),setMachines:n=>t({machines:n||[]}),...F1(t,e),cleanupDuplicateMachines:()=>{const n=e(),i=[],a=new Set;n.machines.forEach(o=>{a.has(o.id)||(a.add(o.id),i.push(o))}),t({machines:i})},reset:()=>t({machines:[]})})),U1=(t,e)=>{const n=Cm("OdpOrder");return{addOdpOrder:async i=>{try{const{selectedWorkCenter:a}=Ce.getState();if(a&&a!==Me.BOTH&&i.work_center&&i.work_center!==a)throw new Error(`Cannot add ODP Order with different work center. Selected: ${a}, Item: ${i.work_center}`);const o=await ot.addOdpOrder(i);return t(l=>({odpOrders:[...l.odpOrders,o]})),Ce.getState().showAlert(`ODP Order "${i?.odp_number||"Unknown"}" added successfully`,"success"),o}catch(a){const o=n(a);throw Ce.getState().showAlert(o.message,"error"),o}},updateOdpOrder:async(i,a)=>{try{const o=e().odpOrders.find(u=>u.id===i),l=await ot.updateOdpOrder(i,a);return t(u=>({odpOrders:u.odpOrders.map(d=>d.id===i?{...d,...l}:d)})),Ce.getState().showAlert(`ODP Order "${o?.odp_number||"Unknown"}" updated successfully`,"success"),l}catch(o){const l=n(o);throw Ce.getState().showAlert(l.message,"error"),l}},removeOdpOrder:async i=>{try{const a=e().odpOrders.find(o=>o.id===i);return await ot.removeOdpOrder(i),t(o=>({odpOrders:o.odpOrders.filter(l=>l.id!==i)})),Ce.getState().showAlert(`ODP Order "${a?.odp_number||"Unknown"}" deleted successfully`,"success"),!0}catch(a){const o=n(a);throw Ce.getState().showAlert(o.message,"error"),o}}}},ut=so((t,e)=>({odpOrders:[],getOdpOrders:()=>e().odpOrders,getOdpOrderById:n=>e().odpOrders.find(i=>i.id===n),getOdpOrdersByWorkCenter:n=>n===Me.BOTH?e().odpOrders:e().odpOrders.filter(i=>i.work_center===n),getScheduledOrders:()=>e().odpOrders.filter(n=>n.status==="SCHEDULED"),getUnscheduledOrders:()=>e().odpOrders.filter(n=>n.status==="NOT SCHEDULED"),setOdpOrders:n=>t({odpOrders:n||[]}),...U1(t,e),cleanupDuplicateOrders:()=>{const n=e(),i=[],a=new Set;n.odpOrders.forEach(o=>{a.has(o.id)||(a.add(o.id),i.push(o))}),t({odpOrders:i})},reset:()=>t({odpOrders:[]})})),H1=(t,e)=>{const n=Cm("Phase");return{addPhase:async i=>{try{const{selectedWorkCenter:a}=Ce.getState();if(a&&a!==Me.BOTH&&i.work_center&&i.work_center!==a)throw new Error(`Cannot add Phase with different work center. Selected: ${a}, Item: ${i.work_center}`);const o=await ot.addPhase(i);return t(l=>({phases:[...l.phases,o]})),Ce.getState().showAlert(`Phase "${i?.name||"Unknown"}" added successfully`,"success"),o}catch(a){const o=n(a);throw Ce.getState().showAlert(o.message,"error"),o}},updatePhase:async(i,a)=>{try{const o=e().phases.find(u=>u.id===i),l=await ot.updatePhase(i,a);return t(u=>({phases:u.phases.map(d=>d.id===i?{...d,...l}:d)})),Ce.getState().showAlert(`Phase "${o?.name||"Unknown"}" updated successfully`,"success"),l}catch(o){const l=n(o);throw Ce.getState().showAlert(l.message,"error"),l}},removePhase:async i=>{try{const a=e().phases.find(o=>o.id===i);return await ot.removePhase(i),t(o=>({phases:o.phases.filter(l=>l.id!==i)})),Ce.getState().showAlert(`Phase "${a?.name||"Unknown"}" deleted successfully`,"success"),!0}catch(a){const o=n(a);throw Ce.getState().showAlert(o.message,"error"),o}}}},si=so((t,e)=>({phases:[],getPhases:()=>e().phases,getPhaseById:n=>e().phases.find(i=>i.id===n),getPhasesByWorkCenter:n=>n===Me.BOTH?e().phases:e().phases.filter(i=>i.work_center===n),setPhases:n=>t({phases:n||[]}),...H1(t,e),cleanupDuplicatePhases:()=>{const n=e(),i=[],a=new Set;n.phases.forEach(o=>{a.has(o.id)||(a.add(o.id),i.push(o))}),t({phases:i})},reset:()=>t({phases:[]})}));class B1{constructor(e,n){this.get=e,this.set=n}setSplitTaskInfo=(e,n)=>{this.set(i=>({splitTasksInfo:{...i.splitTasksInfo,[e]:n}}))};getSplitTaskInfo=e=>this.get().splitTasksInfo[e];clearSplitTaskInfo=e=>{this.set(n=>{const i={...n.splitTasksInfo};return delete i[e],{splitTasksInfo:i}})};updateTaskWithSplitInfo=async(e,n)=>{const{updateOdpOrder:i}=ut.getState();if(n){this.setSplitTaskInfo(e,n);const a=JSON.stringify(n),o=await i(e,{description:a});this.updateSplitTaskInfo(e,o)}else{this.clearSplitTaskInfo(e);const a=await i(e,{description:""});this.updateSplitTaskInfo(e,a)}};updateSplitTaskInfo=(e,n)=>{if(n.description&&n.status==="SCHEDULED")try{const i=JSON.parse(n.description);i.segments&&Array.isArray(i.segments)?this.setSplitTaskInfo(e,i):this.clearSplitTaskInfo(e)}catch{this.clearSplitTaskInfo(e)}else this.clearSplitTaskInfo(e)};restoreSplitTaskInfo=()=>{const{getOdpOrders:e}=ut.getState(),n=e(),i={};n.forEach(a=>{if(a.description&&a.status==="SCHEDULED")try{const o=JSON.parse(a.description);o.segments&&Array.isArray(o.segments)&&(i[a.id]=o)}catch{}}),this.set({splitTasksInfo:i}),console.log(`🔄 Restored ${Object.keys(i).length} split tasks from database`)};createSegmentInfo=(e,n)=>({totalSegments:e.length,segments:e.map(i=>({start:i.start.toISOString(),end:i.end.toISOString(),duration:i.duration})),originalDuration:n,wasSplit:e.length>1});getTaskOccupiedSegments=e=>{const n=this.getSplitTaskInfo(e.id);if(n&&n.segments)return n.segments.map(i=>({start:new Date(i.start),end:new Date(i.end),duration:i.duration}));if(e.description)try{const i=JSON.parse(e.description);if(i.segments&&Array.isArray(i.segments))return i.segments.map(a=>({start:new Date(a.start),end:new Date(a.end),duration:a.duration}))}catch{}if(e.scheduled_start_time){const i=new Date(e.scheduled_start_time),a=e.time_remaining||e.duration||1,o=new Date(i.getTime()+a*60*60*1e3);return[{start:i,end:o,duration:a}]}return[]};doTimeRangesOverlap=(e,n,i,a)=>e<a&&n>i;checkTaskOverlap=(e,n,i)=>{const a=this.getTaskOccupiedSegments(i);console.log(`🔍 Checking ${i.odp_number} segments:`,a.map(o=>`${o.start.toISOString()} - ${o.end.toISOString()}`));for(const o of a)if(this.doTimeRangesOverlap(e,n,o.start,o.end))return console.log(`🚨 SEGMENT OVERLAP: ${e.toISOString()}-${n.toISOString()} vs ${o.start.toISOString()}-${o.end.toISOString()}`),{hasOverlap:!0,conflictingSegment:o,existingTask:i};return{hasOverlap:!1}};checkMachineOverlaps=(e,n,i,a=null,o=[])=>{const{getOdpOrders:l}=ut.getState(),u=[a,...o].filter(f=>f),d=l().filter(f=>f.scheduled_machine_id===i&&f.status==="SCHEDULED"&&!u.includes(f.id));console.log(`🔍 Checking overlaps: ${e.toISOString()} - ${n.toISOString()}`),console.log("🔍 Excluding tasks:",u),console.log(`🔍 Checking against ${d.length} tasks:`,d.map(f=>f.odp_number));for(const f of d){const g=this.checkTaskOverlap(e,n,f);if(g.hasOverlap)return console.log(`🚨 OVERLAP FOUND with ${f.odp_number}:`,g.conflictingSegment),{hasOverlap:!0,conflictingTask:f,conflictingSegment:g.conflictingSegment}}return console.log("✅ No overlaps found"),{hasOverlap:!1}};migrateExistingTasksToSegmentFormat=async()=>{const{getOdpOrders:e,updateOdpOrder:n}=ut.getState(),i=e().filter(a=>a.status==="SCHEDULED"&&a.scheduled_start_time&&(!a.description||a.description.trim()===""));console.log(`🔄 Migrating ${i.length} existing tasks to segment format`);for(const a of i)try{const o=new Date(a.scheduled_start_time),l=a.time_remaining||a.duration||1,u=new Date(o.getTime()+l*60*60*1e3),d=[{start:o,end:u,duration:l}],f=this.createSegmentInfo(d,l),g=JSON.stringify(f);await n(a.id,{description:g}),this.setSplitTaskInfo(a.id,f),console.log(`✅ Migrated task ${a.odp_number} to segment format`)}catch(o){console.error(`❌ Failed to migrate task ${a.odp_number}:`,o)}console.log(`🎉 Migration complete: ${i.length} tasks converted to segment format`)}}class $1{constructor(e,n,i,a){this.get=e,this.set=n,this.splitTaskManager=i,this.machineAvailabilityManager=a}createAbsoluteDate=(e,n,i,a=0,o=0)=>new Date(Date.UTC(e,n-1,i,a,o,0,0));splitTaskAcrossAvailableSlots=(e,n,i,a)=>{try{const o=[];let l=new Date(e),u=n;console.log(`✂️ Splitting ${n}h task around ${a.length} unavailable slots`);let d=!0;for(;d;){d=!1;for(const f of a)if(l>=f.start&&l<f.end){l=new Date(f.end),d=!0;break}}for(;u>0;){let f=null,g=null,p=null;for(const _ of a){const b=new Date(_.start),S=new Date(_.end);b>=l&&(!f||b<g)&&(f=_,g=b,p=S)}if(f){const _=(g.getTime()-l.getTime())/36e5;if(_>0){const S=Math.min(_,u),w=new Date(l.getTime()+S*60*60*1e3);o.push({start:new Date(l),end:w,duration:S}),u-=S}l=new Date(p);let b=!0;for(;b;){b=!1;for(const S of a)if(l>=S.start&&l<S.end){l=new Date(S.end),b=!0;break}}}else{const _=new Date(l.getTime()+u*60*60*1e3);o.push({start:new Date(l),end:_,duration:u}),console.log(`✅ Final segment created: ${l.toISOString()} - ${_.toISOString()} (${u}h)`),u=0}if(o.length>50){console.warn("Task splitting exceeded maximum segments limit");break}}return console.log(`✅ Created ${o.length} segments for task`),o}catch(o){return console.error("Error in splitTaskAcrossAvailableSlots:",o),[]}};splitTaskAcrossAvailableSlotsBackward=(e,n,i,a)=>{try{const o=[];let l=new Date(e),u=n,d=!0;for(;d;){d=!1;for(const g of a)if(l>g.start&&l<=g.end){l=new Date(g.start),d=!0;break}}for(;u>0;){let g=null,p=null,_=null;for(const T of a){const O=new Date(T.start),M=new Date(T.end);M<=l&&(!g||M>_)&&(g=T,p=O,_=M)}let b;g?b=new Date(_):b=new Date(l.getTime()-u*60*60*1e3);let S=!0;for(;S;){S=!1;for(const T of a)if(b<T.end&&b>=T.start){b=new Date(T.end),S=!0;break}}const w=(l.getTime()-b.getTime())/(1e3*60*60);if(w<=0){l=g?new Date(p):new Date(l.getTime()-3600*1e3);continue}const x=Math.min(w,u),C=new Date(l.getTime()-x*60*60*1e3);o.push({start:C,end:new Date(l),duration:x}),u-=x,l=new Date(C)}return o.reverse()}catch(o){return console.error("Error in splitTaskAcrossAvailableSlotsBackward:",o),[]}};collectUnavailableSlots=(e,n,i)=>{const a=[],o=this.createAbsoluteDate(e.getUTCFullYear(),e.getUTCMonth()+1,e.getUTCDate()),l=this.createAbsoluteDate(n.getUTCFullYear(),n.getUTCMonth()+1,n.getUTCDate()),u=new Date(l);u.setUTCDate(u.getUTCDate()+7);let d=new Date(o);for(;d<=u;){const f=Gt(d),g=this.get().machineAvailability[f];if(g&&Array.isArray(g)){const p=g.find(_=>_.machine_id===i);if(p&&p.unavailable_hours&&Array.isArray(p.unavailable_hours)){const[_,b,S]=f.split("-").map(Number);for(const w of p.unavailable_hours){const x=this.createAbsoluteDate(_,b,S,parseInt(w),0),C=new Date(x.getTime()+3600*1e3);a.push({start:x,end:C,hour:parseInt(w),date:f})}}}d.setUTCDate(d.getUTCDate()+1)}return a.sort((f,g)=>f.start.getTime()-g.start.getTime())};loadMachineAvailabilityForExtendedRange=async(e,n,i)=>{const a=this.createAbsoluteDate(e.getUTCFullYear(),e.getUTCMonth()+1,e.getUTCDate()),o=new Date(e.getTime()+n*60*60*1e3),l=this.createAbsoluteDate(o.getUTCFullYear(),o.getUTCMonth()+1,o.getUTCDate()),u=new Date(l);u.setUTCDate(u.getUTCDate()+7);let d=new Date(a);for(;d<=u;){const f=Gt(d);await this.machineAvailabilityManager.loadMachineAvailabilityForDate(f),d.setUTCDate(d.getUTCDate()+1)}return u};loadMachineAvailabilityForBackwardRange=async(e,n,i)=>{const a=this.createAbsoluteDate(e.getUTCFullYear(),e.getUTCMonth()+1,e.getUTCDate()),o=new Date(e.getTime()-n*60*60*1e3),l=this.createAbsoluteDate(o.getUTCFullYear(),o.getUTCMonth()+1,o.getUTCDate()),u=new Date(l);u.setUTCDate(u.getUTCDate()-7);let d=new Date(u);for(;d<=a;){const f=Gt(d);await this.machineAvailabilityManager.loadMachineAvailabilityForDate(f),d.setUTCDate(d.getUTCDate()+1)}return{taskStartDateWithBuffer:u,taskEndDate:a}};checkSegmentsForOverlaps=(e,n,i,a=[])=>{[i,...a].filter(o=>o);for(const o of e){const l=this.splitTaskManager.checkMachineOverlaps(o.start,o.end,n,i,a);if(l.hasOverlap)return{hasOverlap:!0,conflictingSegment:o,conflictingTask:l.conflictingTask,conflictingExistingSegment:l.conflictingSegment}}return{hasOverlap:!1}};scheduleTaskWithSplitting=async(e,n,i,a,o=[])=>{const l=await this.loadMachineAvailabilityForExtendedRange(n,i,a),u=this.collectUnavailableSlots(n,l,a),d=new Date(n.getTime()+i*60*60*1e3);if(u.some(g=>n<g.end&&d>g.start)){const g=this.splitTaskAcrossAvailableSlots(n,i,a,u);if(g.length>0){const p=this.checkSegmentsForOverlaps(g,a,e,o);if(p.hasOverlap)return console.log(`🚨 Split segments would overlap with task ${p.conflictingTask.odp_number}`),{conflict:!0,conflictingTask:p.conflictingTask,conflictingSegment:p.conflictingExistingSegment,proposedSegments:g};const _=g[0],b=g[g.length-1],S=this.splitTaskManager.createSegmentInfo(g,i);return await this.splitTaskManager.updateTaskWithSplitInfo(e,S),{startTime:_.start,endTime:b.end,wasSplit:!0,segments:g}}}else{const g=[{start:n,end:d,duration:i}],p=this.checkSegmentsForOverlaps(g,a,e,o);if(p.hasOverlap)return console.log(`🚨 Non-split task would overlap with task ${p.conflictingTask.odp_number}`),{conflict:!0,conflictingTask:p.conflictingTask,conflictingSegment:p.conflictingExistingSegment,proposedSegments:g};const _=this.splitTaskManager.createSegmentInfo(g,i);return await this.splitTaskManager.updateTaskWithSplitInfo(e,_),{startTime:n,endTime:d,wasSplit:!1,segments:g}}return null};scheduleTaskEndingAtWithSplitting=async(e,n,i,a,o=[])=>{const{taskStartDateWithBuffer:l,taskEndDate:u}=await this.loadMachineAvailabilityForBackwardRange(n,i,a),d=this.collectUnavailableSlots(l,u,a),f=this.splitTaskAcrossAvailableSlotsBackward(n,i,a,d);if(f.length===0)return null;const g=this.checkSegmentsForOverlaps(f,a,e,o);if(g.hasOverlap)return{conflict:!0,conflictingTask:g.conflictingTask,conflictingSegment:g.conflictingExistingSegment,proposedSegments:f};const p=this.splitTaskManager.createSegmentInfo(f,i);await this.splitTaskManager.updateTaskWithSplitInfo(e,p);const _=f[0],b=f[f.length-1];return{startTime:_.start,endTime:b.end,wasSplit:f.length>1,segments:f}}}class V1{constructor(e,n,i,a){this.get=e,this.set=n,this.schedulingLogic=i,this.splitTaskManager=a}getTaskDurationMinutes=e=>Math.round((e.time_remaining||e.duration||1)*60);getTaskEndTime=e=>{const n=new Date(e.scheduled_start_time),i=this.getTaskDurationMinutes(e);return new Date(n.getTime()+i*60*1e3)};addMinutesToDate=(e,n)=>new Date(e.getTime()+n*60*1e3);roundUpToNext15MinSlot=e=>{const n=e.getUTCMinutes(),i=e.getUTCHours(),a=Math.ceil(n/15)*15,o=new Date(e);return a===60?o.setUTCHours(i+1,0,0,0):o.setUTCMinutes(a,0,0),o};scheduleTaskWithSplittingForShunt=async(e,n,i)=>await this.scheduleTaskWithSplittingForShuntExcluding(e,n,i,[e.id]);scheduleTaskWithSplittingForShuntExcluding=async(e,n,i,a)=>{const o=this.getTaskDurationMinutes(e)/60,l=a.filter(d=>d!==e.id),u=await this.schedulingLogic.scheduleTaskWithSplitting(e.id,n,o,i.id,l);if(u&&!u.conflict)return{startTime:u.startTime,endTime:u.endTime,wasSplit:u.wasSplit};if(u&&u.conflict)throw console.error(`🚨 Conflict during shunting for task ${e.odp_number}:`,u),new Error(`Cannot shunt task ${e.odp_number}: would create new conflicts`);return{startTime:n,endTime:this.addMinutesToDate(n,this.getTaskDurationMinutes(e)),wasSplit:!1}};checkShuntingOverlaps=(e,n,i=[])=>{const{getOdpOrders:a}=ut.getState(),o=a().filter(l=>l.scheduled_machine_id===n&&l.status==="SCHEDULED"&&!i.includes(l.id));for(const l of e)for(const u of o){const d=this.splitTaskManager.checkTaskOverlap(l.start,l.end,u);if(d.hasOverlap)return{hasOverlap:!0,conflictingTask:u,conflictingSegment:d.conflictingSegment,newTaskSegment:l}}return{hasOverlap:!1}};resolveConflictByShunting=async(e,n)=>{try{console.log(`🔄 Shunting ${e.draggedTask?.odp_number} ${n} from ${e.conflictingTask?.odp_number}`);const{conflictingTask:i,draggedTask:a,proposedStartTime:o,machine:l}=e,{updateOdpOrder:u}=ut.getState(),{getOdpOrders:d}=ut.getState(),f=d().filter(x=>x.scheduled_machine_id===l.id&&x.status==="SCHEDULED"&&x.id!==a.id).sort((x,C)=>{const T=this.splitTaskManager.getTaskOccupiedSegments(x),O=this.splitTaskManager.getTaskOccupiedSegments(C),M=T.length>0?T[0].start:new Date(x.scheduled_start_time),D=O.length>0?O[0].start:new Date(C.scheduled_start_time);return M-D}),g=f.findIndex(x=>x.id===i.id);if(g===-1)return{error:"Conflicting task not found"};const p=this.getTaskDurationMinutes(a),_=[];let b=!1;if(n==="right")for(let x=g;x<f.length&&!b;x++){const C=f[x];if(_.push(C),x<f.length-1){const T=f[x+1],O=this.splitTaskManager.getTaskOccupiedSegments(C),M=this.splitTaskManager.getTaskOccupiedSegments(T);if(O.length>0&&M.length>0){const D=Math.max(...O.map(B=>B.end.getTime())),U=Math.min(...M.map(B=>B.start.getTime()));Math.floor((U-D)/(60*1e3))>=p&&(b=!0)}}else b=!0}else for(let x=g;x>=0&&!b;x--){const C=f[x];if(_.unshift(C),x>0){const T=f[x-1],O=this.splitTaskManager.getTaskOccupiedSegments(T),M=this.splitTaskManager.getTaskOccupiedSegments(C);if(O.length>0&&M.length>0){const D=Math.max(...O.map(B=>B.end.getTime())),U=Math.min(...M.map(B=>B.start.getTime()));Math.floor((U-D)/(60*1e3))>=p&&(b=!0)}}else{const T=this.splitTaskManager.getTaskOccupiedSegments(C);if(T.length>0){const O=Math.min(...T.map(U=>U.start.getTime())),M=new Date(O);M.setHours(0,0,0,0),Math.floor((O-M.getTime())/(60*1e3))>=p&&(b=!0)}}}if(!b&&_.length===f.length)return{error:"Non c'è spazio sufficiente per spostare i lavori"};console.log(`📋 Moving ${_.length} tasks ${n}`);const S=[];let w=null;if(n==="right"){const x=new Date(o),C=[..._.map(O=>O.id),a.id];console.log(`🔄 Scheduling dragged task ${a.odp_number} at ${x.toISOString()} (RIGHT first)`),console.log("🔄 Excluding affected + dragged:",C),w=await this.scheduleTaskWithSplittingForShuntExcluding(a,x,l,C);let T=this.roundUpToNext15MinSlot(w.endTime);for(const O of _){const M=[..._.map(U=>U.id),a.id];console.log(`🔄 Shunting task ${O.odp_number} to ${T.toISOString()}`),console.log("🔄 Excluding affected + dragged:",M);const D=await this.scheduleTaskWithSplittingForShuntExcluding(O,T,l,M);S.push({id:O.id,scheduled_start_time:D.startTime.toISOString(),scheduled_end_time:D.endTime.toISOString()}),T=this.roundUpToNext15MinSlot(D.endTime)}}else{const x=new Date(o);let C=this.roundUpToNext15MinSlot(this.addMinutesToDate(x,-1));for(let T=_.length-1;T>=0;T--){const O=_[T],M=[..._.map(U=>U.id),a.id],D=await this.schedulingLogic.scheduleTaskEndingAtWithSplitting(O.id,C,this.getTaskDurationMinutes(O)/60,l.id,M);console.log(`✅ Task ${O.odp_number} scheduled (LEFT):`,{start:D.startTime.toISOString(),end:D.endTime.toISOString(),wasSplit:D.wasSplit}),S.push({id:O.id,scheduled_start_time:D.startTime.toISOString(),scheduled_end_time:D.endTime.toISOString()}),C=this.roundUpToNext15MinSlot(this.addMinutesToDate(D.startTime,-1))}}if(!w){const x=new Date(o),C=[..._.map(T=>T.id),a.id];console.log(`🔄 Scheduling dragged task ${a.odp_number} at ${x.toISOString()}`),console.log("🔄 Excluding all affected tasks:",C),w=await this.scheduleTaskWithSplittingForShuntExcluding(a,x,l,C)}console.log(`✅ Dragged task ${a.odp_number} scheduled:`,{start:w.startTime.toISOString(),end:w.endTime.toISOString(),wasSplit:w.wasSplit}),S.push({id:a.id,scheduled_machine_id:l.id,scheduled_start_time:w.startTime.toISOString(),scheduled_end_time:w.endTime.toISOString(),status:"SCHEDULED"});for(const x of S)await u(x.id,x);return console.log(`✅ Shunting complete: ${S.length} tasks updated`),Ce.getState().hideConflictDialog(),Ce.getState().showAlert("Lavori riprogrammati con successo","success"),{success:!0}}catch(i){return console.error("Error in resolveConflictByShunting:",i),{error:i.message||"Errore durante la riprogrammazione"}}}}class q1{constructor(e,n){this.get=e,this.set=n}loadMachineAvailabilityForDate=async e=>{const{machineAvailability:n}=this.get();if(!n[e]?._loading&&!(n[e]&&n[e].length>=0)){this.set(i=>({machineAvailability:{...i.machineAvailability,[e]:{_loading:!0}}}));try{const i=await ot.getMachineAvailabilityForDateAllMachines(e);this.set(a=>({machineAvailability:{...a.machineAvailability,[e]:i||[]}}))}catch(i){throw this.set(a=>{const o={...a.machineAvailability};return o[e]&&delete o[e]._loading,{machineAvailability:o}}),i}}};loadMachineAvailabilityForDateRange=async(e,n,i)=>{const a=n instanceof Date?Gt(n):n,o=i instanceof Date?Gt(i):i;try{const l=await ot.getMachineAvailabilityForDateRange(e,a,o);return this.set(u=>{const d={...u.machineAvailability};return Array.isArray(l)&&l.forEach(f=>{if(f.date&&f.unavailable_hours){const g=f.date;d[g]||(d[g]=[]);const p=d[g].find(_=>_.machine_id===e);p?p.unavailable_hours=f.unavailable_hours:d[g].push({machine_id:e,date:g,unavailable_hours:f.unavailable_hours})}}),{machineAvailability:d}}),l}catch(l){throw l}};getMachineAvailability=async(e,n)=>{try{const i=this.get().machineAvailability[n];if(i&&Array.isArray(i)){const o=i.find(l=>l.machine_id===e);if(o)return o.unavailable_hours||[]}const a=await ot.getMachineAvailabilityForDate(e,n);if(a){const o=(a.unavailable_hours||[]).map(l=>l.toString());return this.set(l=>{const u={...l.machineAvailability};u[n]||(u[n]=[]);const d=u[n].find(f=>f.machine_id===e);return d?d.unavailable_hours=o:u[n].push({machine_id:e,date:n,unavailable_hours:o}),{machineAvailability:u}}),o}return[]}catch{return[]}};loadMachineAvailabilityForMachine=async(e,n,i)=>{const a={};try{try{await ot.getMachineAvailabilityForDate("test","2025-01-01")}catch{return{}}let o=new Date(n);for(;o<=i;){const l=Gt(o);this.get().machineAvailability[l]||await this.loadMachineAvailabilityForDate(l);const d=this.get().machineAvailability[l];if(Array.isArray(d)){const f=d.find(g=>g.machine_id===e);f&&(a[l]=f.unavailable_hours||[])}o=$l(o,1)}return a}catch{return{}}};isTimeSlotUnavailable=async(e,n,i)=>(await this.getMachineAvailability(e,n)).includes(i.toString());setMachineAvailability=async(e,n,i)=>{try{const{getOdpOrders:a}=ut.getState(),o=a().filter(f=>f.scheduled_machine_id===e&&f.status==="SCHEDULED"&&f.scheduled_start_time&&f.scheduled_end_time),l=new Date(n),u=new Date(l.getFullYear(),l.getMonth(),l.getDate()),d=new Date(u.getTime()+1440*60*1e3);for(const f of o){const g=new Date(f.scheduled_start_time),p=new Date(f.scheduled_end_time);if(g<d&&p>u)for(const _ of i){const b=new Date(u.getTime()+parseInt(_)*60*60*1e3),S=new Date(b.getTime()+3600*1e3);if(b<p&&S>g)throw new Error(`Cannot set machine unavailable during scheduled task: ${f.odp_number}`)}}return await ot.setMachineAvailability(e,n,i),this.set(f=>{const g={...f.machineAvailability};g[n]||(g[n]=[]);const p=g[n].find(_=>_.machine_id===e);return p?p.unavailable_hours=i:g[n].push({machine_id:e,date:n,unavailable_hours:i}),{machineAvailability:g}}),Ce.getState().showAlert(`Machine availability updated successfully for ${n}`,"success"),!0}catch(a){const o=Vn(a,"Machine Availability");throw Ce.getState().showAlert(o.message,"error"),o}};toggleMachineHourAvailability=async(e,n,i)=>{try{const a=await this.getMachineAvailability(e,n),o=i.toString();let l;return a.includes(o)?l=a.filter(u=>u!==o):l=[...a,o].sort((u,d)=>parseInt(u)-parseInt(d)),await ot.setMachineAvailability(e,n,l),this.set(u=>{const d={...u.machineAvailability};d[n]||(d[n]=[]);const f=d[n].find(g=>g.machine_id===e);return f?f.unavailable_hours=l:d[n].push({machine_id:e,date:n,unavailable_hours:l}),{machineAvailability:d}}),Ce.getState().showAlert(`Time slot ${o}:00 updated successfully`,"success"),!0}catch(a){const o=Vn(a,"Machine Availability");throw Ce.getState().showAlert(o.message,"error"),o}};setMachineUnavailability=async(e,n,i,a,o)=>{try{const l=await ot.setUnavailableHoursForRange(e,n,i,a,o),u=new Date(n),d=new Date(i),f=await this.loadMachineAvailabilityForDateRange(e,u,d);return f&&Array.isArray(f)&&this.set(g=>{const p={...g.machineAvailability};return f.forEach(_=>{if(_.date&&_.unavailable_hours){const b=Gt(new Date(_.date));p[b]||(p[b]=[]);const S=p[b].find(w=>w.machine_id===e);S?S.unavailable_hours=_.unavailable_hours:p[b].push({machine_id:e,date:b,unavailable_hours:_.unavailable_hours})}}),{machineAvailability:p}}),l}catch(l){throw l}};isMachineAvailabilityAccessible=async()=>{try{return await ot.getMachineAvailabilityForDateAllMachines("2025-01-01"),!0}catch{return!1}};getMachineAvailabilityStatus=async()=>{try{const e=await this.isMachineAvailabilityAccessible();return{accessible:e,message:e?"Table is accessible":"Table is not accessible - check permissions or table existence"}}catch(e){return{accessible:!1,message:`Error checking table: ${e.message}`}}};initializeEmptyMachineAvailability=()=>{const{machineAvailability:e}=this.get(),n={...e};this.set({machineAvailability:n})}}const Fi=so((t,e)=>{const n=new B1(e,t),i=new q1(e,t),a=new $1(e,t,n,i),o=new V1(e,t,a,n);return{machineAvailability:{},shuntPreview:null,splitTasksInfo:{},getMachineAvailabilityState:()=>e().machineAvailability,getSplitTaskInfo:l=>n.getSplitTaskInfo(l),setMachineAvailabilityState:l=>t({machineAvailability:l}),setShuntPreview:l=>t({shuntPreview:l}),clearShuntPreview:()=>t({shuntPreview:null}),setSplitTaskInfo:n.setSplitTaskInfo,clearSplitTaskInfo:n.clearSplitTaskInfo,updateSplitTaskInfo:n.updateSplitTaskInfo,restoreSplitTaskInfo:n.restoreSplitTaskInfo,updateTaskWithSplitInfo:n.updateTaskWithSplitInfo,getTaskOccupiedSegments:n.getTaskOccupiedSegments,checkTaskOverlap:n.checkTaskOverlap,checkMachineOverlaps:n.checkMachineOverlaps,migrateExistingTasksToSegmentFormat:n.migrateExistingTasksToSegmentFormat,createAbsoluteDate:a.createAbsoluteDate,splitTaskAcrossAvailableSlots:a.splitTaskAcrossAvailableSlots,collectUnavailableSlots:a.collectUnavailableSlots,scheduleTaskWithSplitting:a.scheduleTaskWithSplitting,scheduleTaskFromSlot:async(l,u,d,f,g)=>{try{const{getOdpOrderById:p}=ut.getState(),{getMachineById:_}=an.getState(),b=p(l),S=_(u.id);if(!b||!S)return{error:"Task or machine not found"};const w=d.getFullYear(),x=d.getMonth()+1,C=d.getDate(),T=a.createAbsoluteDate(w,x,C,f,g),O=b.time_remaining||b.duration||1;console.log(`📅 Scheduling task at ${w}-${x}-${C} ${f}:${g}`);const M={machine:u.id,start_time:T.toISOString(),end_time:Wb(T,O).toISOString()};return await e().scheduleTask(l,M)}catch{return{error:"An error occurred during scheduling"}}},rescheduleTaskToSlot:async(l,u,d,f,g)=>{try{const{getOdpOrderById:p}=ut.getState(),{getMachineById:_}=an.getState(),b=p(l),S=_(u.id);if(!b||!S)return{error:"Event or machine not found"};const w=d.getFullYear(),x=d.getMonth()+1,C=d.getDate(),T=a.createAbsoluteDate(w,x,C,f,g),O=b.time_remaining||b.duration||1;console.log(`🔄 Rescheduling task to ${w}-${x}-${C} ${f}:${g}`);const M={machine:u.id,start_time:T.toISOString(),end_time:Wb(T,O).toISOString()};return await e().scheduleTask(l,M)}catch{return{error:"An error occurred during rescheduling"}}},scheduleTask:async(l,u)=>{try{const{getOdpOrderById:d}=ut.getState(),{getMachineById:f}=an.getState(),g=d(l),p=f(u.machine);if(g&&p&&g.work_center&&p.work_center&&g.work_center!==p.work_center)return{error:`Work center mismatch: task requires '${g.work_center}' but machine is '${p.work_center}'`};const _=new Date(u.start_time),b=g.time_remaining||g.duration||1,S=await a.scheduleTaskWithSplitting(l,_,b,u.machine);if(!S)return{error:"No available time slots found for this task"};if(S.conflict)return console.log("🚨 Scheduling conflict detected during splitting - triggering shunting"),{conflict:!0,conflictingTask:S.conflictingTask,draggedTask:g,proposedStartTime:u.start_time,proposedEndTime:u.end_time,machine:p,conflictingSegment:S.conflictingSegment,proposedSegments:S.proposedSegments};u.start_time=S.startTime.toISOString(),u.end_time=S.endTime.toISOString();const w={scheduled_machine_id:u.machine,scheduled_start_time:u.start_time,scheduled_end_time:u.end_time,status:"SCHEDULED"},{updateOdpOrder:x}=ut.getState(),C=await x(l,w);return{success:!0}}catch(d){return console.error("Error in scheduleTask:",d),{error:`Scheduling failed: ${d.message}`}}},unscheduleTask:async l=>{const u={scheduled_machine_id:null,scheduled_start_time:null,scheduled_end_time:null,status:"NOT SCHEDULED"};await n.updateTaskWithSplitInfo(l,null);const{updateOdpOrder:d}=ut.getState();await d(l,u)},loadMachineAvailabilityForDate:i.loadMachineAvailabilityForDate,loadMachineAvailabilityForDateRange:i.loadMachineAvailabilityForDateRange,getMachineAvailability:i.getMachineAvailability,loadMachineAvailabilityForMachine:i.loadMachineAvailabilityForMachine,isTimeSlotUnavailable:i.isTimeSlotUnavailable,setMachineAvailability:i.setMachineAvailability,toggleMachineHourAvailability:i.toggleMachineHourAvailability,setMachineUnavailability:i.setMachineUnavailability,isMachineAvailabilityAccessible:i.isMachineAvailabilityAccessible,getMachineAvailabilityStatus:i.getMachineAvailabilityStatus,initializeEmptyMachineAvailability:i.initializeEmptyMachineAvailability,resolveConflictByShunting:o.resolveConflictByShunting,validateSlotAvailability:async(l,u,d,f)=>{try{const g=Gt(u);if(await e().isTimeSlotUnavailable(l.id,g,d))return{error:"Cannot schedule task on unavailable time slot"};const{getOdpOrders:_}=ut.getState(),b=new Date(u);b.setHours(d,f,0,0);const S=new Date(b.getTime()+3600*1e3),w=_().filter(x=>x.scheduled_machine_id===l.id&&x.status==="SCHEDULED"&&x.scheduled_start_time);for(const x of w){const C=new Date(x.scheduled_start_time),T=x.time_remaining||x.duration||1,O=new Date(C.getTime()+T*60*60*1e3);if(b<O&&S>C)return{error:"Cannot schedule task on occupied time slot"}}return{success:!0}}catch{return{error:"Error validating slot availability"}}},getEventsByDate:async l=>{try{return await ot.getEventsByDate(l)}catch{return[]}},reset:()=>t({machineAvailability:{},shuntPreview:null,splitTasksInfo:{}})}}),G1=(t,e)=>{const n=o=>{W1(o)},i=o=>{K1(o)},a=o=>{X1(o)};return ot.setupRealtimeSubscriptions(n,i,a)},Gg=()=>{window.realtimeChannel&&(ot.cleanupRealtimeSubscriptions(window.realtimeChannel),window.realtimeChannel=null)};let Al=null;typeof window<"u"&&(Al=()=>{Gg()},window.addEventListener("beforeunload",Al));const Y1=()=>{typeof window<"u"&&Al&&(window.removeEventListener("beforeunload",Al),Al=null)},W1=(t,e,n)=>{const{eventType:i,newRecord:a,oldRecord:o}=t,{setOdpOrders:l,getOdpOrders:u}=ut.getState(),{updateSplitTaskInfo:d}=Fi.getState();switch(i){case"INSERT":l([...u(),a]),a.status==="SCHEDULED"&&d(a.id,a);break;case"UPDATE":l(u().map(f=>f.id===a.id?a:f)),d(a.id,a);break;case"DELETE":l(u().filter(f=>f.id!==o.id));break}},K1=(t,e,n)=>{const{eventType:i,newRecord:a,oldRecord:o}=t,{setMachines:l,getMachines:u}=an.getState();switch(i){case"INSERT":l([...u(),a]);break;case"UPDATE":l(u().map(d=>d.id===a.id?a:d));break;case"DELETE":l(u().filter(d=>d.id!==o.id));break}},X1=(t,e,n)=>{const{eventType:i,newRecord:a,oldRecord:o}=t,{setPhases:l,getPhases:u}=si.getState();switch(i){case"INSERT":l([...u(),a]);break;case"UPDATE":l(u().map(d=>d.id===a.id?a:d));break;case"DELETE":l(u().filter(d=>d.id!==o.id));break}},Hi=so((t,e)=>({init:async()=>{const{getInitializationState:n,setLoading:i,setInitialized:a,showAlert:o}=Ce.getState(),{setMachines:l}=an.getState(),{setOdpOrders:u}=ut.getState(),{setPhases:d}=si.getState(),{initializeEmptyMachineAvailability:f}=Fi.getState();if(!n()){i(!0);try{let g=!1,p=0;const _=3;for(;!g&&p<_;)try{await ot.init(),g=!0}catch(x){p++;const C=Vn(x,"API Service Initialization");if(p>=_)throw mi(C,"API Service Initialization - Final Attempt Failed"),i(!1),a(!1),o("Unable to connect to the server. Please check your internet connection and refresh the page.","error"),new vn("API service initialization failed after multiple attempts","CRITICAL_INIT_ERROR",503,C,"Store Initialization");const T=Math.min(1e3*Math.pow(2,p-1),1e4);await new Promise(O=>setTimeout(O,T)),o(`Connection attempt ${p} failed. Retrying...`,"warning")}let b=[],S=[],w=[];try{b=await ot.getMachines()}catch(x){const C=Vn(x,"Machines Data Fetch");mi(C,"Machines Data Fetch Failed"),o("Warning: Unable to load machine data. Some features may be limited.","warning")}try{S=await ot.getOdpOrders()}catch(x){const C=Vn(x,"Orders Data Fetch");mi(C,"Orders Data Fetch Failed"),o("Warning: Unable to load order data. Some features may be limited.","warning")}try{w=await ot.getPhases()}catch(x){const C=Vn(x,"Phases Data Fetch");mi(C,"Phases Data Fetch Failed"),o("Warning: Unable to load phase data. Some features may be limited.","warning")}try{const x=[],C=new Set;b&&b.length>0&&b.forEach(D=>{C.has(D.id)||(C.add(D.id),x.push(D))}),l(x),u(S||[]),d(w||[]),f();const{restoreSplitTaskInfo:T,migrateExistingTasksToSegmentFormat:O}=Fi.getState();if(T(),await O(),!window.realtimeChannel)try{const D=G1(t,e);D&&(window.realtimeChannel=D)}catch(D){const U=Vn(D,"Real-time Subscriptions Setup");mi(U,"Real-time Subscriptions Setup Failed"),o("Warning: Real-time updates are not available. Data may not update automatically.","warning")}i(!1),a(!0);const M=x.length+(S?.length||0)+(w?.length||0);M>0?o(`Application initialized successfully. Loaded ${M} data items.`,"success"):o("Application initialized with limited functionality due to data loading issues.","warning")}catch(x){const C=Vn(x,"Data Processing");throw mi(C,"Data Processing Failed"),i(!1),a(!1),o("Failed to process application data. Please refresh the page.","error"),C}}catch(g){const p=g instanceof vn?g:Vn(g,"Store Initialization");throw mi(p,"Store Initialization - Unexpected Error"),i(!1),a(!1),p.code==="CRITICAL_INIT_ERROR"?o("Critical initialization error. Please contact support if the problem persists.","error"):o("Application initialization failed. Please refresh the page or contact support.","error"),p}}},refreshData:async()=>{const{setLoading:n}=Ce.getState(),{setMachines:i}=an.getState(),{setOdpOrders:a}=ut.getState(),{setPhases:o}=si.getState();n(!0);try{const[l,u,d]=await Promise.all([ot.getMachines(),ot.getOdpOrders(),ot.getPhases()]);i(l||[]),a(u||[]),o(d||[]),n(!1)}catch{n(!1)}},debugData:()=>{const{getMachines:n}=an.getState(),{getOdpOrders:i}=ut.getState(),{getPhases:a}=si.getState(),o=n().map(d=>d.id);o.filter((d,f)=>o.indexOf(d)!==f);const l=i().map(d=>d.id);l.filter((d,f)=>l.indexOf(d)!==f);const u=a().map(d=>d.id);u.filter((d,f)=>u.indexOf(d)!==f)},cleanupDuplicates:()=>{const{cleanupDuplicateMachines:n}=an.getState(),{cleanupDuplicateOrders:i}=ut.getState(),{cleanupDuplicatePhases:a}=si.getState();n(),i(),a()},reset:()=>{Gg();const{reset:n}=an.getState(),{reset:i}=ut.getState(),{reset:a}=si.getState(),{reset:o}=Fi.getState(),{reset:l}=Ce.getState();n(),i(),a(),o(),l()},cleanup:()=>{Gg(),Y1()},getState:()=>{const{getMachines:n}=an.getState(),{getOdpOrders:i}=ut.getState(),{getPhases:a}=si.getState(),{getLoadingState:o,getInitializationState:l}=Ce.getState();return{machines:n(),odpOrders:i(),phases:a(),machineAvailability:Fi.getState().getMachineAvailabilityState(),isLoading:o(),isInitialized:l()}}}));function Q1(){const{user:t,signOut:e}=sc(),{selectedWorkCenter:n}=Ce(),i=bs(),a=aa(),o=[{href:"/",label:"Home"},{href:"/machinery",label:"Macchine",subLinks:[{href:"/machinery",label:"Lista"},{href:"/machinery/add",label:"Aggiungi"}]},{href:"/phases",label:"Fasi",subLinks:[{href:"/phases",label:"Lista"},{href:"/phases/add",label:"Aggiungi"}]},{href:"/backlog",label:"Backlog",subLinks:[{href:"/backlog",label:"Lista"},{href:"/backlog/add",label:"Aggiungi"}]},{href:"/scheduler",label:"Scheduler"}],l=async()=>{try{await e(),a("/login")}catch(u){console.error("Sign out error:",u)}};return t?y.jsxs("nav",{className:"sidebar",children:[y.jsx("div",{className:"sidebar-logo",children:y.jsxs(Cn,{to:"/",children:[y.jsx("span",{className:"logo-flex",children:"flex"}),y.jsx("span",{className:"logo-i",children:"i"})]})}),y.jsxs("div",{className:"sidebar-links",children:[y.jsx("h3",{className:"sidebar-section-title",children:"NAVIGATION"}),o.map(u=>{const d=i.pathname===u.href||u.subLinks&&u.subLinks.some(f=>i.pathname===f.href);return y.jsxs("div",{className:"nav-item",children:[y.jsx(Cn,{to:u.href,className:`sidebar-link ${d?"active":""}`,children:y.jsx("span",{children:u.label})}),u.subLinks&&y.jsx("div",{className:"sub-nav",children:u.subLinks.map(f=>y.jsx(Cn,{to:f.href,className:`sub-nav-link ${i.pathname===f.href?"active":""}`,children:y.jsx("span",{children:f.label})},f.href))})]},u.href)})]}),y.jsxs("div",{className:"sidebar-user",children:[y.jsx("div",{className:"user-avatar",children:t.email?t.email.charAt(0).toUpperCase():"U"}),y.jsxs("div",{className:"user-info",children:[y.jsx("div",{className:"user-email",children:t.email}),n&&y.jsxs("div",{className:"work-center-badge",children:["WC: ",n]}),y.jsx("div",{className:"realtime-status",children:y.jsx("span",{className:"status-indicator offline",children:"OFFLINE"})})]})]}),y.jsxs("div",{className:"sidebar-actions",children:[y.jsx("h3",{className:"sidebar-section-title",children:"ACCOUNT"}),y.jsx("button",{onClick:l,className:"sidebar-action-btn signout-btn",children:y.jsx("span",{children:"Esci"})})]})]}):y.jsxs("nav",{className:"sidebar",children:[y.jsx("div",{className:"sidebar-logo",children:y.jsxs(Cn,{to:"/login",children:[y.jsx("span",{className:"logo-flex",children:"flex"}),y.jsx("span",{className:"logo-i",children:"i"})]})}),y.jsxs("div",{className:"sidebar-links",children:[y.jsx("h3",{className:"sidebar-section-title",children:"NAVIGATION"}),y.jsx(Cn,{to:"/login",className:"sidebar-link",children:y.jsx("span",{children:"Accedi"})}),y.jsx(Cn,{to:"/signup",className:"sidebar-link",children:y.jsx("span",{children:"Registrati"})})]})]})}/**
   * table-core
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function ea(t,e){return typeof t=="function"?t(e):t}function qn(t,e){return n=>{e.setState(i=>({...i,[t]:ea(n,i[t])}))}}function Ad(t){return t instanceof Function}function Z1(t){return Array.isArray(t)&&t.every(e=>typeof e=="number")}function J1(t,e){const n=[],i=a=>{a.forEach(o=>{n.push(o);const l=e(o);l!=null&&l.length&&i(l)})};return i(t),n}function Re(t,e,n){let i=[],a;return o=>{let l;n.key&&n.debug&&(l=Date.now());const u=t(o);if(!(u.length!==i.length||u.some((g,p)=>i[p]!==g)))return a;i=u;let f;if(n.key&&n.debug&&(f=Date.now()),a=e(...u),n==null||n.onChange==null||n.onChange(a),n.key&&n.debug&&n!=null&&n.debug()){const g=Math.round((Date.now()-l)*100)/100,p=Math.round((Date.now()-f)*100)/100,_=p/16,b=(S,w)=>{for(S=String(S);S.length<w;)S=" "+S;return S};console.info(`%c⏱ ${b(p,5)} /${b(g,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*_,120))}deg 100% 31%);`,n?.key)}return a}}function De(t,e,n,i){return{debug:()=>{var a;return(a=t?.debugAll)!=null?a:t[e]},key:!1,onChange:i}}function eM(t,e,n,i){const a=()=>{var l;return(l=o.getValue())!=null?l:t.options.renderFallbackValue},o={id:`${e.id}_${n.id}`,row:e,column:n,getValue:()=>e.getValue(i),renderValue:a,getContext:Re(()=>[t,n,e,o],(l,u,d,f)=>({table:l,column:u,row:d,cell:f,getValue:f.getValue,renderValue:f.renderValue}),De(t.options,"debugCells"))};return t._features.forEach(l=>{l.createCell==null||l.createCell(o,n,e,t)},{}),o}function tM(t,e,n,i){var a,o;const u={...t._getDefaultColumnDef(),...e},d=u.accessorKey;let f=(a=(o=u.id)!=null?o:d?typeof String.prototype.replaceAll=="function"?d.replaceAll(".","_"):d.replace(/\./g,"_"):void 0)!=null?a:typeof u.header=="string"?u.header:void 0,g;if(u.accessorFn?g=u.accessorFn:d&&(d.includes(".")?g=_=>{let b=_;for(const w of d.split(".")){var S;b=(S=b)==null?void 0:S[w]}return b}:g=_=>_[u.accessorKey]),!f)throw new Error;let p={id:`${String(f)}`,accessorFn:g,parent:i,depth:n,columnDef:u,columns:[],getFlatColumns:Re(()=>[!0],()=>{var _;return[p,...(_=p.columns)==null?void 0:_.flatMap(b=>b.getFlatColumns())]},De(t.options,"debugColumns")),getLeafColumns:Re(()=>[t._getOrderColumnsFn()],_=>{var b;if((b=p.columns)!=null&&b.length){let S=p.columns.flatMap(w=>w.getLeafColumns());return _(S)}return[p]},De(t.options,"debugColumns"))};for(const _ of t._features)_.createColumn==null||_.createColumn(p,t);return p}const pn="debugHeaders";function Kb(t,e,n){var i;let o={id:(i=n.id)!=null?i:e.id,column:e,index:n.index,isPlaceholder:!!n.isPlaceholder,placeholderId:n.placeholderId,depth:n.depth,subHeaders:[],colSpan:0,rowSpan:0,headerGroup:null,getLeafHeaders:()=>{const l=[],u=d=>{d.subHeaders&&d.subHeaders.length&&d.subHeaders.map(u),l.push(d)};return u(o),l},getContext:()=>({table:t,header:o,column:e})};return t._features.forEach(l=>{l.createHeader==null||l.createHeader(o,t)}),o}const nM={createTable:t=>{t.getHeaderGroups=Re(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,n,i,a)=>{var o,l;const u=(o=i?.map(p=>n.find(_=>_.id===p)).filter(Boolean))!=null?o:[],d=(l=a?.map(p=>n.find(_=>_.id===p)).filter(Boolean))!=null?l:[],f=n.filter(p=>!(i!=null&&i.includes(p.id))&&!(a!=null&&a.includes(p.id)));return Mu(e,[...u,...f,...d],t)},De(t.options,pn)),t.getCenterHeaderGroups=Re(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,n,i,a)=>(n=n.filter(o=>!(i!=null&&i.includes(o.id))&&!(a!=null&&a.includes(o.id))),Mu(e,n,t,"center")),De(t.options,pn)),t.getLeftHeaderGroups=Re(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.left],(e,n,i)=>{var a;const o=(a=i?.map(l=>n.find(u=>u.id===l)).filter(Boolean))!=null?a:[];return Mu(e,o,t,"left")},De(t.options,pn)),t.getRightHeaderGroups=Re(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.right],(e,n,i)=>{var a;const o=(a=i?.map(l=>n.find(u=>u.id===l)).filter(Boolean))!=null?a:[];return Mu(e,o,t,"right")},De(t.options,pn)),t.getFooterGroups=Re(()=>[t.getHeaderGroups()],e=>[...e].reverse(),De(t.options,pn)),t.getLeftFooterGroups=Re(()=>[t.getLeftHeaderGroups()],e=>[...e].reverse(),De(t.options,pn)),t.getCenterFooterGroups=Re(()=>[t.getCenterHeaderGroups()],e=>[...e].reverse(),De(t.options,pn)),t.getRightFooterGroups=Re(()=>[t.getRightHeaderGroups()],e=>[...e].reverse(),De(t.options,pn)),t.getFlatHeaders=Re(()=>[t.getHeaderGroups()],e=>e.map(n=>n.headers).flat(),De(t.options,pn)),t.getLeftFlatHeaders=Re(()=>[t.getLeftHeaderGroups()],e=>e.map(n=>n.headers).flat(),De(t.options,pn)),t.getCenterFlatHeaders=Re(()=>[t.getCenterHeaderGroups()],e=>e.map(n=>n.headers).flat(),De(t.options,pn)),t.getRightFlatHeaders=Re(()=>[t.getRightHeaderGroups()],e=>e.map(n=>n.headers).flat(),De(t.options,pn)),t.getCenterLeafHeaders=Re(()=>[t.getCenterFlatHeaders()],e=>e.filter(n=>{var i;return!((i=n.subHeaders)!=null&&i.length)}),De(t.options,pn)),t.getLeftLeafHeaders=Re(()=>[t.getLeftFlatHeaders()],e=>e.filter(n=>{var i;return!((i=n.subHeaders)!=null&&i.length)}),De(t.options,pn)),t.getRightLeafHeaders=Re(()=>[t.getRightFlatHeaders()],e=>e.filter(n=>{var i;return!((i=n.subHeaders)!=null&&i.length)}),De(t.options,pn)),t.getLeafHeaders=Re(()=>[t.getLeftHeaderGroups(),t.getCenterHeaderGroups(),t.getRightHeaderGroups()],(e,n,i)=>{var a,o,l,u,d,f;return[...(a=(o=e[0])==null?void 0:o.headers)!=null?a:[],...(l=(u=n[0])==null?void 0:u.headers)!=null?l:[],...(d=(f=i[0])==null?void 0:f.headers)!=null?d:[]].map(g=>g.getLeafHeaders()).flat()},De(t.options,pn))}};function Mu(t,e,n,i){var a,o;let l=0;const u=function(_,b){b===void 0&&(b=1),l=Math.max(l,b),_.filter(S=>S.getIsVisible()).forEach(S=>{var w;(w=S.columns)!=null&&w.length&&u(S.columns,b+1)},0)};u(t);let d=[];const f=(_,b)=>{const S={depth:b,id:[i,`${b}`].filter(Boolean).join("_"),headers:[]},w=[];_.forEach(x=>{const C=[...w].reverse()[0],T=x.column.depth===S.depth;let O,M=!1;if(T&&x.column.parent?O=x.column.parent:(O=x.column,M=!0),C&&C?.column===O)C.subHeaders.push(x);else{const D=Kb(n,O,{id:[i,b,O.id,x?.id].filter(Boolean).join("_"),isPlaceholder:M,placeholderId:M?`${w.filter(U=>U.column===O).length}`:void 0,depth:b,index:w.length});D.subHeaders.push(x),w.push(D)}S.headers.push(x),x.headerGroup=S}),d.push(S),b>0&&f(w,b-1)},g=e.map((_,b)=>Kb(n,_,{depth:l,index:b}));f(g,l-1),d.reverse();const p=_=>_.filter(S=>S.column.getIsVisible()).map(S=>{let w=0,x=0,C=[0];S.subHeaders&&S.subHeaders.length?(C=[],p(S.subHeaders).forEach(O=>{let{colSpan:M,rowSpan:D}=O;w+=M,C.push(D)})):w=1;const T=Math.min(...C);return x=x+T,S.colSpan=w,S.rowSpan=x,{colSpan:w,rowSpan:x}});return p((a=(o=d[0])==null?void 0:o.headers)!=null?a:[]),d}const iM=(t,e,n,i,a,o,l)=>{let u={id:e,index:i,original:n,depth:a,parentId:l,_valuesCache:{},_uniqueValuesCache:{},getValue:d=>{if(u._valuesCache.hasOwnProperty(d))return u._valuesCache[d];const f=t.getColumn(d);if(f!=null&&f.accessorFn)return u._valuesCache[d]=f.accessorFn(u.original,i),u._valuesCache[d]},getUniqueValues:d=>{if(u._uniqueValuesCache.hasOwnProperty(d))return u._uniqueValuesCache[d];const f=t.getColumn(d);if(f!=null&&f.accessorFn)return f.columnDef.getUniqueValues?(u._uniqueValuesCache[d]=f.columnDef.getUniqueValues(u.original,i),u._uniqueValuesCache[d]):(u._uniqueValuesCache[d]=[u.getValue(d)],u._uniqueValuesCache[d])},renderValue:d=>{var f;return(f=u.getValue(d))!=null?f:t.options.renderFallbackValue},subRows:[],getLeafRows:()=>J1(u.subRows,d=>d.subRows),getParentRow:()=>u.parentId?t.getRow(u.parentId,!0):void 0,getParentRows:()=>{let d=[],f=u;for(;;){const g=f.getParentRow();if(!g)break;d.push(g),f=g}return d.reverse()},getAllCells:Re(()=>[t.getAllLeafColumns()],d=>d.map(f=>eM(t,u,f,f.id)),De(t.options,"debugRows")),_getAllCellsByColumnId:Re(()=>[u.getAllCells()],d=>d.reduce((f,g)=>(f[g.column.id]=g,f),{}),De(t.options,"debugRows"))};for(let d=0;d<t._features.length;d++){const f=t._features[d];f==null||f.createRow==null||f.createRow(u,t)}return u},sM={createColumn:(t,e)=>{t._getFacetedRowModel=e.options.getFacetedRowModel&&e.options.getFacetedRowModel(e,t.id),t.getFacetedRowModel=()=>t._getFacetedRowModel?t._getFacetedRowModel():e.getPreFilteredRowModel(),t._getFacetedUniqueValues=e.options.getFacetedUniqueValues&&e.options.getFacetedUniqueValues(e,t.id),t.getFacetedUniqueValues=()=>t._getFacetedUniqueValues?t._getFacetedUniqueValues():new Map,t._getFacetedMinMaxValues=e.options.getFacetedMinMaxValues&&e.options.getFacetedMinMaxValues(e,t.id),t.getFacetedMinMaxValues=()=>{if(t._getFacetedMinMaxValues)return t._getFacetedMinMaxValues()}}},Rw=(t,e,n)=>{var i,a;const o=n==null||(i=n.toString())==null?void 0:i.toLowerCase();return!!(!((a=t.getValue(e))==null||(a=a.toString())==null||(a=a.toLowerCase())==null)&&a.includes(o))};Rw.autoRemove=t=>_i(t);const Dw=(t,e,n)=>{var i;return!!(!((i=t.getValue(e))==null||(i=i.toString())==null)&&i.includes(n))};Dw.autoRemove=t=>_i(t);const Mw=(t,e,n)=>{var i;return((i=t.getValue(e))==null||(i=i.toString())==null?void 0:i.toLowerCase())===n?.toLowerCase()};Mw.autoRemove=t=>_i(t);const kw=(t,e,n)=>{var i;return(i=t.getValue(e))==null?void 0:i.includes(n)};kw.autoRemove=t=>_i(t);const Nw=(t,e,n)=>!n.some(i=>{var a;return!((a=t.getValue(e))!=null&&a.includes(i))});Nw.autoRemove=t=>_i(t)||!(t!=null&&t.length);const jw=(t,e,n)=>n.some(i=>{var a;return(a=t.getValue(e))==null?void 0:a.includes(i)});jw.autoRemove=t=>_i(t)||!(t!=null&&t.length);const Lw=(t,e,n)=>t.getValue(e)===n;Lw.autoRemove=t=>_i(t);const Pw=(t,e,n)=>t.getValue(e)==n;Pw.autoRemove=t=>_i(t);const Tm=(t,e,n)=>{let[i,a]=n;const o=t.getValue(e);return o>=i&&o<=a};Tm.resolveFilterValue=t=>{let[e,n]=t,i=typeof e!="number"?parseFloat(e):e,a=typeof n!="number"?parseFloat(n):n,o=e===null||Number.isNaN(i)?-1/0:i,l=n===null||Number.isNaN(a)?1/0:a;if(o>l){const u=o;o=l,l=u}return[o,l]};Tm.autoRemove=t=>_i(t)||_i(t[0])&&_i(t[1]);const fs={includesString:Rw,includesStringSensitive:Dw,equalsString:Mw,arrIncludes:kw,arrIncludesAll:Nw,arrIncludesSome:jw,equals:Lw,weakEquals:Pw,inNumberRange:Tm};function _i(t){return t==null||t===""}const aM={getDefaultColumnDef:()=>({filterFn:"auto"}),getInitialState:t=>({columnFilters:[],...t}),getDefaultOptions:t=>({onColumnFiltersChange:qn("columnFilters",t),filterFromLeafRows:!1,maxLeafRowFilterDepth:100}),createColumn:(t,e)=>{t.getAutoFilterFn=()=>{const n=e.getCoreRowModel().flatRows[0],i=n?.getValue(t.id);return typeof i=="string"?fs.includesString:typeof i=="number"?fs.inNumberRange:typeof i=="boolean"||i!==null&&typeof i=="object"?fs.equals:Array.isArray(i)?fs.arrIncludes:fs.weakEquals},t.getFilterFn=()=>{var n,i;return Ad(t.columnDef.filterFn)?t.columnDef.filterFn:t.columnDef.filterFn==="auto"?t.getAutoFilterFn():(n=(i=e.options.filterFns)==null?void 0:i[t.columnDef.filterFn])!=null?n:fs[t.columnDef.filterFn]},t.getCanFilter=()=>{var n,i,a;return((n=t.columnDef.enableColumnFilter)!=null?n:!0)&&((i=e.options.enableColumnFilters)!=null?i:!0)&&((a=e.options.enableFilters)!=null?a:!0)&&!!t.accessorFn},t.getIsFiltered=()=>t.getFilterIndex()>-1,t.getFilterValue=()=>{var n;return(n=e.getState().columnFilters)==null||(n=n.find(i=>i.id===t.id))==null?void 0:n.value},t.getFilterIndex=()=>{var n,i;return(n=(i=e.getState().columnFilters)==null?void 0:i.findIndex(a=>a.id===t.id))!=null?n:-1},t.setFilterValue=n=>{e.setColumnFilters(i=>{const a=t.getFilterFn(),o=i?.find(g=>g.id===t.id),l=ea(n,o?o.value:void 0);if(Xb(a,l,t)){var u;return(u=i?.filter(g=>g.id!==t.id))!=null?u:[]}const d={id:t.id,value:l};if(o){var f;return(f=i?.map(g=>g.id===t.id?d:g))!=null?f:[]}return i!=null&&i.length?[...i,d]:[d]})}},createRow:(t,e)=>{t.columnFilters={},t.columnFiltersMeta={}},createTable:t=>{t.setColumnFilters=e=>{const n=t.getAllLeafColumns(),i=a=>{var o;return(o=ea(e,a))==null?void 0:o.filter(l=>{const u=n.find(d=>d.id===l.id);if(u){const d=u.getFilterFn();if(Xb(d,l.value,u))return!1}return!0})};t.options.onColumnFiltersChange==null||t.options.onColumnFiltersChange(i)},t.resetColumnFilters=e=>{var n,i;t.setColumnFilters(e?[]:(n=(i=t.initialState)==null?void 0:i.columnFilters)!=null?n:[])},t.getPreFilteredRowModel=()=>t.getCoreRowModel(),t.getFilteredRowModel=()=>(!t._getFilteredRowModel&&t.options.getFilteredRowModel&&(t._getFilteredRowModel=t.options.getFilteredRowModel(t)),t.options.manualFiltering||!t._getFilteredRowModel?t.getPreFilteredRowModel():t._getFilteredRowModel())}};function Xb(t,e,n){return(t&&t.autoRemove?t.autoRemove(e,n):!1)||typeof e>"u"||typeof e=="string"&&!e}const rM=(t,e,n)=>n.reduce((i,a)=>{const o=a.getValue(t);return i+(typeof o=="number"?o:0)},0),oM=(t,e,n)=>{let i;return n.forEach(a=>{const o=a.getValue(t);o!=null&&(i>o||i===void 0&&o>=o)&&(i=o)}),i},lM=(t,e,n)=>{let i;return n.forEach(a=>{const o=a.getValue(t);o!=null&&(i<o||i===void 0&&o>=o)&&(i=o)}),i},cM=(t,e,n)=>{let i,a;return n.forEach(o=>{const l=o.getValue(t);l!=null&&(i===void 0?l>=l&&(i=a=l):(i>l&&(i=l),a<l&&(a=l)))}),[i,a]},uM=(t,e)=>{let n=0,i=0;if(e.forEach(a=>{let o=a.getValue(t);o!=null&&(o=+o)>=o&&(++n,i+=o)}),n)return i/n},dM=(t,e)=>{if(!e.length)return;const n=e.map(o=>o.getValue(t));if(!Z1(n))return;if(n.length===1)return n[0];const i=Math.floor(n.length/2),a=n.sort((o,l)=>o-l);return n.length%2!==0?a[i]:(a[i-1]+a[i])/2},hM=(t,e)=>Array.from(new Set(e.map(n=>n.getValue(t))).values()),fM=(t,e)=>new Set(e.map(n=>n.getValue(t))).size,gM=(t,e)=>e.length,dg={sum:rM,min:oM,max:lM,extent:cM,mean:uM,median:dM,unique:hM,uniqueCount:fM,count:gM},mM={getDefaultColumnDef:()=>({aggregatedCell:t=>{var e,n;return(e=(n=t.getValue())==null||n.toString==null?void 0:n.toString())!=null?e:null},aggregationFn:"auto"}),getInitialState:t=>({grouping:[],...t}),getDefaultOptions:t=>({onGroupingChange:qn("grouping",t),groupedColumnMode:"reorder"}),createColumn:(t,e)=>{t.toggleGrouping=()=>{e.setGrouping(n=>n!=null&&n.includes(t.id)?n.filter(i=>i!==t.id):[...n??[],t.id])},t.getCanGroup=()=>{var n,i;return((n=t.columnDef.enableGrouping)!=null?n:!0)&&((i=e.options.enableGrouping)!=null?i:!0)&&(!!t.accessorFn||!!t.columnDef.getGroupingValue)},t.getIsGrouped=()=>{var n;return(n=e.getState().grouping)==null?void 0:n.includes(t.id)},t.getGroupedIndex=()=>{var n;return(n=e.getState().grouping)==null?void 0:n.indexOf(t.id)},t.getToggleGroupingHandler=()=>{const n=t.getCanGroup();return()=>{n&&t.toggleGrouping()}},t.getAutoAggregationFn=()=>{const n=e.getCoreRowModel().flatRows[0],i=n?.getValue(t.id);if(typeof i=="number")return dg.sum;if(Object.prototype.toString.call(i)==="[object Date]")return dg.extent},t.getAggregationFn=()=>{var n,i;if(!t)throw new Error;return Ad(t.columnDef.aggregationFn)?t.columnDef.aggregationFn:t.columnDef.aggregationFn==="auto"?t.getAutoAggregationFn():(n=(i=e.options.aggregationFns)==null?void 0:i[t.columnDef.aggregationFn])!=null?n:dg[t.columnDef.aggregationFn]}},createTable:t=>{t.setGrouping=e=>t.options.onGroupingChange==null?void 0:t.options.onGroupingChange(e),t.resetGrouping=e=>{var n,i;t.setGrouping(e?[]:(n=(i=t.initialState)==null?void 0:i.grouping)!=null?n:[])},t.getPreGroupedRowModel=()=>t.getFilteredRowModel(),t.getGroupedRowModel=()=>(!t._getGroupedRowModel&&t.options.getGroupedRowModel&&(t._getGroupedRowModel=t.options.getGroupedRowModel(t)),t.options.manualGrouping||!t._getGroupedRowModel?t.getPreGroupedRowModel():t._getGroupedRowModel())},createRow:(t,e)=>{t.getIsGrouped=()=>!!t.groupingColumnId,t.getGroupingValue=n=>{if(t._groupingValuesCache.hasOwnProperty(n))return t._groupingValuesCache[n];const i=e.getColumn(n);return i!=null&&i.columnDef.getGroupingValue?(t._groupingValuesCache[n]=i.columnDef.getGroupingValue(t.original),t._groupingValuesCache[n]):t.getValue(n)},t._groupingValuesCache={}},createCell:(t,e,n,i)=>{t.getIsGrouped=()=>e.getIsGrouped()&&e.id===n.groupingColumnId,t.getIsPlaceholder=()=>!t.getIsGrouped()&&e.getIsGrouped(),t.getIsAggregated=()=>{var a;return!t.getIsGrouped()&&!t.getIsPlaceholder()&&!!((a=n.subRows)!=null&&a.length)}}};function pM(t,e,n){if(!(e!=null&&e.length)||!n)return t;const i=t.filter(o=>!e.includes(o.id));return n==="remove"?i:[...e.map(o=>t.find(l=>l.id===o)).filter(Boolean),...i]}const vM={getInitialState:t=>({columnOrder:[],...t}),getDefaultOptions:t=>({onColumnOrderChange:qn("columnOrder",t)}),createColumn:(t,e)=>{t.getIndex=Re(n=>[Rl(e,n)],n=>n.findIndex(i=>i.id===t.id),De(e.options,"debugColumns")),t.getIsFirstColumn=n=>{var i;return((i=Rl(e,n)[0])==null?void 0:i.id)===t.id},t.getIsLastColumn=n=>{var i;const a=Rl(e,n);return((i=a[a.length-1])==null?void 0:i.id)===t.id}},createTable:t=>{t.setColumnOrder=e=>t.options.onColumnOrderChange==null?void 0:t.options.onColumnOrderChange(e),t.resetColumnOrder=e=>{var n;t.setColumnOrder(e?[]:(n=t.initialState.columnOrder)!=null?n:[])},t._getOrderColumnsFn=Re(()=>[t.getState().columnOrder,t.getState().grouping,t.options.groupedColumnMode],(e,n,i)=>a=>{let o=[];if(!(e!=null&&e.length))o=a;else{const l=[...e],u=[...a];for(;u.length&&l.length;){const d=l.shift(),f=u.findIndex(g=>g.id===d);f>-1&&o.push(u.splice(f,1)[0])}o=[...o,...u]}return pM(o,n,i)},De(t.options,"debugTable"))}},hg=()=>({left:[],right:[]}),yM={getInitialState:t=>({columnPinning:hg(),...t}),getDefaultOptions:t=>({onColumnPinningChange:qn("columnPinning",t)}),createColumn:(t,e)=>{t.pin=n=>{const i=t.getLeafColumns().map(a=>a.id).filter(Boolean);e.setColumnPinning(a=>{var o,l;if(n==="right"){var u,d;return{left:((u=a?.left)!=null?u:[]).filter(p=>!(i!=null&&i.includes(p))),right:[...((d=a?.right)!=null?d:[]).filter(p=>!(i!=null&&i.includes(p))),...i]}}if(n==="left"){var f,g;return{left:[...((f=a?.left)!=null?f:[]).filter(p=>!(i!=null&&i.includes(p))),...i],right:((g=a?.right)!=null?g:[]).filter(p=>!(i!=null&&i.includes(p)))}}return{left:((o=a?.left)!=null?o:[]).filter(p=>!(i!=null&&i.includes(p))),right:((l=a?.right)!=null?l:[]).filter(p=>!(i!=null&&i.includes(p)))}})},t.getCanPin=()=>t.getLeafColumns().some(i=>{var a,o,l;return((a=i.columnDef.enablePinning)!=null?a:!0)&&((o=(l=e.options.enableColumnPinning)!=null?l:e.options.enablePinning)!=null?o:!0)}),t.getIsPinned=()=>{const n=t.getLeafColumns().map(u=>u.id),{left:i,right:a}=e.getState().columnPinning,o=n.some(u=>i?.includes(u)),l=n.some(u=>a?.includes(u));return o?"left":l?"right":!1},t.getPinnedIndex=()=>{var n,i;const a=t.getIsPinned();return a?(n=(i=e.getState().columnPinning)==null||(i=i[a])==null?void 0:i.indexOf(t.id))!=null?n:-1:0}},createRow:(t,e)=>{t.getCenterVisibleCells=Re(()=>[t._getAllVisibleCells(),e.getState().columnPinning.left,e.getState().columnPinning.right],(n,i,a)=>{const o=[...i??[],...a??[]];return n.filter(l=>!o.includes(l.column.id))},De(e.options,"debugRows")),t.getLeftVisibleCells=Re(()=>[t._getAllVisibleCells(),e.getState().columnPinning.left],(n,i)=>(i??[]).map(o=>n.find(l=>l.column.id===o)).filter(Boolean).map(o=>({...o,position:"left"})),De(e.options,"debugRows")),t.getRightVisibleCells=Re(()=>[t._getAllVisibleCells(),e.getState().columnPinning.right],(n,i)=>(i??[]).map(o=>n.find(l=>l.column.id===o)).filter(Boolean).map(o=>({...o,position:"right"})),De(e.options,"debugRows"))},createTable:t=>{t.setColumnPinning=e=>t.options.onColumnPinningChange==null?void 0:t.options.onColumnPinningChange(e),t.resetColumnPinning=e=>{var n,i;return t.setColumnPinning(e?hg():(n=(i=t.initialState)==null?void 0:i.columnPinning)!=null?n:hg())},t.getIsSomeColumnsPinned=e=>{var n;const i=t.getState().columnPinning;if(!e){var a,o;return!!((a=i.left)!=null&&a.length||(o=i.right)!=null&&o.length)}return!!((n=i[e])!=null&&n.length)},t.getLeftLeafColumns=Re(()=>[t.getAllLeafColumns(),t.getState().columnPinning.left],(e,n)=>(n??[]).map(i=>e.find(a=>a.id===i)).filter(Boolean),De(t.options,"debugColumns")),t.getRightLeafColumns=Re(()=>[t.getAllLeafColumns(),t.getState().columnPinning.right],(e,n)=>(n??[]).map(i=>e.find(a=>a.id===i)).filter(Boolean),De(t.options,"debugColumns")),t.getCenterLeafColumns=Re(()=>[t.getAllLeafColumns(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,n,i)=>{const a=[...n??[],...i??[]];return e.filter(o=>!a.includes(o.id))},De(t.options,"debugColumns"))}};function _M(t){return t||(typeof document<"u"?document:null)}const ku={size:150,minSize:20,maxSize:Number.MAX_SAFE_INTEGER},fg=()=>({startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]}),bM={getDefaultColumnDef:()=>ku,getInitialState:t=>({columnSizing:{},columnSizingInfo:fg(),...t}),getDefaultOptions:t=>({columnResizeMode:"onEnd",columnResizeDirection:"ltr",onColumnSizingChange:qn("columnSizing",t),onColumnSizingInfoChange:qn("columnSizingInfo",t)}),createColumn:(t,e)=>{t.getSize=()=>{var n,i,a;const o=e.getState().columnSizing[t.id];return Math.min(Math.max((n=t.columnDef.minSize)!=null?n:ku.minSize,(i=o??t.columnDef.size)!=null?i:ku.size),(a=t.columnDef.maxSize)!=null?a:ku.maxSize)},t.getStart=Re(n=>[n,Rl(e,n),e.getState().columnSizing],(n,i)=>i.slice(0,t.getIndex(n)).reduce((a,o)=>a+o.getSize(),0),De(e.options,"debugColumns")),t.getAfter=Re(n=>[n,Rl(e,n),e.getState().columnSizing],(n,i)=>i.slice(t.getIndex(n)+1).reduce((a,o)=>a+o.getSize(),0),De(e.options,"debugColumns")),t.resetSize=()=>{e.setColumnSizing(n=>{let{[t.id]:i,...a}=n;return a})},t.getCanResize=()=>{var n,i;return((n=t.columnDef.enableResizing)!=null?n:!0)&&((i=e.options.enableColumnResizing)!=null?i:!0)},t.getIsResizing=()=>e.getState().columnSizingInfo.isResizingColumn===t.id},createHeader:(t,e)=>{t.getSize=()=>{let n=0;const i=a=>{if(a.subHeaders.length)a.subHeaders.forEach(i);else{var o;n+=(o=a.column.getSize())!=null?o:0}};return i(t),n},t.getStart=()=>{if(t.index>0){const n=t.headerGroup.headers[t.index-1];return n.getStart()+n.getSize()}return 0},t.getResizeHandler=n=>{const i=e.getColumn(t.column.id),a=i?.getCanResize();return o=>{if(!i||!a||(o.persist==null||o.persist(),gg(o)&&o.touches&&o.touches.length>1))return;const l=t.getSize(),u=t?t.getLeafHeaders().map(C=>[C.column.id,C.column.getSize()]):[[i.id,i.getSize()]],d=gg(o)?Math.round(o.touches[0].clientX):o.clientX,f={},g=(C,T)=>{typeof T=="number"&&(e.setColumnSizingInfo(O=>{var M,D;const U=e.options.columnResizeDirection==="rtl"?-1:1,L=(T-((M=O?.startOffset)!=null?M:0))*U,B=Math.max(L/((D=O?.startSize)!=null?D:0),-.999999);return O.columnSizingStart.forEach(H=>{let[Q,Z]=H;f[Q]=Math.round(Math.max(Z+Z*B,0)*100)/100}),{...O,deltaOffset:L,deltaPercentage:B}}),(e.options.columnResizeMode==="onChange"||C==="end")&&e.setColumnSizing(O=>({...O,...f})))},p=C=>g("move",C),_=C=>{g("end",C),e.setColumnSizingInfo(T=>({...T,isResizingColumn:!1,startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,columnSizingStart:[]}))},b=_M(n),S={moveHandler:C=>p(C.clientX),upHandler:C=>{b?.removeEventListener("mousemove",S.moveHandler),b?.removeEventListener("mouseup",S.upHandler),_(C.clientX)}},w={moveHandler:C=>(C.cancelable&&(C.preventDefault(),C.stopPropagation()),p(C.touches[0].clientX),!1),upHandler:C=>{var T;b?.removeEventListener("touchmove",w.moveHandler),b?.removeEventListener("touchend",w.upHandler),C.cancelable&&(C.preventDefault(),C.stopPropagation()),_((T=C.touches[0])==null?void 0:T.clientX)}},x=SM()?{passive:!1}:!1;gg(o)?(b?.addEventListener("touchmove",w.moveHandler,x),b?.addEventListener("touchend",w.upHandler,x)):(b?.addEventListener("mousemove",S.moveHandler,x),b?.addEventListener("mouseup",S.upHandler,x)),e.setColumnSizingInfo(C=>({...C,startOffset:d,startSize:l,deltaOffset:0,deltaPercentage:0,columnSizingStart:u,isResizingColumn:i.id}))}}},createTable:t=>{t.setColumnSizing=e=>t.options.onColumnSizingChange==null?void 0:t.options.onColumnSizingChange(e),t.setColumnSizingInfo=e=>t.options.onColumnSizingInfoChange==null?void 0:t.options.onColumnSizingInfoChange(e),t.resetColumnSizing=e=>{var n;t.setColumnSizing(e?{}:(n=t.initialState.columnSizing)!=null?n:{})},t.resetHeaderSizeInfo=e=>{var n;t.setColumnSizingInfo(e?fg():(n=t.initialState.columnSizingInfo)!=null?n:fg())},t.getTotalSize=()=>{var e,n;return(e=(n=t.getHeaderGroups()[0])==null?void 0:n.headers.reduce((i,a)=>i+a.getSize(),0))!=null?e:0},t.getLeftTotalSize=()=>{var e,n;return(e=(n=t.getLeftHeaderGroups()[0])==null?void 0:n.headers.reduce((i,a)=>i+a.getSize(),0))!=null?e:0},t.getCenterTotalSize=()=>{var e,n;return(e=(n=t.getCenterHeaderGroups()[0])==null?void 0:n.headers.reduce((i,a)=>i+a.getSize(),0))!=null?e:0},t.getRightTotalSize=()=>{var e,n;return(e=(n=t.getRightHeaderGroups()[0])==null?void 0:n.headers.reduce((i,a)=>i+a.getSize(),0))!=null?e:0}}};let Nu=null;function SM(){if(typeof Nu=="boolean")return Nu;let t=!1;try{const e={get passive(){return t=!0,!1}},n=()=>{};window.addEventListener("test",n,e),window.removeEventListener("test",n)}catch{t=!1}return Nu=t,Nu}function gg(t){return t.type==="touchstart"}const wM={getInitialState:t=>({columnVisibility:{},...t}),getDefaultOptions:t=>({onColumnVisibilityChange:qn("columnVisibility",t)}),createColumn:(t,e)=>{t.toggleVisibility=n=>{t.getCanHide()&&e.setColumnVisibility(i=>({...i,[t.id]:n??!t.getIsVisible()}))},t.getIsVisible=()=>{var n,i;const a=t.columns;return(n=a.length?a.some(o=>o.getIsVisible()):(i=e.getState().columnVisibility)==null?void 0:i[t.id])!=null?n:!0},t.getCanHide=()=>{var n,i;return((n=t.columnDef.enableHiding)!=null?n:!0)&&((i=e.options.enableHiding)!=null?i:!0)},t.getToggleVisibilityHandler=()=>n=>{t.toggleVisibility==null||t.toggleVisibility(n.target.checked)}},createRow:(t,e)=>{t._getAllVisibleCells=Re(()=>[t.getAllCells(),e.getState().columnVisibility],n=>n.filter(i=>i.column.getIsVisible()),De(e.options,"debugRows")),t.getVisibleCells=Re(()=>[t.getLeftVisibleCells(),t.getCenterVisibleCells(),t.getRightVisibleCells()],(n,i,a)=>[...n,...i,...a],De(e.options,"debugRows"))},createTable:t=>{const e=(n,i)=>Re(()=>[i(),i().filter(a=>a.getIsVisible()).map(a=>a.id).join("_")],a=>a.filter(o=>o.getIsVisible==null?void 0:o.getIsVisible()),De(t.options,"debugColumns"));t.getVisibleFlatColumns=e("getVisibleFlatColumns",()=>t.getAllFlatColumns()),t.getVisibleLeafColumns=e("getVisibleLeafColumns",()=>t.getAllLeafColumns()),t.getLeftVisibleLeafColumns=e("getLeftVisibleLeafColumns",()=>t.getLeftLeafColumns()),t.getRightVisibleLeafColumns=e("getRightVisibleLeafColumns",()=>t.getRightLeafColumns()),t.getCenterVisibleLeafColumns=e("getCenterVisibleLeafColumns",()=>t.getCenterLeafColumns()),t.setColumnVisibility=n=>t.options.onColumnVisibilityChange==null?void 0:t.options.onColumnVisibilityChange(n),t.resetColumnVisibility=n=>{var i;t.setColumnVisibility(n?{}:(i=t.initialState.columnVisibility)!=null?i:{})},t.toggleAllColumnsVisible=n=>{var i;n=(i=n)!=null?i:!t.getIsAllColumnsVisible(),t.setColumnVisibility(t.getAllLeafColumns().reduce((a,o)=>({...a,[o.id]:n||!(o.getCanHide!=null&&o.getCanHide())}),{}))},t.getIsAllColumnsVisible=()=>!t.getAllLeafColumns().some(n=>!(n.getIsVisible!=null&&n.getIsVisible())),t.getIsSomeColumnsVisible=()=>t.getAllLeafColumns().some(n=>n.getIsVisible==null?void 0:n.getIsVisible()),t.getToggleAllColumnsVisibilityHandler=()=>n=>{var i;t.toggleAllColumnsVisible((i=n.target)==null?void 0:i.checked)}}};function Rl(t,e){return e?e==="center"?t.getCenterVisibleLeafColumns():e==="left"?t.getLeftVisibleLeafColumns():t.getRightVisibleLeafColumns():t.getVisibleLeafColumns()}const xM={createTable:t=>{t._getGlobalFacetedRowModel=t.options.getFacetedRowModel&&t.options.getFacetedRowModel(t,"__global__"),t.getGlobalFacetedRowModel=()=>t.options.manualFiltering||!t._getGlobalFacetedRowModel?t.getPreFilteredRowModel():t._getGlobalFacetedRowModel(),t._getGlobalFacetedUniqueValues=t.options.getFacetedUniqueValues&&t.options.getFacetedUniqueValues(t,"__global__"),t.getGlobalFacetedUniqueValues=()=>t._getGlobalFacetedUniqueValues?t._getGlobalFacetedUniqueValues():new Map,t._getGlobalFacetedMinMaxValues=t.options.getFacetedMinMaxValues&&t.options.getFacetedMinMaxValues(t,"__global__"),t.getGlobalFacetedMinMaxValues=()=>{if(t._getGlobalFacetedMinMaxValues)return t._getGlobalFacetedMinMaxValues()}}},CM={getInitialState:t=>({globalFilter:void 0,...t}),getDefaultOptions:t=>({onGlobalFilterChange:qn("globalFilter",t),globalFilterFn:"auto",getColumnCanGlobalFilter:e=>{var n;const i=(n=t.getCoreRowModel().flatRows[0])==null||(n=n._getAllCellsByColumnId()[e.id])==null?void 0:n.getValue();return typeof i=="string"||typeof i=="number"}}),createColumn:(t,e)=>{t.getCanGlobalFilter=()=>{var n,i,a,o;return((n=t.columnDef.enableGlobalFilter)!=null?n:!0)&&((i=e.options.enableGlobalFilter)!=null?i:!0)&&((a=e.options.enableFilters)!=null?a:!0)&&((o=e.options.getColumnCanGlobalFilter==null?void 0:e.options.getColumnCanGlobalFilter(t))!=null?o:!0)&&!!t.accessorFn}},createTable:t=>{t.getGlobalAutoFilterFn=()=>fs.includesString,t.getGlobalFilterFn=()=>{var e,n;const{globalFilterFn:i}=t.options;return Ad(i)?i:i==="auto"?t.getGlobalAutoFilterFn():(e=(n=t.options.filterFns)==null?void 0:n[i])!=null?e:fs[i]},t.setGlobalFilter=e=>{t.options.onGlobalFilterChange==null||t.options.onGlobalFilterChange(e)},t.resetGlobalFilter=e=>{t.setGlobalFilter(e?void 0:t.initialState.globalFilter)}}},EM={getInitialState:t=>({expanded:{},...t}),getDefaultOptions:t=>({onExpandedChange:qn("expanded",t),paginateExpandedRows:!0}),createTable:t=>{let e=!1,n=!1;t._autoResetExpanded=()=>{var i,a;if(!e){t._queue(()=>{e=!0});return}if((i=(a=t.options.autoResetAll)!=null?a:t.options.autoResetExpanded)!=null?i:!t.options.manualExpanding){if(n)return;n=!0,t._queue(()=>{t.resetExpanded(),n=!1})}},t.setExpanded=i=>t.options.onExpandedChange==null?void 0:t.options.onExpandedChange(i),t.toggleAllRowsExpanded=i=>{i??!t.getIsAllRowsExpanded()?t.setExpanded(!0):t.setExpanded({})},t.resetExpanded=i=>{var a,o;t.setExpanded(i?{}:(a=(o=t.initialState)==null?void 0:o.expanded)!=null?a:{})},t.getCanSomeRowsExpand=()=>t.getPrePaginationRowModel().flatRows.some(i=>i.getCanExpand()),t.getToggleAllRowsExpandedHandler=()=>i=>{i.persist==null||i.persist(),t.toggleAllRowsExpanded()},t.getIsSomeRowsExpanded=()=>{const i=t.getState().expanded;return i===!0||Object.values(i).some(Boolean)},t.getIsAllRowsExpanded=()=>{const i=t.getState().expanded;return typeof i=="boolean"?i===!0:!(!Object.keys(i).length||t.getRowModel().flatRows.some(a=>!a.getIsExpanded()))},t.getExpandedDepth=()=>{let i=0;return(t.getState().expanded===!0?Object.keys(t.getRowModel().rowsById):Object.keys(t.getState().expanded)).forEach(o=>{const l=o.split(".");i=Math.max(i,l.length)}),i},t.getPreExpandedRowModel=()=>t.getSortedRowModel(),t.getExpandedRowModel=()=>(!t._getExpandedRowModel&&t.options.getExpandedRowModel&&(t._getExpandedRowModel=t.options.getExpandedRowModel(t)),t.options.manualExpanding||!t._getExpandedRowModel?t.getPreExpandedRowModel():t._getExpandedRowModel())},createRow:(t,e)=>{t.toggleExpanded=n=>{e.setExpanded(i=>{var a;const o=i===!0?!0:!!(i!=null&&i[t.id]);let l={};if(i===!0?Object.keys(e.getRowModel().rowsById).forEach(u=>{l[u]=!0}):l=i,n=(a=n)!=null?a:!o,!o&&n)return{...l,[t.id]:!0};if(o&&!n){const{[t.id]:u,...d}=l;return d}return i})},t.getIsExpanded=()=>{var n;const i=e.getState().expanded;return!!((n=e.options.getIsRowExpanded==null?void 0:e.options.getIsRowExpanded(t))!=null?n:i===!0||i?.[t.id])},t.getCanExpand=()=>{var n,i,a;return(n=e.options.getRowCanExpand==null?void 0:e.options.getRowCanExpand(t))!=null?n:((i=e.options.enableExpanding)!=null?i:!0)&&!!((a=t.subRows)!=null&&a.length)},t.getIsAllParentsExpanded=()=>{let n=!0,i=t;for(;n&&i.parentId;)i=e.getRow(i.parentId,!0),n=i.getIsExpanded();return n},t.getToggleExpandedHandler=()=>{const n=t.getCanExpand();return()=>{n&&t.toggleExpanded()}}}},Yg=0,Wg=10,mg=()=>({pageIndex:Yg,pageSize:Wg}),TM={getInitialState:t=>({...t,pagination:{...mg(),...t?.pagination}}),getDefaultOptions:t=>({onPaginationChange:qn("pagination",t)}),createTable:t=>{let e=!1,n=!1;t._autoResetPageIndex=()=>{var i,a;if(!e){t._queue(()=>{e=!0});return}if((i=(a=t.options.autoResetAll)!=null?a:t.options.autoResetPageIndex)!=null?i:!t.options.manualPagination){if(n)return;n=!0,t._queue(()=>{t.resetPageIndex(),n=!1})}},t.setPagination=i=>{const a=o=>ea(i,o);return t.options.onPaginationChange==null?void 0:t.options.onPaginationChange(a)},t.resetPagination=i=>{var a;t.setPagination(i?mg():(a=t.initialState.pagination)!=null?a:mg())},t.setPageIndex=i=>{t.setPagination(a=>{let o=ea(i,a.pageIndex);const l=typeof t.options.pageCount>"u"||t.options.pageCount===-1?Number.MAX_SAFE_INTEGER:t.options.pageCount-1;return o=Math.max(0,Math.min(o,l)),{...a,pageIndex:o}})},t.resetPageIndex=i=>{var a,o;t.setPageIndex(i?Yg:(a=(o=t.initialState)==null||(o=o.pagination)==null?void 0:o.pageIndex)!=null?a:Yg)},t.resetPageSize=i=>{var a,o;t.setPageSize(i?Wg:(a=(o=t.initialState)==null||(o=o.pagination)==null?void 0:o.pageSize)!=null?a:Wg)},t.setPageSize=i=>{t.setPagination(a=>{const o=Math.max(1,ea(i,a.pageSize)),l=a.pageSize*a.pageIndex,u=Math.floor(l/o);return{...a,pageIndex:u,pageSize:o}})},t.setPageCount=i=>t.setPagination(a=>{var o;let l=ea(i,(o=t.options.pageCount)!=null?o:-1);return typeof l=="number"&&(l=Math.max(-1,l)),{...a,pageCount:l}}),t.getPageOptions=Re(()=>[t.getPageCount()],i=>{let a=[];return i&&i>0&&(a=[...new Array(i)].fill(null).map((o,l)=>l)),a},De(t.options,"debugTable")),t.getCanPreviousPage=()=>t.getState().pagination.pageIndex>0,t.getCanNextPage=()=>{const{pageIndex:i}=t.getState().pagination,a=t.getPageCount();return a===-1?!0:a===0?!1:i<a-1},t.previousPage=()=>t.setPageIndex(i=>i-1),t.nextPage=()=>t.setPageIndex(i=>i+1),t.firstPage=()=>t.setPageIndex(0),t.lastPage=()=>t.setPageIndex(t.getPageCount()-1),t.getPrePaginationRowModel=()=>t.getExpandedRowModel(),t.getPaginationRowModel=()=>(!t._getPaginationRowModel&&t.options.getPaginationRowModel&&(t._getPaginationRowModel=t.options.getPaginationRowModel(t)),t.options.manualPagination||!t._getPaginationRowModel?t.getPrePaginationRowModel():t._getPaginationRowModel()),t.getPageCount=()=>{var i;return(i=t.options.pageCount)!=null?i:Math.ceil(t.getRowCount()/t.getState().pagination.pageSize)},t.getRowCount=()=>{var i;return(i=t.options.rowCount)!=null?i:t.getPrePaginationRowModel().rows.length}}},pg=()=>({top:[],bottom:[]}),OM={getInitialState:t=>({rowPinning:pg(),...t}),getDefaultOptions:t=>({onRowPinningChange:qn("rowPinning",t)}),createRow:(t,e)=>{t.pin=(n,i,a)=>{const o=i?t.getLeafRows().map(d=>{let{id:f}=d;return f}):[],l=a?t.getParentRows().map(d=>{let{id:f}=d;return f}):[],u=new Set([...l,t.id,...o]);e.setRowPinning(d=>{var f,g;if(n==="bottom"){var p,_;return{top:((p=d?.top)!=null?p:[]).filter(w=>!(u!=null&&u.has(w))),bottom:[...((_=d?.bottom)!=null?_:[]).filter(w=>!(u!=null&&u.has(w))),...Array.from(u)]}}if(n==="top"){var b,S;return{top:[...((b=d?.top)!=null?b:[]).filter(w=>!(u!=null&&u.has(w))),...Array.from(u)],bottom:((S=d?.bottom)!=null?S:[]).filter(w=>!(u!=null&&u.has(w)))}}return{top:((f=d?.top)!=null?f:[]).filter(w=>!(u!=null&&u.has(w))),bottom:((g=d?.bottom)!=null?g:[]).filter(w=>!(u!=null&&u.has(w)))}})},t.getCanPin=()=>{var n;const{enableRowPinning:i,enablePinning:a}=e.options;return typeof i=="function"?i(t):(n=i??a)!=null?n:!0},t.getIsPinned=()=>{const n=[t.id],{top:i,bottom:a}=e.getState().rowPinning,o=n.some(u=>i?.includes(u)),l=n.some(u=>a?.includes(u));return o?"top":l?"bottom":!1},t.getPinnedIndex=()=>{var n,i;const a=t.getIsPinned();if(!a)return-1;const o=(n=a==="top"?e.getTopRows():e.getBottomRows())==null?void 0:n.map(l=>{let{id:u}=l;return u});return(i=o?.indexOf(t.id))!=null?i:-1}},createTable:t=>{t.setRowPinning=e=>t.options.onRowPinningChange==null?void 0:t.options.onRowPinningChange(e),t.resetRowPinning=e=>{var n,i;return t.setRowPinning(e?pg():(n=(i=t.initialState)==null?void 0:i.rowPinning)!=null?n:pg())},t.getIsSomeRowsPinned=e=>{var n;const i=t.getState().rowPinning;if(!e){var a,o;return!!((a=i.top)!=null&&a.length||(o=i.bottom)!=null&&o.length)}return!!((n=i[e])!=null&&n.length)},t._getPinnedRows=(e,n,i)=>{var a;return((a=t.options.keepPinnedRows)==null||a?(n??[]).map(l=>{const u=t.getRow(l,!0);return u.getIsAllParentsExpanded()?u:null}):(n??[]).map(l=>e.find(u=>u.id===l))).filter(Boolean).map(l=>({...l,position:i}))},t.getTopRows=Re(()=>[t.getRowModel().rows,t.getState().rowPinning.top],(e,n)=>t._getPinnedRows(e,n,"top"),De(t.options,"debugRows")),t.getBottomRows=Re(()=>[t.getRowModel().rows,t.getState().rowPinning.bottom],(e,n)=>t._getPinnedRows(e,n,"bottom"),De(t.options,"debugRows")),t.getCenterRows=Re(()=>[t.getRowModel().rows,t.getState().rowPinning.top,t.getState().rowPinning.bottom],(e,n,i)=>{const a=new Set([...n??[],...i??[]]);return e.filter(o=>!a.has(o.id))},De(t.options,"debugRows"))}},AM={getInitialState:t=>({rowSelection:{},...t}),getDefaultOptions:t=>({onRowSelectionChange:qn("rowSelection",t),enableRowSelection:!0,enableMultiRowSelection:!0,enableSubRowSelection:!0}),createTable:t=>{t.setRowSelection=e=>t.options.onRowSelectionChange==null?void 0:t.options.onRowSelectionChange(e),t.resetRowSelection=e=>{var n;return t.setRowSelection(e?{}:(n=t.initialState.rowSelection)!=null?n:{})},t.toggleAllRowsSelected=e=>{t.setRowSelection(n=>{e=typeof e<"u"?e:!t.getIsAllRowsSelected();const i={...n},a=t.getPreGroupedRowModel().flatRows;return e?a.forEach(o=>{o.getCanSelect()&&(i[o.id]=!0)}):a.forEach(o=>{delete i[o.id]}),i})},t.toggleAllPageRowsSelected=e=>t.setRowSelection(n=>{const i=typeof e<"u"?e:!t.getIsAllPageRowsSelected(),a={...n};return t.getRowModel().rows.forEach(o=>{Kg(a,o.id,i,!0,t)}),a}),t.getPreSelectedRowModel=()=>t.getCoreRowModel(),t.getSelectedRowModel=Re(()=>[t.getState().rowSelection,t.getCoreRowModel()],(e,n)=>Object.keys(e).length?vg(t,n):{rows:[],flatRows:[],rowsById:{}},De(t.options,"debugTable")),t.getFilteredSelectedRowModel=Re(()=>[t.getState().rowSelection,t.getFilteredRowModel()],(e,n)=>Object.keys(e).length?vg(t,n):{rows:[],flatRows:[],rowsById:{}},De(t.options,"debugTable")),t.getGroupedSelectedRowModel=Re(()=>[t.getState().rowSelection,t.getSortedRowModel()],(e,n)=>Object.keys(e).length?vg(t,n):{rows:[],flatRows:[],rowsById:{}},De(t.options,"debugTable")),t.getIsAllRowsSelected=()=>{const e=t.getFilteredRowModel().flatRows,{rowSelection:n}=t.getState();let i=!!(e.length&&Object.keys(n).length);return i&&e.some(a=>a.getCanSelect()&&!n[a.id])&&(i=!1),i},t.getIsAllPageRowsSelected=()=>{const e=t.getPaginationRowModel().flatRows.filter(a=>a.getCanSelect()),{rowSelection:n}=t.getState();let i=!!e.length;return i&&e.some(a=>!n[a.id])&&(i=!1),i},t.getIsSomeRowsSelected=()=>{var e;const n=Object.keys((e=t.getState().rowSelection)!=null?e:{}).length;return n>0&&n<t.getFilteredRowModel().flatRows.length},t.getIsSomePageRowsSelected=()=>{const e=t.getPaginationRowModel().flatRows;return t.getIsAllPageRowsSelected()?!1:e.filter(n=>n.getCanSelect()).some(n=>n.getIsSelected()||n.getIsSomeSelected())},t.getToggleAllRowsSelectedHandler=()=>e=>{t.toggleAllRowsSelected(e.target.checked)},t.getToggleAllPageRowsSelectedHandler=()=>e=>{t.toggleAllPageRowsSelected(e.target.checked)}},createRow:(t,e)=>{t.toggleSelected=(n,i)=>{const a=t.getIsSelected();e.setRowSelection(o=>{var l;if(n=typeof n<"u"?n:!a,t.getCanSelect()&&a===n)return o;const u={...o};return Kg(u,t.id,n,(l=i?.selectChildren)!=null?l:!0,e),u})},t.getIsSelected=()=>{const{rowSelection:n}=e.getState();return Om(t,n)},t.getIsSomeSelected=()=>{const{rowSelection:n}=e.getState();return Xg(t,n)==="some"},t.getIsAllSubRowsSelected=()=>{const{rowSelection:n}=e.getState();return Xg(t,n)==="all"},t.getCanSelect=()=>{var n;return typeof e.options.enableRowSelection=="function"?e.options.enableRowSelection(t):(n=e.options.enableRowSelection)!=null?n:!0},t.getCanSelectSubRows=()=>{var n;return typeof e.options.enableSubRowSelection=="function"?e.options.enableSubRowSelection(t):(n=e.options.enableSubRowSelection)!=null?n:!0},t.getCanMultiSelect=()=>{var n;return typeof e.options.enableMultiRowSelection=="function"?e.options.enableMultiRowSelection(t):(n=e.options.enableMultiRowSelection)!=null?n:!0},t.getToggleSelectedHandler=()=>{const n=t.getCanSelect();return i=>{var a;n&&t.toggleSelected((a=i.target)==null?void 0:a.checked)}}}},Kg=(t,e,n,i,a)=>{var o;const l=a.getRow(e,!0);n?(l.getCanMultiSelect()||Object.keys(t).forEach(u=>delete t[u]),l.getCanSelect()&&(t[e]=!0)):delete t[e],i&&(o=l.subRows)!=null&&o.length&&l.getCanSelectSubRows()&&l.subRows.forEach(u=>Kg(t,u.id,n,i,a))};function vg(t,e){const n=t.getState().rowSelection,i=[],a={},o=function(l,u){return l.map(d=>{var f;const g=Om(d,n);if(g&&(i.push(d),a[d.id]=d),(f=d.subRows)!=null&&f.length&&(d={...d,subRows:o(d.subRows)}),g)return d}).filter(Boolean)};return{rows:o(e.rows),flatRows:i,rowsById:a}}function Om(t,e){var n;return(n=e[t.id])!=null?n:!1}function Xg(t,e,n){var i;if(!((i=t.subRows)!=null&&i.length))return!1;let a=!0,o=!1;return t.subRows.forEach(l=>{if(!(o&&!a)&&(l.getCanSelect()&&(Om(l,e)?o=!0:a=!1),l.subRows&&l.subRows.length)){const u=Xg(l,e);u==="all"?o=!0:(u==="some"&&(o=!0),a=!1)}}),a?"all":o?"some":!1}const Qg=/([0-9]+)/gm,RM=(t,e,n)=>Iw(ia(t.getValue(n)).toLowerCase(),ia(e.getValue(n)).toLowerCase()),DM=(t,e,n)=>Iw(ia(t.getValue(n)),ia(e.getValue(n))),MM=(t,e,n)=>Am(ia(t.getValue(n)).toLowerCase(),ia(e.getValue(n)).toLowerCase()),kM=(t,e,n)=>Am(ia(t.getValue(n)),ia(e.getValue(n))),NM=(t,e,n)=>{const i=t.getValue(n),a=e.getValue(n);return i>a?1:i<a?-1:0},jM=(t,e,n)=>Am(t.getValue(n),e.getValue(n));function Am(t,e){return t===e?0:t>e?1:-1}function ia(t){return typeof t=="number"?isNaN(t)||t===1/0||t===-1/0?"":String(t):typeof t=="string"?t:""}function Iw(t,e){const n=t.split(Qg).filter(Boolean),i=e.split(Qg).filter(Boolean);for(;n.length&&i.length;){const a=n.shift(),o=i.shift(),l=parseInt(a,10),u=parseInt(o,10),d=[l,u].sort();if(isNaN(d[0])){if(a>o)return 1;if(o>a)return-1;continue}if(isNaN(d[1]))return isNaN(l)?-1:1;if(l>u)return 1;if(u>l)return-1}return n.length-i.length}const hl={alphanumeric:RM,alphanumericCaseSensitive:DM,text:MM,textCaseSensitive:kM,datetime:NM,basic:jM},LM={getInitialState:t=>({sorting:[],...t}),getDefaultColumnDef:()=>({sortingFn:"auto",sortUndefined:1}),getDefaultOptions:t=>({onSortingChange:qn("sorting",t),isMultiSortEvent:e=>e.shiftKey}),createColumn:(t,e)=>{t.getAutoSortingFn=()=>{const n=e.getFilteredRowModel().flatRows.slice(10);let i=!1;for(const a of n){const o=a?.getValue(t.id);if(Object.prototype.toString.call(o)==="[object Date]")return hl.datetime;if(typeof o=="string"&&(i=!0,o.split(Qg).length>1))return hl.alphanumeric}return i?hl.text:hl.basic},t.getAutoSortDir=()=>{const n=e.getFilteredRowModel().flatRows[0];return typeof n?.getValue(t.id)=="string"?"asc":"desc"},t.getSortingFn=()=>{var n,i;if(!t)throw new Error;return Ad(t.columnDef.sortingFn)?t.columnDef.sortingFn:t.columnDef.sortingFn==="auto"?t.getAutoSortingFn():(n=(i=e.options.sortingFns)==null?void 0:i[t.columnDef.sortingFn])!=null?n:hl[t.columnDef.sortingFn]},t.toggleSorting=(n,i)=>{const a=t.getNextSortingOrder(),o=typeof n<"u"&&n!==null;e.setSorting(l=>{const u=l?.find(b=>b.id===t.id),d=l?.findIndex(b=>b.id===t.id);let f=[],g,p=o?n:a==="desc";if(l!=null&&l.length&&t.getCanMultiSort()&&i?u?g="toggle":g="add":l!=null&&l.length&&d!==l.length-1?g="replace":u?g="toggle":g="replace",g==="toggle"&&(o||a||(g="remove")),g==="add"){var _;f=[...l,{id:t.id,desc:p}],f.splice(0,f.length-((_=e.options.maxMultiSortColCount)!=null?_:Number.MAX_SAFE_INTEGER))}else g==="toggle"?f=l.map(b=>b.id===t.id?{...b,desc:p}:b):g==="remove"?f=l.filter(b=>b.id!==t.id):f=[{id:t.id,desc:p}];return f})},t.getFirstSortDir=()=>{var n,i;return((n=(i=t.columnDef.sortDescFirst)!=null?i:e.options.sortDescFirst)!=null?n:t.getAutoSortDir()==="desc")?"desc":"asc"},t.getNextSortingOrder=n=>{var i,a;const o=t.getFirstSortDir(),l=t.getIsSorted();return l?l!==o&&((i=e.options.enableSortingRemoval)==null||i)&&(!(n&&(a=e.options.enableMultiRemove)!=null)||a)?!1:l==="desc"?"asc":"desc":o},t.getCanSort=()=>{var n,i;return((n=t.columnDef.enableSorting)!=null?n:!0)&&((i=e.options.enableSorting)!=null?i:!0)&&!!t.accessorFn},t.getCanMultiSort=()=>{var n,i;return(n=(i=t.columnDef.enableMultiSort)!=null?i:e.options.enableMultiSort)!=null?n:!!t.accessorFn},t.getIsSorted=()=>{var n;const i=(n=e.getState().sorting)==null?void 0:n.find(a=>a.id===t.id);return i?i.desc?"desc":"asc":!1},t.getSortIndex=()=>{var n,i;return(n=(i=e.getState().sorting)==null?void 0:i.findIndex(a=>a.id===t.id))!=null?n:-1},t.clearSorting=()=>{e.setSorting(n=>n!=null&&n.length?n.filter(i=>i.id!==t.id):[])},t.getToggleSortingHandler=()=>{const n=t.getCanSort();return i=>{n&&(i.persist==null||i.persist(),t.toggleSorting==null||t.toggleSorting(void 0,t.getCanMultiSort()?e.options.isMultiSortEvent==null?void 0:e.options.isMultiSortEvent(i):!1))}}},createTable:t=>{t.setSorting=e=>t.options.onSortingChange==null?void 0:t.options.onSortingChange(e),t.resetSorting=e=>{var n,i;t.setSorting(e?[]:(n=(i=t.initialState)==null?void 0:i.sorting)!=null?n:[])},t.getPreSortedRowModel=()=>t.getGroupedRowModel(),t.getSortedRowModel=()=>(!t._getSortedRowModel&&t.options.getSortedRowModel&&(t._getSortedRowModel=t.options.getSortedRowModel(t)),t.options.manualSorting||!t._getSortedRowModel?t.getPreSortedRowModel():t._getSortedRowModel())}},PM=[nM,wM,vM,yM,sM,aM,xM,CM,LM,mM,EM,TM,OM,AM,bM];function IM(t){var e,n;const i=[...PM,...(e=t._features)!=null?e:[]];let a={_features:i};const o=a._features.reduce((_,b)=>Object.assign(_,b.getDefaultOptions==null?void 0:b.getDefaultOptions(a)),{}),l=_=>a.options.mergeOptions?a.options.mergeOptions(o,_):{...o,..._};let d={...{},...(n=t.initialState)!=null?n:{}};a._features.forEach(_=>{var b;d=(b=_.getInitialState==null?void 0:_.getInitialState(d))!=null?b:d});const f=[];let g=!1;const p={_features:i,options:{...o,...t},initialState:d,_queue:_=>{f.push(_),g||(g=!0,Promise.resolve().then(()=>{for(;f.length;)f.shift()();g=!1}).catch(b=>setTimeout(()=>{throw b})))},reset:()=>{a.setState(a.initialState)},setOptions:_=>{const b=ea(_,a.options);a.options=l(b)},getState:()=>a.options.state,setState:_=>{a.options.onStateChange==null||a.options.onStateChange(_)},_getRowId:(_,b,S)=>{var w;return(w=a.options.getRowId==null?void 0:a.options.getRowId(_,b,S))!=null?w:`${S?[S.id,b].join("."):b}`},getCoreRowModel:()=>(a._getCoreRowModel||(a._getCoreRowModel=a.options.getCoreRowModel(a)),a._getCoreRowModel()),getRowModel:()=>a.getPaginationRowModel(),getRow:(_,b)=>{let S=(b?a.getPrePaginationRowModel():a.getRowModel()).rowsById[_];if(!S&&(S=a.getCoreRowModel().rowsById[_],!S))throw new Error;return S},_getDefaultColumnDef:Re(()=>[a.options.defaultColumn],_=>{var b;return _=(b=_)!=null?b:{},{header:S=>{const w=S.header.column.columnDef;return w.accessorKey?w.accessorKey:w.accessorFn?w.id:null},cell:S=>{var w,x;return(w=(x=S.renderValue())==null||x.toString==null?void 0:x.toString())!=null?w:null},...a._features.reduce((S,w)=>Object.assign(S,w.getDefaultColumnDef==null?void 0:w.getDefaultColumnDef()),{}),..._}},De(t,"debugColumns")),_getColumnDefs:()=>a.options.columns,getAllColumns:Re(()=>[a._getColumnDefs()],_=>{const b=function(S,w,x){return x===void 0&&(x=0),S.map(C=>{const T=tM(a,C,x,w),O=C;return T.columns=O.columns?b(O.columns,T,x+1):[],T})};return b(_)},De(t,"debugColumns")),getAllFlatColumns:Re(()=>[a.getAllColumns()],_=>_.flatMap(b=>b.getFlatColumns()),De(t,"debugColumns")),_getAllFlatColumnsById:Re(()=>[a.getAllFlatColumns()],_=>_.reduce((b,S)=>(b[S.id]=S,b),{}),De(t,"debugColumns")),getAllLeafColumns:Re(()=>[a.getAllColumns(),a._getOrderColumnsFn()],(_,b)=>{let S=_.flatMap(w=>w.getLeafColumns());return b(S)},De(t,"debugColumns")),getColumn:_=>a._getAllFlatColumnsById()[_]};Object.assign(a,p);for(let _=0;_<a._features.length;_++){const b=a._features[_];b==null||b.createTable==null||b.createTable(a)}return a}function zM(){return t=>Re(()=>[t.options.data],e=>{const n={rows:[],flatRows:[],rowsById:{}},i=function(a,o,l){o===void 0&&(o=0);const u=[];for(let f=0;f<a.length;f++){const g=iM(t,t._getRowId(a[f],f,l),a[f],f,o,void 0,l?.id);if(n.flatRows.push(g),n.rowsById[g.id]=g,u.push(g),t.options.getSubRows){var d;g.originalSubRows=t.options.getSubRows(a[f],f),(d=g.originalSubRows)!=null&&d.length&&(g.subRows=i(g.originalSubRows,o+1,g))}}return u};return n.rows=i(e),n},De(t.options,"debugTable","getRowModel",()=>t._autoResetPageIndex()))}function FM(){return t=>Re(()=>[t.getState().sorting,t.getPreSortedRowModel()],(e,n)=>{if(!n.rows.length||!(e!=null&&e.length))return n;const i=t.getState().sorting,a=[],o=i.filter(d=>{var f;return(f=t.getColumn(d.id))==null?void 0:f.getCanSort()}),l={};o.forEach(d=>{const f=t.getColumn(d.id);f&&(l[d.id]={sortUndefined:f.columnDef.sortUndefined,invertSorting:f.columnDef.invertSorting,sortingFn:f.getSortingFn()})});const u=d=>{const f=d.map(g=>({...g}));return f.sort((g,p)=>{for(let b=0;b<o.length;b+=1){var _;const S=o[b],w=l[S.id],x=w.sortUndefined,C=(_=S?.desc)!=null?_:!1;let T=0;if(x){const O=g.getValue(S.id),M=p.getValue(S.id),D=O===void 0,U=M===void 0;if(D||U){if(x==="first")return D?-1:1;if(x==="last")return D?1:-1;T=D&&U?0:D?x:-x}}if(T===0&&(T=w.sortingFn(g,p,S.id)),T!==0)return C&&(T*=-1),w.invertSorting&&(T*=-1),T}return g.index-p.index}),f.forEach(g=>{var p;a.push(g),(p=g.subRows)!=null&&p.length&&(g.subRows=u(g.subRows))}),f};return{rows:u(n.rows),flatRows:a,rowsById:n.rowsById}},De(t.options,"debugTable","getSortedRowModel",()=>t._autoResetPageIndex()))}/**
   * react-table
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function Qb(t,e){return t?UM(t)?A.createElement(t,e):t:null}function UM(t){return HM(t)||typeof t=="function"||BM(t)}function HM(t){return typeof t=="function"&&(()=>{const e=Object.getPrototypeOf(t);return e.prototype&&e.prototype.isReactComponent})()}function BM(t){return typeof t=="object"&&typeof t.$$typeof=="symbol"&&["react.memo","react.forward_ref"].includes(t.$$typeof.description)}function $M(t){const e={state:{},onStateChange:()=>{},renderFallbackValue:null,...t},[n]=A.useState(()=>({current:IM(e)})),[i,a]=A.useState(()=>n.current.initialState);return n.current.setOptions(o=>({...o,...t,state:{...i,...t.state},onStateChange:l=>{a(l),t.onStateChange==null||t.onStateChange(l)}})),n.current}function Rm({data:t,columns:e,onSaveRow:n,onDeleteRow:i}){const[a,o]=A.useState(null),[l,u]=A.useState({}),d=A.useMemo(()=>{const p=b=>{const S={};Object.keys(l).forEach(T=>{l[T]!==void 0&&l[T]!==""&&(S[T]=l[T])});const w={...b.original};["machines","progress","n_boxes","time_remaining"].forEach(T=>{delete w[T]});const C={...w,...S};n(C),o(null),u({})},_={id:"actions",header:"Azioni",cell:({row:b})=>{const S=b.id===a;return y.jsx("div",{className:"action-buttons",children:S?y.jsxs(y.Fragment,{children:[y.jsx("button",{onClick:()=>p(b),className:"nav-btn today",children:"Salva"}),y.jsx("button",{onClick:()=>o(null),className:"nav-btn today",children:"Annulla"})]}):y.jsxs(y.Fragment,{children:[y.jsx("button",{onClick:()=>o(b.id),className:"nav-btn today",children:"Modifica"}),y.jsx("button",{onClick:()=>i(b.original),className:"nav-btn today",children:"Elimina"})]})})}};return[...e,_]},[e,a,l,n,i]),f=A.useMemo(()=>{if(t&&t.length>0){const p=t.map(w=>w.id);p.filter((w,x)=>p.indexOf(w)!==x).length>0;const b=new Set,S=[];t.forEach((w,x)=>{b.has(w.id)?S.push({id:w.id,index:x,item:w}):b.add(w.id)})}return t},[t]),g=$M({data:f,columns:d,getCoreRowModel:zM(),getSortedRowModel:FM(),meta:{editingRowId:a,setEditedData:u}});return y.jsx("div",{className:"table-container",children:y.jsxs("table",{className:"modern-table",children:[y.jsx("thead",{children:g.getHeaderGroups().map(p=>y.jsx("tr",{children:p.headers.map((_,b)=>{const S=`${p.id}_${_.id}_${b}`;return y.jsxs("th",{onClick:_.column.getToggleSortingHandler(),children:[Qb(_.column.columnDef.header,_.getContext()),{asc:" 🔼",desc:" 🔽"}[_.column.getIsSorted()]??null]},S)})},p.id))}),y.jsx("tbody",{children:g.getRowModel().rows.map(p=>{const _=p.original.id||p.id;return y.jsx("tr",{children:p.getVisibleCells().map((b,S)=>{const w=`${_}_${b.column.id}_${S}`;return y.jsx("td",{children:Qb(b.column.columnDef.cell,b.getContext())},w)})},_)})})]})})}function We({row:t,column:e,table:n,value:i,isEditing:a,onChange:o,type:l="auto",options:u=[],parseValue:d=null,min:f=null,max:g=null,step:p=null}){const _=a??n?.options?.meta?.editingRowId===t?.id,b=i??t?.original?.[e?.id],S=l==="auto"?x(e?.id):l,w=O=>{const M=O.target.value;let D=M;d?D=d(M):S==="number"?D=parseFloat(M)||0:S==="integer"&&(D=parseInt(M)||0),n?.options?.meta?.setEditedData?n.options.meta.setEditedData(U=>({...U,[e?.id]:D})):o&&o(O)};function x(O){if(!O)return"text";if(O==="status")return"select";if(["quantity","quantity_completed","quantity_per_box","numero_persone","bag_height","bag_width","bag_step","min_web_width","max_web_width","min_bag_height","max_bag_height"].includes(O))return"integer";const D=["setup_time_standard","changeover_color","changeover_material","t_setup_stampa","t_setup_conf"],U=["costo_h_stampa","costo_h_conf"],L=["standard_speed","v_stampa","v_conf"];return D.includes(O)||U.includes(O)||L.includes(O)?"number":"text"}function C(O){return O==="status"?[{value:ii.ACTIVE,label:ii.ACTIVE},{value:ii.INACTIVE,label:ii.INACTIVE},{value:ii.MAINTENANCE,label:ii.MAINTENANCE}]:O==="department"?[{value:Nt.PRINTING,label:Nt.PRINTING},{value:Nt.PACKAGING,label:Nt.PACKAGING}]:O==="work_center"?[{value:Me.ZANICA,label:Me.ZANICA},{value:Me.BUSTO_GAROLFO,label:Me.BUSTO_GAROLFO}]:O==="product_type"?[{value:Gr.CREMA,label:"Crema"},{value:Gr.LIQUIDO,label:"Liquido"},{value:Gr.POLVERI,label:"Polveri"}]:O==="seal_sides"?[{value:Bl.THREE,label:"3 sides"},{value:Bl.FOUR,label:"4 sides"}]:u}if(_)switch(S){case"select":{const O=C(e?.id);return y.jsx("select",{defaultValue:b,onChange:w,style:{width:"100%",padding:"4px",border:"1px solid #ccc",borderRadius:"4px"},children:O.map(M=>y.jsx("option",{value:M.value,children:M.label},M.value))})}case"number":{const O=ll.DECIMAL_PRECISION.TWO_DECIMAL.includes(e?.id)?ll.FIELD_STEPS.COST:(ll.DECIMAL_PRECISION.ONE_DECIMAL.includes(e?.id),ll.FIELD_STEPS.TIME);return y.jsx("input",{type:"number",defaultValue:b,onChange:w,min:f,max:g,step:p||O,style:{width:"100%",padding:"4px",border:"1px solid #ccc",borderRadius:"4px"}})}case"integer":return y.jsx("input",{type:"number",defaultValue:b,onChange:w,min:f||0,max:g,step:1,style:{width:"100%",padding:"4px",border:"1px solid #ccc",borderRadius:"4px"}});default:return y.jsx("input",{type:"text",defaultValue:b,onChange:w,style:{width:"100%",padding:"4px",border:"1px solid #ccc",borderRadius:"4px"}})}const T=b??"";return S==="number"||S==="integer"?y.jsx("span",{children:T}):y.jsx("span",{children:T})}function Ss({title:t,children:e}){return y.jsx("div",{className:"sticky-header",children:y.jsxs("div",{className:"sticky-header-content",children:[y.jsx("div",{className:"sticky-header-text",children:y.jsx("h2",{className:"sticky-header-title",children:t})}),e]})})}const zw=()=>{const t=A.useCallback(f=>{if(!f||!f.department)return{isValid:!1,error:"Invalid phase data"};const{department:g}=f;if(g==="STAMPA"){const p=parseFloat(f.v_stampa);if(isNaN(p)||p<=0)return{isValid:!1,error:"Velocità di stampa non valida. Inserisci un valore maggiore di zero."}}else if(g==="CONFEZIONAMENTO"){const p=parseFloat(f.v_conf);if(isNaN(p)||p<=0)return{isValid:!1,error:"Velocità di confezionamento non valida. Inserisci un valore maggiore di zero."}}else return{isValid:!1,error:"Reparto non riconosciuto"};return{isValid:!0}},[]),e=A.useCallback((f,g,p)=>{if(!f||!g||!p||!t(f).isValid)return null;try{const{department:b}=f;if(b==="STAMPA"){const S=parseFloat(f.v_stampa),w=parseFloat(f.t_setup_stampa)||0,x=parseFloat(f.costo_h_stampa)||0;if(isNaN(S)||S<=0)return null;const C=g/S,T=w,O=C+T,M=O*x;return{totals:{duration:O,cost:M},breakdown:{print:{time:C,cost:C*x},setup:{time:T,cost:T*x}}}}else if(b==="CONFEZIONAMENTO"){const S=parseFloat(f.v_conf),w=parseFloat(f.t_setup_conf)||0,x=parseFloat(f.costo_h_conf)||0;if(isNaN(S)||S<=0)return null;const C=g/S,T=w,O=C+T,M=O*x;return{totals:{duration:O,cost:M},breakdown:{package:{time:C,cost:C*x},setup:{time:T,cost:T*x}}}}return null}catch{return null}},[t]),n=A.useCallback(f=>f&&(f.startsWith("P05")||f.startsWith("ISP05"))?"BUSTO_GAROLFO":"ZANICA",[]),i=A.useCallback(f=>f&&f.startsWith("P0")?"CONFEZIONAMENTO":"STAMPA",[]),a=A.useCallback(f=>({STAMPA:["DIGITAL_PRINT","FLEXO_PRINT","ROTOGRAVURE"],CONFEZIONAMENTO:["DOYPACK","PLURI_PIU","MONO_PIU","CONFEZIONAMENTO_TRADIZIONALE","CONFEZIONAMENTO_POLVERI"]})[f]||[],[]),o=A.useCallback((f,g)=>{const _={DIGITAL_PRINT:"DIGI",FLEXO_PRINT:"FLEX",ROTOGRAVURE:"ROTO",DOYPACK:"DOYP",PLURI_PIU:"PLUR",MONO_PIU:"MONO",CONFEZIONAMENTO_TRADIZIONALE:"CONFTRAD",CONFEZIONAMENTO_POLVERI:"CONFPOL"}[f]||"MACH",b=g==="BUSTO_GAROLFO"?"BGF":"ZAN",S=Date.now().toString(36);return`${_}_${b}_${S}`},[]),l=A.useCallback((f,g)=>!(g<0||g>f),[]),u=A.useCallback((f,g)=>!f||f===0?0:Math.round(g*100/f),[]),d=A.useCallback((f,g)=>!f||f===0?0:!g||g===0?f:Math.round(f*(1-g/100)*100)/100,[]);return{calculateProductionMetrics:e,validatePhaseParameters:t,autoDetermineWorkCenter:n,autoDetermineDepartment:i,getValidMachineTypes:a,generateMachineId:o,validateQuantityCompleted:l,calculateCompletionRate:u,calculateTimeRemaining:d}},ad={PHASE:{STAMPA:{v_stampa:{min:0,message:"Printing speed must be greater than 0"},t_setup_stampa:{min:0,message:"Setup time cannot be negative"},costo_h_stampa:{min:0,message:"Hourly cost cannot be negative"}},CONFEZIONAMENTO:{v_conf:{min:0,message:"Packaging speed must be greater than 0"},t_setup_conf:{min:0,message:"Setup time cannot be negative"},costo_h_conf:{min:0,message:"Hourly cost cannot be negative"}}},MACHINE:{min_web_width:{min:0,message:"Minimum web width cannot be negative"},max_web_width:{min:0,message:"Maximum web width cannot be negative"},min_bag_height:{min:0,message:"Minimum bag height cannot be negative"},max_bag_height:{min:0,message:"Maximum bag height cannot be negative"},standard_speed:{min:0,message:"Standard speed cannot be negative"},setup_time_standard:{min:0,message:"Setup time cannot be negative"},changeover_color:{min:0,message:"Color changeover time cannot be negative"},changeover_material:{min:0,message:"Material changeover time cannot be negative"}},ORDER:{bag_height:{min:0,message:"Bag height must be greater than 0"},bag_width:{min:0,message:"Bag width must be greater than 0"},bag_step:{min:0,message:"Bag step must be greater than 0"},quantity:{min:0,message:"Quantity must be greater than 0"},quantity_per_box:{min:0,message:"Quantity per box cannot be negative"},quantity_completed:{min:0,message:"Quantity completed cannot be negative"}}},Fw=(t,e)=>{const n={};return e.forEach(i=>{if(!Mm(t[i])){const a=i.replace(/_/g," ").replace(/\b\w/g,o=>o.toUpperCase());n[i]=`${a} is required`}}),n},Dm=(t,e)=>{const n={};return Object.entries(e).forEach(([i,a])=>{t[i]!==void 0&&t[i]!==null&&t[i]!==""&&(Bw(t[i],a.min,a.max)||(n[i]=a.message))}),n},Uw=(t,e,n="PHASE")=>{const i=ad[n]?.[e];return i?Dm(t,i):{}},Hw=(t,e)=>{const n={};return e.forEach(i=>{const{condition:a,errorField:o,message:l}=i;a(t)&&(n[o]=l)}),n},VM=(t,e)=>{const n={};return e.required&&Object.assign(n,Fw(t,e.required)),e.numeric&&Object.assign(n,Dm(t,e.numeric)),e.department&&t.department&&Object.assign(n,Uw(t,t.department,e.departmentSchema)),e.logical&&Object.assign(n,Hw(t,e.logical)),n},qM={PHASE:{required:["name","department","work_center"],numeric:{numero_persone:{min:1,message:"Number of people must be at least 1"}},departmentSchema:"PHASE",logical:[{condition:t=>t.bag_width&&t.bag_step&&parseFloat(t.bag_width)<parseFloat(t.bag_step),errorField:"bag_width",message:"Bag width cannot be less than bag step"}]},MACHINE:{required:["machine_name","machine_type","department","work_center"],numeric:ad.MACHINE,logical:[{condition:t=>t.min_web_width&&t.max_web_width&&parseFloat(t.min_web_width)>parseFloat(t.max_web_width),errorField:"min_web_width",message:"Minimum web width cannot exceed maximum web width"},{condition:t=>t.min_bag_height&&t.max_bag_height&&parseFloat(t.min_bag_height)>parseFloat(t.max_bag_height),errorField:"min_bag_height",message:"Minimum bag height cannot exceed maximum bag height"}]},ORDER:{required:["odp_number","article_code","production_lot","bag_height","bag_width","bag_step","product_type","quantity","delivery_date"],numeric:ad.ORDER,logical:[{condition:t=>t.bag_width&&t.bag_step&&parseFloat(t.bag_width)<parseFloat(t.bag_step),errorField:"bag_width",message:"Bag width cannot be less than bag step"},{condition:t=>t.quantity&&t.quantity_completed&&parseFloat(t.quantity_completed)>parseFloat(t.quantity),errorField:"quantity_completed",message:"Quantity completed cannot exceed total quantity"},{condition:t=>t.delivery_date&&t.scheduled_start_time&&new Date(t.scheduled_start_time)>new Date(t.delivery_date),errorField:"scheduled_start_time",message:"Scheduled start cannot be after delivery date"}]},OFF_TIME:{required:["startDate","startTime","endDate","endTime"],logical:[{condition:t=>t.startDate&&t.endDate&&new Date(t.startDate)>new Date(t.endDate),errorField:"endDate",message:"End date cannot be before start date"},{condition:t=>t.startDate&&t.endDate&&t.startDate===t.endDate&&t.startTime&&t.endTime&&t.startTime>=t.endTime,errorField:"endTime",message:"End time must be after start time when dates are the same"}]}},Mm=t=>typeof t=="string"?t.trim().length>0:Array.isArray(t)?t.length>0:typeof t=="object"&&t!==null?Object.keys(t).length>0:!!t,GM=t=>!t||typeof t!="string"?!1:/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t),YM=t=>!t||typeof t!="string"?!1:/^[+]?[1-9][\d]{0,15}$/.test(t.replace(/\s/g,"")),WM=t=>{if(!t)return!1;const e=new Date(t);return e instanceof Date&&!isNaN(e)},Bw=(t,e=null,n=null)=>{const i=typeof t=="string"?parseFloat(t):t;return!(typeof i!="number"||isNaN(i)||e!==null&&i<e||n!==null&&i>n)},KM=(t,e=null,n=null)=>{const i=typeof t=="string"?parseInt(t,10):t;return!(!Number.isInteger(i)||e!==null&&i<e||n!==null&&i>n)},XM=t=>{if(!t||typeof t!="string")return!1;try{return new URL(t),!0}catch{return!1}},$w=(t,e)=>!t||!e?!1:typeof e=="string"?new RegExp(e).test(t):e instanceof RegExp?e.test(t):!1,Vw=(t,e)=>!t||typeof t!="string"?!1:t.length>=e,qw=(t,e)=>!t||typeof t!="string"?!1:t.length<=e,Gw=(t,e,n)=>typeof t!="number"||isNaN(t)?!1:t>=e&&t<=n,QM=t=>!t||typeof t!="string"?!1:/^[a-zA-Z0-9\s\-_]{2,100}$/.test(t.trim()),ZM=t=>!t||typeof t!="string"?!1:/^[a-zA-Z0-9]{3,20}$/.test(t.trim()),JM=t=>!t||typeof t!="string"?!1:/^[a-zA-Z0-9-]{3,50}$/.test(t.trim()),ek=t=>["ZANICA","BUSTO_GAROLFO"].includes(t),tk=t=>["STAMPA","CONFEZIONAMENTO"].includes(t),nk=t=>["ACTIVE","INACTIVE","MAINTENANCE"].includes(t),ik=t=>["crema","liquido","polveri"].includes(t),sk=t=>["3","4"].includes(t),ak=(t,e)=>{const n={};return Object.keys(e).forEach(i=>{const a=t[i],o=e[i];if(o.required&&!Mm(a))n[i]=o.required;else if(a&&o.pattern&&!$w(a,o.pattern))n[i]=o.pattern;else if(a&&o.minLength&&!Vw(a,o.minLength))n[i]=o.minLength;else if(a&&o.maxLength&&!qw(a,o.maxLength))n[i]=o.maxLength;else if(a&&o.min!==void 0&&!Gw(a,o.min,o.max||1/0))n[i]=o.min;else if(a&&o.custom){const l=o.custom(a,t);l&&(n[i]=l)}}),n},ms={validateRequiredFields:Fw,validateNumericFields:Dm,validateDepartmentFields:Uw,validateLogicalRelations:Hw,validateAll:VM,VALIDATION_CONFIGS:qM,VALIDATION_SCHEMAS:ad,isNotEmpty:Mm,isValidEmail:GM,isValidPhone:YM,isValidDate:WM,isValidNumber:Bw,isValidInteger:KM,isValidUrl:XM,matchesPattern:$w,hasMinLength:Vw,hasMaxLength:qw,isInRange:Gw,isValidMachineName:QM,isValidOdpNumber:ZM,isValidArticleCode:JM,isValidWorkCenter:ek,isValidDepartment:tk,isValidMachineStatus:nk,isValidProductType:ik,isValidSealSides:sk,validateFormData:ak},rk=()=>{const t=A.useCallback(a=>{const o=ms.validateAll(a,ms.VALIDATION_CONFIGS.MACHINE);return Object.values(o)},[]),e=A.useCallback((a,o)=>{const l=[];return o.some(d=>d.scheduled_machine_id===a)&&l.push("Cannot delete machine with scheduled tasks. Please unschedule all tasks first."),l},[]),n=A.useCallback(a=>({name:a?.machine_name||"Unknown Machine",type:a?.machine_type||"Unknown Type",department:a?.department||"Unknown Department",workCenter:a?.work_center||"Unknown Work Center",status:a?.status||"UNKNOWN",isActive:a?.status==="ACTIVE"}),[]),i=A.useCallback((a,o)=>{if(a.status!=="ACTIVE")return!1;const l=a.active_shifts||[];if(l.length===0)return!1;const u=o.getUTCHours();return l.some(f=>{switch(f){case"T1":return u>=6&&u<14;case"T2":return u>=14&&u<22;case"T3":return u>=22||u<6;default:return!1}})},[]);return{validateMachine:t,validateMachineDeletion:e,getMachineDisplayInfo:n,isMachineAvailable:i}},ok=()=>{const t=A.useCallback(a=>{const o=ms.validateAll(a,ms.VALIDATION_CONFIGS.ORDER);return Object.values(o)},[]),e=A.useCallback((a,o)=>{const l=[];if(!a)return l.push("Please select a production phase"),l;o.department&&a.department!==o.department&&l.push(`Selected phase is for ${a.department} department, but order is for ${o.department}`),o.work_center&&a.work_center!==o.work_center&&l.push(`Selected phase is for ${a.work_center} work center, but order is for ${o.work_center}`);const u=ms.validateDepartmentFields(a,a.department,"PHASE");return Object.values(u).forEach(d=>l.push(d)),l},[]),n=A.useCallback((a,o,l,u)=>{const d=[];return a?o?!l||!u?(d.push("Start and end times are required"),d):(o.status!=="ACTIVE"&&d.push(`Machine ${o.machine_name} is not active`),a.scheduled_machine_id&&a.scheduled_machine_id!==o.id&&d.push("Order is already scheduled on a different machine"),a.fase||d.push("Order must have a production phase selected"),(!a.quantity||a.quantity<=0)&&d.push("Order must have a valid quantity"),(!a.duration||a.duration<=0)&&d.push("Order must have calculated duration"),d):(d.push("Machine is required"),d):(d.push("Order is required"),d)},[]),i=A.useCallback(a=>{const o=[];return a?(a.quantity_completed>0&&o.push("Cannot delete order that has started production"),a.scheduled_machine_id&&o.push("Cannot delete scheduled order. Please unschedule first."),o):(o.push("Order is required"),o)},[]);return{validateOrder:t,validatePhaseSelection:e,validateOrderScheduling:n,validateOrderDeletion:i}},lk=()=>({validatePhase:n=>{const i=ms.validateAll(n,ms.VALIDATION_CONFIGS.PHASE);return Object.values(i)},validateForm:n=>ms.validateAll(n,ms.VALIDATION_CONFIGS.PHASE)}),ws=(t="")=>{const{showAlert:e,showConfirmDialog:n}=Ce(),i=A.useCallback((_,b={})=>{const{showUserAlert:S=!0,alertType:w="error",logError:x=!0,context:C=t,fallbackMessage:T="An unexpected error occurred"}=b,O=Vn(_,C);if(x&&mi(O,C),S){const M=O.userMessage||T;e(M,w)}return O},[t,e]),a=A.useCallback(async(_,b={})=>{const{showUserAlert:S=!0,alertType:w="error",context:x=t,fallbackMessage:C="Operation failed",retry:T=!1,maxRetries:O=3}=b;try{return T?await Pb(_,O):await _()}catch(M){throw i(M,{showUserAlert:S,alertType:w,context:x,fallbackMessage:C})}},[t,i]),o=A.useCallback((_,b)=>{const S=i(_,{showUserAlert:!1});S.code===$e.VALIDATION_ERROR?S.fieldErrors?Object.entries(S.fieldErrors).forEach(([w,x])=>{b(w,{type:"server",message:x})}):b("root",{type:"server",message:S.userMessage}):b("root",{type:"server",message:S.userMessage})},[i]),l=A.useCallback((_,b,S)=>{const w=i(_,{context:`${b} ${S}`,fallbackMessage:`Failed to ${b} ${S}`});return w.code===$e.VALIDATION_ERROR?e(`Please check the ${S} information and try again.`,"error"):w.code===$e.NOT_FOUND_ERROR?e(`${S} not found. It may have been deleted.`,"error"):w.code===$e.AUTHORIZATION_ERROR&&e(`You don't have permission to ${b} ${S}.`,"error"),w},[i,e]),u=A.useCallback((_,b)=>{const S=i(_,{context:"Network Operation",fallbackMessage:"Network error occurred"});return S.code===$e.NETWORK_ERROR&&b&&n("Network Error","Your connection seems to be unstable. Would you like to retry?",b,"warning"),S},[i,n]),d=A.useCallback(_=>{const b=i(_,{context:"Authentication",fallbackMessage:"Authentication error occurred"});return b.code===$e.AUTHENTICATION_ERROR&&e("Please log in again to continue.","warning"),b},[i,e]),f=A.useCallback((_,b="")=>qg(_,b||t),[t]),g=A.useCallback(_=>Vn(_,t).severity||"medium",[t]),p=A.useMemo(()=>$e,[]);return{handleError:i,handleAsync:a,handleFormError:o,handleCrudError:l,handleNetworkError:u,handleAuthError:d,createSafeAsync:f,getErrorSeverity:g,errorTypes:p,withRetry:Pb,safeAsync:qg}},ck=(t,e)=>{const{phases:n}=si(),[i,a]=A.useState(""),[o,l]=A.useState(!1),[u,d]=A.useState(null),[f,g]=A.useState({}),p=A.useRef(null),_=A.useMemo(()=>!n||n.length===0?[]:t||e?n.filter(O=>(!t||O.department===t)&&(!e||O.work_center===e)).filter(O=>O.name.toLowerCase().includes(i.toLowerCase())):[],[i,t,e,n]);A.useEffect(()=>()=>{p.current&&clearTimeout(p.current)},[]);const b=A.useCallback((T,O)=>{const M=O===""?null:parseFloat(O);g(D=>({...D,[T]:M}))},[]),S=A.useCallback((T,O,M)=>{O("fase",T.id),d(T),a(T.name),l(!1),M("fase"),g({v_stampa:T.v_stampa||null,t_setup_stampa:T.t_setup_stampa||null,costo_h_stampa:T.costo_h_stampa||null,v_conf:T.v_conf||null,t_setup_conf:T.t_setup_conf||null,costo_h_conf:T.costo_h_conf||null})},[]),w=A.useCallback(()=>{a(""),d(null),g({})},[]),x=A.useCallback(()=>{p.current&&clearTimeout(p.current),p.current=setTimeout(()=>l(!1),150)},[]);return A.useMemo(()=>({phaseSearch:i,setPhaseSearch:a,isDropdownVisible:o,setIsDropdownVisible:l,selectedPhase:u,setSelectedPhase:d,filteredPhases:_,editablePhaseParams:f,setEditablePhaseParams:g,handlePhaseParamChange:b,handlePhaseSelect:S,resetPhaseData:w,handleBlur:x,blurTimeoutRef:p}),[i,o,u,_,f,g,b,S,w,x])};function uk(){const{machines:t,updateMachine:e,removeMachine:n}=an(),{selectedWorkCenter:i,isLoading:a,isInitialized:o,showAlert:l,showConfirmDialog:u}=Ce(),{init:d,cleanup:f}=Hi(),g=A.useMemo(()=>i?i===Me.BOTH?t:t.filter(x=>x.work_center===i):[],[t,i]),{validateMachine:p}=rk(),{handleAsync:_}=ws("MachineryListPage");A.useEffect(()=>(o||d(),()=>{f()}),[d,o,f]);const b=A.useMemo(()=>[{header:"ID Macchina",accessorKey:"id"},{header:"Tipo Macchina",accessorKey:"machine_type"},{header:"Nome Macchina",accessorKey:"machine_name",cell:We},{header:"Centro di Lavoro",accessorKey:"work_center"},{header:"Reparto",accessorKey:"department"},{header:"Stato",accessorKey:"status",cell:We},{header:"Larghezza Min (mm)",accessorKey:"min_web_width",cell:We},{header:"Larghezza Max (mm)",accessorKey:"max_web_width",cell:We},{header:"Altezza Min (mm)",accessorKey:"min_bag_height",cell:We},{header:"Altezza Max (mm)",accessorKey:"max_bag_height",cell:We},{header:"Velocità Std",accessorKey:"standard_speed",cell:We},{header:"Setup (h)",accessorKey:"setup_time_standard",cell:We},{header:"Cambio Colore (h)",accessorKey:"changeover_color",cell:We},{header:"Cambio Materiale (h)",accessorKey:"changeover_material",cell:We},{header:"Turni Attivi",accessorKey:"active_shifts",cell:x=>Array.isArray(x.getValue())?x.getValue().join(", "):""},{header:"Creato il",accessorKey:"created_at",cell:x=>new Date(x.getValue()).toLocaleDateString()},{header:"Aggiornato il",accessorKey:"updated_at",cell:x=>new Date(x.getValue()).toLocaleDateString()},{header:"Calendario",accessorKey:"id",cell:x=>y.jsx(Cn,{to:`/machinery/${x.getValue()}/calendar`,className:"nav-btn today",style:{textDecoration:"none"},children:"Visualizza Calendario"})}],[]),S=async x=>{const C=p(x);if(C.length>0){l(`Errori di validazione:
${C.join(`
`)}`,"error");return}await _(()=>e(x.id,x),{context:"Aggiorna Macchina",fallbackMessage:"Aggiornamento macchina fallito"})},w=async x=>{u("Elimina Macchina",`Sei sicuro di voler eliminare "${x.machine_name}"? Questa azione non può essere annullata.`,async()=>{await _(()=>n(x.id),{context:"Elimina Macchina",fallbackMessage:"Eliminazione macchina fallita"})},"danger")};return a?y.jsx("div",{children:"Caricamento dati macchine..."}):i?y.jsxs("div",{className:"content-section",children:[y.jsx(Ss,{title:"Catalogo Macchine"}),y.jsx(Rm,{columns:b,data:g,onSaveRow:S,onDeleteRow:w})]}):y.jsx("div",{className:"error",children:"Seleziona un centro di lavoro per visualizzare i dati delle macchine."})}var ac=t=>t.type==="checkbox",Ia=t=>t instanceof Date,xn=t=>t==null;const Yw=t=>typeof t=="object";var Lt=t=>!xn(t)&&!Array.isArray(t)&&Yw(t)&&!Ia(t),dk=t=>Lt(t)&&t.target?ac(t.target)?t.target.checked:t.target.value:t,hk=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,fk=(t,e)=>t.has(hk(e)),gk=t=>{const e=t.constructor&&t.constructor.prototype;return Lt(e)&&e.hasOwnProperty("isPrototypeOf")},km=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function nn(t){let e;const n=Array.isArray(t),i=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(!(km&&(t instanceof Blob||i))&&(n||Lt(t)))if(e=n?[]:Object.create(Object.getPrototypeOf(t)),!n&&!gk(t))e=t;else for(const a in t)t.hasOwnProperty(a)&&(e[a]=nn(t[a]));else return t;return e}var Rd=t=>/^\w*$/.test(t),Ft=t=>t===void 0,Nm=t=>Array.isArray(t)?t.filter(Boolean):[],jm=t=>Nm(t.replace(/["|']|\]/g,"").split(/\.|\[/)),_e=(t,e,n)=>{if(!e||!Lt(t))return n;const i=(Rd(e)?[e]:jm(e)).reduce((a,o)=>xn(a)?a:a[o],t);return Ft(i)||i===t?Ft(t[e])?n:t[e]:i},zi=t=>typeof t=="boolean",wt=(t,e,n)=>{let i=-1;const a=Rd(e)?[e]:jm(e),o=a.length,l=o-1;for(;++i<o;){const u=a[i];let d=n;if(i!==l){const f=t[u];d=Lt(f)||Array.isArray(f)?f:isNaN(+a[i+1])?{}:[]}if(u==="__proto__"||u==="constructor"||u==="prototype")return;t[u]=d,t=t[u]}};const Zb={BLUR:"blur",FOCUS_OUT:"focusout"},vi={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},os={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},mk=Pe.createContext(null);mk.displayName="HookFormContext";var pk=(t,e,n,i=!0)=>{const a={defaultValues:e._defaultValues};for(const o in t)Object.defineProperty(a,o,{get:()=>{const l=o;return e._proxyFormState[l]!==vi.all&&(e._proxyFormState[l]=!i||vi.all),t[l]}});return a};const vk=typeof window<"u"?Pe.useLayoutEffect:Pe.useEffect;var Ui=t=>typeof t=="string",yk=(t,e,n,i,a)=>Ui(t)?(i&&e.watch.add(t),_e(n,t,a)):Array.isArray(t)?t.map(o=>(i&&e.watch.add(o),_e(n,o))):(i&&(e.watchAll=!0),n),Zg=t=>xn(t)||!Yw(t);function Zs(t,e,n=new WeakSet){if(Zg(t)||Zg(e))return t===e;if(Ia(t)&&Ia(e))return t.getTime()===e.getTime();const i=Object.keys(t),a=Object.keys(e);if(i.length!==a.length)return!1;if(n.has(t)||n.has(e))return!0;n.add(t),n.add(e);for(const o of i){const l=t[o];if(!a.includes(o))return!1;if(o!=="ref"){const u=e[o];if(Ia(l)&&Ia(u)||Lt(l)&&Lt(u)||Array.isArray(l)&&Array.isArray(u)?!Zs(l,u,n):l!==u)return!1}}return!0}var _k=(t,e,n,i,a)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[i]:a||!0}}:{},Dl=t=>Array.isArray(t)?t:[t],Jb=()=>{let t=[];return{get observers(){return t},next:a=>{for(const o of t)o.next&&o.next(a)},subscribe:a=>(t.push(a),{unsubscribe:()=>{t=t.filter(o=>o!==a)}}),unsubscribe:()=>{t=[]}}},kn=t=>Lt(t)&&!Object.keys(t).length,Lm=t=>t.type==="file",yi=t=>typeof t=="function",rd=t=>{if(!km)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},Ww=t=>t.type==="select-multiple",Pm=t=>t.type==="radio",bk=t=>Pm(t)||ac(t),yg=t=>rd(t)&&t.isConnected;function Sk(t,e){const n=e.slice(0,-1).length;let i=0;for(;i<n;)t=Ft(t)?i++:t[e[i++]];return t}function wk(t){for(const e in t)if(t.hasOwnProperty(e)&&!Ft(t[e]))return!1;return!0}function zt(t,e){const n=Array.isArray(e)?e:Rd(e)?[e]:jm(e),i=n.length===1?t:Sk(t,n),a=n.length-1,o=n[a];return i&&delete i[o],a!==0&&(Lt(i)&&kn(i)||Array.isArray(i)&&wk(i))&&zt(t,n.slice(0,-1)),t}var Kw=t=>{for(const e in t)if(yi(t[e]))return!0;return!1};function od(t,e={}){const n=Array.isArray(t);if(Lt(t)||n)for(const i in t)Array.isArray(t[i])||Lt(t[i])&&!Kw(t[i])?(e[i]=Array.isArray(t[i])?[]:{},od(t[i],e[i])):xn(t[i])||(e[i]=!0);return e}function Xw(t,e,n){const i=Array.isArray(t);if(Lt(t)||i)for(const a in t)Array.isArray(t[a])||Lt(t[a])&&!Kw(t[a])?Ft(e)||Zg(n[a])?n[a]=Array.isArray(t[a])?od(t[a],[]):{...od(t[a])}:Xw(t[a],xn(e)?{}:e[a],n[a]):n[a]=!Zs(t[a],e[a]);return n}var fl=(t,e)=>Xw(t,e,od(e));const e0={value:!1,isValid:!1},t0={value:!0,isValid:!0};var Qw=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!Ft(t[0].attributes.value)?Ft(t[0].value)||t[0].value===""?t0:{value:t[0].value,isValid:!0}:t0:e0}return e0},Zw=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:i})=>Ft(t)?t:e?t===""?NaN:t&&+t:n&&Ui(t)?new Date(t):i?i(t):t;const n0={isValid:!1,value:null};var Jw=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,n0):n0;function i0(t){const e=t.ref;return Lm(e)?e.files:Pm(e)?Jw(t.refs).value:Ww(e)?[...e.selectedOptions].map(({value:n})=>n):ac(e)?Qw(t.refs).value:Zw(Ft(e.value)?t.ref.value:e.value,t)}var xk=(t,e,n,i)=>{const a={};for(const o of t){const l=_e(e,o);l&&wt(a,o,l._f)}return{criteriaMode:n,names:[...t],fields:a,shouldUseNativeValidation:i}},ld=t=>t instanceof RegExp,gl=t=>Ft(t)?t:ld(t)?t.source:Lt(t)?ld(t.value)?t.value.source:t.value:t,s0=t=>({isOnSubmit:!t||t===vi.onSubmit,isOnBlur:t===vi.onBlur,isOnChange:t===vi.onChange,isOnAll:t===vi.all,isOnTouch:t===vi.onTouched});const a0="AsyncFunction";var Ck=t=>!!t&&!!t.validate&&!!(yi(t.validate)&&t.validate.constructor.name===a0||Lt(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===a0)),Ek=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),r0=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(i=>t.startsWith(i)&&/^\.\w+/.test(t.slice(i.length))));const Ml=(t,e,n,i)=>{for(const a of n||Object.keys(t)){const o=_e(t,a);if(o){const{_f:l,...u}=o;if(l){if(l.refs&&l.refs[0]&&e(l.refs[0],a)&&!i)return!0;if(l.ref&&e(l.ref,l.name)&&!i)return!0;if(Ml(u,e))break}else if(Lt(u)&&Ml(u,e))break}}};function o0(t,e,n){const i=_e(t,n);if(i||Rd(n))return{error:i,name:n};const a=n.split(".");for(;a.length;){const o=a.join("."),l=_e(e,o),u=_e(t,o);if(l&&!Array.isArray(l)&&n!==o)return{name:n};if(u&&u.type)return{name:o,error:u};if(u&&u.root&&u.root.type)return{name:`${o}.root`,error:u.root};a.pop()}return{name:n}}var Tk=(t,e,n,i)=>{n(t);const{name:a,...o}=t;return kn(o)||Object.keys(o).length>=Object.keys(e).length||Object.keys(o).find(l=>e[l]===(!i||vi.all))},Ok=(t,e,n)=>!t||!e||t===e||Dl(t).some(i=>i&&(n?i===e:i.startsWith(e)||e.startsWith(i))),Ak=(t,e,n,i,a)=>a.isOnAll?!1:!n&&a.isOnTouch?!(e||t):(n?i.isOnBlur:a.isOnBlur)?!t:(n?i.isOnChange:a.isOnChange)?t:!0,Rk=(t,e)=>!Nm(_e(t,e)).length&&zt(t,e),Dk=(t,e,n)=>{const i=Dl(_e(t,n));return wt(i,"root",e[n]),wt(t,n,i),t},Qu=t=>Ui(t);function l0(t,e,n="validate"){if(Qu(t)||Array.isArray(t)&&t.every(Qu)||zi(t)&&!t)return{type:n,message:Qu(t)?t:"",ref:e}}var Ur=t=>Lt(t)&&!ld(t)?t:{value:t,message:""},c0=async(t,e,n,i,a,o)=>{const{ref:l,refs:u,required:d,maxLength:f,minLength:g,min:p,max:_,pattern:b,validate:S,name:w,valueAsNumber:x,mount:C}=t._f,T=_e(n,w);if(!C||e.has(w))return{};const O=u?u[0]:l,M=q=>{a&&O.reportValidity&&(O.setCustomValidity(zi(q)?"":q||""),O.reportValidity())},D={},U=Pm(l),L=ac(l),B=U||L,H=(x||Lm(l))&&Ft(l.value)&&Ft(T)||rd(l)&&l.value===""||T===""||Array.isArray(T)&&!T.length,Q=_k.bind(null,w,i,D),Z=(q,ne,he,oe=os.maxLength,I=os.minLength)=>{const K=q?ne:he;D[w]={type:q?oe:I,message:K,ref:l,...Q(q?oe:I,K)}};if(o?!Array.isArray(T)||!T.length:d&&(!B&&(H||xn(T))||zi(T)&&!T||L&&!Qw(u).isValid||U&&!Jw(u).isValid)){const{value:q,message:ne}=Qu(d)?{value:!!d,message:d}:Ur(d);if(q&&(D[w]={type:os.required,message:ne,ref:O,...Q(os.required,ne)},!i))return M(ne),D}if(!H&&(!xn(p)||!xn(_))){let q,ne;const he=Ur(_),oe=Ur(p);if(!xn(T)&&!isNaN(T)){const I=l.valueAsNumber||T&&+T;xn(he.value)||(q=I>he.value),xn(oe.value)||(ne=I<oe.value)}else{const I=l.valueAsDate||new Date(T),K=j=>new Date(new Date().toDateString()+" "+j),le=l.type=="time",ge=l.type=="week";Ui(he.value)&&T&&(q=le?K(T)>K(he.value):ge?T>he.value:I>new Date(he.value)),Ui(oe.value)&&T&&(ne=le?K(T)<K(oe.value):ge?T<oe.value:I<new Date(oe.value))}if((q||ne)&&(Z(!!q,he.message,oe.message,os.max,os.min),!i))return M(D[w].message),D}if((f||g)&&!H&&(Ui(T)||o&&Array.isArray(T))){const q=Ur(f),ne=Ur(g),he=!xn(q.value)&&T.length>+q.value,oe=!xn(ne.value)&&T.length<+ne.value;if((he||oe)&&(Z(he,q.message,ne.message),!i))return M(D[w].message),D}if(b&&!H&&Ui(T)){const{value:q,message:ne}=Ur(b);if(ld(q)&&!T.match(q)&&(D[w]={type:os.pattern,message:ne,ref:l,...Q(os.pattern,ne)},!i))return M(ne),D}if(S){if(yi(S)){const q=await S(T,n),ne=l0(q,O);if(ne&&(D[w]={...ne,...Q(os.validate,ne.message)},!i))return M(ne.message),D}else if(Lt(S)){let q={};for(const ne in S){if(!kn(q)&&!i)break;const he=l0(await S[ne](T,n),O,ne);he&&(q={...he,...Q(ne,he.message)},M(he.message),i&&(D[w]=q))}if(!kn(q)&&(D[w]={ref:O,...q},!i))return D}}return M(!0),D};const Mk={mode:vi.onSubmit,reValidateMode:vi.onChange,shouldFocusError:!0};function kk(t={}){let e={...Mk,...t},n={submitCount:0,isDirty:!1,isReady:!1,isLoading:yi(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},i={},a=Lt(e.defaultValues)||Lt(e.values)?nn(e.defaultValues||e.values)||{}:{},o=e.shouldUnregister?{}:nn(a),l={action:!1,mount:!1,watch:!1},u={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},d,f=0;const g={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let p={...g};const _={array:Jb(),state:Jb()},b=e.criteriaMode===vi.all,S=k=>F=>{clearTimeout(f),f=setTimeout(k,F)},w=async k=>{if(!e.disabled&&(g.isValid||p.isValid||k)){const F=e.resolver?kn((await L()).errors):await H(i,!0);F!==n.isValid&&_.state.next({isValid:F})}},x=(k,F)=>{!e.disabled&&(g.isValidating||g.validatingFields||p.isValidating||p.validatingFields)&&((k||Array.from(u.mount)).forEach(X=>{X&&(F?wt(n.validatingFields,X,F):zt(n.validatingFields,X))}),_.state.next({validatingFields:n.validatingFields,isValidating:!kn(n.validatingFields)}))},C=(k,F=[],X,fe,ue=!0,se=!0)=>{if(fe&&X&&!e.disabled){if(l.action=!0,se&&Array.isArray(_e(i,k))){const ve=X(_e(i,k),fe.argA,fe.argB);ue&&wt(i,k,ve)}if(se&&Array.isArray(_e(n.errors,k))){const ve=X(_e(n.errors,k),fe.argA,fe.argB);ue&&wt(n.errors,k,ve),Rk(n.errors,k)}if((g.touchedFields||p.touchedFields)&&se&&Array.isArray(_e(n.touchedFields,k))){const ve=X(_e(n.touchedFields,k),fe.argA,fe.argB);ue&&wt(n.touchedFields,k,ve)}(g.dirtyFields||p.dirtyFields)&&(n.dirtyFields=fl(a,o)),_.state.next({name:k,isDirty:Z(k,F),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else wt(o,k,F)},T=(k,F)=>{wt(n.errors,k,F),_.state.next({errors:n.errors})},O=k=>{n.errors=k,_.state.next({errors:n.errors,isValid:!1})},M=(k,F,X,fe)=>{const ue=_e(i,k);if(ue){const se=_e(o,k,Ft(X)?_e(a,k):X);Ft(se)||fe&&fe.defaultChecked||F?wt(o,k,F?se:i0(ue._f)):he(k,se),l.mount&&w()}},D=(k,F,X,fe,ue)=>{let se=!1,ve=!1;const xe={name:k};if(!e.disabled){if(!X||fe){(g.isDirty||p.isDirty)&&(ve=n.isDirty,n.isDirty=xe.isDirty=Z(),se=ve!==xe.isDirty);const ke=Zs(_e(a,k),F);ve=!!_e(n.dirtyFields,k),ke?zt(n.dirtyFields,k):wt(n.dirtyFields,k,!0),xe.dirtyFields=n.dirtyFields,se=se||(g.dirtyFields||p.dirtyFields)&&ve!==!ke}if(X){const ke=_e(n.touchedFields,k);ke||(wt(n.touchedFields,k,X),xe.touchedFields=n.touchedFields,se=se||(g.touchedFields||p.touchedFields)&&ke!==X)}se&&ue&&_.state.next(xe)}return se?xe:{}},U=(k,F,X,fe)=>{const ue=_e(n.errors,k),se=(g.isValid||p.isValid)&&zi(F)&&n.isValid!==F;if(e.delayError&&X?(d=S(()=>T(k,X)),d(e.delayError)):(clearTimeout(f),d=null,X?wt(n.errors,k,X):zt(n.errors,k)),(X?!Zs(ue,X):ue)||!kn(fe)||se){const ve={...fe,...se&&zi(F)?{isValid:F}:{},errors:n.errors,name:k};n={...n,...ve},_.state.next(ve)}},L=async k=>{x(k,!0);const F=await e.resolver(o,e.context,xk(k||u.mount,i,e.criteriaMode,e.shouldUseNativeValidation));return x(k),F},B=async k=>{const{errors:F}=await L(k);if(k)for(const X of k){const fe=_e(F,X);fe?wt(n.errors,X,fe):zt(n.errors,X)}else n.errors=F;return F},H=async(k,F,X={valid:!0})=>{for(const fe in k){const ue=k[fe];if(ue){const{_f:se,...ve}=ue;if(se){const xe=u.array.has(se.name),ke=ue._f&&Ck(ue._f);ke&&g.validatingFields&&x([fe],!0);const je=await c0(ue,u.disabled,o,b,e.shouldUseNativeValidation&&!F,xe);if(ke&&g.validatingFields&&x([fe]),je[se.name]&&(X.valid=!1,F))break;!F&&(_e(je,se.name)?xe?Dk(n.errors,je,se.name):wt(n.errors,se.name,je[se.name]):zt(n.errors,se.name))}!kn(ve)&&await H(ve,F,X)}}return X.valid},Q=()=>{for(const k of u.unMount){const F=_e(i,k);F&&(F._f.refs?F._f.refs.every(X=>!yg(X)):!yg(F._f.ref))&&pt(k)}u.unMount=new Set},Z=(k,F)=>!e.disabled&&(k&&F&&wt(o,k,F),!Zs(j(),a)),q=(k,F,X)=>yk(k,u,{...l.mount?o:Ft(F)?a:Ui(k)?{[k]:F}:F},X,F),ne=k=>Nm(_e(l.mount?o:a,k,e.shouldUnregister?_e(a,k,[]):[])),he=(k,F,X={})=>{const fe=_e(i,k);let ue=F;if(fe){const se=fe._f;se&&(!se.disabled&&wt(o,k,Zw(F,se)),ue=rd(se.ref)&&xn(F)?"":F,Ww(se.ref)?[...se.ref.options].forEach(ve=>ve.selected=ue.includes(ve.value)):se.refs?ac(se.ref)?se.refs.forEach(ve=>{(!ve.defaultChecked||!ve.disabled)&&(Array.isArray(ue)?ve.checked=!!ue.find(xe=>xe===ve.value):ve.checked=ue===ve.value||!!ue)}):se.refs.forEach(ve=>ve.checked=ve.value===ue):Lm(se.ref)?se.ref.value="":(se.ref.value=ue,se.ref.type||_.state.next({name:k,values:nn(o)})))}(X.shouldDirty||X.shouldTouch)&&D(k,ue,X.shouldTouch,X.shouldDirty,!0),X.shouldValidate&&ge(k)},oe=(k,F,X)=>{for(const fe in F){if(!F.hasOwnProperty(fe))return;const ue=F[fe],se=k+"."+fe,ve=_e(i,se);(u.array.has(k)||Lt(ue)||ve&&!ve._f)&&!Ia(ue)?oe(se,ue,X):he(se,ue,X)}},I=(k,F,X={})=>{const fe=_e(i,k),ue=u.array.has(k),se=nn(F);wt(o,k,se),ue?(_.array.next({name:k,values:nn(o)}),(g.isDirty||g.dirtyFields||p.isDirty||p.dirtyFields)&&X.shouldDirty&&_.state.next({name:k,dirtyFields:fl(a,o),isDirty:Z(k,se)})):fe&&!fe._f&&!xn(se)?oe(k,se,X):he(k,se,X),r0(k,u)&&_.state.next({...n,name:k}),_.state.next({name:l.mount?k:void 0,values:nn(o)})},K=async k=>{l.mount=!0;const F=k.target;let X=F.name,fe=!0;const ue=_e(i,X),se=ke=>{fe=Number.isNaN(ke)||Ia(ke)&&isNaN(ke.getTime())||Zs(ke,_e(o,X,ke))},ve=s0(e.mode),xe=s0(e.reValidateMode);if(ue){let ke,je;const Bi=F.type?i0(ue._f):dk(k),Ut=k.type===Zb.BLUR||k.type===Zb.FOCUS_OUT,Va=!Ek(ue._f)&&!e.resolver&&!_e(n.errors,X)&&!ue._f.deps||Ak(Ut,_e(n.touchedFields,X),n.isSubmitted,xe,ve),Ci=r0(X,u,Ut);wt(o,X,Bi),Ut?(!F||!F.readOnly)&&(ue._f.onBlur&&ue._f.onBlur(k),d&&d(0)):ue._f.onChange&&ue._f.onChange(k);const Ei=D(X,Bi,Ut),Ln=!kn(Ei)||Ci;if(!Ut&&_.state.next({name:X,type:k.type,values:nn(o)}),Va)return(g.isValid||p.isValid)&&(e.mode==="onBlur"?Ut&&w():Ut||w()),Ln&&_.state.next({name:X,...Ci?{}:Ei});if(!Ut&&Ci&&_.state.next({...n}),e.resolver){const{errors:Ti}=await L([X]);if(se(Bi),fe){const $i=o0(n.errors,i,X),la=o0(Ti,i,$i.name||X);ke=la.error,X=la.name,je=kn(Ti)}}else x([X],!0),ke=(await c0(ue,u.disabled,o,b,e.shouldUseNativeValidation))[X],x([X]),se(Bi),fe&&(ke?je=!1:(g.isValid||p.isValid)&&(je=await H(i,!0)));fe&&(ue._f.deps&&ge(ue._f.deps),U(X,je,ke,Ei))}},le=(k,F)=>{if(_e(n.errors,F)&&k.focus)return k.focus(),1},ge=async(k,F={})=>{let X,fe;const ue=Dl(k);if(e.resolver){const se=await B(Ft(k)?k:ue);X=kn(se),fe=k?!ue.some(ve=>_e(se,ve)):X}else k?(fe=(await Promise.all(ue.map(async se=>{const ve=_e(i,se);return await H(ve&&ve._f?{[se]:ve}:ve)}))).every(Boolean),!(!fe&&!n.isValid)&&w()):fe=X=await H(i);return _.state.next({...!Ui(k)||(g.isValid||p.isValid)&&X!==n.isValid?{}:{name:k},...e.resolver||!k?{isValid:X}:{},errors:n.errors}),F.shouldFocus&&!fe&&Ml(i,le,k?ue:u.mount),fe},j=k=>{const F={...l.mount?o:a};return Ft(k)?F:Ui(k)?_e(F,k):k.map(X=>_e(F,X))},G=(k,F)=>({invalid:!!_e((F||n).errors,k),isDirty:!!_e((F||n).dirtyFields,k),error:_e((F||n).errors,k),isValidating:!!_e(n.validatingFields,k),isTouched:!!_e((F||n).touchedFields,k)}),re=k=>{k&&Dl(k).forEach(F=>zt(n.errors,F)),_.state.next({errors:k?n.errors:{}})},de=(k,F,X)=>{const fe=(_e(i,k,{_f:{}})._f||{}).ref,ue=_e(n.errors,k)||{},{ref:se,message:ve,type:xe,...ke}=ue;wt(n.errors,k,{...ke,...F,ref:fe}),_.state.next({name:k,errors:n.errors,isValid:!1}),X&&X.shouldFocus&&fe&&fe.focus&&fe.focus()},me=(k,F)=>yi(k)?_.state.subscribe({next:X=>"values"in X&&k(q(void 0,F),X)}):q(k,F,!0),Te=k=>_.state.subscribe({next:F=>{Ok(k.name,F.name,k.exact)&&Tk(F,k.formState||g,ae,k.reRenderRoot)&&k.callback({values:{...o},...n,...F,defaultValues:a})}}).unsubscribe,pe=k=>(l.mount=!0,p={...p,...k.formState},Te({...k,formState:p})),pt=(k,F={})=>{for(const X of k?Dl(k):u.mount)u.mount.delete(X),u.array.delete(X),F.keepValue||(zt(i,X),zt(o,X)),!F.keepError&&zt(n.errors,X),!F.keepDirty&&zt(n.dirtyFields,X),!F.keepTouched&&zt(n.touchedFields,X),!F.keepIsValidating&&zt(n.validatingFields,X),!e.shouldUnregister&&!F.keepDefaultValue&&zt(a,X);_.state.next({values:nn(o)}),_.state.next({...n,...F.keepDirty?{isDirty:Z()}:{}}),!F.keepIsValid&&w()},Ne=({disabled:k,name:F})=>{(zi(k)&&l.mount||k||u.disabled.has(F))&&(k?u.disabled.add(F):u.disabled.delete(F))},vt=(k,F={})=>{let X=_e(i,k);const fe=zi(F.disabled)||zi(e.disabled);return wt(i,k,{...X||{},_f:{...X&&X._f?X._f:{ref:{name:k}},name:k,mount:!0,...F}}),u.mount.add(k),X?Ne({disabled:zi(F.disabled)?F.disabled:e.disabled,name:k}):M(k,!0,F.value),{...fe?{disabled:F.disabled||e.disabled}:{},...e.progressive?{required:!!F.required,min:gl(F.min),max:gl(F.max),minLength:gl(F.minLength),maxLength:gl(F.maxLength),pattern:gl(F.pattern)}:{},name:k,onChange:K,onBlur:K,ref:ue=>{if(ue){vt(k,F),X=_e(i,k);const se=Ft(ue.value)&&ue.querySelectorAll&&ue.querySelectorAll("input,select,textarea")[0]||ue,ve=bk(se),xe=X._f.refs||[];if(ve?xe.find(ke=>ke===se):se===X._f.ref)return;wt(i,k,{_f:{...X._f,...ve?{refs:[...xe.filter(yg),se,...Array.isArray(_e(a,k))?[{}]:[]],ref:{type:se.type,name:k}}:{ref:se}}}),M(k,!1,void 0,se)}else X=_e(i,k,{}),X._f&&(X._f.mount=!1),(e.shouldUnregister||F.shouldUnregister)&&!(fk(u.array,k)&&l.action)&&u.unMount.add(k)}}},Se=()=>e.shouldFocusError&&Ml(i,le,u.mount),dt=k=>{zi(k)&&(_.state.next({disabled:k}),Ml(i,(F,X)=>{const fe=_e(i,X);fe&&(F.disabled=fe._f.disabled||k,Array.isArray(fe._f.refs)&&fe._f.refs.forEach(ue=>{ue.disabled=fe._f.disabled||k}))},0,!1))},Ye=(k,F)=>async X=>{let fe;X&&(X.preventDefault&&X.preventDefault(),X.persist&&X.persist());let ue=nn(o);if(_.state.next({isSubmitting:!0}),e.resolver){const{errors:se,values:ve}=await L();n.errors=se,ue=nn(ve)}else await H(i);if(u.disabled.size)for(const se of u.disabled)zt(ue,se);if(zt(n.errors,"root"),kn(n.errors)){_.state.next({errors:{}});try{await k(ue,X)}catch(se){fe=se}}else F&&await F({...n.errors},X),Se(),setTimeout(Se);if(_.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:kn(n.errors)&&!fe,submitCount:n.submitCount+1,errors:n.errors}),fe)throw fe},jn=(k,F={})=>{_e(i,k)&&(Ft(F.defaultValue)?I(k,nn(_e(a,k))):(I(k,F.defaultValue),wt(a,k,nn(F.defaultValue))),F.keepTouched||zt(n.touchedFields,k),F.keepDirty||(zt(n.dirtyFields,k),n.isDirty=F.defaultValue?Z(k,nn(_e(a,k))):Z()),F.keepError||(zt(n.errors,k),g.isValid&&w()),_.state.next({...n}))},Kt=(k,F={})=>{const X=k?nn(k):a,fe=nn(X),ue=kn(k),se=ue?a:fe;if(F.keepDefaultValues||(a=X),!F.keepValues){if(F.keepDirtyValues){const ve=new Set([...u.mount,...Object.keys(fl(a,o))]);for(const xe of Array.from(ve))_e(n.dirtyFields,xe)?wt(se,xe,_e(o,xe)):I(xe,_e(se,xe))}else{if(km&&Ft(k))for(const ve of u.mount){const xe=_e(i,ve);if(xe&&xe._f){const ke=Array.isArray(xe._f.refs)?xe._f.refs[0]:xe._f.ref;if(rd(ke)){const je=ke.closest("form");if(je){je.reset();break}}}}if(F.keepFieldsRef)for(const ve of u.mount)I(ve,_e(se,ve));else i={}}o=e.shouldUnregister?F.keepDefaultValues?nn(a):{}:nn(se),_.array.next({values:{...se}}),_.state.next({values:{...se}})}u={mount:F.keepDirtyValues?u.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},l.mount=!g.isValid||!!F.keepIsValid||!!F.keepDirtyValues,l.watch=!!e.shouldUnregister,_.state.next({submitCount:F.keepSubmitCount?n.submitCount:0,isDirty:ue?!1:F.keepDirty?n.isDirty:!!(F.keepDefaultValues&&!Zs(k,a)),isSubmitted:F.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:ue?{}:F.keepDirtyValues?F.keepDefaultValues&&o?fl(a,o):n.dirtyFields:F.keepDefaultValues&&k?fl(a,k):F.keepDirty?n.dirtyFields:{},touchedFields:F.keepTouched?n.touchedFields:{},errors:F.keepErrors?n.errors:{},isSubmitSuccessful:F.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:a})},ie=(k,F)=>Kt(yi(k)?k(o):k,F),ce=(k,F={})=>{const X=_e(i,k),fe=X&&X._f;if(fe){const ue=fe.refs?fe.refs[0]:fe.ref;ue.focus&&(ue.focus(),F.shouldSelect&&yi(ue.select)&&ue.select())}},ae=k=>{n={...n,...k}},Ve={control:{register:vt,unregister:pt,getFieldState:G,handleSubmit:Ye,setError:de,_subscribe:Te,_runSchema:L,_focusError:Se,_getWatch:q,_getDirty:Z,_setValid:w,_setFieldArray:C,_setDisabledField:Ne,_setErrors:O,_getFieldArray:ne,_reset:Kt,_resetDefaultValues:()=>yi(e.defaultValues)&&e.defaultValues().then(k=>{ie(k,e.resetOptions),_.state.next({isLoading:!1})}),_removeUnmounted:Q,_disableForm:dt,_subjects:_,_proxyFormState:g,get _fields(){return i},get _formValues(){return o},get _state(){return l},set _state(k){l=k},get _defaultValues(){return a},get _names(){return u},set _names(k){u=k},get _formState(){return n},get _options(){return e},set _options(k){e={...e,...k}}},subscribe:pe,trigger:ge,register:vt,handleSubmit:Ye,watch:me,setValue:I,getValues:j,reset:ie,resetField:jn,clearErrors:re,unregister:pt,setError:de,setFocus:ce,getFieldState:G};return{...Ve,formControl:Ve}}function Dd(t={}){const e=Pe.useRef(void 0),n=Pe.useRef(void 0),[i,a]=Pe.useState({isDirty:!1,isValidating:!1,isLoading:yi(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:yi(t.defaultValues)?void 0:t.defaultValues});if(!e.current)if(t.formControl)e.current={...t.formControl,formState:i},t.defaultValues&&!yi(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:l,...u}=kk(t);e.current={...u,formState:i}}const o=e.current.control;return o._options=t,vk(()=>{const l=o._subscribe({formState:o._proxyFormState,callback:()=>a({...o._formState}),reRenderRoot:!0});return a(u=>({...u,isReady:!0})),o._formState.isReady=!0,l},[o]),Pe.useEffect(()=>o._disableForm(t.disabled),[o,t.disabled]),Pe.useEffect(()=>{t.mode&&(o._options.mode=t.mode),t.reValidateMode&&(o._options.reValidateMode=t.reValidateMode)},[o,t.mode,t.reValidateMode]),Pe.useEffect(()=>{t.errors&&(o._setErrors(t.errors),o._focusError())},[o,t.errors]),Pe.useEffect(()=>{t.shouldUnregister&&o._subjects.state.next({values:o._getWatch()})},[o,t.shouldUnregister]),Pe.useEffect(()=>{if(o._proxyFormState.isDirty){const l=o._getDirty();l!==i.isDirty&&o._subjects.state.next({isDirty:l})}},[o,i.isDirty]),Pe.useEffect(()=>{t.values&&!Zs(t.values,n.current)?(o._reset(t.values,{keepFieldsRef:!0,...o._options.resetOptions}),n.current=t.values,a(l=>({...l}))):o._resetDefaultValues()},[o,t.values]),Pe.useEffect(()=>{o._state.mount||(o._setValid(),o._state.mount=!0),o._state.watch&&(o._state.watch=!1,o._subjects.state.next({...o._formState})),o._removeUnmounted()}),e.current.formState=pk(i,o),e.current}function Nk({machineToEdit:t}){const{selectedWorkCenter:e}=Ce(),{addMachine:n,updateMachine:i}=an(),a=!!t,o={department:t?.department||xt.MACHINE.DEPARTMENT,machine_type:t?.machine_type||"",machine_name:t?.machine_name||"",work_center:t?.work_center||(e===Me.BOTH?xt.MACHINE.WORK_CENTER:e),min_web_width:t?.min_web_width||xt.MACHINE.MIN_WEB_WIDTH,max_web_width:t?.max_web_width||xt.MACHINE.MAX_WEB_WIDTH,min_bag_height:t?.min_bag_height||xt.MACHINE.MIN_BAG_HEIGHT,max_bag_height:t?.max_bag_height||xt.MACHINE.MAX_BAG_HEIGHT,standard_speed:t?.standard_speed||"",setup_time_standard:t?.setup_time_standard||xt.MACHINE.SETUP_TIME_STANDARD,changeover_color:t?.changeover_color||xt.MACHINE.CHANGEOVER_COLOR,changeover_material:t?.changeover_material||xt.MACHINE.CHANGEOVER_MATERIAL,active_shifts:t?.active_shifts||xt.MACHINE.ACTIVE_SHIFTS,status:t?.status||xt.MACHINE.STATUS},{getValidMachineTypes:l}=zw(),{register:u,handleSubmit:d,formState:{errors:f,isSubmitting:g},watch:p,setValue:_,getValues:b}=Dd({defaultValues:o}),S=p("department");A.useEffect(()=>{l(S).includes(b("machine_type"))||_("machine_type","")},[S,l,b,_]);const w=C=>{const{value:T,checked:O}=C.target,M=b("active_shifts")||[];O?_("active_shifts",[...M,T]):_("active_shifts",M.filter(D=>D!==T))},x=async C=>{a?await i(t.id,C):await n(C)};return y.jsx("div",{className:"content-section",children:y.jsxs("form",{onSubmit:d(x),children:[y.jsxs("div",{className:"form-section",children:[y.jsx("h3",{className:"section-title",children:"Identificazione"}),y.jsxs("div",{className:"form-grid form-grid--4-cols",children:[y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"department",children:"Department *"}),y.jsxs("select",{id:"department",...u("department"),className:f.department?"error":"",children:[y.jsx("option",{value:Nt.PRINTING,children:Nt.PRINTING}),y.jsx("option",{value:Nt.PACKAGING,children:Nt.PACKAGING})]}),f.department&&y.jsx("span",{className:"error-message",children:f.department.message})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"machine_type",children:"Machine Type *"}),y.jsxs("select",{id:"machine_type",...u("machine_type"),className:f.machine_type?"error":"",children:[y.jsx("option",{value:"",children:"Seleziona tipo macchina"}),l(S).map(C=>y.jsx("option",{value:C,children:C},C))]}),f.machine_type&&y.jsx("span",{className:"error-message",children:f.machine_type.message})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"machine_name",children:"Machine Name *"}),y.jsx("input",{type:"text",id:"machine_name",...u("machine_name"),placeholder:"Nome descrittivo",className:f.machine_name?"error":""}),f.machine_name&&y.jsx("span",{className:"error-message",children:f.machine_name.message})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"work_center",children:"Work Center *"}),e===Me.BOTH?y.jsxs("select",{...u("work_center",{required:"Work center is required"}),id:"work_center",className:f.work_center?"error":"",children:[y.jsx("option",{value:"",children:"Seleziona un centro di lavoro"}),y.jsx("option",{value:Me.ZANICA,children:Me.ZANICA}),y.jsx("option",{value:Me.BUSTO_GAROLFO,children:Me.BUSTO_GAROLFO})]}):y.jsx("input",{type:"text",id:"work_center",value:e||"Nessun centro di lavoro selezionato",disabled:!0,className:"disabled-input",style:{backgroundColor:"#f5f5f5",color:"#666"}}),e===Me.BOTH?f.work_center&&y.jsx("span",{className:"error-message",children:f.work_center.message}):y.jsx("small",{style:{color:"#666",fontSize:"12px"},children:"Il centro di lavoro è impostato in base alla tua selezione di accesso"})]})]})]}),y.jsxs("div",{className:"form-section",children:[y.jsx("h3",{className:"section-title",children:"Capacità Tecniche"}),y.jsxs("div",{className:"form-grid form-grid--3-cols",children:[y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"min_web_width",children:"Min Web Width (mm)"}),y.jsx("input",{type:"number",id:"min_web_width",...u("min_web_width"),min:"0",step:"1",className:f.min_web_width?"error":""}),f.min_web_width&&y.jsx("span",{className:"error-message",children:f.min_web_width.message})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"max_web_width",children:"Max Web Width (mm) *"}),y.jsx("input",{type:"number",id:"max_web_width",...u("max_web_width"),min:"0",step:"1",className:f.max_web_width?"error":""}),f.max_web_width&&y.jsx("span",{className:"error-message",children:f.max_web_width.message})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"min_bag_height",children:"Min Bag Height (mm)"}),y.jsx("input",{type:"number",id:"min_bag_height",...u("min_bag_height"),min:"0",step:"1",className:f.min_bag_height?"error":""}),f.min_bag_height&&y.jsx("span",{className:"error-message",children:f.min_bag_height.message})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"max_bag_height",children:"Max Bag Height (mm) *"}),y.jsx("input",{type:"number",id:"max_bag_height",...u("max_bag_height"),min:"0",step:"1",className:f.max_bag_height?"error":""}),f.max_bag_height&&y.jsx("span",{className:"error-message",children:f.max_bag_height.message})]})]})]}),y.jsxs("div",{className:"form-section",children:[y.jsx("h3",{className:"section-title",children:"Performance"}),y.jsxs("div",{className:"form-grid form-grid--3-cols",children:[y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"standard_speed",children:"Standard Speed"}),y.jsx("input",{type:"number",id:"standard_speed",...u("standard_speed"),placeholder:"pz/h o mt/h",min:"0",step:"1",className:f.standard_speed?"error":""}),f.standard_speed&&y.jsx("span",{className:"error-message",children:f.standard_speed.message})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"setup_time_standard",children:"Setup Time Standard (h)"}),y.jsx("input",{type:"number",id:"setup_time_standard",...u("setup_time_standard"),min:"0",step:"0.1",className:f.setup_time_standard?"error":""}),f.setup_time_standard&&y.jsx("span",{className:"error-message",children:f.setup_time_standard.message})]}),S===Nt.PRINTING&&y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"changeover_color",children:"Changeover Color (h)"}),y.jsx("input",{type:"number",id:"changeover_color",...u("changeover_color"),min:"0",step:"0.1",className:f.changeover_color?"error":""}),f.changeover_color&&y.jsx("span",{className:"error-message",children:f.changeover_color.message})]}),S===Nt.PACKAGING&&y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"changeover_material",children:"Material Changeover (h)"}),y.jsx("input",{type:"number",id:"changeover_material",...u("changeover_material"),min:"0",step:"0.1",className:f.changeover_material?"error":""}),f.changeover_material&&y.jsx("span",{className:"error-message",children:f.changeover_material.message})]})]})]}),y.jsxs("div",{className:"form-section",children:[y.jsx("h3",{className:"section-title",children:"Disponibilità"}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{children:"Active Shifts"}),y.jsxs("div",{className:"checkbox-group",children:[y.jsxs("label",{children:[y.jsx("input",{type:"checkbox",value:ji.T1,checked:b("active_shifts")?.includes(ji.T1),onChange:w})," ",ji.T1]}),y.jsxs("label",{children:[y.jsx("input",{type:"checkbox",value:ji.T2,checked:b("active_shifts")?.includes(ji.T2),onChange:w})," ",ji.T2]}),y.jsxs("label",{children:[y.jsx("input",{type:"checkbox",value:ji.T3,checked:b("active_shifts")?.includes(ji.T3),onChange:w})," ",ji.T3]})]})]})]}),y.jsx("div",{className:"form-actions",style:{marginTop:"20px"},children:y.jsx("button",{type:"submit",className:"nav-btn today",disabled:g,children:g?a?"Aggiornamento Macchina...":"Aggiunta Macchina...":a?"Aggiorna Macchina":"Aggiungi Macchina"})})]})})}function u0(){const{id:t}=Cd(),e=aa(),{getMachineById:n}=an(),{selectedWorkCenter:i}=Ce(),{isLoading:a,isInitialized:o,init:l,cleanup:u}=Hi(),d=!!t,f=d?n(t):null;return A.useEffect(()=>(o||l(),()=>{u()}),[l,o,u]),A.useEffect(()=>{d&&!a&&!f&&e("/machinery",{replace:!0})},[d,a,f,e]),a?y.jsx("div",{children:"Caricamento..."}):d&&!f?y.jsx("div",{className:"error",children:"Macchina non trovata."}):i?y.jsxs("div",{className:"content-section",children:[y.jsx(Ss,{title:d?`Modifica Macchina: ${f?.machine_name}`:"Aggiungi Nuova Macchina"}),d&&y.jsx("div",{style:{margin:"8px 24px",display:"flex",justifyContent:"flex-end"},children:y.jsx(Cn,{to:`/machinery/${t}/calendar`,className:"nav-btn today",children:"Visualizza Calendario"})}),y.jsx(Nk,{machineToEdit:f})]}):y.jsx("div",{className:"error",children:"Seleziona un centro di lavoro per gestire le macchine."})}function jk({currentDate:t,currentView:e,onDateChange:n,onViewChange:i}){const a=()=>{n(new Date)},o=()=>{let d;e==="Month"?(d=new Date(t),d.setMonth(d.getMonth()-1)):e==="Week"?d=$l(t,-7):e==="Year"&&(d=new Date(t),d.setFullYear(d.getFullYear()-1)),n(d)},l=()=>{let d;e==="Month"?(d=new Date(t),d.setMonth(d.getMonth()+1)):e==="Week"?d=$l(t,7):e==="Year"&&(d=new Date(t),d.setFullYear(d.getFullYear()+1)),n(d)},u=()=>{if(e==="Month")return t.toLocaleDateString("it-IT",{month:"long",year:"numeric"});if(e==="Week"){const d=Aw(t),f=L1(t);return`${d.toLocaleDateString("it-IT",{month:"short",day:"numeric"})} - ${f.toLocaleDateString("it-IT",{month:"short",day:"numeric",year:"numeric"})}`}else if(e==="Year")return t.getFullYear().toString();return""};return y.jsxs("div",{className:"calendar-controls-container",children:[y.jsxs("div",{className:"calendar-navigation",children:[y.jsx("button",{className:"nav-btn today",onClick:o,"aria-label":"Previous",children:"← Precedente"}),y.jsx("button",{className:"nav-btn today",onClick:a,children:"Oggi"}),y.jsx("button",{className:"nav-btn today",onClick:l,"aria-label":"Next",children:"Successivo →"})]}),y.jsxs("div",{className:"calendar-view-selector",children:[y.jsx("h3",{children:u()}),y.jsxs("select",{value:e,onChange:d=>i(d.target.value),children:[y.jsx("option",{value:"Month",children:"Mese"}),y.jsx("option",{value:"Week",children:"Settimana"}),y.jsx("option",{value:"Year",children:"Anno"})]})]})]})}function Lk({machineId:t,currentDate:e,onSuccess:n}){const{setMachineUnavailability:i}=Fi(),{showAlert:a}=Ce(),{handleAsync:o}=ws("OffTimeForm"),l=w=>{const x={};if(w.startDate&&w.endDate){const C=new Date(w.startDate);new Date(w.endDate)<C&&(x.endDate={type:"validation",message:Nb.END_DATE_BEFORE_START}),w.startDate===w.endDate&&w.startTime&&w.endTime&&w.startTime>=w.endTime&&(x.endTime={type:"validation",message:Nb.END_TIME_BEFORE_START})}return{values:w,errors:Object.keys(x).length>0?x:{}}},u=async w=>{await o(async()=>{await i(t,w.startDate,w.endDate,w.startTime,w.endTime),a("Indisponibilità macchina impostata con successo!","success"),n&&n(),b()},{context:"Set Machine Unavailability",fallbackMessage:"Impostazione indisponibilità macchina fallita"})},{register:d,handleSubmit:f,formState:{errors:g,isSubmitting:p},setValue:_,reset:b}=Dd({defaultValues:{startDate:"",startTime:"",endDate:"",endTime:""},resolver:l});A.useEffect(()=>{const w=new Date,x=$l(w,1);_("startDate",Gt(w)),_("endDate",Gt(x)),_("startTime",xt.OFF_TIME.START_TIME),_("endTime",xt.OFF_TIME.END_TIME)},[e,_]);const S=w=>{const x=g[w];return x?y.jsx("span",{className:"error-message",style:{color:"red",fontSize:"12px",marginTop:"4px"},children:x.message}):null};return y.jsxs("div",{className:"off-time-section",children:[y.jsx("h3",{children:"Imposta Periodo di Non Disponibilità"}),y.jsxs("form",{onSubmit:f(u),className:"off-time-form",children:[y.jsxs("div",{className:"form-grid form-grid--4-cols",children:[y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"startDate",children:"Data Inizio"}),y.jsx("input",{type:"date",id:"startDate",...d("startDate"),className:`date-input ${g.startDate?"error":""}`}),S("startDate")]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"startTime",children:"Ora Inizio"}),y.jsx("input",{type:"time",id:"startTime",...d("startTime"),className:`time-input ${g.startTime?"error":""}`}),S("startTime")]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"endDate",children:"Data Fine"}),y.jsx("input",{type:"date",id:"endDate",...d("endDate"),className:`date-input ${g.endDate?"error":""}`}),S("endDate")]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"endTime",children:"Ora Fine"}),y.jsx("input",{type:"time",id:"endTime",...d("endTime"),className:`time-input ${g.endTime?"error":""}`}),S("endTime")]})]}),y.jsx("div",{className:"form-actions",children:y.jsx("button",{type:"submit",className:"nav-btn today",disabled:p,children:p?"Impostazione...":"Imposta Non Disponibilità"})})]})]})}function Pk({machineId:t,currentDate:e,currentView:n,refreshTrigger:i}){const[a,o]=A.useState(!1),[l,u]=A.useState({}),{machines:d}=an(),{odpOrders:f}=ut(),{machineAvailability:g,loadMachineAvailabilityForDateRange:p,toggleMachineHourAvailability:_}=Fi(),{showAlert:b}=Ce();ws("CalendarGrid");const S=d.find(L=>L.id===t),w=A.useMemo(()=>{if(!e)return{dates:[],dateStrings:[]};let L=[],B=[];if(n==="Month"){const H=e.getFullYear(),Q=e.getMonth(),Z=new Date(H,Q,1),q=new Date(H,Q+1,0),ne=new Date(Z);for(;ne<=q;)L.push(new Date(ne)),B.push(Gt(ne)),ne.setDate(ne.getDate()+1)}else if(n==="Week"){const H=Aw(e);for(let Q=0;Q<7;Q++){const Z=new Date(H);Z.setDate(H.getDate()+Q),L.push(Z),B.push(Gt(Z))}}else if(n==="Year"){const H=e.getFullYear();for(let Q=0;Q<12;Q++){const Z=new Date(H,Q+1,0).getDate();for(let q=1;q<=Z;q++){const ne=new Date(H,Q,q);L.push(ne),B.push(Gt(ne))}}}else L.push(e),B.push(Gt(e));return{dates:L,dateStrings:B}},[e,n]);A.useEffect(()=>{(async()=>{if(!(!t||!w.dateStrings.length)){o(!0);try{const B=w.dateStrings[0],H=w.dateStrings[w.dateStrings.length-1];await p(t,B,H)}catch(B){console.error("Failed to load machine availability data:",B)}finally{o(!1)}}})()},[t,w.dateStrings,p,i]);const x=A.useMemo(()=>S?f.filter(L=>L.status==="SCHEDULED"&&L.scheduled_machine_id===S.id):[],[S,f]),C=A.useCallback((L,B)=>!S||x.length===0?!1:x.some(H=>j1(H,L,B)),[S,x]),T=A.useCallback(L=>{const B=g[L];if(Array.isArray(B)){const H=B.find(Q=>Q.machine_id===t);if(H&&H.unavailable_hours)return Array.isArray(H.unavailable_hours)?H.unavailable_hours.map(Q=>Q.toString()):[]}return[]},[g,t]),O=A.useCallback(async(L,B)=>{if(C(L,B)){b("Cannot mark time slot as unavailable - it has scheduled tasks","error");return}if(!S)return;const H=`${L}-${B}`;u(Q=>({...Q,[H]:!0}));try{await _(S.id,L,B)}catch(Q){console.error("Failed to toggle machine hour availability:",Q),b("An unexpected error occurred.","error")}finally{u(Q=>({...Q,[H]:!1}))}},[C,b,S,_]),M=A.useCallback(()=>{const{dates:L}=w;if(L.length===0)return null;const B=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];return y.jsxs("div",{className:"calendar-month-grid",children:[y.jsx("div",{className:"calendar-week-header",children:B.map(H=>y.jsx("div",{className:"week-day-header",children:H},H))}),y.jsx("div",{className:"calendar-days-grid",children:L.map(H=>{const Q=Gt(H),Z=T(Q),q=H.getMonth()===e.getMonth(),ne=H.toDateString()===new Date().toDateString(),he=Array.from({length:24},(I,K)=>K).some(I=>C(Q,I));let oe="calendar-day";return q||(oe+=" other-month"),ne&&(oe+=" today"),Z.length>0&&(oe+=Z.length===24?" unavailable":" partially-unavailable"),he&&(oe+=" has-scheduled-tasks"),y.jsxs("div",{className:oe,children:[y.jsx("span",{className:"day-number",children:H.getDate()}),Z.length>0&&y.jsx("div",{className:"availability-indicator",children:Z.length===24?"All Day":`${Z.length}h`}),he&&y.jsx("div",{className:"scheduled-tasks-indicator",children:"📋"})]},Q)})})]})},[w,T,e,C]),D=A.useCallback(()=>{const{dates:L}=w;if(L.length===0)return null;const B=Array.from({length:24},(H,Q)=>Q);return y.jsxs("div",{className:"calendar-week-grid",children:[y.jsxs("div",{className:"time-column-header",children:[y.jsx("div",{className:"time-header-cell",children:"Time"}),L.map(H=>y.jsx("div",{className:"day-header-cell",children:H.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})},H.toISOString()))]}),B.map(H=>y.jsxs("div",{className:"time-row",children:[y.jsxs("div",{className:"time-label",children:[H.toString().padStart(2,"0"),":00"]}),L.map(Q=>{const Z=Gt(Q),q=T(Z),ne=H.toString(),he=q.includes(ne),oe=C(Z,H),I=`${Z}-${H}`,K=l[I];let le="time-slot";return he&&(le+=" unavailable"),oe&&(le+=" has-scheduled-task"),K&&(le+=" updating"),y.jsx("div",{className:le,onClick:()=>!K&&O(Z,H),children:y.jsx("div",{className:"time-slot-content",children:K?"...":he?"❌":oe?"📋":"✓"})},`${Z}-${H}`)})]},H))]})},[w,T,C,O,l]),U=A.useCallback(()=>{const L=e.getFullYear(),B=Array.from({length:12},(H,Q)=>Q);return y.jsx("div",{className:"calendar-year-grid",children:B.map(H=>{const Z=new Date(L,H,1).toLocaleDateString("en-US",{month:"short"}),q=new Date(L,H+1,0).getDate(),ne=new Date(L,H,1).getDay(),he=[];for(let oe=0;oe<ne;oe++)he.push(null);for(let oe=1;oe<=q;oe++)he.push(oe);return y.jsxs("div",{className:"month-mini-calendar",children:[y.jsx("h4",{children:Z}),y.jsxs("div",{className:"mini-month-grid",children:[["S","M","T","W","T","F","S"].map((oe,I)=>y.jsx("div",{className:"mini-day-header",children:oe},`${H}-${I}-${oe}`)),he.map((oe,I)=>{if(oe===null)return y.jsx("div",{className:"mini-day empty"},`empty-${H}-${I}`);const K=Gt(new Date(L,H,oe)),le=T(K),ge=le.length>0;return y.jsx("div",{className:`mini-day ${ge?"unavailable":""}`,title:ge?`${le.length} unavailable hours`:"Available",children:oe},K)})]})]},H)})})},[e,T]);return S?a?y.jsx("div",{className:"loading",children:"Loading calendar data..."}):y.jsxs("div",{className:"calendar-grid-container",children:[n==="Month"&&M(),n==="Week"&&D(),n==="Year"&&U()]}):y.jsx("div",{className:"loading",children:"Loading machine data..."})}function Ik(){const{machineId:t}=Cd(),[e,n]=A.useState(new Date),[i,a]=A.useState("Month"),[o,l]=A.useState(0),{getMachineById:u}=an(),{getLoadingState:d,getInitializationState:f}=Ce(),{init:g,cleanup:p}=Hi(),_=u(t),b=d(),S=f();if(A.useEffect(()=>(S||g(),()=>{p()}),[g,S,p]),b||!S)return y.jsx("div",{className:"content-section",children:y.jsx("div",{className:"loading",children:"Caricamento calendario macchina..."})});if(!_)return y.jsx("div",{className:"content-section",children:y.jsx("div",{className:"error",children:"Macchina non trovata"})});const w=T=>{n(T)},x=T=>{a(T)},C=()=>{l(T=>T+1)};return y.jsxs("div",{className:"content-section",children:[y.jsx(Ss,{title:"Calendario Disponibilità Macchina"}),y.jsx("div",{className:"machine-name-display",children:y.jsx("h3",{className:"machine-name-title",children:_.machine_name})}),y.jsx(jk,{currentDate:e,currentView:i,onDateChange:w,onViewChange:x}),y.jsx(Lk,{machineId:_.id,currentDate:e,onSuccess:C}),y.jsx(Pk,{machineId:_.id,currentDate:e,currentView:i,refreshTrigger:o})]})}function zk(){const{phases:t,updatePhase:e,removePhase:n}=si(),{selectedWorkCenter:i,isLoading:a,isInitialized:o,showAlert:l,showConfirmDialog:u}=Ce(),{init:d,cleanup:f}=Hi(),g=A.useMemo(()=>i?i===Me.BOTH?t:t.filter(x=>x.work_center===i):[],[t,i]),{validatePhase:p}=lk(),{handleAsync:_}=ws("PhasesListPage");A.useEffect(()=>(o||d(),()=>{f()}),[d,o,f]);const b=A.useMemo(()=>[{header:"ID Fase",accessorKey:"id"},{header:"Nome Fase",accessorKey:"name",cell:We},{header:"Centro di Lavoro",accessorKey:"work_center"},{header:"Reparto",accessorKey:"department"},{header:"Numero Persone",accessorKey:"numero_persone",cell:We},{header:"V Stampa",accessorKey:"v_stampa",cell:We},{header:"T Setup Stampa (h)",accessorKey:"t_setup_stampa",cell:We},{header:"Costo H Stampa",accessorKey:"costo_h_stampa",cell:We},{header:"V Conf",accessorKey:"v_conf",cell:We},{header:"T Setup Conf (h)",accessorKey:"t_setup_conf",cell:We},{header:"Costo H Conf",accessorKey:"costo_h_conf",cell:We},{header:"Contenuto Fase",accessorKey:"contenuto_fase",cell:We},{header:"Creato il",accessorKey:"created_at",cell:x=>new Date(x.getValue()).toLocaleDateString()},{header:"Aggiornato il",accessorKey:"updated_at",cell:x=>new Date(x.getValue()).toLocaleDateString()}],[]),S=async x=>{const C=p(x);if(C.length>0){l(`Errori di validazione:
${C.join(`
`)}`,"error");return}await _(()=>e(x.id,x),{context:"Aggiorna Fase",fallbackMessage:"Aggiornamento fase fallito"})},w=async x=>{u("Elimina Fase",`Sei sicuro di voler eliminare "${x.name}"? Questa azione non può essere annullata.`,async()=>{await _(()=>n(x.id),{context:"Elimina Fase",fallbackMessage:"Eliminazione fase fallita"})},"danger")};return a?y.jsx("div",{children:"Caricamento dati fasi..."}):i?y.jsxs("div",{className:"content-section",children:[y.jsx(Ss,{title:"Catalogo Fasi"}),y.jsx(Rm,{columns:b,data:g,onSaveRow:S,onDeleteRow:w})]}):y.jsx("div",{className:"error",children:"Seleziona un centro di lavoro per visualizzare i dati delle fasi."})}function Fk({phaseToEdit:t}){const{selectedWorkCenter:e}=Ce(),{addPhase:n,updatePhase:i}=si(),a=!!t,o={name:t?.name||"",department:t?.department||xt.PHASE.DEPARTMENT,numero_persone:t?.numero_persone||xt.PHASE.NUMERO_PERSONE,work_center:t?.work_center||(e===Me.BOTH?xt.PHASE.WORK_CENTER:e),v_stampa:t?.v_stampa||xt.PHASE.V_STAMPA,t_setup_stampa:t?.t_setup_stampa||xt.PHASE.T_SETUP_STAMPA,costo_h_stampa:t?.costo_h_stampa||xt.PHASE.COSTO_H_STAMPA,v_conf:t?.v_conf||xt.PHASE.V_CONF,t_setup_conf:t?.t_setup_conf||xt.PHASE.T_SETUP_CONF,costo_h_conf:t?.costo_h_conf||xt.PHASE.COSTO_H_CONF,contenuto_fase:t?.contenuto_fase||""},{register:l,handleSubmit:u,formState:{errors:d,isSubmitting:f},watch:g,setValue:p}=Dd({defaultValues:o}),_=g("department");A.useEffect(()=>{_===Nt.PRINTING&&(p("v_conf",0),p("t_setup_conf",0),p("costo_h_conf",0))},[_,p]);const b=w=>d[w]?y.jsx("span",{className:"error-message",style:{color:"red",fontSize:"12px",marginTop:"4px"},children:d[w].message}):null,S=async w=>{a?await i(t.id,w):await n(w)};return y.jsx("div",{className:"content-section",children:y.jsxs("form",{onSubmit:u(S),children:[y.jsxs("div",{className:"form-section",children:[y.jsx("h3",{className:"section-title",children:"Informazioni Fase"}),y.jsxs("div",{className:"form-grid form-grid--4-cols",children:[y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"name",children:"Nome Fase *"}),y.jsx("input",{type:"text",id:"name",...l("name"),placeholder:"es. Stampa Alta Velocità",className:d.name?"error":"",required:!0}),b("name")]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"department",children:"Tipo Fase *"}),y.jsxs("select",{id:"department",...l("department"),className:d.department?"error":"",children:[y.jsx("option",{value:Nt.PRINTING,children:Nt.PRINTING}),y.jsx("option",{value:Nt.PACKAGING,children:Nt.PACKAGING})]}),b("department")]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"numero_persone",children:"Numero di Persone Richieste *"}),y.jsx("input",{type:"number",id:"numero_persone",...l("numero_persone"),min:"1",step:"1",className:d.numero_persone?"error":""}),b("numero_persone")]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"work_center",children:"Centro di Lavoro *"}),e===Me.BOTH?y.jsxs("select",{...l("work_center",{required:"Work center is required"}),id:"work_center",className:d.work_center?"error":"",children:[y.jsx("option",{value:"",children:"Seleziona un centro di lavoro"}),y.jsx("option",{value:Me.ZANICA,children:Me.ZANICA}),y.jsx("option",{value:Me.BUSTO_GAROLFO,children:Me.BUSTO_GAROLFO})]}):y.jsx("input",{type:"text",id:"work_center",value:e||"Nessun centro di lavoro selezionato",disabled:!0,className:"disabled-input",style:{backgroundColor:"#f5f5f5",color:"#666"}}),e===Me.BOTH?d.work_center&&y.jsx("span",{className:"error-message",children:d.work_center.message}):y.jsx("small",{style:{color:"#666",fontSize:"12px"},children:"Il centro di lavoro è impostato in base alla tua selezione di accesso"})]})]})]}),_===Nt.PRINTING&&y.jsxs("div",{className:"form-section",children:[y.jsx("h3",{className:"section-title",children:"Parametri Stampa"}),y.jsxs("div",{className:"form-grid form-grid--3-cols",children:[y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"v_stampa",children:"Velocità Stampa (mt/h) *"}),y.jsx("input",{type:"number",id:"v_stampa",...l("v_stampa"),min:"0",step:"1",className:d.v_stampa?"error":""}),b("v_stampa")]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"t_setup_stampa",children:"Tempo Setup (ore)"}),y.jsx("input",{type:"number",id:"t_setup_stampa",...l("t_setup_stampa"),min:"0",step:"0.1",className:d.t_setup_stampa?"error":""}),b("t_setup_stampa")]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"costo_h_stampa",children:"Costo Orario (€/h)"}),y.jsx("input",{type:"number",id:"costo_h_stampa",...l("costo_h_stampa"),min:"0",step:"0.01",className:d.costo_h_stampa?"error":""}),b("costo_h_stampa")]})]})]}),_===Nt.PACKAGING&&y.jsxs("div",{className:"form-section",children:[y.jsx("h3",{className:"section-title",children:"Parametri Confezionamento"}),y.jsxs("div",{className:"form-grid form-grid--3-cols",children:[y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"v_conf",children:"Velocità Confezionamento (pz/h) *"}),y.jsx("input",{type:"number",id:"v_conf",...l("v_conf"),min:"0",step:"1",className:d.v_conf?"error":""}),b("v_conf")]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"t_setup_conf",children:"Tempo Setup (ore)"}),y.jsx("input",{type:"number",id:"t_setup_conf",...l("t_setup_conf"),min:"0",step:"0.1",className:d.t_setup_conf?"error":""}),b("t_setup_conf")]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"costo_h_conf",children:"Costo Orario (€/h)"}),y.jsx("input",{type:"number",id:"costo_h_conf",...l("costo_h_conf"),min:"0",step:"0.01",className:d.costo_h_conf?"error":""}),b("costo_h_conf")]})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"contenuto_fase",children:"Descrizione Contenuto Fase"}),y.jsx("textarea",{id:"contenuto_fase",...l("contenuto_fase"),rows:"3",placeholder:"Descrivi il contenuto della fase e i requisiti..."})]})]}),y.jsx("div",{className:"form-actions",style:{marginTop:"20px"},children:y.jsx("button",{type:"submit",className:"nav-btn today",disabled:f,children:f?a?"Aggiornamento Fase...":"Aggiunta Fase...":a?"Aggiorna Fase":"Aggiungi Fase"})})]})})}function d0(){const{id:t}=Cd(),e=aa(),{getPhaseById:n}=si(),{selectedWorkCenter:i}=Ce(),{isLoading:a,isInitialized:o,init:l,cleanup:u}=Hi(),d=!!t,f=d?n(t):null;return A.useEffect(()=>(o||l(),()=>{u()}),[l,o,u]),A.useEffect(()=>{d&&!a&&!f&&e("/phases",{replace:!0})},[d,a,f,e]),a?y.jsx("div",{children:"Caricamento..."}):d&&!f?y.jsx("div",{className:"error",children:"Fase non trovata."}):i?y.jsxs("div",{className:"content-section",children:[y.jsx(Ss,{title:d?`Modifica Fase: ${f?.name}`:"Aggiungi Nuova Fase"}),y.jsx(Fk,{phaseToEdit:f})]}):y.jsx("div",{className:"error",children:"Seleziona un centro di lavoro per gestire le fasi."})}function Uk(){const{odpOrders:t,updateOdpOrder:e,removeOdpOrder:n}=ut(),{selectedWorkCenter:i,isLoading:a,isInitialized:o,showAlert:l,showConfirmDialog:u}=Ce(),{init:d,cleanup:f}=Hi(),{machines:g}=an(),{phases:p}=si(),_=A.useMemo(()=>{if(!i)return[];let T=t;return i!==Me.BOTH&&(T=t.filter(O=>O.work_center===i)),T.map(O=>({...O,machine_name:O.scheduled_machine_id?g.find(M=>M.id===O.scheduled_machine_id)?.machine_name||"Macchina non trovata":"Non programmato",phase_name:O.fase?p.find(M=>M.id===O.fase)?.name||"Fase non trovata":"Fase non assegnata"}))},[t,i,g,p]),{validateOrder:b}=ok(),{handleAsync:S}=ws("BacklogListPage");A.useEffect(()=>(o||d(),()=>{f()}),[d,o,f]);const w=A.useMemo(()=>[{header:"Numero ODP",accessorKey:"odp_number",cell:We},{header:"Codice Articolo",accessorKey:"article_code",cell:We},{header:"Lotto Produzione",accessorKey:"production_lot",cell:We},{header:"Centro di Lavoro",accessorKey:"work_center"},{header:"Reparto",accessorKey:"department"},{header:"Nome Cliente",accessorKey:"nome_cliente",cell:We},{header:"Descrizione",accessorKey:"description",cell:We},{header:"Altezza Busta (mm)",accessorKey:"bag_height",cell:We},{header:"Larghezza Busta (mm)",accessorKey:"bag_width",cell:We},{header:"Passo Busta (mm)",accessorKey:"bag_step",cell:We},{header:"Lati Sigillati",accessorKey:"seal_sides"},{header:"Tipo Prodotto",accessorKey:"product_type"},{header:"Quantità",accessorKey:"quantity",cell:We},{header:"Quantità per Scatola",accessorKey:"quantity_per_box",cell:We},{header:"Quantità Completata",accessorKey:"quantity_completed",cell:We},{header:"Numero Scatole",accessorKey:"n_boxes"},{header:"Data Consegna",accessorKey:"delivery_date",cell:T=>T.getValue()?new Date(T.getValue()).toLocaleDateString():"Non impostata"},{header:"Inizio Programmato",accessorKey:"scheduled_start_time",cell:T=>T.getValue()?new Date(T.getValue()).toISOString().replace("T"," ").replace(".000Z",""):"Non programmato"},{header:"Fine Programmata",accessorKey:"scheduled_end_time",cell:T=>T.getValue()?new Date(T.getValue()).toISOString().replace("T"," ").replace(".000Z",""):"Non programmato"},{header:"Codice Cliente Interno",accessorKey:"internal_customer_code",cell:We},{header:"Codice Cliente Esterno",accessorKey:"external_customer_code",cell:We},{header:"Riferimento Ordine Cliente",accessorKey:"customer_order_ref",cell:We},{header:"ID Fase",accessorKey:"fase"},{header:"Nome Fase",accessorKey:"_phase_name"},{header:"Durata (ore)",accessorKey:"duration",cell:T=>{const O=T.getValue();return typeof O=="number"?O.toFixed(1):O}},{header:"Costo (€)",accessorKey:"cost",cell:T=>{const O=T.getValue();return typeof O=="number"?O.toFixed(1):O}},{header:"Priorità",accessorKey:"priority"},{header:"Stato",accessorKey:"status"},{header:"ID Macchina Programmata",accessorKey:"scheduled_machine_id"},{header:"Nome Macchina",accessorKey:"_machine_name"},{header:"Progresso (%)",accessorKey:"_progress"},{header:"Tempo Rimanente (ore)",accessorKey:"_time_remaining",cell:T=>{const O=T.getValue();return typeof O=="number"?O.toFixed(1):O}},{header:"Creato il",accessorKey:"created_at",cell:T=>new Date(T.getValue()).toLocaleDateString()},{header:"Aggiornato il",accessorKey:"updated_at",cell:T=>new Date(T.getValue()).toLocaleDateString()}],[]),x=async T=>{const O=b(T);if(O.length>0){l(`Errori di validazione:
${O.join(`
`)}`,"error");return}const{machine_name:M,phase_name:D,progress:U,time_remaining:L,...B}=T;await S(()=>e(T.id,B),{context:"Aggiorna Ordine",fallbackMessage:"Aggiornamento ordine fallito"})},C=async T=>{u("Elimina Ordine",`Sei sicuro di voler eliminare "${T.odp_number}"? Questa azione non può essere annullata.`,async()=>{await S(()=>n(T.id),{context:"Elimina Ordine",fallbackMessage:"Eliminazione ordine fallita"})},"danger")};return a?y.jsx("div",{children:"Caricamento dati backlog..."}):i?y.jsxs("div",{className:"content-section",children:[y.jsx(Ss,{title:"Backlog Produzione"}),y.jsx(Rm,{columns:w,data:_,onSaveRow:x,onDeleteRow:C})]}):y.jsx("div",{className:"error",children:"Seleziona un centro di lavoro per visualizzare i dati del backlog."})}const Hk=({onSuccess:t,orderToEdit:e})=>{const{addOdpOrder:n,updateOdpOrder:i}=ut(),{showAlert:a,selectedWorkCenter:o,showConflictDialog:l}=Ce(),{scheduleTask:u}=Fi(),{calculateProductionMetrics:d,validatePhaseParameters:f,autoDetermineWorkCenter:g,autoDetermineDepartment:p}=zw(),{handleAsync:_}=ws("BacklogForm"),[b,S]=A.useState(null),w=!!e,x=A.useMemo(()=>({odp_number:e?.odp_number||"",article_code:e?.article_code||"",production_lot:e?.production_lot||"",work_center:e?.work_center||(o===Me.BOTH?"":o||""),nome_cliente:e?.nome_cliente||"",description:e?.description||"",delivery_date:e?.delivery_date||"",bag_height:e?.bag_height||"",bag_width:e?.bag_width||"",bag_step:e?.bag_step||"",seal_sides:e?.seal_sides||xt.ORDER.SEAL_SIDES,product_type:e?.product_type||"",quantity:e?.quantity||"",quantity_per_box:e?.quantity_per_box||"",quantity_completed:e?.quantity_completed||xt.ORDER.QUANTITY_COMPLETED,internal_customer_code:e?.internal_customer_code||"",external_customer_code:e?.external_customer_code||"",customer_order_ref:e?.customer_order_ref||"",department:e?.department||"",fase:e?.fase||""}),[o,e]),{register:C,handleSubmit:T,formState:{errors:O,isSubmitting:M},watch:D,setValue:U,getValues:L,reset:B,clearErrors:H}=Dd({defaultValues:x}),Q=D("article_code"),Z=D("department"),q=D("work_center"),{phaseSearch:ne,setPhaseSearch:he,isDropdownVisible:oe,setIsDropdownVisible:I,selectedPhase:K,setSelectedPhase:le,filteredPhases:ge,editablePhaseParams:j,setEditablePhaseParams:G,handlePhaseParamChange:re,handlePhaseSelect:de,handleBlur:me}=ck(Z,q);A.useEffect(()=>{if(Q){const Se=p(Q),dt=g(Q);U("department",Se),o===Me.BOTH&&U("work_center",dt),U("fase",""),he(""),le(null),G({}),S(null)}},[Q,p,g,U,o,he,le,G]);const Te=async Se=>{if(!b||!b.totals){a("Calcola le metriche di produzione prima di aggiungere al backlog.","warning");return}if(typeof b.totals.duration!="number"||typeof b.totals.cost!="number"){a("Risultati del calcolo non validi. Ricalcola le metriche di produzione.","error");return}await _(async()=>{const dt={...Se,duration:b.totals.duration,cost:b.totals.cost,status:w?e.status:"NOT SCHEDULED"};let Ye=null;if(w?Ye=await i(e.id,dt):Ye=await n(dt),w&&Ye?.scheduled_machine_id&&Ye?.scheduled_start_time){const jn=new Date(Ye.scheduled_start_time),Kt=Ye.time_remaining||Ye.duration||b.totals.duration||1,ie=new Date(jn.getTime()+Kt*60*60*1e3),ce={machine:Ye.scheduled_machine_id,start_time:jn.toISOString(),end_time:ie.toISOString()},ae=await u(Ye.id,ce);ae?.conflict?l(ae):ae?.error&&a(ae.error,"error")}t&&t(),B(x),he(""),le(null),G({}),S(null)},{context:w?"Update Order":"Add Order",fallbackMessage:w?"Aggiornamento ordine fallito":"Aggiunta ordine al backlog fallita"})},pe=Se=>{de(Se,U,H),S(null)},pt=()=>{if(!K||!L("quantity")||!L("bag_step")){a("Seleziona una fase e inserisci Quantità e Passo Busta per calcolare.","warning");return}const Se={...K,...j},dt=f(Se);if(!dt.isValid){a(dt.error,"error"),S(null);return}const Ye=d(Se,L("quantity"),L("bag_step"));if(!Ye){a("Errore nel calcolo. Verifica che tutti i parametri della fase siano impostati correttamente.","error"),S(null);return}if(typeof Ye.totals?.duration!="number"||typeof Ye.totals?.cost!="number"){a("Risultati del calcolo non validi. Verifica i parametri della fase.","error"),S(null);return}S(Ye)},Ne=Se=>O[Se]?y.jsx("span",{className:"error-message",style:{color:"red",fontSize:"12px",marginTop:"4px"},children:O[Se].message}):null,vt=Se=>{const dt=j[Se],Ye=K[Se];return dt??(Ye||"")};return y.jsx("div",{className:"content-section",children:y.jsxs("form",{onSubmit:T(Te),children:[y.jsxs("div",{className:"form-section",children:[y.jsx("h3",{className:"section-title",children:"Identificazione"}),y.jsxs("div",{className:"form-grid form-grid--3-cols",children:[y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"odp_number",children:"ODP Number *"}),y.jsx("input",{type:"text",id:"odp_number",...C("odp_number",{required:"ODP Number is required"}),placeholder:"Numero ODP",className:O.odp_number?"error":""}),Ne("odp_number")]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"article_code",children:"Article Code *"}),y.jsx("input",{type:"text",id:"article_code",...C("article_code",{required:"Article Code is required"}),placeholder:"Codice Articolo",className:O.article_code?"error":""}),Ne("article_code")]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"production_lot",children:"External Article Code *"}),y.jsx("input",{type:"text",id:"production_lot",...C("production_lot",{required:"External Article Code is required"}),placeholder:"Codice Articolo Esterno",className:O.production_lot?"error":""}),Ne("production_lot")]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"work_center",children:"Work Center"}),o===Me.BOTH?y.jsxs("select",{...C("work_center",{required:"Work center is required"}),id:"work_center",className:O.work_center?"error":"",children:[y.jsx("option",{value:"",children:"Seleziona un centro di lavoro"}),y.jsx("option",{value:Me.ZANICA,children:Me.ZANICA}),y.jsx("option",{value:Me.BUSTO_GAROLFO,children:Me.BUSTO_GAROLFO})]}):y.jsx("input",{type:"text",id:"work_center",value:o||"Nessun centro di lavoro selezionato",disabled:!0,className:"disabled-input",style:{backgroundColor:"#f5f5f5",color:"#666"}}),o===Me.BOTH?O.work_center&&y.jsx("span",{className:"error-message",children:O.work_center.message}):y.jsx("small",{style:{color:"#666",fontSize:"12px"},children:"Il centro di lavoro è impostato in base alla tua selezione di accesso"})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"nome_cliente",children:"Customer Name"}),y.jsx("input",{type:"text",id:"nome_cliente",...C("nome_cliente"),placeholder:"Nome Cliente"})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"description",children:"Description"}),y.jsx("textarea",{id:"description",...C("description"),placeholder:"Descrizione",rows:"2"})]})]})]}),y.jsxs("div",{className:"form-section",children:[y.jsx("h3",{className:"section-title",children:"Specifiche Tecniche"}),y.jsxs("div",{className:"form-grid form-grid--3-cols",children:[y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"bag_height",children:"Bag Height (mm) *"}),y.jsx("input",{type:"number",id:"bag_height",...C("bag_height",{required:"Bag Height is required",min:{value:0,message:"Bag Height must be at least 0"}}),placeholder:"Altezza Busta",min:"0",step:"1",className:O.bag_height?"error":""}),Ne("bag_height")]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"bag_width",children:"Bag Width (mm) *"}),y.jsx("input",{type:"number",id:"bag_width",...C("bag_width",{required:"Bag Width is required",min:{value:0,message:"Bag Width must be at least 0"}}),placeholder:"Larghezza Busta",min:"0",step:"1",className:O.bag_width?"error":""}),Ne("bag_width")]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"bag_step",children:"Bag Step (mm) *"}),y.jsx("input",{type:"number",id:"bag_step",...C("bag_step",{required:"Bag Step is required",min:{value:0,message:"Bag Step must be at least 0"}}),placeholder:"Passo Busta",min:"0",step:"1",className:O.bag_step?"error":""}),Ne("bag_step")]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"seal_sides",children:"Seal Sides"}),y.jsxs("select",{id:"seal_sides",...C("seal_sides"),children:[y.jsx("option",{value:Bl.THREE,children:"3 sides"}),y.jsx("option",{value:Bl.FOUR,children:"4 sides"})]})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"product_type",children:"Product Type *"}),y.jsxs("select",{id:"product_type",...C("product_type",{required:"Product Type is required"}),className:O.product_type?"error":"",children:[y.jsx("option",{value:"",children:"Seleziona tipo prodotto"}),y.jsx("option",{value:Gr.CREMA,children:"Crema"}),y.jsx("option",{value:Gr.LIQUIDO,children:"Liquido"}),y.jsx("option",{value:Gr.POLVERI,children:"Polveri"})]}),Ne("product_type")]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"quantity",children:"Quantity *"}),y.jsx("input",{type:"number",id:"quantity",...C("quantity",{required:"Quantity is required",min:{value:0,message:"Quantity must be at least 0"}}),placeholder:"Quantità",min:"0",step:"1",className:O.quantity?"error":""}),Ne("quantity")]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"quantity_per_box",children:"Qty per Box"}),y.jsx("input",{type:"number",id:"quantity_per_box",...C("quantity_per_box",{min:{value:0,message:"Quantity per Box must be at least 0"}}),placeholder:"Q.tà per Scatola",min:"0",step:"1"})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"quantity_completed",children:"Qty Completed"}),y.jsx("input",{type:"number",id:"quantity_completed",...C("quantity_completed",{min:{value:0,message:"Quantity Completed must be at least 0"}}),placeholder:"Q.tà Completata",min:"0",step:"1",className:O.quantity_completed?"error":""}),Ne("quantity_completed")]})]})]}),y.jsxs("div",{className:"form-section",children:[y.jsx("h3",{className:"section-title",children:"Dati Commerciali"}),y.jsxs("div",{className:"form-grid form-grid--3-cols",children:[y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"internal_customer_code",children:"FLEXI Lot"}),y.jsx("input",{type:"text",id:"internal_customer_code",...C("internal_customer_code"),placeholder:"Lotto FLEXI"})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"external_customer_code",children:"Customer Lot"}),y.jsx("input",{type:"text",id:"external_customer_code",...C("external_customer_code"),placeholder:"Lotto Cliente"})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"customer_order_ref",children:"Customer Ref"}),y.jsx("input",{type:"text",id:"customer_order_ref",...C("customer_order_ref"),placeholder:"Riferimento Cliente"})]})]})]}),y.jsxs("div",{className:"form-section",children:[y.jsx("h3",{className:"section-title",children:"Dati Lavorazione & Pianificazione"}),y.jsxs("div",{className:"form-grid form-grid--3-cols",children:[y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"department",children:"Department"}),y.jsx("input",{type:"text",id:"department",...C("department"),placeholder:"Reparto",readOnly:!0})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"phase_search",children:"Search Production Phase *"}),y.jsxs("div",{className:"searchable-dropdown",children:[y.jsx("input",{type:"text",id:"phase_search",value:ne,onChange:Se=>he(Se.target.value),onFocus:()=>I(!0),onBlur:me,placeholder:"Cerca Fase Produzione",className:O.fase?"error":""}),y.jsx("input",{type:"hidden",...C("fase",{required:"Production Phase is required"})}),Ne("fase"),oe&&ge.length>0&&y.jsx("div",{className:"dropdown-options",children:ge.map(Se=>y.jsxs("div",{className:"dropdown-option",onMouseDown:()=>pe(Se),children:[y.jsx("span",{className:"phase-name",children:Se.name}),y.jsx("span",{className:"phase-description",children:Se.contenuto_fase||"Nessuna descrizione"})]},Se.id))})]})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"delivery_date",children:"Delivery Date *"}),y.jsx("input",{type:"datetime-local",id:"delivery_date",...C("delivery_date",{required:"Delivery Date is required"}),className:O.delivery_date?"error":""}),Ne("delivery_date")]})]})]}),K&&y.jsxs("div",{className:"form-section",children:[y.jsx("h3",{className:"section-title",children:"Parametri Fase Selezionata"}),y.jsx("div",{className:"form-grid form-grid--3-cols",children:K.department===Nt.PRINTING?y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"v_stampa",children:"Print Speed:"}),y.jsx("input",{type:"number",id:"v_stampa",value:vt("v_stampa"),onChange:Se=>re("v_stampa",Se.target.value),placeholder:"Velocità Stampa",min:"0"}),y.jsx("span",{className:"unit-label",children:"mt/h"})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"t_setup_stampa",children:"Print Setup:"}),y.jsx("input",{type:"number",id:"t_setup_stampa",value:vt("t_setup_stampa"),onChange:Se=>re("t_setup_stampa",Se.target.value),placeholder:"Tempo Setup",min:"0",step:"0.1"}),y.jsx("span",{className:"unit-label",children:"h"})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"costo_h_stampa",children:"Costo Stampa:"}),y.jsx("input",{type:"number",id:"costo_h_stampa",value:vt("costo_h_stampa"),onChange:Se=>re("costo_h_stampa",Se.target.value),placeholder:"Costo Orario",min:"0",step:"0.01"}),y.jsx("span",{className:"unit-label",children:"€/h"})]})]}):y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"v_conf",children:"Velocità Confezionamento:"}),y.jsx("input",{type:"number",id:"v_conf",value:vt("v_conf"),onChange:Se=>re("v_conf",Se.target.value),placeholder:"Velocità Confezionamento",min:"0"}),y.jsx("span",{className:"unit-label",children:"pz/h"})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"t_setup_conf",children:"Setup Confezionamento:"}),y.jsx("input",{type:"number",id:"t_setup_conf",value:vt("t_setup_conf"),onChange:Se=>re("t_setup_conf",Se.target.value),placeholder:"Tempo Setup",min:"0",step:"0.1"}),y.jsx("span",{className:"unit-label",children:"h"})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"costo_h_conf",children:"Costo Confezionamento:"}),y.jsx("input",{type:"number",id:"costo_h_conf",value:vt("costo_h_conf"),onChange:Se=>re("costo_h_conf",Se.target.value),placeholder:"Costo Orario",min:"0",step:"0.01"}),y.jsx("span",{className:"unit-label",children:"€/h"})]})]})})]}),b&&b.totals&&y.jsxs("div",{className:"form-section",children:[y.jsx("h3",{className:"section-title",children:"Risultati Calcolo Produzione"}),y.jsxs("div",{className:"form-grid form-grid--2-cols",children:[y.jsxs("div",{className:"form-group",children:[y.jsx("label",{children:"Durata Totale (ore):"}),y.jsx("div",{className:"result-value",children:typeof b.totals.duration=="number"?b.totals.duration.toFixed(2):"Errore calcolo"})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{children:"Costo Totale (€):"}),y.jsx("div",{className:"result-value",children:typeof b.totals.cost=="number"?b.totals.cost.toFixed(2):"Errore calcolo"})]})]})]}),y.jsxs("div",{className:"form-actions",style:{marginTop:"20px"},children:[y.jsx("button",{type:"button",className:"nav-btn today",onClick:pt,disabled:!K,children:"Calcola"}),y.jsx("button",{type:"submit",className:"nav-btn today",disabled:!b||M,children:M?w?"Aggiornamento Ordine...":"Aggiunta al Backlog...":w?"Aggiorna Ordine":"Aggiungi al Backlog"})]})]})})};function h0(){const{id:t}=Cd(),e=aa(),{getOdpOrderById:n}=ut(),{selectedWorkCenter:i}=Ce(),{isLoading:a,isInitialized:o,init:l,cleanup:u}=Hi(),d=!!t,f=d?n(t):null;return A.useEffect(()=>(o||l(),()=>{u()}),[l,o,u]),A.useEffect(()=>{d&&!a&&!f&&e("/backlog",{replace:!0})},[d,a,f,e]),a?y.jsx("div",{children:"Caricamento..."}):d&&!f?y.jsx("div",{className:"error",children:"Ordine non trovato."}):i?y.jsxs("div",{className:"content-section",children:[y.jsx(Ss,{title:d?`Modifica Ordine: ${f?.odp_number}`:"Aggiungi Nuovo Ordine"}),y.jsx(Hk,{onSuccess:void 0,orderToEdit:f})]}):y.jsx("div",{className:"error",children:"Seleziona un centro di lavoro per gestire gli ordini del backlog."})}const Md=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function ao(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function Im(t){return"nodeType"in t}function Tn(t){var e,n;return t?ao(t)?t:Im(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function zm(t){const{Document:e}=Tn(t);return t instanceof e}function rc(t){return ao(t)?!1:t instanceof Tn(t).HTMLElement}function ex(t){return t instanceof Tn(t).SVGElement}function ro(t){return t?ao(t)?t.document:Im(t)?zm(t)?t:rc(t)||ex(t)?t.ownerDocument:document:document:document}const _s=Md?A.useLayoutEffect:A.useEffect;function kd(t){const e=A.useRef(t);return _s(()=>{e.current=t}),A.useCallback(function(){for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return e.current==null?void 0:e.current(...i)},[])}function Bk(){const t=A.useRef(null),e=A.useCallback((i,a)=>{t.current=setInterval(i,a)},[]),n=A.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,n]}function Vl(t,e){e===void 0&&(e=[t]);const n=A.useRef(t);return _s(()=>{n.current!==t&&(n.current=t)},e),n}function oc(t,e){const n=A.useRef();return A.useMemo(()=>{const i=t(n.current);return n.current=i,i},[...e])}function cd(t){const e=kd(t),n=A.useRef(null),i=A.useCallback(a=>{a!==n.current&&e?.(a,n.current),n.current=a},[]);return[n,i]}function ud(t){const e=A.useRef();return A.useEffect(()=>{e.current=t},[t]),e.current}let _g={};function Nd(t,e){return A.useMemo(()=>{if(e)return e;const n=_g[t]==null?0:_g[t]+1;return _g[t]=n,t+"-"+n},[t,e])}function tx(t){return function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];return i.reduce((o,l)=>{const u=Object.entries(l);for(const[d,f]of u){const g=o[d];g!=null&&(o[d]=g+t*f)}return o},{...e})}}const Yr=tx(1),dd=tx(-1);function $k(t){return"clientX"in t&&"clientY"in t}function Fm(t){if(!t)return!1;const{KeyboardEvent:e}=Tn(t.target);return e&&t instanceof e}function Vk(t){if(!t)return!1;const{TouchEvent:e}=Tn(t.target);return e&&t instanceof e}function hd(t){if(Vk(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return $k(t)?{x:t.clientX,y:t.clientY}:null}const ql=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[ql.Translate.toString(t),ql.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:i}=t;return e+" "+n+"ms "+i}}}),f0="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function qk(t){return t.matches(f0)?t:t.querySelector(f0)}const Gk={display:"none"};function Yk(t){let{id:e,value:n}=t;return Pe.createElement("div",{id:e,style:Gk},n)}function Wk(t){let{id:e,announcement:n,ariaLiveType:i="assertive"}=t;const a={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Pe.createElement("div",{id:e,style:a,role:"status","aria-live":i,"aria-atomic":!0},n)}function Kk(){const[t,e]=A.useState("");return{announce:A.useCallback(i=>{i!=null&&e(i)},[]),announcement:t}}const nx=A.createContext(null);function Xk(t){const e=A.useContext(nx);A.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function Qk(){const[t]=A.useState(()=>new Set),e=A.useCallback(i=>(t.add(i),()=>t.delete(i)),[t]);return[A.useCallback(i=>{let{type:a,event:o}=i;t.forEach(l=>{var u;return(u=l[a])==null?void 0:u.call(l,o)})},[t]),e]}const Zk={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},Jk={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function eN(t){let{announcements:e=Jk,container:n,hiddenTextDescribedById:i,screenReaderInstructions:a=Zk}=t;const{announce:o,announcement:l}=Kk(),u=Nd("DndLiveRegion"),[d,f]=A.useState(!1);if(A.useEffect(()=>{f(!0)},[]),Xk(A.useMemo(()=>({onDragStart(p){let{active:_}=p;o(e.onDragStart({active:_}))},onDragMove(p){let{active:_,over:b}=p;e.onDragMove&&o(e.onDragMove({active:_,over:b}))},onDragOver(p){let{active:_,over:b}=p;o(e.onDragOver({active:_,over:b}))},onDragEnd(p){let{active:_,over:b}=p;o(e.onDragEnd({active:_,over:b}))},onDragCancel(p){let{active:_,over:b}=p;o(e.onDragCancel({active:_,over:b}))}}),[o,e])),!d)return null;const g=Pe.createElement(Pe.Fragment,null,Pe.createElement(Yk,{id:i,value:a.draggable}),Pe.createElement(Wk,{id:u,announcement:l}));return n?bl.createPortal(g,n):g}var Yt;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(Yt||(Yt={}));function fd(){}const wi=Object.freeze({x:0,y:0});function tN(t,e){const n=hd(t);if(!n)return"0 0";const i={x:(n.x-e.left)/e.width*100,y:(n.y-e.top)/e.height*100};return i.x+"% "+i.y+"%"}function nN(t,e){let{data:{value:n}}=t,{data:{value:i}}=e;return i-n}function iN(t,e){if(!t||t.length===0)return null;const[n]=t;return n[e]}function sN(t,e){const n=Math.max(e.top,t.top),i=Math.max(e.left,t.left),a=Math.min(e.left+e.width,t.left+t.width),o=Math.min(e.top+e.height,t.top+t.height),l=a-i,u=o-n;if(i<a&&n<o){const d=e.width*e.height,f=t.width*t.height,g=l*u,p=g/(d+f-g);return Number(p.toFixed(4))}return 0}const aN=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:i}=t;const a=[];for(const o of i){const{id:l}=o,u=n.get(l);if(u){const d=sN(u,e);d>0&&a.push({id:l,data:{droppableContainer:o,value:d}})}}return a.sort(nN)};function rN(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function ix(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:wi}function oN(t){return function(n){for(var i=arguments.length,a=new Array(i>1?i-1:0),o=1;o<i;o++)a[o-1]=arguments[o];return a.reduce((l,u)=>({...l,top:l.top+t*u.y,bottom:l.bottom+t*u.y,left:l.left+t*u.x,right:l.right+t*u.x}),{...n})}}const lN=oN(1);function sx(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function cN(t,e,n){const i=sx(e);if(!i)return t;const{scaleX:a,scaleY:o,x:l,y:u}=i,d=t.left-l-(1-a)*parseFloat(n),f=t.top-u-(1-o)*parseFloat(n.slice(n.indexOf(" ")+1)),g=a?t.width/a:t.width,p=o?t.height/o:t.height;return{width:g,height:p,top:f,right:d+g,bottom:f+p,left:d}}const uN={ignoreTransform:!1};function lc(t,e){e===void 0&&(e=uN);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:f,transformOrigin:g}=Tn(t).getComputedStyle(t);f&&(n=cN(n,f,g))}const{top:i,left:a,width:o,height:l,bottom:u,right:d}=n;return{top:i,left:a,width:o,height:l,bottom:u,right:d}}function g0(t){return lc(t,{ignoreTransform:!0})}function dN(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function hN(t,e){return e===void 0&&(e=Tn(t).getComputedStyle(t)),e.position==="fixed"}function fN(t,e){e===void 0&&(e=Tn(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(a=>{const o=e[a];return typeof o=="string"?n.test(o):!1})}function Um(t,e){const n=[];function i(a){if(e!=null&&n.length>=e||!a)return n;if(zm(a)&&a.scrollingElement!=null&&!n.includes(a.scrollingElement))return n.push(a.scrollingElement),n;if(!rc(a)||ex(a)||n.includes(a))return n;const o=Tn(t).getComputedStyle(a);return a!==t&&fN(a,o)&&n.push(a),hN(a,o)?n:i(a.parentNode)}return t?i(t):n}function ax(t){const[e]=Um(t,1);return e??null}function bg(t){return!Md||!t?null:ao(t)?t:Im(t)?zm(t)||t===ro(t).scrollingElement?window:rc(t)?t:null:null}function rx(t){return ao(t)?t.scrollX:t.scrollLeft}function ox(t){return ao(t)?t.scrollY:t.scrollTop}function Jg(t){return{x:rx(t),y:ox(t)}}var sn;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(sn||(sn={}));function lx(t){return!Md||!t?!1:t===document.scrollingElement}function cx(t){const e={x:0,y:0},n=lx(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},i={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},a=t.scrollTop<=e.y,o=t.scrollLeft<=e.x,l=t.scrollTop>=i.y,u=t.scrollLeft>=i.x;return{isTop:a,isLeft:o,isBottom:l,isRight:u,maxScroll:i,minScroll:e}}const gN={x:.2,y:.2};function mN(t,e,n,i,a){let{top:o,left:l,right:u,bottom:d}=n;i===void 0&&(i=10),a===void 0&&(a=gN);const{isTop:f,isBottom:g,isLeft:p,isRight:_}=cx(t),b={x:0,y:0},S={x:0,y:0},w={height:e.height*a.y,width:e.width*a.x};return!f&&o<=e.top+w.height?(b.y=sn.Backward,S.y=i*Math.abs((e.top+w.height-o)/w.height)):!g&&d>=e.bottom-w.height&&(b.y=sn.Forward,S.y=i*Math.abs((e.bottom-w.height-d)/w.height)),!_&&u>=e.right-w.width?(b.x=sn.Forward,S.x=i*Math.abs((e.right-w.width-u)/w.width)):!p&&l<=e.left+w.width&&(b.x=sn.Backward,S.x=i*Math.abs((e.left+w.width-l)/w.width)),{direction:b,speed:S}}function pN(t){if(t===document.scrollingElement){const{innerWidth:o,innerHeight:l}=window;return{top:0,left:0,right:o,bottom:l,width:o,height:l}}const{top:e,left:n,right:i,bottom:a}=t.getBoundingClientRect();return{top:e,left:n,right:i,bottom:a,width:t.clientWidth,height:t.clientHeight}}function ux(t){return t.reduce((e,n)=>Yr(e,Jg(n)),wi)}function vN(t){return t.reduce((e,n)=>e+rx(n),0)}function yN(t){return t.reduce((e,n)=>e+ox(n),0)}function dx(t,e){if(e===void 0&&(e=lc),!t)return;const{top:n,left:i,bottom:a,right:o}=e(t);ax(t)&&(a<=0||o<=0||n>=window.innerHeight||i>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const _N=[["x",["left","right"],vN],["y",["top","bottom"],yN]];class Hm{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const i=Um(n),a=ux(i);this.rect={...e},this.width=e.width,this.height=e.height;for(const[o,l,u]of _N)for(const d of l)Object.defineProperty(this,d,{get:()=>{const f=u(i),g=a[o]-f;return this.rect[d]+g},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class kl{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var i;return(i=this.target)==null?void 0:i.removeEventListener(...n)})},this.target=e}add(e,n,i){var a;(a=this.target)==null||a.addEventListener(e,n,i),this.listeners.push([e,n,i])}}function bN(t){const{EventTarget:e}=Tn(t);return t instanceof e?t:ro(t)}function Sg(t,e){const n=Math.abs(t.x),i=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+i**2)>e:"x"in e&&"y"in e?n>e.x&&i>e.y:"x"in e?n>e.x:"y"in e?i>e.y:!1}var ni;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(ni||(ni={}));function m0(t){t.preventDefault()}function SN(t){t.stopPropagation()}var ct;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(ct||(ct={}));const hx={start:[ct.Space,ct.Enter],cancel:[ct.Esc],end:[ct.Space,ct.Enter,ct.Tab]},wN=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case ct.Right:return{...n,x:n.x+25};case ct.Left:return{...n,x:n.x-25};case ct.Down:return{...n,y:n.y+25};case ct.Up:return{...n,y:n.y-25}}};class fx{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new kl(ro(n)),this.windowListeners=new kl(Tn(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(ni.Resize,this.handleCancel),this.windowListeners.add(ni.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(ni.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,i=e.node.current;i&&dx(i),n(wi)}handleKeyDown(e){if(Fm(e)){const{active:n,context:i,options:a}=this.props,{keyboardCodes:o=hx,coordinateGetter:l=wN,scrollBehavior:u="smooth"}=a,{code:d}=e;if(o.end.includes(d)){this.handleEnd(e);return}if(o.cancel.includes(d)){this.handleCancel(e);return}const{collisionRect:f}=i.current,g=f?{x:f.left,y:f.top}:wi;this.referenceCoordinates||(this.referenceCoordinates=g);const p=l(e,{active:n,context:i.current,currentCoordinates:g});if(p){const _=dd(p,g),b={x:0,y:0},{scrollableAncestors:S}=i.current;for(const w of S){const x=e.code,{isTop:C,isRight:T,isLeft:O,isBottom:M,maxScroll:D,minScroll:U}=cx(w),L=pN(w),B={x:Math.min(x===ct.Right?L.right-L.width/2:L.right,Math.max(x===ct.Right?L.left:L.left+L.width/2,p.x)),y:Math.min(x===ct.Down?L.bottom-L.height/2:L.bottom,Math.max(x===ct.Down?L.top:L.top+L.height/2,p.y))},H=x===ct.Right&&!T||x===ct.Left&&!O,Q=x===ct.Down&&!M||x===ct.Up&&!C;if(H&&B.x!==p.x){const Z=w.scrollLeft+_.x,q=x===ct.Right&&Z<=D.x||x===ct.Left&&Z>=U.x;if(q&&!_.y){w.scrollTo({left:Z,behavior:u});return}q?b.x=w.scrollLeft-Z:b.x=x===ct.Right?w.scrollLeft-D.x:w.scrollLeft-U.x,b.x&&w.scrollBy({left:-b.x,behavior:u});break}else if(Q&&B.y!==p.y){const Z=w.scrollTop+_.y,q=x===ct.Down&&Z<=D.y||x===ct.Up&&Z>=U.y;if(q&&!_.x){w.scrollTo({top:Z,behavior:u});return}q?b.y=w.scrollTop-Z:b.y=x===ct.Down?w.scrollTop-D.y:w.scrollTop-U.y,b.y&&w.scrollBy({top:-b.y,behavior:u});break}}this.handleMove(e,Yr(dd(p,this.referenceCoordinates),b))}}}handleMove(e,n){const{onMove:i}=this.props;e.preventDefault(),i(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}fx.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:i=hx,onActivation:a}=e,{active:o}=n;const{code:l}=t.nativeEvent;if(i.start.includes(l)){const u=o.activatorNode.current;return u&&t.target!==u?!1:(t.preventDefault(),a?.({event:t.nativeEvent}),!0)}return!1}}];function p0(t){return!!(t&&"distance"in t)}function v0(t){return!!(t&&"delay"in t)}class Bm{constructor(e,n,i){var a;i===void 0&&(i=bN(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:o}=e,{target:l}=o;this.props=e,this.events=n,this.document=ro(l),this.documentListeners=new kl(this.document),this.listeners=new kl(i),this.windowListeners=new kl(Tn(l)),this.initialCoordinates=(a=hd(o))!=null?a:wi,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:i}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(ni.Resize,this.handleCancel),this.windowListeners.add(ni.DragStart,m0),this.windowListeners.add(ni.VisibilityChange,this.handleCancel),this.windowListeners.add(ni.ContextMenu,m0),this.documentListeners.add(ni.Keydown,this.handleKeydown),n){if(i!=null&&i({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(v0(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(p0(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,n){const{active:i,onPending:a}=this.props;a(i,e,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(ni.Click,SN,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(ni.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:i,initialCoordinates:a,props:o}=this,{onMove:l,options:{activationConstraint:u}}=o;if(!a)return;const d=(n=hd(e))!=null?n:wi,f=dd(a,d);if(!i&&u){if(p0(u)){if(u.tolerance!=null&&Sg(f,u.tolerance))return this.handleCancel();if(Sg(f,u.distance))return this.handleStart()}if(v0(u)&&Sg(f,u.tolerance))return this.handleCancel();this.handlePending(u,f);return}e.cancelable&&e.preventDefault(),l(d)}handleEnd(){const{onAbort:e,onEnd:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleCancel(){const{onAbort:e,onCancel:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleKeydown(e){e.code===ct.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const xN={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class gx extends Bm{constructor(e){const{event:n}=e,i=ro(n.target);super(e,xN,i)}}gx.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:i}=e;return!n.isPrimary||n.button!==0?!1:(i?.({event:n}),!0)}}];const CN={move:{name:"mousemove"},end:{name:"mouseup"}};var em;(function(t){t[t.RightClick=2]="RightClick"})(em||(em={}));class EN extends Bm{constructor(e){super(e,CN,ro(e.event.target))}}EN.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:i}=e;return n.button===em.RightClick?!1:(i?.({event:n}),!0)}}];const wg={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class TN extends Bm{constructor(e){super(e,wg)}static setup(){return window.addEventListener(wg.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(wg.move.name,e)};function e(){}}}TN.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:i}=e;const{touches:a}=n;return a.length>1?!1:(i?.({event:n}),!0)}}];var Nl;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(Nl||(Nl={}));var gd;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(gd||(gd={}));function ON(t){let{acceleration:e,activator:n=Nl.Pointer,canScroll:i,draggingRect:a,enabled:o,interval:l=5,order:u=gd.TreeOrder,pointerCoordinates:d,scrollableAncestors:f,scrollableAncestorRects:g,delta:p,threshold:_}=t;const b=RN({delta:p,disabled:!o}),[S,w]=Bk(),x=A.useRef({x:0,y:0}),C=A.useRef({x:0,y:0}),T=A.useMemo(()=>{switch(n){case Nl.Pointer:return d?{top:d.y,bottom:d.y,left:d.x,right:d.x}:null;case Nl.DraggableRect:return a}},[n,a,d]),O=A.useRef(null),M=A.useCallback(()=>{const U=O.current;if(!U)return;const L=x.current.x*C.current.x,B=x.current.y*C.current.y;U.scrollBy(L,B)},[]),D=A.useMemo(()=>u===gd.TreeOrder?[...f].reverse():f,[u,f]);A.useEffect(()=>{if(!o||!f.length||!T){w();return}for(const U of D){if(i?.(U)===!1)continue;const L=f.indexOf(U),B=g[L];if(!B)continue;const{direction:H,speed:Q}=mN(U,B,T,e,_);for(const Z of["x","y"])b[Z][H[Z]]||(Q[Z]=0,H[Z]=0);if(Q.x>0||Q.y>0){w(),O.current=U,S(M,l),x.current=Q,C.current=H;return}}x.current={x:0,y:0},C.current={x:0,y:0},w()},[e,M,i,w,o,l,JSON.stringify(T),JSON.stringify(b),S,f,D,g,JSON.stringify(_)])}const AN={x:{[sn.Backward]:!1,[sn.Forward]:!1},y:{[sn.Backward]:!1,[sn.Forward]:!1}};function RN(t){let{delta:e,disabled:n}=t;const i=ud(e);return oc(a=>{if(n||!i||!a)return AN;const o={x:Math.sign(e.x-i.x),y:Math.sign(e.y-i.y)};return{x:{[sn.Backward]:a.x[sn.Backward]||o.x===-1,[sn.Forward]:a.x[sn.Forward]||o.x===1},y:{[sn.Backward]:a.y[sn.Backward]||o.y===-1,[sn.Forward]:a.y[sn.Forward]||o.y===1}}},[n,e,i])}function DN(t,e){const n=e!=null?t.get(e):void 0,i=n?n.node.current:null;return oc(a=>{var o;return e==null?null:(o=i??a)!=null?o:null},[i,e])}function MN(t,e){return A.useMemo(()=>t.reduce((n,i)=>{const{sensor:a}=i,o=a.activators.map(l=>({eventName:l.eventName,handler:e(l.handler,i)}));return[...n,...o]},[]),[t,e])}var Gl;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(Gl||(Gl={}));var tm;(function(t){t.Optimized="optimized"})(tm||(tm={}));const y0=new Map;function kN(t,e){let{dragging:n,dependencies:i,config:a}=e;const[o,l]=A.useState(null),{frequency:u,measure:d,strategy:f}=a,g=A.useRef(t),p=x(),_=Vl(p),b=A.useCallback(function(C){C===void 0&&(C=[]),!_.current&&l(T=>T===null?C:T.concat(C.filter(O=>!T.includes(O))))},[_]),S=A.useRef(null),w=oc(C=>{if(p&&!n)return y0;if(!C||C===y0||g.current!==t||o!=null){const T=new Map;for(let O of t){if(!O)continue;if(o&&o.length>0&&!o.includes(O.id)&&O.rect.current){T.set(O.id,O.rect.current);continue}const M=O.node.current,D=M?new Hm(d(M),M):null;O.rect.current=D,D&&T.set(O.id,D)}return T}return C},[t,o,n,p,d]);return A.useEffect(()=>{g.current=t},[t]),A.useEffect(()=>{p||b()},[n,p]),A.useEffect(()=>{o&&o.length>0&&l(null)},[JSON.stringify(o)]),A.useEffect(()=>{p||typeof u!="number"||S.current!==null||(S.current=setTimeout(()=>{b(),S.current=null},u))},[u,p,b,...i]),{droppableRects:w,measureDroppableContainers:b,measuringScheduled:o!=null};function x(){switch(f){case Gl.Always:return!1;case Gl.BeforeDragging:return n;default:return!n}}}function $m(t,e){return oc(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function NN(t,e){return $m(t,e)}function jN(t){let{callback:e,disabled:n}=t;const i=kd(e),a=A.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:o}=window;return new o(i)},[i,n]);return A.useEffect(()=>()=>a?.disconnect(),[a]),a}function jd(t){let{callback:e,disabled:n}=t;const i=kd(e),a=A.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:o}=window;return new o(i)},[n]);return A.useEffect(()=>()=>a?.disconnect(),[a]),a}function LN(t){return new Hm(lc(t),t)}function _0(t,e,n){e===void 0&&(e=LN);const[i,a]=A.useState(null);function o(){a(d=>{if(!t)return null;if(t.isConnected===!1){var f;return(f=d??n)!=null?f:null}const g=e(t);return JSON.stringify(d)===JSON.stringify(g)?d:g})}const l=jN({callback(d){if(t)for(const f of d){const{type:g,target:p}=f;if(g==="childList"&&p instanceof HTMLElement&&p.contains(t)){o();break}}}}),u=jd({callback:o});return _s(()=>{o(),t?(u?.observe(t),l?.observe(document.body,{childList:!0,subtree:!0})):(u?.disconnect(),l?.disconnect())},[t]),i}function PN(t){const e=$m(t);return ix(t,e)}const b0=[];function IN(t){const e=A.useRef(t),n=oc(i=>t?i&&i!==b0&&t&&e.current&&t.parentNode===e.current.parentNode?i:Um(t):b0,[t]);return A.useEffect(()=>{e.current=t},[t]),n}function zN(t){const[e,n]=A.useState(null),i=A.useRef(t),a=A.useCallback(o=>{const l=bg(o.target);l&&n(u=>u?(u.set(l,Jg(l)),new Map(u)):null)},[]);return A.useEffect(()=>{const o=i.current;if(t!==o){l(o);const u=t.map(d=>{const f=bg(d);return f?(f.addEventListener("scroll",a,{passive:!0}),[f,Jg(f)]):null}).filter(d=>d!=null);n(u.length?new Map(u):null),i.current=t}return()=>{l(t),l(o)};function l(u){u.forEach(d=>{const f=bg(d);f?.removeEventListener("scroll",a)})}},[a,t]),A.useMemo(()=>t.length?e?Array.from(e.values()).reduce((o,l)=>Yr(o,l),wi):ux(t):wi,[t,e])}function S0(t,e){e===void 0&&(e=[]);const n=A.useRef(null);return A.useEffect(()=>{n.current=null},e),A.useEffect(()=>{const i=t!==wi;i&&!n.current&&(n.current=t),!i&&n.current&&(n.current=null)},[t]),n.current?dd(t,n.current):wi}function FN(t){A.useEffect(()=>{if(!Md)return;const e=t.map(n=>{let{sensor:i}=n;return i.setup==null?void 0:i.setup()});return()=>{for(const n of e)n?.()}},t.map(e=>{let{sensor:n}=e;return n}))}function UN(t,e){return A.useMemo(()=>t.reduce((n,i)=>{let{eventName:a,handler:o}=i;return n[a]=l=>{o(l,e)},n},{}),[t,e])}function mx(t){return A.useMemo(()=>t?dN(t):null,[t])}const w0=[];function HN(t,e){e===void 0&&(e=lc);const[n]=t,i=mx(n?Tn(n):null),[a,o]=A.useState(w0);function l(){o(()=>t.length?t.map(d=>lx(d)?i:new Hm(e(d),d)):w0)}const u=jd({callback:l});return _s(()=>{u?.disconnect(),l(),t.forEach(d=>u?.observe(d))},[t]),a}function px(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return rc(e)?e:t}function BN(t){let{measure:e}=t;const[n,i]=A.useState(null),a=A.useCallback(f=>{for(const{target:g}of f)if(rc(g)){i(p=>{const _=e(g);return p?{...p,width:_.width,height:_.height}:_});break}},[e]),o=jd({callback:a}),l=A.useCallback(f=>{const g=px(f);o?.disconnect(),g&&o?.observe(g),i(g?e(g):null)},[e,o]),[u,d]=cd(l);return A.useMemo(()=>({nodeRef:u,rect:n,setRef:d}),[n,u,d])}const $N=[{sensor:gx,options:{}},{sensor:fx,options:{}}],VN={current:{}},Zu={draggable:{measure:g0},droppable:{measure:g0,strategy:Gl.WhileDragging,frequency:tm.Optimized},dragOverlay:{measure:lc}};class jl extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,i;return(n=(i=this.get(e))==null?void 0:i.node.current)!=null?n:void 0}}const qN={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new jl,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:fd},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Zu,measureDroppableContainers:fd,windowRect:null,measuringScheduled:!1},vx={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:fd,draggableNodes:new Map,over:null,measureDroppableContainers:fd},cc=A.createContext(vx),yx=A.createContext(qN);function GN(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new jl}}}function YN(t,e){switch(e.type){case Yt.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case Yt.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case Yt.DragEnd:case Yt.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Yt.RegisterDroppable:{const{element:n}=e,{id:i}=n,a=new jl(t.droppable.containers);return a.set(i,n),{...t,droppable:{...t.droppable,containers:a}}}case Yt.SetDroppableDisabled:{const{id:n,key:i,disabled:a}=e,o=t.droppable.containers.get(n);if(!o||i!==o.key)return t;const l=new jl(t.droppable.containers);return l.set(n,{...o,disabled:a}),{...t,droppable:{...t.droppable,containers:l}}}case Yt.UnregisterDroppable:{const{id:n,key:i}=e,a=t.droppable.containers.get(n);if(!a||i!==a.key)return t;const o=new jl(t.droppable.containers);return o.delete(n),{...t,droppable:{...t.droppable,containers:o}}}default:return t}}function WN(t){let{disabled:e}=t;const{active:n,activatorEvent:i,draggableNodes:a}=A.useContext(cc),o=ud(i),l=ud(n?.id);return A.useEffect(()=>{if(!e&&!i&&o&&l!=null){if(!Fm(o)||document.activeElement===o.target)return;const u=a.get(l);if(!u)return;const{activatorNode:d,node:f}=u;if(!d.current&&!f.current)return;requestAnimationFrame(()=>{for(const g of[d.current,f.current]){if(!g)continue;const p=qk(g);if(p){p.focus();break}}})}},[i,e,a,l,o]),null}function _x(t,e){let{transform:n,...i}=e;return t!=null&&t.length?t.reduce((a,o)=>o({transform:a,...i}),n):n}function KN(t){return A.useMemo(()=>({draggable:{...Zu.draggable,...t?.draggable},droppable:{...Zu.droppable,...t?.droppable},dragOverlay:{...Zu.dragOverlay,...t?.dragOverlay}}),[t?.draggable,t?.droppable,t?.dragOverlay])}function XN(t){let{activeNode:e,measure:n,initialRect:i,config:a=!0}=t;const o=A.useRef(!1),{x:l,y:u}=typeof a=="boolean"?{x:a,y:a}:a;_s(()=>{if(!l&&!u||!e){o.current=!1;return}if(o.current||!i)return;const f=e?.node.current;if(!f||f.isConnected===!1)return;const g=n(f),p=ix(g,i);if(l||(p.x=0),u||(p.y=0),o.current=!0,Math.abs(p.x)>0||Math.abs(p.y)>0){const _=ax(f);_&&_.scrollBy({top:p.y,left:p.x})}},[e,l,u,i,n])}const Ld=A.createContext({...wi,scaleX:1,scaleY:1});var Xs;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(Xs||(Xs={}));const QN=A.memo(function(e){var n,i,a,o;let{id:l,accessibility:u,autoScroll:d=!0,children:f,sensors:g=$N,collisionDetection:p=aN,measuring:_,modifiers:b,...S}=e;const w=A.useReducer(YN,void 0,GN),[x,C]=w,[T,O]=Qk(),[M,D]=A.useState(Xs.Uninitialized),U=M===Xs.Initialized,{draggable:{active:L,nodes:B,translate:H},droppable:{containers:Q}}=x,Z=L!=null?B.get(L):null,q=A.useRef({initial:null,translated:null}),ne=A.useMemo(()=>{var Ot;return L!=null?{id:L,data:(Ot=Z?.data)!=null?Ot:VN,rect:q}:null},[L,Z]),he=A.useRef(null),[oe,I]=A.useState(null),[K,le]=A.useState(null),ge=Vl(S,Object.values(S)),j=Nd("DndDescribedBy",l),G=A.useMemo(()=>Q.getEnabled(),[Q]),re=KN(_),{droppableRects:de,measureDroppableContainers:me,measuringScheduled:Te}=kN(G,{dragging:U,dependencies:[H.x,H.y],config:re.droppable}),pe=DN(B,L),pt=A.useMemo(()=>K?hd(K):null,[K]),Ne=lo(),vt=NN(pe,re.draggable.measure);XN({activeNode:L!=null?B.get(L):null,config:Ne.layoutShiftCompensation,initialRect:vt,measure:re.draggable.measure});const Se=_0(pe,re.draggable.measure,vt),dt=_0(pe?pe.parentElement:null),Ye=A.useRef({activatorEvent:null,active:null,activeNode:pe,collisionRect:null,collisions:null,droppableRects:de,draggableNodes:B,draggingNode:null,draggingNodeRect:null,droppableContainers:Q,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),jn=Q.getNodeFor((n=Ye.current.over)==null?void 0:n.id),Kt=BN({measure:re.dragOverlay.measure}),ie=(i=Kt.nodeRef.current)!=null?i:pe,ce=U?(a=Kt.rect)!=null?a:Se:null,ae=!!(Kt.nodeRef.current&&Kt.rect),we=PN(ae?null:Se),Ve=mx(ie?Tn(ie):null),k=IN(U?jn??pe:null),F=HN(k),X=_x(b,{transform:{x:H.x-we.x,y:H.y-we.y,scaleX:1,scaleY:1},activatorEvent:K,active:ne,activeNodeRect:Se,containerNodeRect:dt,draggingNodeRect:ce,over:Ye.current.over,overlayNodeRect:Kt.rect,scrollableAncestors:k,scrollableAncestorRects:F,windowRect:Ve}),fe=pt?Yr(pt,H):null,ue=zN(k),se=S0(ue),ve=S0(ue,[Se]),xe=Yr(X,se),ke=ce?lN(ce,X):null,je=ne&&ke?p({active:ne,collisionRect:ke,droppableRects:de,droppableContainers:G,pointerCoordinates:fe}):null,Bi=iN(je,"id"),[Ut,Va]=A.useState(null),Ci=ae?X:Yr(X,ve),Ei=rN(Ci,(o=Ut?.rect)!=null?o:null,Se),Ln=A.useRef(null),Ti=A.useCallback((Ot,bn)=>{let{sensor:dn,options:ci}=bn;if(he.current==null)return;const hn=B.get(he.current);if(!hn)return;const on=Ot.nativeEvent,Pn=new dn({active:he.current,activeNode:hn,event:on,options:ci,context:Ye,onAbort(ht){if(!B.get(ht))return;const{onDragAbort:_t}=ge.current,fn={id:ht};_t?.(fn),T({type:"onDragAbort",event:fn})},onPending(ht,yt,_t,fn){if(!B.get(ht))return;const{onDragPending:ca}=ge.current,Oi={id:ht,constraint:yt,initialCoordinates:_t,offset:fn};ca?.(Oi),T({type:"onDragPending",event:Oi})},onStart(ht){const yt=he.current;if(yt==null)return;const _t=B.get(yt);if(!_t)return;const{onDragStart:fn}=ge.current,Vi={activatorEvent:on,active:{id:yt,data:_t.data,rect:q}};bl.unstable_batchedUpdates(()=>{fn?.(Vi),D(Xs.Initializing),C({type:Yt.DragStart,initialCoordinates:ht,active:yt}),T({type:"onDragStart",event:Vi}),I(Ln.current),le(on)})},onMove(ht){C({type:Yt.DragMove,coordinates:ht})},onEnd:xs(Yt.DragEnd),onCancel:xs(Yt.DragCancel)});Ln.current=Pn;function xs(ht){return async function(){const{active:_t,collisions:fn,over:Vi,scrollAdjustedTranslate:ca}=Ye.current;let Oi=null;if(_t&&ca){const{cancelDrop:Cs}=ge.current;Oi={activatorEvent:on,active:_t,collisions:fn,delta:ca,over:Vi},ht===Yt.DragEnd&&typeof Cs=="function"&&await Promise.resolve(Cs(Oi))&&(ht=Yt.DragCancel)}he.current=null,bl.unstable_batchedUpdates(()=>{C({type:ht}),D(Xs.Uninitialized),Va(null),I(null),le(null),Ln.current=null;const Cs=ht===Yt.DragEnd?"onDragEnd":"onDragCancel";if(Oi){const qi=ge.current[Cs];qi?.(Oi),T({type:Cs,event:Oi})}})}}},[B]),$i=A.useCallback((Ot,bn)=>(dn,ci)=>{const hn=dn.nativeEvent,on=B.get(ci);if(he.current!==null||!on||hn.dndKit||hn.defaultPrevented)return;const Pn={active:on};Ot(dn,bn.options,Pn)===!0&&(hn.dndKit={capturedBy:bn.sensor},he.current=ci,Ti(dn,bn))},[B,Ti]),la=MN(g,$i);FN(g),_s(()=>{Se&&M===Xs.Initializing&&D(Xs.Initialized)},[Se,M]),A.useEffect(()=>{const{onDragMove:Ot}=ge.current,{active:bn,activatorEvent:dn,collisions:ci,over:hn}=Ye.current;if(!bn||!dn)return;const on={active:bn,activatorEvent:dn,collisions:ci,delta:{x:xe.x,y:xe.y},over:hn};bl.unstable_batchedUpdates(()=>{Ot?.(on),T({type:"onDragMove",event:on})})},[xe.x,xe.y]),A.useEffect(()=>{const{active:Ot,activatorEvent:bn,collisions:dn,droppableContainers:ci,scrollAdjustedTranslate:hn}=Ye.current;if(!Ot||he.current==null||!bn||!hn)return;const{onDragOver:on}=ge.current,Pn=ci.get(Bi),xs=Pn&&Pn.rect.current?{id:Pn.id,rect:Pn.rect.current,data:Pn.data,disabled:Pn.disabled}:null,ht={active:Ot,activatorEvent:bn,collisions:dn,delta:{x:hn.x,y:hn.y},over:xs};bl.unstable_batchedUpdates(()=>{Va(xs),on?.(ht),T({type:"onDragOver",event:ht})})},[Bi]),_s(()=>{Ye.current={activatorEvent:K,active:ne,activeNode:pe,collisionRect:ke,collisions:je,droppableRects:de,draggableNodes:B,draggingNode:ie,draggingNodeRect:ce,droppableContainers:Q,over:Ut,scrollableAncestors:k,scrollAdjustedTranslate:xe},q.current={initial:ce,translated:ke}},[ne,pe,je,ke,B,ie,ce,de,Q,Ut,k,xe]),ON({...Ne,delta:H,draggingRect:ke,pointerCoordinates:fe,scrollableAncestors:k,scrollableAncestorRects:F});const dc=A.useMemo(()=>({active:ne,activeNode:pe,activeNodeRect:Se,activatorEvent:K,collisions:je,containerNodeRect:dt,dragOverlay:Kt,draggableNodes:B,droppableContainers:Q,droppableRects:de,over:Ut,measureDroppableContainers:me,scrollableAncestors:k,scrollableAncestorRects:F,measuringConfiguration:re,measuringScheduled:Te,windowRect:Ve}),[ne,pe,Se,K,je,dt,Kt,B,Q,de,Ut,me,k,F,re,Te,Ve]),hc=A.useMemo(()=>({activatorEvent:K,activators:la,active:ne,activeNodeRect:Se,ariaDescribedById:{draggable:j},dispatch:C,draggableNodes:B,over:Ut,measureDroppableContainers:me}),[K,la,ne,Se,C,j,B,Ut,me]);return Pe.createElement(nx.Provider,{value:O},Pe.createElement(cc.Provider,{value:hc},Pe.createElement(yx.Provider,{value:dc},Pe.createElement(Ld.Provider,{value:Ei},f)),Pe.createElement(WN,{disabled:u?.restoreFocus===!1})),Pe.createElement(eN,{...u,hiddenTextDescribedById:j}));function lo(){const Ot=oe?.autoScrollEnabled===!1,bn=typeof d=="object"?d.enabled===!1:d===!1,dn=U&&!Ot&&!bn;return typeof d=="object"?{...d,enabled:dn}:{enabled:dn}}}),ZN=A.createContext(null),x0="button",JN="Draggable";function tz(t){let{id:e,data:n,disabled:i=!1,attributes:a}=t;const o=Nd(JN),{activators:l,activatorEvent:u,active:d,activeNodeRect:f,ariaDescribedById:g,draggableNodes:p,over:_}=A.useContext(cc),{role:b=x0,roleDescription:S="draggable",tabIndex:w=0}=a??{},x=d?.id===e,C=A.useContext(x?Ld:ZN),[T,O]=cd(),[M,D]=cd(),U=UN(l,e),L=Vl(n);_s(()=>(p.set(e,{id:e,key:o,node:T,activatorNode:M,data:L}),()=>{const H=p.get(e);H&&H.key===o&&p.delete(e)}),[p,e]);const B=A.useMemo(()=>({role:b,tabIndex:w,"aria-disabled":i,"aria-pressed":x&&b===x0?!0:void 0,"aria-roledescription":S,"aria-describedby":g.draggable}),[i,b,w,x,S,g.draggable]);return{active:d,activatorEvent:u,activeNodeRect:f,attributes:B,isDragging:x,listeners:i?void 0:U,node:T,over:_,setNodeRef:O,setActivatorNodeRef:D,transform:C}}function ej(){return A.useContext(yx)}const tj="Droppable",nj={timeout:25};function nz(t){let{data:e,disabled:n=!1,id:i,resizeObserverConfig:a}=t;const o=Nd(tj),{active:l,dispatch:u,over:d,measureDroppableContainers:f}=A.useContext(cc),g=A.useRef({disabled:n}),p=A.useRef(!1),_=A.useRef(null),b=A.useRef(null),{disabled:S,updateMeasurementsFor:w,timeout:x}={...nj,...a},C=Vl(w??i),T=A.useCallback(()=>{if(!p.current){p.current=!0;return}b.current!=null&&clearTimeout(b.current),b.current=setTimeout(()=>{f(Array.isArray(C.current)?C.current:[C.current]),b.current=null},x)},[x]),O=jd({callback:T,disabled:S||!l}),M=A.useCallback((B,H)=>{O&&(H&&(O.unobserve(H),p.current=!1),B&&O.observe(B))},[O]),[D,U]=cd(M),L=Vl(e);return A.useEffect(()=>{!O||!D.current||(O.disconnect(),p.current=!1,O.observe(D.current))},[D,O]),A.useEffect(()=>(u({type:Yt.RegisterDroppable,element:{id:i,key:o,disabled:n,node:D,rect:_,data:L}}),()=>u({type:Yt.UnregisterDroppable,key:o,id:i})),[i]),A.useEffect(()=>{n!==g.current.disabled&&(u({type:Yt.SetDroppableDisabled,id:i,key:o,disabled:n}),g.current.disabled=n)},[i,o,n,u]),{active:l,rect:_,isOver:d?.id===i,node:D,over:d,setNodeRef:U}}function ij(t){let{animation:e,children:n}=t;const[i,a]=A.useState(null),[o,l]=A.useState(null),u=ud(n);return!n&&!i&&u&&a(u),_s(()=>{if(!o)return;const d=i?.key,f=i?.props.id;if(d==null||f==null){a(null);return}Promise.resolve(e(f,o)).then(()=>{a(null)})},[e,i,o]),Pe.createElement(Pe.Fragment,null,n,i?A.cloneElement(i,{ref:l}):null)}const sj={x:0,y:0,scaleX:1,scaleY:1};function aj(t){let{children:e}=t;return Pe.createElement(cc.Provider,{value:vx},Pe.createElement(Ld.Provider,{value:sj},e))}const rj={position:"fixed",touchAction:"none"},oj=t=>Fm(t)?"transform 250ms ease":void 0,lj=A.forwardRef((t,e)=>{let{as:n,activatorEvent:i,adjustScale:a,children:o,className:l,rect:u,style:d,transform:f,transition:g=oj}=t;if(!u)return null;const p=a?f:{...f,scaleX:1,scaleY:1},_={...rj,width:u.width,height:u.height,top:u.top,left:u.left,transform:ql.Transform.toString(p),transformOrigin:a&&i?tN(i,u):void 0,transition:typeof g=="function"?g(i):g,...d};return Pe.createElement(n,{className:l,style:_,ref:e},o)}),cj=t=>e=>{let{active:n,dragOverlay:i}=e;const a={},{styles:o,className:l}=t;if(o!=null&&o.active)for(const[u,d]of Object.entries(o.active))d!==void 0&&(a[u]=n.node.style.getPropertyValue(u),n.node.style.setProperty(u,d));if(o!=null&&o.dragOverlay)for(const[u,d]of Object.entries(o.dragOverlay))d!==void 0&&i.node.style.setProperty(u,d);return l!=null&&l.active&&n.node.classList.add(l.active),l!=null&&l.dragOverlay&&i.node.classList.add(l.dragOverlay),function(){for(const[d,f]of Object.entries(a))n.node.style.setProperty(d,f);l!=null&&l.active&&n.node.classList.remove(l.active)}},uj=t=>{let{transform:{initial:e,final:n}}=t;return[{transform:ql.Transform.toString(e)},{transform:ql.Transform.toString(n)}]},dj={duration:250,easing:"ease",keyframes:uj,sideEffects:cj({styles:{active:{opacity:"0"}}})};function hj(t){let{config:e,draggableNodes:n,droppableContainers:i,measuringConfiguration:a}=t;return kd((o,l)=>{if(e===null)return;const u=n.get(o);if(!u)return;const d=u.node.current;if(!d)return;const f=px(l);if(!f)return;const{transform:g}=Tn(l).getComputedStyle(l),p=sx(g);if(!p)return;const _=typeof e=="function"?e:fj(e);return dx(d,a.draggable.measure),_({active:{id:o,data:u.data,node:d,rect:a.draggable.measure(d)},draggableNodes:n,dragOverlay:{node:l,rect:a.dragOverlay.measure(f)},droppableContainers:i,measuringConfiguration:a,transform:p})})}function fj(t){const{duration:e,easing:n,sideEffects:i,keyframes:a}={...dj,...t};return o=>{let{active:l,dragOverlay:u,transform:d,...f}=o;if(!e)return;const g={x:u.rect.left-l.rect.left,y:u.rect.top-l.rect.top},p={scaleX:d.scaleX!==1?l.rect.width*d.scaleX/u.rect.width:1,scaleY:d.scaleY!==1?l.rect.height*d.scaleY/u.rect.height:1},_={x:d.x-g.x,y:d.y-g.y,...p},b=a({...f,active:l,dragOverlay:u,transform:{initial:d,final:_}}),[S]=b,w=b[b.length-1];if(JSON.stringify(S)===JSON.stringify(w))return;const x=i?.({active:l,dragOverlay:u,...f}),C=u.node.animate(b,{duration:e,easing:n,fill:"forwards"});return new Promise(T=>{C.onfinish=()=>{x?.(),T()}})}}let C0=0;function gj(t){return A.useMemo(()=>{if(t!=null)return C0++,C0},[t])}const mj=Pe.memo(t=>{let{adjustScale:e=!1,children:n,dropAnimation:i,style:a,transition:o,modifiers:l,wrapperElement:u="div",className:d,zIndex:f=999}=t;const{activatorEvent:g,active:p,activeNodeRect:_,containerNodeRect:b,draggableNodes:S,droppableContainers:w,dragOverlay:x,over:C,measuringConfiguration:T,scrollableAncestors:O,scrollableAncestorRects:M,windowRect:D}=ej(),U=A.useContext(Ld),L=gj(p?.id),B=_x(l,{activatorEvent:g,active:p,activeNodeRect:_,containerNodeRect:b,draggingNodeRect:x.rect,over:C,overlayNodeRect:x.rect,scrollableAncestors:O,scrollableAncestorRects:M,transform:U,windowRect:D}),H=$m(_),Q=hj({config:i,draggableNodes:S,droppableContainers:w,measuringConfiguration:T}),Z=H?x.setRef:void 0;return Pe.createElement(aj,null,Pe.createElement(ij,{animation:Q},p&&L?Pe.createElement(lj,{key:L,id:p.id,ref:Z,as:u,activatorEvent:g,adjustScale:e,className:d,transition:o,rect:H,style:{zIndex:f,...a},transform:B},n):null))});function ju({label:t,options:e,selectedOptions:n,onSelectionChange:i,searchPlaceholder:a,id:o,width:l="200px"}){const[u,d]=A.useState(!1),[f,g]=A.useState(""),p=A.useRef(null);A.useEffect(()=>{const T=O=>{p.current&&!p.current.contains(O.target)&&d(!1)};return document.addEventListener("mousedown",T),()=>document.removeEventListener("mousedown",T)},[]);const _=e.filter(T=>T.toLowerCase().includes(f.toLowerCase())),b=_.length>0&&_.every(T=>n.includes(T)),S=T=>{if(T.preventDefault(),T.stopPropagation(),b){const O=n.filter(M=>!_.includes(M));i(O)}else{const O=[...new Set([...n,..._])];i(O)}},w=(T,O)=>{if(T.preventDefault(),T.stopPropagation(),n.includes(O)){const M=n.filter(D=>D!==O);i(M)}else{const M=[...n.filter(D=>D!==""),O];i(M)}},x=()=>{d(!0)},C=T=>{g(T.target.value)};return y.jsxs("div",{className:"searchable-dropdown",ref:p,style:{width:l},children:[y.jsxs("label",{htmlFor:o,children:[t,":"]}),y.jsx("input",{type:"text",id:o,value:f,onChange:C,onFocus:x,placeholder:a}),u&&e.length>0&&y.jsxs("div",{className:"dropdown-options",children:[y.jsxs("div",{className:`dropdown-option ${b?"selected":""}`,onMouseDown:S,children:[y.jsxs("span",{className:"phase-name",children:["Tutti i ",t]}),y.jsxs("span",{className:"phase-description",children:["Mostra tutti i ",t.toLowerCase()]})]}),_.map(T=>y.jsxs("div",{className:`dropdown-option ${n.includes(T)?"selected":""}`,onMouseDown:O=>w(O,T),children:[y.jsx("span",{className:"phase-name",children:T}),y.jsx("span",{className:"phase-description",children:t})]},T))]})]})}const pj=A.lazy(()=>Ha(()=>import("./TaskPool-Cl2kn2jy.js"),[])),vj=A.lazy(()=>Ha(()=>import("./GanttChart-Bvy1fOka.js"),[])),E0=()=>y.jsx("div",{className:"loading",children:"Caricamento componenti scheduler..."});function yj(){const{machines:t}=an(),{odpOrders:e,getOdpOrdersByWorkCenter:n,getScheduledOrders:i}=ut(),{selectedWorkCenter:a,isLoading:o,isInitialized:l,showAlert:u,isEditMode:d,toggleEditMode:f,showConflictDialog:g}=Ce(),{scheduleTask:p,unscheduleTask:_,scheduleTaskFromSlot:b,rescheduleTaskToSlot:S,validateSlotAvailability:w}=Fi(),{init:x,cleanup:C}=Hi(),[T,O]=A.useState(new Date),[M,D]=A.useState(null),[U,L]=A.useState([]),[B,H]=A.useState([]),[Q,Z]=A.useState([]),[q,ne]=A.useState([]),[he,oe]=A.useState(""),[I,K]=A.useState(""),[le,ge]=A.useState("");A.useEffect(()=>(l||x(),()=>{C()}),[x,l,C]);const j=A.useMemo(()=>a?n(a):[],[a,n]),G=A.useMemo(()=>j.filter(ce=>ce.status==="SCHEDULED"),[j,a]),re=A.useMemo(()=>{if(performance.now(),!t||t.length===0)return{activeMachines:[],workCenters:[],departments:[],machineTypes:[],machineNames:[]};let ie=t;a&&a!==Me.BOTH&&(ie=t.filter(se=>se.work_center===a));const ce=ie.filter(se=>se.status===ii.ACTIVE);if(ce.length===0)return{activeMachines:[],workCenters:[],departments:[],machineTypes:[],machineNames:[]};const ae=new Set,we=new Set,Ve=new Set,k=new Set;for(const se of ce)se.work_center&&ae.add(se.work_center),se.department&&we.add(se.department),se.machine_type&&Ve.add(se.machine_type),se.machine_name&&k.add(se.machine_name);const F=Array.from(ae).sort(),X=Array.from(we).sort(),fe=Array.from(Ve).sort(),ue=Array.from(k).sort();return performance.now(),{activeMachines:ce,workCenters:F,departments:X,machineTypes:fe,machineNames:ue}},[t,a]),de=A.useMemo(()=>{const{activeMachines:ie}=re;let ce=ie;return U.length>0&&(ce=ce.filter(ae=>U.includes(ae.work_center))),B.length>0&&(ce=ce.filter(ae=>B.includes(ae.department))),Q.length>0&&(ce=ce.filter(ae=>Q.includes(ae.machine_type))),q.length>0&&(ce=ce.filter(ae=>q.includes(ae.machine_name))),ce},[re,U,B,Q,q]),me=A.useCallback(ie=>{O(ce=>{const ae=new Date(ce);return ie==="today"?new Date:ie==="prev"?(ae.setDate(ae.getDate()-1),ae):ie==="next"?(ae.setDate(ae.getDate()+1),ae):ce})},[]),Te=A.useCallback(()=>{const ie=new Date;return T.toDateString()===ie.toDateString()?"Oggi":T.toLocaleDateString("it-IT",{month:"long",day:"numeric"})},[T]),pe=A.useCallback(()=>{L([]),H([]),Z([]),ne([])},[]),pt=A.useCallback(()=>{if(!he.trim())return;let ie=G.find(ae=>ae.odp_number===he.trim());if(ie||(ie=G.find(ae=>ae.odp_number.toLowerCase().includes(he.trim().toLowerCase()))),!ie){u("Lavoro non trovato o non programmato","warning");return}const ce=t.find(ae=>ae.id===ie.scheduled_machine_id);if(!ce){u("Macchina non trovata per questo lavoro","error");return}ne([ce.machine_name]),L([ce.work_center]),H([ce.department]),Z([ce.machine_type]),ie.scheduled_start_time&&O(new Date(ie.scheduled_start_time)),oe(""),u(`Lavoro "${ie.odp_number}" trovato su ${ce.machine_name}`,"success")},[he,G,t,u]),Ne=A.useCallback(()=>{if(!I.trim())return;let ie=G.find(ae=>ae.article_code===I.trim());if(ie||(ie=G.find(ae=>ae.article_code&&ae.article_code.toLowerCase().includes(I.trim().toLowerCase()))),!ie){u("Lavoro non trovato o non programmato","warning");return}const ce=t.find(ae=>ae.id===ie.scheduled_machine_id);if(!ce){u("Macchina non trovata per questo lavoro","error");return}ne([ce.machine_name]),L([ce.work_center]),H([ce.department]),Z([ce.machine_type]),ie.scheduled_start_time&&O(new Date(ie.scheduled_start_time)),K(""),u(`Lavoro con codice articolo "${ie.article_code}" trovato su ${ce.machine_name}`,"success")},[I,G,t,u]),vt=A.useCallback(()=>{if(!le.trim())return;let ie=G.find(ae=>ae.nome_cliente===le.trim());if(ie||(ie=G.find(ae=>ae.nome_cliente&&ae.nome_cliente.toLowerCase().includes(le.trim().toLowerCase()))),!ie){u("Lavoro non trovato o non programmato","warning");return}const ce=t.find(ae=>ae.id===ie.scheduled_machine_id);if(!ce){u("Macchina non trovata per questo lavoro","error");return}ne([ce.machine_name]),L([ce.work_center]),H([ce.department]),Z([ce.machine_type]),ie.scheduled_start_time&&O(new Date(ie.scheduled_start_time)),ge(""),u(`Lavoro per cliente "${ie.nome_cliente}" trovato su ${ce.machine_name}`,"success")},[le,G,t,u]),Se=A.useRef(null),dt=A.useRef(!1),Ye=A.useCallback(ie=>{performance.now();const ce=ie.active.data.current;ce.type==="task"?D(ce.task):ce.type==="event"&&D(ce.event)},[]),jn=A.useCallback(ie=>{const{over:ce}=ie;if(document.querySelectorAll(".drop-indicator").forEach(we=>we.remove()),ce&&ce.data.current?.type==="slot"){const{machine:we,hour:Ve,minute:k,isUnavailable:F,hasScheduledTask:X}=ce.data.current;if(F||X)return;const fe=document.querySelector(`[data-hour="${Ve}"][data-minute="${k}"][data-machine-id="${we.id}"]`);if(fe){const ue=document.createElement("div");ue.className="drop-indicator",ue.style.cssText=`
          position: absolute;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          border: 3px dashed #007bff;
          background: rgba(0, 123, 255, 0.1);
          pointer-events: none;
          z-index: 1000;
          border-radius: 4px;
        `,fe.style.position="relative",fe.appendChild(ue)}}},[]),Kt=A.useCallback(async ie=>{if(performance.now(),Se.current&&clearTimeout(Se.current),dt.current)return;D(null),document.querySelectorAll(".drop-indicator").forEach(F=>F.remove());const{over:ae,active:we}=ie;if(!ae)return;const Ve=we.data.current,k=ae.data.current;if(!(!Ve||!k)){dt.current=!0;try{await new Promise(F=>{requestAnimationFrame(async()=>{const X=performance.now();if(Ve.type==="task"&&k.type==="slot"){const fe=Ve.task,{machine:ue,hour:se,minute:ve,isUnavailable:xe,hasScheduledTask:ke}=k;if(ke)return u("Impossibile pianificare il lavoro su uno slot temporale occupato","error"),F();const je=await b(fe.id,ue,T,se,ve);je?.error?u(je.error,"error"):je?.conflict&&g(je)}else if(Ve.type==="event"&&k.type==="slot"){const fe=Ve.event,{machine:ue,hour:se,minute:ve,isUnavailable:xe,hasScheduledTask:ke}=k;if(ke)return u("Impossibile riprogrammare il lavoro su uno slot temporale occupato","error"),F();const je=await S(fe.id,ue,T,se,ve);je?.error?u(je.error,"error"):je?.conflict&&g(je)}else if(Ve.type==="event"&&k.type==="pool"){const fe=Ve.event;_(fe.id)}F()})})}catch{u("Si è verificato un errore durante l'operazione di trascinamento","error")}finally{dt.current=!1}}},[T,b,S,_,u,g]);return o?y.jsx("div",{className:"content-section",children:y.jsx("div",{className:"loading",children:"Caricamento Scheduler Produzione..."})}):a?y.jsxs(QN,{onDragStart:Ye,onDragOver:jn,onDragEnd:Kt,children:[y.jsxs("div",{className:`content-section ${d?"edit-mode":""}`,children:[y.jsx(Ss,{title:"Scheduler Produzione"}),y.jsx(A.Suspense,{fallback:y.jsx(E0,{}),children:y.jsx(pj,{})}),y.jsxs("div",{className:"section-controls",children:[y.jsx("h2",{className:"section-title",children:"Ricerca Lavoro"}),y.jsxs("div",{className:"task-lookup-grid",children:[y.jsxs("div",{className:"task-lookup-item",children:[y.jsxs("div",{className:"task-lookup-input-container",children:[y.jsx("input",{type:"text",placeholder:"Inserisci numero ODP per cercare...",value:he,onChange:ie=>{const ce=ie.target.value;oe(ce)},onKeyPress:ie=>{ie.key==="Enter"&&pt()},className:"task-lookup-input"}),he&&y.jsx("div",{className:"task-lookup-dropdown",children:G.filter(ie=>ie.odp_number.toLowerCase().includes(he.toLowerCase())).sort((ie,ce)=>{const ae=ie.odp_number.toLowerCase()===he.toLowerCase(),we=ce.odp_number.toLowerCase()===he.toLowerCase();return ae&&!we?-1:!ae&&we?1:ie.odp_number.localeCompare(ce.odp_number)}).slice(0,5).map(ie=>y.jsxs("div",{className:"task-lookup-option",onClick:()=>{console.log(`Clicked on ODP option: ${ie.odp_number} (ID: ${ie.id})`);const ce=ie.odp_number;console.log(`Performing lookup for ODP: ${ce}`);const ae=G.find(Ve=>Ve.odp_number===ce);if(!ae){console.log(`Task not found for ODP: ${ce}`);return}console.log("Found task:",{id:ae.id,odp_number:ae.odp_number,work_center:ae.work_center});const we=t.find(Ve=>Ve.id===ae.scheduled_machine_id);if(!we){console.log(`No machine found for task machine ID: ${ae.scheduled_machine_id}`),u("Macchina non trovata per questo lavoro","error");return}console.log("Found machine:",{id:we.id,name:we.machine_name,work_center:we.work_center}),ne([we.machine_name]),L([we.work_center]),H([we.department]),Z([we.machine_type]),ae.scheduled_start_time&&O(new Date(ae.scheduled_start_time)),oe(""),u(`Lavoro "${ae.odp_number}" trovato su ${we.machine_name}`,"success")},children:[y.jsx("span",{className:"task-lookup-odp",children:ie.odp_number}),y.jsx("span",{className:"task-lookup-product",children:ie.product_name||"Prodotto non specificato"}),y.jsxs("span",{className:"task-lookup-workcenter",children:["(",ie.work_center,")"]})]},ie.id))})]}),y.jsx("button",{onClick:()=>{pt()},className:"nav-btn today",children:"Cerca ODP"})]}),y.jsxs("div",{className:"task-lookup-item",children:[y.jsxs("div",{className:"task-lookup-input-container",children:[y.jsx("input",{type:"text",placeholder:"Inserisci codice articolo per cercare...",value:I,onChange:ie=>{const ce=ie.target.value;K(ce)},onKeyPress:ie=>{ie.key==="Enter"&&Ne()},className:"task-lookup-input"}),I&&y.jsx("div",{className:"task-lookup-dropdown",children:G.filter(ie=>ie.article_code&&ie.article_code.toLowerCase().includes(I.toLowerCase())).sort((ie,ce)=>{const ae=ie.article_code&&ie.article_code.toLowerCase()===I.toLowerCase(),we=ce.article_code&&ce.article_code.toLowerCase()===I.toLowerCase();return ae&&!we?-1:!ae&&we?1:(ie.article_code||"").localeCompare(ce.article_code||"")}).slice(0,5).map(ie=>y.jsxs("div",{className:"task-lookup-option",onClick:()=>{const ce=ie.article_code;console.log(`Performing lookup for Article Code: ${ce}`);const ae=G.find(Ve=>Ve.article_code===ce);if(!ae){console.log(`Task not found for Article Code: ${ce}`);return}console.log("Found task:",{id:ae.id,article_code:ae.article_code,work_center:ae.work_center});const we=t.find(Ve=>Ve.id===ae.scheduled_machine_id);if(!we){console.log(`No machine found for task machine ID: ${ae.scheduled_machine_id}`),u("Macchina non trovata per questo lavoro","error");return}console.log("Found machine:",{id:we.id,name:we.machine_name,work_center:we.work_center}),ne([we.machine_name]),L([we.work_center]),H([we.department]),Z([we.machine_type]),ae.scheduled_start_time&&O(new Date(ae.scheduled_start_time)),K(""),u(`Lavoro con codice articolo "${ae.article_code}" trovato su ${we.machine_name}`,"success")},children:[y.jsx("span",{className:"task-lookup-odp",children:ie.article_code}),y.jsx("span",{className:"task-lookup-product",children:ie.product_name||"Prodotto non specificato"}),y.jsxs("span",{className:"task-lookup-workcenter",children:["(",ie.work_center,")"]})]},ie.id))})]}),y.jsx("button",{onClick:()=>{Ne()},className:"nav-btn today",children:"Cerca Articolo"})]}),y.jsxs("div",{className:"task-lookup-item",children:[y.jsxs("div",{className:"task-lookup-input-container",children:[y.jsx("input",{type:"text",placeholder:"Inserisci nome cliente per cercare...",value:le,onChange:ie=>{const ce=ie.target.value;ge(ce)},onKeyPress:ie=>{ie.key==="Enter"&&vt()},className:"task-lookup-input"}),le&&y.jsx("div",{className:"task-lookup-dropdown",children:G.filter(ie=>ie.nome_cliente&&ie.nome_cliente.toLowerCase().includes(le.toLowerCase())).sort((ie,ce)=>{const ae=ie.nome_cliente&&ie.nome_cliente.toLowerCase()===le.toLowerCase(),we=ce.nome_cliente&&ce.nome_cliente.toLowerCase()===le.toLowerCase();return ae&&!we?-1:!ae&&we?1:(ie.nome_cliente||"").localeCompare(ce.nome_cliente||"")}).slice(0,5).map(ie=>y.jsxs("div",{className:"task-lookup-option",onClick:()=>{const ce=ie.nome_cliente;console.log(`Performing lookup for Customer Name: ${ce}`);const ae=G.find(Ve=>Ve.nome_cliente===ce);if(!ae){console.log(`Task not found for Customer Name: ${ce}`);return}console.log("Found task:",{id:ae.id,nome_cliente:ae.nome_cliente,work_center:ae.work_center});const we=t.find(Ve=>Ve.id===ae.scheduled_machine_id);if(!we){console.log(`No machine found for task machine ID: ${ae.scheduled_machine_id}`),u("Macchina non trovata per questo lavoro","error");return}console.log("Found machine:",{id:we.id,name:we.machine_name,work_center:we.work_center}),ne([we.machine_name]),L([we.work_center]),H([we.department]),Z([we.machine_type]),ae.scheduled_start_time&&O(new Date(ae.scheduled_start_time)),ge(""),u(`Lavoro per cliente "${ae.nome_cliente}" trovato su ${we.machine_name}`,"success")},children:[y.jsx("span",{className:"task-lookup-odp",children:ie.nome_cliente}),y.jsx("span",{className:"task-lookup-product",children:ie.product_name||"Prodotto non specificato"}),y.jsxs("span",{className:"task-lookup-workcenter",children:["(",ie.work_center,")"]})]},ie.id))})]}),y.jsx("button",{onClick:()=>{vt()},className:"nav-btn today",children:"Cerca Cliente"})]})]})]}),y.jsxs("div",{className:"section-controls",children:[y.jsx("h2",{className:"section-title",children:"Programma Produzione"}),y.jsxs("div",{className:"controls-grid",children:[y.jsxs("div",{className:"filters-section",children:[y.jsx(ju,{label:"Centro di Lavoro",options:re.workCenters,selectedOptions:U,onSelectionChange:L,searchPlaceholder:"Cerca Centri di Lavoro",id:"work_center_filter"}),y.jsx(ju,{label:"Reparto",options:re.departments,selectedOptions:B,onSelectionChange:H,searchPlaceholder:"Cerca Reparti",id:"department_filter"}),y.jsx(ju,{label:"Tipo Macchina",options:re.machineTypes,selectedOptions:Q,onSelectionChange:Z,searchPlaceholder:"Cerca Tipi di Macchina",id:"machine_type_filter"}),y.jsx(ju,{label:"Nome Macchina",options:re.machineNames,selectedOptions:q,onSelectionChange:ne,searchPlaceholder:"Cerca Nomi Macchine",id:"machine_name_filter"})]}),y.jsxs("div",{className:"actions-section",children:[y.jsx("button",{className:`nav-btn ${d?"edit-mode-active":""}`,onClick:f,title:d?"Disabilita modalità modifica":"Abilita modalità modifica",style:{backgroundColor:d?"#dc3545":"#007bff",color:"white",border:d?"2px solid #bd2130":"2px solid #0056b3",fontWeight:"bold"},children:d?"Disabilita Modalità Modifica":"Abilita Modalità Modifica"}),y.jsx("button",{className:"nav-btn today",onClick:pe,title:"Clear all filters",children:"Cancella Filtri"}),y.jsxs("div",{className:"calendar-navigation",children:[y.jsx("button",{className:"nav-btn today",onClick:()=>me("today"),children:"Oggi"}),y.jsx("button",{className:"nav-btn",onClick:()=>me("prev"),children:"<"}),y.jsx("span",{className:"current-date",children:Te()}),y.jsx("button",{className:"nav-btn",onClick:()=>me("next"),children:">"})]}),y.jsx("button",{className:"nav-btn today",onClick:()=>{const ie=document.querySelector(".calendar-section .calendar-grid");if(!ie){alert("Grafico Gantt non trovato. Assicurati che il grafico sia visibile sullo schermo.");return}const ce=Array.from(document.styleSheets);let ae="";ce.forEach(se=>{try{Array.from(se.cssRules||se.rules||[]).forEach(xe=>{ae+=xe.cssText+`
`})}catch{}});const we=ie.cloneNode(!0),Ve=`
                    <!DOCTYPE html>
                    <html>
                      <head>
                        <title>Grafico Gantt - ${Te()}</title>
                        <style>
                          ${ae}
                          body { 
                            margin: 0; 
                            padding: 20px; 
                            font-family: Arial, sans-serif;
                          }
                          .calendar-section {
                            width: 100%;
                            overflow-x: auto;
                          }
                        </style>
                      </head>
                      <body>
                        <div style="text-align: center; margin-bottom: 20px; font-size: 16px; font-weight: bold;">
                          Grafico Gantt - ${Te()}
                        </div>
                        <div class="calendar-section">
                          ${we.outerHTML}
                        </div>
                      </body>
                    </html>
                  `,k=new Blob([Ve],{type:"text/html"}),F=window.URL.createObjectURL(k),X=document.createElement("a");X.href=F;const fe=T.toISOString().split("T")[0],ue=new Date().toTimeString().split(" ")[0].replace(/:/g,"-");X.download=`grafico-gantt-${fe}-${ue}.html`,document.body.appendChild(X),X.click(),document.body.removeChild(X),window.URL.revokeObjectURL(F)},title:"Download exact Gantt chart as HTML file",children:"Scarica HTML"})]})]})]}),y.jsx(A.Suspense,{fallback:y.jsx(E0,{}),children:y.jsx(vj,{machines:de,currentDate:T})})]}),y.jsx(mj,{children:M?y.jsxs("div",{className:"task-item drag-overlay",style:{boxShadow:"0 8px 25px rgba(0,0,0,0.3)",transform:"rotate(3deg) scale(1.05)",opacity:.9,zIndex:1002,pointerEvents:"none"},children:[y.jsx("span",{children:M.odp_number}),y.jsxs("span",{className:"task-time",children:[M.time_remaining?Number(M.time_remaining).toFixed(1):(M.duration||1).toFixed(1),"h"]})]}):null})]}):y.jsx("div",{className:"content-section",children:y.jsx("div",{className:"error",children:"Seleziona un centro di lavoro per visualizzare i dati dello scheduler."})})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function uc(t){return t+.5|0}const ta=(t,e,n)=>Math.max(Math.min(t,n),e);function wl(t){return ta(uc(t*2.55),0,255)}function na(t){return ta(uc(t*255),0,255)}function gs(t){return ta(uc(t/2.55)/100,0,1)}function T0(t){return ta(uc(t*100),0,100)}const ti={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},nm=[..."0123456789ABCDEF"],_j=t=>nm[t&15],bj=t=>nm[(t&240)>>4]+nm[t&15],Lu=t=>(t&240)>>4===(t&15),Sj=t=>Lu(t.r)&&Lu(t.g)&&Lu(t.b)&&Lu(t.a);function wj(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&ti[t[1]]*17,g:255&ti[t[2]]*17,b:255&ti[t[3]]*17,a:e===5?ti[t[4]]*17:255}:(e===7||e===9)&&(n={r:ti[t[1]]<<4|ti[t[2]],g:ti[t[3]]<<4|ti[t[4]],b:ti[t[5]]<<4|ti[t[6]],a:e===9?ti[t[7]]<<4|ti[t[8]]:255})),n}const xj=(t,e)=>t<255?e(t):"";function Cj(t){var e=Sj(t)?_j:bj;return t?"#"+e(t.r)+e(t.g)+e(t.b)+xj(t.a,e):void 0}const Ej=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function bx(t,e,n){const i=e*Math.min(n,1-n),a=(o,l=(o+t/30)%12)=>n-i*Math.max(Math.min(l-3,9-l,1),-1);return[a(0),a(8),a(4)]}function Tj(t,e,n){const i=(a,o=(a+t/60)%6)=>n-n*e*Math.max(Math.min(o,4-o,1),0);return[i(5),i(3),i(1)]}function Oj(t,e,n){const i=bx(t,1,.5);let a;for(e+n>1&&(a=1/(e+n),e*=a,n*=a),a=0;a<3;a++)i[a]*=1-e-n,i[a]+=e;return i}function Aj(t,e,n,i,a){return t===a?(e-n)/i+(e<n?6:0):e===a?(n-t)/i+2:(t-e)/i+4}function Vm(t){const n=t.r/255,i=t.g/255,a=t.b/255,o=Math.max(n,i,a),l=Math.min(n,i,a),u=(o+l)/2;let d,f,g;return o!==l&&(g=o-l,f=u>.5?g/(2-o-l):g/(o+l),d=Aj(n,i,a,g,o),d=d*60+.5),[d|0,f||0,u]}function qm(t,e,n,i){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,i)).map(na)}function Gm(t,e,n){return qm(bx,t,e,n)}function Rj(t,e,n){return qm(Oj,t,e,n)}function Dj(t,e,n){return qm(Tj,t,e,n)}function Sx(t){return(t%360+360)%360}function Mj(t){const e=Ej.exec(t);let n=255,i;if(!e)return;e[5]!==i&&(n=e[6]?wl(+e[5]):na(+e[5]));const a=Sx(+e[2]),o=+e[3]/100,l=+e[4]/100;return e[1]==="hwb"?i=Rj(a,o,l):e[1]==="hsv"?i=Dj(a,o,l):i=Gm(a,o,l),{r:i[0],g:i[1],b:i[2],a:n}}function kj(t,e){var n=Vm(t);n[0]=Sx(n[0]+e),n=Gm(n),t.r=n[0],t.g=n[1],t.b=n[2]}function Nj(t){if(!t)return;const e=Vm(t),n=e[0],i=T0(e[1]),a=T0(e[2]);return t.a<255?`hsla(${n}, ${i}%, ${a}%, ${gs(t.a)})`:`hsl(${n}, ${i}%, ${a}%)`}const O0={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},A0={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function jj(){const t={},e=Object.keys(A0),n=Object.keys(O0);let i,a,o,l,u;for(i=0;i<e.length;i++){for(l=u=e[i],a=0;a<n.length;a++)o=n[a],u=u.replace(o,O0[o]);o=parseInt(A0[l],16),t[u]=[o>>16&255,o>>8&255,o&255]}return t}let Pu;function Lj(t){Pu||(Pu=jj(),Pu.transparent=[0,0,0,0]);const e=Pu[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const Pj=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function Ij(t){const e=Pj.exec(t);let n=255,i,a,o;if(e){if(e[7]!==i){const l=+e[7];n=e[8]?wl(l):ta(l*255,0,255)}return i=+e[1],a=+e[3],o=+e[5],i=255&(e[2]?wl(i):ta(i,0,255)),a=255&(e[4]?wl(a):ta(a,0,255)),o=255&(e[6]?wl(o):ta(o,0,255)),{r:i,g:a,b:o,a:n}}}function zj(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${gs(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const xg=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,Hr=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function Fj(t,e,n){const i=Hr(gs(t.r)),a=Hr(gs(t.g)),o=Hr(gs(t.b));return{r:na(xg(i+n*(Hr(gs(e.r))-i))),g:na(xg(a+n*(Hr(gs(e.g))-a))),b:na(xg(o+n*(Hr(gs(e.b))-o))),a:t.a+n*(e.a-t.a)}}function Iu(t,e,n){if(t){let i=Vm(t);i[e]=Math.max(0,Math.min(i[e]+i[e]*n,e===0?360:1)),i=Gm(i),t.r=i[0],t.g=i[1],t.b=i[2]}}function wx(t,e){return t&&Object.assign(e||{},t)}function R0(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=na(t[3]))):(e=wx(t,{r:0,g:0,b:0,a:1}),e.a=na(e.a)),e}function Uj(t){return t.charAt(0)==="r"?Ij(t):Mj(t)}class Yl{constructor(e){if(e instanceof Yl)return e;const n=typeof e;let i;n==="object"?i=R0(e):n==="string"&&(i=wj(e)||Lj(e)||Uj(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=wx(this._rgb);return e&&(e.a=gs(e.a)),e}set rgb(e){this._rgb=R0(e)}rgbString(){return this._valid?zj(this._rgb):void 0}hexString(){return this._valid?Cj(this._rgb):void 0}hslString(){return this._valid?Nj(this._rgb):void 0}mix(e,n){if(e){const i=this.rgb,a=e.rgb;let o;const l=n===o?.5:n,u=2*l-1,d=i.a-a.a,f=((u*d===-1?u:(u+d)/(1+u*d))+1)/2;o=1-f,i.r=255&f*i.r+o*a.r+.5,i.g=255&f*i.g+o*a.g+.5,i.b=255&f*i.b+o*a.b+.5,i.a=l*i.a+(1-l)*a.a,this.rgb=i}return this}interpolate(e,n){return e&&(this._rgb=Fj(this._rgb,e._rgb,n)),this}clone(){return new Yl(this.rgb)}alpha(e){return this._rgb.a=na(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=uc(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Iu(this._rgb,2,e),this}darken(e){return Iu(this._rgb,2,-e),this}saturate(e){return Iu(this._rgb,1,e),this}desaturate(e){return Iu(this._rgb,1,-e),this}rotate(e){return kj(this._rgb,e),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function ls(){}const Hj=(()=>{let t=0;return()=>t++})();function mt(t){return t==null}function rn(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Xe(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function ri(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function Ni(t,e){return ri(t)?t:e}function qe(t,e){return typeof t>"u"?e:t}const Bj=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,xx=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function bt(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function tt(t,e,n,i){let a,o,l;if(rn(t))for(o=t.length,a=0;a<o;a++)e.call(n,t[a],a);else if(Xe(t))for(l=Object.keys(t),o=l.length,a=0;a<o;a++)e.call(n,t[l[a]],l[a])}function md(t,e){let n,i,a,o;if(!t||!e||t.length!==e.length)return!1;for(n=0,i=t.length;n<i;++n)if(a=t[n],o=e[n],a.datasetIndex!==o.datasetIndex||a.index!==o.index)return!1;return!0}function pd(t){if(rn(t))return t.map(pd);if(Xe(t)){const e=Object.create(null),n=Object.keys(t),i=n.length;let a=0;for(;a<i;++a)e[n[a]]=pd(t[n[a]]);return e}return t}function Cx(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function $j(t,e,n,i){if(!Cx(t))return;const a=e[t],o=n[t];Xe(a)&&Xe(o)?Wl(a,o,i):e[t]=pd(o)}function Wl(t,e,n){const i=rn(e)?e:[e],a=i.length;if(!Xe(t))return t;n=n||{};const o=n.merger||$j;let l;for(let u=0;u<a;++u){if(l=i[u],!Xe(l))continue;const d=Object.keys(l);for(let f=0,g=d.length;f<g;++f)o(d[f],t,l,n)}return t}function Ll(t,e){return Wl(t,e,{merger:Vj})}function Vj(t,e,n){if(!Cx(t))return;const i=e[t],a=n[t];Xe(i)&&Xe(a)?Ll(i,a):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=pd(a))}const D0={"":t=>t,x:t=>t.x,y:t=>t.y};function qj(t){const e=t.split("."),n=[];let i="";for(const a of e)i+=a,i.endsWith("\\")?i=i.slice(0,-1)+".":(n.push(i),i="");return n}function Gj(t){const e=qj(t);return n=>{for(const i of e){if(i==="")break;n=n&&n[i]}return n}}function Kl(t,e){return(D0[e]||(D0[e]=Gj(e)))(t)}function Ym(t){return t.charAt(0).toUpperCase()+t.slice(1)}const vd=t=>typeof t<"u",sa=t=>typeof t=="function",M0=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function Yj(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const nt=Math.PI,Dt=2*nt,Wj=Dt+nt,yd=Number.POSITIVE_INFINITY,Kj=nt/180,Wt=nt/2,Ra=nt/4,k0=nt*2/3,Ex=Math.log10,Qr=Math.sign;function Pl(t,e,n){return Math.abs(t-e)<n}function N0(t){const e=Math.round(t);t=Pl(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(Ex(t))),i=t/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function Xj(t){const e=[],n=Math.sqrt(t);let i;for(i=1;i<n;i++)t%i===0&&(e.push(i),e.push(t/i));return n===(n|0)&&e.push(n),e.sort((a,o)=>a-o).pop(),e}function Qj(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function Xl(t){return!Qj(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function Zj(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function Jj(t,e,n){let i,a,o;for(i=0,a=t.length;i<a;i++)o=t[i][n],isNaN(o)||(e.min=Math.min(e.min,o),e.max=Math.max(e.max,o))}function ps(t){return t*(nt/180)}function e2(t){return t*(180/nt)}function j0(t){if(!ri(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function Tx(t,e){const n=e.x-t.x,i=e.y-t.y,a=Math.sqrt(n*n+i*i);let o=Math.atan2(i,n);return o<-.5*nt&&(o+=Dt),{angle:o,distance:a}}function im(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function t2(t,e){return(t-e+Wj)%Dt-nt}function pi(t){return(t%Dt+Dt)%Dt}function Ql(t,e,n,i){const a=pi(t),o=pi(e),l=pi(n),u=pi(o-a),d=pi(l-a),f=pi(a-o),g=pi(a-l);return a===o||a===l||i&&o===l||u>d&&f<g}function En(t,e,n){return Math.max(e,Math.min(n,t))}function n2(t){return En(t,-32768,32767)}function qr(t,e,n,i=1e-6){return t>=Math.min(e,n)-i&&t<=Math.max(e,n)+i}function Wm(t,e,n){n=n||(l=>t[l]<e);let i=t.length-1,a=0,o;for(;i-a>1;)o=a+i>>1,n(o)?a=o:i=o;return{lo:a,hi:i}}const za=(t,e,n,i)=>Wm(t,n,i?a=>{const o=t[a][e];return o<n||o===n&&t[a+1][e]===n}:a=>t[a][e]<n),i2=(t,e,n)=>Wm(t,n,i=>t[i][e]>=n);function s2(t,e,n){let i=0,a=t.length;for(;i<a&&t[i]<e;)i++;for(;a>i&&t[a-1]>n;)a--;return i>0||a<t.length?t.slice(i,a):t}const Ox=["push","pop","shift","splice","unshift"];function a2(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),Ox.forEach(n=>{const i="_onData"+Ym(n),a=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...o){const l=a.apply(this,o);return t._chartjs.listeners.forEach(u=>{typeof u[i]=="function"&&u[i](...o)}),l}})})}function L0(t,e){const n=t._chartjs;if(!n)return;const i=n.listeners,a=i.indexOf(e);a!==-1&&i.splice(a,1),!(i.length>0)&&(Ox.forEach(o=>{delete t[o]}),delete t._chartjs)}function r2(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const Ax=(function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame})();function Rx(t,e){let n=[],i=!1;return function(...a){n=a,i||(i=!0,Ax.call(window,()=>{i=!1,t.apply(e,n)}))}}function o2(t,e){let n;return function(...i){return e?(clearTimeout(n),n=setTimeout(t,e,i)):t.apply(this,i),e}}const Km=t=>t==="start"?"left":t==="end"?"right":"center",yn=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,l2=(t,e,n,i)=>t===(i?"left":"right")?n:t==="center"?(e+n)/2:e;function c2(t,e,n){const i=e.length;let a=0,o=i;if(t._sorted){const{iScale:l,vScale:u,_parsed:d}=t,f=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,g=l.axis,{min:p,max:_,minDefined:b,maxDefined:S}=l.getUserBounds();if(b){if(a=Math.min(za(d,g,p).lo,n?i:za(e,g,l.getPixelForValue(p)).lo),f){const w=d.slice(0,a+1).reverse().findIndex(x=>!mt(x[u.axis]));a-=Math.max(0,w)}a=En(a,0,i-1)}if(S){let w=Math.max(za(d,l.axis,_,!0).hi+1,n?0:za(e,g,l.getPixelForValue(_),!0).hi+1);if(f){const x=d.slice(w-1).findIndex(C=>!mt(C[u.axis]));w+=Math.max(0,x)}o=En(w,a,i)-a}else o=i-a}return{start:a,count:o}}function u2(t){const{xScale:e,yScale:n,_scaleRanges:i}=t,a={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!i)return t._scaleRanges=a,!0;const o=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==n.min||i.ymax!==n.max;return Object.assign(i,a),o}const zu=t=>t===0||t===1,P0=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*Dt/n)),I0=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*Dt/n)+1,Il={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*Wt)+1,easeOutSine:t=>Math.sin(t*Wt),easeInOutSine:t=>-.5*(Math.cos(nt*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>zu(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>zu(t)?t:P0(t,.075,.3),easeOutElastic:t=>zu(t)?t:I0(t,.075,.3),easeInOutElastic(t){return zu(t)?t:t<.5?.5*P0(t*2,.1125,.45):.5+.5*I0(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-Il.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?Il.easeInBounce(t*2)*.5:Il.easeOutBounce(t*2-1)*.5+.5};function Xm(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function z0(t){return Xm(t)?t:new Yl(t)}function Cg(t){return Xm(t)?t:new Yl(t).saturate(.5).darken(.1).hexString()}const d2=["x","y","borderWidth","radius","tension"],h2=["color","borderColor","backgroundColor"];function f2(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:h2},numbers:{type:"number",properties:d2}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function g2(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const F0=new Map;function m2(t,e){e=e||{};const n=t+JSON.stringify(e);let i=F0.get(n);return i||(i=new Intl.NumberFormat(t,e),F0.set(n,i)),i}function Qm(t,e,n){return m2(e,n).format(t)}const p2={values(t){return rn(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const i=this.chart.options.locale;let a,o=t;if(n.length>1){const f=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(f<1e-4||f>1e15)&&(a="scientific"),o=v2(t,n)}const l=Ex(Math.abs(o)),u=isNaN(l)?1:Math.max(Math.min(-1*Math.floor(l),20),0),d={notation:a,minimumFractionDigits:u,maximumFractionDigits:u};return Object.assign(d,this.options.ticks.format),Qm(t,i,d)}};function v2(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var Dx={formatters:p2};function y2(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Dx.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Ua=Object.create(null),sm=Object.create(null);function zl(t,e){if(!e)return t;const n=e.split(".");for(let i=0,a=n.length;i<a;++i){const o=n[i];t=t[o]||(t[o]=Object.create(null))}return t}function Eg(t,e,n){return typeof e=="string"?Wl(zl(t,e),n):Wl(zl(t,""),e)}class _2{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,a)=>Cg(a.backgroundColor),this.hoverBorderColor=(i,a)=>Cg(a.borderColor),this.hoverColor=(i,a)=>Cg(a.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return Eg(this,e,n)}get(e){return zl(this,e)}describe(e,n){return Eg(sm,e,n)}override(e,n){return Eg(Ua,e,n)}route(e,n,i,a){const o=zl(this,e),l=zl(this,i),u="_"+n;Object.defineProperties(o,{[u]:{value:o[n],writable:!0},[n]:{enumerable:!0,get(){const d=this[u],f=l[a];return Xe(d)?Object.assign({},f,d):qe(d,f)},set(d){this[u]=d}}})}apply(e){e.forEach(n=>n(this))}}var jt=new _2({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[f2,g2,y2]);function b2(t){return!t||mt(t.size)||mt(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function U0(t,e,n,i,a){let o=e[a];return o||(o=e[a]=t.measureText(a).width,n.push(a)),o>i&&(i=o),i}function Da(t,e,n){const i=t.currentDevicePixelRatio,a=n!==0?Math.max(n/2,.5):0;return Math.round((e-a)*i)/i+a}function H0(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function am(t,e,n,i){Mx(t,e,n,i,null)}function Mx(t,e,n,i,a){let o,l,u,d,f,g,p,_;const b=e.pointStyle,S=e.rotation,w=e.radius;let x=(S||0)*Kj;if(b&&typeof b=="object"&&(o=b.toString(),o==="[object HTMLImageElement]"||o==="[object HTMLCanvasElement]")){t.save(),t.translate(n,i),t.rotate(x),t.drawImage(b,-b.width/2,-b.height/2,b.width,b.height),t.restore();return}if(!(isNaN(w)||w<=0)){switch(t.beginPath(),b){default:a?t.ellipse(n,i,a/2,w,0,0,Dt):t.arc(n,i,w,0,Dt),t.closePath();break;case"triangle":g=a?a/2:w,t.moveTo(n+Math.sin(x)*g,i-Math.cos(x)*w),x+=k0,t.lineTo(n+Math.sin(x)*g,i-Math.cos(x)*w),x+=k0,t.lineTo(n+Math.sin(x)*g,i-Math.cos(x)*w),t.closePath();break;case"rectRounded":f=w*.516,d=w-f,l=Math.cos(x+Ra)*d,p=Math.cos(x+Ra)*(a?a/2-f:d),u=Math.sin(x+Ra)*d,_=Math.sin(x+Ra)*(a?a/2-f:d),t.arc(n-p,i-u,f,x-nt,x-Wt),t.arc(n+_,i-l,f,x-Wt,x),t.arc(n+p,i+u,f,x,x+Wt),t.arc(n-_,i+l,f,x+Wt,x+nt),t.closePath();break;case"rect":if(!S){d=Math.SQRT1_2*w,g=a?a/2:d,t.rect(n-g,i-d,2*g,2*d);break}x+=Ra;case"rectRot":p=Math.cos(x)*(a?a/2:w),l=Math.cos(x)*w,u=Math.sin(x)*w,_=Math.sin(x)*(a?a/2:w),t.moveTo(n-p,i-u),t.lineTo(n+_,i-l),t.lineTo(n+p,i+u),t.lineTo(n-_,i+l),t.closePath();break;case"crossRot":x+=Ra;case"cross":p=Math.cos(x)*(a?a/2:w),l=Math.cos(x)*w,u=Math.sin(x)*w,_=Math.sin(x)*(a?a/2:w),t.moveTo(n-p,i-u),t.lineTo(n+p,i+u),t.moveTo(n+_,i-l),t.lineTo(n-_,i+l);break;case"star":p=Math.cos(x)*(a?a/2:w),l=Math.cos(x)*w,u=Math.sin(x)*w,_=Math.sin(x)*(a?a/2:w),t.moveTo(n-p,i-u),t.lineTo(n+p,i+u),t.moveTo(n+_,i-l),t.lineTo(n-_,i+l),x+=Ra,p=Math.cos(x)*(a?a/2:w),l=Math.cos(x)*w,u=Math.sin(x)*w,_=Math.sin(x)*(a?a/2:w),t.moveTo(n-p,i-u),t.lineTo(n+p,i+u),t.moveTo(n+_,i-l),t.lineTo(n-_,i+l);break;case"line":l=a?a/2:Math.cos(x)*w,u=Math.sin(x)*w,t.moveTo(n-l,i-u),t.lineTo(n+l,i+u);break;case"dash":t.moveTo(n,i),t.lineTo(n+Math.cos(x)*(a?a/2:w),i+Math.sin(x)*w);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function Zl(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function Zm(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Jm(t){t.restore()}function S2(t,e,n,i,a){if(!e)return t.lineTo(n.x,n.y);if(a==="middle"){const o=(e.x+n.x)/2;t.lineTo(o,e.y),t.lineTo(o,n.y)}else a==="after"!=!!i?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function w2(t,e,n,i){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?n.cp2x:n.cp1x,i?n.cp2y:n.cp1y,n.x,n.y)}function x2(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),mt(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function C2(t,e,n,i,a){if(a.strikethrough||a.underline){const o=t.measureText(i),l=e-o.actualBoundingBoxLeft,u=e+o.actualBoundingBoxRight,d=n-o.actualBoundingBoxAscent,f=n+o.actualBoundingBoxDescent,g=a.strikethrough?(d+f)/2:f;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=a.decorationWidth||2,t.moveTo(l,g),t.lineTo(u,g),t.stroke()}}function E2(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function Jl(t,e,n,i,a,o={}){const l=rn(e)?e:[e],u=o.strokeWidth>0&&o.strokeColor!=="";let d,f;for(t.save(),t.font=a.string,x2(t,o),d=0;d<l.length;++d)f=l[d],o.backdrop&&E2(t,o.backdrop),u&&(o.strokeColor&&(t.strokeStyle=o.strokeColor),mt(o.strokeWidth)||(t.lineWidth=o.strokeWidth),t.strokeText(f,n,i,o.maxWidth)),t.fillText(f,n,i,o.maxWidth),C2(t,n,i,f,o),i+=Number(a.lineHeight);t.restore()}function rm(t,e){const{x:n,y:i,w:a,h:o,radius:l}=e;t.arc(n+l.topLeft,i+l.topLeft,l.topLeft,1.5*nt,nt,!0),t.lineTo(n,i+o-l.bottomLeft),t.arc(n+l.bottomLeft,i+o-l.bottomLeft,l.bottomLeft,nt,Wt,!0),t.lineTo(n+a-l.bottomRight,i+o),t.arc(n+a-l.bottomRight,i+o-l.bottomRight,l.bottomRight,Wt,0,!0),t.lineTo(n+a,i+l.topRight),t.arc(n+a-l.topRight,i+l.topRight,l.topRight,0,-Wt,!0),t.lineTo(n+l.topLeft,i)}const T2=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,O2=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function A2(t,e){const n=(""+t).match(T2);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const R2=t=>+t||0;function ep(t,e){const n={},i=Xe(e),a=i?Object.keys(e):e,o=Xe(t)?i?l=>qe(t[l],t[e[l]]):l=>t[l]:()=>t;for(const l of a)n[l]=R2(o(l));return n}function D2(t){return ep(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Fl(t){return ep(t,["topLeft","topRight","bottomLeft","bottomRight"])}function oi(t){const e=D2(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function _n(t,e){t=t||{},e=e||jt.font;let n=qe(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let i=qe(t.style,e.style);i&&!(""+i).match(O2)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const a={family:qe(t.family,e.family),lineHeight:A2(qe(t.lineHeight,e.lineHeight),n),size:n,style:i,weight:qe(t.weight,e.weight),string:""};return a.string=b2(a),a}function Fu(t,e,n,i){let a,o,l;for(a=0,o=t.length;a<o;++a)if(l=t[a],l!==void 0&&l!==void 0)return l}function M2(t,e,n){const{min:i,max:a}=t,o=xx(e,(a-i)/2),l=(u,d)=>n&&u===0?0:u+d;return{min:l(i,-Math.abs(o)),max:l(a,o)}}function $a(t,e){return Object.assign(Object.create(t),e)}function tp(t,e=[""],n,i,a=()=>t[0]){const o=n||t;typeof i>"u"&&(i=Lx("_fallback",t));const l={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:o,_fallback:i,_getTarget:a,override:u=>tp([u,...t],e,o,i)};return new Proxy(l,{deleteProperty(u,d){return delete u[d],delete u._keys,delete t[0][d],!0},get(u,d){return Nx(u,d,()=>F2(d,e,t,u))},getOwnPropertyDescriptor(u,d){return Reflect.getOwnPropertyDescriptor(u._scopes[0],d)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(u,d){return $0(u).includes(d)},ownKeys(u){return $0(u)},set(u,d,f){const g=u._storage||(u._storage=a());return u[d]=g[d]=f,delete u._keys,!0}})}function Zr(t,e,n,i){const a={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:kx(t,i),setContext:o=>Zr(t,o,n,i),override:o=>Zr(t.override(o),e,n,i)};return new Proxy(a,{deleteProperty(o,l){return delete o[l],delete t[l],!0},get(o,l,u){return Nx(o,l,()=>N2(o,l,u))},getOwnPropertyDescriptor(o,l){return o._descriptors.allKeys?Reflect.has(t,l)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,l)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(o,l){return Reflect.has(t,l)},ownKeys(){return Reflect.ownKeys(t)},set(o,l,u){return t[l]=u,delete o[l],!0}})}function kx(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:i=e.indexable,_allKeys:a=e.allKeys}=t;return{allKeys:a,scriptable:n,indexable:i,isScriptable:sa(n)?n:()=>n,isIndexable:sa(i)?i:()=>i}}const k2=(t,e)=>t?t+Ym(e):e,np=(t,e)=>Xe(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function Nx(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const i=n();return t[e]=i,i}function N2(t,e,n){const{_proxy:i,_context:a,_subProxy:o,_descriptors:l}=t;let u=i[e];return sa(u)&&l.isScriptable(e)&&(u=j2(e,u,t,n)),rn(u)&&u.length&&(u=L2(e,u,t,l.isIndexable)),np(e,u)&&(u=Zr(u,a,o&&o[e],l)),u}function j2(t,e,n,i){const{_proxy:a,_context:o,_subProxy:l,_stack:u}=n;if(u.has(t))throw new Error("Recursion detected: "+Array.from(u).join("->")+"->"+t);u.add(t);let d=e(o,l||i);return u.delete(t),np(t,d)&&(d=ip(a._scopes,a,t,d)),d}function L2(t,e,n,i){const{_proxy:a,_context:o,_subProxy:l,_descriptors:u}=n;if(typeof o.index<"u"&&i(t))return e[o.index%e.length];if(Xe(e[0])){const d=e,f=a._scopes.filter(g=>g!==d);e=[];for(const g of d){const p=ip(f,a,t,g);e.push(Zr(p,o,l&&l[t],u))}}return e}function jx(t,e,n){return sa(t)?t(e,n):t}const P2=(t,e)=>t===!0?e:typeof t=="string"?Kl(e,t):void 0;function I2(t,e,n,i,a){for(const o of e){const l=P2(n,o);if(l){t.add(l);const u=jx(l._fallback,n,a);if(typeof u<"u"&&u!==n&&u!==i)return u}else if(l===!1&&typeof i<"u"&&n!==i)return null}return!1}function ip(t,e,n,i){const a=e._rootScopes,o=jx(e._fallback,n,i),l=[...t,...a],u=new Set;u.add(i);let d=B0(u,l,n,o||n,i);return d===null||typeof o<"u"&&o!==n&&(d=B0(u,l,o,d,i),d===null)?!1:tp(Array.from(u),[""],a,o,()=>z2(e,n,i))}function B0(t,e,n,i,a){for(;n;)n=I2(t,e,n,i,a);return n}function z2(t,e,n){const i=t._getTarget();e in i||(i[e]={});const a=i[e];return rn(a)&&Xe(n)?n:a||{}}function F2(t,e,n,i){let a;for(const o of e)if(a=Lx(k2(o,t),n),typeof a<"u")return np(t,a)?ip(n,i,t,a):a}function Lx(t,e){for(const n of e){if(!n)continue;const i=n[t];if(typeof i<"u")return i}}function $0(t){let e=t._keys;return e||(e=t._keys=U2(t._scopes)),e}function U2(t){const e=new Set;for(const n of t)for(const i of Object.keys(n).filter(a=>!a.startsWith("_")))e.add(i);return Array.from(e)}const H2=Number.EPSILON||1e-14,Jr=(t,e)=>e<t.length&&!t[e].skip&&t[e],Px=t=>t==="x"?"y":"x";function B2(t,e,n,i){const a=t.skip?e:t,o=e,l=n.skip?e:n,u=im(o,a),d=im(l,o);let f=u/(u+d),g=d/(u+d);f=isNaN(f)?0:f,g=isNaN(g)?0:g;const p=i*f,_=i*g;return{previous:{x:o.x-p*(l.x-a.x),y:o.y-p*(l.y-a.y)},next:{x:o.x+_*(l.x-a.x),y:o.y+_*(l.y-a.y)}}}function $2(t,e,n){const i=t.length;let a,o,l,u,d,f=Jr(t,0);for(let g=0;g<i-1;++g)if(d=f,f=Jr(t,g+1),!(!d||!f)){if(Pl(e[g],0,H2)){n[g]=n[g+1]=0;continue}a=n[g]/e[g],o=n[g+1]/e[g],u=Math.pow(a,2)+Math.pow(o,2),!(u<=9)&&(l=3/Math.sqrt(u),n[g]=a*l*e[g],n[g+1]=o*l*e[g])}}function V2(t,e,n="x"){const i=Px(n),a=t.length;let o,l,u,d=Jr(t,0);for(let f=0;f<a;++f){if(l=u,u=d,d=Jr(t,f+1),!u)continue;const g=u[n],p=u[i];l&&(o=(g-l[n])/3,u[`cp1${n}`]=g-o,u[`cp1${i}`]=p-o*e[f]),d&&(o=(d[n]-g)/3,u[`cp2${n}`]=g+o,u[`cp2${i}`]=p+o*e[f])}}function q2(t,e="x"){const n=Px(e),i=t.length,a=Array(i).fill(0),o=Array(i);let l,u,d,f=Jr(t,0);for(l=0;l<i;++l)if(u=d,d=f,f=Jr(t,l+1),!!d){if(f){const g=f[e]-d[e];a[l]=g!==0?(f[n]-d[n])/g:0}o[l]=u?f?Qr(a[l-1])!==Qr(a[l])?0:(a[l-1]+a[l])/2:a[l-1]:a[l]}$2(t,a,o),V2(t,o,e)}function Uu(t,e,n){return Math.max(Math.min(t,n),e)}function G2(t,e){let n,i,a,o,l,u=Zl(t[0],e);for(n=0,i=t.length;n<i;++n)l=o,o=u,u=n<i-1&&Zl(t[n+1],e),o&&(a=t[n],l&&(a.cp1x=Uu(a.cp1x,e.left,e.right),a.cp1y=Uu(a.cp1y,e.top,e.bottom)),u&&(a.cp2x=Uu(a.cp2x,e.left,e.right),a.cp2y=Uu(a.cp2y,e.top,e.bottom)))}function Y2(t,e,n,i,a){let o,l,u,d;if(e.spanGaps&&(t=t.filter(f=>!f.skip)),e.cubicInterpolationMode==="monotone")q2(t,a);else{let f=i?t[t.length-1]:t[0];for(o=0,l=t.length;o<l;++o)u=t[o],d=B2(f,u,t[Math.min(o+1,l-(i?0:1))%l],e.tension),u.cp1x=d.previous.x,u.cp1y=d.previous.y,u.cp2x=d.next.x,u.cp2y=d.next.y,f=u}e.capBezierPoints&&G2(t,n)}function sp(){return typeof window<"u"&&typeof document<"u"}function ap(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function _d(t,e,n){let i;return typeof t=="string"?(i=parseInt(t,10),t.indexOf("%")!==-1&&(i=i/100*e.parentNode[n])):i=t,i}const Pd=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function W2(t,e){return Pd(t).getPropertyValue(e)}const K2=["top","right","bottom","left"];function Fa(t,e,n){const i={};n=n?"-"+n:"";for(let a=0;a<4;a++){const o=K2[a];i[o]=parseFloat(t[e+"-"+o+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const X2=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function Q2(t,e){const n=t.touches,i=n&&n.length?n[0]:t,{offsetX:a,offsetY:o}=i;let l=!1,u,d;if(X2(a,o,t.target))u=a,d=o;else{const f=e.getBoundingClientRect();u=i.clientX-f.left,d=i.clientY-f.top,l=!0}return{x:u,y:d,box:l}}function ja(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:i}=e,a=Pd(n),o=a.boxSizing==="border-box",l=Fa(a,"padding"),u=Fa(a,"border","width"),{x:d,y:f,box:g}=Q2(t,n),p=l.left+(g&&u.left),_=l.top+(g&&u.top);let{width:b,height:S}=e;return o&&(b-=l.width+u.width,S-=l.height+u.height),{x:Math.round((d-p)/b*n.width/i),y:Math.round((f-_)/S*n.height/i)}}function Z2(t,e,n){let i,a;if(e===void 0||n===void 0){const o=t&&ap(t);if(!o)e=t.clientWidth,n=t.clientHeight;else{const l=o.getBoundingClientRect(),u=Pd(o),d=Fa(u,"border","width"),f=Fa(u,"padding");e=l.width-f.width-d.width,n=l.height-f.height-d.height,i=_d(u.maxWidth,o,"clientWidth"),a=_d(u.maxHeight,o,"clientHeight")}}return{width:e,height:n,maxWidth:i||yd,maxHeight:a||yd}}const Hu=t=>Math.round(t*10)/10;function J2(t,e,n,i){const a=Pd(t),o=Fa(a,"margin"),l=_d(a.maxWidth,t,"clientWidth")||yd,u=_d(a.maxHeight,t,"clientHeight")||yd,d=Z2(t,e,n);let{width:f,height:g}=d;if(a.boxSizing==="content-box"){const _=Fa(a,"border","width"),b=Fa(a,"padding");f-=b.width+_.width,g-=b.height+_.height}return f=Math.max(0,f-o.width),g=Math.max(0,i?f/i:g-o.height),f=Hu(Math.min(f,l,d.maxWidth)),g=Hu(Math.min(g,u,d.maxHeight)),f&&!g&&(g=Hu(f/2)),(e!==void 0||n!==void 0)&&i&&d.height&&g>d.height&&(g=d.height,f=Hu(Math.floor(g*i))),{width:f,height:g}}function V0(t,e,n){const i=e||1,a=Math.floor(t.height*i),o=Math.floor(t.width*i);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const l=t.canvas;return l.style&&(n||!l.style.height&&!l.style.width)&&(l.style.height=`${t.height}px`,l.style.width=`${t.width}px`),t.currentDevicePixelRatio!==i||l.height!==a||l.width!==o?(t.currentDevicePixelRatio=i,l.height=a,l.width=o,t.ctx.setTransform(i,0,0,i,0,0),!0):!1}const eL=(function(){let t=!1;try{const e={get passive(){return t=!0,!1}};sp()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t})();function q0(t,e){const n=W2(t,e),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function La(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function tL(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:i==="middle"?n<.5?t.y:e.y:i==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function nL(t,e,n,i){const a={x:t.cp2x,y:t.cp2y},o={x:e.cp1x,y:e.cp1y},l=La(t,a,n),u=La(a,o,n),d=La(o,e,n),f=La(l,u,n),g=La(u,d,n);return La(f,g,n)}const iL=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,i){return n-i},leftForLtr(n,i){return n-i}}},sL=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function Wr(t,e,n){return t?iL(e,n):sL()}function Ix(t,e){let n,i;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=i)}function zx(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function Fx(t){return t==="angle"?{between:Ql,compare:t2,normalize:pi}:{between:qr,compare:(e,n)=>e-n,normalize:e=>e}}function G0({start:t,end:e,count:n,loop:i,style:a}){return{start:t%n,end:e%n,loop:i&&(e-t+1)%n===0,style:a}}function aL(t,e,n){const{property:i,start:a,end:o}=n,{between:l,normalize:u}=Fx(i),d=e.length;let{start:f,end:g,loop:p}=t,_,b;if(p){for(f+=d,g+=d,_=0,b=d;_<b&&l(u(e[f%d][i]),a,o);++_)f--,g--;f%=d,g%=d}return g<f&&(g+=d),{start:f,end:g,loop:p,style:t.style}}function rL(t,e,n){if(!n)return[t];const{property:i,start:a,end:o}=n,l=e.length,{compare:u,between:d,normalize:f}=Fx(i),{start:g,end:p,loop:_,style:b}=aL(t,e,n),S=[];let w=!1,x=null,C,T,O;const M=()=>d(a,O,C)&&u(a,O)!==0,D=()=>u(o,C)===0||d(o,O,C),U=()=>w||M(),L=()=>!w||D();for(let B=g,H=g;B<=p;++B)T=e[B%l],!T.skip&&(C=f(T[i]),C!==O&&(w=d(C,a,o),x===null&&U()&&(x=u(C,a)===0?B:H),x!==null&&L()&&(S.push(G0({start:x,end:B,loop:_,count:l,style:b})),x=null),H=B,O=C));return x!==null&&S.push(G0({start:x,end:p,loop:_,count:l,style:b})),S}function oL(t,e){const n=[],i=t.segments;for(let a=0;a<i.length;a++){const o=rL(i[a],t.points,e);o.length&&n.push(...o)}return n}function lL(t,e,n,i){let a=0,o=e-1;if(n&&!i)for(;a<e&&!t[a].skip;)a++;for(;a<e&&t[a].skip;)a++;for(a%=e,n&&(o+=a);o>a&&t[o%e].skip;)o--;return o%=e,{start:a,end:o}}function cL(t,e,n,i){const a=t.length,o=[];let l=e,u=t[e],d;for(d=e+1;d<=n;++d){const f=t[d%a];f.skip||f.stop?u.skip||(i=!1,o.push({start:e%a,end:(d-1)%a,loop:i}),e=l=f.stop?d:null):(l=d,u.skip&&(e=d)),u=f}return l!==null&&o.push({start:e%a,end:l%a,loop:i}),o}function uL(t,e){const n=t.points,i=t.options.spanGaps,a=n.length;if(!a)return[];const o=!!t._loop,{start:l,end:u}=lL(n,a,o,i);if(i===!0)return Y0(t,[{start:l,end:u,loop:o}],n,e);const d=u<l?u+a:u,f=!!t._fullLoop&&l===0&&u===a-1;return Y0(t,cL(n,l,d,f),n,e)}function Y0(t,e,n,i){return!i||!i.setContext||!n?e:dL(t,e,n,i)}function dL(t,e,n,i){const a=t._chart.getContext(),o=W0(t.options),{_datasetIndex:l,options:{spanGaps:u}}=t,d=n.length,f=[];let g=o,p=e[0].start,_=p;function b(S,w,x,C){const T=u?-1:1;if(S!==w){for(S+=d;n[S%d].skip;)S-=T;for(;n[w%d].skip;)w+=T;S%d!==w%d&&(f.push({start:S%d,end:w%d,loop:x,style:C}),g=C,p=w%d)}}for(const S of e){p=u?p:S.start;let w=n[p%d],x;for(_=p+1;_<=S.end;_++){const C=n[_%d];x=W0(i.setContext($a(a,{type:"segment",p0:w,p1:C,p0DataIndex:(_-1)%d,p1DataIndex:_%d,datasetIndex:l}))),hL(x,g)&&b(p,_-1,S.loop,g),w=C,g=x}p<_-1&&b(p,_-1,S.loop,g)}return f}function W0(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function hL(t,e){if(!e)return!1;const n=[],i=function(a,o){return Xm(o)?(n.includes(o)||n.push(o),n.indexOf(o)):o};return JSON.stringify(t,i)!==JSON.stringify(e,i)}function Bu(t,e,n){return t.options.clip?t[n]:e[n]}function fL(t,e){const{xScale:n,yScale:i}=t;return n&&i?{left:Bu(n,e,"left"),right:Bu(n,e,"right"),top:Bu(i,e,"top"),bottom:Bu(i,e,"bottom")}:e}function gL(t,e){const n=e._clip;if(n.disabled)return!1;const i=fL(e,t.chartArea);return{left:n.left===!1?0:i.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:i.right+(n.right===!0?0:n.right),top:n.top===!1?0:i.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:i.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class mL{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,i,a){const o=n.listeners[a],l=n.duration;o.forEach(u=>u({chart:e,initial:n.initial,numSteps:l,currentStep:Math.min(i-n.start,l)}))}_refresh(){this._request||(this._running=!0,this._request=Ax.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((i,a)=>{if(!i.running||!i.items.length)return;const o=i.items;let l=o.length-1,u=!1,d;for(;l>=0;--l)d=o[l],d._active?(d._total>i.duration&&(i.duration=d._total),d.tick(e),u=!0):(o[l]=o[o.length-1],o.pop());u&&(a.draw(),this._notify(a,i,e,"progress")),o.length||(i.running=!1,this._notify(a,i,e,"complete"),i.initial=!1),n+=o.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let i=n.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,i)),i}listen(e,n,i){this._getAnims(e).listeners[n].push(i)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((i,a)=>Math.max(i,a._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const i=n.items;let a=i.length-1;for(;a>=0;--a)i[a].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var us=new mL;const K0="transparent",pL={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const i=z0(t||K0),a=i.valid&&z0(e||K0);return a&&a.valid?a.mix(i,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class vL{constructor(e,n,i,a){const o=n[i];a=Fu([e.to,a,o,e.from]);const l=Fu([e.from,o,a]);this._active=!0,this._fn=e.fn||pL[e.type||typeof l],this._easing=Il[e.easing]||Il.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=i,this._from=l,this._to=a,this._promises=void 0}active(){return this._active}update(e,n,i){if(this._active){this._notify(!1);const a=this._target[this._prop],o=i-this._start,l=this._duration-o;this._start=i,this._duration=Math.floor(Math.max(l,e.duration)),this._total+=o,this._loop=!!e.loop,this._to=Fu([e.to,n,a,e.from]),this._from=Fu([e.from,a,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,i=this._duration,a=this._prop,o=this._from,l=this._loop,u=this._to;let d;if(this._active=o!==u&&(l||n<i),!this._active){this._target[a]=u,this._notify(!0);return}if(n<0){this._target[a]=o;return}d=n/i%2,d=l&&d>1?2-d:d,d=this._easing(Math.min(1,Math.max(0,d))),this._target[a]=this._fn(o,u,d)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,i)=>{e.push({res:n,rej:i})})}_notify(e){const n=e?"res":"rej",i=this._promises||[];for(let a=0;a<i.length;a++)i[a][n]()}}class Ux{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!Xe(e))return;const n=Object.keys(jt.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(a=>{const o=e[a];if(!Xe(o))return;const l={};for(const u of n)l[u]=o[u];(rn(o.properties)&&o.properties||[a]).forEach(u=>{(u===a||!i.has(u))&&i.set(u,l)})})}_animateOptions(e,n){const i=n.options,a=_L(e,i);if(!a)return[];const o=this._createAnimations(a,i);return i.$shared&&yL(e.options.$animations,i).then(()=>{e.options=i},()=>{}),o}_createAnimations(e,n){const i=this._properties,a=[],o=e.$animations||(e.$animations={}),l=Object.keys(n),u=Date.now();let d;for(d=l.length-1;d>=0;--d){const f=l[d];if(f.charAt(0)==="$")continue;if(f==="options"){a.push(...this._animateOptions(e,n));continue}const g=n[f];let p=o[f];const _=i.get(f);if(p)if(_&&p.active()){p.update(_,g,u);continue}else p.cancel();if(!_||!_.duration){e[f]=g;continue}o[f]=p=new vL(_,e,f,g),a.push(p)}return a}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const i=this._createAnimations(e,n);if(i.length)return us.add(this._chart,i),!0}}function yL(t,e){const n=[],i=Object.keys(e);for(let a=0;a<i.length;a++){const o=t[i[a]];o&&o.active()&&n.push(o.wait())}return Promise.all(n)}function _L(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function X0(t,e){const n=t&&t.options||{},i=n.reverse,a=n.min===void 0?e:0,o=n.max===void 0?e:0;return{start:i?o:a,end:i?a:o}}function bL(t,e,n){if(n===!1)return!1;const i=X0(t,n),a=X0(e,n);return{top:a.end,right:i.end,bottom:a.start,left:i.start}}function SL(t){let e,n,i,a;return Xe(t)?(e=t.top,n=t.right,i=t.bottom,a=t.left):e=n=i=a=t,{top:e,right:n,bottom:i,left:a,disabled:t===!1}}function Hx(t,e){const n=[],i=t._getSortedDatasetMetas(e);let a,o;for(a=0,o=i.length;a<o;++a)n.push(i[a].index);return n}function Q0(t,e,n,i={}){const a=t.keys,o=i.mode==="single";let l,u,d,f;if(e===null)return;let g=!1;for(l=0,u=a.length;l<u;++l){if(d=+a[l],d===n){if(g=!0,i.all)continue;break}f=t.values[d],ri(f)&&(o||e===0||Qr(e)===Qr(f))&&(e+=f)}return!g&&!i.all?0:e}function wL(t,e){const{iScale:n,vScale:i}=e,a=n.axis==="x"?"x":"y",o=i.axis==="x"?"x":"y",l=Object.keys(t),u=new Array(l.length);let d,f,g;for(d=0,f=l.length;d<f;++d)g=l[d],u[d]={[a]:g,[o]:t[g]};return u}function Tg(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function xL(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function CL(t){const{min:e,max:n,minDefined:i,maxDefined:a}=t.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:a?n:Number.POSITIVE_INFINITY}}function EL(t,e,n){const i=t[e]||(t[e]={});return i[n]||(i[n]={})}function Z0(t,e,n,i){for(const a of e.getMatchingVisibleMetas(i).reverse()){const o=t[a.index];if(n&&o>0||!n&&o<0)return a.index}return null}function J0(t,e){const{chart:n,_cachedMeta:i}=t,a=n._stacks||(n._stacks={}),{iScale:o,vScale:l,index:u}=i,d=o.axis,f=l.axis,g=xL(o,l,i),p=e.length;let _;for(let b=0;b<p;++b){const S=e[b],{[d]:w,[f]:x}=S,C=S._stacks||(S._stacks={});_=C[f]=EL(a,g,w),_[u]=x,_._top=Z0(_,l,!0,i.type),_._bottom=Z0(_,l,!1,i.type);const T=_._visualValues||(_._visualValues={});T[u]=x}}function Og(t,e){const n=t.scales;return Object.keys(n).filter(i=>n[i].axis===e).shift()}function TL(t,e){return $a(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function OL(t,e,n){return $a(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function ml(t,e){const n=t.controller.index,i=t.vScale&&t.vScale.axis;if(i){e=e||t._parsed;for(const a of e){const o=a._stacks;if(!o||o[i]===void 0||o[i][n]===void 0)return;delete o[i][n],o[i]._visualValues!==void 0&&o[i]._visualValues[n]!==void 0&&delete o[i]._visualValues[n]}}}const Ag=t=>t==="reset"||t==="none",eS=(t,e)=>e?t:Object.assign({},t),AL=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:Hx(n,!0),values:null};class rp{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Tg(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&ml(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,i=this.getDataset(),a=(p,_,b,S)=>p==="x"?_:p==="r"?S:b,o=n.xAxisID=qe(i.xAxisID,Og(e,"x")),l=n.yAxisID=qe(i.yAxisID,Og(e,"y")),u=n.rAxisID=qe(i.rAxisID,Og(e,"r")),d=n.indexAxis,f=n.iAxisID=a(d,o,l,u),g=n.vAxisID=a(d,l,o,u);n.xScale=this.getScaleForId(o),n.yScale=this.getScaleForId(l),n.rScale=this.getScaleForId(u),n.iScale=this.getScaleForId(f),n.vScale=this.getScaleForId(g)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&L0(this._data,this),e._stacked&&ml(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),i=this._data;if(Xe(n)){const a=this._cachedMeta;this._data=wL(n,a)}else if(i!==n){if(i){L0(i,this);const a=this._cachedMeta;ml(a),a._parsed=[]}n&&Object.isExtensible(n)&&a2(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,i=this.getDataset();let a=!1;this._dataCheck();const o=n._stacked;n._stacked=Tg(n.vScale,n),n.stack!==i.stack&&(a=!0,ml(n),n.stack=i.stack),this._resyncElements(e),(a||o!==n._stacked)&&(J0(this,n._parsed),n._stacked=Tg(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),i=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:i,_data:a}=this,{iScale:o,_stacked:l}=i,u=o.axis;let d=e===0&&n===a.length?!0:i._sorted,f=e>0&&i._parsed[e-1],g,p,_;if(this._parsing===!1)i._parsed=a,i._sorted=!0,_=a;else{rn(a[e])?_=this.parseArrayData(i,a,e,n):Xe(a[e])?_=this.parseObjectData(i,a,e,n):_=this.parsePrimitiveData(i,a,e,n);const b=()=>p[u]===null||f&&p[u]<f[u];for(g=0;g<n;++g)i._parsed[g+e]=p=_[g],d&&(b()&&(d=!1),f=p);i._sorted=d}l&&J0(this,_)}parsePrimitiveData(e,n,i,a){const{iScale:o,vScale:l}=e,u=o.axis,d=l.axis,f=o.getLabels(),g=o===l,p=new Array(a);let _,b,S;for(_=0,b=a;_<b;++_)S=_+i,p[_]={[u]:g||o.parse(f[S],S),[d]:l.parse(n[S],S)};return p}parseArrayData(e,n,i,a){const{xScale:o,yScale:l}=e,u=new Array(a);let d,f,g,p;for(d=0,f=a;d<f;++d)g=d+i,p=n[g],u[d]={x:o.parse(p[0],g),y:l.parse(p[1],g)};return u}parseObjectData(e,n,i,a){const{xScale:o,yScale:l}=e,{xAxisKey:u="x",yAxisKey:d="y"}=this._parsing,f=new Array(a);let g,p,_,b;for(g=0,p=a;g<p;++g)_=g+i,b=n[_],f[g]={x:o.parse(Kl(b,u),_),y:l.parse(Kl(b,d),_)};return f}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,i){const a=this.chart,o=this._cachedMeta,l=n[e.axis],u={keys:Hx(a,!0),values:n._stacks[e.axis]._visualValues};return Q0(u,l,o.index,{mode:i})}updateRangeFromParsed(e,n,i,a){const o=i[n.axis];let l=o===null?NaN:o;const u=a&&i._stacks[n.axis];a&&u&&(a.values=u,l=Q0(a,o,this._cachedMeta.index)),e.min=Math.min(e.min,l),e.max=Math.max(e.max,l)}getMinMax(e,n){const i=this._cachedMeta,a=i._parsed,o=i._sorted&&e===i.iScale,l=a.length,u=this._getOtherScale(e),d=AL(n,i,this.chart),f={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:g,max:p}=CL(u);let _,b;function S(){b=a[_];const w=b[u.axis];return!ri(b[e.axis])||g>w||p<w}for(_=0;_<l&&!(!S()&&(this.updateRangeFromParsed(f,e,b,d),o));++_);if(o){for(_=l-1;_>=0;--_)if(!S()){this.updateRangeFromParsed(f,e,b,d);break}}return f}getAllParsedValues(e){const n=this._cachedMeta._parsed,i=[];let a,o,l;for(a=0,o=n.length;a<o;++a)l=n[a][e.axis],ri(l)&&i.push(l);return i}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,i=n.iScale,a=n.vScale,o=this.getParsed(e);return{label:i?""+i.getLabelForValue(o[i.axis]):"",value:a?""+a.getLabelForValue(o[a.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=SL(qe(this.options.clip,bL(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,i=this._cachedMeta,a=i.data||[],o=n.chartArea,l=[],u=this._drawStart||0,d=this._drawCount||a.length-u,f=this.options.drawActiveElementsOnTop;let g;for(i.dataset&&i.dataset.draw(e,o,u,d),g=u;g<u+d;++g){const p=a[g];p.hidden||(p.active&&f?l.push(p):p.draw(e,o))}for(g=0;g<l.length;++g)l[g].draw(e,o)}getStyle(e,n){const i=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(e||0,i)}getContext(e,n,i){const a=this.getDataset();let o;if(e>=0&&e<this._cachedMeta.data.length){const l=this._cachedMeta.data[e];o=l.$context||(l.$context=OL(this.getContext(),e,l)),o.parsed=this.getParsed(e),o.raw=a.data[e],o.index=o.dataIndex=e}else o=this.$context||(this.$context=TL(this.chart.getContext(),this.index)),o.dataset=a,o.index=o.datasetIndex=this.index;return o.active=!!n,o.mode=i,o}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",i){const a=n==="active",o=this._cachedDataOpts,l=e+"-"+n,u=o[l],d=this.enableOptionSharing&&vd(i);if(u)return eS(u,d);const f=this.chart.config,g=f.datasetElementScopeKeys(this._type,e),p=a?[`${e}Hover`,"hover",e,""]:[e,""],_=f.getOptionScopes(this.getDataset(),g),b=Object.keys(jt.elements[e]),S=()=>this.getContext(i,a,n),w=f.resolveNamedOptions(_,b,S,p);return w.$shared&&(w.$shared=d,o[l]=Object.freeze(eS(w,d))),w}_resolveAnimations(e,n,i){const a=this.chart,o=this._cachedDataOpts,l=`animation-${n}`,u=o[l];if(u)return u;let d;if(a.options.animation!==!1){const g=this.chart.config,p=g.datasetAnimationScopeKeys(this._type,n),_=g.getOptionScopes(this.getDataset(),p);d=g.createResolver(_,this.getContext(e,i,n))}const f=new Ux(a,d&&d.animations);return d&&d._cacheable&&(o[l]=Object.freeze(f)),f}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||Ag(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const i=this.resolveDataElementOptions(e,n),a=this._sharedOptions,o=this.getSharedOptions(i),l=this.includeOptions(n,o)||o!==a;return this.updateSharedOptions(o,n,i),{sharedOptions:o,includeOptions:l}}updateElement(e,n,i,a){Ag(a)?Object.assign(e,i):this._resolveAnimations(n,a).update(e,i)}updateSharedOptions(e,n,i){e&&!Ag(n)&&this._resolveAnimations(void 0,n).update(e,i)}_setStyle(e,n,i,a){e.active=a;const o=this.getStyle(n,a);this._resolveAnimations(n,i,a).update(e,{options:!a&&this.getSharedOptions(o)||o})}removeHoverStyle(e,n,i){this._setStyle(e,i,"active",!1)}setHoverStyle(e,n,i){this._setStyle(e,i,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,i=this._cachedMeta.data;for(const[u,d,f]of this._syncList)this[u](d,f);this._syncList=[];const a=i.length,o=n.length,l=Math.min(o,a);l&&this.parse(0,l),o>a?this._insertElements(a,o-a,e):o<a&&this._removeElements(o,a-o)}_insertElements(e,n,i=!0){const a=this._cachedMeta,o=a.data,l=e+n;let u;const d=f=>{for(f.length+=n,u=f.length-1;u>=l;u--)f[u]=f[u-n]};for(d(o),u=e;u<l;++u)o[u]=new this.dataElementType;this._parsing&&d(a._parsed),this.parse(e,n),i&&this.updateElements(o,e,n,"reset")}updateElements(e,n,i,a){}_removeElements(e,n){const i=this._cachedMeta;if(this._parsing){const a=i._parsed.splice(e,n);i._stacked&&ml(i,a)}i.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,i,a]=e;this[n](i,a)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const i=arguments.length-2;i&&this._sync(["_insertElements",e,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function RL(t,e,n){let i=1,a=1,o=0,l=0;if(e<Dt){const u=t,d=u+e,f=Math.cos(u),g=Math.sin(u),p=Math.cos(d),_=Math.sin(d),b=(O,M,D)=>Ql(O,u,d,!0)?1:Math.max(M,M*n,D,D*n),S=(O,M,D)=>Ql(O,u,d,!0)?-1:Math.min(M,M*n,D,D*n),w=b(0,f,p),x=b(Wt,g,_),C=S(nt,f,p),T=S(nt+Wt,g,_);i=(w-C)/2,a=(x-T)/2,o=-(w+C)/2,l=-(x+T)/2}return{ratioX:i,ratioY:a,offsetX:o,offsetY:l}}class DL extends rp{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:i,color:a}}=e.legend.options;return n.labels.map((o,l)=>{const d=e.getDatasetMeta(0).controller.getStyle(l);return{text:o,fillStyle:d.backgroundColor,strokeStyle:d.borderColor,fontColor:a,lineWidth:d.borderWidth,pointStyle:i,hidden:!e.getDataVisibility(l),index:l}})}return[]}},onClick(e,n,i){i.chart.toggleDataVisibility(n.index),i.chart.update()}}}};constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const i=this.getDataset().data,a=this._cachedMeta;if(this._parsing===!1)a._parsed=i;else{let o=d=>+i[d];if(Xe(i[e])){const{key:d="value"}=this._parsing;o=f=>+Kl(i[f],d)}let l,u;for(l=e,u=e+n;l<u;++l)a._parsed[l]=o(l)}}_getRotation(){return ps(this.options.rotation-90)}_getCircumference(){return ps(this.options.circumference)}_getRotationExtents(){let e=Dt,n=-Dt;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const a=this.chart.getDatasetMeta(i).controller,o=a._getRotation(),l=a._getCircumference();e=Math.min(e,o),n=Math.max(n,o+l)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:i}=n,a=this._cachedMeta,o=a.data,l=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,u=Math.max((Math.min(i.width,i.height)-l)/2,0),d=Math.min(Bj(this.options.cutout,u),1),f=this._getRingWeight(this.index),{circumference:g,rotation:p}=this._getRotationExtents(),{ratioX:_,ratioY:b,offsetX:S,offsetY:w}=RL(p,g,d),x=(i.width-l)/_,C=(i.height-l)/b,T=Math.max(Math.min(x,C)/2,0),O=xx(this.options.radius,T),M=Math.max(O*d,0),D=(O-M)/this._getVisibleDatasetWeightTotal();this.offsetX=S*O,this.offsetY=w*O,a.total=this.calculateTotal(),this.outerRadius=O-D*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-D*f,0),this.updateElements(o,0,o.length,e)}_circumference(e,n){const i=this.options,a=this._cachedMeta,o=this._getCircumference();return n&&i.animation.animateRotate||!this.chart.getDataVisibility(e)||a._parsed[e]===null||a.data[e].hidden?0:this.calculateCircumference(a._parsed[e]*o/Dt)}updateElements(e,n,i,a){const o=a==="reset",l=this.chart,u=l.chartArea,f=l.options.animation,g=(u.left+u.right)/2,p=(u.top+u.bottom)/2,_=o&&f.animateScale,b=_?0:this.innerRadius,S=_?0:this.outerRadius,{sharedOptions:w,includeOptions:x}=this._getSharedOptions(n,a);let C=this._getRotation(),T;for(T=0;T<n;++T)C+=this._circumference(T,o);for(T=n;T<n+i;++T){const O=this._circumference(T,o),M=e[T],D={x:g+this.offsetX,y:p+this.offsetY,startAngle:C,endAngle:C+O,circumference:O,outerRadius:S,innerRadius:b};x&&(D.options=w||this.resolveDataElementOptions(T,M.active?"active":a)),C+=O,this.updateElement(M,T,D,a)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let i=0,a;for(a=0;a<n.length;a++){const o=e._parsed[a];o!==null&&!isNaN(o)&&this.chart.getDataVisibility(a)&&!n[a].hidden&&(i+=Math.abs(o))}return i}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?Dt*(Math.abs(e)/n):0}getLabelAndValue(e){const n=this._cachedMeta,i=this.chart,a=i.data.labels||[],o=Qm(n._parsed[e],i.options.locale);return{label:a[e]||"",value:o}}getMaxBorderWidth(e){let n=0;const i=this.chart;let a,o,l,u,d;if(!e){for(a=0,o=i.data.datasets.length;a<o;++a)if(i.isDatasetVisible(a)){l=i.getDatasetMeta(a),e=l.data,u=l.controller;break}}if(!e)return 0;for(a=0,o=e.length;a<o;++a)d=u.resolveDataElementOptions(a),d.borderAlign!=="inner"&&(n=Math.max(n,d.borderWidth||0,d.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let i=0,a=e.length;i<a;++i){const o=this.resolveDataElementOptions(i);n=Math.max(n,o.offset||0,o.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let i=0;i<e;++i)this.chart.isDatasetVisible(i)&&(n+=this._getRingWeight(i));return n}_getRingWeight(e){return Math.max(qe(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class ML extends rp{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:i,data:a=[],_dataset:o}=n,l=this.chart._animationsDisabled;let{start:u,count:d}=c2(n,a,l);this._drawStart=u,this._drawCount=d,u2(n)&&(u=0,d=a.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!o._decimated,i.points=a;const f=this.resolveDatasetElementOptions(e);this.options.showLine||(f.borderWidth=0),f.segment=this.options.segment,this.updateElement(i,void 0,{animated:!l,options:f},e),this.updateElements(a,u,d,e)}updateElements(e,n,i,a){const o=a==="reset",{iScale:l,vScale:u,_stacked:d,_dataset:f}=this._cachedMeta,{sharedOptions:g,includeOptions:p}=this._getSharedOptions(n,a),_=l.axis,b=u.axis,{spanGaps:S,segment:w}=this.options,x=Xl(S)?S:Number.POSITIVE_INFINITY,C=this.chart._animationsDisabled||o||a==="none",T=n+i,O=e.length;let M=n>0&&this.getParsed(n-1);for(let D=0;D<O;++D){const U=e[D],L=C?U:{};if(D<n||D>=T){L.skip=!0;continue}const B=this.getParsed(D),H=mt(B[b]),Q=L[_]=l.getPixelForValue(B[_],D),Z=L[b]=o||H?u.getBasePixel():u.getPixelForValue(d?this.applyStack(u,B,d):B[b],D);L.skip=isNaN(Q)||isNaN(Z)||H,L.stop=D>0&&Math.abs(B[_]-M[_])>x,w&&(L.parsed=B,L.raw=f.data[D]),p&&(L.options=g||this.resolveDataElementOptions(D,U.active?"active":a)),C||this.updateElement(U,D,L,a),M=B}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,i=n.options&&n.options.borderWidth||0,a=e.data||[];if(!a.length)return i;const o=a[0].size(this.resolveDataElementOptions(0)),l=a[a.length-1].size(this.resolveDataElementOptions(a.length-1));return Math.max(i,o,l)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}class kL extends DL{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}function Ma(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class op{static override(e){Object.assign(op.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return Ma()}parse(){return Ma()}format(){return Ma()}add(){return Ma()}diff(){return Ma()}startOf(){return Ma()}endOf(){return Ma()}}var NL={_date:op};function jL(t,e,n,i){const{controller:a,data:o,_sorted:l}=t,u=a._cachedMeta.iScale,d=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(u&&e===u.axis&&e!=="r"&&l&&o.length){const f=u._reversePixels?i2:za;if(i){if(a._sharedOptions){const g=o[0],p=typeof g.getRange=="function"&&g.getRange(e);if(p){const _=f(o,e,n-p),b=f(o,e,n+p);return{lo:_.lo,hi:b.hi}}}}else{const g=f(o,e,n);if(d){const{vScale:p}=a._cachedMeta,{_parsed:_}=t,b=_.slice(0,g.lo+1).reverse().findIndex(w=>!mt(w[p.axis]));g.lo-=Math.max(0,b);const S=_.slice(g.hi).findIndex(w=>!mt(w[p.axis]));g.hi+=Math.max(0,S)}return g}}return{lo:0,hi:o.length-1}}function Id(t,e,n,i,a){const o=t.getSortedVisibleDatasetMetas(),l=n[e];for(let u=0,d=o.length;u<d;++u){const{index:f,data:g}=o[u],{lo:p,hi:_}=jL(o[u],e,l,a);for(let b=p;b<=_;++b){const S=g[b];S.skip||i(S,f,b)}}}function LL(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(i,a){const o=e?Math.abs(i.x-a.x):0,l=n?Math.abs(i.y-a.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(l,2))}}function Rg(t,e,n,i,a){const o=[];return!a&&!t.isPointInArea(e)||Id(t,n,e,function(u,d,f){!a&&!Zl(u,t.chartArea,0)||u.inRange(e.x,e.y,i)&&o.push({element:u,datasetIndex:d,index:f})},!0),o}function PL(t,e,n,i){let a=[];function o(l,u,d){const{startAngle:f,endAngle:g}=l.getProps(["startAngle","endAngle"],i),{angle:p}=Tx(l,{x:e.x,y:e.y});Ql(p,f,g)&&a.push({element:l,datasetIndex:u,index:d})}return Id(t,n,e,o),a}function IL(t,e,n,i,a,o){let l=[];const u=LL(n);let d=Number.POSITIVE_INFINITY;function f(g,p,_){const b=g.inRange(e.x,e.y,a);if(i&&!b)return;const S=g.getCenterPoint(a);if(!(!!o||t.isPointInArea(S))&&!b)return;const x=u(e,S);x<d?(l=[{element:g,datasetIndex:p,index:_}],d=x):x===d&&l.push({element:g,datasetIndex:p,index:_})}return Id(t,n,e,f),l}function Dg(t,e,n,i,a,o){return!o&&!t.isPointInArea(e)?[]:n==="r"&&!i?PL(t,e,n,a):IL(t,e,n,i,a,o)}function tS(t,e,n,i,a){const o=[],l=n==="x"?"inXRange":"inYRange";let u=!1;return Id(t,n,e,(d,f,g)=>{d[l]&&d[l](e[n],a)&&(o.push({element:d,datasetIndex:f,index:g}),u=u||d.inRange(e.x,e.y,a))}),i&&!u?[]:o}var zL={modes:{index(t,e,n,i){const a=ja(e,t),o=n.axis||"x",l=n.includeInvisible||!1,u=n.intersect?Rg(t,a,o,i,l):Dg(t,a,o,!1,i,l),d=[];return u.length?(t.getSortedVisibleDatasetMetas().forEach(f=>{const g=u[0].index,p=f.data[g];p&&!p.skip&&d.push({element:p,datasetIndex:f.index,index:g})}),d):[]},dataset(t,e,n,i){const a=ja(e,t),o=n.axis||"xy",l=n.includeInvisible||!1;let u=n.intersect?Rg(t,a,o,i,l):Dg(t,a,o,!1,i,l);if(u.length>0){const d=u[0].datasetIndex,f=t.getDatasetMeta(d).data;u=[];for(let g=0;g<f.length;++g)u.push({element:f[g],datasetIndex:d,index:g})}return u},point(t,e,n,i){const a=ja(e,t),o=n.axis||"xy",l=n.includeInvisible||!1;return Rg(t,a,o,i,l)},nearest(t,e,n,i){const a=ja(e,t),o=n.axis||"xy",l=n.includeInvisible||!1;return Dg(t,a,o,n.intersect,i,l)},x(t,e,n,i){const a=ja(e,t);return tS(t,a,"x",n.intersect,i)},y(t,e,n,i){const a=ja(e,t);return tS(t,a,"y",n.intersect,i)}}};const Bx=["left","top","right","bottom"];function pl(t,e){return t.filter(n=>n.pos===e)}function nS(t,e){return t.filter(n=>Bx.indexOf(n.pos)===-1&&n.box.axis===e)}function vl(t,e){return t.sort((n,i)=>{const a=e?i:n,o=e?n:i;return a.weight===o.weight?a.index-o.index:a.weight-o.weight})}function FL(t){const e=[];let n,i,a,o,l,u;for(n=0,i=(t||[]).length;n<i;++n)a=t[n],{position:o,options:{stack:l,stackWeight:u=1}}=a,e.push({index:n,box:a,pos:o,horizontal:a.isHorizontal(),weight:a.weight,stack:l&&o+l,stackWeight:u});return e}function UL(t){const e={};for(const n of t){const{stack:i,pos:a,stackWeight:o}=n;if(!i||!Bx.includes(a))continue;const l=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});l.count++,l.weight+=o}return e}function HL(t,e){const n=UL(t),{vBoxMaxWidth:i,hBoxMaxHeight:a}=e;let o,l,u;for(o=0,l=t.length;o<l;++o){u=t[o];const{fullSize:d}=u.box,f=n[u.stack],g=f&&u.stackWeight/f.weight;u.horizontal?(u.width=g?g*i:d&&e.availableWidth,u.height=a):(u.width=i,u.height=g?g*a:d&&e.availableHeight)}return n}function BL(t){const e=FL(t),n=vl(e.filter(f=>f.box.fullSize),!0),i=vl(pl(e,"left"),!0),a=vl(pl(e,"right")),o=vl(pl(e,"top"),!0),l=vl(pl(e,"bottom")),u=nS(e,"x"),d=nS(e,"y");return{fullSize:n,leftAndTop:i.concat(o),rightAndBottom:a.concat(d).concat(l).concat(u),chartArea:pl(e,"chartArea"),vertical:i.concat(a).concat(d),horizontal:o.concat(l).concat(u)}}function iS(t,e,n,i){return Math.max(t[n],e[n])+Math.max(t[i],e[i])}function $x(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function $L(t,e,n,i){const{pos:a,box:o}=n,l=t.maxPadding;if(!Xe(a)){n.size&&(t[a]-=n.size);const p=i[n.stack]||{size:0,count:1};p.size=Math.max(p.size,n.horizontal?o.height:o.width),n.size=p.size/p.count,t[a]+=n.size}o.getPadding&&$x(l,o.getPadding());const u=Math.max(0,e.outerWidth-iS(l,t,"left","right")),d=Math.max(0,e.outerHeight-iS(l,t,"top","bottom")),f=u!==t.w,g=d!==t.h;return t.w=u,t.h=d,n.horizontal?{same:f,other:g}:{same:g,other:f}}function VL(t){const e=t.maxPadding;function n(i){const a=Math.max(e[i]-t[i],0);return t[i]+=a,a}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function qL(t,e){const n=e.maxPadding;function i(a){const o={left:0,top:0,right:0,bottom:0};return a.forEach(l=>{o[l]=Math.max(e[l],n[l])}),o}return i(t?["left","right"]:["top","bottom"])}function xl(t,e,n,i){const a=[];let o,l,u,d,f,g;for(o=0,l=t.length,f=0;o<l;++o){u=t[o],d=u.box,d.update(u.width||e.w,u.height||e.h,qL(u.horizontal,e));const{same:p,other:_}=$L(e,n,u,i);f|=p&&a.length,g=g||_,d.fullSize||a.push(u)}return f&&xl(a,e,n,i)||g}function $u(t,e,n,i,a){t.top=n,t.left=e,t.right=e+i,t.bottom=n+a,t.width=i,t.height=a}function sS(t,e,n,i){const a=n.padding;let{x:o,y:l}=e;for(const u of t){const d=u.box,f=i[u.stack]||{placed:0,weight:1},g=u.stackWeight/f.weight||1;if(u.horizontal){const p=e.w*g,_=f.size||d.height;vd(f.start)&&(l=f.start),d.fullSize?$u(d,a.left,l,n.outerWidth-a.right-a.left,_):$u(d,e.left+f.placed,l,p,_),f.start=l,f.placed+=p,l=d.bottom}else{const p=e.h*g,_=f.size||d.width;vd(f.start)&&(o=f.start),d.fullSize?$u(d,o,a.top,_,n.outerHeight-a.bottom-a.top):$u(d,o,e.top+f.placed,_,p),f.start=o,f.placed+=p,o=d.right}}e.x=o,e.y=l}var ai={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,i){if(!t)return;const a=oi(t.options.layout.padding),o=Math.max(e-a.width,0),l=Math.max(n-a.height,0),u=BL(t.boxes),d=u.vertical,f=u.horizontal;tt(t.boxes,w=>{typeof w.beforeLayout=="function"&&w.beforeLayout()});const g=d.reduce((w,x)=>x.box.options&&x.box.options.display===!1?w:w+1,0)||1,p=Object.freeze({outerWidth:e,outerHeight:n,padding:a,availableWidth:o,availableHeight:l,vBoxMaxWidth:o/2/g,hBoxMaxHeight:l/2}),_=Object.assign({},a);$x(_,oi(i));const b=Object.assign({maxPadding:_,w:o,h:l,x:a.left,y:a.top},a),S=HL(d.concat(f),p);xl(u.fullSize,b,p,S),xl(d,b,p,S),xl(f,b,p,S)&&xl(d,b,p,S),VL(b),sS(u.leftAndTop,b,p,S),b.x+=b.w,b.y+=b.h,sS(u.rightAndBottom,b,p,S),t.chartArea={left:b.left,top:b.top,right:b.left+b.w,bottom:b.top+b.h,height:b.h,width:b.w},tt(u.chartArea,w=>{const x=w.box;Object.assign(x,t.chartArea),x.update(b.w,b.h,{left:0,top:0,right:0,bottom:0})})}};class Vx{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,i){}removeEventListener(e,n,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,i,a){return n=Math.max(0,n||e.width),i=i||e.height,{width:n,height:Math.max(0,a?Math.floor(n/a):i)}}isAttached(e){return!0}updateConfig(e){}}class GL extends Vx{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Ju="$chartjs",YL={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},aS=t=>t===null||t==="";function WL(t,e){const n=t.style,i=t.getAttribute("height"),a=t.getAttribute("width");if(t[Ju]={initial:{height:i,width:a,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",aS(a)){const o=q0(t,"width");o!==void 0&&(t.width=o)}if(aS(i))if(t.style.height==="")t.height=t.width/(e||2);else{const o=q0(t,"height");o!==void 0&&(t.height=o)}return t}const qx=eL?{passive:!0}:!1;function KL(t,e,n){t&&t.addEventListener(e,n,qx)}function XL(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,qx)}function QL(t,e){const n=YL[t.type]||t.type,{x:i,y:a}=ja(t,e);return{type:n,chart:e,native:t,x:i!==void 0?i:null,y:a!==void 0?a:null}}function bd(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function ZL(t,e,n){const i=t.canvas,a=new MutationObserver(o=>{let l=!1;for(const u of o)l=l||bd(u.addedNodes,i),l=l&&!bd(u.removedNodes,i);l&&n()});return a.observe(document,{childList:!0,subtree:!0}),a}function JL(t,e,n){const i=t.canvas,a=new MutationObserver(o=>{let l=!1;for(const u of o)l=l||bd(u.removedNodes,i),l=l&&!bd(u.addedNodes,i);l&&n()});return a.observe(document,{childList:!0,subtree:!0}),a}const ec=new Map;let rS=0;function Gx(){const t=window.devicePixelRatio;t!==rS&&(rS=t,ec.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function eP(t,e){ec.size||window.addEventListener("resize",Gx),ec.set(t,e)}function tP(t){ec.delete(t),ec.size||window.removeEventListener("resize",Gx)}function nP(t,e,n){const i=t.canvas,a=i&&ap(i);if(!a)return;const o=Rx((u,d)=>{const f=a.clientWidth;n(u,d),f<a.clientWidth&&n()},window),l=new ResizeObserver(u=>{const d=u[0],f=d.contentRect.width,g=d.contentRect.height;f===0&&g===0||o(f,g)});return l.observe(a),eP(t,o),l}function Mg(t,e,n){n&&n.disconnect(),e==="resize"&&tP(t)}function iP(t,e,n){const i=t.canvas,a=Rx(o=>{t.ctx!==null&&n(QL(o,t))},t);return KL(i,e,a),a}class sP extends Vx{acquireContext(e,n){const i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(WL(e,n),i):null}releaseContext(e){const n=e.canvas;if(!n[Ju])return!1;const i=n[Ju].initial;["height","width"].forEach(o=>{const l=i[o];mt(l)?n.removeAttribute(o):n.setAttribute(o,l)});const a=i.style||{};return Object.keys(a).forEach(o=>{n.style[o]=a[o]}),n.width=n.width,delete n[Ju],!0}addEventListener(e,n,i){this.removeEventListener(e,n);const a=e.$proxies||(e.$proxies={}),l={attach:ZL,detach:JL,resize:nP}[n]||iP;a[n]=l(e,n,i)}removeEventListener(e,n){const i=e.$proxies||(e.$proxies={}),a=i[n];if(!a)return;({attach:Mg,detach:Mg,resize:Mg}[n]||XL)(e,n,a),i[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,i,a){return J2(e,n,i,a)}isAttached(e){const n=e&&ap(e);return!!(n&&n.isConnected)}}function aP(t){return!sp()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?GL:sP}class oa{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){const{x:n,y:i}=this.getProps(["x","y"],e);return{x:n,y:i}}hasValue(){return Xl(this.x)&&Xl(this.y)}getProps(e,n){const i=this.$animations;if(!n||!i)return this;const a={};return e.forEach(o=>{a[o]=i[o]&&i[o].active()?i[o]._to:this[o]}),a}}function rP(t,e){const n=t.options.ticks,i=oP(t),a=Math.min(n.maxTicksLimit||i,i),o=n.major.enabled?cP(e):[],l=o.length,u=o[0],d=o[l-1],f=[];if(l>a)return uP(e,f,o,l/a),f;const g=lP(o,e,a);if(l>0){let p,_;const b=l>1?Math.round((d-u)/(l-1)):null;for(Vu(e,f,g,mt(b)?0:u-b,u),p=0,_=l-1;p<_;p++)Vu(e,f,g,o[p],o[p+1]);return Vu(e,f,g,d,mt(b)?e.length:d+b),f}return Vu(e,f,g),f}function oP(t){const e=t.options.offset,n=t._tickSize(),i=t._length/n+(e?0:1),a=t._maxLength/n;return Math.floor(Math.min(i,a))}function lP(t,e,n){const i=dP(t),a=e.length/n;if(!i)return Math.max(a,1);const o=Xj(i);for(let l=0,u=o.length-1;l<u;l++){const d=o[l];if(d>a)return d}return Math.max(a,1)}function cP(t){const e=[];let n,i;for(n=0,i=t.length;n<i;n++)t[n].major&&e.push(n);return e}function uP(t,e,n,i){let a=0,o=n[0],l;for(i=Math.ceil(i),l=0;l<t.length;l++)l===o&&(e.push(t[l]),a++,o=n[a*i])}function Vu(t,e,n,i,a){const o=qe(i,0),l=Math.min(qe(a,t.length),t.length);let u=0,d,f,g;for(n=Math.ceil(n),a&&(d=a-i,n=d/Math.floor(d/n)),g=o;g<0;)u++,g=Math.round(o+u*n);for(f=Math.max(o,0);f<l;f++)f===g&&(e.push(t[f]),u++,g=Math.round(o+u*n))}function dP(t){const e=t.length;let n,i;if(e<2)return!1;for(i=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==i)return!1;return i}const hP=t=>t==="left"?"right":t==="right"?"left":t,oS=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,lS=(t,e)=>Math.min(e||t,t);function cS(t,e){const n=[],i=t.length/e,a=t.length;let o=0;for(;o<a;o+=i)n.push(t[Math.floor(o)]);return n}function fP(t,e,n){const i=t.ticks.length,a=Math.min(e,i-1),o=t._startPixel,l=t._endPixel,u=1e-6;let d=t.getPixelForTick(a),f;if(!(n&&(i===1?f=Math.max(d-o,l-d):e===0?f=(t.getPixelForTick(1)-d)/2:f=(d-t.getPixelForTick(a-1))/2,d+=a<e?f:-f,d<o-u||d>l+u)))return d}function gP(t,e){tt(t,n=>{const i=n.gc,a=i.length/2;let o;if(a>e){for(o=0;o<a;++o)delete n.data[i[o]];i.splice(0,a)}})}function yl(t){return t.drawTicks?t.tickLength:0}function uS(t,e){if(!t.display)return 0;const n=_n(t.font,e),i=oi(t.padding);return(rn(t.text)?t.text.length:1)*n.lineHeight+i.height}function mP(t,e){return $a(t,{scale:e,type:"scale"})}function pP(t,e,n){return $a(t,{tick:n,index:e,type:"tick"})}function vP(t,e,n){let i=Km(t);return(n&&e!=="right"||!n&&e==="right")&&(i=hP(i)),i}function yP(t,e,n,i){const{top:a,left:o,bottom:l,right:u,chart:d}=t,{chartArea:f,scales:g}=d;let p=0,_,b,S;const w=l-a,x=u-o;if(t.isHorizontal()){if(b=yn(i,o,u),Xe(n)){const C=Object.keys(n)[0],T=n[C];S=g[C].getPixelForValue(T)+w-e}else n==="center"?S=(f.bottom+f.top)/2+w-e:S=oS(t,n,e);_=u-o}else{if(Xe(n)){const C=Object.keys(n)[0],T=n[C];b=g[C].getPixelForValue(T)-x+e}else n==="center"?b=(f.left+f.right)/2-x+e:b=oS(t,n,e);S=yn(i,l,a),p=n==="left"?-Wt:Wt}return{titleX:b,titleY:S,maxWidth:_,rotation:p}}class oo extends oa{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:i,_suggestedMax:a}=this;return e=Ni(e,Number.POSITIVE_INFINITY),n=Ni(n,Number.NEGATIVE_INFINITY),i=Ni(i,Number.POSITIVE_INFINITY),a=Ni(a,Number.NEGATIVE_INFINITY),{min:Ni(e,i),max:Ni(n,a),minDefined:ri(e),maxDefined:ri(n)}}getMinMax(e){let{min:n,max:i,minDefined:a,maxDefined:o}=this.getUserBounds(),l;if(a&&o)return{min:n,max:i};const u=this.getMatchingVisibleMetas();for(let d=0,f=u.length;d<f;++d)l=u[d].controller.getMinMax(this,e),a||(n=Math.min(n,l.min)),o||(i=Math.max(i,l.max));return n=o&&n>i?i:n,i=a&&n>i?n:i,{min:Ni(n,Ni(i,n)),max:Ni(i,Ni(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){bt(this.options.beforeUpdate,[this])}update(e,n,i){const{beginAtZero:a,grace:o,ticks:l}=this.options,u=l.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=M2(this,o,a),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const d=u<this.ticks.length;this._convertTicksToLabels(d?cS(this.ticks,u):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),l.display&&(l.autoSkip||l.source==="auto")&&(this.ticks=rP(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),d&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,i;this.isHorizontal()?(n=this.left,i=this.right):(n=this.top,i=this.bottom,e=!e),this._startPixel=n,this._endPixel=i,this._reversePixels=e,this._length=i-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){bt(this.options.afterUpdate,[this])}beforeSetDimensions(){bt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){bt(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),bt(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){bt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let i,a,o;for(i=0,a=e.length;i<a;i++)o=e[i],o.label=bt(n.callback,[o.value,i,e],this)}afterTickToLabelConversion(){bt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){bt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,i=lS(this.ticks.length,e.ticks.maxTicksLimit),a=n.minRotation||0,o=n.maxRotation;let l=a,u,d,f;if(!this._isVisible()||!n.display||a>=o||i<=1||!this.isHorizontal()){this.labelRotation=a;return}const g=this._getLabelSizes(),p=g.widest.width,_=g.highest.height,b=En(this.chart.width-p,0,this.maxWidth);u=e.offset?this.maxWidth/i:b/(i-1),p+6>u&&(u=b/(i-(e.offset?.5:1)),d=this.maxHeight-yl(e.grid)-n.padding-uS(e.title,this.chart.options.font),f=Math.sqrt(p*p+_*_),l=e2(Math.min(Math.asin(En((g.highest.height+6)/u,-1,1)),Math.asin(En(d/f,-1,1))-Math.asin(En(_/f,-1,1)))),l=Math.max(a,Math.min(o,l))),this.labelRotation=l}afterCalculateLabelRotation(){bt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){bt(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:i,title:a,grid:o}}=this,l=this._isVisible(),u=this.isHorizontal();if(l){const d=uS(a,n.options.font);if(u?(e.width=this.maxWidth,e.height=yl(o)+d):(e.height=this.maxHeight,e.width=yl(o)+d),i.display&&this.ticks.length){const{first:f,last:g,widest:p,highest:_}=this._getLabelSizes(),b=i.padding*2,S=ps(this.labelRotation),w=Math.cos(S),x=Math.sin(S);if(u){const C=i.mirror?0:x*p.width+w*_.height;e.height=Math.min(this.maxHeight,e.height+C+b)}else{const C=i.mirror?0:w*p.width+x*_.height;e.width=Math.min(this.maxWidth,e.width+C+b)}this._calculatePadding(f,g,x,w)}}this._handleMargins(),u?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,i,a){const{ticks:{align:o,padding:l},position:u}=this.options,d=this.labelRotation!==0,f=u!=="top"&&this.axis==="x";if(this.isHorizontal()){const g=this.getPixelForTick(0)-this.left,p=this.right-this.getPixelForTick(this.ticks.length-1);let _=0,b=0;d?f?(_=a*e.width,b=i*n.height):(_=i*e.height,b=a*n.width):o==="start"?b=n.width:o==="end"?_=e.width:o!=="inner"&&(_=e.width/2,b=n.width/2),this.paddingLeft=Math.max((_-g+l)*this.width/(this.width-g),0),this.paddingRight=Math.max((b-p+l)*this.width/(this.width-p),0)}else{let g=n.height/2,p=e.height/2;o==="start"?(g=0,p=e.height):o==="end"&&(g=n.height,p=0),this.paddingTop=g+l,this.paddingBottom=p+l}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){bt(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,i;for(n=0,i=e.length;n<i;n++)mt(e[n].label)&&(e.splice(n,1),i--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let i=this.ticks;n<i.length&&(i=cS(i,n)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,i){const{ctx:a,_longestTextCache:o}=this,l=[],u=[],d=Math.floor(n/lS(n,i));let f=0,g=0,p,_,b,S,w,x,C,T,O,M,D;for(p=0;p<n;p+=d){if(S=e[p].label,w=this._resolveTickFontOptions(p),a.font=x=w.string,C=o[x]=o[x]||{data:{},gc:[]},T=w.lineHeight,O=M=0,!mt(S)&&!rn(S))O=U0(a,C.data,C.gc,O,S),M=T;else if(rn(S))for(_=0,b=S.length;_<b;++_)D=S[_],!mt(D)&&!rn(D)&&(O=U0(a,C.data,C.gc,O,D),M+=T);l.push(O),u.push(M),f=Math.max(O,f),g=Math.max(M,g)}gP(o,n);const U=l.indexOf(f),L=u.indexOf(g),B=H=>({width:l[H]||0,height:u[H]||0});return{first:B(0),last:B(n-1),widest:B(U),highest:B(L),widths:l,heights:u}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return n2(this._alignToPixels?Da(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const i=n[e];return i.$context||(i.$context=pP(this.getContext(),e,i))}return this.$context||(this.$context=mP(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=ps(this.labelRotation),i=Math.abs(Math.cos(n)),a=Math.abs(Math.sin(n)),o=this._getLabelSizes(),l=e.autoSkipPadding||0,u=o?o.widest.width+l:0,d=o?o.highest.height+l:0;return this.isHorizontal()?d*i>u*a?u/i:d/a:d*a<u*i?d/i:u/a}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,i=this.chart,a=this.options,{grid:o,position:l,border:u}=a,d=o.offset,f=this.isHorizontal(),p=this.ticks.length+(d?1:0),_=yl(o),b=[],S=u.setContext(this.getContext()),w=S.display?S.width:0,x=w/2,C=function(I){return Da(i,I,w)};let T,O,M,D,U,L,B,H,Q,Z,q,ne;if(l==="top")T=C(this.bottom),L=this.bottom-_,H=T-x,Z=C(e.top)+x,ne=e.bottom;else if(l==="bottom")T=C(this.top),Z=e.top,ne=C(e.bottom)-x,L=T+x,H=this.top+_;else if(l==="left")T=C(this.right),U=this.right-_,B=T-x,Q=C(e.left)+x,q=e.right;else if(l==="right")T=C(this.left),Q=e.left,q=C(e.right)-x,U=T+x,B=this.left+_;else if(n==="x"){if(l==="center")T=C((e.top+e.bottom)/2+.5);else if(Xe(l)){const I=Object.keys(l)[0],K=l[I];T=C(this.chart.scales[I].getPixelForValue(K))}Z=e.top,ne=e.bottom,L=T+x,H=L+_}else if(n==="y"){if(l==="center")T=C((e.left+e.right)/2);else if(Xe(l)){const I=Object.keys(l)[0],K=l[I];T=C(this.chart.scales[I].getPixelForValue(K))}U=T-x,B=U-_,Q=e.left,q=e.right}const he=qe(a.ticks.maxTicksLimit,p),oe=Math.max(1,Math.ceil(p/he));for(O=0;O<p;O+=oe){const I=this.getContext(O),K=o.setContext(I),le=u.setContext(I),ge=K.lineWidth,j=K.color,G=le.dash||[],re=le.dashOffset,de=K.tickWidth,me=K.tickColor,Te=K.tickBorderDash||[],pe=K.tickBorderDashOffset;M=fP(this,O,d),M!==void 0&&(D=Da(i,M,ge),f?U=B=Q=q=D:L=H=Z=ne=D,b.push({tx1:U,ty1:L,tx2:B,ty2:H,x1:Q,y1:Z,x2:q,y2:ne,width:ge,color:j,borderDash:G,borderDashOffset:re,tickWidth:de,tickColor:me,tickBorderDash:Te,tickBorderDashOffset:pe}))}return this._ticksLength=p,this._borderValue=T,b}_computeLabelItems(e){const n=this.axis,i=this.options,{position:a,ticks:o}=i,l=this.isHorizontal(),u=this.ticks,{align:d,crossAlign:f,padding:g,mirror:p}=o,_=yl(i.grid),b=_+g,S=p?-g:b,w=-ps(this.labelRotation),x=[];let C,T,O,M,D,U,L,B,H,Q,Z,q,ne="middle";if(a==="top")U=this.bottom-S,L=this._getXAxisLabelAlignment();else if(a==="bottom")U=this.top+S,L=this._getXAxisLabelAlignment();else if(a==="left"){const oe=this._getYAxisLabelAlignment(_);L=oe.textAlign,D=oe.x}else if(a==="right"){const oe=this._getYAxisLabelAlignment(_);L=oe.textAlign,D=oe.x}else if(n==="x"){if(a==="center")U=(e.top+e.bottom)/2+b;else if(Xe(a)){const oe=Object.keys(a)[0],I=a[oe];U=this.chart.scales[oe].getPixelForValue(I)+b}L=this._getXAxisLabelAlignment()}else if(n==="y"){if(a==="center")D=(e.left+e.right)/2-b;else if(Xe(a)){const oe=Object.keys(a)[0],I=a[oe];D=this.chart.scales[oe].getPixelForValue(I)}L=this._getYAxisLabelAlignment(_).textAlign}n==="y"&&(d==="start"?ne="top":d==="end"&&(ne="bottom"));const he=this._getLabelSizes();for(C=0,T=u.length;C<T;++C){O=u[C],M=O.label;const oe=o.setContext(this.getContext(C));B=this.getPixelForTick(C)+o.labelOffset,H=this._resolveTickFontOptions(C),Q=H.lineHeight,Z=rn(M)?M.length:1;const I=Z/2,K=oe.color,le=oe.textStrokeColor,ge=oe.textStrokeWidth;let j=L;l?(D=B,L==="inner"&&(C===T-1?j=this.options.reverse?"left":"right":C===0?j=this.options.reverse?"right":"left":j="center"),a==="top"?f==="near"||w!==0?q=-Z*Q+Q/2:f==="center"?q=-he.highest.height/2-I*Q+Q:q=-he.highest.height+Q/2:f==="near"||w!==0?q=Q/2:f==="center"?q=he.highest.height/2-I*Q:q=he.highest.height-Z*Q,p&&(q*=-1),w!==0&&!oe.showLabelBackdrop&&(D+=Q/2*Math.sin(w))):(U=B,q=(1-Z)*Q/2);let G;if(oe.showLabelBackdrop){const re=oi(oe.backdropPadding),de=he.heights[C],me=he.widths[C];let Te=q-re.top,pe=0-re.left;switch(ne){case"middle":Te-=de/2;break;case"bottom":Te-=de;break}switch(L){case"center":pe-=me/2;break;case"right":pe-=me;break;case"inner":C===T-1?pe-=me:C>0&&(pe-=me/2);break}G={left:pe,top:Te,width:me+re.width,height:de+re.height,color:oe.backdropColor}}x.push({label:M,font:H,textOffset:q,options:{rotation:w,color:K,strokeColor:le,strokeWidth:ge,textAlign:j,textBaseline:ne,translation:[D,U],backdrop:G}})}return x}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-ps(this.labelRotation))return e==="top"?"left":"right";let a="center";return n.align==="start"?a="left":n.align==="end"?a="right":n.align==="inner"&&(a="inner"),a}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:i,mirror:a,padding:o}}=this.options,l=this._getLabelSizes(),u=e+o,d=l.widest.width;let f,g;return n==="left"?a?(g=this.right+o,i==="near"?f="left":i==="center"?(f="center",g+=d/2):(f="right",g+=d)):(g=this.right-u,i==="near"?f="right":i==="center"?(f="center",g-=d/2):(f="left",g=this.left)):n==="right"?a?(g=this.left+o,i==="near"?f="right":i==="center"?(f="center",g-=d/2):(f="left",g-=d)):(g=this.left+u,i==="near"?f="left":i==="center"?(f="center",g+=d/2):(f="right",g=this.right)):f="right",{textAlign:f,x:g}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:i,top:a,width:o,height:l}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(i,a,o,l),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const a=this.ticks.findIndex(o=>o.value===e);return a>=0?n.setContext(this.getContext(a)).lineWidth:0}drawGrid(e){const n=this.options.grid,i=this.ctx,a=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let o,l;const u=(d,f,g)=>{!g.width||!g.color||(i.save(),i.lineWidth=g.width,i.strokeStyle=g.color,i.setLineDash(g.borderDash||[]),i.lineDashOffset=g.borderDashOffset,i.beginPath(),i.moveTo(d.x,d.y),i.lineTo(f.x,f.y),i.stroke(),i.restore())};if(n.display)for(o=0,l=a.length;o<l;++o){const d=a[o];n.drawOnChartArea&&u({x:d.x1,y:d.y1},{x:d.x2,y:d.y2},d),n.drawTicks&&u({x:d.tx1,y:d.ty1},{x:d.tx2,y:d.ty2},{color:d.tickColor,width:d.tickWidth,borderDash:d.tickBorderDash,borderDashOffset:d.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:i,grid:a}}=this,o=i.setContext(this.getContext()),l=i.display?o.width:0;if(!l)return;const u=a.setContext(this.getContext(0)).lineWidth,d=this._borderValue;let f,g,p,_;this.isHorizontal()?(f=Da(e,this.left,l)-l/2,g=Da(e,this.right,u)+u/2,p=_=d):(p=Da(e,this.top,l)-l/2,_=Da(e,this.bottom,u)+u/2,f=g=d),n.save(),n.lineWidth=o.width,n.strokeStyle=o.color,n.beginPath(),n.moveTo(f,p),n.lineTo(g,_),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const i=this.ctx,a=this._computeLabelArea();a&&Zm(i,a);const o=this.getLabelItems(e);for(const l of o){const u=l.options,d=l.font,f=l.label,g=l.textOffset;Jl(i,f,0,g,d,u)}a&&Jm(i)}drawTitle(){const{ctx:e,options:{position:n,title:i,reverse:a}}=this;if(!i.display)return;const o=_n(i.font),l=oi(i.padding),u=i.align;let d=o.lineHeight/2;n==="bottom"||n==="center"||Xe(n)?(d+=l.bottom,rn(i.text)&&(d+=o.lineHeight*(i.text.length-1))):d+=l.top;const{titleX:f,titleY:g,maxWidth:p,rotation:_}=yP(this,d,n,u);Jl(e,i.text,0,0,o,{color:i.color,maxWidth:p,rotation:_,textAlign:vP(u,n,a),textBaseline:"middle",translation:[f,g]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,i=qe(e.grid&&e.grid.z,-1),a=qe(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==oo.prototype.draw?[{z:n,draw:o=>{this.draw(o)}}]:[{z:i,draw:o=>{this.drawBackground(),this.drawGrid(o),this.drawTitle()}},{z:a,draw:()=>{this.drawBorder()}},{z:n,draw:o=>{this.drawLabels(o)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",a=[];let o,l;for(o=0,l=n.length;o<l;++o){const u=n[o];u[i]===this.id&&(!e||u.type===e)&&a.push(u)}return a}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return _n(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class qu{constructor(e,n,i){this.type=e,this.scope=n,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let i;SP(n)&&(i=this.register(n));const a=this.items,o=e.id,l=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+e);return o in a||(a[o]=e,_P(e,l,i),this.override&&jt.override(e.id,e.overrides)),l}get(e){return this.items[e]}unregister(e){const n=this.items,i=e.id,a=this.scope;i in n&&delete n[i],a&&i in jt[a]&&(delete jt[a][i],this.override&&delete Ua[i])}}function _P(t,e,n){const i=Wl(Object.create(null),[n?jt.get(n):{},jt.get(e),t.defaults]);jt.set(e,i),t.defaultRoutes&&bP(e,t.defaultRoutes),t.descriptors&&jt.describe(e,t.descriptors)}function bP(t,e){Object.keys(e).forEach(n=>{const i=n.split("."),a=i.pop(),o=[t].concat(i).join("."),l=e[n].split("."),u=l.pop(),d=l.join(".");jt.route(o,a,d,u)})}function SP(t){return"id"in t&&"defaults"in t}class wP{constructor(){this.controllers=new qu(rp,"datasets",!0),this.elements=new qu(oa,"elements"),this.plugins=new qu(Object,"plugins"),this.scales=new qu(oo,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,i){[...n].forEach(a=>{const o=i||this._getRegistryForType(a);i||o.isForType(a)||o===this.plugins&&a.id?this._exec(e,o,a):tt(a,l=>{const u=i||this._getRegistryForType(l);this._exec(e,u,l)})})}_exec(e,n,i){const a=Ym(e);bt(i["before"+a],[],i),n[e](i),bt(i["after"+a],[],i)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const i=this._typedRegistries[n];if(i.isForType(e))return i}return this.plugins}_get(e,n,i){const a=n.get(e);if(a===void 0)throw new Error('"'+e+'" is not a registered '+i+".");return a}}var Ii=new wP;class xP{constructor(){this._init=[]}notify(e,n,i,a){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const o=a?this._descriptors(e).filter(a):this._descriptors(e),l=this._notify(o,e,n,i);return n==="afterDestroy"&&(this._notify(o,e,"stop"),this._notify(this._init,e,"uninstall")),l}_notify(e,n,i,a){a=a||{};for(const o of e){const l=o.plugin,u=l[i],d=[n,a,o.options];if(bt(u,d,l)===!1&&a.cancelable)return!1}return!0}invalidate(){mt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const i=e&&e.config,a=qe(i.options&&i.options.plugins,{}),o=CP(i);return a===!1&&!n?[]:TP(e,o,a,n)}_notifyStateChanges(e){const n=this._oldCache||[],i=this._cache,a=(o,l)=>o.filter(u=>!l.some(d=>u.plugin.id===d.plugin.id));this._notify(a(n,i),e,"stop"),this._notify(a(i,n),e,"start")}}function CP(t){const e={},n=[],i=Object.keys(Ii.plugins.items);for(let o=0;o<i.length;o++)n.push(Ii.getPlugin(i[o]));const a=t.plugins||[];for(let o=0;o<a.length;o++){const l=a[o];n.indexOf(l)===-1&&(n.push(l),e[l.id]=!0)}return{plugins:n,localIds:e}}function EP(t,e){return!e&&t===!1?null:t===!0?{}:t}function TP(t,{plugins:e,localIds:n},i,a){const o=[],l=t.getContext();for(const u of e){const d=u.id,f=EP(i[d],a);f!==null&&o.push({plugin:u,options:OP(t.config,{plugin:u,local:n[d]},f,l)})}return o}function OP(t,{plugin:e,local:n},i,a){const o=t.pluginScopeKeys(e),l=t.getOptionScopes(i,o);return n&&e.defaults&&l.push(e.defaults),t.createResolver(l,a,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function om(t,e){const n=jt.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function AP(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function RP(t,e){return t===e?"_index_":"_value_"}function dS(t){if(t==="x"||t==="y"||t==="r")return t}function DP(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function lm(t,...e){if(dS(t))return t;for(const n of e){const i=n.axis||DP(n.position)||t.length>1&&dS(t[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function hS(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function MP(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(i=>i.xAxisID===t||i.yAxisID===t);if(n.length)return hS(t,"x",n[0])||hS(t,"y",n[0])}return{}}function kP(t,e){const n=Ua[t.type]||{scales:{}},i=e.scales||{},a=om(t.type,e),o=Object.create(null);return Object.keys(i).forEach(l=>{const u=i[l];if(!Xe(u))return console.error(`Invalid scale configuration for scale: ${l}`);if(u._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${l}`);const d=lm(l,u,MP(l,t),jt.scales[u.type]),f=RP(d,a),g=n.scales||{};o[l]=Ll(Object.create(null),[{axis:d},u,g[d],g[f]])}),t.data.datasets.forEach(l=>{const u=l.type||t.type,d=l.indexAxis||om(u,e),g=(Ua[u]||{}).scales||{};Object.keys(g).forEach(p=>{const _=AP(p,d),b=l[_+"AxisID"]||_;o[b]=o[b]||Object.create(null),Ll(o[b],[{axis:_},i[b],g[p]])})}),Object.keys(o).forEach(l=>{const u=o[l];Ll(u,[jt.scales[u.type],jt.scale])}),o}function Yx(t){const e=t.options||(t.options={});e.plugins=qe(e.plugins,{}),e.scales=kP(t,e)}function Wx(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function NP(t){return t=t||{},t.data=Wx(t.data),Yx(t),t}const fS=new Map,Kx=new Set;function Gu(t,e){let n=fS.get(t);return n||(n=e(),fS.set(t,n),Kx.add(n)),n}const _l=(t,e,n)=>{const i=Kl(e,n);i!==void 0&&t.add(i)};class jP{constructor(e){this._config=NP(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=Wx(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),Yx(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Gu(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return Gu(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return Gu(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,i=this.type;return Gu(`${i}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const i=this._scopeCache;let a=i.get(e);return(!a||n)&&(a=new Map,i.set(e,a)),a}getOptionScopes(e,n,i){const{options:a,type:o}=this,l=this._cachedScopes(e,i),u=l.get(n);if(u)return u;const d=new Set;n.forEach(g=>{e&&(d.add(e),g.forEach(p=>_l(d,e,p))),g.forEach(p=>_l(d,a,p)),g.forEach(p=>_l(d,Ua[o]||{},p)),g.forEach(p=>_l(d,jt,p)),g.forEach(p=>_l(d,sm,p))});const f=Array.from(d);return f.length===0&&f.push(Object.create(null)),Kx.has(n)&&l.set(n,f),f}chartOptionScopes(){const{options:e,type:n}=this;return[e,Ua[n]||{},jt.datasets[n]||{},{type:n},jt,sm]}resolveNamedOptions(e,n,i,a=[""]){const o={$shared:!0},{resolver:l,subPrefixes:u}=gS(this._resolverCache,e,a);let d=l;if(PP(l,n)){o.$shared=!1,i=sa(i)?i():i;const f=this.createResolver(e,i,u);d=Zr(l,i,f)}for(const f of n)o[f]=d[f];return o}createResolver(e,n,i=[""],a){const{resolver:o}=gS(this._resolverCache,e,i);return Xe(n)?Zr(o,n,void 0,a):o}}function gS(t,e,n){let i=t.get(e);i||(i=new Map,t.set(e,i));const a=n.join();let o=i.get(a);return o||(o={resolver:tp(e,n),subPrefixes:n.filter(u=>!u.toLowerCase().includes("hover"))},i.set(a,o)),o}const LP=t=>Xe(t)&&Object.getOwnPropertyNames(t).some(e=>sa(t[e]));function PP(t,e){const{isScriptable:n,isIndexable:i}=kx(t);for(const a of e){const o=n(a),l=i(a),u=(l||o)&&t[a];if(o&&(sa(u)||LP(u))||l&&rn(u))return!0}return!1}var IP="4.5.0";const zP=["top","bottom","left","right","chartArea"];function mS(t,e){return t==="top"||t==="bottom"||zP.indexOf(t)===-1&&e==="x"}function pS(t,e){return function(n,i){return n[t]===i[t]?n[e]-i[e]:n[t]-i[t]}}function vS(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),bt(n&&n.onComplete,[t],e)}function FP(t){const e=t.chart,n=e.options.animation;bt(n&&n.onProgress,[t],e)}function Xx(t){return sp()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const ed={},yS=t=>{const e=Xx(t);return Object.values(ed).filter(n=>n.canvas===e).pop()};function UP(t,e,n){const i=Object.keys(t);for(const a of i){const o=+a;if(o>=e){const l=t[a];delete t[a],(n>0||o>e)&&(t[o+n]=l)}}}function HP(t,e,n,i){return!n||t.type==="mouseout"?null:i?e:t}let zd=class{static defaults=jt;static instances=ed;static overrides=Ua;static registry=Ii;static version=IP;static getChart=yS;static register(...e){Ii.add(...e),_S()}static unregister(...e){Ii.remove(...e),_S()}constructor(e,n){const i=this.config=new jP(n),a=Xx(e),o=yS(a);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");const l=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||aP(a)),this.platform.updateConfig(i);const u=this.platform.acquireContext(a,l.aspectRatio),d=u&&u.canvas,f=d&&d.height,g=d&&d.width;if(this.id=Hj(),this.ctx=u,this.canvas=d,this.width=g,this.height=f,this._options=l,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new xP,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=o2(p=>this.update(p),l.resizeDelay||0),this._dataChanges=[],ed[this.id]=this,!u||!d){console.error("Failed to create chart: can't acquire context from the given item");return}us.listen(this,"complete",vS),us.listen(this,"progress",FP),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:i,height:a,_aspectRatio:o}=this;return mt(e)?n&&o?o:a?i/a:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Ii}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():V0(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return H0(this.canvas,this.ctx),this}stop(){return us.stop(this),this}resize(e,n){us.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const i=this.options,a=this.canvas,o=i.maintainAspectRatio&&this.aspectRatio,l=this.platform.getMaximumSize(a,e,n,o),u=i.devicePixelRatio||this.platform.getDevicePixelRatio(),d=this.width?"resize":"attach";this.width=l.width,this.height=l.height,this._aspectRatio=this.aspectRatio,V0(this,u,!0)&&(this.notifyPlugins("resize",{size:l}),bt(i.onResize,[this,l],this),this.attached&&this._doResize(d)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};tt(n,(i,a)=>{i.id=a})}buildOrUpdateScales(){const e=this.options,n=e.scales,i=this.scales,a=Object.keys(i).reduce((l,u)=>(l[u]=!1,l),{});let o=[];n&&(o=o.concat(Object.keys(n).map(l=>{const u=n[l],d=lm(l,u),f=d==="r",g=d==="x";return{options:u,dposition:f?"chartArea":g?"bottom":"left",dtype:f?"radialLinear":g?"category":"linear"}}))),tt(o,l=>{const u=l.options,d=u.id,f=lm(d,u),g=qe(u.type,l.dtype);(u.position===void 0||mS(u.position,f)!==mS(l.dposition))&&(u.position=l.dposition),a[d]=!0;let p=null;if(d in i&&i[d].type===g)p=i[d];else{const _=Ii.getScale(g);p=new _({id:d,type:g,ctx:this.ctx,chart:this}),i[p.id]=p}p.init(u,e)}),tt(a,(l,u)=>{l||delete i[u]}),tt(i,l=>{ai.configure(this,l,l.options),ai.addBox(this,l)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,i=e.length;if(e.sort((a,o)=>a.index-o.index),i>n){for(let a=n;a<i;++a)this._destroyDatasetMeta(a);e.splice(n,i-n)}this._sortedMetasets=e.slice(0).sort(pS("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((i,a)=>{n.filter(o=>o===i._dataset).length===0&&this._destroyDatasetMeta(a)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let i,a;for(this._removeUnreferencedMetasets(),i=0,a=n.length;i<a;i++){const o=n[i];let l=this.getDatasetMeta(i);const u=o.type||this.config.type;if(l.type&&l.type!==u&&(this._destroyDatasetMeta(i),l=this.getDatasetMeta(i)),l.type=u,l.indexAxis=o.indexAxis||om(u,this.options),l.order=o.order||0,l.index=i,l.label=""+o.label,l.visible=this.isDatasetVisible(i),l.controller)l.controller.updateIndex(i),l.controller.linkScales();else{const d=Ii.getController(u),{datasetElementType:f,dataElementType:g}=jt.datasets[u];Object.assign(d,{dataElementType:Ii.getElement(g),datasetElementType:f&&Ii.getElement(f)}),l.controller=new d(this,i),e.push(l.controller)}}return this._updateMetasets(),e}_resetElements(){tt(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const i=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),a=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let l=0;for(let f=0,g=this.data.datasets.length;f<g;f++){const{controller:p}=this.getDatasetMeta(f),_=!a&&o.indexOf(p)===-1;p.buildOrUpdateElements(_),l=Math.max(+p.getMaxOverflow(),l)}l=this._minPadding=i.layout.autoPadding?l:0,this._updateLayout(l),a||tt(o,f=>{f.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(pS("z","_idx"));const{_active:u,_lastEvent:d}=this;d?this._eventHandler(d,!0):u.length&&this._updateHoverStyles(u,u,!0),this.render()}_updateScales(){tt(this.scales,e=>{ai.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),i=new Set(e.events);(!M0(n,i)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:i,start:a,count:o}of n){const l=i==="_removeElements"?-o:o;UP(e,a,l)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,i=o=>new Set(e.filter(l=>l[0]===o).map((l,u)=>u+","+l.splice(1).join(","))),a=i(0);for(let o=1;o<n;o++)if(!M0(a,i(o)))return;return Array.from(a).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;ai.update(this,this.width,this.height,e);const n=this.chartArea,i=n.width<=0||n.height<=0;this._layers=[],tt(this.boxes,a=>{i&&a.position==="chartArea"||(a.configure&&a.configure(),this._layers.push(...a._layers()))},this),this._layers.forEach((a,o)=>{a._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,i=this.data.datasets.length;n<i;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,i=this.data.datasets.length;n<i;++n)this._updateDataset(n,sa(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const i=this.getDatasetMeta(e),a={meta:i,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",a)!==!1&&(i.controller._update(n),a.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",a))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(us.has(this)?this.attached&&!us.running(this)&&us.start(this):(this.draw(),vS({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:i,height:a}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,a)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,i=[];let a,o;for(a=0,o=n.length;a<o;++a){const l=n[a];(!e||l.visible)&&i.push(l)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,i={meta:e,index:e.index,cancelable:!0},a=gL(this,e);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(a&&Zm(n,a),e.controller.draw(),a&&Jm(n),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(e){return Zl(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,i,a){const o=zL.modes[n];return typeof o=="function"?o(this,e,i,a):[]}getDatasetMeta(e){const n=this.data.datasets[e],i=this._metasets;let a=i.filter(o=>o&&o._dataset===n).pop();return a||(a={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},i.push(a)),a}getContext(){return this.$context||(this.$context=$a(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const i=this.getDatasetMeta(e);return typeof i.hidden=="boolean"?!i.hidden:!n.hidden}setDatasetVisibility(e,n){const i=this.getDatasetMeta(e);i.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,i){const a=i?"show":"hide",o=this.getDatasetMeta(e),l=o.controller._resolveAnimations(void 0,a);vd(n)?(o.data[n].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),l.update(o,{visible:i}),this.update(u=>u.datasetIndex===e?a:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),us.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),H0(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete ed[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,i=(o,l)=>{n.addEventListener(this,o,l),e[o]=l},a=(o,l,u)=>{o.offsetX=l,o.offsetY=u,this._eventHandler(o)};tt(this.options.events,o=>i(o,a))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,i=(d,f)=>{n.addEventListener(this,d,f),e[d]=f},a=(d,f)=>{e[d]&&(n.removeEventListener(this,d,f),delete e[d])},o=(d,f)=>{this.canvas&&this.resize(d,f)};let l;const u=()=>{a("attach",u),this.attached=!0,this.resize(),i("resize",o),i("detach",l)};l=()=>{this.attached=!1,a("resize",o),this._stop(),this._resize(0,0),i("attach",u)},n.isAttached(this.canvas)?u():l()}unbindEvents(){tt(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},tt(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,i){const a=i?"set":"remove";let o,l,u,d;for(n==="dataset"&&(o=this.getDatasetMeta(e[0].datasetIndex),o.controller["_"+a+"DatasetHoverStyle"]()),u=0,d=e.length;u<d;++u){l=e[u];const f=l&&this.getDatasetMeta(l.datasetIndex).controller;f&&f[a+"HoverStyle"](l.element,l.datasetIndex,l.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],i=e.map(({datasetIndex:o,index:l})=>{const u=this.getDatasetMeta(o);if(!u)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:u.data[l],index:l}});!md(i,n)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,n))}notifyPlugins(e,n,i){return this._plugins.notify(this,e,n,i)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,i){const a=this.options.hover,o=(d,f)=>d.filter(g=>!f.some(p=>g.datasetIndex===p.datasetIndex&&g.index===p.index)),l=o(n,e),u=i?e:o(e,n);l.length&&this.updateHoverStyle(l,a.mode,!1),u.length&&a.mode&&this.updateHoverStyle(u,a.mode,!0)}_eventHandler(e,n){const i={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},a=l=>(l.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",i,a)===!1)return;const o=this._handleEvent(e,n,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,a),(o||i.changed)&&this.render(),this}_handleEvent(e,n,i){const{_active:a=[],options:o}=this,l=n,u=this._getActiveElements(e,a,i,l),d=Yj(e),f=HP(e,this._lastEvent,i,d);i&&(this._lastEvent=null,bt(o.onHover,[e,u,this],this),d&&bt(o.onClick,[e,u,this],this));const g=!md(u,a);return(g||n)&&(this._active=u,this._updateHoverStyles(u,a,n)),this._lastEvent=f,g}_getActiveElements(e,n,i,a){if(e.type==="mouseout")return[];if(!i)return n;const o=this.options.hover;return this.getElementsAtEventForMode(e,o.mode,o,a)}};function _S(){return tt(zd.instances,t=>t._plugins.invalidate())}function BP(t,e,n){const{startAngle:i,x:a,y:o,outerRadius:l,innerRadius:u,options:d}=e,{borderWidth:f,borderJoinStyle:g}=d,p=Math.min(f/l,pi(i-n));if(t.beginPath(),t.arc(a,o,l-f/2,i+p/2,n-p/2),u>0){const _=Math.min(f/u,pi(i-n));t.arc(a,o,u+f/2,n-_/2,i+_/2,!0)}else{const _=Math.min(f/2,l*pi(i-n));if(g==="round")t.arc(a,o,_,n-nt/2,i+nt/2,!0);else if(g==="bevel"){const b=2*_*_,S=-b*Math.cos(n+nt/2)+a,w=-b*Math.sin(n+nt/2)+o,x=b*Math.cos(i+nt/2)+a,C=b*Math.sin(i+nt/2)+o;t.lineTo(S,w),t.lineTo(x,C)}}t.closePath(),t.moveTo(0,0),t.rect(0,0,t.canvas.width,t.canvas.height),t.clip("evenodd")}function $P(t,e,n){const{startAngle:i,pixelMargin:a,x:o,y:l,outerRadius:u,innerRadius:d}=e;let f=a/u;t.beginPath(),t.arc(o,l,u,i-f,n+f),d>a?(f=a/d,t.arc(o,l,d,n+f,i-f,!0)):t.arc(o,l,a,n+Wt,i-Wt),t.closePath(),t.clip()}function VP(t){return ep(t,["outerStart","outerEnd","innerStart","innerEnd"])}function qP(t,e,n,i){const a=VP(t.options.borderRadius),o=(n-e)/2,l=Math.min(o,i*e/2),u=d=>{const f=(n-Math.min(o,d))*i/2;return En(d,0,Math.min(o,f))};return{outerStart:u(a.outerStart),outerEnd:u(a.outerEnd),innerStart:En(a.innerStart,0,l),innerEnd:En(a.innerEnd,0,l)}}function Br(t,e,n,i){return{x:n+t*Math.cos(e),y:i+t*Math.sin(e)}}function Sd(t,e,n,i,a,o){const{x:l,y:u,startAngle:d,pixelMargin:f,innerRadius:g}=e,p=Math.max(e.outerRadius+i+n-f,0),_=g>0?g+i+n+f:0;let b=0;const S=a-d;if(i){const oe=g>0?g-i:0,I=p>0?p-i:0,K=(oe+I)/2,le=K!==0?S*K/(K+i):S;b=(S-le)/2}const w=Math.max(.001,S*p-n/nt)/p,x=(S-w)/2,C=d+x+b,T=a-x-b,{outerStart:O,outerEnd:M,innerStart:D,innerEnd:U}=qP(e,_,p,T-C),L=p-O,B=p-M,H=C+O/L,Q=T-M/B,Z=_+D,q=_+U,ne=C+D/Z,he=T-U/q;if(t.beginPath(),o){const oe=(H+Q)/2;if(t.arc(l,u,p,H,oe),t.arc(l,u,p,oe,Q),M>0){const ge=Br(B,Q,l,u);t.arc(ge.x,ge.y,M,Q,T+Wt)}const I=Br(q,T,l,u);if(t.lineTo(I.x,I.y),U>0){const ge=Br(q,he,l,u);t.arc(ge.x,ge.y,U,T+Wt,he+Math.PI)}const K=(T-U/_+(C+D/_))/2;if(t.arc(l,u,_,T-U/_,K,!0),t.arc(l,u,_,K,C+D/_,!0),D>0){const ge=Br(Z,ne,l,u);t.arc(ge.x,ge.y,D,ne+Math.PI,C-Wt)}const le=Br(L,C,l,u);if(t.lineTo(le.x,le.y),O>0){const ge=Br(L,H,l,u);t.arc(ge.x,ge.y,O,C-Wt,H)}}else{t.moveTo(l,u);const oe=Math.cos(H)*p+l,I=Math.sin(H)*p+u;t.lineTo(oe,I);const K=Math.cos(Q)*p+l,le=Math.sin(Q)*p+u;t.lineTo(K,le)}t.closePath()}function GP(t,e,n,i,a){const{fullCircles:o,startAngle:l,circumference:u}=e;let d=e.endAngle;if(o){Sd(t,e,n,i,d,a);for(let f=0;f<o;++f)t.fill();isNaN(u)||(d=l+(u%Dt||Dt))}return Sd(t,e,n,i,d,a),t.fill(),d}function YP(t,e,n,i,a){const{fullCircles:o,startAngle:l,circumference:u,options:d}=e,{borderWidth:f,borderJoinStyle:g,borderDash:p,borderDashOffset:_,borderRadius:b}=d,S=d.borderAlign==="inner";if(!f)return;t.setLineDash(p||[]),t.lineDashOffset=_,S?(t.lineWidth=f*2,t.lineJoin=g||"round"):(t.lineWidth=f,t.lineJoin=g||"bevel");let w=e.endAngle;if(o){Sd(t,e,n,i,w,a);for(let x=0;x<o;++x)t.stroke();isNaN(u)||(w=l+(u%Dt||Dt))}S&&$P(t,e,w),d.selfJoin&&w-l>=nt&&b===0&&g!=="miter"&&BP(t,e,w),o||(Sd(t,e,n,i,w,a),t.stroke())}class WP extends oa{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,n,i){const a=this.getProps(["x","y"],i),{angle:o,distance:l}=Tx(a,{x:e,y:n}),{startAngle:u,endAngle:d,innerRadius:f,outerRadius:g,circumference:p}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),_=(this.options.spacing+this.options.borderWidth)/2,b=qe(p,d-u),S=Ql(o,u,d)&&u!==d,w=b>=Dt||S,x=qr(l,f+_,g+_);return w&&x}getCenterPoint(e){const{x:n,y:i,startAngle:a,endAngle:o,innerRadius:l,outerRadius:u}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:d,spacing:f}=this.options,g=(a+o)/2,p=(l+u+f+d)/2;return{x:n+Math.cos(g)*p,y:i+Math.sin(g)*p}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:n,circumference:i}=this,a=(n.offset||0)/4,o=(n.spacing||0)/2,l=n.circular;if(this.pixelMargin=n.borderAlign==="inner"?.33:0,this.fullCircles=i>Dt?Math.floor(i/Dt):0,i===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const u=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(u)*a,Math.sin(u)*a);const d=1-Math.sin(Math.min(nt,i||0)),f=a*d;e.fillStyle=n.backgroundColor,e.strokeStyle=n.borderColor,GP(e,this,f,o,l),YP(e,this,f,o,l),e.restore()}}function Qx(t,e,n=e){t.lineCap=qe(n.borderCapStyle,e.borderCapStyle),t.setLineDash(qe(n.borderDash,e.borderDash)),t.lineDashOffset=qe(n.borderDashOffset,e.borderDashOffset),t.lineJoin=qe(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=qe(n.borderWidth,e.borderWidth),t.strokeStyle=qe(n.borderColor,e.borderColor)}function KP(t,e,n){t.lineTo(n.x,n.y)}function XP(t){return t.stepped?S2:t.tension||t.cubicInterpolationMode==="monotone"?w2:KP}function Zx(t,e,n={}){const i=t.length,{start:a=0,end:o=i-1}=n,{start:l,end:u}=e,d=Math.max(a,l),f=Math.min(o,u),g=a<l&&o<l||a>u&&o>u;return{count:i,start:d,loop:e.loop,ilen:f<d&&!g?i+f-d:f-d}}function QP(t,e,n,i){const{points:a,options:o}=e,{count:l,start:u,loop:d,ilen:f}=Zx(a,n,i),g=XP(o);let{move:p=!0,reverse:_}=i||{},b,S,w;for(b=0;b<=f;++b)S=a[(u+(_?f-b:b))%l],!S.skip&&(p?(t.moveTo(S.x,S.y),p=!1):g(t,w,S,_,o.stepped),w=S);return d&&(S=a[(u+(_?f:0))%l],g(t,w,S,_,o.stepped)),!!d}function ZP(t,e,n,i){const a=e.points,{count:o,start:l,ilen:u}=Zx(a,n,i),{move:d=!0,reverse:f}=i||{};let g=0,p=0,_,b,S,w,x,C;const T=M=>(l+(f?u-M:M))%o,O=()=>{w!==x&&(t.lineTo(g,x),t.lineTo(g,w),t.lineTo(g,C))};for(d&&(b=a[T(0)],t.moveTo(b.x,b.y)),_=0;_<=u;++_){if(b=a[T(_)],b.skip)continue;const M=b.x,D=b.y,U=M|0;U===S?(D<w?w=D:D>x&&(x=D),g=(p*g+M)/++p):(O(),t.lineTo(M,D),S=U,p=0,w=x=D),C=D}O()}function cm(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?ZP:QP}function JP(t){return t.stepped?tL:t.tension||t.cubicInterpolationMode==="monotone"?nL:La}function eI(t,e,n,i){let a=e._path;a||(a=e._path=new Path2D,e.path(a,n,i)&&a.closePath()),Qx(t,e.options),t.stroke(a)}function tI(t,e,n,i){const{segments:a,options:o}=e,l=cm(e);for(const u of a)Qx(t,o,u.style),t.beginPath(),l(t,e,u,{start:n,end:n+i-1})&&t.closePath(),t.stroke()}const nI=typeof Path2D=="function";function iI(t,e,n,i){nI&&!e.options.segment?eI(t,e,n,i):tI(t,e,n,i)}class sI extends oa{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const a=i.spanGaps?this._loop:this._fullLoop;Y2(this._points,i,e,a,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=uL(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,i=e.length;return i&&n[e[i-1].end]}interpolate(e,n){const i=this.options,a=e[n],o=this.points,l=oL(this,{property:n,start:a,end:a});if(!l.length)return;const u=[],d=JP(i);let f,g;for(f=0,g=l.length;f<g;++f){const{start:p,end:_}=l[f],b=o[p],S=o[_];if(b===S){u.push(b);continue}const w=Math.abs((a-b[n])/(S[n]-b[n])),x=d(b,S,w,i.stepped);x[n]=e[n],u.push(x)}return u.length===1?u[0]:u}pathSegment(e,n,i){return cm(this)(e,this,n,i)}path(e,n,i){const a=this.segments,o=cm(this);let l=this._loop;n=n||0,i=i||this.points.length-n;for(const u of a)l&=o(e,this,u,{start:n,end:n+i-1});return!!l}draw(e,n,i,a){const o=this.options||{};(this.points||[]).length&&o.borderWidth&&(e.save(),iI(e,this,i,a),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function bS(t,e,n,i){const a=t.options,{[n]:o}=t.getProps([n],i);return Math.abs(e-o)<a.radius+a.hitRadius}class aI extends oa{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,n,i){const a=this.options,{x:o,y:l}=this.getProps(["x","y"],i);return Math.pow(e-o,2)+Math.pow(n-l,2)<Math.pow(a.hitRadius+a.radius,2)}inXRange(e,n){return bS(this,e,"x",n)}inYRange(e,n){return bS(this,e,"y",n)}getCenterPoint(e){const{x:n,y:i}=this.getProps(["x","y"],e);return{x:n,y:i}}size(e){e=e||this.options||{};let n=e.radius||0;n=Math.max(n,n&&e.hoverRadius||0);const i=n&&e.borderWidth||0;return(n+i)*2}draw(e,n){const i=this.options;this.skip||i.radius<.1||!Zl(this,n,this.size(i)/2)||(e.strokeStyle=i.borderColor,e.lineWidth=i.borderWidth,e.fillStyle=i.backgroundColor,am(e,i,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}const SS=(t,e)=>{let{boxHeight:n=e,boxWidth:i=e}=t;return t.usePointStyle&&(n=Math.min(n,e),i=t.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(e,n)}},rI=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class wS extends oa{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,i){this.maxWidth=e,this.maxHeight=n,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=bt(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(i=>e.filter(i,this.chart.data))),e.sort&&(n=n.sort((i,a)=>e.sort(i,a,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const i=e.labels,a=_n(i.font),o=a.size,l=this._computeTitleHeight(),{boxWidth:u,itemHeight:d}=SS(i,o);let f,g;n.font=a.string,this.isHorizontal()?(f=this.maxWidth,g=this._fitRows(l,o,u,d)+10):(g=this.maxHeight,f=this._fitCols(l,a,u,d)+10),this.width=Math.min(f,e.maxWidth||this.maxWidth),this.height=Math.min(g,e.maxHeight||this.maxHeight)}_fitRows(e,n,i,a){const{ctx:o,maxWidth:l,options:{labels:{padding:u}}}=this,d=this.legendHitBoxes=[],f=this.lineWidths=[0],g=a+u;let p=e;o.textAlign="left",o.textBaseline="middle";let _=-1,b=-g;return this.legendItems.forEach((S,w)=>{const x=i+n/2+o.measureText(S.text).width;(w===0||f[f.length-1]+x+2*u>l)&&(p+=g,f[f.length-(w>0?0:1)]=0,b+=g,_++),d[w]={left:0,top:b,row:_,width:x,height:a},f[f.length-1]+=x+u}),p}_fitCols(e,n,i,a){const{ctx:o,maxHeight:l,options:{labels:{padding:u}}}=this,d=this.legendHitBoxes=[],f=this.columnSizes=[],g=l-e;let p=u,_=0,b=0,S=0,w=0;return this.legendItems.forEach((x,C)=>{const{itemWidth:T,itemHeight:O}=oI(i,n,o,x,a);C>0&&b+O+2*u>g&&(p+=_+u,f.push({width:_,height:b}),S+=_+u,w++,_=b=0),d[C]={left:S,top:b,col:w,width:T,height:O},_=Math.max(_,T),b+=O+u}),p+=_,f.push({width:_,height:b}),p}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:i,labels:{padding:a},rtl:o}}=this,l=Wr(o,this.left,this.width);if(this.isHorizontal()){let u=0,d=yn(i,this.left+a,this.right-this.lineWidths[u]);for(const f of n)u!==f.row&&(u=f.row,d=yn(i,this.left+a,this.right-this.lineWidths[u])),f.top+=this.top+e+a,f.left=l.leftForLtr(l.x(d),f.width),d+=f.width+a}else{let u=0,d=yn(i,this.top+e+a,this.bottom-this.columnSizes[u].height);for(const f of n)f.col!==u&&(u=f.col,d=yn(i,this.top+e+a,this.bottom-this.columnSizes[u].height)),f.top=d,f.left+=this.left+a,f.left=l.leftForLtr(l.x(f.left),f.width),d+=f.height+a}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Zm(e,this),this._draw(),Jm(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:i,ctx:a}=this,{align:o,labels:l}=e,u=jt.color,d=Wr(e.rtl,this.left,this.width),f=_n(l.font),{padding:g}=l,p=f.size,_=p/2;let b;this.drawTitle(),a.textAlign=d.textAlign("left"),a.textBaseline="middle",a.lineWidth=.5,a.font=f.string;const{boxWidth:S,boxHeight:w,itemHeight:x}=SS(l,p),C=function(U,L,B){if(isNaN(S)||S<=0||isNaN(w)||w<0)return;a.save();const H=qe(B.lineWidth,1);if(a.fillStyle=qe(B.fillStyle,u),a.lineCap=qe(B.lineCap,"butt"),a.lineDashOffset=qe(B.lineDashOffset,0),a.lineJoin=qe(B.lineJoin,"miter"),a.lineWidth=H,a.strokeStyle=qe(B.strokeStyle,u),a.setLineDash(qe(B.lineDash,[])),l.usePointStyle){const Q={radius:w*Math.SQRT2/2,pointStyle:B.pointStyle,rotation:B.rotation,borderWidth:H},Z=d.xPlus(U,S/2),q=L+_;Mx(a,Q,Z,q,l.pointStyleWidth&&S)}else{const Q=L+Math.max((p-w)/2,0),Z=d.leftForLtr(U,S),q=Fl(B.borderRadius);a.beginPath(),Object.values(q).some(ne=>ne!==0)?rm(a,{x:Z,y:Q,w:S,h:w,radius:q}):a.rect(Z,Q,S,w),a.fill(),H!==0&&a.stroke()}a.restore()},T=function(U,L,B){Jl(a,B.text,U,L+x/2,f,{strikethrough:B.hidden,textAlign:d.textAlign(B.textAlign)})},O=this.isHorizontal(),M=this._computeTitleHeight();O?b={x:yn(o,this.left+g,this.right-i[0]),y:this.top+g+M,line:0}:b={x:this.left+g,y:yn(o,this.top+M+g,this.bottom-n[0].height),line:0},Ix(this.ctx,e.textDirection);const D=x+g;this.legendItems.forEach((U,L)=>{a.strokeStyle=U.fontColor,a.fillStyle=U.fontColor;const B=a.measureText(U.text).width,H=d.textAlign(U.textAlign||(U.textAlign=l.textAlign)),Q=S+_+B;let Z=b.x,q=b.y;d.setWidth(this.width),O?L>0&&Z+Q+g>this.right&&(q=b.y+=D,b.line++,Z=b.x=yn(o,this.left+g,this.right-i[b.line])):L>0&&q+D>this.bottom&&(Z=b.x=Z+n[b.line].width+g,b.line++,q=b.y=yn(o,this.top+M+g,this.bottom-n[b.line].height));const ne=d.x(Z);if(C(ne,q,U),Z=l2(H,Z+S+_,O?Z+Q:this.right,e.rtl),T(d.x(Z),q,U),O)b.x+=Q+g;else if(typeof U.text!="string"){const he=f.lineHeight;b.y+=Jx(U,he)+g}else b.y+=D}),zx(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,i=_n(n.font),a=oi(n.padding);if(!n.display)return;const o=Wr(e.rtl,this.left,this.width),l=this.ctx,u=n.position,d=i.size/2,f=a.top+d;let g,p=this.left,_=this.width;if(this.isHorizontal())_=Math.max(...this.lineWidths),g=this.top+f,p=yn(e.align,p,this.right-_);else{const S=this.columnSizes.reduce((w,x)=>Math.max(w,x.height),0);g=f+yn(e.align,this.top,this.bottom-S-e.labels.padding-this._computeTitleHeight())}const b=yn(u,p,p+_);l.textAlign=o.textAlign(Km(u)),l.textBaseline="middle",l.strokeStyle=n.color,l.fillStyle=n.color,l.font=i.string,Jl(l,n.text,b,g,i)}_computeTitleHeight(){const e=this.options.title,n=_n(e.font),i=oi(e.padding);return e.display?n.lineHeight+i.height:0}_getLegendItemAt(e,n){let i,a,o;if(qr(e,this.left,this.right)&&qr(n,this.top,this.bottom)){for(o=this.legendHitBoxes,i=0;i<o.length;++i)if(a=o[i],qr(e,a.left,a.left+a.width)&&qr(n,a.top,a.top+a.height))return this.legendItems[i]}return null}handleEvent(e){const n=this.options;if(!uI(e.type,n))return;const i=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const a=this._hoveredItem,o=rI(a,i);a&&!o&&bt(n.onLeave,[e,a,this],this),this._hoveredItem=i,i&&!o&&bt(n.onHover,[e,i,this],this)}else i&&bt(n.onClick,[e,i,this],this)}}function oI(t,e,n,i,a){const o=lI(i,t,e,n),l=cI(a,i,e.lineHeight);return{itemWidth:o,itemHeight:l}}function lI(t,e,n,i){let a=t.text;return a&&typeof a!="string"&&(a=a.reduce((o,l)=>o.length>l.length?o:l)),e+n.size/2+i.measureText(a).width}function cI(t,e,n){let i=t;return typeof e.text!="string"&&(i=Jx(e,n)),i}function Jx(t,e){const n=t.text?t.text.length:0;return e*n}function uI(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var dI={id:"legend",_element:wS,start(t,e,n){const i=t.legend=new wS({ctx:t.ctx,options:n,chart:t});ai.configure(t,i,n),ai.addBox(t,i)},stop(t){ai.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const i=t.legend;ai.configure(t,i,n),i.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const i=e.datasetIndex,a=n.chart;a.isDatasetVisible(i)?(a.hide(i),e.hidden=!0):(a.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:a,color:o,useBorderRadius:l,borderRadius:u}}=t.legend.options;return t._getSortedDatasetMetas().map(d=>{const f=d.controller.getStyle(n?0:void 0),g=oi(f.borderWidth);return{text:e[d.index].label,fillStyle:f.backgroundColor,fontColor:o,hidden:!d.visible,lineCap:f.borderCapStyle,lineDash:f.borderDash,lineDashOffset:f.borderDashOffset,lineJoin:f.borderJoinStyle,lineWidth:(g.width+g.height)/4,strokeStyle:f.borderColor,pointStyle:i||f.pointStyle,rotation:f.rotation,textAlign:a||f.textAlign,borderRadius:l&&(u||f.borderRadius),datasetIndex:d.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class eC extends oa{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const a=rn(i.text)?i.text.length:1;this._padding=oi(i.padding);const o=a*_n(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=o:this.width=o}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:i,bottom:a,right:o,options:l}=this,u=l.align;let d=0,f,g,p;return this.isHorizontal()?(g=yn(u,i,o),p=n+e,f=o-i):(l.position==="left"?(g=i+e,p=yn(u,a,n),d=nt*-.5):(g=o-e,p=yn(u,n,a),d=nt*.5),f=a-n),{titleX:g,titleY:p,maxWidth:f,rotation:d}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const i=_n(n.font),o=i.lineHeight/2+this._padding.top,{titleX:l,titleY:u,maxWidth:d,rotation:f}=this._drawArgs(o);Jl(e,n.text,0,0,i,{color:n.color,maxWidth:d,rotation:f,textAlign:Km(n.align),textBaseline:"middle",translation:[l,u]})}}function hI(t,e){const n=new eC({ctx:t.ctx,options:e,chart:t});ai.configure(t,n,e),ai.addBox(t,n),t.titleBlock=n}var fI={id:"title",_element:eC,start(t,e,n){hI(t,n)},stop(t){const e=t.titleBlock;ai.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const i=t.titleBlock;ai.configure(t,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Cl={average(t){if(!t.length)return!1;let e,n,i=new Set,a=0,o=0;for(e=0,n=t.length;e<n;++e){const u=t[e].element;if(u&&u.hasValue()){const d=u.tooltipPosition();i.add(d.x),a+=d.y,++o}}return o===0||i.size===0?!1:{x:[...i].reduce((u,d)=>u+d)/i.size,y:a/o}},nearest(t,e){if(!t.length)return!1;let n=e.x,i=e.y,a=Number.POSITIVE_INFINITY,o,l,u;for(o=0,l=t.length;o<l;++o){const d=t[o].element;if(d&&d.hasValue()){const f=d.getCenterPoint(),g=im(e,f);g<a&&(a=g,u=d)}}if(u){const d=u.tooltipPosition();n=d.x,i=d.y}return{x:n,y:i}}};function Li(t,e){return e&&(rn(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function ds(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function gI(t,e){const{element:n,datasetIndex:i,index:a}=e,o=t.getDatasetMeta(i).controller,{label:l,value:u}=o.getLabelAndValue(a);return{chart:t,label:l,parsed:o.getParsed(a),raw:t.data.datasets[i].data[a],formattedValue:u,dataset:o.getDataset(),dataIndex:a,datasetIndex:i,element:n}}function xS(t,e){const n=t.chart.ctx,{body:i,footer:a,title:o}=t,{boxWidth:l,boxHeight:u}=e,d=_n(e.bodyFont),f=_n(e.titleFont),g=_n(e.footerFont),p=o.length,_=a.length,b=i.length,S=oi(e.padding);let w=S.height,x=0,C=i.reduce((M,D)=>M+D.before.length+D.lines.length+D.after.length,0);if(C+=t.beforeBody.length+t.afterBody.length,p&&(w+=p*f.lineHeight+(p-1)*e.titleSpacing+e.titleMarginBottom),C){const M=e.displayColors?Math.max(u,d.lineHeight):d.lineHeight;w+=b*M+(C-b)*d.lineHeight+(C-1)*e.bodySpacing}_&&(w+=e.footerMarginTop+_*g.lineHeight+(_-1)*e.footerSpacing);let T=0;const O=function(M){x=Math.max(x,n.measureText(M).width+T)};return n.save(),n.font=f.string,tt(t.title,O),n.font=d.string,tt(t.beforeBody.concat(t.afterBody),O),T=e.displayColors?l+2+e.boxPadding:0,tt(i,M=>{tt(M.before,O),tt(M.lines,O),tt(M.after,O)}),T=0,n.font=g.string,tt(t.footer,O),n.restore(),x+=S.width,{width:x,height:w}}function mI(t,e){const{y:n,height:i}=e;return n<i/2?"top":n>t.height-i/2?"bottom":"center"}function pI(t,e,n,i){const{x:a,width:o}=i,l=n.caretSize+n.caretPadding;if(t==="left"&&a+o+l>e.width||t==="right"&&a-o-l<0)return!0}function vI(t,e,n,i){const{x:a,width:o}=n,{width:l,chartArea:{left:u,right:d}}=t;let f="center";return i==="center"?f=a<=(u+d)/2?"left":"right":a<=o/2?f="left":a>=l-o/2&&(f="right"),pI(f,t,e,n)&&(f="center"),f}function CS(t,e,n){const i=n.yAlign||e.yAlign||mI(t,n);return{xAlign:n.xAlign||e.xAlign||vI(t,e,n,i),yAlign:i}}function yI(t,e){let{x:n,width:i}=t;return e==="right"?n-=i:e==="center"&&(n-=i/2),n}function _I(t,e,n){let{y:i,height:a}=t;return e==="top"?i+=n:e==="bottom"?i-=a+n:i-=a/2,i}function ES(t,e,n,i){const{caretSize:a,caretPadding:o,cornerRadius:l}=t,{xAlign:u,yAlign:d}=n,f=a+o,{topLeft:g,topRight:p,bottomLeft:_,bottomRight:b}=Fl(l);let S=yI(e,u);const w=_I(e,d,f);return d==="center"?u==="left"?S+=f:u==="right"&&(S-=f):u==="left"?S-=Math.max(g,_)+a:u==="right"&&(S+=Math.max(p,b)+a),{x:En(S,0,i.width-e.width),y:En(w,0,i.height-e.height)}}function Yu(t,e,n){const i=oi(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-i.right:t.x+i.left}function TS(t){return Li([],ds(t))}function bI(t,e,n){return $a(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function OS(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const tC={beforeTitle:ls,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,i=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return n[e.dataIndex]}return""},afterTitle:ls,beforeBody:ls,beforeLabel:ls,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return mt(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:ls,afterBody:ls,beforeFooter:ls,footer:ls,afterFooter:ls};function Mn(t,e,n,i){const a=t[e].call(n,i);return typeof a>"u"?tC[e].call(n,i):a}class AS extends oa{static positioners=Cl;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,i=this.options.setContext(this.getContext()),a=i.enabled&&n.options.animation&&i.animations,o=new Ux(this.chart,a);return a._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=bI(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:i}=n,a=Mn(i,"beforeTitle",this,e),o=Mn(i,"title",this,e),l=Mn(i,"afterTitle",this,e);let u=[];return u=Li(u,ds(a)),u=Li(u,ds(o)),u=Li(u,ds(l)),u}getBeforeBody(e,n){return TS(Mn(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:i}=n,a=[];return tt(e,o=>{const l={before:[],lines:[],after:[]},u=OS(i,o);Li(l.before,ds(Mn(u,"beforeLabel",this,o))),Li(l.lines,Mn(u,"label",this,o)),Li(l.after,ds(Mn(u,"afterLabel",this,o))),a.push(l)}),a}getAfterBody(e,n){return TS(Mn(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:i}=n,a=Mn(i,"beforeFooter",this,e),o=Mn(i,"footer",this,e),l=Mn(i,"afterFooter",this,e);let u=[];return u=Li(u,ds(a)),u=Li(u,ds(o)),u=Li(u,ds(l)),u}_createItems(e){const n=this._active,i=this.chart.data,a=[],o=[],l=[];let u=[],d,f;for(d=0,f=n.length;d<f;++d)u.push(gI(this.chart,n[d]));return e.filter&&(u=u.filter((g,p,_)=>e.filter(g,p,_,i))),e.itemSort&&(u=u.sort((g,p)=>e.itemSort(g,p,i))),tt(u,g=>{const p=OS(e.callbacks,g);a.push(Mn(p,"labelColor",this,g)),o.push(Mn(p,"labelPointStyle",this,g)),l.push(Mn(p,"labelTextColor",this,g))}),this.labelColors=a,this.labelPointStyles=o,this.labelTextColors=l,this.dataPoints=u,u}update(e,n){const i=this.options.setContext(this.getContext()),a=this._active;let o,l=[];if(!a.length)this.opacity!==0&&(o={opacity:0});else{const u=Cl[i.position].call(this,a,this._eventPosition);l=this._createItems(i),this.title=this.getTitle(l,i),this.beforeBody=this.getBeforeBody(l,i),this.body=this.getBody(l,i),this.afterBody=this.getAfterBody(l,i),this.footer=this.getFooter(l,i);const d=this._size=xS(this,i),f=Object.assign({},u,d),g=CS(this.chart,i,f),p=ES(i,f,g,this.chart);this.xAlign=g.xAlign,this.yAlign=g.yAlign,o={opacity:1,x:p.x,y:p.y,width:d.width,height:d.height,caretX:u.x,caretY:u.y}}this._tooltipItems=l,this.$context=void 0,o&&this._resolveAnimations().update(this,o),e&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,i,a){const o=this.getCaretPosition(e,i,a);n.lineTo(o.x1,o.y1),n.lineTo(o.x2,o.y2),n.lineTo(o.x3,o.y3)}getCaretPosition(e,n,i){const{xAlign:a,yAlign:o}=this,{caretSize:l,cornerRadius:u}=i,{topLeft:d,topRight:f,bottomLeft:g,bottomRight:p}=Fl(u),{x:_,y:b}=e,{width:S,height:w}=n;let x,C,T,O,M,D;return o==="center"?(M=b+w/2,a==="left"?(x=_,C=x-l,O=M+l,D=M-l):(x=_+S,C=x+l,O=M-l,D=M+l),T=x):(a==="left"?C=_+Math.max(d,g)+l:a==="right"?C=_+S-Math.max(f,p)-l:C=this.caretX,o==="top"?(O=b,M=O-l,x=C-l,T=C+l):(O=b+w,M=O+l,x=C+l,T=C-l),D=O),{x1:x,x2:C,x3:T,y1:O,y2:M,y3:D}}drawTitle(e,n,i){const a=this.title,o=a.length;let l,u,d;if(o){const f=Wr(i.rtl,this.x,this.width);for(e.x=Yu(this,i.titleAlign,i),n.textAlign=f.textAlign(i.titleAlign),n.textBaseline="middle",l=_n(i.titleFont),u=i.titleSpacing,n.fillStyle=i.titleColor,n.font=l.string,d=0;d<o;++d)n.fillText(a[d],f.x(e.x),e.y+l.lineHeight/2),e.y+=l.lineHeight+u,d+1===o&&(e.y+=i.titleMarginBottom-u)}}_drawColorBox(e,n,i,a,o){const l=this.labelColors[i],u=this.labelPointStyles[i],{boxHeight:d,boxWidth:f}=o,g=_n(o.bodyFont),p=Yu(this,"left",o),_=a.x(p),b=d<g.lineHeight?(g.lineHeight-d)/2:0,S=n.y+b;if(o.usePointStyle){const w={radius:Math.min(f,d)/2,pointStyle:u.pointStyle,rotation:u.rotation,borderWidth:1},x=a.leftForLtr(_,f)+f/2,C=S+d/2;e.strokeStyle=o.multiKeyBackground,e.fillStyle=o.multiKeyBackground,am(e,w,x,C),e.strokeStyle=l.borderColor,e.fillStyle=l.backgroundColor,am(e,w,x,C)}else{e.lineWidth=Xe(l.borderWidth)?Math.max(...Object.values(l.borderWidth)):l.borderWidth||1,e.strokeStyle=l.borderColor,e.setLineDash(l.borderDash||[]),e.lineDashOffset=l.borderDashOffset||0;const w=a.leftForLtr(_,f),x=a.leftForLtr(a.xPlus(_,1),f-2),C=Fl(l.borderRadius);Object.values(C).some(T=>T!==0)?(e.beginPath(),e.fillStyle=o.multiKeyBackground,rm(e,{x:w,y:S,w:f,h:d,radius:C}),e.fill(),e.stroke(),e.fillStyle=l.backgroundColor,e.beginPath(),rm(e,{x,y:S+1,w:f-2,h:d-2,radius:C}),e.fill()):(e.fillStyle=o.multiKeyBackground,e.fillRect(w,S,f,d),e.strokeRect(w,S,f,d),e.fillStyle=l.backgroundColor,e.fillRect(x,S+1,f-2,d-2))}e.fillStyle=this.labelTextColors[i]}drawBody(e,n,i){const{body:a}=this,{bodySpacing:o,bodyAlign:l,displayColors:u,boxHeight:d,boxWidth:f,boxPadding:g}=i,p=_n(i.bodyFont);let _=p.lineHeight,b=0;const S=Wr(i.rtl,this.x,this.width),w=function(B){n.fillText(B,S.x(e.x+b),e.y+_/2),e.y+=_+o},x=S.textAlign(l);let C,T,O,M,D,U,L;for(n.textAlign=l,n.textBaseline="middle",n.font=p.string,e.x=Yu(this,x,i),n.fillStyle=i.bodyColor,tt(this.beforeBody,w),b=u&&x!=="right"?l==="center"?f/2+g:f+2+g:0,M=0,U=a.length;M<U;++M){for(C=a[M],T=this.labelTextColors[M],n.fillStyle=T,tt(C.before,w),O=C.lines,u&&O.length&&(this._drawColorBox(n,e,M,S,i),_=Math.max(p.lineHeight,d)),D=0,L=O.length;D<L;++D)w(O[D]),_=p.lineHeight;tt(C.after,w)}b=0,_=p.lineHeight,tt(this.afterBody,w),e.y-=o}drawFooter(e,n,i){const a=this.footer,o=a.length;let l,u;if(o){const d=Wr(i.rtl,this.x,this.width);for(e.x=Yu(this,i.footerAlign,i),e.y+=i.footerMarginTop,n.textAlign=d.textAlign(i.footerAlign),n.textBaseline="middle",l=_n(i.footerFont),n.fillStyle=i.footerColor,n.font=l.string,u=0;u<o;++u)n.fillText(a[u],d.x(e.x),e.y+l.lineHeight/2),e.y+=l.lineHeight+i.footerSpacing}}drawBackground(e,n,i,a){const{xAlign:o,yAlign:l}=this,{x:u,y:d}=e,{width:f,height:g}=i,{topLeft:p,topRight:_,bottomLeft:b,bottomRight:S}=Fl(a.cornerRadius);n.fillStyle=a.backgroundColor,n.strokeStyle=a.borderColor,n.lineWidth=a.borderWidth,n.beginPath(),n.moveTo(u+p,d),l==="top"&&this.drawCaret(e,n,i,a),n.lineTo(u+f-_,d),n.quadraticCurveTo(u+f,d,u+f,d+_),l==="center"&&o==="right"&&this.drawCaret(e,n,i,a),n.lineTo(u+f,d+g-S),n.quadraticCurveTo(u+f,d+g,u+f-S,d+g),l==="bottom"&&this.drawCaret(e,n,i,a),n.lineTo(u+b,d+g),n.quadraticCurveTo(u,d+g,u,d+g-b),l==="center"&&o==="left"&&this.drawCaret(e,n,i,a),n.lineTo(u,d+p),n.quadraticCurveTo(u,d,u+p,d),n.closePath(),n.fill(),a.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,i=this.$animations,a=i&&i.x,o=i&&i.y;if(a||o){const l=Cl[e.position].call(this,this._active,this._eventPosition);if(!l)return;const u=this._size=xS(this,e),d=Object.assign({},l,this._size),f=CS(n,e,d),g=ES(e,d,f,n);(a._to!==g.x||o._to!==g.y)&&(this.xAlign=f.xAlign,this.yAlign=f.yAlign,this.width=u.width,this.height=u.height,this.caretX=l.x,this.caretY=l.y,this._resolveAnimations().update(this,g))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(n);const a={width:this.width,height:this.height},o={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const l=oi(n.padding),u=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&u&&(e.save(),e.globalAlpha=i,this.drawBackground(o,e,a,n),Ix(e,n.textDirection),o.y+=l.top,this.drawTitle(o,e,n),this.drawBody(o,e,n),this.drawFooter(o,e,n),zx(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const i=this._active,a=e.map(({datasetIndex:u,index:d})=>{const f=this.chart.getDatasetMeta(u);if(!f)throw new Error("Cannot find a dataset at index "+u);return{datasetIndex:u,element:f.data[d],index:d}}),o=!md(i,a),l=this._positionChanged(a,n);(o||l)&&(this._active=a,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,i=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const a=this.options,o=this._active||[],l=this._getActiveElements(e,o,n,i),u=this._positionChanged(l,e),d=n||!md(l,o)||u;return d&&(this._active=l,(a.enabled||a.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),d}_getActiveElements(e,n,i,a){const o=this.options;if(e.type==="mouseout")return[];if(!a)return n.filter(u=>this.chart.data.datasets[u.datasetIndex]&&this.chart.getDatasetMeta(u.datasetIndex).controller.getParsed(u.index)!==void 0);const l=this.chart.getElementsAtEventForMode(e,o.mode,o,i);return o.reverse&&l.reverse(),l}_positionChanged(e,n){const{caretX:i,caretY:a,options:o}=this,l=Cl[o.position].call(this,e,n);return l!==!1&&(i!==l.x||a!==l.y)}}var SI={id:"tooltip",_element:AS,positioners:Cl,afterInit(t,e,n){n&&(t.tooltip=new AS({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:tC},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const wI=(t,e,n,i)=>(typeof e=="string"?(n=t.push(e)-1,i.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function xI(t,e,n,i){const a=t.indexOf(e);if(a===-1)return wI(t,e,n,i);const o=t.lastIndexOf(e);return a!==o?n:a}const CI=(t,e)=>t===null?null:En(Math.round(t),0,e);function RS(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class EI extends oo{static id="category";static defaults={ticks:{callback:RS}};constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const i=this.getLabels();for(const{index:a,label:o}of n)i[a]===o&&i.splice(a,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(mt(e))return null;const i=this.getLabels();return n=isFinite(n)&&i[n]===e?n:xI(i,e,qe(n,e),this._addedLabels),CI(n,i.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:i,max:a}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(i=0),n||(a=this.getLabels().length-1)),this.min=i,this.max=a}buildTicks(){const e=this.min,n=this.max,i=this.options.offset,a=[];let o=this.getLabels();o=e===0&&n===o.length-1?o:o.slice(e,n+1),this._valueRange=Math.max(o.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let l=e;l<=n;l++)a.push({value:l});return a}getLabelForValue(e){return RS.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function TI(t,e){const n=[],{bounds:a,step:o,min:l,max:u,precision:d,count:f,maxTicks:g,maxDigits:p,includeBounds:_}=t,b=o||1,S=g-1,{min:w,max:x}=e,C=!mt(l),T=!mt(u),O=!mt(f),M=(x-w)/(p+1);let D=N0((x-w)/S/b)*b,U,L,B,H;if(D<1e-14&&!C&&!T)return[{value:w},{value:x}];H=Math.ceil(x/D)-Math.floor(w/D),H>S&&(D=N0(H*D/S/b)*b),mt(d)||(U=Math.pow(10,d),D=Math.ceil(D*U)/U),a==="ticks"?(L=Math.floor(w/D)*D,B=Math.ceil(x/D)*D):(L=w,B=x),C&&T&&o&&Zj((u-l)/o,D/1e3)?(H=Math.round(Math.min((u-l)/D,g)),D=(u-l)/H,L=l,B=u):O?(L=C?l:L,B=T?u:B,H=f-1,D=(B-L)/H):(H=(B-L)/D,Pl(H,Math.round(H),D/1e3)?H=Math.round(H):H=Math.ceil(H));const Q=Math.max(j0(D),j0(L));U=Math.pow(10,mt(d)?Q:d),L=Math.round(L*U)/U,B=Math.round(B*U)/U;let Z=0;for(C&&(_&&L!==l?(n.push({value:l}),L<l&&Z++,Pl(Math.round((L+Z*D)*U)/U,l,DS(l,M,t))&&Z++):L<l&&Z++);Z<H;++Z){const q=Math.round((L+Z*D)*U)/U;if(T&&q>u)break;n.push({value:q})}return T&&_&&B!==u?n.length&&Pl(n[n.length-1].value,u,DS(u,M,t))?n[n.length-1].value=u:n.push({value:u}):(!T||B===u)&&n.push({value:B}),n}function DS(t,e,{horizontal:n,minRotation:i}){const a=ps(i),o=(n?Math.sin(a):Math.cos(a))||.001,l=.75*e*(""+t).length;return Math.min(e/o,l)}class OI extends oo{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return mt(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:i}=this.getUserBounds();let{min:a,max:o}=this;const l=d=>a=n?a:d,u=d=>o=i?o:d;if(e){const d=Qr(a),f=Qr(o);d<0&&f<0?u(0):d>0&&f>0&&l(0)}if(a===o){let d=o===0?1:Math.abs(o*.05);u(o+d),e||l(a-d)}this.min=a,this.max=o}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:i}=e,a;return i?(a=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,a>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${a} ticks. Limiting to 1000.`),a=1e3)):(a=this.computeTickLimit(),n=n||11),n&&(a=Math.min(n,a)),a}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let i=this.getTickLimit();i=Math.max(2,i);const a={maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},o=this._range||this,l=TI(a,o);return e.bounds==="ticks"&&Jj(l,this,"value"),e.reverse?(l.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),l}configure(){const e=this.ticks;let n=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){const a=(i-n)/Math.max(e.length-1,1)/2;n-=a,i+=a}this._startValue=n,this._endValue=i,this._valueRange=i-n}getLabelForValue(e){return Qm(e,this.chart.options.locale,this.options.ticks.format)}}class AI extends OI{static id="linear";static defaults={ticks:{callback:Dx.formatters.numeric}};determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=ri(e)?e:0,this.max=ri(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,i=ps(this.options.ticks.minRotation),a=(e?Math.sin(i):Math.cos(i))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,o.lineHeight/a))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}const Fd={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Nn=Object.keys(Fd);function MS(t,e){return t-e}function kS(t,e){if(mt(e))return null;const n=t._adapter,{parser:i,round:a,isoWeekday:o}=t._parseOpts;let l=e;return typeof i=="function"&&(l=i(l)),ri(l)||(l=typeof i=="string"?n.parse(l,i):n.parse(l)),l===null?null:(a&&(l=a==="week"&&(Xl(o)||o===!0)?n.startOf(l,"isoWeek",o):n.startOf(l,a)),+l)}function NS(t,e,n,i){const a=Nn.length;for(let o=Nn.indexOf(t);o<a-1;++o){const l=Fd[Nn[o]],u=l.steps?l.steps:Number.MAX_SAFE_INTEGER;if(l.common&&Math.ceil((n-e)/(u*l.size))<=i)return Nn[o]}return Nn[a-1]}function RI(t,e,n,i,a){for(let o=Nn.length-1;o>=Nn.indexOf(n);o--){const l=Nn[o];if(Fd[l].common&&t._adapter.diff(a,i,l)>=e-1)return l}return Nn[n?Nn.indexOf(n):0]}function DI(t){for(let e=Nn.indexOf(t)+1,n=Nn.length;e<n;++e)if(Fd[Nn[e]].common)return Nn[e]}function jS(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:i,hi:a}=Wm(n,e),o=n[i]>=e?n[i]:n[a];t[o]=!0}}function MI(t,e,n,i){const a=t._adapter,o=+a.startOf(e[0].value,i),l=e[e.length-1].value;let u,d;for(u=o;u<=l;u=+a.add(u,1,i))d=n[u],d>=0&&(e[d].major=!0);return e}function LS(t,e,n){const i=[],a={},o=e.length;let l,u;for(l=0;l<o;++l)u=e[l],a[u]=l,i.push({value:u,major:!1});return o===0||!n?i:MI(t,i,a,n)}class PS extends oo{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const i=e.time||(e.time={}),a=this._adapter=new NL._date(e.adapters.date);a.init(n),Ll(i.displayFormats,a.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:kS(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,i=e.time.unit||"day";let{min:a,max:o,minDefined:l,maxDefined:u}=this.getUserBounds();function d(f){!l&&!isNaN(f.min)&&(a=Math.min(a,f.min)),!u&&!isNaN(f.max)&&(o=Math.max(o,f.max))}(!l||!u)&&(d(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&d(this.getMinMax(!1))),a=ri(a)&&!isNaN(a)?a:+n.startOf(Date.now(),i),o=ri(o)&&!isNaN(o)?o:+n.endOf(Date.now(),i)+1,this.min=Math.min(a,o-1),this.max=Math.max(a+1,o)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],i=e[e.length-1]),{min:n,max:i}}buildTicks(){const e=this.options,n=e.time,i=e.ticks,a=i.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&a.length&&(this.min=this._userMin||a[0],this.max=this._userMax||a[a.length-1]);const o=this.min,l=this.max,u=s2(a,o,l);return this._unit=n.unit||(i.autoSkip?NS(n.minUnit,this.min,this.max,this._getLabelCapacity(o)):RI(this,u.length,n.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:DI(this._unit),this.initOffsets(a),e.reverse&&u.reverse(),LS(this,u,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,i=0,a,o;this.options.offset&&e.length&&(a=this.getDecimalForValue(e[0]),e.length===1?n=1-a:n=(this.getDecimalForValue(e[1])-a)/2,o=this.getDecimalForValue(e[e.length-1]),e.length===1?i=o:i=(o-this.getDecimalForValue(e[e.length-2]))/2);const l=e.length<3?.5:.25;n=En(n,0,l),i=En(i,0,l),this._offsets={start:n,end:i,factor:1/(n+1+i)}}_generate(){const e=this._adapter,n=this.min,i=this.max,a=this.options,o=a.time,l=o.unit||NS(o.minUnit,n,i,this._getLabelCapacity(n)),u=qe(a.ticks.stepSize,1),d=l==="week"?o.isoWeekday:!1,f=Xl(d)||d===!0,g={};let p=n,_,b;if(f&&(p=+e.startOf(p,"isoWeek",d)),p=+e.startOf(p,f?"day":l),e.diff(i,n,l)>1e5*u)throw new Error(n+" and "+i+" are too far apart with stepSize of "+u+" "+l);const S=a.ticks.source==="data"&&this.getDataTimestamps();for(_=p,b=0;_<i;_=+e.add(_,u,l),b++)jS(g,_,S);return(_===i||a.bounds==="ticks"||b===1)&&jS(g,_,S),Object.keys(g).sort(MS).map(w=>+w)}getLabelForValue(e){const n=this._adapter,i=this.options.time;return i.tooltipFormat?n.format(e,i.tooltipFormat):n.format(e,i.displayFormats.datetime)}format(e,n){const a=this.options.time.displayFormats,o=this._unit,l=n||a[o];return this._adapter.format(e,l)}_tickFormatFunction(e,n,i,a){const o=this.options,l=o.ticks.callback;if(l)return bt(l,[e,n,i],this);const u=o.time.displayFormats,d=this._unit,f=this._majorUnit,g=d&&u[d],p=f&&u[f],_=i[n],b=f&&p&&_&&_.major;return this._adapter.format(e,a||(b?p:g))}generateTickLabels(e){let n,i,a;for(n=0,i=e.length;n<i;++n)a=e[n],a.label=this._tickFormatFunction(a.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,i=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+i)*n.factor)}getValueForPixel(e){const n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+i*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,i=this.ctx.measureText(e).width,a=ps(this.isHorizontal()?n.maxRotation:n.minRotation),o=Math.cos(a),l=Math.sin(a),u=this._resolveTickFontOptions(0).size;return{w:i*o+u*l,h:i*l+u*o}}_getLabelCapacity(e){const n=this.options.time,i=n.displayFormats,a=i[n.unit]||i.millisecond,o=this._tickFormatFunction(e,0,LS(this,[e],this._majorUnit),a),l=this._getLabelSize(o),u=Math.floor(this.isHorizontal()?this.width/l.w:this.height/l.h)-1;return u>0?u:1}getDataTimestamps(){let e=this._cache.data||[],n,i;if(e.length)return e;const a=this.getMatchingVisibleMetas();if(this._normalized&&a.length)return this._cache.data=a[0].controller.getAllParsedValues(this);for(n=0,i=a.length;n<i;++n)e=e.concat(a[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,i;if(e.length)return e;const a=this.getLabels();for(n=0,i=a.length;n<i;++n)e.push(kS(this,a[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return r2(e.sort(MS))}}function Wu(t,e,n){let i=0,a=t.length-1,o,l,u,d;n?(e>=t[i].pos&&e<=t[a].pos&&({lo:i,hi:a}=za(t,"pos",e)),{pos:o,time:u}=t[i],{pos:l,time:d}=t[a]):(e>=t[i].time&&e<=t[a].time&&({lo:i,hi:a}=za(t,"time",e)),{time:o,pos:u}=t[i],{time:l,pos:d}=t[a]);const f=l-o;return f?u+(d-u)*(e-o)/f:u}class sz extends PS{static id="timeseries";static defaults=PS.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=Wu(n,this.min),this._tableRange=Wu(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:i}=this,a=[],o=[];let l,u,d,f,g;for(l=0,u=e.length;l<u;++l)f=e[l],f>=n&&f<=i&&a.push(f);if(a.length<2)return[{time:n,pos:0},{time:i,pos:1}];for(l=0,u=a.length;l<u;++l)g=a[l+1],d=a[l-1],f=a[l],Math.round((g+d)/2)!==f&&o.push({time:f,pos:l/(u-1)});return o}_generate(){const e=this.min,n=this.max;let i=super.getDataTimestamps();return(!i.includes(e)||!i.length)&&i.splice(0,0,e),(!i.includes(n)||i.length===1)&&i.push(n),i.sort((a,o)=>a-o)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),i=this.getLabelTimestamps();return n.length&&i.length?e=this.normalize(n.concat(i)):e=n.length?n:i,e=this._cache.all=e,e}getDecimalForValue(e){return(Wu(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return Wu(this._table,i*this._tableRange+this._minPos,!0)}}const nC="label";function IS(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function kI(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function iC(t,e){t.labels=e}function sC(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:nC;const i=[];t.datasets=e.map(a=>{const o=t.datasets.find(l=>l[n]===a[n]);return!o||!a.data||i.includes(o)?{...a}:(i.push(o),Object.assign(o,a),o)})}function NI(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:nC;const n={labels:[],datasets:[]};return iC(n,t.labels),sC(n,t.datasets,e),n}function jI(t,e){const{height:n=150,width:i=300,redraw:a=!1,datasetIdKey:o,type:l,data:u,options:d,plugins:f=[],fallbackContent:g,updateMode:p,..._}=t,b=A.useRef(null),S=A.useRef(null),w=()=>{b.current&&(S.current=new zd(b.current,{type:l,data:NI(u,o),options:d&&{...d},plugins:f}),IS(e,S.current))},x=()=>{IS(e,null),S.current&&(S.current.destroy(),S.current=null)};return A.useEffect(()=>{!a&&S.current&&d&&kI(S.current,d)},[a,d]),A.useEffect(()=>{!a&&S.current&&iC(S.current.config.data,u.labels)},[a,u.labels]),A.useEffect(()=>{!a&&S.current&&u.datasets&&sC(S.current.config.data,u.datasets,o)},[a,u.datasets]),A.useEffect(()=>{S.current&&(a?(x(),setTimeout(w)):S.current.update(p))},[a,d,u.labels,u.datasets,p]),A.useEffect(()=>{S.current&&(x(),setTimeout(w))},[l]),A.useEffect(()=>(w(),()=>x()),[]),Pe.createElement("canvas",{ref:b,role:"img",height:n,width:i,..._},g)}const LI=A.forwardRef(jI);function aC(t,e){return zd.register(e),A.forwardRef((n,i)=>Pe.createElement(LI,{...n,ref:i,type:t}))}const PI=aC("line",ML),II=aC("pie",kL);zd.register(EI,AI,aI,sI,fI,SI,dI,WP);function zI(){const{machines:t}=an(),{odpOrders:e}=ut(),{isLoading:n,isInitialized:i}=Ce(),{init:a,cleanup:o}=Hi();A.useEffect(()=>(i||a(),()=>{o()}),[a,i,o]);const l=A.useMemo(()=>{if(n)return{};const g=t.reduce((q,ne)=>{const he=ne.work_center||"Unknown";return q[he]||(q[he]={[ii.ACTIVE]:0,[ii.INACTIVE]:0,[ii.MAINTENANCE]:0}),q[he][ne.status]=(q[he][ne.status]||0)+1,q},{}),p=new Date,_=new Date(p);_.setDate(p.getDate()-p.getDay()),_.setHours(0,0,0,0);const b=e.filter(q=>q.completion_date?new Date(q.completion_date)>=_:!1).length,S=e.filter(q=>q.status==="IN PROGRESS"||q.status==="SCHEDULED").length,w=e.filter(q=>q.delivery_date?new Date(q.delivery_date)<p&&(q.quantity_completed||0)<(q.quantity||0):!1).length,x=t.filter(q=>q.status===ii.ACTIVE).length,C={},T=new Date(p);T.setDate(p.getDate()-30),e.forEach(q=>{if(q.scheduled_start_time){const ne=new Date(q.scheduled_start_time);if(ne>=T){const he=ne.toISOString().split("T")[0];C[he]=(C[he]||0)+1}}});const O=e.filter(q=>q.scheduled_start_time?new Date(q.scheduled_start_time)>=_:!1),M=O.filter(q=>q.cost&&q.cost>0).map(q=>q.cost),D=O.filter(q=>q.duration&&q.duration>0).map(q=>q.duration),U=M.length>0?M.reduce((q,ne)=>q+ne,0)/M.length:0,L=D.length>0?D.reduce((q,ne)=>q+ne,0)/D.length:0,B={},H={},Q=["STAMPA","CONFEZIONAMENTO"],Z=["ZANICA","BUSTO_GAROLFO"];return Q.forEach(q=>{const ne=q.toLowerCase();B[ne]={},H[ne]={},Z.forEach(he=>{const oe=he==="BUSTO_GAROLFO"?"busto_garolfo":he.toLowerCase(),I=e.filter(G=>!G.work_center||!G.department?!1:G.work_center===he&&G.department===q),K=I.filter(G=>G.cost&&G.cost>0).map(G=>G.cost),le=K.length>0?K.reduce((G,re)=>G+re,0)/K.length:0,ge=I.filter(G=>G.duration&&G.duration>0).map(G=>G.duration),j=ge.length>0?ge.reduce((G,re)=>G+re,0)/ge.length:0;B[ne][oe]=le,H[ne][oe]=j})}),{machinesByWorkCenter:g,completedThisWeek:b,tasksInWip:S,delayedTasks:w,activeMachines:x,totalMachines:t.length,totalOrders:e.length,tasksPerDay:C,avgWeeklyCost:U,avgWeeklyDuration:L,weeklyOrdersCount:O.length,costMatrix:B,durationMatrix:H}},[t,e,n]),u=A.useMemo(()=>{if(!l.tasksPerDay)return null;const p=Object.keys(l.tasksPerDay).sort().slice(-7);return{labels:p.map(_=>new Date(_).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit"})),datasets:[{label:"Lavori Iniziati",data:p.map(_=>l.tasksPerDay[_]||0),borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.4}]}},[l.tasksPerDay]),d={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},title:{display:!1}},scales:{y:{beginAtZero:!0,ticks:{stepSize:1}}}},f={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{padding:20,usePointStyle:!0}}}};return n?y.jsx("div",{className:"content-section",children:y.jsx("div",{className:"loading",children:"Caricamento dashboard..."})}):y.jsxs("div",{className:"content-section",children:[y.jsx(Ss,{title:"Dashboard Produzione"}),y.jsxs("div",{className:"metrics-grid",children:[y.jsxs("div",{className:"metric-card",children:[y.jsx("h3",{children:"Macchine Totali"}),y.jsx("div",{className:"metric-value",children:l.totalMachines}),y.jsxs("div",{className:"metric-subtitle",children:["Attive: ",l.activeMachines]})]}),y.jsxs("div",{className:"metric-card",children:[y.jsx("h3",{children:"Ordini Totali"}),y.jsx("div",{className:"metric-value",children:l.totalOrders})]}),y.jsxs("div",{className:"metric-card",children:[y.jsx("h3",{children:"Completati Questa Settimana"}),y.jsx("div",{className:"metric-value",children:l.completedThisWeek})]}),y.jsxs("div",{className:"metric-card",children:[y.jsx("h3",{children:"Lavori in Corso"}),y.jsx("div",{className:"metric-value",children:l.tasksInWip})]}),y.jsxs("div",{className:"metric-card",children:[y.jsx("h3",{children:"Lavori Ritardati"}),y.jsx("div",{className:"metric-value delayed",children:l.delayedTasks})]})]}),y.jsxs("div",{className:"weekly-metrics-row",children:[y.jsxs("div",{className:"weekly-metric-card",children:[y.jsx("h3",{children:"Ordini Settimanali"}),y.jsx("div",{className:"metric-value",children:l.weeklyOrdersCount}),y.jsx("div",{className:"metric-subtitle",children:"Questa Settimana"})]}),y.jsxs("div",{className:"weekly-metric-card",children:[y.jsx("h3",{children:"Costo Medio"}),y.jsxs("div",{className:"metric-value",children:["€",l.avgWeeklyCost.toFixed(2)]}),y.jsx("div",{className:"metric-subtitle",children:"Per Lavoro Questa Settimana"})]}),y.jsxs("div",{className:"metric-card",children:[y.jsx("h3",{children:"Durata Media"}),y.jsxs("div",{className:"metric-value",children:[l.avgWeeklyDuration.toFixed(1),"h"]}),y.jsx("div",{className:"metric-subtitle",children:"Per Lavoro Questa Settimana"})]})]}),y.jsxs("div",{className:"matrix-tables-container",children:[y.jsxs("div",{className:"matrix-table-section",children:[y.jsx("h3",{children:"Costo Medio per Centro di Lavoro e Reparto"}),y.jsx("div",{className:"matrix-table",children:y.jsxs("table",{children:[y.jsx("thead",{children:y.jsxs("tr",{children:[y.jsx("th",{}),y.jsx("th",{children:"ZANICA"}),y.jsx("th",{children:"BUSTO GAROLFO"})]})}),y.jsxs("tbody",{children:[y.jsxs("tr",{children:[y.jsx("td",{className:"department-label",children:"STAMPA"}),y.jsxs("td",{className:"metric-cell",children:["€",l.costMatrix?.stampa?.zanica?.toFixed(2)||"0.00"]}),y.jsxs("td",{className:"metric-cell",children:["€",l.costMatrix?.stampa?.busto_garolfo?.toFixed(2)||"0.00"]})]}),y.jsxs("tr",{children:[y.jsx("td",{className:"department-label",children:"CONFEZIONAMENTO"}),y.jsxs("td",{className:"metric-cell",children:["€",l.costMatrix?.confezionamento?.zanica?.toFixed(2)||"0.00"]}),y.jsxs("td",{className:"metric-cell",children:["€",l.costMatrix?.confezionamento?.busto_garolfo?.toFixed(2)||"0.00"]})]})]})]})})]}),y.jsxs("div",{className:"matrix-table-section",children:[y.jsx("h3",{children:"Durata Media per Centro di Lavoro e Reparto"}),y.jsx("div",{className:"matrix-table",children:y.jsxs("table",{children:[y.jsx("thead",{children:y.jsxs("tr",{children:[y.jsx("th",{}),y.jsx("th",{children:"ZANICA"}),y.jsx("th",{children:"BUSTO GAROLFO"})]})}),y.jsxs("tbody",{children:[y.jsxs("tr",{children:[y.jsx("td",{className:"department-label",children:"STAMPA"}),y.jsxs("td",{className:"metric-cell",children:[l.durationMatrix?.stampa?.zanica?.toFixed(1)||"0.0","h"]}),y.jsxs("td",{className:"metric-cell",children:[l.durationMatrix?.stampa?.busto_garolfo?.toFixed(1)||"0.0","h"]})]}),y.jsxs("tr",{children:[y.jsx("td",{className:"department-label",children:"CONFEZIONAMENTO"}),y.jsxs("td",{className:"metric-cell",children:[l.durationMatrix?.confezionamento?.zanica?.toFixed(1)||"0.0","h"]}),y.jsxs("td",{className:"metric-cell",children:[l.durationMatrix?.confezionamento?.busto_garolfo?.toFixed(1)||"0.0","h"]})]})]})]})})]})]}),y.jsxs("div",{className:"charts-container",children:[y.jsxs("div",{className:"chart-section line-chart-section",children:[y.jsx("h3",{children:"Lavori Iniziati per Giorno (Ultimi 7 Giorni)"}),y.jsx("div",{className:"chart-container",children:u&&y.jsx(PI,{data:u,options:d,height:300})})]}),y.jsxs("div",{className:"chart-section pie-charts-section",children:[y.jsx("h3",{children:"Macchine per Centro di Lavoro e Stato"}),y.jsx("div",{className:"pie-charts-grid",children:Object.entries(l.machinesByWorkCenter||{}).map(([g,p])=>{const _={labels:Object.keys(p).map(b=>b.charAt(0).toUpperCase()+b.slice(1).toLowerCase()),datasets:[{data:Object.values(p),backgroundColor:["rgba(34, 197, 94, 0.8)","rgba(239, 68, 68, 0.8)","rgba(245, 158, 11, 0.8)"],borderColor:["rgba(34, 197, 94, 1)","rgba(239, 68, 68, 1)","rgba(245, 158, 11, 1)"],borderWidth:2}]};return y.jsxs("div",{className:"pie-chart-item",children:[y.jsx("h4",{children:g}),y.jsx("div",{className:"pie-chart-container",children:y.jsx(II,{data:_,options:f,height:200})}),y.jsx("div",{className:"pie-chart-legend",children:Object.entries(p).map(([b,S])=>y.jsxs("div",{className:"legend-item",children:[y.jsx("span",{className:"legend-color",style:{backgroundColor:b==="ACTIVE"?"rgba(34, 197, 94, 0.8)":b==="INACTIVE"?"rgba(239, 68, 68, 0.8)":"rgba(245, 158, 11, 0.8)"}}),y.jsxs("span",{className:"legend-label",children:[b,": ",S]})]},b))})]},g)})})]})]})]})}function FI(){const[t,e]=A.useState({email:"",password:"",workCenter:""}),[n,i]=A.useState(!1),[a,o]=A.useState({}),{signIn:l,error:u}=sc(),{setSelectedWorkCenter:d}=Ce(),f=aa(),{handleAsync:g}=ws("LoginPage"),p=w=>{const{name:x,value:C}=w.target;e(T=>({...T,[x]:C})),a[x]&&o(T=>({...T,[x]:""}))},_=()=>{const w={};return t.email.trim()?/\S+@\S+\.\S+/.test(t.email)||(w.email="Inserisci un indirizzo email valido"):w.email="Email richiesta",t.password?t.password.length<6&&(w.password="La password deve essere di almeno 6 caratteri"):w.password="Password richiesta",t.workCenter||(w.workCenter="Centro di lavoro richiesto"),o(w),Object.keys(w).length===0},b=async w=>{w.preventDefault(),_()&&(i(!0),await g(async()=>{(await l(t.email,t.password)).success&&(d(t.workCenter),f("/",{replace:!0}))},{context:"Login",fallbackMessage:"Accesso fallito. Riprova.",onFinally:()=>i(!1)}))},S=w=>a[w]?y.jsx("span",{className:"error-message",style:{color:"red",fontSize:"12px",marginTop:"4px"},children:a[w]}):null;return y.jsx("div",{className:"auth-page",children:y.jsxs("div",{className:"auth-container",children:[y.jsxs("div",{className:"auth-header",children:[y.jsx("h1",{children:"Bentornato"}),y.jsx("p",{children:"Accedi al tuo account per continuare"})]}),y.jsxs("form",{onSubmit:b,className:"auth-form",children:[y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"email",children:"Indirizzo Email"}),y.jsx("input",{type:"email",id:"email",name:"email",value:t.email,onChange:p,placeholder:"Inserisci la tua email",className:a.email?"error":"",disabled:n,autoComplete:"email"}),S("email")]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"password",children:"Password"}),y.jsx("input",{type:"password",id:"password",name:"password",value:t.password,onChange:p,placeholder:"Inserisci la tua password",className:a.password?"error":"",disabled:n,autoComplete:"current-password"}),S("password")]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"workCenter",children:"Centro di Lavoro *"}),y.jsxs("select",{id:"workCenter",name:"workCenter",value:t.workCenter,onChange:p,className:a.workCenter?"error":"",disabled:n,children:[y.jsx("option",{value:"",children:"Seleziona un centro di lavoro"}),y.jsx("option",{value:Me.ZANICA,children:Me.ZANICA}),y.jsx("option",{value:Me.BUSTO_GAROLFO,children:Me.BUSTO_GAROLFO}),y.jsx("option",{value:Me.BOTH,children:Me.BOTH})]}),S("workCenter")]}),u&&y.jsxs("div",{className:"auth-error",children:[y.jsx("span",{className:"error-icon",children:"●"}),u]}),y.jsx("button",{type:"submit",className:"btn btn-primary auth-submit",disabled:n,children:n?"Accesso in corso...":"Accedi"})]}),y.jsxs("div",{className:"auth-links",children:[y.jsx(Cn,{to:"/forgot-password",className:"auth-link",children:"Password dimenticata?"}),y.jsx("div",{className:"auth-divider",children:y.jsx("span",{children:"Non hai un account?"})}),y.jsx(Cn,{to:"/signup",className:"btn btn-secondary",children:"Crea Account"})]}),!1]})})}function UI(){const[t,e]=A.useState({email:"",password:"",confirmPassword:"",firstName:"",lastName:""}),[n,i]=A.useState(!1),[a,o]=A.useState({}),{signUp:l,error:u}=sc(),d=aa(),{handleAsync:f}=ws("SignupPage"),g=S=>{const{name:w,value:x}=S.target;e(C=>({...C,[w]:x})),a[w]&&o(C=>({...C,[w]:""}))},p=()=>{const S={};return t.email.trim()?/\S+@\S+\.\S+/.test(t.email)||(S.email="Inserisci un indirizzo email valido"):S.email="Email richiesta",t.password?t.password.length<6&&(S.password="La password deve essere di almeno 6 caratteri"):S.password="Password richiesta",t.confirmPassword?t.password!==t.confirmPassword&&(S.confirmPassword="Le password non coincidono"):S.confirmPassword="Conferma la tua password",t.firstName.trim()||(S.firstName="Nome richiesto"),t.lastName.trim()||(S.lastName="Cognome richiesto"),o(S),Object.keys(S).length===0},_=async S=>{S.preventDefault(),p()&&(i(!0),await f(async()=>{const w={first_name:t.firstName,last_name:t.lastName,full_name:`${t.firstName} ${t.lastName}`};(await l(t.email,t.password,w)).success&&d("/",{replace:!0})},{context:"Signup",fallbackMessage:"Creazione account fallita. Riprova.",onFinally:()=>i(!1)}))},b=S=>a[S]?y.jsx("span",{className:"error-message",style:{color:"red",fontSize:"12px",marginTop:"4px"},children:a[S]}):null;return y.jsx("div",{className:"auth-page",children:y.jsxs("div",{className:"auth-container",children:[y.jsxs("div",{className:"auth-header",children:[y.jsx("h1",{children:"Crea Account"}),y.jsx("p",{children:"Registrati per iniziare con il tuo account"})]}),y.jsxs("form",{onSubmit:_,className:"auth-form",children:[y.jsxs("div",{className:"form-row",children:[y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"firstName",children:"Nome"}),y.jsx("input",{type:"text",id:"firstName",name:"firstName",value:t.firstName,onChange:g,placeholder:"Inserisci il tuo nome",className:a.firstName?"error":"",disabled:n,autoComplete:"given-name"}),b("firstName")]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"lastName",children:"Cognome"}),y.jsx("input",{type:"text",id:"lastName",name:"lastName",value:t.lastName,onChange:g,placeholder:"Inserisci il tuo cognome",className:a.lastName?"error":"",disabled:n,autoComplete:"family-name"}),b("lastName")]})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"email",children:"Indirizzo Email"}),y.jsx("input",{type:"email",id:"email",name:"email",value:t.email,onChange:g,placeholder:"Inserisci la tua email",className:a.email?"error":"",disabled:n,autoComplete:"email"}),b("email")]}),y.jsxs("div",{className:"form-row",children:[y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"password",children:"Password"}),y.jsx("input",{type:"password",id:"password",name:"password",value:t.password,onChange:g,placeholder:"Crea una password",className:a.password?"error":"",disabled:n,autoComplete:"new-password"}),b("password")]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"confirmPassword",children:"Conferma Password"}),y.jsx("input",{type:"password",id:"confirmPassword",name:"confirmPassword",value:t.confirmPassword,onChange:g,placeholder:"Conferma la tua password",className:a.confirmPassword?"error":"",disabled:n,autoComplete:"new-password"}),b("confirmPassword")]})]}),u&&y.jsxs("div",{className:"auth-error",children:[y.jsx("span",{className:"error-icon",children:"●"}),u]}),y.jsx("button",{type:"submit",className:"btn btn-primary auth-submit",disabled:n,children:n?"Creazione Account...":"Crea Account"})]}),y.jsxs("div",{className:"auth-links",children:[y.jsx("div",{className:"auth-divider",children:y.jsx("span",{children:"Hai già un account?"})}),y.jsx(Cn,{to:"/login",className:"btn btn-secondary",children:"Accedi"})]})]})})}function HI(){const[t,e]=A.useState(""),[n,i]=A.useState(!1),[a,o]=A.useState(!1),[l,u]=A.useState(""),{resetPassword:d}=sc(),{handleAsync:f}=ws("ForgotPasswordPage"),g=async p=>{if(p.preventDefault(),!t.trim()){u("Inserisci il tuo indirizzo email");return}if(!/\S+@\S+\.\S+/.test(t)){u("Inserisci un indirizzo email valido");return}i(!0),u(""),await f(async()=>{const _=await d(t);_.success?o(!0):u(_.error||"Invio email di reset fallito")},{context:"Password Reset",fallbackMessage:"Invio email di reset fallito. Riprova.",onFinally:()=>i(!1)})};return a?y.jsx("div",{className:"auth-page",children:y.jsxs("div",{className:"auth-container",children:[y.jsxs("div",{className:"auth-header",children:[y.jsx("h1",{children:"Controlla la Tua Email"}),y.jsxs("p",{children:["Abbiamo inviato un link per il reset della password a ",t]})]}),y.jsxs("div",{className:"auth-success",children:[y.jsx("div",{className:"success-icon",children:"✅"}),y.jsx("p",{children:"Se non vedi l'email, controlla la cartella spam."})]}),y.jsx("div",{className:"auth-links",children:y.jsx(Cn,{to:"/login",className:"btn btn-primary",children:"Torna all'Accesso"})})]})}):y.jsx("div",{className:"auth-page",children:y.jsxs("div",{className:"auth-container",children:[y.jsxs("div",{className:"auth-header",children:[y.jsx("h1",{children:"Reset Password"}),y.jsx("p",{children:"Inserisci la tua email per ricevere un link per il reset della password"})]}),y.jsxs("form",{onSubmit:g,className:"auth-form",children:[y.jsxs("div",{className:"form-group",children:[y.jsx("label",{htmlFor:"email",children:"Indirizzo Email"}),y.jsx("input",{type:"email",id:"email",name:"email",value:t,onChange:p=>e(p.target.value),placeholder:"Inserisci la tua email",disabled:n,autoComplete:"email"})]}),l&&y.jsxs("div",{className:"auth-error",children:[y.jsx("span",{className:"error-icon",children:"●"}),l]}),y.jsx("button",{type:"submit",className:"btn btn-primary auth-submit",disabled:n,children:n?"Invio...":"Invia Link di Reset"})]}),y.jsx("div",{className:"auth-links",children:y.jsx(Cn,{to:"/login",className:"auth-link",children:"Torna all'Accesso"})})]})})}class wd extends Pe.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null,errorId:null}}static generateErrorId(){return`ERR_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}static getDerivedStateFromError(e){return{hasError:!0,error:e,errorId:wd.generateErrorId()}}componentDidCatch(e,n){this.setState({errorInfo:n,errorId:this.state.errorId||wd.generateErrorId()}),mi(e,"ErrorBoundary"),this.logErrorToService(e,n)}logErrorToService(e,n){}handleRetry=()=>{this.setState({hasError:!1,error:null,errorInfo:null,errorId:null}),window.location.reload()};handleGoHome=()=>{window.location.href="/"};handleReportIssue=()=>{const e=encodeURIComponent(`App Error Report - ${this.state.errorId}`),n=encodeURIComponent(`
Error Report Details:
- Error ID: ${this.state.errorId}
- Error: ${this.state.error?.message||"Unknown error"}
- URL: ${window.location.href}
- User Agent: ${navigator.userAgent}
- Timestamp: ${new Date().toISOString()}

Please describe what you were doing when this error occurred:
    `);window.open(`mailto:support@company.com?subject=${e}&body=${n}`)};getErrorRecommendations=e=>{switch(Sw(e)){case Js.CRITICAL:return y.jsxs("div",{className:"error-boundary__recommendation critical",children:[y.jsx("strong",{children:"Critical Error:"})," This is a serious issue. Please contact support immediately."]});case Js.HIGH:return y.jsxs("div",{className:"error-boundary__recommendation high",children:[y.jsx("strong",{children:"High Priority:"})," Please try refreshing the page or contact support if the problem persists."]});case Js.MEDIUM:return y.jsxs("div",{className:"error-boundary__recommendation medium",children:[y.jsx("strong",{children:"Medium Priority:"})," Try refreshing the page or navigating to a different section."]});case Js.LOW:return y.jsxs("div",{className:"error-boundary__recommendation low",children:[y.jsx("strong",{children:"Low Priority:"})," This error should resolve itself. Try continuing with your task."]});default:return null}};render(){return this.state.hasError?y.jsx("div",{className:"error-boundary",children:y.jsxs("div",{className:"error-boundary__container",children:[y.jsx("div",{className:"error-boundary__icon",children:"🚨"}),y.jsx("h1",{className:"error-boundary__title",children:"Oops! Something went wrong"}),y.jsx("p",{className:"error-boundary__message",children:"We're sorry, but something unexpected happened. Our team has been notified and is working to fix this issue."}),!1,y.jsxs("div",{className:"error-boundary__actions",children:[y.jsx("button",{onClick:this.handleRetry,className:"btn-primary",children:"Try Again"}),y.jsx("button",{onClick:this.handleGoHome,className:"btn-secondary",children:"Go to Home"}),y.jsx("button",{onClick:this.handleReportIssue,className:"error-boundary__button error-boundary__button--secondary",children:"📧 Report Issue"})]}),this.state.error&&y.jsx("div",{className:"error-boundary__recommendations",children:this.getErrorRecommendations(this.state.error)}),y.jsxs("div",{className:"error-boundary__footer",children:[y.jsxs("p",{className:"error-boundary__error-id",children:["Error ID: ",y.jsx("code",{children:this.state.errorId})]}),y.jsx("p",{className:"error-boundary__help",children:"If this problem persists, please contact support with the Error ID above."})]})]})}):this.props.children}}const BI=()=>{const{user:t,loading:e}=sc();return e?y.jsx("div",{className:"auth-loading",children:y.jsxs("div",{className:"auth-loading__container",children:[y.jsx("div",{className:"auth-loading__spinner"}),y.jsx("p",{children:"Checking authentication..."})]})}):t?y.jsx(XS,{}):y.jsx(KS,{to:"/login",replace:!0})},$I=({message:t,type:e="info",isVisible:n,onClose:i,autoClose:a=!0,duration:o=5e3})=>{if(A.useEffect(()=>{if(a&&n){const d=setTimeout(()=>{i()},o);return()=>clearTimeout(d)}},[n,a,o,i]),!n)return null;const l="alert",u={success:"alert--success",error:"alert--error",warning:"alert--warning",info:"alert--info"};return y.jsx("div",{className:`${l} ${u[e]||u.info}`,children:y.jsxs("div",{className:"alert__content",children:[y.jsx("span",{className:"alert__message",children:t}),y.jsx("button",{onClick:i,className:"alert__close","aria-label":"Close",children:"×"})]})})},zS=({isOpen:t,title:e,message:n,onConfirm:i,onCancel:a,confirmText:o="Elimina",cancelText:l="Annulla",type:u="danger",customButtons:d=null})=>{if(!t)return null;const f="confirm-dialog",g={danger:"confirm-dialog--danger",warning:"confirm-dialog--warning",info:"confirm-dialog--info"};return y.jsxs("div",{className:`${f} ${g[u]||g.danger}`,children:[y.jsx("div",{className:"confirm-dialog__overlay",onClick:a}),y.jsxs("div",{className:"confirm-dialog__content",children:[y.jsx("div",{className:"confirm-dialog__header",children:y.jsx("h3",{className:"confirm-dialog__title",children:e})}),y.jsx("div",{className:"confirm-dialog__body",children:y.jsx("p",{className:"confirm-dialog__message",children:n})}),y.jsx("div",{className:"confirm-dialog__footer",children:d?d.map((p,_)=>y.jsx("button",{onClick:p.onClick,className:`confirm-dialog__button confirm-dialog__button--${p.variant||"secondary"}`,children:p.text},_)):y.jsxs(y.Fragment,{children:[y.jsx("button",{onClick:a,className:"confirm-dialog__button confirm-dialog__button--secondary",children:l}),y.jsx("button",{onClick:i,className:"confirm-dialog__button confirm-dialog__button--primary",children:o})]})})]})]})},VI=()=>{const{alert:t,hideAlert:e,confirmDialog:n,hideConfirmDialog:i,conflictDialog:a,hideConflictDialog:o}=Ce(),{cleanup:l}=Hi(),{resolveConflictByShunting:u}=Fi();return A.useEffect(()=>()=>{l()},[l]),y.jsxs("div",{className:"main-content",children:[y.jsx(Q1,{}),y.jsx("div",{className:"page-container",children:y.jsx("main",{children:y.jsx(XS,{})})}),y.jsx($I,{message:t.message,type:t.type,isVisible:t.isVisible,onClose:e}),y.jsx(zS,{isOpen:n.isOpen,title:n.title,message:n.message,onConfirm:()=>{n.onConfirm?.(),i()},onCancel:i,type:n.type}),y.jsx(zS,{isOpen:a.isOpen,title:"Risoluzione Conflitto",message:a.details?`Il lavoro "${a.details.draggedTask?.odp_number}" si sovrappone con "${a.details.conflictingTask?.odp_number}". Come vuoi procedere?`:"",type:"warning",customButtons:[{text:"Annulla",variant:"secondary",onClick:o},{text:"Sposta a Sinistra ←",variant:"primary",onClick:async()=>{if(a.details){const d=await u(a.details,"left");d.error&&Ce.getState().showAlert(d.error,"error")}}},{text:"Sposta a Destra →",variant:"primary",onClick:async()=>{if(a.details){const d=await u(a.details,"right");d.error&&Ce.getState().showAlert(d.error,"error")}}}]})]})};function qI(){return y.jsx(wd,{children:y.jsxs(pO,{children:[y.jsx($t,{path:"/login",element:y.jsx(FI,{})}),y.jsx($t,{path:"/signup",element:y.jsx(UI,{})}),y.jsx($t,{path:"/forgot-password",element:y.jsx(HI,{})}),y.jsx($t,{path:"/",element:y.jsx(BI,{}),children:y.jsxs($t,{element:y.jsx(VI,{}),children:[y.jsx($t,{index:!0,element:y.jsx(zI,{})}),y.jsx($t,{path:"machinery",element:y.jsx(uk,{})}),y.jsx($t,{path:"machinery/add",element:y.jsx(u0,{})}),y.jsx($t,{path:"machinery/:id/edit",element:y.jsx(u0,{})}),y.jsx($t,{path:"machinery/:machineId/calendar",element:y.jsx(Ik,{})}),y.jsx($t,{path:"phases",element:y.jsx(zk,{})}),y.jsx($t,{path:"phases/add",element:y.jsx(d0,{})}),y.jsx($t,{path:"phases/:id/edit",element:y.jsx(d0,{})}),y.jsx($t,{path:"backlog",element:y.jsx(Uk,{})}),y.jsx($t,{path:"backlog/add",element:y.jsx(h0,{})}),y.jsx($t,{path:"backlog/:id/edit",element:y.jsx(h0,{})}),y.jsx($t,{path:"scheduler",element:y.jsx(yj,{})})]})}),y.jsx($t,{path:"*",element:y.jsx(KS,{to:"/",replace:!0})})]})})}const GI="/";CT.createRoot(document.getElementById("root")).render(y.jsx(Pe.StrictMode,{children:y.jsx(FO,{basename:GI,children:y.jsx(tD,{children:y.jsx(qI,{})})})}));export{Pe as R,ut as a,nz as b,ws as c,aa as d,tz as e,Fi as f,Aw as g,ZI as h,JI as i,y as j,ez as k,A as r,Gt as t,Ce as u};
