import{u as l,a as d,b as g,r as u,j as t,R as x,c as v,d as N,e as f}from"./index-BaKXb-we.js";const j=x.memo(({task:e})=>{const{isEditMode:i,conflictDialog:r}=l(),{updateOdpOrder:o}=d();v("TaskPool");const a=N(),{attributes:s,listeners:c,setNodeRef:m,transform:n}=f({id:`task-${e.id}`,data:{task:e,type:"task"},disabled:!i}),p=n?{transform:`translate3d(${n.x}px, ${n.y}px, 0)`}:void 0;return t.jsxs("div",{ref:m,style:p,className:`task-item ${i?"":"non-draggable"} ${r.isOpen&&r.details?.draggedTask?.id===e.id?"conflict-pending":""}`,children:[t.jsxs("div",{className:"task-content",children:[t.jsx("span",{className:"task-label",children:e.odp_number}),t.jsxs("span",{className:"task-time",children:[e.time_remaining?Number(e.time_remaining).toFixed(1):(e.duration||1).toFixed(1),"h"]})]}),t.jsxs("div",{className:"task-controls",children:[t.jsx("button",{className:"task-btn info-btn",title:`Codice Articolo: ${e.article_code||"Non specificato"}
Codice Articolo Esterno: ${e.external_article_code||"Non specificato"}
Nome Cliente: ${e.nome_cliente||"Non specificato"}
Data Consegna: ${e.delivery_date?new Date(e.delivery_date).toLocaleDateString():"Non impostata"}
QuantitÃ : ${e.quantity||"Non specificata"}
${e.scheduled_start_time?`Inizio Programmato: ${new Date(e.scheduled_start_time).toISOString().replace("T"," ").replace(".000Z","")}`:"Non programmato"}
${e.scheduled_end_time?`Fine Programmata: ${new Date(e.scheduled_end_time).toISOString().replace("T"," ").replace(".000Z","")}`:"Non programmato"}`,children:t.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"currentColor",children:t.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"})})}),t.jsx("button",{className:"task-btn edit-btn",onClick:h=>{h.stopPropagation(),a(`/backlog/${e.id}/edit`)},title:"Modifica e ricalcola",children:t.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"currentColor",children:t.jsx("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"})})}),i&&t.jsx("div",{className:"drag-handle",...c,...s,title:"Trascina per programmare",children:t.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor",children:t.jsx("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"})})})]})]})});function b(){const{selectedWorkCenter:e}=l(),{odpOrders:i}=d(),{setNodeRef:r}=g({id:"task-pool",data:{type:"pool"}}),o=u.useMemo(()=>{let a=i.filter(s=>s.status!=="SCHEDULED");return e&&e!=="BOTH"&&(a=a.filter(s=>s.work_center===e)),a},[i,e]);return t.jsxs("div",{className:"task-pool-section",children:[t.jsx("h2",{className:"section-title",children:"Pool Lavori"}),t.jsx("p",{children:"Trascina i lavori da qui per programmarli, o trascina gli eventi programmati qui per annullarli."}),t.jsx("div",{ref:r,id:"task_pool",className:"task-pool-grid",children:o.length>0?o.map(a=>t.jsx(j,{task:a},a.id)):t.jsx("div",{className:"empty-state",children:"Nessun lavoro non programmato disponibile"})})]})}export{b as default};
