import{u as c,a as p,b as h,r as f,j as t,R as x,c as v,d as N,e as j,f as b,g as d}from"./index-BdUhbY7s.js";const D=x.memo(({task:e})=>{const{isEditMode:i,conflictDialog:r}=c(),{updateOdpOrder:n}=p();v("TaskPool");const o=N(),{attributes:s,listeners:m,setNodeRef:u,transform:l}=j({id:`task-${e.id}`,data:{task:e,type:"task"},disabled:!i}),g=l?{transform:`translate3d(${l.x}px, ${l.y}px, 0)`}:void 0;return t.jsxs("div",{ref:u,style:g,className:`task-item ${i?"":"non-draggable"} ${r.isOpen&&r.details?.draggedTask?.id===e.id?"conflict-pending":""}`,children:[t.jsxs("div",{className:"task-content",children:[t.jsx("span",{className:"task-label",children:e.odp_number}),t.jsxs("span",{className:"task-time",children:[e.time_remaining?Number(e.time_remaining).toFixed(1):(e.duration||1).toFixed(1),"h"]})]}),t.jsxs("div",{className:"task-controls",children:[t.jsx("button",{className:"task-btn info-btn",onClick:a=>{a.stopPropagation(),a.preventDefault()},onMouseDown:a=>{a.stopPropagation(),a.preventDefault()},onPointerDown:a=>{a.stopPropagation(),a.preventDefault()},title:`Codice Articolo: ${e.article_code||"Non specificato"}
Codice Articolo Esterno: ${e.external_article_code||"Non specificato"}
Nome Cliente: ${e.nome_cliente||"Non specificato"}
Data Consegna: ${b(e.delivery_date)||"Non impostata"}
QuantitÃ : ${e.quantity||"Non specificata"}
${e.scheduled_start_time?`Inizio Programmato: ${d(e.scheduled_start_time)}`:"Non programmato"}
${e.scheduled_end_time?`Fine Programmata: ${d(e.scheduled_end_time)}`:"Non programmato"}`,children:t.jsx("span",{style:{fontSize:"12px",fontWeight:"bold",color:"#374151"},children:"i"})}),t.jsx("button",{className:"task-btn edit-btn",onClick:a=>{a.stopPropagation(),a.preventDefault(),o(`/backlog/${e.id}/edit`)},onMouseDown:a=>{a.stopPropagation(),a.preventDefault()},onPointerDown:a=>{a.stopPropagation(),a.preventDefault()},title:"Modifica e ricalcola",children:t.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"currentColor",children:t.jsx("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"})})}),i&&t.jsx("div",{className:"drag-handle",...m,...s,title:"Trascina per programmare",children:t.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor",children:t.jsx("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"})})})]})]})});function $(){const{selectedWorkCenter:e}=c(),{odpOrders:i}=p(),{setNodeRef:r}=h({id:"task-pool",data:{type:"pool"}}),n=f.useMemo(()=>{let o=i.filter(s=>s.status!=="SCHEDULED");return e&&e!=="BOTH"&&(o=o.filter(s=>s.work_center===e)),o},[i,e]);return t.jsxs("div",{className:"task-pool-section",children:[t.jsx("h2",{className:"section-title",children:"Pool Lavori"}),t.jsx("p",{children:"Trascina i lavori da qui per programmarli, o trascina gli eventi programmati qui per annullarli."}),t.jsx("div",{ref:r,id:"task_pool",className:"task-pool-grid",children:n.length>0?n.map(o=>t.jsx(D,{task:o},o.id)):t.jsx("div",{className:"empty-state",children:"Nessun lavoro non programmato disponibile"})})]})}export{$ as default};
